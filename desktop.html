<html>
<head>
	<title>Desktop</title>

	<style type="text/css">;	 
/*
	com.trivedi.oPls.css
	Copyright (c) 2016-2020 M. P. Trivedi.  All rights reserved.
	Last updated: 2019.02.09 pm
*/
/*	https://www298.lunapic.com
https://www.hexcolortool.com/?_ga=2.14149620.256619627.1545063031-1310299918.1545063031#00265c

Cobalt Blue is: hex -> #0047AB;  decimal RGB -> rgb(0,71,171)
Royal Blue is: hex -> #00275E (see: http://www.99colors.net/hex/00275E)
rgba(0, 39, 94, 1);	 	hsla(215, 100%, 18%, 1)

Same color in lighter hues: #3365AA, #5E8ED1

Related blues (lightest is #3):
	1. Air Force blue (Hex code #5E8ED1)
	2. Lime (Hex code #BFDAFF)
	3. Platinum (Hex code #E5F0FF)
*/

/* Begin entire contents of tundra (modified stuff will be moved down & later removed)*/

	not imported:
@import url("form/Slider.css");
@import url("Tree.css");
@import url("ProgressBar.css");
@import url("TimePicker.css");

*/
/*@import url("../dijit.css");  */

/****
		GENERIC PIECES
 ****/

.dijitReset {
	/* Use this style to null out padding, margin, border in your template elements
		so that page specific styles don't break them.
		- Use in all TABLE, TR and TD tags.
	*/
	margin:0;
	border:0;
	padding:0;
	line-height:normal;
	font: inherit;
	color: inherit;
}
.dijit_a11y .dijitReset {
	-moz-appearance: none;  /* remove predefined high-contrast styling in Firefox */
}

.dijitInline {
	/*  To inline block elements.
		Similar to InlineBox below, but this has fewer side-effects in Moz.
		Also, apparently works on a DIV as well as a FIELDSET.
	*/
	display:inline-block;	 		/* webkit and FF3 */
	#zoom: 1;  /* set hasLayout:true to mimic inline-block */
	#display:inline;  /* don't use .dj_ie since that increases the priority */
	border:0;
	padding:0;
	vertical-align:middle;
	#vertical-align: auto;	 /* makes TextBox,Button line up w/native counterparts on IE6 */
}

.dijitHidden {
	/* To hide unselected panes in StackContainer etc. */
	display: none !important;
}

.dijitVisible {
	/* To show selected pane in StackContainer etc. */
	display: block !important;	 /* override user's display:none setting via style setting or indirectly via class */
	position: relative;	 		/* to support setting width/height, see #2033 */
}

.dijitInputContainer {
	/* for positioning of placeHolder */
	#zoom: 1;
	overflow: hidden;
	float: none !important;  /* needed by FF to squeeze the INPUT in */
	position:relative;
}

.dj_ie INPUT.dijitTextBox,
.dj_ie .dijitTextBox INPUT {
	font-size: 100%;
}
.dijitTextBox .dijitSpinnerButtonContainer,
.dijitTextBox .dijitArrowButtonContainer,
.dijitTextBox .dijitValidationContainer {
	float: right;
	text-align: center;
}
.dijitTextBox INPUT.dijitInputField {
	/* override unreasonable user styling of buttons and icons */
	padding-left: 0 !important;
	padding-right: 0 !important;
}
.dijitTextBox .dijitValidationContainer {
	display: none;
}
.dijitInlineTable {
	/* To inline tables with a given width set (otherwise, use dijitInline above) */
	display:inline-table;
	display:inline-block;	 	/* webkit and FF3 */
	#zoom: 1;  /* set hasLayout:true to mimic inline-block */
	#display:inline;  /* don't use .dj_ie since that increases the priority */
	box-sizing: content-box;  -moz-box-sizing: content-box;
	border:0;
	padding:0;
}

.dijitTeeny {
	font-size:1px;
	line-height:1px;
}

.dijitOffScreen {
	position: absolute;
	left: 50%;
	top: -10000px;
}

/*
 * Popup items have a wrapper div (dijitPopup)
 * with the real popup inside, and maybe an iframe too
 */
.dijitPopup {
	position: absolute;
	background-color: transparent;
	margin: 0;
	border: 0;
	padding: 0;
}
.dijit_a11y .dijitPopup,
.dijit_a11y .dijitPopup DIV,
.dijit_a11y .dijitPopup TABLE,
.dijit_a11y .dijitTooltipContainer {
	background-color: white !important;
}

.dijitPositionOnly {
	/* Null out all position-related properties */
	padding: 0 !important;
	border: 0 !important;
	background-color: transparent !important;
	background-image: none !important;
	height: auto !important;
	width: auto !important;
}

.dijitNonPositionOnly {
	/* Null position-related properties */
	float: none !important;
	position: static !important;
	margin: 0 0 0 0 !important;
	vertical-align: middle !important;
}

.dijitBackgroundIframe {
	/* iframe used to prevent problems with PDF or other applets overlaying menus etc */
	position: absolute;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	z-index: -1;
	border: 0;
	padding: 0;
	margin: 0;
}

.dijitDisplayNone {
	/* hide something.  Use this as a class rather than element.style so another class can override */
	display:none !important;
}

.dijitContainer {
	/* for all layout containers */
	overflow: hidden;	 /* need on IE so something can be reduced in size, and so scrollbars aren't temporarily displayed when resizing */
}

/****
		A11Y
 ****/
.dijit_a11y * {
	background-image:none !important;
}
.dijit_a11y .dijitIcon,
.dijit_a11y DIV.dijitArrowButtonInner, /* is this only for Spinner?  if so, it should be deleted */
.dijit_a11y SPAN.dijitArrowButtonInner,
.dijit_a11y IMG.dijitArrowButtonInner,
.dijit_a11y .dijitCalendarIncrementControl {
	/* hide icon nodes in high contrast mode;  when necesary they will be replaced by character equivalents
	 * exception for INPUT.dijitArrowButtonInner, because the icon and character are controlled by the same node */
	display: none;
}
.dijitSpinner DIV.dijitArrowButtonInner {
	display: block;  /* override previous rule */
}

.dijit_a11y .dijitA11ySideArrow {
	display: inline !important;  /* display text instead */
	cursor: pointer;
}

/*
 * Since we can't use shading in a11y mode, and since the underline indicates today's date,
 * use a border to show the selected date.
 * Avoid screen jitter when switching selected date by compensating for the selected node's
 * border w/padding on other nodes.
 */
.dijit_a11y .dijitCalendarDateLabel {
	padding: 1px;
}
.dijit_a11y .dijitCalendarSelectedDate .dijitCalendarDateLabel {
	border-style: dotted !important;
	border-width: 1px;
	padding: 0px;
}
.dijit_a11y .dijitCalendarDateTemplate {
	padding-bottom: 0.1em !important;	 /* otherwise bottom border doesn't appear on IE */
}

.dijit_a11y .dijit * {
	background:white !important;
	color:black !important;
}
.dijit_a11y .dijitButtonNode {
	border-color: black!important;
	border-style: outset!important;
	border-width: medium!important;
}

.dijit_a11y .dijitTextBoxReadOnly .dijitInputField,
.dijit_a11y .dijitTextBoxReadOnly .dijitButtonNode {
	border-style: outset!important;
	border-width: medium!important;
	border-color: #999 !important;
	color:#999 !important;
}

/* button inner contents - labels, icons etc. */
.dijitButtonNode * {
	vertical-align: middle;
}

.dijitButtonNode *:Active {
	/*background:-webkit-linear-gradient(top, #d1d1d1 0%,#ECECEC 100%);*/
	outline: none;	 /* nix the blue fuzzy line*/
}

.dijitButtonNode *:focus {
	outline: none;	 /* nix the blue fuzzy line*/
}

.dijitButtonNode .dijitArrowButtonInner {
	/* the arrow icon node */
	background: no-repeat center;
	width: 12px;
	height: 12px;
	direction: ltr;  /* needed by IE/RTL */
}

/****
	3-element borders:  ( dijitLeft + dijitStretch + dijitRight )
	These were added for rounded corners on dijit.form.*Button but never actually used.
 ****/

.dijitLeft {
	/* Left part of a 3-element border */
	background-position:left top;
	background-repeat:no-repeat;
}

.dijitStretch {
	/* Middle (stretchy) part of a 3-element border */
	white-space:nowrap;	 		/* MOW: move somewhere else */
	background-repeat:repeat-x;
}

.dijitRight {
	/* Right part of a 3-element border */
	#display:inline;	 			/* IE7 sizes to outer size w/o this */
	background-position:right top;
	background-repeat:no-repeat;
}

/* Buttons */

.dijitToggleButton,
.dijitButton,
.dijitDropDownButton,
.dijitComboButton {
	/* outside of button */
	margin: 0.2em;
}

.dijitButtonContents {
	display: inline;	 	/* tundra defaulted to 'block' to make focus border rectangular */
}
td.dijitButtonContents {
	display: table-cell;	 /* but don't affect Select, ComboButton */
}

.dijitButtonNode IMG {
	/* make text and images line up cleanly */
	vertical-align:middle;
	/*float: right;*/
	/*margin-bottom:.2em;*/
}

TABLE.dijitComboButton { /* TODO: why not add dijitReset class to ComboButton? */
	/* In ComboButton, borders are on each cell rather than on <table> itself */
	border-collapse: collapse;
	border:0;
	padding:0;
	margin:0;
}
.dijitToolbar .dijitComboButton {
	/* because Toolbar only draws a border around the hovered thing */
	border-collapse: separate;
}

.dijitToolbar .dijitToggleButton,
.dijitToolbar .dijitButton,
.dijitToolbar .dijitDropDownButton,
.dijitToolbar .dijitComboButton {
	margin: 0;
}

.dijitToolbar .dijitButtonContents {
	/* just because it used to be this way */
	padding: 1px 2px;
}

.dj_ie .dijitComboButton {
	/* hack to get inline-table to vertically align w/other buttons */
	margin-bottom: -3px;
}

.dj_webkit .dijitToolbar .dijitDropDownButton {
	padding-left: 0.3em;
}
.dj_gecko .dijitToolbar .dijitButtonNode::-moz-focus-inner {
	padding:0;
}

.dijitButtonNode {
	/* Node that is acting as a button -- may or may not be a BUTTON element*/
	border:1px solid #a7a7a7;
	margin:0px auto;
	background: white;  //#ECECEC;
	border-radius: 5px;
	padding: 3px;
	display: block;
	color: #00275E;
	text-align:center;
	line-height:normal;
	white-space: nowrap;
	text-shadow:0px 1px 0px #fff;
	box-shadow: 0px 2px 1px white inset, 0px -2px 8px white, 0px 2px 5px rgba(0, 0, 0, 0.1), 0px 8px 10px rgba(0, 0, 0, 0.1);
	-webkit-transition:box-shadow 0.5s;
}
.dj_webkit .dijitSpinner .dijitSpinnerButtonContainer {
	/* apparent WebKit bug where messing with the font coupled with line-height:normal X 2 (dijitReset & dijitButtonNode)
	can be different than just a single line-height:normal, visible in InlineEditBox/Spinner */
	line-height:inherit;
}
.dijitTextBox .dijitButtonNode {
	border-width: 0;
}

.dijitButtonNode,
.dijitButtonNode * {
	cursor: pointer;
}

.dj_ie .dijitButtonNode {
	/* ensure hasLayout */
	zoom: 1;
}

.dj_ie .dijitButtonNode button {
	/*
		disgusting hack to get rid of spurious padding around button elements
		on IE. MSIE is truly the web's boat anchor.
	*/
	overflow: visible;
}

DIV.dijitArrowButton {
	float: right;
}

/******
	TextBox related.
	Everything that has an <input>
*******/

.dijitTextBox {
	border: solid black 1px;
	#overflow: hidden;  /* #6027, #6067 */
	width: 15em;	 /* need to set default size on outer node since inner nodes say <input style="width:100%"> and <td width=100%>.  user can override */
	vertical-align: middle;
	#vertical-align: auto;
}

.dijitTextBoxReadOnly,
.dijitTextBoxDisabled {
	color: gray;
}
.dj_webkit .dijitTextBoxDisabled INPUT {
	color: #eee;  /* because WebKit lightens disabled input/textarea no matter what color you specify */
}
.dj_webkit TEXTAREA.dijitTextAreaDisabled {
	color: #333;  /* because WebKit lightens disabled input/textarea no matter what color you specify */
}
.dj_gecko .dijitTextBoxReadOnly INPUT,
.dj_gecko .dijitTextBoxDisabled INPUT {
	-moz-user-input: none;  /* prevent focus of disabled textbox buttons */
}

.dijitPlaceHolder {
	/* hint text that appears in a textbox until user starts typing */
	color: #AAAAAA;
	font-style: italic;
	position: absolute;
	top: 0;
	left: 0;
	#filter: "";  /* make this showup in IE6 after the rendering of the widget */
}

.dijitTimeTextBox {
	width: 8em;
}

/* rules for webkit to deal with fuzzy blue focus border */
.dijitTextBox INPUT:focus {
	outline: none;	 /* blue fuzzy line looks wrong on combobox or something w/validation icon showing */
}
.dijitTextBoxFocused {
	outline: auto 5px -webkit-focus-ring-color;
}

.dijitTextBox INPUT {
	float: left;  /* needed by IE to remove secret margin */
}
.dijitInputInner {
	/* for when an <input> is embedded inside an inline-block <div> with a size and border */
	border:0 !important;
	vertical-align:middle !important;
	background-color:transparent !important;
	width:100% !important;
	/* IE dislikes horizontal tweaking combined with width:100% so punish everyone for consistency */
	padding-left: 0 !important;
	padding-right: 0 !important;
	margin-left: 0 !important;
	margin-right: 0 !important;
}
.dijit_a11y .dijitTextBox INPUT {
	margin: 0 !important;
}
.dijitTextBoxError INPUT.dijitValidationInner,
.dijitTextBox INPUT.dijitArrowButtonInner {
	/* <input> used to display arrow icon/validation icon, or in arrow character in high contrast mode.
	 * The css below is a trick to hide the character in non-high-contrast mode
	 */
	text-indent: -1em !important;
	direction: ltr !important;
	text-align: left !important;
	height: auto !important;
	#text-indent: 0 !important;
	#letter-spacing: -5em !important;
	#text-align: right !important;
}
.dj_ie .dijitTextBox INPUT,
.dj_ie INPUT.dijitTextBox {
	overflow-y: visible;  /* INPUTs need help expanding when padding is added or line-height is adjusted */
	line-height: normal;  /* strict mode */
}
.dj_ie7 .dijitTextBox INPUT.dijitValidationInner,
.dj_ie7 .dijitTextBox INPUT.dijitArrowButtonInner {
	line-height: 86%;  /* IE7 problem where the icon is vertically too low w/o this - real input stays at normal */
}

.dj_iequirks .dijitTextBox INPUT.dijitValidationInner,
.dj_iequirks .dijitTextBox INPUT.dijitArrowButtonInner,
.dj_iequirks .dijitTextBox INPUT.dijitSpinnerButtonInner,
.dj_iequirks .dijitTextBox INPUT.dijitInputInner,
.dj_iequirks INPUT.dijitTextBox {
	line-height: 100%;  /* IE7 problem where the icon is vertically way too low w/o this */
}
.dijit_a11y INPUT.dijitValidationInner,
.dijit_a11y INPUT.dijitArrowButtonInner {
	/* (in high contrast mode) revert rules from above so character displays */
	text-indent: 0 !important;
	width: 1em !important;
	#text-align: left !important;
}
.dijitTextBoxError .dijitValidationContainer {
	display: inline;
	cursor: default;
}

/* ComboBox & Spinner */

.dijitSpinner .dijitSpinnerButtonContainer,
.dijitComboBox .dijitArrowButtonContainer {
	/* dividing line between input area and up/down button(s) for ComboBox and Spinner */
	border-width: 0 0 0 1px !important;  /* !important needed due to wayward ".theme .dijitButtonNode" rules */
}
.dijitSpinner .dijitSpinnerButtonContainer .dijitButtonNode {
	/* dividing line between input area and up/down button(s) for ComboBox and Spinner */
	border-width: 0;
}
.dj_ie .dijit_a11y .dijitSpinner .dijitSpinnerButtonContainer .dijitButtonNode {
	clear: both;  /* IE workaround */
}
.dijit_a11y .dijitTextBox .dijitValidationContainer,
.dijit_a11y .dijitTextBox .dijitSpinnerButtonContainer,
.dijit_a11y .dijitComboBox .dijitArrowButtonContainer {
	/* dividing line between input area and up/down button(s) for ComboBox and Spinner */
	border: solid black !important;
	border-width: 0 0 0 1px !important;
}

.dj_ie .dijitToolbar .dijitComboBox {
	/* make combobox buttons align porperly with other buttons in a toolbar */
	vertical-align: middle;
}

/* Spinner */

.dijitTextBox .dijitSpinnerButtonContainer {
	width: 1em;
	position: relative !important;
	overflow: hidden;
}
.dijitSpinner .dijitSpinnerButtonInner {
	width:1em;
	visibility:hidden !important;  /* just a sizing element */
	overflow-x:hidden;
}
.dijitComboBox .dijitButtonNode,
.dijitSpinnerButtonContainer .dijitButtonNode {
	border-width: 0;
}
.dijit_a11y .dijitSpinnerButtonContainer .dijitButtonNode {
	border: 0 none !important;
}
.dijit_a11y .dijitTextBox .dijitSpinnerButtonContainer,
.dijit_a11y .dijitSpinner .dijitArrowButtonInner,
.dijit_a11y .dijitSpinnerButtonContainer INPUT {
	width: 1em !important;
}
.dijit_a11y .dijitSpinner .dijitArrowButtonInner {
	margin: 0 auto !important;  /* should auto-center */
}
.dj_ie .dijit_a11y .dijitSpinner .dijitArrowButtonInner .dijitInputField {
	padding-left: 0.3em !important;
	padding-right: 0.3em !important;
	margin-left: 0.3em !important;
	margin-right: 0.3em !important;
	width: 1.4em !important;
}
.dj_ie7 .dijit_a11y .dijitSpinner .dijitArrowButtonInner .dijitInputField {
	padding-left: 0.0em !important;  /* manually center INPUT: character is .5em and total width = 1em */
	padding-right: 0.0em !important;
	width: 1em !important;
}

.dj_iequirks .dijit_a11y .dijitSpinner .dijitArrowButtonInner .dijitInputField {
	margin-left: 0 !important;
	margin-right: 0 !important;
	width: 2em !important;
}
.dijitSpinner .dijitSpinnerButtonContainer .dijitArrowButton {
	/* note: .dijitInputLayoutContainer makes this rule override .dijitArrowButton settings
	 * for dijit.form.Button
	 */
	padding: 0;
	position: absolute !important;
	right: 0;
	float: none;
	height: 50%;
	width: 100%;
	bottom: auto;
	left: 0;
	right: auto;
}
.dj_iequirks .dijitSpinner .dijitSpinnerButtonContainer .dijitArrowButton {
	width: auto;
}
.dijit_a11y .dijitSpinnerButtonContainer .dijitArrowButton {
	overflow: visible !important;
}
.dijitSpinner .dijitSpinnerButtonContainer .dijitDownArrowButton {
	top: 50%;
	border-top-width: 1px !important;
}
.dijitSpinner .dijitSpinnerButtonContainer .dijitUpArrowButton {
	#bottom: 50%;	 /* otherwise (on some machines) top arrow icon too close to splitter border (IE6/7) */
	top: 0;
}
.dijitSpinner .dijitArrowButtonInner {
	margin: auto;
	overflow-x: hidden;
	height: 100% !important;
}
.dj_iequirks .dijitSpinner .dijitArrowButtonInner {
	height: auto !important;
}
.dijitSpinner .dijitArrowButtonInner .dijitInputField {
	-moz-transform: scale(0.5);
	-moz-transform-origin: center top;
	-webkit-transform: scale(0.5);
	-webkit-transform-origin: center top;
	-o-transform: scale(0.5);
	-o-transform-origin: center top;
	transform: scale(0.5);
	transform-origin: left top;
	padding-top: 0;
	padding-bottom: 0;
	padding-left: 0 !important;
	padding-right: 0 !important;
	width: 100%;
}
.dj_ie .dijitSpinner .dijitArrowButtonInner .dijitInputField {
	zoom: 50%;  /* emulate transform: scale(0.5) */
}
.dijitSpinner .dijitSpinnerButtonContainer .dijitArrowButtonInner {
	overflow: hidden;
}

.dijit_a11y .dijitSpinner .dijitSpinnerButtonContainer .dijitArrowButton {
	width: 100%;
}
.dj_iequirks .dijit_a11y .dijitSpinner .dijitSpinnerButtonContainer .dijitArrowButton {
	width: 1em;  /* matches .dijit_a11y .dijitTextBox .dijitSpinnerButtonContainer rule - 100% is the whole screen width in quirks */
}
.dijitSpinner .dijitArrowButtonInner .dijitInputField {
	visibility: hidden;
}
.dijit_a11y .dijitSpinner .dijitArrowButtonInner .dijitInputField {
	vertical-align:top;
	visibility: visible;
}
.dijit_a11y .dijitSpinnerButtonContainer {
	width: 1em;
}
.dijit_a11y .dijitSpinnerButtonContainer .dijitButtonNode {
	border-width: 1px 0px 0px 0px;
	border-style: solid !important;
}

/****
		dijit.form.CheckBox
 	 &
  		dijit.form.RadioButton
 ****/

.dijitCheckBox,
.dijitRadio,
.dijitCheckBoxInput {
	padding: 0;
	border: 0;
	width: 16px;
	height: 16px;
	background-position:center center;
	background-repeat:no-repeat;
	overflow: hidden;
}

.dijitCheckBox INPUT,
.dijitRadio INPUT {
	margin: 0;
	padding: 0;
	display: block;
}

.dijitCheckBoxInput {
	/* place the actual input on top, but all-but-invisible */
	opacity: 0.01;
}

.dj_ie .dijitCheckBoxInput {
	filter: alpha(opacity=0);
}

.dijit_a11y .dijitCheckBox,
.dijit_a11y .dijitRadio {
	/* in a11y mode we display the native checkbox (not the icon), so don't restrict the size */
	width: auto !important;
	height: auto !important;
}
.dijit_a11y .dijitCheckBoxInput {
	opacity: 1;
	filter: none;
	width: auto;
	height: auto;
}


/****
		dijit.ProgressBar
 ****/

.dijitProgressBarEmpty {
	/* outer container and background of the bar that's not finished yet*/
	position:relative;overflow:hidden;
	border:1px solid black;  	/* a11y: border necessary for high-contrast mode */
	z-index:0;	 		/* establish a stacking context for this progress bar */
}

.dijitProgressBarFull {
	/* outer container for background of bar that is finished */
	position:absolute;
	overflow:hidden;
	z-index:-1;
	top:0;
	width:100%;
}

.dijitProgressBarTile {
	/* inner container for finished portion */
	position:absolute;
	overflow:hidden;
	top:0;
	left:0;
	bottom:0;
	right:0;
	margin:0;
	padding:0;
	width:auto;
	height:auto;
	background-color:#aaa;
	background-attachment: fixed;
}

.dijit_a11y .dijitProgressBarTile {
	/* a11y:  The border provides visibility in high-contrast mode */
	border-width:2px;
	border-style:solid;
	background-color:transparent !important;
}


.dijitProgressBarIndeterminate .dijitProgressBarLabel {
	visibility:hidden;
}

.dijitProgressBarIndeterminate .dijitProgressBarTile {
	/* animated gif for 'indeterminate' mode */
}

.dijitProgressBarIndeterminateHighContrastImage {
	display:none;
}

.dijit_a11y .dijitProgressBarIndeterminate .dijitProgressBarIndeterminateHighContrastImage {
	display:block;
	position:absolute;
	top:0;
	bottom:0;
	margin:0;
	padding:0;
	width:100%;
	height:auto;
}

.dijitProgressBarLabel {
	display:block;
	position:static;
	width:100%;
	text-align:center;
	background-color:transparent !important;
}

/* Layout widgets. This is essential CSS to make layout work (it isn't "styling" CSS)
   make sure that the position:absolute in dijitAlign* overrides other classes */

.dijitLayoutContainer {
	position: relative;
	display: block;
	overflow: hidden;
}

body .dijitAlignTop,
body .dijitAlignBottom,
body .dijitAlignLeft,
body .dijitAlignRight {
	position: absolute;
	overflow: hidden;
}

body .dijitAlignClient { position: absolute;  }

/*
 * BorderContaienr
 *
 * .dijitBorderContainer is a stylized layout where panes have border and margin.
 * .dijitBorderContainerNoGutter is a raw layout.
 */
.dijitBorderContainer, .dijitBorderContainerNoGutter {
	position:relative;
	overflow: hidden;
}

.dijitBorderContainerPane,
.dijitBorderContainerNoGutterPane {
	position: absolute !important;	 /* !important to override position:relative in dijitTabContainer etc. */
	z-index: 2;	 	/* above the splitters so that off-by-one browser errors don't cover up border of pane */
}

.dijitBorderContainer > .dijitTextArea {
	/* On Safari, for SimpleTextArea inside a BorderContainer,
		don't want to display the grip to resize */
	resize: none;
}

.dijitGutter {
	/* gutter is just a place holder for empty space between panes in BorderContainer */
	position: absolute;
	font-size: 1px;	 	/* needed by IE6 even though div is empty, otherwise goes to 15px */
}

/* SplitContainer

	'V' == container that splits vertically (up/down)
	'H' = horizontal (left/right)
*/

.dijitSplitter {
	position: absolute;
	overflow: hidden;
	z-index: 10;	 	/* above the panes so that splitter focus is visible on FF, see #7583*/
	background-color: #fff;
	border-color: gray;
	border-style: solid;
	border-width: 0;
}
.dj_ie .dijitSplitter {
	z-index: 1;	 /* behind the panes so that pane borders aren't obscured see test_Gui.html/[14392] */
}

.dijitSplitterActive {
	z-index: 11 !important;
}

.dijitSplitterCover {
	position:absolute;
	z-index:-1;
	top:0;
	left:0;
	width:100%;
	height:100%;
}

.dijitSplitterCoverActive {
	z-index:3 !important;
}

/* #6945: stop mouse events */
.dj_ie .dijitSplitterCover {
	background: white;
	filter: alpha(opacity=0);
}

.dijitSplitterH {
	height: 7px;
	border-top:1px;
	border-bottom:1px;
	cursor: ns-resize;
}
.dijitSplitterV {
	width: 7px;
	border-left:1px;
	border-right:1px;
	cursor: ew-resize;
}
.dijitSplitContainer {
	position: relative;
	overflow: hidden;
	display: block;
}
.dj_ff3 .dijit_a11y div.dijitSplitter:focus {
	outline-style:dotted;
	outline-width: 2px;
}

.dijitSplitPane {
	position: absolute;
}

.dijitSplitContainerSizerH,
.dijitSplitContainerSizerV {
	position:absolute;
	font-size: 1px;
	cursor: move;
	cursor: w-resize;
	background-color: ThreeDFace;
	border: 1px solid;
	border-color: ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight;
	margin: 0;
}

.dijitSplitContainerSizerH .thumb, .dijitSplitterV .dijitSplitterThumb {
	overflow:hidden;
	position:absolute;
	top:49%;
}

.dijitSplitContainerSizerV .thumb, .dijitSplitterH .dijitSplitterThumb {
	position:absolute;
	left:49%;
}

.dijitSplitterShadow,
.dijitSplitContainerVirtualSizerH,
.dijitSplitContainerVirtualSizerV {
	font-size: 1px;
	background-color: ThreeDShadow;
	-moz-opacity: 0.5;
	opacity: 0.5;
	filter: Alpha(Opacity=50);
	margin: 0;
}

.dj_ie .dijitSplitterV, .dijitSplitContainerVirtualSizerH {
	cursor: w-resize;
}
.dj_ie .dijitSplitterH, .dijitSplitContainerSizerV, .dijitSplitContainerVirtualSizerV {
	cursor: n-resize;
}

.dijit_a11y .dijitSplitterH {
	border-top:1px solid #d3d3d3 !important;
	border-bottom:1px solid #d3d3d3 !important;
}
.dijit_a11y .dijitSplitterV {
	border-left:1px solid #d3d3d3 !important;
	border-right:1px solid #d3d3d3 !important;
}

/* ContentPane */

.dijitContentPane {
	display: block;
	overflow: auto;	 /* if we don't have this (or overflow:hidden), then Widget.resizeTo() doesn't make sense for ContentPane */
}

.dijitContentPaneSingleChild {
	/*
	 * if the ContentPane holds a single layout widget child which is being sized to match the content pane,
	 * then the ContentPane should never get a scrollbar (but it does due to browser bugs, see #9449
	 */
	overflow: hidden;
}

/* TitlePane */

.dijitTitlePane {
	display: block;
	overflow: hidden;
}
.dijitTitlePaneTitle {
	cursor: pointer;
}
.dijitFixedOpen {
	/* TitlePane that cannot be closed */
	cursor: default;
}
.dijitTitlePaneTitle * {
	vertical-align: middle;
}
.dijitTitlePane .dijitArrowNodeInner {
	/* normally, hide arrow text in favor of icon */
	display: none;
}
.dijit_a11y .dijitTitlePane .dijitArrowNodeInner {
	/* ... except in a11y mode, then show text arrow */
	display:inline !important;
	font-family:'Open Sans', verdana,arial,sans-serif;
	/*font-family: monospace;	 	// because - and + are different widths */
}
.dijit_a11y .dijitTitlePane .dijitArrowNode {
	/* ... and hide icon */
	display:none;
}

/* Color Palette
 * Sizes designed so that table cell positions match icons in underlying image,
 * which appear at 20x20 intervals.
 */

.dijitColorPalette {
	border: 1px solid #999;
	background: #fff;
	position: relative;
}

img.dijitColorPaletteUnder {
	/* This single image contains the "icons" for every color in the color palette, and sits behind the transparent <table> */
	border-style: none;
	position: absolute;
	left: 0;
	top: 0;
}
.dijitColorPalette .dijitPaletteTable {
	/* Table that holds the palette cells, and overlays image file with color swatches.
	 * padding/margin to align table with image.
	 */
	padding: 2px 3px 3px 3px;
	position: relative;
	overflow: hidden;
	outline: 0;
	border-collapse: separate;
}
.dj_ie7 .dijitColorPalette .dijitPaletteTable,
.dj_iequirks .dijitColorPalette .dijitPaletteTable {
	/* using padding above so that focus border isn't cutoff on moz/webkit,
	 * but using margin on IE because padding doesn't seem to work
	 */
	padding: 0;
	margin: 2px 3px 3px 3px;
}

.dijitColorPalette .dijitPaletteCell {
	/* <td> in the <table>, matching size of color swatches embedded in the img.dijitColorPaletteUnder */
	height: 20px;
	width: 20px;
	font-size: 1px;
	vertical-align: middle;
	text-align: center;
}
.dijitColorPalette .dijitPaletteImg {
	/* transparent (but clickable) <img> node inside of each <td>, overlaying the color swatch.
	 * displays border around a color swatch
	 */
	width: 16px;
	height: 14px;
	border: 1px solid #999;
	cursor: default;
	vertical-align: middle;
}
.dj_iequirks .dijitColorPalette .dijitPaletteImg {
	margin: 1px;	 /* needed to fix spacing for ColorPalette in TooltipDialog on IE/quirks */
}
.dijitPaletteTable td {
		padding: 0px;
}
.dijitColorPalette .dijitPaletteCellHover .dijitPaletteImg {
	/* hovered color swatch */
	border: 1px solid #000;
}

.dijitColorPalette .dijitPaletteCellActive .dijitPaletteImg,
.dijitColorPalette .dijitPaletteCellSelected .dijitPaletteImg {
	border: 2px solid #000;
}


.dijit_a11y .dijitColorPalette .dijitPaletteTable,
.dijit_a11y .dijitColorPalette .dijitPaletteTable * {
	/* table cells are to catch events, but the swatches are in the PaletteImg behind the table */
	background-color: transparent !important;
}
.dj_gecko .dijit_a11y .dijitColorPalette .dijitPaletteCellFocused .dijitPaletteImg {
	border: 3px dotted #000;	 /* focus border on table cells broken in FF high contrast :-( */
	margin: -1px;
}

.dijit_a11y  .dijitColorPalette .dijitPaletteCellHover .dijitPaletteImg {
	border: 2px solid #000 !important;
}

/* AccordionContainer */

.dijitAccordionContainer {
	border:1px solid #b7b7b7;
	border-top:0 !important;
}
.dijitAccordionTitle {
	cursor: pointer;
}
.dijitAccordionTitleSelected {
	background-color: #3365AA;
	cursor: default;
}

/* images off, high-contrast mode styles */
.dijitAccordionTitle .arrowTextUp,
.dijitAccordionTitle .arrowTextDown {
	display: none;
	font-size: 0.65em;
	font-weight: normal !important;
}

.dijit_a11y .dijitAccordionTitle .arrowTextUp,
.dijit_a11y .dijitAccordionTitleSelected .arrowTextDown {
	display: inline;
}

.dijit_a11y .dijitAccordionTitleSelected .arrowTextUp {
	display: none;
}

.dj_iequirks .dijitAccordionTitle {
	/* avoid IE6/IE quirks size calc bug where accordion ends up too short (themeTesterQuirk.html)
	 * and IE6 bug where the first title bar turns white upon hovering any title bar
	 */
	zoom: 1;
}

/* Calendar */

.dijitCalendarContainer {
	width: auto;	 /* in case user has specified a width for the TABLE nodes, see #10553 */
}
.dijitCalendarContainer th, .dijitCalendarContainer td {
	padding: 0;
}

.dijitCalendarNextYear {
	margin:0 0 0 0.55em;
}

.dijitCalendarPreviousYear {
	margin:0 0.55em 0 0;
}

.dijitCalendarIncrementControl {
	vertical-align: middle;
}

.dijitCalendarIncrementControl,
.dijitCalendarDateTemplate,
.dijitCalendarMonthLabel,
.dijitCalendarPreviousYear,
.dijitCalendarNextYear {
	cursor: pointer;
}

.dijitCalendarDisabledDate {
	color: gray;
	text-decoration: line-through;
	cursor: default;
}

.dijitSpacer {
	/* don't display it, but make it affect the width */
  	position: relative;
  	height: 1px;
  	overflow: hidden;
  	visibility: hidden;
}


/* Menu */

.dijitMenu {
	border:1px solid black;
	background-color:white;
}
.dijitMenuTable {
	border-collapse:collapse;
	border-width:0;
	background-color:white;
}

/* workaround for webkit bug #8427, remove this when it is fixed upstream */
.dj_webkit .dijitMenuTable td[colspan="2"]{
	border-right:hidden;
}

.dijitMenuItem {
	text-align: left;
	white-space: nowrap;
	padding:.1em .2em;
	cursor:pointer;
}

.dijitMenuPassive .dijitMenuItemHover,
.dijitMenuItemSelected {
	/*
	 * dijitMenuItemHover refers to actual mouse over
	 * dijitMenuItemSelected is used after a menu has been "activated" by
	 * clicking it, tabbing into it, or being opened from a parent menu,
	 * and denotes that the menu item has focus or that focus is on a child
	 * menu
	 */
	background-color:black;
	color:white;
}

.dijitMenuItemIcon, .dijitMenuExpand {
	background-repeat: no-repeat;
}

.dijitMenuItemDisabled * {
	/* for a disabled menu item, just set it to mostly transparent */
	opacity:0.5;
	cursor:default;
}
.dj_ie .dijit_a11y .dijitMenuItemDisabled,
.dj_ie .dijit_a11y .dijitMenuItemDisabled td,
.dj_ie .dijitMenuItemDisabled *,
.dj_ie .dijitMenuItemDisabled td {
	color:gray !important;
	filter: alpha(opacity=35);
}

.dijitMenuItemLabel {
	position: relative;
	vertical-align: middle;
}

.dijit_a11y .dijitMenuItemSelected {
	border: 1px dotted black !important;
}
.dj_ff3 .dijit_a11y .dijitMenuItem td {
	padding: none !important;
	background:none !important;
}
.dijit_a11y .dijitMenuItemSelected .dijitMenuItemLabel {
	border-width: 1px;
	border-style: solid;
}
.dj_ie8 .dijit_a11y .dijitMenuItemLabel {
	position:static;
}

.dijitMenuExpandA11y {
	display: none;
}
.dijit_a11y .dijitMenuExpandA11y {
	display: inline;
}

.dijitMenuSeparator td {
	border: 0;
	padding: 0;
}

/* separator can be two pixels -- set border of either one to 0 to have only one */
.dijitMenuSeparatorTop {
	height: 50%;
	margin: 0;
	margin-top:3px;
	font-size: 1px;
}

.dijitMenuSeparatorBottom {
	height: 50%;
	margin: 0;
	margin-bottom:3px;
	font-size: 1px;
}

/* the checked menu item */
.dijitCheckedMenuItemIconChar {
	vertical-align: middle;
	visibility:hidden;
}
.dijitCheckedMenuItemChecked .dijitCheckedMenuItemIconChar {
	visibility: visible;
}
.dijit_a11y .dijitCheckedMenuItemIconChar {
	display:inline !important;
}
.dijit_a11y .dijitCheckedMenuItemIcon {
	display: none;
}
.dj_ie .dijit_a11y .dijitMenuBar .dijitMenuItem {
	/* so bottom border of MenuBar appears on IE7 in high-contrast mode */
	margin: 0px;
}

/* StackContainer */

.dijitStackController .dijitToggleButtonChecked * {
	cursor: default;	 /* because pressing it has no effect */
}

/* TabContainer */

/*
below pasted from 1.1 dijit.css
*/
/* Tab */


.dijitTabLabels-top {
/* position the tab labels row down by 1 px, and on top of the dijitTabPaneWrapper
	so the buttons can overlay the tab pane properly		*/
	top:1px !important;
	z-index:10;	 
}

.dijitTabLabels-bottom {
/* position the tab labels row up by 1 px so they overlap	*/
	margin-top:-1px !important;
	z-index:10;	 
}

.dijitTabLabels-left-h {
/* position the tab labels left by 1 px so they overlap		*/
	margin-right:-1px !important;
	z-index:10;	 
}

.dijitTabLabels-right-h {
/* position the tab labels right by 1 px, on top of the dijitTabPaneWrapper
	so the buttons can overlay the tab pane properly		*/
	margin-left:-1px !important;
	z-index:10;	 
}

.dijitTabPaneWrapper {
	z-index:0;
	overflow: hidden;
	clear: both;	 /* needed for doLayout=false mode */
}

.dijitTab {
	position:relative;
	float:left;
	cursor:pointer;
	white-space:nowrap;
	z-index:3;
}

.dijitTabContainer .dijitAlignLeft .dijitTab,
.dijitTabContainer .dijitAlignRight .dijitTab {
	float:none;
}

.dijitTabInnerDiv {
	position:relative;
}

.dijitTab .close {
	display: inline-block;
	cursor: default;
	font-size: small;
}

/* images off, high-contrast mode styles */
.dijitTab .closeText {
	display:none;
	padding: 0 2px;
	margin: 0 2px;
}
.dijit_a11y .dijitTab .closeImage {
	padding: 0 !important;
	margin: 0 !important;
	top: 0 !important;
	bottom: 0 !important;
}
.dijit_a11y .closeText {
	display:inline;
	margin-left:6px;
}
.dijit_a11y .closeText:hover {
	border:thin solid;
}
.dijit_a11y .dijitTabChecked {
	border-style:dashed !important;
}

.dijit_a11y .dijitTabInnerDiv {
	border-left:none !important;
 }

/* end paste from dijit.css*/


/* Dialog */

.dijitDialog {
	position: absolute;
	z-index: 999;
	overflow: hidden;        /* override overflow: auto;  from ContentPane to make dragging smoother */
}

.dijitDialogTitleBar {
	background-color: red;  //#E5F0FF;
	/*cursor: move;*/
}
.dijitDialogFixed .dijitDialogTitleBar {
	cursor:default;
}
.dijitDialogCloseIcon {
	cursor: pointer;
}
.dijitDialogUnderlayWrapper {
	position: absolute;
	left: 0;
	top: 0;
	z-index: 998;
	display: none;
	background: transparent !important;
}

.dijitDialogUnderlay {
	background: #eee;
	opacity: 0.5;
}

.dj_ie .dijitDialogUnderlay {
	filter: alpha(opacity=50);
}

/* images off, high-contrast mode styles */
.dijit_a11y .dijitSpinnerButtonContainer,
.dijit_a11y .dijitDialog {
	opacity: 1 !important;
	background-color: white !important;
}

.dijitDialog .closeText {
	/*display:none;
	 for the onhover border in high contrast on IE: */
	position:absolute;
}

.dijit_a11y .dijitDialog .closeText {
	display:inline;
}

/* Slider */

.dijitSliderMoveable {
	z-index:99;
	position:absolute !important;
	display:block;
	vertical-align:middle;
}

.dijitSliderMoveableH {
	right:0;
}
.dijitSliderMoveableV {
	right:50%;
}

.dijit_a11y DIV.dijitSliderImageHandle,
.dijitSliderImageHandle {
	margin:0;
	padding:0;
	position:relative !important;
	border:8px solid gray;
	width:0;
	height:0;
	cursor: pointer;
}
.dj_iequirks .dijit_a11y .dijitSliderImageHandle {
	font-size: 0;
}
.dj_ie7 .dijitSliderImageHandle {
	overflow: hidden;  /* IE7 workaround to make slider handle VISIBLE in non-a11y mode */
}
.dj_ie7 .dijit_a11y .dijitSliderImageHandle {
	overflow: visible;  /* IE7 workaround to make slider handle VISIBLE in a11y mode */
}
.dijit_a11y .dijitSliderFocused .dijitSliderImageHandle {
	border:4px solid #000;
	height:8px;
	width:8px;
}

.dijitSliderImageHandleV {
	top:-8px;
	right: -50%;
}

.dijitSliderImageHandleH {
	left:50%;
	top:-5px;
	vertical-align:top;
}

.dijitSliderBar {
	border-style:solid;
	border-color:black;
	cursor: pointer;
}

.dijitSliderBarContainerV {
	position:relative;
	height:100%;
	z-index:1;
}

.dijitSliderBarContainerH {
	position:relative;
	z-index:1;
}

.dijitSliderBarH {
	height:4px;
	border-width:1px 0;
}

.dijitSliderBarV {
	width:4px;
	border-width:0 1px;
}

.dijitSliderProgressBar {
	background-color:red;
	z-index:1;
}

.dijitSliderProgressBarV {
	position:static !important;
	height:0%;
	vertical-align:top;
	text-align:left;
}

.dijitSliderProgressBarH {
	position:absolute !important;
	width:0%;
	vertical-align:middle;
	overflow:visible;
}

.dijitSliderRemainingBar {
	overflow:hidden;
	background-color:transparent;
	z-index:1;
}

.dijitSliderRemainingBarV {
	height:100%;
	text-align:left;
}

.dijitSliderRemainingBarH {
	width:100% !important;
}

/* the slider bumper is the space consumed by the slider handle when it hangs over an edge */
.dijitSliderBumper {
	overflow:hidden;
	z-index:1;
}

.dijitSliderBumperV {
	width:4px;
	height:8px;
	border-width:0 1px;
}

.dijitSliderBumperH {
	width:8px;
	height:4px;
	border-width:1px 0;
}

.dijitSliderBottomBumper,
.dijitSliderLeftBumper {
	background-color:red;
}

.dijitSliderTopBumper,
.dijitSliderRightBumper {
	background-color:transparent;
}

.dijitSliderDecoration {
	text-align:center;
}
.dijitSliderV TD {
	position: relative;  /* needed for IE+quirks+RTL+vertical (rendering bug) but add everywhere for custom styling consistency but this messes up IE horizontal sliders */
}

.dijitSliderDecorationH {
	width: 100%;
}

.dijitSliderDecorationV {
	height: 100%;
}

.dijitSliderButton {
	/*font-family:monospace;*/
	font-family:'Open Sans', verdana,arial,sans-serif;
	margin:0;
	padding:0;
	display:block;
}

.dijit_a11y .dijitSliderButtonInner {
	visibility:visible !important;
}

.dijitSliderButtonContainer {
	text-align:center;
	height:0;	 /* ??? */
}
.dijitSliderButtonContainer * {
	cursor: pointer;
}

.dijitSlider .dijitButtonNode {
	padding:0;
	display:block;
}

.dijitRuleContainer {
	position:relative;
	overflow:visible;
}

.dijitRuleContainerV {
	height:100%;
	line-height:0;
	float:left;
	text-align:left;
}

.dj_opera .dijitRuleContainerV {
	line-height:2%;
}

.dj_ie .dijitRuleContainerV {
	line-height:normal;
}

.dj_gecko .dijitRuleContainerV {
	margin:0 0 1px 0;  /* mozilla bug workaround for float:left,height:100% block elements */
}

.dijitRuleMark {
	position:absolute;
	border:1px solid black;
	line-height:0;
	height:100%;
}

.dijitRuleMarkH {
	width:0;
	border-top-width:0 !important;
	border-bottom-width:0 !important;
	border-left-width:0 !important;
}

.dijitRuleLabelContainer {
	position:absolute;
}

.dijitRuleLabelContainerH {
	text-align:center;
	display:inline-block;
}

.dijitRuleLabelH {
	position:relative;
	left:-50%;
}

.dijitRuleLabelV {
	/* so that long labels don't overflow to multiple rows, or overwrite slider itself */
	text-overflow: ellipsis;
	white-space: nowrap;
	overflow: hidden;
}

.dijitRuleMarkV {
	height:0;
	border-right-width:0 !important;
	border-bottom-width:0 !important;
	border-left-width:0 !important;
	width:100%;
	left:0;
}

.dj_ie .dijitRuleLabelContainerV {
	margin-top:-.55em;
}

.dijit_a11y .dijitSliderReadOnly,
.dijit_a11y .dijitSliderDisabled {
	opacity:0.6;
}
.dj_ie .dijit_a11y .dijitSliderReadOnly .dijitSliderBar,
.dj_ie .dijit_a11y .dijitSliderDisabled .dijitSliderBar {
	filter: alpha(opacity=40);
}

/* + and - Slider buttons: override theme settings to display icons */
.dijit_a11y .dijitSlider .dijitSliderButtonContainer DIV {
	/*font-family: monospace;  // otherwise hyphen is larger and more vertically centered */
	font-family:'Open Sans', verdana,arial,sans-serif;
	font-size: 1em;
	line-height: 1em;
	height: auto;
	width: auto;
	margin: 0px 4px;
}

/* Icon-only buttons (often in toolbars) still display the text in high-contrast mode */
.dijit_a11y .dijitButtonContents .dijitButtonText,
.dijit_a11y .dijitTab .tabLabel {
	display: inline !important;
}

/* TextArea, SimpleTextArea */
.dijitTextArea {
	width:100%;
	overflow-y: auto;	 /* w/out this IE's SimpleTextArea goes to overflow: scroll */
}
.dijitTextArea[cols] {
	width:auto;  /* SimpleTextArea cols */
}
.dj_ie .dijitTextAreaCols {
	width:auto;
}

/* Toolbar
 * Note that other toolbar rules (for objects in toolbars) are scattered throughout this file.
 */

.dijitToolbarSeparator {
	height: 18px;
	width: 5px;
	padding: 0 1px;
	margin: 0;
}

/* Editor */
.dijitIEFixedToolbar {
	position:absolute;
	/* top:0;  */
	top: expression(eval((document.documentElement||document.body).scrollTop));
}

.dijitEditor {
	display: block;	 /* prevents glitch on FF with InlineEditBox, see #8404 */
}

.dijitEditorDisabled,
.dijitEditorReadOnly {
	color: gray;
}

/* TimePicker */

.dijitTimePickerItemInner {
	text-align:center;
	border:0;
	padding:2px 8px 2px 8px;
}

.dijitTimePickerTick,
.dijitTimePickerMarker {
	border-bottom:1px solid gray;
}

.dijitTimePicker .dijitDownArrowButton {
	border-top: none !important;
}

.dijitTimePickerTick {
	color:lightgrey;
}

.dijitTimePickerMarker {
	color:black;
	background-color:lightgrey;
}

.dijitTimePickerItemSelected {
	font-weight:bold;
	color:#333;
	background-color:#b7cdee;
}

.dijitTimePickerItemHover {
	background-color:gray;
	color:white;
	cursor:pointer;
}
.dijit_a11y .dijitTimePickerItemSelected .dijitTimePickerItemInner {
	border: solid 4px black;
}
.dijit_a11y .dijitTimePickerItemHover .dijitTimePickerItemInner {
	border: dashed 4px black;
}


.dijitToggleButtonIconChar {
	/* character (instead of icon) to show that ToggleButton is checked */
	display:none !important;
}
.dijit_a11y .dijitToggleButton .dijitToggleButtonIconChar {
	display:inline !important;
	visibility:hidden;
}

.dijit_a11y .dijitToggleButtonChecked .dijitToggleButtonIconChar {
	display: inline !important;  /* In high contrast mode, display the check symbol */
	visibility:visible !important;
}

.dijitArrowButtonChar {
        display:none !important;
}
.dijit_a11y .dijitArrowButtonChar {
        display:inline !important;
}

.dijit_a11y .dijitDropDownButton .dijitArrowButtonInner,
.dijit_a11y .dijitComboButton .dijitArrowButtonInner {
	display:none !important;
}

/* Select */
.dijitSelect {
	margin: 0.2em;
	border-collapse: collapse;
}
.dj_ie .dijitSelect,
.dj_ie7 .dijitSelect,
.dj_iequirks .dijitSelect {
	vertical-align: middle;  /* Set this back for what we hack in dijit inline */
}
.dj_ie8 .dijitSelect .dijitButtonText {
	vertical-align: top;
}
.dijitToolbar .dijitSelect {
	margin: 0;
}
.dj_webkit .dijitToolbar .dijitSelect {
	padding-left: 0.3em;
}
.dijit_a11y .dijitSelectDisabled .dijitButtonNode {
	border-style: outset!important;
	border-width: medium!important;
	border-color: #999 !important;
	color:#999 !important;
}
.dijitSelect .dijitButtonContents {
	padding: 0px;
	background: transparent none;
	white-space: nowrap;
	text-align: left;
}
.dijitSelectFixedWidth .dijitButtonContents {
	width: 100%;
}

.dijitSelectMenu .dijitMenuItemIcon {
	/* avoid blank area in left side of menu (since we have no icons) */
	display:none;
}
.dj_ie7 .dijitSelectMenu .dijitMenuItemLabel {
	/* Set back to static due to bug in ie6/ie7 - See Bug #9651 */
	position: static;
}

/* Fix the baseline of our label (for multi-size font elements) */
.dijitSelectLabel *
{
	vertical-align: baseline;
}

/* Styling for the currently-selected option (rich text can mess this up) */
.dijitSelectSelectedOption * {
	font-weight: bold;
}

/* Fix the styling of the dropdown menu to be more combobox-like */
.dijitSelectMenu {
	border-width: 1px;
}

/* Style the different areas of the button to look like a "real" dropdown */
/* Remove margins on the sub-table */
.dijitSelectMenu .dijitMenuTable {
	margin: 0px;
	background-color: transparent;
}

/* Used in cases, such as FullScreen plugin, when we need to force stuff to static positioning. */
.dijitForceStatic {
	position: static !important;
}

/**** Disabled cursor *****/
.dijitReadOnly *,
.dijitDisabled *,
.dijitReadOnly,
.dijitDisabled {
	/* a region the user would be able to click on, but it's disabled */
	cursor: default;
}


/* Dijit widget common icons*/

.oPlsCreateIcon,
.oPlsCutIcon,
.oPlsCopyIcon,
.oPlsPasteIcon,
.oPlsSaveIcon,
.oPlsArchiveIcon,
.oPlsSortIcon,
.oPlsDeleteIcon,
.oPlsUndoIcon,
.oPlsRedoIcon,
.oPlsFilterListIcon,
.oPlsErrorIcon,
.oPlsErrorOutlineIcon,
.oPlsWarningIcon,
.oPlsAccountBoxIcon,
.oPlsAccountCircleIcon,
.oPlsAnnouncementIcon,
.oPlsBuildIcon,
.oPlsCodeIcon,
.oPlsCopyrightIcon,
.oPlsDashboardIcon,
.oPlsDoneIcon,
.oPlsAllDoneIcon,
.oPlsFingerprintIcon,
.oPlsAttachmentIcon,
.oPlsviewColumnIcon,
.oPlsviewListIcon,
.oPlsviewListIcon2,
.oPlsviewModuleIcon,
.oPlsviewQuiltIcon,
.oPlsviewWeekIcon {
	background-image: url('https://i.postimg.cc/MTZhTcZF/1.png');
	background-repeat: no-repeat;
	width: 24px;
	height: 21px;
}

.oPlsLeftArrowIcon,
.oPlsRightArrowIcon,
.oPlsUpArrowIcon,
.oPlsDownArrowIcon,
.oPlsCaretLeftIcon,
.oPlsCaretRightIcon,
.oPlsCaretUpIcon,
.oPlsCaretDownIcon,
.oPlsSortUpIcon,
.oPlsSortDownIcon,
.oPlsSortAlphaDownIcon,
.oPlsSortAlphaUpIcon,
.oPlsSortNumericDownIcon,
.oPlsSortNumericUpIcon,
.oPlsCheckBox2,
.oPlsCheckBoxChecked2,
.oPlsRadio2,
.oPlsRadioChecked2,
.oPlsCheckBox,
.oPlsToggleButton .oPlsCheckBoxIcon,
.oPlsCheckBoxChecked,
.oPlsToggleButtonChecked .oPlsCheckBoxIcon,
.oPlsCheckBoxDisabled,
.oPlsCheckBoxCheckedDisabled,
.oPlsRadio,
.oPlsRadioIcon,
.oPlsRadioChecked,
.oPlsToggleButtonChecked .oPlsRadioIcon,
.oPlsRadioDisabled,
.oPlsFolderclosedIcon,
.oPlsFolderOpenedIcon,
.oPlsBanIcon,
.oPlsExclamationCircleIcon,
.oPlsExclamationTriangleIcon,
.oPlsInfoIcon,
.oPlsHelpIcon,
.oPlsCloseCircleIcon,
.oPlsCloseIcon,
.oPlsConfigIcon,
.oPlsConfigAllIcon,
.oPlsUserConfigIcon,
.oPlsUserCheckIcon,
.oPlsFlagIcon,
.oPlsFlagIcon2 {
	background-image: url('https://i.postimg.cc/nrCg46DK/2.png');
	background-repeat: no-repeat;
	width: 24px;
	height: 21px;
}

/* Narrower than default*/
.oPlsSortUpIcon,
.oPlsSortDownIcon  { 
	width: 22px;
}


.oPlsMaximizeIcon,
.oPlsMinimizeIcon,
.oPlsConsoleIcon,
.oPlsTblIcon,
.oPlsCopyrightIcon2,
.oPlsCopyrightIcon3,
.oPlsEditIcon2,
.oPlsCopyIcon2,
.oPlsPasteIcon2,
.oPlsSaveIcon2,
.oPlsDeleteIcon2,
.oPlsUndoIcon2,
.oPlsRedoIcon2,
.oPlsBookmarkIcon,
.oPlsBookmarkIcon2,
.oPlsHandIcon,
.oPlsSrchIcon,
.oPlsStarIcon,
.oPlsStarIcon2,
.oPlsFileIcon,
.oPlsFileIcon2,
.oPlsFileIcon3,
.oPlsFileIcon4,
.oPlsFileIcon5,
.dijitTooltipLeft
.dijitTooltipRight,
.dijitTooltipBelow,
.dijitTooltipAbove
 {
	background-image: url('https://i.postimg.cc/Rhy8XX7k/3.png');
	background-repeat: no-repeat;
	width: 24px;
	height: 21px;
}

/* Wider than default */
.oPlsConsoleIcon,
.oPlsConfigUserIcon,
.oPlsConfigAllIcon {
	width: 25px;
}

.oPlsCheck_boxIcon,
.oPlsCheck_box_outline_blankIcon,
.oPlsRadio_button_uncheckedIcon,
.oPlsRadio_button_checkedIcon,
.oPlsAdd_boxIcon,
.oPlsRemove_boxIcon,
.oPlsAdd_circleIcon,
.oPlsRemove_circleIcon,
.oPlsSettingsIcon,
.oPlsBookmark_borderIcon,
.oPlsSearchIcon,
.oPlsFind_in_pageIcon,
.oPlsFind_replaceIcon,
.oPlsZoom_inIcon,
.oPlsZoom_outIcon,
.oPlsHourglass_emptyIcon,
.oPlsHourglass_fullIcon,
.oPlsHttpIcon,
.oPlsLaunchIcon,
.oPlsLabelIcon,
.oPlsLabel_outlineIcon,
.oPlsStarIcon4,
.oPlsStar_halfIcon4,
.oPlsStar_borderIcon4,
.oPlsStarsIcon4,
.oPlsSwap_horizIcon,
.oPlsSwap_vertIcon,
.oPlsSwap_vertical_circleIcon,
.oPlsLockIcon,
.oPlsLock_outlineIcon,
.oPlsNote_addIcon,
.oPlsMenuIcon,
.oPlsMore_horizIcon,
.oPlsMore_vertIcon,
.oPlsRefreshIcon,
.oPlsUnfold_lessIcon,
.oPlsUnfold_moreIcon,
.oPlsFirst_pageIcon,
.oPlsChevron_leftIcon,
.oPlsChevron_rightIcon,
.oPlsLast_pageIcon,
.oPlsExpand_lessIcon,
.oPlsExpand_moreIcon {
	background-image: url('https://i.postimg.cc/zDc9zXsx/4.png');
	background-repeat: no-repeat;
	width: 24px;
	height: 21px;
}


.oPlsDisabled .oPlsIconSave,
.oPlsDisabled .oPlsIconPrint,
.oPlsDisabled .oPlsIconCut,
.oPlsDisabled .oPlsIconCopy,
.oPlsDisabled .oPlsIconPaste,
.oPlsDisabled .oPlsIconSave,
.oPlsDisabled .oPlsIconClear,
.oPlsDisabled .oPlsIconDelete,
.oPlsDisabled .oPlsIconUndo,
.oPlsDisabled .oPlsIconRedo,
.oPlsDisabled .oPlsIconEdit {
	background-image: url('images\\1d.gif');
}

.oPlsDisabled .oPlsInfoIcon,
.oPlsDisabled .oPlsLeftArrowIcon,
.oPlsDisabled .oPlsRightArrowIcon,
.oPlsDisabled .oPlsUpArrowIcon,
.oPlsDisabled .oPlsDownArrowIcon,
.oPlsCheckBoxDisabled,
.oPlsCheckBoxCheckedDisabled,
.oPlsDisabled .oPlsConfigIcon,
.oPlsDisabled .oPlsConfigAllIcon,
.oPlsDisabled .oPlsConfigUserIcon,
.oPlsDisabled .oPlsCheckUserIcon  {
	background-image: url('images\\2d.gif');
}

.oPlsDisabled .oPlsConsoleIcon,
.oPlsDisabled .icon2,
.oPlsDisabled .icon3 {
	background-image: url('images\\3d.gif');
}

/*sprite #1*/
.oPlsCreateIcon { background-position: 1px;  }
.oPlsCutIcon { background-position: -26px;  }
.oPlsCopyIcon { background-position: -54px;  }
.oPlsPasteIcon  { background-position: -83px;  }
.oPlsSaveIcon { background-position: -108px;  }
.oPlsArchiveIcon { background-position: -135px;  }
.oPlsSortIcon { background-position: -162px;  }
.oPlsDeleteIcon { background-position: -188px;  }
.oPlsUndoIcon { background-position: -216px;  }
.oPlsRedoIcon { background-position: -244px;  }
.oPlsFilterListIcon { background-position: -269px;  }
.oPlsErrorIcon { background-position: -299px;  }
.oPlsErrorOutlineIcon { background-position: -325px;  }
.oPlsWarningIcon { background-position: -352px;  }
.oPlsAccountBoxIcon { background-position: -378px;  }
.oPlsAccountCircleIcon { background-position: -406px;  }
.oPlsAnnouncementIcon { background-position: -432px;  }
.oPlsBuildIcon { background-position: -459px;  }
.oPlsCodeIcon { background-position: -486px;  }
.oPlsCopyrightIcon { background-position: -513px;  }
.oPlsDashboardIcon { background-position: -540px;  }
.oPlsDoneIcon { background-position: -567px;  }
.oPlsAllDoneIcon { background-position: -594px;  }
.oPlsFingerprintIcon { background-position: -621px;  }
.oPlsAttachmentIcon { background-position: -648px;  }
.oPlsviewColumnIcon { background-position: -677px;  }
.oPlsviewListIcon { background-position: -706px;  }
.oPlsviewListIcon2 { background-position: -737px;  }
.oPlsviewModuleIcon { background-position: -772px;  }
.oPlsviewQuiltIcon { background-position: -803px;  }
.oPlsviewWeekIcon { background-position: -832px;  }


/*sprite #2*/
.oPlsLeftArrowIcon  { background-position: -3px;  }
.oPlsRightArrowIcon  { background-position: -28px;  }
.oPlsUpArrowIcon  { background-position: -53px;  }
.oPlsDownArrowIcon  { background-position: -78px;  }
.oPlsCaretLeftIcon  { background-position: -102px;  }
.oPlsCaretRightIcon  { background-position: -122px;  }
.oPlsCaretUpIcon  { background-position: -144px;  }
.oPlsCaretDownIcon  { background-position: -163px;  }
.oPlsSortUpIcon  { background-position: -181px;  }
.oPlsSortDownIcon  { background-position: -198px;  }
.oPlsSortAlphaDownIcon  { background-position: -218px;  }
.oPlsSortAlphaUpIcon  { background-position: -240px;  }
.oPlsSortNumericDownIcon  { background-position: -262px;  }
.oPlsSortNumericUpIcon  { background-position: -284px;  }
.oPlsCheckBox2  { background-position: -308px;  }
.oPlsCheckBoxChecked2  { background-position: -330px;  }
.oPlsRadio2  { background-position: -353px;  }
.oPlsRadioChecked2  { background-position: -379px;  }

.oPlsCheckBox,
.oPlsToggleButton .oPlsCheckBoxIcon { background-position: -402px;  }
.oPlsCheckBoxChecked, 
.oPlsToggleButtonChecked .oPlsCheckBoxIcon  { background-position: -426px;  }

.oPlsRadio,
.oPlsToggleButton .oPlsRadioIcon { background-position: -473px;  }

.oPlsRadioChecked,
.oPlsToggleButtonChecked .oPlsRadioIcon { background-position: -500px;  }

.oPlsFolderclosedIcon  { background-position: -529px;  }
.oPlsFolderOpenedIcon  { background-position: -559px;  }
.oPlsBanIcon  { background-position: -545px;  }
.oPlsExclamationCircleIcon  { background-position: -576px;  }
.oPlsExclamationTriangleIcon  { background-position: -602px;  }
.oPlsInfoIcon  { background-position: -628px;  }
.oPlsHelpIcon  { background-position: -653px;  }
.oPlsCloseCircleIcon  { background-position: -678px;  }
.oPlsCloseIcon  { background-position: -702px;  }
.oPlsConfigIcon  { background-position: -723px;  }
.oPlsConfigAllIcon  { background-position: -749px;  }
.oPlsUserConfigIcon  { background-position: -780px;  }
.oPlsUserCheckIcon  { background-position: -810px;  }
.oPlsFlagIcon  { background-position: -837px;  }
.oPlsFlagIcon2  { background-position: -863px;  }


/*sprite #3*/
.oPlsMaximizeIcon { background-position: -3px;  }
.oPlsMinimizeIcon { background-position: -28px;  }
.oPlsConsoleIcon { background-position: -54px;  }
.oPlsTblIcon { background-position: -80px;  }
.oPlsCopyrightIcon2 { background-position: -104px;  }
.oPlsCopyrightIcon3 { background-position: -129px;  }
.oPlsEditIcon2 { background-position: -155px;  }
.oPlsCopyIcon2 { background-position: -181px;  }
.oPlsPasteIcon2 { background-position: -203px;  }
.oPlsSaveIcon2 { background-position: -225px;  }
.oPlsUndoIcon2 { background-position: -246px;  }
.oPlsRedoIcon2 { background-position: -279px;  }
.oPlsBookmarkIcon { background-position: -301px;  }
.oPlsBookmarkIcon2 { background-position: -320px;  }
.oPlsHandIcon { background-position: -343px;  }
.oPlsSrchIcon { background-position: -366px;  }
.oPlsStarIcon { background-position: -391px;  }
.oPlsStarIcon2 { background-position: -420px;  }
.oPlsFileIcon { background-position: -445px;  }
.oPlsFileIcon2 { background-position: -467px;  }
.oPlsFileIcon3 { background-position: -489px;  }
.oPlsFileIcon4 { background-position: -511px;  }
.oPlsFileIcon5 { background-position: -533px;  } 

/* MISSING: (MONKEY BIZ) REPL later .oPlsDeleteIcon2 { background-position: -247px;  }*/

/*https://i.postimg.cc/MpkNB3KR/tree-Expand-loading.gif*/

.dijitTooltipLeft {
	/*	top: 0px;
	left: 3px;*/
	background-position: -560px;
/*	width:16px;
	height:14px;*/
}
.dijitTooltipRight {
	/* top: 0px;
	left: 3px;*/
	background-position: -575px;
/*	width:16px;
	height:14px;*/
}
.dijitTooltipBelow {
	/* top: 0px;
	left: 3px;*/
	background-position: -595px;
/*	width:16px;
	height:14px;*/
}
.dijitTooltipAbove {
	/* top: 0px;
	left: 3px;*/
	background-position: -623px;
/*	width:16px;
	height:14px;*/
}


/*sprite #4*/
.oPlsCheck_boxIcon { background-position: -2px;  }
.oPlsCheck_box_outline_blankIcon { background-position: -27px;  }
.oPlsRadio_button_uncheckedIcon { background-position: -55px;  }
.oPlsRadio_button_checkedIcon { background-position: -82px;  }
.oPlsAdd_boxIcon { background-position: -109px;  }
.oPlsRemove_boxIcon { background-position: -136px;  }
.oPlsAdd_circleIcon { background-position: -163px;  }
.oPlsRemove_circleIcon { background-position: -190px;  }
.oPlsSettingsIcon { background-position: -217px;  }
.oPlsBookmark_borderIcon { background-position: -244px;  }
.oPlsSearchIcon { background-position: -271px;  }
.oPlsFind_in_pageIcon { background-position: -298px;  }
.oPlsFind_replaceIcon { background-position: -325px;  }
.oPlsZoom_inIcon { background-position: -352px;  }
.oPlsZoom_outIcon { background-position: -379px;  }
.oPlsHourglass_emptyIcon { background-position: -406px;  }
.oPlsHourglass_fullIcon { background-position: -433px;  }
.oPlsHttpIcon { background-position: -460px;  }
.oPlsLaunchIcon { background-position: -487px;  }
.oPlsLabelIcon { background-position: -514px;  }
.oPlsLabel_outlineIcon { background-position: -541px;  }
.oPlsStarIcon4 { background-position: -568px;  }
.oPlsStar_halfIcon4 { background-position: -595px;  }
.oPlsStar_borderIcon4 { background-position: -622px;  }
.oPlsStarsIcon4 { background-position: -649px;  }
.oPlsSwap_horizIcon { background-position: -676px;  }
.oPlsSwap_vertIcon { background-position: -703px;  }
.oPlsSwap_vertical_circleIcon { background-position: -730px;  }
.oPlsLockIcon { background-position: -757px;  }
.oPlsLock_outlineIcon { background-position: -784px;  }
.oPlsNote_addIcon { background-position: -811px;  }
.oPlsMenuIcon { background-position: -838px;  }
.oPlsMore_horizIcon { background-position: -865px;  }
.oPlsMore_vertIcon { background-position: -892px;  }
.oPlsRefreshIcon { background-position: -919px;  }
.oPlsUnfold_lessIcon { background-position: -946px;  }
.oPlsUnfold_moreIcon { background-position: -973px;  }
.oPlsFirst_pageIcon { background-position: -1000px;  }
.oPlsChevron_leftIcon { background-position: -1027px;  }
.oPlsChevron_rightIcon { background-position: -1054px;  }
.oPlsLast_pageIcon { background-position: -1081px;  }
.oPlsExpand_lessIcon { background-position: -1108px;  }
.oPlsExpand_moreIcon { background-position: -1135px;  }

.oPlsSysTblIcon, .oPlsDocTblIcon, .oPlsTaskTblIcon, .oPlsImgTblIcon {
	background:url("https://i.postimg.cc/zBVh67Pw/0.png");
	background-repeat: no-repeat;
	width:6px;
	height:30px;
}

.oPlsHackers, .oPlsTblIconLg, .oPlsTblIconLg25, .oPlsSysTblIcon, .oPlsDocTblIcon, .oPlsTaskTblIcon, .oPlsImgTblIcon {
	background:url("https://i.postimg.cc/zBVh67Pw/0.png");
	background-repeat: no-repeat;
	width:30px;
	height:40px;
}
.oPlsHackers {
	background-position: 0px -160px;
}
.oPlsFlameIcon {
	background:url("https://i.postimg.cc/zBVh67Pw/0.png");
	background-repeat: no-repeat;
	width:14px;
	height:20px;
	background-position: 0px -62px;
}
.oPlsTblIconLg, .oPlsTblIconLg:hover {
	width:50px;
	height:60px;
}
.oPlsTblIconLg{
	background-position: -55px 0px;
}
.oPlsTblIconLg:hover{
	background-position: 0px 0px;
}
.oPlsSysTblIcon, .oPlsDocTblIcon, .oPlsTaskTblIcon, .oPlsImgTblIcon {
	width:45px;
	height:55px;
}

.oPlsDocTblIcon { background-position: -308px 0px;  }
.oPlsImgTblIcon { background-position: -342px 0px;  }
.oPlsSysTblIcon { background-position: -376px 0px;  }
.oPlsTaskTblIcon { background-position: -406px 0px;  }





/*@import url("Common.css");*/
/* DnD avatar-specific settings */
/* For now it uses a default set of rules. Some other DnD classes can be modified as well. */
.dojoDndItemBefore {
	border-top: 2px solid #369;
}

.dojoDndItemAfter {
	border-bottom: 2px solid #369;
}

.dojoDndItemOver {
	cursor:pointer;
}

.tundra table.dojoDndAvatar { -moz-border-radius: 0;  border: 1px solid lightgrey;  border-collapse: collapse;  background-color: #fff;  font-size: 75%;  color: black;}
.dojoDndAvatar td	{ border: none;  }
.dojoDndAvatar tr	{ border: none;  }
.dojoDndAvatarHeader td	{ height: 20px;  padding: 0 0 0 21px;  }
.dojoDndAvatarItem td { padding: 2px;}
.tundra.dojoDndMove .dojoDndAvatarHeader	{background-color: #f58383;  background-image: url(images/dndNoMove.png);  background-repeat: no-repeat;  background-position: 2px center;}
.tundra.dojoDndCopy .dojoDndAvatarHeader	{background-color: #f58383;  background-image: url(images/dndNoCopy.png);  background-repeat: no-repeat;  background-position: 2px center;}
.tundra.dojoDndMove .dojoDndAvatarCanDrop .dojoDndAvatarHeader	{background-color: #97e68d;  background-image: url(images/dndMove.png);  background-repeat: no-repeat;  background-position: 2px center;}
.tundra.dojoDndCopy .dojoDndAvatarCanDrop .dojoDndAvatarHeader	{background-color: #97e68d;  background-image: url(images/dndCopy.png);  background-repeat: no-repeat;  background-position: 2px center;}

.dijitContentPaneLoading {
	background:url('images/loading.gif') no-repeat left center;
	padding-left:25px;
}

.dijitContentPaneError {
	background:url('images/warning.png') no-repeat left center;
	padding-left:25px;
}

/*@import url("layout/ContentPane.css");*/
/* ContentPane */

.dijitContentPane {
	padding: 0px;
}

/* nested layouts */
.dijitTabContainerTop-dijitContentPane,
.dijitTabContainerLeft-dijitContentPane,
.dijitTabContainerBottom-dijitContentPane,
.dijitTabContainerRight-dijitContentPane,
.dijitAccordionContainer-dijitContentPane {
	padding: 5px;
}

.dijitSplitContainer-dijitContentPane,
.dijitBorderContainer-dijitContentPane {
	background-color: #fff;	 	/* override background-color setting on parent .dijitBorderContainer */
	padding: 5px;
}

/*@import url("layout/TabContainer.css");*/
/* Tabs, shared classes */
.dijitTabPaneWrapper {
	background:#fff;
	border:1px solid lightgrey;
	margin: 0;
	padding: 0;
}

.dijitTab {
	line-height:normal;
	margin-right:4px;	 /* space between one tab and the next in top/bottom mode */
	padding:0px;
	border:1px solid lightgrey;
	background: lightgrey;
}

.dijitTabInnerDiv {
	padding:2px 8px 2px 9px;
}

.dijitTabSpacer {
	display: none;
}

.dijitTabContainer .tabStripRBtn {
	margin-right: 20px;
}
.dijitTabContainer .tabStripLBtn {
	margin-left: 20px;
}

.nowrapTabStrip .dijitTab {
	top: 2px;
}
.dijitTabContainerBottom .nowrapTabStrip .dijitTab {
	top: 0px;
	bottom: 2px;
}

/* checked tab*/
.dijitTabChecked {
	color: violet;  //#00275E;
	background-color: #E5F0FF;
	border-top-color:#00275E;
	border-left-color:#00275E;
	border-right-color:#00275E;
	border-bottom-color:lightgrey;
	background-image:none;
}

/* hovered tab */
.dijitTabHover {
	color: #243C5F;
	background-color: white;
	border:2px solid;
	border-top-color:#00275E;
	border-left-color:#00275E;
	border-right-color:#00275E;
	border-bottom-color:white;
}

.dijitTabContainerTop .dijitTabHover {
	border-bottom-color:red;  //lightgrey;
}

.dijitTabContainerBottom .dijitTabHover {
	border-top-color:lightgrey;
}

.dijitTabContainerLeft .dijitTabHover {
	border-right-color:lightgrey;
}

.dijitTabContainerRight .dijitTabHover {
	border-left-color:lightgrey;
}

.dijitTabContainer .dijitTabCheckedHover {
}

.dijitTab .tabLabel {
	/* make sure tabs w/close button and w/out close button are same height, even w/small (12px) font */
	min-height: 12px;
	padding: 5px;
	display: inline-block;
}

/* Nested Tabs */

.dijitTabContainerNested .dijitTabListWrapper {
	height: auto;
}

.dijitTabContainerNested .dijitTabContainerTop-tabs {
	border-bottom: 1px solid lightgrey;
}

.dijitTabContainerTabListNested .dijitTab {
	background: none;
	border: none;
	top: 0px;	 	/* to override top: 1px/-1px for normal tabs */
}
.dijitTabContainerTabListNested .dijitTab .dijitTabContent {
}
.dijitTabContainerTabListNested .dijitTabHover .dijitTabContent .tabLabel {
	text-decoration: underline;
}
.dijitTabContainerTabListNested .dijitTabChecked .dijitTabContent .tabLabel {
	text-decoration: underline;
	font-weight: bold;
}
.dijitTabContainer .dijitTabPaneWrapperNested {
	border: none;	 /* prevent double border */
}

/* Close button */

.dijitTabCloseButton {
	//oPlsCloseCircleIcon
	background-image: url('https://i.postimg.cc/nrCg46DK/2.png');
	background-position: -678px;
	background-repeat: no-repeat;
	width: 24px;
	height: 21px;
}

.dijitTabCloseButtonHover {
	//no hover img yet
}


/* ================================ */
/* top tabs */

.dijitTabContainerTop-tabs {
	margin-bottom: 0px;
	border-color: lightgrey;
	padding-left: 3px;
	background-position: bottom;
}
.dijitTabContainerTop-tabs .dijitTab {
	top: 0px;
	margin-bottom: -1px;
}

/* top container */
.dijitTabContainerTop-container {
	border-top: none;
}

/* checked tabs */
.dijitTabContainerTop-tabs .dijitTabChecked {
	border-bottom-color:white;
}

.dijitTabContainerTop-tabs,
.dijitTabContainerBottom-tabs {
	padding-left: 3px;
	padding-right: 3px;
}

/* strip */
.dijitTabContainerTopStrip {
	border-top: 1px solid lightgrey;
	border-right: 1px solid lightgrey;
	border-left: 1px solid lightgrey;
	padding-top: 2px;
	background: #f2f2f2;
}

.dijitTabContainerTopNone {
	padding-top: 0px;
}


/* ================================ */
/* bottom tabs */
.dijitTabContainerBottom-tabs {
	margin-top: 0px;
	border-color: lightgrey;
	background-position: top;
	padding-left: 3px;
}
.dijitTabContainerBottom-tabs .dijitTab {
	bottom: 0px;
	margin-top: -1px;
}

/* bottom container */
.dijitTabContainerBottom-container {
	border-bottom: none;
}

/* checked tabs */
.dijitTabContainerBottom-tabs .dijitTabChecked {
	border-top-color:white;
}

/* strip */
.dijitTabContainerBottomStrip {
	padding-bottom: 2px;
	border: 1px solid lightgrey;
	background: #f2f2f2;
	border-top: none;
}

/* ================================ */
/* right tabs */
.dijitTabContainerRight-tabs {
	border-color: lightgrey;
	height: 100%;
	padding-top: 3px;
}

.dijitTabContainerRightStrip {
	margin-left: -1px;
}

/* right container */
.dijitTabContainerRight-container {
	border-right: none;
}

/* checked tabs */
.dijitTabContainerRight-tabs .dijitTabChecked {
	border-left-color:white;
}

/* strip */
.dijitTabContainerRightStrip {
	padding-right: 2px;
	border: 1px solid lightgrey;
}

.dijitTabContainerRightStrip {
	background: #f2f2f2;
}

/* ================================ */
/* left tabs */
.dijitTabContainerLeft-tabs {
	border-color: lightgrey;
	padding-top: 3px;
	height: 100%;
}

/* left conatiner */
.dijitTabContainerLeft-container {
	border-left: none;
}

/* checked tabs */
.dijitTabContainerLeft-tabs .dijitTabChecked {
	border-right-color:white;
}

/* strip */
.dijitTabContainerLeftStrip {
	padding-left: 2px;
	border: 1px solid lightgrey;
	background: #f2f2f2;
	border-right: none;
}

/* ================================ */
/* left/right tabs */
.dijitTabContainerLeft-tabs .dijitTab,
.dijitTabContainerRight-tabs .dijitTab {
	margin-right:0px;
	margin-bottom:4px;	 /* space between one tab and the next in left/right mode */
}

/* ================================ */

/* this resets the tabcontainer stripe when within a contentpane */
.dijitTabContainerTop-dijitContentPane .dijitTabContainerTop-tabs {
	border-left: 0px solid lightgrey;
	border-top: 0px solid lightgrey;
	border-right: 0px solid lightgrey;
	padding-top: 0px;
	padding-left: 0px;
}

/* ================================ */

/* Menu and slider control styles */
.dijitTabContainer .tabStripButton {
	margin-right: 0;
	padding-top: 2px;
	z-index: 12;
}

.dijitTabContainerBottom .tabStripButton {
	padding-top: 2px;
}

.tabStrip-disabled .tabStripButton .dijitTabInnerDiv {
	padding-bottom: 3px;
	padding-top: 1px;
}

.tabStripButton .dijitTabInnerDiv {
	padding: 3px 2px 4px 2px;
}

.dj_ie7 .tabStripButton .dijitTabInnerDiv,
.dj_opera .tabStripButton .dijitTabInnerDiv {
	padding-bottom: 5px;
}
.dj_ie7 .tabStrip-disabled .tabStripButton .dijitTabInnerDiv,
.dj_opera .tabStrip-disabled .tabStripButton .dijitTabInnerDiv {
	padding-bottom: 4px;
}

.dijitTabStripIcon {
	height: 14px;
	width: 14px;
	//background: url(../css/images/spriteRoundedIconsSmall.png) no-repeat left top ;
}

.dijitTabStripSlideRightIcon {
	//background-position: -30px top;
}

.dijitTabStripMenuIcon {
	/*oPlsMenuIcon*/
	background-image: url('https://i.postimg.cc/zDc9zXsx/4.png');
	background-repeat: no-repeat;
	width: 24px;
	height: 21px;
	background-position: -838px; 
}


/*@import url("layout/AccordionContainer.css");*/
/* Accordion */

.dijitAccordionContainer {
	border-color: lightgrey;
	background-color: #E5F0FF;
}

/* common */

.dijitAccordionTitle {
	background: #E5F0FF;
	border: 1px solid #00275E;
	color: #00275E;
	padding: 4px 4px 4px 8px;
}

.dijitAccordionTitleHover  {
	color: red;
	box-shadow: 0px 2px 1px grey inset, 0px -2px 20px grey, 0px 2px 5px rgba(0, 0, 0, 0.1), 0px 8px 10px rgba(0, 0, 0, 0.1);
}

.dijitAccordionTitleSelected  {
	font-weight: bold;
	border: 1px solid white;
	padding: 4px 4px 4px 8px;
}


/*@import url("layout/SplitContainer.css");*/
.dijitSplitContainerSizerH {
	background:url("../css/images/splitContainerSizerV.png") repeat-y #fff;
	border:0;
	border-left:1px solid #bfbfbf;
	border-right:1px solid #bfbfbf;
	width:7px;
}

.dijitSplitContainerSizerH .thumb {
	background:url("../css/images/splitContainerSizerV-thumb.png") no-repeat lightgrey;
	left:1px;
	width:3px;
	height:19px;
	overflow: hidden;
}

.dijitSplitContainerSizerV {
	background:url("../css/images/splitContainerSizerH.png") repeat-x #fff;
	border:0;
	border-top:1px solid #bfbfbf;
	border-bottom:1px solid #bfbfbf;
	height:7px;
}

.dijitSplitContainerSizerV .thumb {
	background:url("../css/images/splitContainerSizerH-thumb.png") no-repeat lightgrey;
	top:1px;
	width:19px;
	height:3px;
	overflow: hidden;
}
/*@import url("layout/BorderContainer.css");*/
/* BorderContainer */

.dijitBorderContainer {
	background-color: #fcfcfc;
	padding: 5px;
}

.dijitSplitContainer-child,
.dijitBorderContainer-child {
	/* By default put borders on all children of BorderContainer,
	 *  to give illusion of borders on the splitters themselves.
	 */
	border: 1px lightgrey solid;
	padding: 5px;
}

.dijitBorderContainer-dijitTabContainerTop,
.dijitBorderContainer-dijitTabContainerBottom,
.dijitBorderContainer-dijitTabContainerLeft,
.dijitBorderContainer-dijitTabContainerRight {
	/* except that TabContainer defines borders on it's sub-nodes (tablist and dijitTabPaneWrapper),
	 * so override rule setting border on domNode
	 */
	 border: none;
}

.dijitBorderContainer-dijitBorderContainer {
	/* also, make nested BorderContainers look like a single big widget with lots of splitters */
	border: none;
	padding: 0px;
}

.dijitSplitterH,
.dijitGutterH {
	background:#fcfcfc;
	border:0;
	height:5px;
}

.dijitSplitterH .dijitSplitterThumb {
	background:#B0B0B0 none;
	height:1px;
	top:2px;
	width:19px;
}

.dijitSplitterV,
.dijitGutterV {
	background:#fcfcfc;
	border:0;
	width:5px;
}

.dijitSplitterV .dijitSplitterThumb {
	background:#B0B0B0 none;
	height:19px;
	left:2px;
	width:1px;
}

/* active splitter */
.dijitSplitterActive {
	font-size: 1px;
	background-image: none;
	background-color: #aaa;
	-moz-opacity: 0.6;
	opacity: 0.6;
	filter: Alpha(Opacity=60);
	margin: 0;
}

/*@import url("form/Common.css");*/

/****
		dijit.form.TextBox
		dijit.form.ValidationTextBox
		dijit.form.SerializableTextBox
		dijit.form.RangeBoundTextBox
		dijit.form.NumberTextBox
		dijit.form.CurrencyTextBox
		dijit.form.NumberSpinner
		dijit.form.ComboBox (partial)
 ****/

.dijitInputContainer INPUT,
.dijitTextBox {
	margin: 0em 0.1em;
}

.dijitTextArea {
	padding: 3px;
}

.dijitTextBox {
	/* 	For all except dijit.form.NumberSpinner:  the actual input element.
		For TextBox, ComboBox, Spinner: the div that contains the input.
		Otherwise the actual input element.
	background:#fff url("../css/images/validationInputBg.png") repeat-x top left;
	*/
	border:1px solid #b3b3b3;
}

/* ComboBox specific rules*/
.dijitComboBox .dijitButtonNode {
	padding: 0 0.2em;
}
.dijitTextBox .dijitButtonNode {
	/* line between the input area and the drop down button, and also between
	 * the up and down buttons of a spinner
	 */
	border-color: #9b9b9b;
}

.dijitTextBoxFocused {
	/* input field when focused (ie: typing affects it) */
	border-color:#406b9b;
}
.dijitTextBoxFocused .dijitButtonNode {
	border-color:#366dba;
}

.dijitError {
	background-color:#f9f7ba;
	background-image:none;
}

.dijitErrorFocused {
	background-color:#f9f999;
	background-image:none;
}

/* Validation errors  */
.dijitValidationIcon {
	/* prevent height change when widget goes from valid to invalid state */
	//.oPlsExclamationTriangleIcon	background-image: url('https://i.postimg.cc/nrCg46DK/2.png');
	background-repeat: no-repeat;
	background-position: -602px;
	width: 24px;
	height: 21px;
}

/* The highlight is shown in the ComboBox menu. */
.dijitComboBoxHighlightMatch {
	background-color:#a5beda;
}

.dijitFocusedLabel {
	/* for checkboxes or radio buttons, hatch border around the corresponding label, to indicate focus */
	outline: 1px dotted #666666;
}
/*@import url("form/Button.css");*/

/*****
		dijit.form.Button
		dijit.form.DropDownButton
		dijit.form.ComboButton
		dijit.form.ComboBox (partial)
		dijit.form.Spinner (partial) (TODO: create NumberSpinner.css file like claro has)
 *****/

.dijitButtonNode {
	/* enabled state - inner */
	/*border: 1px solid #c0c0c0;*/
	/*border-bottom: 1px solid #9b9b9b;*/
	padding: 0.1em 0.2em 0.2em 0.2em;
}
.dijitButtonText {
	text-align: center;
	padding: 4px;
}

.dijitArrowButton {
	color: #00275E;
}

.dijitComboButton .dijitDownArrowButton {
	padding-right: 2px;
}

.dijitTextBoxReadOnly,
.dijitTextBoxReadOnly .dijitButtonNode,
.dijitToggleButtonDisabled .dijitButtonNode,
.dijitDropDownButtonDisabled .dijitButtonNode,
.dijitComboButtonDisabled .dijitButtonNode,
.dijitTextBoxDisabled,
.dijitTextBoxDisabled .dijitButtonNode {
	/* disabled state - inner */
	border-color: red; //#d5d5d5 #d5d5d5 #bdbdbd #d5d5d5;
	background: #d5d5d5;
}

.dijitDisabled .dijitButtonText {
	color: grey;  //#7F7F7F;
}
.dijitButtonDisabled .dijitButtonNode {
	border-color: red;  //#d5d5d5 #d5d5d5 #bdbdbd #d5d5d5;
	border:0px solid;
	color: blue;
	background: #d5d5d5;
}

.dijitButtonHover .dijitButtonNode,
.dijitButtonNodeHover,
.dijitToggleButtonHover .dijitButtonNode,
.dijitDropDownButtonHover .dijitButtonNode,
.dijitComboButton .dijitButtonContentsHover,
.dijitComboButton .dijitDownArrowButtonHover {
	/* hover state - inner */
	/* TODO: change from Hover to Selected so that button is still highlighted while drop down is being used */
	/*
	border-color: #a5beda;
	border-bottom-color:#5c7590;
	color:#243C5F;
	*/
	/*box-shadow: 0px 1px 0px grey inset, 0px -2px 10px white, 0px 1px 3px rgba(0, 0, 0, 0.1), 0px 8px 10px rgba(0, 0, 0, 0.1);*/
	box-shadow: 4px -4px 3px 2px lightgrey;
	
}
.dijitDownArrowButtonHover,
.dijitUpArrowButtonHover {
	/* same as above except don't adjust border color (it's controlled by the containing Spinner/ComboBox) */
	/*color:#243C5F;*/
	box-shadow: 4px -4px 3px 2px lightgrey;
}

.dijitUpArrowButtonActive,
.dijitDownArrowButtonActive,
.dijitButtonActive .dijitButtonNode,
.dijitToggleButtonActive .dijitButtonNode,
.dijitDropDownButtonActive .dijitButtonNode,
.dijitButtonContentsActive,
.dijitStackController .dijitToggleButtonChecked .dijitButtonNode {
	/* active state - inner (for when you are pressing a normal button, or
	 * when a radio-type button is in a depressed state
	 */
	box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.5) inset, 0px -2px 20px white, 0px 1px 5px rgba(0, 0, 0, 0.1), 0px 2px 10px rgba(0, 0, 0, 0.1);
}

.dijitArrowButtonInner {
	width: 7px;
	height: 7px;
	margin: 0px 4px 0px 4px;
}
.dijitTextBox .dijitArrowButtonInner {
	background-position: 0 center;
}

.dijitLeftArrowButton .dijitArrowButtonInner {
	background-position: -7px center;
}
.dijitRightArrowButton .dijitArrowButtonInner {
	background-position: -14px center;
}
.dijitUpArrowButton .dijitArrowButtonInner {
	background-position: -21px center;
}

.dijitDisabled .dijitArrowButtonInner {
	background-position: -28px center;
}
.dijitDisabled .dijitLeftArrowButton .dijitArrowButtonInner {
	background-position: -35px center;
}
.dijitDisabled .dijitRightArrowButton .dijitArrowButtonInner {
	background-position: -42px center;
}
.dijitDisabled .dijitUpArrowButton .dijitArrowButtonInner {
	background-position: -49px center;
}
.dj_webkit .dijitSpinner .dijitUpArrowButton .dijitArrowButtonInner {
	margin-top: -1px;  /* image has too many blank pixels on top */
}
.dj_ie .dijitSpinner .dijitDownArrowButton .dijitArrowButtonInner {
	margin-top: -2px;  /* image has too many blank pixels on top */
}
.dj_ie8 .dijitSpinner .dijitDownArrowButton .dijitArrowButtonInner {
	margin-top: -1px;  /* image has too many blank pixels on top */
}
.dijitSpinnerButtonContainer {
	width: auto;
	padding: 0;
}
.dijitSpinner .dijitArrowButton {
	width: 15px;
}
.dijitSpinner .dijitSpinnerButtonInner {
	width: 15px;
}
.dijitSpinner .dijitArrowButtonInner .dijitInputField {
	padding: 0;
}

/*@import url("form/RadioButton.css");*/

.dijitRadio,			/* stand alone */
.dijitRadioIcon	{		/* inside a toggle button */
	/*.oPlsRadio_button_uncheckedIcon*/
	background-image: url('https://i.postimg.cc/zDc9zXsx/4.png');
	background-repeat: no-repeat;
	width: 24px;
	height: 21px;
}


.dijitToggleButton .dijitRadioIcon {
	/* for checkbox in a toggle button, override above setting to have no border 
	background-image: url('https://i.postimg.cc/MTZhTcZF/1.png');
	background-position: -567px;
	background-repeat: no-repeat;
	width: 24px;
	height: 21px;

}

.dijitRadio,
.dijitRadioIcon {
	/* unselected */
	background-position: -55px;
}

.dijitRadioDisabled {
	/* unselected and disabled */
	//background-position: -144px;
}

.dijitRadioHover {
	/* hovering over an unselected enabled radio button */
	//background-position: -176px;
}

.dijitRadioChecked,
.dijitRadioCheckedHover,
.dijitToggleButtonChecked .dijitRadioIcon {
	/* selected.  Since clicking a selected radio button doesn't change anything, there's
	 * no hover effect on selected radio buttons.
	 */
	background-position: -82px;
}

.dijitRadioCheckedDisabled {
	/* selected but disabled */
	//background-position: -128px;
}

/*@import url("form/Select.css");*/
.dijitSelect .dijitButtonNode {
	padding: 0px;
}
.dijitSelect .dijitButtonNode .dijitArrowButtonInner {
	margin: 0px 4px 0px 5px;
}

/* Make unselected content portion "look" more like a text box and less like a button */
.dijitSelect .dijitButtonContents {
	padding-top: 1px;
}
.dijitSelectHover .dijitButtonContents,
.dijitSelectActive .dijitButtonContents,
.dijitSelectOpened .dijitButtonContents,
.dijitSelectDisabled .dijitButtonContents,
.dijitSelectReadOnly .dijitButtonContents{
	background: transparent none;
}
.dj_ie .dijitSelect .dijitButtonContents {
	padding-top: 0px;
}

/* Mirror DropDownButton */
.dijitSelectDisabled .dijitButtonNode {
	border-color: #d5d5d5 #bdbdbd #bdbdbd #d5d5d5;

}
.dj_ie .dijitSelectDisabled  .dijitButtonNode * {
	filter: gray() alpha(opacity=50);
}

.dijitSelectHover .dijitButtonNode {
	border-color:#a5beda;
	border-bottom-color:#5c7590;
	border-right-color:#5c7590;
	color:#243C5F;
}

.dijitSelectActive .dijitButtonNode,
.dijitSelectOpened .dijitButtonNode {
	border-color:#366dba;
	border-color:green;
}

/* Make the menu look more combobox-like */
.dijitSelectMenu td {
	padding: 0em;
}
.dijitSelectMenu .dijitMenuItemLabel,
.dijitSelectMenu .dijitMenuArrowCell {
	padding: 4px;
}

/*@import url("TitlePane.css");*/
.dijitTitlePaneTitle {
	background: #E5F0FF;
	border:1px solid #bfbfbf;
	padding:3px 4px;
}
.dijitTitlePaneTitleHover  {
	background: #BFDAFF;
}

.dijitTitlePane .dijitArrowNode {
	/*background-image: url('images/spriteArrows.png');*/
	background-repeat: no-repeat;
	background-position: 0px 0px;
	height: 7px;
	width: 7px;
}

.dijitTitlePane .dijitClosed .dijitArrowNode {
	background-position: -14px 0px;
}

.dijitTitlePaneContentOuter {
	background: #ffffff;
	border:1px solid #bfbfbf;
	border-top: 0px;
}
.dijitTitlePaneContentInner {
	padding:10px;
}

.dijitTitlePaneTextNode {
	margin-left: 4px;
	margin-right: 4px;
}
/*@import url("Calendar.css");*/
/* Calendar*/

.dijitCalendarIncrementControl {
	/* next/prev month buttons */
	width:15px;
	height:15px;
	/*background-image: url("images/spriteRoundedIconsSmall.png");*/
	background-repeat: no-repeat
}

.dijitA11ySideArrow {
	display: none;
}

.dijitCalendarDecrease {
	background-position: top left;
}
.dijitCalendarIncrease {
	background-position: -30px top;
}

.dijitCalendarContainer {
	font-size: 100%;
	border-spacing: 0;
	border-collapse: separate;
	border: 1px solid lightgrey;
	margin: 0;
}

.dijitCalendarMonthContainer th {
	/* month header cell */
	/*background:#d3d3d3 url("images/titleBar.png") repeat-x top;*/
	padding-top:.3em;
	padding-bottom:.2em;
	text-align:center;
}


.dijitCalendarDayLabelTemplate {
	/* day of week labels */
	/*background:white url("images/calendarDayLabel.png") repeat-x bottom;*/
	font-weight:normal;
	padding-top:.15em;
	padding-bottom:0em;
	border-top: 1px solid #eeeeee;
	color:#293a4b;
	text-align:center;
}

.dijitCalendarBodyContainer {
	border-bottom: 1px solid #eeeeee;
}

.dijitCalendarMonthLabel {
	color:#293a4b;
	font-weight: bold;
}

.dijitCalendarDateTemplate {
	/* style for each day cell */
	font-size: 0.9em;
	font-weight: bold;
	text-align: center;
	padding: 0.3em 0.3em 0.05em 0.3em;
	letter-spacing: 1px;
}

.dj_ie .dijitCalendarDateTemplate {
	padding: 0.1em .33em 0.02em .33em;
}

.dijitCalendarPreviousMonth,
.dijitCalendarNextMonth 		{
	/* days that are part of the previous or next month */
	color:#999999;
	background-color:#f8f8f8;
}

.dijitCalendarCurrentMonth {
	/* days that are part of this month */
	background-color: white;
}

.dijitCalendarCurrentDate {
	/* cell for today's date */
	text-decoration:underline;
	font-weight:bold;
}

.dijitCalendarHoveredDate {
	background-color: #e2ebf2;
}

.dijitCalendarDisabledDate {
	text-decoration: line-through;
	background-color: white;	 /* override hover effects above, hover and click on disabled date should have no effect */
}

.dijitCalendarSelectedDate {
	/* cell for the selected date */
	background-color:#bbc4d0 !important;
	color:black !important;
}
.dijitCalendarYearContainer {
	/* footer of the table that contains the year display/selector */
	/*background:white url("images/calendarYearLabel.png") repeat-x bottom;*/
	border-top:1px solid lightgrey;
}

.dijitCalendarYearLabel {
	/* container for all of 3 year labels */
	margin:0;
	padding:0.4em 0 0.25em 0;
	text-align:center;
}

.dijitCalendarSelectedYear {
	/* label for selected year */
	color:black;
	padding:0.2em;
	padding-bottom:0.1em;
	background-color:#bbc4d0 !important;
}

.dijitCalendarNextYear,
.dijitCalendarPreviousYear {
	/* label for next/prev years */
	color:black !important;
	font-weight:normal;
}

/*@import url("Toolbar.css");*/
.dijitToolbar {
	border-bottom: 1px solid lightgrey;
	background: lightgrey;

}

/* setting a min-height on ditor toolbar */


.dijitToolbar .dijitButtonNode,
.dijitToolbar .dijitComboButton .dijitButtonContents,
.dijitToolbar .dijitComboButton .dijitDownArrowButton {
	background: none;
	margin: 0px;
	padding: 0px;
	border: none;
	font-size: 12px;
}

.dijitToolbar .dijitButton,
.dijitToolbar .dijitToggleButton,
.dijitToolbar .dijitDropDownButton,
.dijitToolbar .dijitComboButton .dijitButtonContents,
.dijitToolbar .dijitComboButton .dijitDownArrowButton  {
	background: none;
	padding: 1px;
}

.dijitToolbar .dijitButtonChecked,
.dijitToolbar .dijitToggleButtonChecked {
	background-color:#d4dff2;
	border:1px solid #316ac5;
	padding: 0px;	 /* reduce padding to compensate for space taken by border */
}

.dijitToolbar .dijitButtonCheckedHover,
.dijitToolbar .dijitToggleButtonCheckedHover
 {
	background-color:#abc1e5;
	border:1px solid #316ac5;
	padding: 0px;	 /* reduce padding to compensate for space taken by border */
}

.dijitToolbar .dijitButtonHover,
.dijitToolbar .dijitToggleButtonHover,
.dijitToolbar .dijitDropDownButtonHover,
.dijitToolbar .dijitComboButton .dijitButtonContentsHover,
.dijitToolbar .dijitComboButton .dijitDownArrowButtonHover {
	/* TODO: change this from Hover to Selected so that button is still highlighted while drop down is being used */
	padding: 0px;	 /* reduce padding to compensate for space taken by border */
}

.dijitToolbar label {
	padding: 3px 3px 0 6px;
}

.dj_ie .dijitToolbar .dijitComboButton .dijitButtonContentsFocused,
.dj_ie .dijitToolbar .dijitComboButton .dijitDownArrowButtonFocused {
	/* focus border doesn't appear on <td> for IE, so need to add it manually */
	border: 1px #555 dotted !important;
	padding: 0px;
}

.dijitToolbarSeparator {
	/* separator icon in the editor sprite */

}

.dijitToolbarRtl .dijitToolbarSeparator {
	/* separator icon in the editor sprite */

}


/*@import url("Menu.css");*/
.dijitMenu,
.dijitMenuBar {
	border: 1px solid #7eabcd;
	margin: 0px;
	padding: 0px;
	background-color: #f7f7f7;
}

.dijitBorderContainer .dijitMenuBar {
	border:1px solid lightgrey;
}

.dijitMenuItem {
	/*font-family: sans-serif;*/
	font-family:'Open Sans', verdana,arial,sans-serif;
	margin: 0;
}

.dijitMenuItem {
	padding: 4px 5px;
	padding-left: 8px;
}

.dijitMenuPreviousButton, .dijitMenuNextButton {
	font-style: italic;
}
.dijitMenuItem td {
	padding: 4px;
}

.dijitMenuPassive .dijitMenuItemHover,
.dijitMenuItemSelected {
	background-color: #3559ac;
	color:#fff;
}

.dijitMenuItemIcon {
	padding: 2px;
	width: 24px;
	height: 21px;
}

.dijitMenuExpand {
	/* arrow to indicate this MenuItem opens a sub-menu */
	width: 24px;
	height: 24px;
}

/* separator can be two pixels -- set border of either one to 0px to have only one */
.dijitMenuSeparatorTop {
	border-bottom: 1px solid #9b9b9b;
}

.dijitMenuSeparatorBottom {
	border-top: 1px solid #e8e8e8;
}

/* the checked menu item */
.dijitCheckedMenuItemIconChar {
	display: none;
}

.dijitCheckedMenuItemIcon {
	/*background-image: url('images/checkmark.png');*/
	background-position: -80px;
}

.dijitCheckedMenuItemChecked .dijitCheckedMenuItemIcon {
	background-position: -64px;
}
/*@import url("Editor.css");*/
.dijitEditor {
	border:1px solid #bfbfbf;
	border-top:0;
}

.dijitEditorIcon {
	/*background-image: url('../../icons/images/editorIconsEnabled.png');*/  /* editor icons sprite image - enabled state */
	background-repeat: no-repeat;
	width: 18px;
	height: 18px;
	text-align: center;
}
.dijitDisabled .dijitEditorIcon {
	/*background-image: url('../../icons/images/editorIconsDisabled.png');  /* editor icons sprite image - disabled state */*/
}

/*@import url("ColorPalette.css");*/
.dijitColorPalette {
	border:1px solid #7eabcd;
	background:#fff;
	-moz-border-radius: 0px !important;
}
/*@import url("../../icons/editorIcons.css");  // sprite for editor icons to be used by all themes */
/* Dijit Editor icons*/

/*editorIcons.css  is located in dijit/images 

editorIcons.css contains references to the dijit editor widget icons. There are 46 icons used to map to the related editor funtionality in the editor's toolbar.

*/


.dijitEditorIcon {
/*	background-image: url('images/editorIconsEnabled.png'); editor icons sprite image for the enabled state */
	background-repeat: no-repeat;
	width: 18px;
	height: 18px;
	text-align: center;
}
.dijitDisabled .dijitEditorIcon {
/*	background-image: url('images/editorIconsDisabled.png');   editor icons sprite image for the disabled state */
}
/*

.dijitEditorIconSep { background-position: 0px;  }
.dijitEditorIconSave { background-position: -18px;  }
.dijitEditorIconPrint { background-position: -36px;  }
.dijitEditorIconCut { background-position: -54px;  }
.dijitEditorIconCopy { background-position: -72px;  }

.dijitEditorIconDelete { background-position: -108px;  }
.dijitEditorIconCancel { background-position: -126px;  }
.dijitEditorIconUndo { background-position: -144px;  }
.dijitEditorIconRedo { background-position: -162px;  }
.dijitEditorIconSelectAll { background-position: -180px;  }
.dijitEditorIconBold { background-position: -198px;  }
.dijitEditorIconItalic { background-position: -216px;  }
.dijitEditorIconUnderline { background-position: -234px;  }
.dijitEditorIconStrikethrough { background-position: -252px;  }
.dijitEditorIconSuperscript { background-position: -270px;  }
.dijitEditorIconSubscript { background-position: -288px;  }
.dijitEditorIconJustifyCenter { background-position: -306px;  }
.dijitEditorIconJustifyFull { background-position: -324px;  }
.dijitEditorIconJustifyLeft { background-position: -342px;  }
.dijitEditorIconJustifyRight { background-position: -360px;  }
.dijitEditorIconIndent { background-position: -378px;  }
.dijitEditorIconOutdent { background-position: -396px;  }
.dijitEditorIconListBulletIndent { background-position: -414px;  }
.dijitEditorIconListBulletOutdent { background-position: -432px;  }
.dijitEditorIconListNumIndent { background-position: -450px;  }
.dijitEditorIconListNumOutdent { background-position: -468px;  }
.dijitEditorIconTabIndent { background-position: -486px;  }
.dijitEditorIconLeftToRight { background-position: -504px;  }
.dijitEditorIconRightToLeft, .dijitEditorIconToggleDir { background-position: -522px;  }
.dijitEditorIconBackColor { background-position: -540px;  }
.dijitEditorIconForeColor { background-position: -558px;  }
.dijitEditorIconHiliteColor { background-position: -576px;  }
.dijitEditorIconNewPage { background-position: -594px;  }
.dijitEditorIconInsertImage { background-position: -612px;  }
.dijitEditorIconInsertTable { background-position: -630px;  }
.dijitEditorIconSpace { background-position: -648px;  }
.dijitEditorIconInsertHorizontalRule { background-position: -666px;  }
.dijitEditorIconInsertOrderedList { background-position: -684px;  }
.dijitEditorIconInsertUnorderedList { background-position: -702px;  }
.dijitEditorIconCreateLink { background-position: -720px;  }
.dijitEditorIconUnlink { background-position: -738px;  }
.dijitEditorIconViewSource { background-position: -756px;  }
.dijitEditorIconRemoveFormat { background-position: -774px;  }
.dijitEditorIconFullScreen { background-position: -792px;  }
.dijitEditorIconWikiword { background-position: -810px;  }

*/
/* .dijitEditorIconToggleDir { background-position: -540px;  ;} - 03172010: This icon was not in dijit.editor but is in dojox.editor. */

/* no longer in the editor toolbar:  .dijitEditorIconToggleDir { background-position: -540px;   padding: 0;  margin: 0;  color:#555555;
									font-family:verdana,arial,sans-serif;  font-weight: 800;  font-size: 70%;  */
/*end tundra */

/* begin oPls.css */

html, body {
	height: 500px ;	 	/* @ToDo: Fix this later on a regular system */
	width: 1250px ;	 	/* @ToDo: Fix this later on a regular system */
	margin: 0;
	padding: 5px;
	font-family:'Open Sans', verdana,arial,sans-serif;
	font-size: 16px;
	background: white;
	color: #333;
}

.heading {
	font-weight: bold;
	padding-bottom: 0.25em;
}

/*BEGIN oPls-specific stuff*/
.oPlsTblIcon-container {
    padding: 25px;
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    -webkit-flex-direction: row;
    -ms-flex-direction: row;
    flex-direction: row;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    -webkit-justify-content: flex-end;
    -ms-flex-pack: flex-end;
    justify-content: flex-end;
    -webkit-align-content: flex-end;
    -ms-flex-line-pack: end;
    align-content: flex-end;
    -webkit-align-items: flex-end;
    -ms-flex-align: flex-end;
    align-items: flex-end;
}
.oPlsTblIconImg {
    max-width: 20px;
    margin: 7px;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    -webkit-order: 0;
    -ms-flex-order: 0;
    order: 0;
    -webkit-flex: 0 1 auto;
    -ms-flex: 0 1 auto;
    flex: 0 1 auto;
    -webkit-align-self: auto;
    -ms-flex-item-align: auto;
    align-self: auto;
}

.oPlsIconLabel {
    padding: 0px !important;
	font-size: 14px !important;
}

.wizTable {
    width: 90 %;
    background-color: #fcfbf0;  //pale yellow
    padding:5px;
}
.wizTable tr {
    background-color: #fcfbf0;
    padding:5px;
}
.wizTable td {
    background-color: #fcfbf0;
    padding:5px;
}

.wizTable thead tr td {
}
table {
      width: 95%;
      border: 0px solid;
      background-color: #E5F0FF;
}
table td {
    border-color: gray;
    color: black;
    padding:3px;
}
table tr:nth-of-type(even){
    background-color: #F3F3F3;
}
table tr:nth-of-type(odd) {
    background-color: #E5F0FF;
}

table thead td {
    border-color: gray;
    border: solid 0.05em;
    background-color: slategrey;
    color: white;
    padding:10px;
    text-align: center;
    font-weight: bold;
    font-size: 125%;
}
table > .complete {
}
s {
    color: grey;
}
abbr {
    font-variant: sans-serif;
    text-decoration: none;
}
.toolTipTxt {
    /*display: none;*/
    background-color: white;
}

.cell_w_ToolTip:hover {
    background-color: white;
}

.cell_w_ToolTip:hover span {
    border: 1px solid;
    position: absolute;
    display: block;
    z-index: 99;
    padding: 14px 20px;
    margin-top: -30px;
    margin-left: 77px;
    margin-bottom: 100px;
    background-color: linen;
}
code > pre {
     display: inline;
     background-color: slategray;
     color: white;
}
#tagCloudHdr{
      background-color: silver;
      max-width: 75%;
      border: solid 0.1em black;
}
.mBox-container {
    display: flex;
    width: 100%;
    padding: 25px;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-content: center;
  }
  .mBox {
    flex: none;
    max-width: 175px;
    margin: 7px;
    padding: 10px;
    border: solid 0.1em;
    border-color: gray;
    border-radius: 20px;
    text-align: center;
    font-family:'Open Sans', verdana,arial,sans-serif;
    font-size: 85%;
  }
  .mLink {
    flex: none;
    max-width: 95%;
    font-family:'Open Sans', verdana,arial,sans-serif;
    font-size: 100%;   }
  .mNote {
    flex: none;
    max-width: 95%;
    font-family:'Open Sans', verdana,arial,sans-serif;
    font-size: 100%;
  }
  .mTitle {
    font-size: medium;
    font-weight: bold;
    background-color: powderblue;
    text-align: center;
  }
  .tTipTxt {
    background-color: powderblue;
  }
  .mHB {
    background-color: powderblue;
  }
  .mHG {
    background-color: slategrey ;
    color: lemonchiffon   ;
  }
  .mHK {
    background-color: darkkhaki ;
  }
  .mG {
    font-weight: italic;
    font-size: small;
    color: slategrey;
  }
  .mBox .film {
      background-color: honeydew;
  }
  .food {
      background-color: #E5F0FF;
  }
  .planning {
      background-color: linen;
  }
  .mBox img {
    flex: none;
    display: inline-block;
    max-width: 175px;
    max-height: 250px;
    border-radius: 7px;
  }
  ._mVisible {
    visibility: visible;
  }
  ._mHidden{
    visibility: hidden;
  }
  .mLogInfo {
    background-color:rgba(124, 119, 119, 1);
    font size=125%;
    color: white;
  }
  .mLogFine {
    background-color:rgba(124, 119, 119, 1);
    font size=125%;
    color: blue;
  }
  .mLogFiner {
    background-color:rgba(124, 119, 119, 1);
    font size=125%;
    color: lightgoldenrodyellow ;
  }
  .mLogFinest {
    background-color:rgba(124, 119, 119, 1);
    font size=125%;
    color:gold;
  }
  .mLogWarning {
    background-color:rgba(124, 119, 119, 1);
    font size=125%;
    color:greenyellow;
  }
  .mLogSevere {
    background-color:rgba(124, 119, 119, 1);
    font size=125%;
    color:orangered;
  }
  .mLogEntry {
    background-color:rgba(124, 119, 119, 1);
    font size=85%;  
    color:'white';
  }
  details[open] > summary { 
    color: black;
    background-color: #E5F0FF;
  }
  details[open] { 
  color: black;
  background-color: #E5F0FF;
  }
  
//	gear	background-color : #f6e7a7;

.dijitTooltipFocusNode {
	background: #f6e7a7;
}

#appLayout {
	height: 100%;
	width: 100%;
	border: 0px;
	top: 0px;
	left: 0px;
}
#splashTbl {
    border-radius: 20px;
}

    #headerPanel {
      background-color: rgba(124, 119, 119, 1);
      border: 0px;
      padding-top: 0em;
      /* height: 50px;*/
    }
    #header  {
	background-color: rgba(124, 119, 119, 1);
	border: 0px;
	top: 0px;
	font-size: 16px !important;
	height: 30px;
	padding-top:0px;
	padding-left:20px;
    }
    .footerPanel {
      background-color: rgba(124, 119, 119, 1)
      color: white;
      border: 0px;
    }
    #footerPanel {
      background-color: rgba(124, 119, 119, 1)
      color: white;
      border: 0px;
    }

    .innerTable, .innerTable tr, .innerTable td {
	  background-color: white;
	  color: black;
	  border: 0px;
	  margin: 0px;
	  padding: 0px;
}

    .innerBluTable, .innerBluTable tr, .innerBluTable td {
	  background-color: #E5F0FF;
	  color: black;
	  border: 0px;
	  margin: 0px;
	  padding: 0px;
}

/* BEGIN Toaster widget css */
.dijitToasterContent {
	padding:1em;
	padding-top:0.25em;
	background:#d0e9fc;
}
.dijitToasterMessage{ 
	color:#5d4e55;
}
.dijitToasterWarning,
.dijitToasterError{
	font-weight:bold;
	color:#5d4e55;
}

.dijitToasterFatal{
	font-weight:bold;
	color:white;
}

.dijitToasterMessage .dijitToasterContent{
	background:#FAF0BE; //Blond
}
.dijitToasterWarning .dijitToasterContent{
	background:#FAE7B5; //Banana Yell
}
.dijitToasterError .dijitToasterContent{
	background:#B31B1B; //Carnelian Red
}
.dijitToasterFatal .dijitToasterContent{
	background:#2C1608; //Zinnwaldite brown
}
 
.dijitToasterClip {
	position: absolute;
	z-index: 5000;
	overflow: hidden;
}
.dijitToasterContainer {
	display: block;
	position: absolute;
	width: 17.5em;
	margin: 0px;
	font:0.75em;
}
/* END Toaster widget css */

/* BEGIN pre-loader specific stuff to prevent unsightly flash of unstyled content */
.loader_vertical-box {
      display: flex;
      height: 100%;
      width: 100%;
      flex-flow: column;    
}
.loader_horizontal-box {
      display: flex;
      flex-flow: row;    
}
.loader_spacer {
      flex: auto;
        background-color: black;
}
.loader_centered-element {
      flex: none;
      background-color: black;
      color: #fff;
}
#loader {
      position: relative;
      width: 100%;
      height: 100%;
      background-color: black;
      color: #fff;
      z-index: 99;
}
#loaderInner {
      float:center;
      text-align: center;
      font-size: xX-large;
      padding: 5px;
      width: auto;
      color: powderblue;
      vertical-align: middle;
}
/*  END pre-loader specific stuff to prevent unsightly flash of unstyled content */

/* BEGIN tags */
.Tag_Mind {
	background-color: #b6c8e2
	}
.Tag_Science	{
		background-color : #bacbe3;
	}
.Tag_News	{
		background-color : #bacbe3;
	}
.Tag_IntlInsight	{
		background-color : #bacbe3;
	}
.Tag_Saga	{
		background-color : #bacbe3;
	}
.Tag_Desi	{
		background-color : #bdcee5;
	}
.Tag_oPlus	{
		background-color : #c1d1e6;
	}
.Tag_Education	{
		background-color : #c5d3e8;
	}
.Tag_Languages	{
		background-color : #ccd9eb;
	}
.Tag_Lit	{
		background-color : #d3deee;
	}
.Tag_History	{
		background-color : #dbe4f0;
	}
.Tag_Philosophy	{
		background-color : #e2e9f3;
	}
.Tag_Art	{
		background-color : #e9eff6;
	}
.Tag_Film	{
		background-color : #8fbed6;
	}
.Tag_Music	{
		background-color : #a1c9dd;
	}
.Tag_Social	{
		background-color : #b4d4e4;
	}
.Tag_Crime	{
		background-color : #b4d4e4;
	}
.Tag_Travel	{
		background-color : #c7dfeb;
	}
.Tag_Travel_NYC	{
		background-color : #dae9f1;
	}
.Tag_Elevate	{
		background-color : #dbcfde;
	}
.Tag_Body	{
		background-color : #fff5f0;
	}
.Tag_Sports	{
		background-color : #fff1eb;
	}
.Tag_Food	{
		background-color : #ffebe0;
	}
.Tag_Food_NYC	{
		background-color : #ffeee5;
	}
.Tag_Career	{
		background-color : #c5cfb0;
	}
.Tag_Finance	{
		background-color : #c7d0b3;
	}
.Tag_Tech_Dev	{
		background-color : #ccd4b9;
	}
.Tag_Java	{
		background-color : #ced6bd;
	}
.Tag_Web	{
		background-color : #d0d8c0;
	}
.Tag_Gear	{
		background-color : #f6e7a7;
	}
.Tag_Sartorial	{
	background-color : #f6e9ac;
}
.Tag_Organization	{
	background-color : #f7eab1;
}
.Tag_Audio_ht	{
	background-color : #f7ebb5;
}
.Tag_Furniture	{
	background-color : #f8ecba;
}
.Tag_RealEstate	{
	background-color : #f8eebe;
}
.Tag_RealEstate_NYC {
	background-color : #f8eebe;
}
.BkMarkedItem {
	background-image: url('https://ajax.googleapis.com/ajax/libs/dojo/1.11.3/dijit/icons/images/commonIconsObjActEnabled.png');
 	background-repeat: no-repeat;
    width: 18px;
    background-position: -495px;
}
.FlaggedItem {
	background-image: url('https://ajax.googleapis.com/ajax/libs/dojo/1.11.3/dijit/icons/images/commonIconsObjActEnabled.png');
 	background-repeat: no-repeat;
    width: 18px;
    background-position: -254px;
}


/* below stuff from links.html */
#linksTable {
       font: 16px Myriad,Helvetica,Tahoma,Arial,clean,sans-serif;  
}
  code > pre {
     display: inline;
     background-color: slategray;
     color: white;
  }
  details[open] > summary { 
    color: black;
    background-color: #E5F0FF;
  }
  details[open] { 
  color: black;
  background-color: #E5F0FF;
  }


/* mPane (note: most items taken from dijitTitlePane; needs to be edited/most entries removed */

.mPane-container {
    display: flex;
    width: 100%;
    padding: 25px;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-content: center;
}

.mPane {
/*	display: block;
	overflow: hidden;
below taken from mBox
*/
    flex: none;
    max-width: 175px;
    margin: 7px;
    padding: 10px;
    text-align: center;
    font-family:'Open Sans', verdana,arial,sans-serif;
    font-size: 85%;
}
.dijitFixedOpen {
	/* TitlePane that cannot be closed */
	cursor: default;
}
.mPaneTitle * {
	vertical-align: middle;
	background: #E5F0FF;
}

.mPaneTitle {
	cursor: pointer;
	background: #E5F0FF;
	border:1px solid #00275E;
	padding:0px 0px;
}
.mPaneTitle:hover  {
	background: #BFDAFF;
}

.mPaneContentOuter {
	background: white;
	border:1px solid #00275E;
	border-top: 0px;
}
.mPaneContentInner {
	padding:10px;
}

.oPlsMenuButton .dijitButtonHover,
.oPlsMenuButton .dijitToggleButtonHover,
.oPlsMenuButton .dijitDropDownButtonHover,
.oPlsMenuButton .dijitComboButton .dijitButtonContentsHover,
.oPlsMenuButton .dijitComboButton .dijitDownArrowButtonHover {
	background-color: rgba(124, 119, 119, 1);
	border:0px;
	color: white;
}

.oPlsMenuButton:hover{
	color: red;
}



/*END oPls-specific stuff*/



#gridMenuDiv {
   padding-left: 0px;
}
#gridMenuDiv:hover{
   color: red;
}

.gridExpandoOpen:hover {
   color: #446479;
}
.gridExpandoClosed:hover {
   color: #446479;
}

#gridContainer { 
	border: 1px solid #333;
	width: 85em;
	height: 30em;
}
  
#grid { 
	border: 1px solid #333;
	width: 85em;
	height: 30em;
}
#gridMenuDiv {
   padding-left: 0px;
}
#gridMenuDiv:hover{
   color: red;
}

.gridExpandoOpen:hover {
   color: #446479;
}
.gridExpandoClosed:hover {
   color: #446479;
}

/*
window.innerHeight
Height (in pixels) of the browser window viewport including, if rendered, the horizontal scrollbar.
	var intViewportHeight = window.innerHeight;

*/

/* BEGIN v1.1 Grid.css */
.dojoxGrid {
	position: relative;
	background-color: white;
	font-family:'Open Sans', verdana,arial,sans-serif;
	-moz-outline-style: none;
	outline: none;
	overflow: hidden;
	height: 0;
}

.dojoxGrid table {
	padding: 0;
}

.dojoxGrid td {
	-moz-outline: none;
}

/* master header */

.dojoxGrid-master-header {
	position: relative;
}

/* master view */

.dojoxGrid-master-view  {
	position: relative;
}

/* views */

.dojoxGrid-view {
	position: absolute;
	overflow: hidden;
}

/* header */

.dojoxGrid-header {
	position: absolute;
	overflow: hidden;
}

.dojoxGrid-header {
	color: white;
	background-color: #446479;
	/*for shades and tints see: https://www.hexcolortool.com/?_ga=2.6368497.239554780.1537035893-1184878984.1537035893#446479 */
}

.dojoxGrid-header table {
	text-align: center;
}

.dojoxGrid-header .dojoxGrid-cell-content {
	text-align: center;
}

.dojoxGrid-header .dojoxGrid-cell { 
	border: 1px solid;
	border-color: #446479 #446479 #446479 #446479;
	/*background: url(images/grid_dx_gradient.gif) #E8E1CF top repeat-x;*/
	background: #446479;
	padding-bottom: 2px;
}

.dojoxGrid-header .dojoxGrid-cell-over {
	background-image: none;
	border-color: white;
	/*border-bottom-color: #E7FFFF;*/
	margin-bottom: 0;
	padding-bottom: 0;
	border-bottom-width: 3px;
}

.dojoxGrid-sort-down {
	background: url(images/grid_sort_down.gif) left no-repeat;  
	padding-left:16px;
	margin-left:4px;
}

.dojoxGrid-sort-up {
	background: url(images/grid_sort_up.gif) left no-repeat;  
	padding-left:16px;
	margin-left:4px;
}

/* content */

.dojoxGrid-scrollbox {
	position: relative;
	overflow: scroll;
	background-color: white;
	width: 100%;
}

.dojoxGrid-content {
	position: relative;
	overflow: hidden;
	 -moz-outline-style: none;
	outline: none;
}

/* rowbar */

.dojoxGrid-rowbar { 
	border: 1px solid;
	border-color: #E7FFFF #E7FFFF #E7FFFF #E7FFFF;
	border-top: none;
	background: url(images/grid_dx_gradient.gif) #E8E1CF top repeat-x;
}

.dojoxGrid-rowbar-inner {
	border: 1px solid #F6F4EB;
}

.dojoxGrid-rowbar-over {
	background-image: none;
	background-color: white;
	border-top-color: #B3DBFE;
	border-bottom-color: #B3DBFE;
}

.dojoxGrid-rowbar-selected {
	background-color: #345C7F;
	background-image: none;
	/*background-image: url(images/grid_green_dot.gif);*/
	background-position: center;
	background-repeat: no-repeat;
}

/* rows */

.dojoxGrid-row {
	position: relative;
	width: 9000em;
}

.dojoxGrid-row {
	/*border: 1px solid #E8E4D8;*/
	border: 1px solid #345C7F;
	border-color: #345C7F;
	/*padding: 0 0 1px 0;*/
	border-left: none;
	border-right: none;
	background-color: white;
	border-top: none;
}

.dojoxGrid-row-over {
	/*border-top-color: #E7FFFF;*/
	background-color: white;
	border-bottom-color: #446479;
}

.dojoxGrid-row-odd {
	background-color: #FFFDF3;
}

.dojoxGrid-row-selected {
	background-color: #D9E8F9;
}

.dojoxGrid-row-table {
	table-layout: fixed;
	width: 0;
}

.dojoxGrid-invisible {
	visibility: hidden;
}		

.Xdojo-ie .dojoxGrid-invisible {
	display: none;
}		

.dojoxGrid-invisible td, .dojoxGrid-header .dojoxGrid-invisible td {
	border-top-width: 0;
	border-bottom-width: 0;
	padding-top: 0;
	padding-bottom: 0;
	height: 0;
	overflow: hidden;
}

/* cells */

.dojoxGrid-cell {
	border: none;
/*	border-color: #EBEADB;
	border-right-color: #D5CDB5;*/
	padding: 3px 3px 3px 3px;
	text-align: left;
	overflow: hidden;
}

.dojoxGrid-cell-focus {
	border: 1px dashed blue;
}

.dojoxGrid-cell-over {
	border: 1px dotted #345C7F;
}

.dojoxGrid-cell-focus.dojoxGrid-cell-over {
	background-color: white;
}

.dojoxGrid-cell-clip {
	width: 100%;
	overflow: hidden;
	white-space:nowrap;
	text-overflow: ellipsis;
}

/* editing */

.dojoxGrid-row-editing td {
	background-color: #F4FFF4;
}

.dojoxGrid-row-inserting td {
	background-color: #F4FFF4;
}
.dojoxGrid-row-inflight td {
	background-color: #F2F7B7;
}
.dojoxGrid-row-error td {
	background-color: #F8B8B6;
}

.dojoxGrid-input, .dojoxGrid-select, .dojoxGrid-textarea {
	margin: 0;
	padding: 0;
	border-style: none;
	width: 100%;
	font-size: 100%;
	font-family:'Open Sans', verdana,arial,sans-serif;
}

.dojoxGrid-hidden-focus {
	position: absolute;
	left: -1000px;
	top: -1000px;
	height: 0px, width: 0px;
}

.gridArrowButtonChar {
	display:none !important;
}
.dijit_a11y .gridArrowButtonChar {
	display:inline !important;
}
.dijit_a11y .dojoxGrid-sort-down, .dijit_a11y .dojoxGrid-sort-up {
	margin-left: 0;
	padding-left: 0;
}
/* END v1.1 Grid.css*/


.collapsedRow {
	visibility: collapse;
}

.selectedRow .dojoxGrid-cell {
	background-color: #003366;
	color: white;
}

.specialRow .dojoxGrid-cell {
	background-color: dimgray;
}


/****
		dijit.Tooltip
 ****/

.dijitTooltip {
	position: absolute;
	z-index: 2000;
	display: block;
	/* make visible but off screen */
	left: 50%;
	top: -10000px;
	overflow: visible;
}

.dijitTooltipFocusNode {
	padding: 2px 2px 2px 2px;
}

.dijitTooltipConnector {
	position: absolute;
}
.dijit_a11y .dijitTooltipConnector {
	display: none;	 /* won't show b/c it's background-image;  hide to avoid border gap */
}

.dijitTooltipData {
	display:none;
}


/* Dialog and Tooltip/TooltipDialog */

.dijitDialog {
	background: #fff;
	border: 1px solid #7eabcd;
	padding: 0px;
	-webkit-box-shadow: 0px 5px 10px #adadad;
}

.dijitDialogPaneContent {
	background: #fff;
	border-top: 1px solid #d3d3d3;
	padding:10px;

}

.dijitDialogTitleBar {
	/* outer container for the titlebar of the dialog */
	background: #E5F0FF;
	padding: 5px 6px 3px 6px;
	outline:0;  /* remove this line if keyboard focus on dialog startup is an issue. tab still takes you to first focusable element */
}

.dijitDialogTitle {
	/* typography and styling of the dialog title */
	font-weight: bold;
	padding: 0px 4px;
}

.dijitDialogCloseIcon {
	/* the default close icon for the dialog
	background: url("images/tabClose.png") no-repeat right top;
	position: absolute;
	vertical-align: middle;
	right: 6px;
	top: 4px;
	height: 15px;
	width: 15px;
 */
}
.dj_ie6 .dijitDialogCloseIcon {
/*	background : url("images/tabClose.gif") no-repeat right top;*/
}

.dijitDialogCloseIconHover {
/*	background: url("images/tabCloseHover.png") no-repeat right top;*/
}
.dj_ie6 .dijitDialogCloseIconHover {
/*	background : url("images/tabCloseHover.gif") no-repeat right top;*/
}

/* Tooltip and TooltipDialog */

.dijitTooltip, .dijitTooltipDialog {
	/* the outermost dom node, holding the connector and container */
	background: transparent;	 /* make the area on the sides of the arrow transparent */
}

.dijitTooltipContainer {
	background: white;
	border: 2px solid #00275E;
	color: #00275E;
	padding: 10px;
	-webkit-border-radius: 8px;
	-moz-border-radius: 8px;
	box-shadow: 4px -4px 3px 2px lightgrey;
	-webkit-transition:box-shadow 0.5s;
}

.dijitTooltipConnector {
	/* the arrow piece */
	border:0px;
	z-index: 2;
}
.dijitTooltipABRight .dijitTooltipConnector {
	left: auto !important;
	right: 3px;
}

/*moved to icons

.dijitTooltipBelow {
	padding-top: 13px;
}

.dijitTooltipAbove {
	padding-bottom: 13px;
}

  .dijitTooltipBelow .dijitTooltipConnector {
	top: 0px;
	left: 3px;
	background:url("images/tooltipConnectorDown.png") no-repeat top left;
	width:16px;
	height:14px;
  }

  .dj_ie .dijitTooltipBelow .dijitTooltipConnector {
 	background-image: url("images/tooltipConnectorDown.gif");
  }

  .dijitTooltipAbove .dijitTooltipConnector {
	bottom: 0px;
	left: 3px;
	background:url("images/tooltipConnectorAbove.png") no-repeat top left;
	width:16px;
	height:14px;
  }
  .dj_ie .dijitTooltipAbove .dijitTooltipConnector {
	background-image: url("images/tooltipConnectorAbove.gif");
  }
  .dj_ie6 .dijitTooltipAbove .dijitTooltipConnector {
	bottom: -3px;
  }

  .dijitTooltipLeft {
	padding-right: 14px;
  }
  .dijitTooltipRight {
	padding-left: 14px;
  }
  .dj_ie6 .dijitTooltipLeft {
	padding-left: 15px;
  }

  .dijitTooltipLeft .dijitTooltipConnector {
	right: 0px;
	bottom: 3px;
	background:url("images/tooltipConnectorLeft.png") no-repeat top left;
	width:16px;
	height:14px;
  }
  .dj_ie .dijitTooltipLeft .dijitTooltipConnector {
	background-image: url("images/tooltipConnectorLeft.gif");
  }

  .dijitTooltipRight .dijitTooltipConnector {

	left: 0px;
	bottom: 3px;
	background:url("images/tooltipConnectorRight.png") no-repeat top left;
	width:16px;
	height:14px;
  }
  .dj_ie .dijitTooltipRight .dijitTooltipConnector {
	background-image: url("images/tooltipConnectorRight.gif");
  }

  .dj_webkit .dijitTooltipContainer {
	-webkit-box-shadow: 0px 5px 10px #adadad;
  }
*/
/*1.6.5/dojox/grid/enhanced/resources/Filter.css*/

.dojoxGridFBar {
	width: 100%;
	cursor: pointer;
}
.dojoxGridFBar .dojoxGridFBarBtn {
	margin: 0;
}
.dojoxGridFBarBtnTD {
	width: 38px;
}
.dojoxGridFBar .dojoxGridFBarBtn .dijitButtonNode {
	-moz-border-radius: 1px;
	-webkit-border-radius: 1px;
	padding-top: 0;
	padding-bottom: 0;
	padding-right: 2px;
}
.dojoxGridFBarDefFilterBtnIcon {
	/* To be updated to : fas fa-filter*/
	background-image: url('https://i.postimg.cc/MTZhTcZF/1.png');
	background-repeat: no-repeat;
	background-position: -621px;
	width: 24px;
	height: 21px;
}
.dj_ie .dojoxGridFBarInner{
	display: inline-block;
	width: 100%;
}
.dojoxGridFBarStatus {
	margin-left: 9px;
	float: left;
}
.dojoxGridFBarClearFilterBtn {
	margin: 0 0 0 10px;
	vertical-align: top;
	float: left;
}
.dojoxGridFBarInfoTD .dojoxGridFBarClearFilterBtn .dijitButtonNode,
.dojoxGridFBarInfoTD .dojoxGridFBarCloseBtn .dijitButtonNode,
.dojoxGridFDPane .dijitAccordionTitle .dijitButtonNode,
.dojoxGridFStatusTipDetail .dijitButton .dijitButtonNode {
	-moz-border-radius: 0;
	-moz-box-shadow: none;
	-webkit-border-radius: 0;
	-webkit-box-shadow: none;
	background-image: none;
	background-color: transparent;
	margin: 0;
	padding: 0;
	border: none;
}
.dj_ie .dojoxGridFBarInner {
	position: relative;
}
.dojoxGridFBarCloseBtn {
	margin: 0 4px 0 0;
	float: right;
}
.dj_ie .dojoxGridFBarCloseBtn {
	float: none;
	position: absolute;
	right: 0;
}
.dojoxGridFBarCloseBtnIcon {
	background: url("images/sprite_icons.png") no-repeat;
	background-position: -119px -20px;
	width: 14px;
	height: 14px;
}
.dijitButtonHover .dojoxGridFBarCloseBtnIcon {
	background-position: -140px -20px;   /* disabled sprite'll be created/updated when monkeys behave */
}
.dijitButtonActive .dojoxGridFBarCloseBtnIcon {
	background-position: -160px -20px;   /* disabled sprite'll be created/updated when monkeys behave */
}
.dojoxGridFDTitlePane {
	width: 316px;
	height: 330px;
}
.dijit_a11y .dojoxGridFDTitlePane .dijitArrowButtonInner{
	
	display:none !important;
}
.dojoxGridFDTitlePane .dijitDialogPaneContent {
	padding: 7px 5px 9px 5px;
	height: 290px !important;
}
.dojoxGridFDTitlePane .dijitTitlePaneTitle {
	cursor: move;
}
.dojoxGridFDPaneRelation {
	margin: 0 0 3px 4px;
}
.dojoxGridFDPane {
	width: 100%;
	height: 100%;
	position: relative;
}
.dojoxGridFDPaneRulePane {
	height: 222px;
	overflow: auto;
	
	position: relative;
}
.dj_ie6 .dojoxGridFDPaneRulePane {
	width: 100%;
}
.dojoxGridFDPane .dijitAccordionContainer .dijitContentPane {
	padding: 6px 9px;
}
.dojoxGridFDPane .dijitAccordionTitle {
	position: relative;
	
	min-height: 17px;
}
.dojoxGridFDPane .dijitAccordionTitle .dijitButton {
	position: absolute;
	margin: 0;
	right: 3px;
	top: 4px;
}
.dj_ie6 .dojoxGridFDPane .dijitAccordionTitle .dijitButton {
	top: 2px;
}
.dojoxGridFDPane .dijitAccordionTitleFocus {
	margin-right: 14px;
}
.dojoxGridFDPane .dijitAccordionText {
	display: inline-block;
	position: relative;
}
.criteriaBoxRemoveCBoxBtnIcon {
	background-image: url('https://i.postimg.cc/zDc9zXsx/4.png');
	background-repeat: no-repeat;
	background-position: -136px;
	width: 24px;
	height: 21px;
}
.dijitButtonHover .criteriaBoxRemoveCBoxBtnIcon {
	background-position: -198px 2px;   /* disabled sprite'll be created/updated when monkeys behave */
}
.dojoxGridRuleTitleCondition {
	font-style: italic;
}
.dojoxGridFDPaneModes .dijitSelect {
	position: relative;
}
.dojoxGridFDPaneBtns {
	position: absolute;
	right: 0;
	bottom: 0;
}
.dj_ie7 .dojoxGridFDPaneBtns,
.dj_ie6 .dojoxGridFDPaneBtns {
	z-index: -1;
}
.dojoxGridFDPaneBtns .dijitButton {
	float: right;
}
.dojoxGridFDPaneAddCBoxBtn {
	margin-top: 9px;
}
.dojoxGridFDPaneAddCBoxBtnIcon {
	background-image: url('https://i.postimg.cc/zDc9zXsx/4.png');
	background-repeat: no-repeat;
	background-position: -109px;
	width: 24px;
	height: 21px;
}
.dijitButtonDisabled .dojoxGridFDPaneAddCBoxBtnIcon {
	background-position: -218px -18px; /* disabled sprite'll be created/updated when monkeys behave */
}
.criteriaBox {
	height: 125px;
}
.criteriaBoxSelCol, 
.criteriaBoxCondition {
	height: 40px;
}
.criteriaBox .criteriaBoxColSelect, 
.criteriaBox .criteriaBoxCondSelect, 
.criteriaBox .criteriaBoxValueBox {
	margin: 5px 0 0 0;
	width: 100%;
	
	display: inline-table;
}
.criteriaBoxCondSelectAlt {
	width: 100%;
	padding: 5px 0 0 0;
	font-weight: bold;
}
.criteriaBox .dijitSelect .dijitArrowButton {
	width: 18px;
}
.criteriaBoxStartValue {
	width: 45%;	
}
.criteriaBoxEndValue {
	float: right;
	width: 45%;
}
.criteriaBoxRangeValueTxt {
	margin-left: 4px;
}
.dojoxGridFStatusTipDialog .dijitTooltipContainer {
	padding: 9px 5px;
}
.dojoxGridFStatusTip thead,
.dojoxGridFStatusTip tr {
	height: 19px;
}
.dojoxGridFStatusTip th {
	max-width: 150px;
	width: expression(this.clientWidth > 150 ? "150px" : "auto");
}
.dojoxGridFStatusTip th div {
	padding: 2px 5px;
}
.dojoxGridFStatusTip td {
	padding: 2px 6px;
	max-width: 150px;
	overflow: hidden;
	width: expression(this.clientWidth > 150 ? "150px" : "auto");
}
.dojoxGridFStatusTipHead {
	margin-bottom: 9px;
}
.dojoxGridFStatusTipTitle {
	font-weight: bold;
	margin-right: 1em;
}
.dojoxGridFStatusTipHandle {
	position: relative;
	padding-right: 16px;
}
.dojoxGridFStatusTipDetail .dijitButton {
	position: absolute;
	margin: 0;
	padding: 0;
	top: -1px;
	right:0;
}
.dojoxGridFStatusTipDelRuleBtnIcon {
	background-image: url("images/sprite_icons.png");
	background-position: -198px -18px;
	height: 16px;
	width: 16px;
}
.dijitButtonHover .dojoxGridFStatusTipDelRuleBtnIcon {
	background-position: -198px 2px;
}
.dj_ie7 .dojoxGridClearFilterConfirm,
.dj_ie6 .dojoxGridClearFilterConfirm {
	width: 300px;
}
.dojoxGridClearFilterBtns{
	padding: 10px;
	height: 18px;
}
.dojoxGridClearFilterBtns .dijitButton {
	float: right;
}
.dojoxGridTrueBox {
	float: left;
	width: 49%;
}
.dojoxGridFalseBox {
	float: left;
	width: 49%;
}
.dojoxGridBoolValueBox .dijitRadio {
	vertical-align: middle;
} 
.dojoxGridTrueLabel,
.dojoxGridFalseLabel {
	width: 116px;
	display:inline-block;
	vertical-align: middle;
}
.dj_ie7 .dojoxGridTrueLabel,
.dj_ie7 .dojoxGridFalseLabel {
	display: inline;
}

	</style>

	<script>
	alert('before djConfig');
	</script>

	<script>
	var djConfig = {
		defaultDuration: 900,
		parseOnLoad: true,
		locale: "en-us",
		blankGif: "ui/css/images/blank.gif",
		modulePaths: {"oPls": "com.trivedi.oPls"}
	};
	</script>

	<!--script type="text/javascript" src="ui/scripts/1.0.2.dojo.js.uncompressed.js">
	</script>
	<script type="text/javascript" src="ui/scripts/1.0.2.dijit-all.js.uncompressed.js">
	</script>
	<script type="text/javascript" src="ui/scripts/1.0.2-dijit-all_ROOT.js">
	</script-->

<script>

/*
	Copyright (c) 2004-2007, The Dojo Foundation
	All Rights Reserved.

	Licensed under the Academic Free License version 2.1 or above OR the
	modified BSD license. For more information on Dojo licensing, see:

		http://dojotoolkit.org/book/dojo-book-0-9/introduction/licensing
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(typeof dojo == "undefined"){

// TODOC: HOW TO DOC THE BELOW?
// @global: djConfig
// summary:
//		Application code can set the global 'djConfig' prior to loading
//		the library to override certain global settings for how dojo works.
// description:  The variables that can be set are as follows:
//			- isDebug: false
//			- libraryScriptUri: ""
//			- locale: undefined
//			- extraLocale: undefined
//			- preventBackButtonFix: true
// note:
//		'djConfig' does not exist under 'dojo.*' so that it can be set before the
//		'dojo' variable exists.
// note:
//		Setting any of these variables *after* the library has loaded does
//		nothing at all.

(function(){
	// make sure djConfig is defined
	if(typeof this["djConfig"] == "undefined"){
		this.djConfig = {};
	}

	// firebug stubs
	if((!this["console"])||(!console["firebug"])){
		this.console = {};
	}

	var cn = [
		"assert", "count", "debug", "dir", "dirxml", "error", "group",
		"groupEnd", "info", "log", "profile", "profileEnd", "time",
		"timeEnd", "trace", "warn"
	];
	var i=0, tn;
	while((tn=cn[i++])){
		if(!console[tn]){
			console[tn] = function(){};
		}
	}

	//TODOC:  HOW TO DOC THIS?
	// dojo is the root variable of (almost all) our public symbols -- make sure it is defined.
	if(typeof this["dojo"] == "undefined"){
		this.dojo = {};
	}

	var d = dojo;

	// summary:
	//		return the current global context object
	//		(e.g., the window object in a browser).
	// description:
	//		Refer to 'dojo.global' rather than referring to window to ensure your
	//		code runs correctly in contexts other than web browsers (eg: Rhino on a server).
	dojo.global = this;

	var _config =/*===== djConfig = =====*/{
		isDebug: false,
		libraryScriptUri: "",
		preventBackButtonFix: true,
		delayMozLoadingFix: false
	};

	for(var option in _config){
		if(typeof djConfig[option] == "undefined"){
			djConfig[option] = _config[option];
		}
	}

	var _platforms = ["Browser", "Rhino", "Spidermonkey", "Mobile"];
	var t;
	while(t=_platforms.shift()){
		d["is"+t] = false;
	}

	// Override locale setting, if specified
	dojo.locale = djConfig.locale;

	//TODOC:  HOW TO DOC THIS?
	dojo.version = {
		// summary: version number of this instance of dojo.
		major: 0, minor: 0, patch: 2019, flag: "dev",
		revision: Number("$Rev: 20190112 $".match(/[0-9]+/)[0]),
		toString: function(){
			with(d.version){
				return major + "." + minor + "." + patch + flag + " (" + revision + ")";	 // String
			}
		}
	}

	// Register with the OpenAjax hub
	if(typeof OpenAjax != "undefined"){
		OpenAjax.hub.registerLibrary("dojo", "http://dojotoolkit.org", d.version.toString());
	}

	dojo._mixin = function(/*Object*/ obj, /*Object*/ props){
		// summary:
		//		Adds all properties and methods of props to obj. This addition is
		//		"prototype extension safe", so that instances of objects will not
		//		pass along prototype defaults.
		var tobj = {};
		for(var x in props){
			// the "tobj" condition avoid copying properties in "props"
			// inherited from Object.prototype.  For example, if obj has a custom
			// toString() method, don't overwrite it with the toString() method
			// that props inherited from Object.prototype
			if(tobj[x] === undefined || tobj[x] != props[x]){
				obj[x] = props[x];
			}
		}
		// IE doesn't recognize custom toStrings in for..in
		if(d["isIE"] && props){
			var p = props.toString;
			if(typeof p == "function" && p != obj.toString && p != tobj.toString &&
				p != "\nfunction toString() {\n    [native code]\n}\n"){
					obj.toString = props.toString;
			}
		}
		return obj;  // Object
	}

	dojo.mixin = function(/*Object*/obj, /*Object...*/props){
		// summary:	Adds all properties and methods of props to obj. 
		for(var i=1, l=arguments.length;  i<l;  i++){
			d._mixin(obj, arguments[i]);
		}
		return obj;  // Object
	}

	dojo._getProp = function(/*Array*/parts, /*Boolean*/create, /*Object*/context){
		var obj=context||d.global;
		for(var i=0, p;  obj&&(p=parts[i]);  i++){
			obj = (p in obj ? obj[p] : (create ? obj[p]={} : undefined));
		}
		return obj;  // mixed
	}

	dojo.setObject = function(/*String*/name, /*mixed*/value, /*Object*/context){
		// summary: 
		//		Set a property from a dot-separated string, such as "A.B.C"
		//	description: 
		//		Useful for longer api chains where you have to test each object in
		//		the chain, or when you have an object reference in string format.
		//		Objects are created as needed along 'path'.
		//	name: 	
		//		Path to a property, in the form "A.B.C".
		//	context:
		//		Optional. Object to use as root of path. Defaults to
		//		'dojo.global'. Null may be passed.
		var parts=name.split("."), p=parts.pop(), obj=d._getProp(parts, true, context);
		return (obj && p ? (obj[p]=value) : undefined);  // mixed
	}

	dojo.getObject = function(/*String*/name, /*Boolean*/create, /*Object*/context){
		// summary: 
		//		Get a property from a dot-separated string, such as "A.B.C"
		//	description: 
		//		Useful for longer api chains where you have to test each object in
		//		the chain, or when you have an object reference in string format.
		//	name: 	
		//		Path to an property, in the form "A.B.C".
		//	context:
		//		Optional. Object to use as root of path. Defaults to
		//		'dojo.global'. Null may be passed.
		//	create: 
		//		Optional. If true, Objects will be created at any point along the
		//		'path' that is undefined.
		return d._getProp(name.split("."), create, context);  // mixed
	}

	dojo.exists = function(/*String*/name, /*Object?*/obj){
		// summary: 
		//		determine if an object supports a given method
		// description: 
		//		useful for longer api chains where you have to test each object in
		//		the chain
		// name: 	
		//		Path to an object, in the form "A.B.C".
		// obj:
		//		Object to use as root of path. Defaults to
		//		'dojo.global'. Null may be passed.
		return !!d.getObject(name, false, obj);  // Boolean
	}


	dojo["eval"] = function(/*String*/ scriptFragment){
		// summary: 
		//		Perform an evaluation in the global scope.  Use this rather than
		//		calling 'eval()' directly.
		// description: 
		//		Placed in a separate function to minimize size of trapped
		//		evaluation context.
		// note:
		//	 - JSC eval() takes an optional second argument which can be 'unsafe'.
		//	 - Mozilla/SpiderMonkey eval() takes an optional second argument which is the
		//  	 scope object for new symbols.

		// FIXME: investigate Joseph Smarr's technique for IE:
		//		http://josephsmarr.com/2007/01/31/fixing-eval-to-use-global-scope-in-ie/
		//	see also:
		// 		http://trac.dojotoolkit.org/ticket/744
		return d.global.eval ? d.global.eval(scriptFragment) : eval(scriptFragment);  	// mixed
	}

	/*=====
		dojo.deprecated = function(behaviour, extra, removal){
			//	summary: 
			//		Log a debug message to indicate that a behavior has been
			//		deprecated.
			//	behaviour: String
			//		The API or behavior being deprecated. Usually in the form
			//		of "myApp.someFunction()".
			//	extra: String?
			//		Text to append to the message. Often provides advice on a
			//		new function or facility to achieve the same goal during
			//		the deprecation period.
			//	removal: String?
			//		Text to indicate when in the future the behavior will be
			//		removed. Usually a version number.
			//	example:
			//	|	dojo.deprecated("myApp.getTemp()", "use myApp.getLocaleTemp() instead", "1.0");
		}

		dojo.experimental = function(moduleName, extra){
			//	summary: Marks code as experimental.
			//	description: 
			//	 	This can be used to mark a function, file, or module as
			//	 	experimental.  Experimental code is not ready to be used, and the
			//	 	APIs are subject to change without notice.  Experimental code may be
			//	 	completed deleted without going through the normal deprecation
			//	 	process.
			//	moduleName: String
			//	 	The name of a module, or the name of a module file or a specific
			//	 	function
			//	extra: String?
			//	 	some additional message for the user
			//	example:
			//	|	dojo.experimental("dojo.data.Result");
			//	example:
			//	|	dojo.experimental("dojo.weather.toKelvin()", "PENDING approval from NOAA");
		}
	=====*/

	//Real functions declared in dojo._firebug.firebug.
	d.deprecated = d.experimental = function(){};

})();
// vim:ai:ts=4:noet

/*
 * loader.js - A bootstrap module.  Runs before the hostenv_*.js file. Contains
 * all of the package loading methods.
 */

(function(){
	var d = dojo;

	dojo.mixin(dojo, {
		_loadedModules: {},
		_inFlightCount: 0,
		_hasResource: {},

		// FIXME: it should be possible to pull module prefixes in from djConfig
		_modulePrefixes: {
			dojo: {name: "dojo", value: "."},
			doh: {name: "doh", value: "../util/doh"},
			tests: {name: "tests", value: "tests"}
		},

		_moduleHasPrefix: function(/*String*/module){
			// summary: checks to see if module has been established
			var mp = this._modulePrefixes;
			return !!(mp[module] && mp[module].value);  // Boolean
		},

		_getModulePrefix: function(/*String*/module){
			// summary: gets the prefix associated with module
			var mp = this._modulePrefixes;
			if(this._moduleHasPrefix(module)){
				return mp[module].value;  // String
			}
			return module;  // String
		},

		_loadedUrls: [],

		//WARNING: 
		//		This variable is referenced by packages outside of bootstrap:
		//		FloatingPane.js and undo/browser.js
		_postLoad: false,
		
		//Egad! Lots of test files push on this directly instead of using dojo.addOnLoad.
		_loaders: [],
		_unloaders: [],
		_loadNotifying: false
	});


		dojo._loadPath = function(/*String*/relpath, /*String?*/module, /*Function?*/cb){
		// 	summary:
		//		Load a Javascript module given a relative path
		//
		//	description:
		//		Loads and interprets the script located at relpath, which is
		//		relative to the script root directory.  If the script is found but
		//		its interpretation causes a runtime exception, that exception is
		//		not caught by us, so the caller will see it.  We return a true
		//		value if and only if the script is found.
		//
		// relpath: 
		//		A relative path to a script (no leading '/', and typically ending
		//		in '.js').
		// module: 
		//		A module whose existance to check for after loading a path.  Can be
		//		used to determine success or failure of the load.
		// cb: 
		//		a callback function to pass the result of evaluating the script

		var uri = (((relpath.charAt(0) == '/' || relpath.match(/^\w+:/))) ? "" : this.baseUrl) + relpath;
		if(djConfig.cacheBust && d.isBrowser){
			uri += "?" + String(djConfig.cacheBust).replace(/\W+/g,"");
		}
		try{
			return !module ? this._loadUri(uri, cb) : this._loadUriAndCheck(uri, module, cb);  // Boolean
		}catch(e){
			console.debug(e);
			return false;  // Boolean
		}
	}

	dojo._loadUri = function(/*String (URL)*/uri, /*Function?*/cb){
		//	summary:
		//		Loads JavaScript from a URI
		//	description:
		//		Reads the contents of the URI, and evaluates the contents.  This is
		//		used to load modules as well as resource bundles. Returns true if
		//		it succeeded. Returns false if the URI reading failed.  Throws if
		//		the evaluation throws.
		//	uri: a uri which points at the script to be loaded
		//	cb: 
		//		a callback function to process the result of evaluating the script
		//		as an expression, typically used by the resource bundle loader to
		//		load JSON-style resources

		if(this._loadedUrls[uri]){
			return true;  // Boolean
		}
		var contents = this._getText(uri, true);
		if(!contents){ return false;  } // Boolean
		this._loadedUrls[uri] = true;
		this._loadedUrls.push(uri);
		if(cb){ contents = '('+contents+')';  }
		var value = d["eval"](contents+"\r\n//@ sourceURL="+uri);
		if(cb){ cb(value);  }
		return true;  // Boolean
	}
	
	// FIXME: probably need to add logging to this method
	dojo._loadUriAndCheck = function(/*String (URL)*/uri, /*String*/moduleName, /*Function?*/cb){
		// summary: calls loadUri then findModule and returns true if both succeed
		var ok = false;
		try{
			ok = this._loadUri(uri, cb);
		}catch(e){
			console.debug("failed loading " + uri + " with error: " + e);
		}
		return Boolean(ok && this._loadedModules[moduleName]);  // Boolean
	}

	dojo.loaded = function(){
		// summary:
		//		signal fired when initial environment and package loading is
		//		complete. You may use dojo.addOnLoad() or dojo.connect() to
		//		this method in order to handle initialization tasks that
		//		require the environment to be initialized. In a browser host,
		//		declarative widgets will be constructed when this function
		//		finishes runing.
		this._loadNotifying = true;
		this._postLoad = true;
		var mll = this._loaders;
		
		//Clear listeners so new ones can be added
		//For other xdomain package loads after the initial load.
		this._loaders = [];

		for(var x=0;  x<mll.length;  x++){
			mll[x]();
		}

		this._loadNotifying = false;
		
		//Make sure nothing else got added to the onload queue
		//after this first run. If something did, and we are not waiting for any
		//more inflight resources, run again.
		if(d._postLoad && d._inFlightCount == 0 && this._loaders.length > 0){
			d._callLoaded();
		}
	}

	dojo.unloaded = function(){
		// summary:
		//		signal fired by impending environment destruction. You may use
		//		dojo.addOnUnload() or dojo.connect() to this method to perform
		//		page/application cleanup methods.
		var mll = this._unloaders;
		while(mll.length){
			(mll.pop())();
		}
	}

	dojo.addOnLoad = function(/*Object?*/obj, /*String|Function*/functionName){
		// summary:
		//		Registers a function to be triggered after the DOM has finished
		//		loading and widgets declared in markup have been instantiated.
		//		Images and CSS files may or may not have finished downloading when
		//		the specified function is called.  (Note that widgets' CSS and HTML
		//		code is guaranteed to be downloaded before said widgets are
		//		instantiated.)
		// example:
		//	|	dojo.addOnLoad(functionPointer);
		//	|	dojo.addOnLoad(object, "functionName");
		if(arguments.length == 1){
			d._loaders.push(obj);
		}else if(arguments.length > 1){
			d._loaders.push(function(){
				obj[functionName]();
			});
		}

		//Added for xdomain loading. dojo.addOnLoad is used to
		//indicate callbacks after doing some dojo.require() statements.
		//In the xdomain case, if all the requires are loaded (after initial
		//page load), then immediately call any listeners.
		if(d._postLoad && d._inFlightCount == 0 && !d._loadNotifying){
			d._callLoaded();
		}
	}

	dojo.addOnUnload = function(/*Object?*/obj, /*String|Function?*/functionName){
		// summary: registers a function to be triggered when the page unloads
		// example:
		//	|	dojo.addOnUnload(functionPointer)
		//	|	dojo.addOnUnload(object, "functionName")
		if(arguments.length == 1){
			d._unloaders.push(obj);
		}else if(arguments.length > 1){
			d._unloaders.push(function(){
				obj[functionName]();
			});
		}
	}

	dojo._modulesLoaded = function(){
		if(d._postLoad){ return;  }
		if(d._inFlightCount > 0){ 
			console.debug("files still in flight!");
			return;
		}
		d._callLoaded();
	}

	dojo._callLoaded = function(){
		//The "object" check is for IE, and the other opera check fixes an issue
		//in Opera where it could not find the body element in some widget test cases.
		//For 0.9, maybe route all browsers through the setTimeout (need protection
		//still for non-browser environments though). This might also help the issue with
		//FF 2.0 and freezing issues where we try to do sync xhr while background css images
		//are being loaded (trac #2572)? Consider for 0.9.
		if(typeof setTimeout == "object" || (djConfig["useXDomain"] && d.isOpera)){
			setTimeout("dojo.loaded();", 0);
		}else{
			d.loaded();
		}
	}

	dojo._getModuleSymbols = function(/*String*/modulename){
		// summary:
		//		Converts a module name in dotted JS notation to an array
		//		representing the path in the source tree
		var syms = modulename.split(".");
		for(var i = syms.length;  i>0;  i--){
			var parentModule = syms.slice(0, i).join(".");
			if((i==1) && !this._moduleHasPrefix(parentModule)){		
				// Support default module directory (sibling of dojo) for top-level modules 
				syms[0] = "../" + syms[0];
			}else{
				var parentModulePath = this._getModulePrefix(parentModule);
				if(parentModulePath != parentModule){
					syms.splice(0, i, parentModulePath);
					break;
				}
			}
		}
		// console.debug(syms);
		return syms;  // Array
	}

	dojo._global_omit_module_check = false;

	dojo._loadModule = dojo.require = function(/*String*/moduleName, /*Boolean?*/omitModuleCheck){
		//	summary:
		//		loads a Javascript module from the appropriate URI
		//	moduleName: String
		//	omitModuleCheck: Boolean?
		//	description:
		//		_loadModule("A.B") first checks to see if symbol A.B is defined. If
		//		it is, it is simply returned (nothing to do).
		//	
		//		If it is not defined, it will look for "A/B.js" in the script root
		//		directory.
		//	
		//		It throws if it cannot find a file to load, or if the symbol A.B is
		//		not defined after loading.
		//	
		//		It returns the object A.B.
		//	
		//		This does nothing about importing symbols into the current package.
		//		It is presumed that the caller will take care of that. For example,
		//		to import all symbols:
		//	
		//		|	with (dojo._loadModule("A.B")) {
		//		|		...
		//		|	}
		//	
		//		And to import just the leaf symbol:
		//	
		//		|	var B = dojo._loadModule("A.B");
		//	   	|	...
		//	returns: the required namespace object
		omitModuleCheck = this._global_omit_module_check || omitModuleCheck;
		var module = this._loadedModules[moduleName];
		if(module){
			return module;
		}

		/* @mpt assume they're all loaded
		// convert periods to slashes
		var relpath = this._getModuleSymbols(moduleName).join("/") + '.js';

		var modArg = (!omitModuleCheck) ? moduleName : null;
		var ok = this._loadPath(relpath, modArg);

		if((!ok)&&(!omitModuleCheck)){
			throw new Error("Could not load '" + moduleName + "';  last tried '" + relpath + "'");
		}

		// check that the symbol was defined
		// Don't bother if we're doing xdomain (asynchronous) loading.
		if((!omitModuleCheck)&&(!this["_isXDomain"])){
			// pass in false so we can give better error
			module = this._loadedModules[moduleName];
			if(!module){
				throw new Error("symbol '" + moduleName + "' is not defined after loading '" + relpath + "'");  
			}
		}

		return module;
	*/
	}

	dojo.provide = function(/*String*/ resourceName){
		//	summary:
		//		Each javascript source file must have (exactly) one dojo.provide()
		//		call at the top of the file, corresponding to the file name.
		//		For example, js/dojo/foo.js must have dojo.provide("dojo.foo");  at the
		//		top of the file.
		//	description:
		//		Each javascript source file is called a resource.  When a resource
		//		is loaded by the browser, dojo.provide() registers that it has been
		//		loaded.
		//	
		//		For backwards compatibility reasons, in addition to registering the
		//		resource, dojo.provide() also ensures that the javascript object
		//		for the module exists.  For example,
		//		dojo.provide("dojo.io.cometd"), in addition to registering that
		//		cometd.js is a resource for the dojo.iomodule, will ensure that
		//		the dojo.io javascript object exists, so that calls like
		//		dojo.io.foo = function(){ ... } don't fail.
		//
		//		In the case of a build (or in the future, a rollup), where multiple
		//		javascript source files are combined into one bigger file (similar
		//		to a .lib or .jar file), that file will contain multiple
		//		dojo.provide() calls, to note that it includes multiple resources.

		//Make sure we have a string.
		resourceName = resourceName + "";
		return (d._loadedModules[resourceName] = d.getObject(resourceName, true));  // Object
	}

	//Start of old bootstrap2:

	dojo.platformRequire = function(/*Object containing Arrays*/modMap){
		//	description:
		//		This method taks a "map" of arrays which one can use to optionally
		//		load dojo modules. The map is indexed by the possible
		//		dojo.name_ values, with two additional values: "default"
		//		and "common". The items in the "default" array will be loaded if
		//		none of the other items have been choosen based on the
		//		hostenv.name_ item. The items in the "common" array will _always_
		//		be loaded, regardless of which list is chosen.  Here's how it's
		//		normally called:
		//	
		//		|	dojo.platformRequire({
		//		|		// an example that passes multiple args to _loadModule()
		//		|		browser: [
		//		|			["foo.bar.baz", true, true], 
		//		|			"foo.sample",
		//		|			"foo.test,
		//		|		],
		//		|		default: [ "foo.sample.*" ],
		//		|		common: [ "really.important.module.*" ]
		//		|	});

		// FIXME: dojo.name_ no longer works!!

		var common = modMap["common"]||[];
		var result = common.concat(modMap[d._name]||modMap["default"]||[]);

		for(var x=0;  x<result.length;  x++){
			var curr = result[x];
			if(curr.constructor == Array){
				d._loadModule.apply(d, curr);
			}else{
				d._loadModule(curr);
			}
		}
	}


	dojo.requireIf = function(/*Boolean*/ condition, /*String*/ resourceName){
		// summary:
		//		If the condition is true then call dojo.require() for the specified
		//		resource
		if(condition === true){
			// FIXME: why do we support chained require()'s here? does the build system?
			var args = [];
			for(var i = 1;  i < arguments.length;  i++){ 
				args.push(arguments[i]);
			}
			d.require.apply(d, args);
		}
	}

	dojo.requireAfterIf = d.requireIf;

	dojo.registerModulePath = function(/*String*/module, /*String*/prefix){
		//	summary: 
		//		maps a module name to a path
		//	description: 
		//		An unregistered module is given the default path of ../<module>,
		//		relative to Dojo root. For example, module acme is mapped to
		//		../acme.  If you want to use a different module name, use
		//		dojo.registerModulePath. 
		d._modulePrefixes[module] = { name: module, value: prefix };
	}

	dojo.requireLocalization = function(/*String*/moduleName, /*String*/bundleName, /*String?*/locale, /*String?*/availableFlatLocales){
		// summary:
		//		Declares translated resources and loads them if necessary, in the
		//		same style as dojo.require.  Contents of the resource bundle are
		//		typically strings, but may be any name/value pair, represented in
		//		JSON format.  See also dojo.i18n.getLocalization.
		// moduleName: 
		//		name of the package containing the "nls" directory in which the
		//		bundle is found
		// bundleName: 
		//		bundle name, i.e. the filename without the '.js' suffix
		// locale: 
		//		the locale to load (optional)  By default, the browser's user
		//		locale as defined by dojo.locale
		// availableFlatLocales: 
		//		A comma-separated list of the available, flattened locales for this
		//		bundle. This argument should only be set by the build process.
		// description:
		//		Load translated resource bundles provided underneath the "nls"
		//		directory within a package.  Translated resources may be located in
		//		different packages throughout the source tree.  For example, a
		//		particular widget may define one or more resource bundles,
		//		structured in a program as follows, where moduleName is
		//		mycode.mywidget and bundleNames available include bundleone and
		//		bundletwo:
		//
		//			...
		//			mycode/
		//			 mywidget/
		//			  nls/
		//			   bundleone.js (the fallback translation, English in this example)
		//			   bundletwo.js (also a fallback translation)
		//			   de/
		//			    bundleone.js
		//			    bundletwo.js
		//			   de-at/
		//			    bundleone.js
		//			   en/
		//			    (empty;  use the fallback translation)
		//			   en-us/
		//			    bundleone.js
		//			   en-gb/
		//			    bundleone.js
		//			   es/
		//			    bundleone.js
		//			    bundletwo.js
		//			  ...etc
		//			...
		//
		//		Each directory is named for a locale as specified by RFC 3066,
		//		(http://www.ietf.org/rfc/rfc3066.txt), normalized in lowercase.
		//		Note that the two bundles in the example do not define all the same
		//		variants.  For a given locale, bundles will be loaded for that
		//		locale and all more general locales above it, including a fallback
		//		at the root directory.  For example, a declaration for the "de-at"
		//		locale will first load nls/de-at/bundleone.js, then
		//		nls/de/bundleone.js and finally nls/bundleone.js.  The data will be
		//		flattened into a single Object so that lookups will follow this
		//		cascading pattern.  An optional build step can preload the bundles
		//		to avoid data redundancy and the multiple network hits normally
		//		required to load these resources.

		d.require("dojo.i18n");
		d.i18n._requireLocalization.apply(d.hostenv, arguments);
	};


	var ore = new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$");
	var ire = new RegExp("^((([^:]+:)?([^@]+))@)?([^:]*)(:([0-9]+))?$");

	dojo._Url = function(/*dojo._Url||String...*/){
		// summary: 
		//		Constructor to create an object representing a URL.
		//		It is marked as private, since we might consider removing
		//		or simplifying it.
		// description: 
		//		Each argument is evaluated in order relative to the next until
		//		a canonical uri is produced. To get an absolute Uri relative to
		//		the current document use:
		//      	new dojo._Url(document.baseURI, url)

		var n = null;

		// TODO: support for IPv6, see RFC 2732
		var _a = arguments;
		var uri = _a[0];
		// resolve uri components relative to each other
		for(var i = 1;  i<_a.length;  i++){
			if(!_a[i]){ continue;  }

			// Safari doesn't support this.constructor so we have to be explicit
			// FIXME: Tracked (and fixed) in Webkit bug 3537.
			//		http://bugs.webkit.org/show_bug.cgi?id=3537
			var relobj = new d._Url(_a[i]+"");
			var uriobj = new d._Url(uri+"");

			if(
				(relobj.path=="")	&&
				(!relobj.scheme)	&&
				(!relobj.authority)	&&
				(!relobj.query)
			){
				if(relobj.fragment != n){
					uriobj.fragment = relobj.fragment;
				}
				relobj = uriobj;
			}else if(!relobj.scheme){
				relobj.scheme = uriobj.scheme;

				if(!relobj.authority){
					relobj.authority = uriobj.authority;

					if(relobj.path.charAt(0) != "/"){
						var path = uriobj.path.substring(0,
							uriobj.path.lastIndexOf("/") + 1) + relobj.path;

						var segs = path.split("/");
						for(var j = 0;  j < segs.length;  j++){
							if(segs[j] == "."){
								if(j == segs.length - 1){
									segs[j] = "";
								}else{
									segs.splice(j, 1);
									j--;
								}
							}else if(j > 0 && !(j == 1 && segs[0] == "") &&
								segs[j] == ".." && segs[j-1] != ".."){

								if(j == (segs.length - 1)){
									segs.splice(j, 1);
									segs[j - 1] = "";
								}else{
									segs.splice(j - 1, 2);
									j -= 2;
								}
							}
						}
						relobj.path = segs.join("/");
					}
				}
			}

			uri = "";
			if(relobj.scheme){ 
				uri += relobj.scheme + ":";
			}
			if(relobj.authority){
				uri += "//" + relobj.authority;
			}
			uri += relobj.path;
			if(relobj.query){
				uri += "?" + relobj.query;
			}
			if(relobj.fragment){
				uri += "#" + relobj.fragment;
			}
		}

		this.uri = uri.toString();

		// break the uri into its main components
		var r = this.uri.match(ore);

		this.scheme = r[2] || (r[1] ? "" : n);
		this.authority = r[4] || (r[3] ? "" : n);
		this.path = r[5];  // can never be undefined
		this.query = r[7] || (r[6] ? "" : n);
		this.fragment  = r[9] || (r[8] ? "" : n);

		if(this.authority != n){
			// server based naming authority
			r = this.authority.match(ire);

			this.user = r[3] || n;
			this.password = r[4] || n;
			this.host = r[5];
			this.port = r[7] || n;
		}
	}

	dojo._Url.prototype.toString = function(){ return this.uri;  };

	dojo.moduleUrl = function(/*String*/module, /*dojo._Url||String*/url){
		// summary: 
		//		Returns a Url object relative to a module
		//		
		// example: 
		//	|	dojo.moduleUrl("dojo.widget","templates/template.html");
		// example:
		//	|	dojo.moduleUrl("acme","images/small.png")

		var loc = dojo._getModuleSymbols(module).join('/');
		if(!loc){ return null;  }
		if(loc.lastIndexOf("/") != loc.length-1){
			loc += "/";
		}
		
		//If the path is an absolute path (starts with a / or is on another
		//domain/xdomain) then don't add the baseUrl.
		var colonIndex = loc.indexOf(":");
		if(loc.charAt(0) != "/" && (colonIndex == -1 || colonIndex > loc.indexOf("/"))){
			loc = d.baseUrl + loc;
		}

		return new d._Url(loc, url);  // String
	}
})();

if(typeof window != 'undefined'){
	dojo.isBrowser = true;
	dojo._name = "browser";


	// attempt to figure out the path to dojo if it isn't set in the config
	(function(){
		var d = dojo;
		// this is a scope protection closure. We set browser versions and grab
		// the URL we were loaded from here.

		// grab the node we were loaded from
		if(document && document.getElementsByTagName){
			var scripts = document.getElementsByTagName("script");
			var rePkg = /dojo(\.xd)?\.js([\?\.]|$)/i;
			for(var i = 0;  i < scripts.length;  i++){
				var src = scripts[i].getAttribute("src");
				if(!src){ continue;  }
				var m = src.match(rePkg);
				if(m){
					// find out where we came from
					if(!djConfig["baseUrl"]){
						djConfig["baseUrl"] = src.substring(0, m.index);
					}
					// and find out if we need to modify our behavior
					var cfg = scripts[i].getAttribute("djConfig");
					if(cfg){
						var cfgo = eval("({ "+cfg+" })");
						for(var x in cfgo){
							djConfig[x] = cfgo[x];
						}
					}
					break;  // "first Dojo wins"
				}
			}
		}
		d.baseUrl = djConfig["baseUrl"];

		// fill in the rendering support information in dojo.render.*
		var n = navigator;
		var dua = n.userAgent;
		var dav = n.appVersion;
		var tv = parseFloat(dav);

		d.isOpera = (dua.indexOf("Opera") >= 0) ? tv : 0;
		d.isKhtml = (dav.indexOf("Konqueror") >= 0)||(dav.indexOf("Safari") >= 0) ? tv : 0;
		if(dav.indexOf("Safari") >= 0){
			d.isSafari = parseFloat(dav.split("Version/")[1]) || 2;
		}
		var geckoPos = dua.indexOf("Gecko");
		d.isMozilla = d.isMoz = ((geckoPos >= 0)&&(!d.isKhtml)) ? tv : 0;
		d.isFF = 0;
		d.isIE = 0;
		try{
			if(d.isMoz){
				d.isFF = parseFloat(dua.split("Firefox/")[1].split(" ")[0]);
			}
			if((document.all)&&(!d.isOpera)){
				d.isIE = parseFloat(dav.split("MSIE ")[1].split(";")[0]);
			}
		}catch(e){}

		//Workaround to get local file loads of dojo to work on IE 7
		//by forcing to not use native xhr.
		if(dojo.isIE && (window.location.protocol === "file:")){
			djConfig.ieForceActiveXXhr=true;
		}

		var cm = document["compatMode"];
		d.isQuirks = (cm == "BackCompat")||(cm == "QuirksMode")||(d.isIE < 6);

		// TODO: is the HTML LANG attribute relevant?
		d.locale = djConfig.locale || (d.isIE ? n.userLanguage : n.language).toLowerCase();

		d._println = console.debug;

		// These are in order of decreasing likelihood;  this will change in time.
		d._XMLHTTP_PROGIDS = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'];

		d._xhrObj= function(){
			// summary: 
			//		does the work of portably generating a new XMLHTTPRequest
			//		object.
			var http = null;
			var last_e = null;
			if(!dojo.isIE || !djConfig.ieForceActiveXXhr){
				try{ http = new XMLHttpRequest();  }catch(e){}
			}
			if(!http){
				for(var i=0;  i<3;  ++i){
					var progid = dojo._XMLHTTP_PROGIDS[i];
					try{
						http = new ActiveXObject(progid);
					}catch(e){
						last_e = e;
					}

					if(http){
						dojo._XMLHTTP_PROGIDS = [progid];   // so faster next time
						break;
					}
				}
			}

			if(!http){
				throw new Error("XMLHTTP not available: "+last_e);
			}

			return http;  // XMLHTTPRequest instance
		}

		d._isDocumentOk = function(http){
			var stat = http.status || 0;
			return ( (stat>=200)&&(stat<300))|| 	// Boolean
				(stat==304)|| 						// allow any 2XX response code
				(stat==1223)|| 						// get it out of the cache
				(!stat && (location.protocol=="file:" || location.protocol=="chrome:") );  // Internet Explorer mangled the status code
		}

		//See if base tag is in use.
		//This is to fix http://trac.dojotoolkit.org/ticket/3973,
		//but really, we need to find out how to get rid of the dojo._Url reference
		//below and still have DOH work with the dojo.i18n test following some other
		//test that uses the test frame to load a document (trac #2757).
		//Opera still has problems, but perhaps a larger issue of base tag support
		//with XHR requests (hasBase is true, but the request is still made to document
		//path, not base path).
		var owloc = window.location+"";
		var base = document.getElementsByTagName("base");
		var hasBase = (base && base.length > 0);

		d._getText = function(/*URI*/ uri, /*Boolean*/ fail_ok){
			// summary: Read the contents of the specified uri and return those contents.
			// uri:
			//		A relative or absolute uri. If absolute, it still must be in
			//		the same "domain" as we are.
			// fail_ok:
			//		Default false. If fail_ok and loading fails, return null
			//		instead of throwing.
			// returns: The response text. null is returned when there is a
			//		failure and failure is okay (an exception otherwise)

			// alert("_getText: " + uri);

			// NOTE: must be declared before scope switches ie. this._xhrObj()
			var http = this._xhrObj();

			if(!hasBase && dojo._Url){
				uri = (new dojo._Url(owloc, uri)).toString();
			}
			/*
			console.debug("_getText:", uri);
			console.debug(window.location+"");
			alert(uri);
			*/

			console.log("@mpt: http.open called w/url : " + uri);
			/*

			http.open('GET', uri, false);
			try{
				http.send(null);
				// alert(http);
				if(!d._isDocumentOk(http)){
					var err = Error("Unable to load "+uri+" status:"+ http.status);
					err.status = http.status;
					err.responseText = http.responseText;
					throw err;
				}
			}catch(e){
				if(fail_ok){ return null;  } // null
				// rethrow the exception
				throw e;
			}
			return http.responseText;  // String
			*/
		}
	})();

	dojo._initFired = false;
	//	BEGIN DOMContentLoaded, from Dean Edwards (http://dean.edwards.name/weblog/2006/06/again/)
	dojo._loadInit = function(e){
		dojo._initFired = true;
		// allow multiple calls, only first one will take effect
		// A bug in khtml calls events callbacks for document for event which isnt supported
		// for example a created contextmenu event calls DOMContentLoaded, workaround
		var type = (e && e.type) ? e.type.toLowerCase() : "load";
		if(arguments.callee.initialized || (type!="domcontentloaded" && type!="load")){ return;  }
		arguments.callee.initialized = true;
		if(typeof dojo["_khtmlTimer"] != 'undefined'){
			clearInterval(dojo._khtmlTimer);
			delete dojo._khtmlTimer;
		}

		if(dojo._inFlightCount == 0){
			dojo._modulesLoaded();
		}
	}

	//	START DOMContentLoaded
	// Mozilla and Opera 9 expose the event we could use
	if(document.addEventListener){
		// NOTE: 
		//		due to a threading issue in Firefox 2.0, we can't enable
		//		DOMContentLoaded on that platform. For more information, see:
		//		http://trac.dojotoolkit.org/ticket/1704
		if(dojo.isOpera|| (dojo.isMoz && (djConfig["enableMozDomContentLoaded"] === true))){
			document.addEventListener("DOMContentLoaded", dojo._loadInit, null);
		}

		//	mainly for Opera 8.5, won't be fired if DOMContentLoaded fired already.
		//  also used for Mozilla because of trac #1640
		window.addEventListener("load", dojo._loadInit, null);
	}

	if(/(WebKit|khtml)/i.test(navigator.userAgent)){ // sniff
		dojo._khtmlTimer = setInterval(function(){
			if(/loaded|complete/.test(document.readyState)){
				dojo._loadInit();  // call the onload handler
			}
		}, 10);
	}
	//	END DOMContentLoaded

	(function(){

		var _w = window;
		var _handleNodeEvent = function(/*String*/evtName, /*Function*/fp){
			// summary:
			//		non-destructively adds the specified function to the node's
			//		evtName handler.
			// evtName: should be in the form "onclick" for "onclick" handlers.
			// Make sure you pass in the "on" part.
			var oldHandler = _w[evtName] || function(){};
			_w[evtName] = function(){
				fp.apply(_w, arguments);
				oldHandler.apply(_w, arguments);
			}
		}

		if(dojo.isIE){
			// 	for Internet Explorer. readyState will not be achieved on init
			// 	call, but dojo doesn't need it however, we'll include it
			// 	because we don't know if there are other functions added that
			// 	might.  Note that this has changed because the build process
			// 	strips all comments -- including conditional ones.

			document.write('<scr'+'ipt defer src="//:" '
				+ 'onreadystatechange="if(this.readyState==\'complete\'){dojo._loadInit();}">'
				+ '</scr'+'ipt>'
			);

			// IE WebControl hosted in an application can fire "beforeunload" and "unload"
			// events when control visibility changes, causing Dojo to unload too soon. The
			// following code fixes the problem
			// Reference: http://support.microsoft.com/default.aspx?scid=kb;en-us;199155
			var _unloading = true;
			_handleNodeEvent("onbeforeunload", function(){
				_w.setTimeout(function(){ _unloading = false;  }, 0);
			});
			_handleNodeEvent("onunload", function(){
				if(_unloading){ dojo.unloaded();  }
			});

			try{
				document.namespaces.add("v","urn:schemas-microsoft-com:vml");
				document.createStyleSheet().addRule("v\\:*", "behavior:url(#default#VML)");
			}catch(e){}
		}else{
			// FIXME: dojo.unloaded requires dojo scope, so using anon function wrapper.
			_handleNodeEvent("onbeforeunload", function() { dojo.unloaded();  });
		}

	})();

	/*
	OpenAjax.subscribe("OpenAjax", "onload", function(){
		if(dojo._inFlightCount == 0){
			dojo._modulesLoaded();
		}
	});

	OpenAjax.subscribe("OpenAjax", "onunload", function(){
		dojo.unloaded();
	});
	*/
} //if (typeof window != 'undefined')

//Load debug code if necessary.
// dojo.requireIf((djConfig["isDebug"] || djConfig["debugAtAllCosts"]), "dojo.debug");

//window.widget is for Dashboard detection
//The full conditionals are spelled out to avoid issues during builds.
//Builds may be looking for require/requireIf statements and processing them.
// dojo.requireIf(djConfig["debugAtAllCosts"] && !window.widget && !djConfig["useXDomain"], "dojo.browser_debug");
// dojo.requireIf(djConfig["debugAtAllCosts"] && !window.widget && djConfig["useXDomain"], "dojo.browser_debug_xd");

if(djConfig.isDebug){
		dojo.require("dojo._firebug.firebug");
}

if(djConfig.debugAtAllCosts){
	djConfig.useXDomain = true;
	dojo.require("dojo._base._loader.loader_xd");
	dojo.require("dojo._base._loader.loader_debug");
	dojo.require("dojo.i18n");
}

};

if(!dojo._hasResource["dojo._base.lang"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.lang"] = true;
dojo.provide("dojo._base.lang");

// Crockford (ish) functions

dojo.isString = function(/*anything*/ it){
	// summary:	Return true if it is a String
	return typeof it == "string" || it instanceof String;  // Boolean
}

dojo.isArray = function(/*anything*/ it){
	// summary: Return true if it is an Array
	return it && it instanceof Array || typeof it == "array";  // Boolean
}

/*=====
dojo.isFunction = function(it){
	// summary: Return true if it is a Function
	// it: anything
}
=====*/

dojo.isFunction = (function(){
	var _isFunction = function(/*anything*/ it){
		return typeof it == "function" || it instanceof Function;  // Boolean
	};

	return dojo.isSafari ?
		// only slow this down w/ gratuitious casting in Safari since it's what's b0rken
		function(/*anything*/ it){
			if(typeof it == "function" && it == "[object NodeList]"){ return false;  }
			return _isFunction(it);  // Boolean
		} : _isFunction;
})();

dojo.isObject = function(/*anything*/ it){
	// summary: 
	//		Returns true if it is a JavaScript object (or an Array, a Function or null)
	return it !== undefined &&
		(it === null || typeof it == "object" || dojo.isArray(it) || dojo.isFunction(it));  // Boolean
}

dojo.isArrayLike = function(/*anything*/ it){
	//	summary:
	//		similar to dojo.isArray() but more permissive
	//	description:
	//		Doesn't strongly test for "arrayness".  Instead, settles for "isn't
	//		a string or number and has a length property". Arguments objects
	//		and DOM collections will return true when passed to
	//		dojo.isArrayLike(), but will return false when passed to
	//		dojo.isArray().
	//	return:
	//		If it walks like a duck and quicks like a duck, return true
	var d = dojo;
	return it && it !== undefined &&
		// keep out built-in constructors (Number, String, ...) which have length
		// properties
		!d.isString(it) && !d.isFunction(it) &&
		!(it.tagName && it.tagName.toLowerCase() == 'form') &&
		(d.isArray(it) || isFinite(it.length));  // Boolean
}

dojo.isAlien = function(/*anything*/ it){
	// summary: 
	//		Returns true if it is a built-in function or some other kind of
	//		oddball that *should* report as a function but doesn't
	return it && !dojo.isFunction(it) && /\{\s*\[native code\]\s*\}/.test(String(it));  // Boolean
}

dojo.extend = function(/*Object*/ constructor, /*Object...*/ props){
	// summary:
	//		Adds all properties and methods of props to constructor's
	//		prototype, making them available to all instances created with
	//		constructor.
	for(var i=1, l=arguments.length;  i<l;  i++){
		dojo._mixin(constructor.prototype, arguments[i]);
	}
	return constructor;  // Object
}

dojo._hitchArgs = function(scope, method /*,...*/){
	var pre = dojo._toArray(arguments, 2);
	var named = dojo.isString(method);
	return function(){
		// arrayify arguments
		var args = dojo._toArray(arguments);
		// locate our method
		var f = named ? (scope||dojo.global)[method] : method;
		// invoke with collected args
		return f && f.apply(scope || this, pre.concat(args));  // mixed
 	} // Function
}

dojo.hitch = function(/*Object*/scope, /*Function|String*/method /*,...*/){
	// summary: 
	//		Returns a function that will only ever execute in the a given scope. 
	//		This allows for easy use of object member functions
	//		in callbacks and other places in which the "this" keyword may
	//		otherwise not reference the expected scope. 
	//		Any number of default positional arguments may be passed as parameters 
	//		beyond "method".
	//		Each of these values will be used to "placehold" (similar to curry)
	//		for the hitched function. 
	// scope: 
	//		The scope to use when method executes. If method is a string, 
	//		scope is also the object containing method.
	// method:
	//		A function to be hitched to scope, or the name of the method in
	//		scope to be hitched.
	// example:
	//	|	dojo.hitch(foo, "bar")();  
	//		runs foo.bar() in the scope of foo
	// example:
	//	|	dojo.hitch(foo, myFunction);
	//		returns a function that runs myFunction in the scope of foo
	if(arguments.length > 2){
		return dojo._hitchArgs.apply(dojo, arguments);  // Function
	}
	if(!method){
		method = scope;
		scope = null;
	}
	if(dojo.isString(method)){
		scope = scope || dojo.global;
		if(!scope[method]){ throw(['dojo.hitch: scope["', method, '"] is null (scope="', scope, '")'].join(''));  }
		return function(){ return scope[method].apply(scope, arguments || []);  };  // Function
	}
	return !scope ? method : function(){ return method.apply(scope, arguments || []);  };  // Function
}

/*=====
dojo.delegate = function(obj, props){
	//	summary:
	//		returns a new object which "looks" to obj for properties which it
	//		does not have a value for. Optionally takes a bag of properties to
	//		seed the returned object with initially. 
	//	description:
	//		This is a small implementaton of the Boodman/Crockford delegation
	//		pattern in JavaScript. An intermediate object constructor mediates
	//		the prototype chain for the returned object, using it to delegate
	//		down to obj for property lookup when object-local lookup fails.
	//		This can be thought of similarly to ES4's "wrap", save that it does
	//		not act on types but rather on pure objects.
	//	obj:
	//		The object to delegate to for properties not found directly on the
	//		return object or in props.
	//	props:
	//		an object containing properties to assign to the returned object
	//	returns:
	//		an Object of anonymous type
	//	example:
	//	|	var foo = { bar: "baz" };
	//	|	var thinger = dojo.delegate(foo, { thud: "xyzzy"});
	//	|	thinger.bar == "baz";  // delegated to foo
	//	|	foo.xyzzy == undefined;  // by definition
	//	|	thinger.xyzzy == "xyzzy";  // mixed in from props
	//	|	foo.bar = "thonk";
	//	|	thinger.bar == "thonk";  // still delegated to foo's bar
}
=====*/


dojo.delegate = dojo._delegate = function(obj, props){

	// boodman/crockford delegation
	function TMP(){};
	TMP.prototype = obj;
	var tmp = new TMP();
	if(props){
		dojo.mixin(tmp, props);
	}
	return tmp;  // Object
}

dojo.partial = function(/*Function|String*/method /*, ...*/){
	// summary:
	//		similar to hitch() except that the scope object is left to be
	//		whatever the execution context eventually becomes.
	//	description:
	//		Calling dojo.partial is the functional equivalent of calling:
	//		|	dojo.hitch(null, funcName, ...);
	var arr = [ null ];
	return dojo.hitch.apply(dojo, arr.concat(dojo._toArray(arguments)));  // Function
}

dojo._toArray = function(/*Object*/obj, /*Number?*/offset, /*Array?*/ startWith){
	// summary:
	//		Converts an array-like object (i.e. arguments, DOMCollection)
	//		to an array. Returns a new Array object.
	// obj:
	//		the object to "arrayify". We expect the object to have, at a
	//		minimum, a length property which corresponds to integer-indexed
	//		properties.
	// offset:
	//		the location in obj to start iterating from. Defaults to 0. Optional.
	// startWith:
	//		An array to pack with the properties of obj. If provided,
	//		properties in obj are appended at the end of startWith and
	//		startWith is the returned array.
	var arr = startWith||[];
	for(var x = offset || 0;  x < obj.length;  x++){
		arr.push(obj[x]);
	}
	return arr;  // Array
}

dojo.clone = function(/*anything*/ o){
	// summary:
	//		Clones objects (including DOM nodes) and all children.
	//		Warning: do not clone cyclic structures.
	if(!o){ return o;  }
	if(dojo.isArray(o)){
		var r = [];
		for(var i = 0;  i < o.length;  ++i){
			r.push(dojo.clone(o[i]));
		}
		return r;  // Array
	}
	if(!dojo.isObject(o)){
		return o;	 /*anything*/
	}
	if(o.nodeType && o.cloneNode){ // isNode
		return o.cloneNode(true);  // Node
	}
	if(o instanceof Date){
		return new Date(o.getTime());	 // Date
	}
	// Generic objects
	var r = new o.constructor();  // specific to dojo.declare()'d classes!
	for(var i in o){
		if(!(i in r) || r[i] != o[i]){
			r[i] = dojo.clone(o[i]);
		}
	}
	return r;  // Object
}

dojo.trim = function(/*String*/ str){
	// summary: 
	//		trims whitespaces from both sides of the string
	// description:
	//		This version of trim() was selected for inclusion into the base due
	//		to its compact size and relatively good performance (see Steven
	//		Levithan's blog:
	//		http://blog.stevenlevithan.com/archives/faster-trim-javascript).
	//		The fastest but longest version of this function is located at
	//		dojo.string.trim()
	return str.replace(/^\s\s*/, '').replace(/\s\s*$/, '');	 // String
}

}

if(!dojo._hasResource["dojo._base.declare"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.declare"] = true;
dojo.provide("dojo._base.declare");


// this file courtesy of the TurboAjax group, licensed under a Dojo CLA

dojo.declare = function(/*String*/ className, /*Function|Function[]*/ superclass, /*Object*/ props){
	//	summary: 
	//		Create a feature-rich constructor from compact notation
	//	className:
	//		The name of the constructor (loosely, a "class")
	//		stored in the "declaredClass" property in the created prototype
	//	superclass:
	//		May be null, a Function, or an Array of Functions. If an array, 
	//		the first element is used as the prototypical ancestor and
	//		any following Functions become mixin ancestors.
	//	props:
	//		An object whose properties are copied to the
	//		created prototype.
	//		Add an instance-initialization function by making it a property 
	//		named "constructor".
	//	description:
	//		Create a constructor using a compact notation for inheritance and
	//		prototype extension. 
	//
	//		All superclasses (including mixins) must be Functions (not simple Objects).
	//
	//		Mixin ancestors provide a type of multiple inheritance. Prototypes of mixin 
	//		ancestors are copied to the new class: changes to mixin prototypes will
	//		not affect classes to which they have been mixed in.
	//
	//		"className" is cached in "declaredClass" property of the new class.
	//
	//	example:
	//	|	dojo.declare("my.classes.bar", my.classes.foo, {
	//	|		// properties to be added to the class prototype
	//	|		someValue: 2,
	//	|		// initialization function
	//	|		constructor: function(){
	//	|			this.myComplicatedObject = new ReallyComplicatedObject();  
	//	|		},
	//	|		// other functions
	//	|		someMethod: function(){ 
	//	|			doStuff();  
	//	|		}
	//	|	);

	// argument juggling (deprecated)
	if(dojo.isFunction(props)||(arguments.length>3)){ 
		dojo.deprecated("dojo.declare: for class '" + className + "' pass initializer function as 'constructor' property instead of as a separate argument.", "", "1.0");
		var c = props;
		props = arguments[3] || {};
		props.constructor = c;
	}
	// process superclass argument
	// var dd=dojo.declare, mixins=null;
	var dd=arguments.callee, mixins=null;
	if(dojo.isArray(superclass)){
		mixins = superclass;
		superclass = mixins.shift();
	}
	// construct intermediate classes for mixins
	if(mixins){
		for(var i=0, m;  i<mixins.length;  i++){
			m = mixins[i];
			if(!m){throw("Mixin #" + i + " to declaration of " + className + " is null. It's likely a required module is not loaded.")};
			superclass = dd._delegate(superclass, m);
		}
	}
	// prepare values
	var init=(props||0).constructor, ctor=dd._delegate(superclass), fn;
	// name methods (experimental)
	for(var i in props){if(dojo.isFunction(fn=props[i])&&(!0[i])){fn.nom=i;}}
	// decorate prototype
	dojo.extend(ctor, {declaredClass: className, _constructor: init, preamble: null}, props||0);  
	// special help for IE
	ctor.prototype.constructor = ctor;
	// create named reference
	return dojo.setObject(className, ctor);  // Function
}

dojo.mixin(dojo.declare, {
	_delegate: function(base, mixin){
		var bp = (base||0).prototype, mp = (mixin||0).prototype;
		// fresh constructor, fresh prototype
		var ctor = dojo.declare._makeCtor();
		// cache ancestry
		dojo.mixin(ctor, {superclass: bp, mixin: mp, extend: dojo.declare._extend});
		// chain prototypes
		if(base){ctor.prototype = dojo._delegate(bp);}
		// add mixin and core
		dojo.extend(ctor, dojo.declare._core, mp||0, {_constructor: null, preamble: null});
		// special help for IE
		ctor.prototype.constructor = ctor;
		// name this class for debugging
		ctor.prototype.declaredClass = (bp||0).declaredClass + '_' + (mp||0).declaredClass;
		return ctor;
	},
	_extend: function(props){
		for(var i in props){if(dojo.isFunction(fn=props[i])&&(!0[i])){fn.nom=i;}}
		dojo.extend(this, props);
	},
	_makeCtor: function(){
		// we have to make a function, but don't want to close over anything
		return function(){ this._construct(arguments);  }
	},
	_core: { 
		_construct: function(args){
			var c=args.callee, s=c.superclass, ct=s&&s.constructor, m=c.mixin, mct=m&&m.constructor, a=args, ii, fn;
			// side-effect of = used on purpose here, lint may complain, don't try this at home
			if(a[0]){ 
				// FIXME: preambles for each mixin should be allowed
				// FIXME: 
				//		should we allow the preamble here NOT to modify the
				//		default args, but instead to act on each mixin
				//		independently of the class instance being constructed
				//		(for impdedence matching)?

				// allow any first argument w/ a "preamble" property to act as a
				// class preamble (not exclusive of the prototype preamble)
				if(/*dojo.isFunction*/(fn = a[0]["preamble"])){ 
					a = fn.apply(this, a) || a;  
				}
			} 
			// prototype preamble
			if(fn=c.prototype.preamble){a = fn.apply(this, a) || a;}
			// FIXME: 
			//		need to provide an optional prototype-settable
			//		"_explicitSuper" property which disables this
			// initialize superclass
			if(ct&&ct.apply){ct.apply(this, a);}
			// initialize mixin
			if(mct&&mct.apply){mct.apply(this, a);}
			// initialize self
			if(ii=c.prototype._constructor){ii.apply(this, args);}
			// post construction
			if(this.constructor.prototype==c.prototype && (ct=this.postscript)){ct.apply(this, args)};
		},
		_findMixin: function(mixin){
			var c = this.constructor, p, m;
			while(c){
				p = c.superclass;
				m = c.mixin;
				if(m==mixin || (m instanceof mixin.constructor)){return p;}
				if(m && (m=m._findMixin(mixin))){return m;}
				c = p && p.constructor;
			}
		},
		_findMethod: function(name, method, ptype, has){
			// consciously trading readability for bytes and speed in this low-level method
			var p=ptype, c, m, f;
			do{
				c = p.constructor;
				m = c.mixin;
				// find method by name in our mixin ancestor
				if(m && (m=this._findMethod(name, method, m, has))){return m};
				// if we found a named method that either exactly-is or exactly-is-not 'method'
				if((f=p[name])&&(has==(f==method))){return p};
				// ascend chain
				p = c.superclass;
			}while(p);
			// if we couldn't find an ancestor in our primary chain, try a mixin chain
			return !has && (p=this._findMixin(ptype)) && this._findMethod(name, method, p, has);
		},
		inherited: function(name, args, newArgs){
			// optionalize name argument (experimental)
			var a = arguments;
			if(!dojo.isString(a[0])){newArgs=args;  args=name;  name=args.callee.nom;}
			var c=args.callee, p=this.constructor.prototype, a=newArgs||args, fn, mp;
			// if not an instance override 
			if(this[name]!=c || p[name]==c){
				mp = this._findMethod(name, c, p, true);
				if(!mp){throw(this.declaredClass + ': name argument ("' + name + '") to inherited must match callee (declare.js)');}
				p = this._findMethod(name, c, mp, false);
			}
			fn = p && p[name];
			// FIXME: perhaps we should throw here? 
			if(!fn){console.debug(mp.declaredClass + ': no inherited "' + name + '" was found (declare.js)');  return;}
			// if the function exists, invoke it in our scope
			return fn.apply(this, a);
		}
	}
});

}

if(!dojo._hasResource["dojo._base.connect"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.connect"] = true;
dojo.provide("dojo._base.connect");


// this file courtesy of the TurboAjax Group, licensed under a Dojo CLA

// low-level delegation machinery
dojo._listener = {
	// create a dispatcher function
	getDispatcher: function(){
		// following comments pulled out-of-line to prevent cloning them 
		// in the returned function.
		// - indices (i) that are really in the array of listeners (ls) will 
		//   not be in Array.prototype. This is the 'sparse array' trick
		//   that keeps us safe from libs that take liberties with built-in 
		//   objects
		// - listener is invoked with current scope (this)
		return function(){
			var ap=Array.prototype, c=arguments.callee, ls=c._listeners, t=c.target;
			// return value comes from original target function
			var r=t && t.apply(this, arguments);
			// invoke listeners after target function
			for(var i in ls){
				if(!(i in ap)){
					ls[i].apply(this, arguments);
				}
			}
			// return value comes from original target function
			return r;
		}
	},
	// add a listener to an object
	add: function(/*Object*/ source, /*String*/ method, /*Function*/ listener){
		// Whenever 'method' is invoked, 'listener' will have the same scope.
		// Trying to supporting a context object for the listener led to 
		// complexity. 
		// Non trivial to provide 'once' functionality here
		// because listener could be the result of a dojo.hitch call,
		// in which case two references to the same hitch target would not
		// be equivalent. 
		source = source || dojo.global;
		// The source method is either null, a dispatcher, or some other function
		var f = source[method];
		// Ensure a dispatcher
		if(!f||!f._listeners){
			var d = dojo._listener.getDispatcher();
			// original target function is special
			d.target = f;
			// dispatcher holds a list of listeners
			d._listeners = [];  
			// redirect source to dispatcher
			f = source[method] = d;
		}
		// The contract is that a handle is returned that can 
		// identify this listener for disconnect. 
		//
		// The type of the handle is private. Here is it implemented as Integer. 
		// DOM event code has this same contract but handle is Function 
		// in non-IE browsers.
		//
		// We could have separate lists of before and after listeners.
		return f._listeners.push(listener) ;  /*Handle*/
	},
	// remove a listener from an object
	remove: function(/*Object*/ source, /*String*/ method, /*Handle*/ handle){
		var f = (source||dojo.global)[method];
		// remember that handle is the index+1 (0 is not a valid handle)
		if(f && f._listeners && handle--){
			delete f._listeners[handle];  
		}
	}
};

// Multiple delegation for arbitrary methods.

// This unit knows nothing about DOM, 
// but we include DOM aware 
// documentation and dontFix
// argument here to help the autodocs.
// Actual DOM aware code is in event.js.

dojo.connect = function(/*Object|null*/ obj, 
						/*String*/ event, 
						/*Object|null*/ context, 
						/*String|Function*/ method,
						/*Boolean*/ dontFix){
	// summary:
	//		Create a link that calls one function when another executes. 
	//
	// description:
	//		Connects method to event, so that after event fires, method
	//		does too. All connected functions are passed the same arguments as
	//		the event function was initially called with. You may connect as
	//		many methods to event as needed.
	//
	//		event must be a string. If obj is null, dojo.global is used.
	//
	//		null arguments may simply be omitted.
	//
	//		obj[event] can resolve to a function or undefined (null). 
	//		If obj[event] is null, it is assigned a function.
	//
	//		The return value is a handle that is needed to 
	//		remove this connection with dojo.disconnect.
	//
	// obj: 
	//		The source object for the event function. 
	//		Defaults to dojo.global if null.
	//		If obj is a DOM node, the connection is delegated 
	//		to the DOM event manager (unless dontFix is true).
	//
	// event:
	//		String name of the event function in obj. 
	//		I.e. identifies a property obj[event].
	//
	// context: 
	//		The object that method will receive as "this".
	//
	//		If context is null and method is a function, then method
	//		inherits the context of event.
	//	
	//		If method is a string then context must be the source 
	//		object object for method (context[method]). If context is null,
	//		dojo.global is used.
	//
	// method:
	//		A function reference, or name of a function in context. 
	//		The function identified by method fires after event does. 
	//		method receives the same arguments as the event.
	//		See context argument comments for information on method's scope.
	//
	// dontFix:
	//		If obj is a DOM node, set dontFix to true to prevent delegation 
	//		of this connection to the DOM event manager. 
	//
	// example:
	//		When obj.onchange(), do ui.update():
	//	|	dojo.connect(obj, "onchange", ui, "update");
	//	|	dojo.connect(obj, "onchange", ui, ui.update);  // same
	//
	// example:
	//		Using return value for disconnect:
	//	|	var link = dojo.connect(obj, "onchange", ui, "update");
	//	|	...
	//	|	dojo.disconnect(link);
	//
	// example:
	//		When onglobalevent executes, watcher.handler is invoked:
	//	|	dojo.connect(null, "onglobalevent", watcher, "handler");
	//
	// example:
	//		When ob.onCustomEvent executes, customEventHandler is invoked:
	//	|	dojo.connect(ob, "onCustomEvent", null, "customEventHandler");
	//	|	dojo.connect(ob, "onCustomEvent", "customEventHandler");  // same
	//
	// example:
	//		When ob.onCustomEvent executes, customEventHandler is invoked
	//		with the same scope (this):
	//	|	dojo.connect(ob, "onCustomEvent", null, customEventHandler);
	//	|	dojo.connect(ob, "onCustomEvent", customEventHandler);  // same
	//
	// example:
	//		When globalEvent executes, globalHandler is invoked
	//		with the same scope (this):
	//	|	dojo.connect(null, "globalEvent", null, globalHandler);
	//	|	dojo.connect("globalEvent", globalHandler);  // same

	// normalize arguments
	var a=arguments, args=[], i=0;
	// if a[0] is a String, obj was ommited
	args.push(dojo.isString(a[0]) ? null : a[i++], a[i++]);
	// if the arg-after-next is a String or Function, context was NOT omitted
	var a1 = a[i+1];
	args.push(dojo.isString(a1)||dojo.isFunction(a1) ? a[i++] : null, a[i++]);
	// absorb any additional arguments
	for(var l=a.length;  i<l;  i++){	args.push(a[i]);  }
	// do the actual work
	return dojo._connect.apply(this, args);  /*Handle*/
}

// used by non-browser hostenvs. always overriden by event.js
dojo._connect = function(obj, event, context, method){
	var l=dojo._listener, h=l.add(obj, event, dojo.hitch(context, method));  
	return [obj, event, h, l];  // Handle
}

dojo.disconnect = function(/*Handle*/ handle){
	// summary:
	//		Remove a link created by dojo.connect.
	// description:
	//		Removes the connection between event and the method referenced by handle.
	// handle:
	//		the return value of the dojo.connect call that created the connection.
	if(handle && handle[0] !== undefined){
		dojo._disconnect.apply(this, handle);
		// let's not keep this reference
		delete handle[0];
	}
}

dojo._disconnect = function(obj, event, handle, listener){
	listener.remove(obj, event, handle);
}

// topic publish/subscribe

dojo._topics = {};

dojo.subscribe = function(/*String*/ topic, /*Object|null*/ context, /*String|Function*/ method){
	//	summary:
	//		Attach a listener to a named topic. The listener function is invoked whenever the
	//		named topic is published (see: dojo.publish).
	//		Returns a handle which is needed to unsubscribe this listener.
	//	context:
	//		Scope in which method will be invoked, or null for default scope.
	//	method:
	//		The name of a function in context, or a function reference. This is the function that
	//		is invoked when topic is published.
	//	example:
	//	|	dojo.subscribe("alerts", null, function(caption, message){ alert(caption + "\n" + message);  };
	//	|	dojo.publish("alerts", [ "read this", "hello world" ]);	 																

	// support for 2 argument invocation (omitting context) depends on hitch
	return [topic, dojo._listener.add(dojo._topics, topic, dojo.hitch(context, method))];  /*Handle*/
}

dojo.unsubscribe = function(/*Handle*/ handle){
	//	summary:
	//	 	Remove a topic listener. 
	//	handle:
	//	 	The handle returned from a call to subscribe.
	//	example:
	//	|	var alerter = dojo.subscribe("alerts", null, function(caption, message){ alert(caption + "\n" + message);  };
	//	|	...
	//	|	dojo.unsubscribe(alerter);
	if(handle){
		dojo._listener.remove(dojo._topics, handle[0], handle[1]);
	}
}

dojo.publish = function(/*String*/ topic, /*Array*/ args){
	//	summary:
	//	 	Invoke all listener method subscribed to topic.
	//	topic:
	//	 	The name of the topic to publish.
	//	args:
	//	 	An array of arguments. The arguments will be applied 
	//	 	to each topic subscriber (as first class parameters, via apply).
	//	example:
	//	|	dojo.subscribe("alerts", null, function(caption, message){ alert(caption + "\n" + message);  };
	//	|	dojo.publish("alerts", [ "read this", "hello world" ]);	 

	// Note that args is an array, which is more efficient vs variable length
	// argument list.  Ideally, var args would be implemented via Array
	// throughout the APIs.
	var f = dojo._topics[topic];
	if(f){
		f.apply(this, args||[]);
	}
}

dojo.connectPublisher = function(	/*String*/ topic, 
									/*Object|null*/ obj, 
									/*String*/ event){
	//	summary:
	//	 	Ensure that everytime obj.event() is called, a message is published
	//	 	on the topic. Returns a handle which can be passed to
	//	 	dojo.disconnect() to disable subsequent automatic publication on
	//	 	the topic.
	//	topic:
	//	 	The name of the topic to publish.
	//	obj: 
	//	 	The source object for the event function. Defaults to dojo.global
	//	 	if null.
	//	event:
	//	 	The name of the event function in obj. 
	//	 	I.e. identifies a property obj[event].
	//	example:
	//	|	dojo.connectPublisher("/ajax/start", dojo, "xhrGet"};
	var pf = function(){ dojo.publish(topic, arguments);  }
	return (event) ? dojo.connect(obj, event, pf) : dojo.connect(obj, pf);  //Handle
};

}

if(!dojo._hasResource["dojo._base.Deferred"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.Deferred"] = true;
dojo.provide("dojo._base.Deferred");


dojo.Deferred = function(/*Function?*/ canceller){
	// summary:
	//		Encapsulates a sequence of callbacks in response to a value that
	//		may not yet be available.  This is modeled after the Deferred class
	//		from Twisted <http://twistedmatrix.com>.
	// description:
	//		JavaScript has no threads, and even if it did, threads are hard.
	//		Deferreds are a way of abstracting non-blocking events, such as the
	//		final response to an XMLHttpRequest. Deferreds create a promise to
	//		return a response a some point in the future and an easy way to
	//		register your interest in receiving that response.
	//
	//		The most important methods for Deffered users are:
	//
	//			* addCallback(handler)
	//			* addErrback(handler)
	//			* callback(result)
	//			* errback(result)
	//
	//		In general, when a function returns a Deferred, users then "fill
	//		in" the second half of the contract by registering callbacks and
	//		error handlers. You may register as many callback and errback
	//		handlers as you like and they will be executed in the order
	//		registered when a result is provided. Usually this result is
	//		provided as the result of an asynchronous operation. The code
	//		"managing" the Deferred (the code that made the promise to provide
	//		an answer later) will use the callback() and errback() methods to
	//		communicate with registered listeners about the result of the
	//		operation. At this time, all registered result handlers are called
	//		*with the most recent result value*.
	//
	//		Deferred callback handlers are treated as a chain, and each item in
	//		the chain is required to return a value that will be fed into
	//		successive handlers. The most minimal callback may be registered
	//		like this:
	//
	//		|	var d = new dojo.Deferred();
	//		|	d.addCallback(function(result){ return result;  });
	//
	//		Perhaps the most common mistake when first using Deferreds is to
	//		forget to return a value (in most cases, the value you were
	//		passed).
	//
	//		The sequence of callbacks is internally represented as a list of
	//		2-tuples containing the callback/errback pair.  For example, the
	//		following call sequence:
	//		
	//		|	var d = new dojo.Deferred();
	//		|	d.addCallback(myCallback);
	//		|	d.addErrback(myErrback);
	//		|	d.addBoth(myBoth);
	//		|	d.addCallbacks(myCallback, myErrback);
	//
	//		is translated into a Deferred with the following internal
	//		representation:
	//
	//		|	[
	//		|		[myCallback, null],
	//		|		[null, myErrback],
	//		|		[myBoth, myBoth],
	//		|		[myCallback, myErrback]
	//		|	]
	//
	//		The Deferred also keeps track of its current status (fired).  Its
	//		status may be one of three things:
	//
	//			* -1: no value yet (initial condition)
	//			* 0: success
	//			* 1: error
	//	
	//		A Deferred will be in the error state if one of the following three
	//		conditions are met:
	//
	//			1. The result given to callback or errback is "instanceof" Error
	//			2. The previous callback or errback raised an exception while
	//			   executing
	//			3. The previous callback or errback returned a value
	//			   "instanceof" Error
	//
	//		Otherwise, the Deferred will be in the success state. The state of
	//		the Deferred determines the next element in the callback sequence
	//		to run.
	//
	//		When a callback or errback occurs with the example deferred chain,
	//		something equivalent to the following will happen (imagine
	//		that exceptions are caught and returned):
	//
	//		|	// d.callback(result) or d.errback(result)
	//		|	if(!(result instanceof Error)){
	//		|		result = myCallback(result);
	//		|	}
	//		|	if(result instanceof Error){
	//		|		result = myErrback(result);
	//		|	}
	//		|	result = myBoth(result);
	//		|	if(result instanceof Error){
	//		|		result = myErrback(result);
	//		|	}else{
	//		|		result = myCallback(result);
	//		|	}
	//
	//		The result is then stored away in case another step is added to the
	//		callback sequence.	Since the Deferred already has a value
	//		available, any new callbacks added will be called immediately.
	//
	//		There are two other "advanced" details about this implementation
	//		that are useful:
	//
	//		Callbacks are allowed to return Deferred instances themselves, so
	//		you can build complicated sequences of events with ease.
	//
	//		The creator of the Deferred may specify a canceller.  The canceller
	//		is a function that will be called if Deferred.cancel is called
	//		before the Deferred fires. You can use this to implement clean
	//		aborting of an XMLHttpRequest, etc. Note that cancel will fire the
	//		deferred with a CancelledError (unless your canceller returns
	//		another kind of error), so the errbacks should be prepared to
	//		handle that error for cancellable Deferreds.
	// example:
	//	|	var deferred = new dojo.Deferred();
	//	|	setTimeout(function(){ deferred.callback({success: true});  }, 1000);
	//	|	return deferred;
	// example:
	//		Deferred objects are often used when making code asynchronous. It
	//		may be easiest to write functions in a synchronous manner and then
	//		split code using a deferred to trigger a response to a long-lived
	//		operation. For example, instead of register a callback function to
	//		denote when a rendering operation completes, the function can
	//		simply return a deferred:
	//
	//		|	// callback style:
	//		|	function renderLotsOfData(data, callback){
	//		|		var success = false
	//		|		try{
	//		|			for(var x in data){
	//		|				renderDataitem(data[x]);
	//		|			}
	//		|			success = true;
	//		|		}catch(e){ }
	//		|		if(callback){
	//		|			callback(success);
	//		|		}
	//		|	}
	//
	//		|	// using callback style
	//		|	renderLotsOfData(someDataObj, function(success){
	//		|		// handles success or failure
	//		|		if(!success){
	//		|			promptUserToRecover();
	//		|		}
	//		|	});
	//		|	// NOTE: no way to add another callback here!!
	// example:
	//		Using a Deferred doesn't simplify the sending code any, but it
	//		provides a standard interface for callers and senders alike,
	//		providing both with a simple way to service multiple callbacks for
	//		an operation and freeing both sides from worrying about details
	//		such as "did this get called already?". With Deferreds, new
	//		callbacks can be added at any time.
	//
	//		|	// Deferred style:
	//		|	function renderLotsOfData(data){
	//		|		var d = new dojo.Deferred();
	//		|		try{
	//		|			for(var x in data){
	//		|				renderDataitem(data[x]);
	//		|			}
	//		|			d.callback(true);
	//		|		}catch(e){ 
	//		|			d.errback(new Error("rendering failed"));
	//		|		}
	//		|		return d;
	//		|	}
	//
	//		|	// using Deferred style
	//		|	renderLotsOfData(someDataObj).addErrback(function(){
	//		|		promptUserToRecover();
	//		|	});
	//		|	// NOTE: addErrback and addCallback both return the Deferred
	//		|	// again, so we could chain adding callbacks or save the
	//		|	// deferred for later should we need to be notified again.
	// example:
	//		In this example, renderLotsOfData is syncrhonous and so both
	//		versions are pretty artificial. Putting the data display on a
	//		timeout helps show why Deferreds rock:
	//
	//		|	// Deferred style and async func
	//		|	function renderLotsOfData(data){
	//		|		var d = new dojo.Deferred();
	//		|		setTimeout(function(){
	//		|			try{
	//		|				for(var x in data){
	//		|					renderDataitem(data[x]);
	//		|				}
	//		|				d.callback(true);
	//		|			}catch(e){ 
	//		|				d.errback(new Error("rendering failed"));
	//		|			}
	//		|		}, 100);
	//		|		return d;
	//		|	}
	//
	//		|	// using Deferred style
	//		|	renderLotsOfData(someDataObj).addErrback(function(){
	//		|		promptUserToRecover();
	//		|	});
	//
	//		Note that the caller doesn't have to change his code at all to
	//		handle the asynchronous case.

	this.chain = [];
	this.id = this._nextId();
	this.fired = -1;
	this.paused = 0;
	this.results = [null, null];
	this.canceller = canceller;
	this.silentlyCancelled = false;
};

dojo.extend(dojo.Deferred, {
	/*
	makeCalled: function(){
		// summary:
		//		returns a new, empty deferred, which is already in the called
		//		state. Calling callback() or errback() on this deferred will
		//		yeild an error and adding new handlers to it will result in
		//		them being called immediately.
		var deferred = new dojo.Deferred();
		deferred.callback();
		return deferred;
	},

	toString: function(){
		var state;
		if(this.fired == -1){
			state = 'unfired';
		}else{
			state = this.fired ? 'success' : 'error';
		}
		return 'Deferred(' + this.id + ', ' + state + ')';
	},
	*/

	_nextId: (function(){
		var n = 1;
		return function(){ return n++;  };
	})(),

	cancel: function(){
		// summary:	
		//		Cancels a Deferred that has not yet received a value, or is
		//		waiting on another Deferred as its value.
		// description:
		//		If a canceller is defined, the canceller is called. If the
		//		canceller did not return an error, or there was no canceller,
		//		then the errback chain is started.
		var err;
		if(this.fired == -1){
			if(this.canceller){
				err = this.canceller(this);
			}else{
				this.silentlyCancelled = true;
			}
			if(this.fired == -1){
				if(!(err instanceof Error)){
					var res = err;
					err = new Error("Deferred Cancelled");
					err.dojoType = "cancel";
					err.cancelResult = res;
				}
				this.errback(err);
			}
		}else if(	(this.fired == 0) &&
					(this.results[0] instanceof dojo.Deferred)
		){
			this.results[0].cancel();
		}
	},
			

	_resback: function(res){
		// summary:
		//		The private primitive that means either callback or errback
		this.fired = ((res instanceof Error) ? 1 : 0);
		this.results[this.fired] = res;
		this._fire();
	},

	_check: function(){
		if(this.fired != -1){
			if(!this.silentlyCancelled){
				throw new Error("already called!");
			}
			this.silentlyCancelled = false;
			return;
		}
	},

	callback: function(res){
		// summary:	Begin the callback sequence with a non-error value.
		
		/*
		callback or errback should only be called once on a given
		Deferred.
		*/
		this._check();
		this._resback(res);
	},

	errback: function(/*Error*/res){
		// summary: 
		//		Begin the callback sequence with an error result.
		this._check();
		if(!(res instanceof Error)){
			res = new Error(res);
		}
		this._resback(res);
	},

	addBoth: function(/*Function||Object*/cb, /*Optional, String*/cbfn){
		// summary:
		//		Add the same function as both a callback and an errback as the
		//		next element on the callback sequence.	This is useful for code
		//		that you want to guarantee to run, e.g. a finalizer.
		var enclosed = dojo.hitch(cb, cbfn);
		if(arguments.length > 2){
			enclosed = dojo.partial(enclosed, arguments, 2);
		}
		return this.addCallbacks(enclosed, enclosed);
	},

	addCallback: function(cb, cbfn){
		// summary: 
		//		Add a single callback to the end of the callback sequence.
		var enclosed = dojo.hitch(cb, cbfn);
		if(arguments.length > 2){
			enclosed = dojo.partial(enclosed, arguments, 2);
		}
		return this.addCallbacks(enclosed, null);
	},

	addErrback: function(cb, cbfn){
		// summary: 
		//		Add a single callback to the end of the callback sequence.
		var enclosed = dojo.hitch(cb, cbfn);
		if(arguments.length > 2){
			enclosed = dojo.partial(enclosed, arguments, 2);
		}
		return this.addCallbacks(null, enclosed);
	},

	addCallbacks: function(cb, eb){
		// summary: 
		//		Add separate callback and errback to the end of the callback
		//		sequence.
		this.chain.push([cb, eb])
		if(this.fired >= 0){
			this._fire();
		}
		return this;
	},

	_fire: function(){
		// summary: 
		//		Used internally to exhaust the callback sequence when a result
		//		is available.
		var chain = this.chain;
		var fired = this.fired;
		var res = this.results[fired];
		var self = this;
		var cb = null;
		while(
			(chain.length > 0) &&
			(this.paused == 0)
		){
			// Array
			var f = chain.shift()[fired];
			if(!f){ continue;  }
			try{
				res = f(res);
				fired = ((res instanceof Error) ? 1 : 0);
				if(res instanceof dojo.Deferred){
					cb = function(res){
						self._resback(res);
						// inlined from _pause()
						self.paused--;
						if(
							(self.paused == 0) && 
							(self.fired >= 0)
						){
							self._fire();
						}
					}
					// inlined from _unpause
					this.paused++;
				}
			}catch(err){
				console.debug(err);
				fired = 1;
				res = err;
			}
		}
		this.fired = fired;
		this.results[fired] = res;
		if((cb)&&(this.paused)){
			// this is for "tail recursion" in case the dependent
			// deferred is already fired
			res.addBoth(cb);
		}
	}
});

}

if(!dojo._hasResource["dojo._base.json"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.json"] = true;
dojo.provide("dojo._base.json");

dojo.fromJson = function(/*String*/ json){
	// summary:
	// 		evaluates the passed string-form of a JSON object
	// json: 
	//		a string literal of a JSON item, for instance:
	//			'{ "foo": [ "bar", 1, { "baz": "thud" } ] }'
	// return:
	//		An object, the result of the evaluation

	// FIXME: should this accept mozilla's optional second arg?
	try {
		return eval("(" + json + ")");
	}catch(e){
		console.debug(e);
		return json;
	}
}

dojo._escapeString = function(/*String*/str){
	//summary:
	//		Adds escape sequences for non-visual characters, double quote and
	//		backslash and surrounds with double quotes to form a valid string
	//		literal.
	return ('"' + str.replace(/(["\\])/g, '\\$1') + '"'
		).replace(/[\f]/g, "\\f"
		).replace(/[\b]/g, "\\b"
		).replace(/[\n]/g, "\\n"
		).replace(/[\t]/g, "\\t"
		).replace(/[\r]/g, "\\r");  // string
}

dojo.toJsonIndentStr = "\t";
dojo.toJson = function(/*Object*/ it, /*Boolean?*/ prettyPrint, /*String?*/ _indentStr){
	// summary:
	//		Create a JSON serialization of an object. 
	//		Note that this doesn't check for infinite recursion, so don't do that!
	//
	// it:
	//		an object to be serialized. Objects may define their own
	//		serialization via a special "__json__" or "json" function
	//		property. If a specialized serializer has been defined, it will
	//		be used as a fallback.
	//
	// prettyPrint:
	//		if true, we indent objects and arrays to make the output prettier.
	//		The variable dojo.toJsonIndentStr is used as the indent string 
	//		-- to use something other than the default (tab), 
	//		change that variable before calling dojo.toJson().
	//
	// _indentStr:
	//		private variable for recursive calls when pretty printing, do not use.
	//		
	// return:
	//		a String representing the serialized version of the passed object.

	_indentStr = _indentStr || "";
	var nextIndent = (prettyPrint ? _indentStr + dojo.toJsonIndentStr : "");
	var newLine = (prettyPrint ? "\n" : "");
	var objtype = typeof(it);
	if(objtype == "undefined"){
		return "undefined";
	}else if((objtype == "number")||(objtype == "boolean")){
		return it + "";
	}else if(it === null){
		return "null";
	}
	if(dojo.isString(it)){ 
		return dojo._escapeString(it);  
	}
	if(it.nodeType && it.cloneNode){ // isNode
		return "";  // FIXME: would something like outerHTML be better here?
	}
	// recurse
	var recurse = arguments.callee;
	// short-circuit for objects that support "json" serialization
	// if they return "self" then just pass-through...
	var newObj;
	if(typeof it.__json__ == "function"){
		newObj = it.__json__();
		if(it !== newObj){
			return recurse(newObj, prettyPrint, nextIndent);
		}
	}
	if(typeof it.json == "function"){
		newObj = it.json();
		if(it !== newObj){
			return recurse(newObj, prettyPrint, nextIndent);
		}
	}
	// array
	if(dojo.isArray(it)){
		var res = [];
		for(var i = 0;  i < it.length;  i++){
			var val = recurse(it[i], prettyPrint, nextIndent);
			if(typeof(val) != "string"){
				val = "undefined";
			}
			res.push(newLine + nextIndent + val);
		}
		return "[" + res.join(", ") + newLine + _indentStr + "]";
	}
	/*
	// look in the registry
	try {
		window.o = it;
		newObj = dojo.json.jsonRegistry.match(it);
		return recurse(newObj, prettyPrint, nextIndent);
	}catch(e){
		// console.debug(e);
	}
	// it's a function with no adapter, skip it
	*/
	if(objtype == "function"){
		return null;
	}
	// generic object code path
	var output = [];
	for(var key in it){
		var keyStr;
		if(typeof(key) == "number"){
			keyStr = '"' + key + '"';
		}else if(typeof(key) == "string"){
			keyStr = dojo._escapeString(key);
		}else{
			// skip non-string or number keys
			continue;
		}
		val = recurse(it[key], prettyPrint, nextIndent);
		if(typeof(val) != "string"){
			// skip non-serializable values
			continue;
		}
		// FIXME: use += on Moz!!
		//	 MOW NOTE: using += is a pain because you have to account for the dangling comma...
		output.push(newLine + nextIndent + keyStr + ": " + val);
	}
	return "{" + output.join(", ") + newLine + _indentStr + "}";
}

}

if(!dojo._hasResource["dojo._base.array"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.array"] = true;

dojo.provide("dojo._base.array");

(function(){
	var _getParts = function(arr, obj, cb){
		return [ 
			(dojo.isString(arr) ? arr.split("") : arr), 
			(obj||dojo.global),
			// FIXME: cache the anonymous functions we create here?
			(dojo.isString(cb) ? (new Function("item", "index", "array", cb)) : cb)
		];
	}

	dojo.mixin(dojo, {
		indexOf: function(	/*Array*/		array, 
							/*Object*/		value,
							/*Integer?*/	fromIndex,
							/*Boolean?*/	findLast){
			// summary:
			//		locates the first index of the provided value in the
			//		passed array. If the value is not found, -1 is returned.
			// description:
			//		For details on this method, see:
			// 			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:indexOf

			var i = 0, step = 1, end = array.length;
			if(findLast){
				i = end - 1;
				step = end = -1;
			}
			for(i = fromIndex || i;  i != end;  i += step){
				if(array[i] == value){ return i;  }
			}
			return -1;	 // Number
		},

		lastIndexOf: function(/*Array*/array, /*Object*/value, /*Integer?*/fromIndex){
			// summary:
			//		locates the last index of the provided value in the passed array. 
			//		If the value is not found, -1 is returned.
			// description:
			//		For details on this method, see:
			// 			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:lastIndexOf
			return dojo.indexOf(array, value, fromIndex, true);  // Number
		},

		forEach: function(/*Array*/arr, /*Function*/callback, /*Object?*/obj){
			// summary:
			//		for every item in arr, call callback with that item as its
			//		only parameter.
			// description:
			//		Return values are ignored. This function
			//		corresponds (and wraps) the JavaScript 1.6 forEach method. For
			//		more details, see:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:forEach

			// match the behavior of the built-in forEach WRT empty arrs
			if(!arr || !arr.length){ return;  }

			// FIXME: there are several ways of handilng thisObject. Is
			// dojo.global always the default context?
			var _p = _getParts(arr, obj, callback);  arr = _p[0];
			for(var i=0,l=_p[0].length;  i<l;  i++){ 
				_p[2].call(_p[1], arr[i], i, arr);
			}
		},

		_everyOrSome: function(/*Boolean*/every, /*Array*/arr, /*Function*/callback, /*Object?*/obj){
			var _p = _getParts(arr, obj, callback);  arr = _p[0];
			for(var i = 0, l = arr.length;  i < l;  i++){
				var result = !!_p[2].call(_p[1], arr[i], i, arr);
				if(every ^ result){
					return result;  // Boolean
				}
			}
			return every;  // Boolean
		},

		every: function(/*Array*/arr, /*Function*/callback, /*Object?*/thisObject){
			// summary:
			//		Determines whether or not every item in the array satisfies the
			//		condition implemented by callback.
			// description:
			//		The parameter thisObject may be used to
			//		scope the call to callback. The function signature is derived
			//		from the JavaScript 1.6 Array.every() function. More
			//		information on this can be found here:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:every
			// example:
			//	|	dojo.every([1, 2, 3, 4], function(item){ return item>1;  });
			//		returns false
			// example:
			//	|	dojo.every([1, 2, 3, 4], function(item){ return item>0;  });
			//		returns true 
			return this._everyOrSome(true, arr, callback, thisObject);  // Boolean
		},

		some: function(/*Array*/arr, /*Function*/callback, /*Object?*/thisObject){
			// summary:
			//		Determines whether or not any item in the array satisfies the
			//		condition implemented by callback.
			// description:
			//		The parameter thisObject may be used to
			//		scope the call to callback. The function signature is derived
			//		from the JavaScript 1.6 Array.some() function. More
			//		information on this can be found here:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:some
			// example:
			//	|	dojo.some([1, 2, 3, 4], function(item){ return item>1;  });
			//		returns true
			// example:
			//	|	dojo.some([1, 2, 3, 4], function(item){ return item<1;  });
			//		returns false
			return this._everyOrSome(false, arr, callback, thisObject);  // Boolean
		},

		map: function(/*Array*/arr, /*Function*/func, /*Function?*/obj){
			// summary:
			//		applies a function to each element of an Array and creates
			//		an Array with the results
			// description:
			//		Returns a new array constituted from the return values of
			//		passing each element of arr into unary_func. The obj parameter
			//		may be passed to enable the passed function to be called in
			//		that scope.  In environments that support JavaScript 1.6, this
			//		function is a passthrough to the built-in map() function
			//		provided by Array instances. For details on this, see:
			// 			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:map
			// example:
			//	|	dojo.map([1, 2, 3, 4], function(item){ return item+1 });
			//		returns [2, 3, 4, 5]
			var _p = _getParts(arr, obj, func);  arr = _p[0];
			var outArr = ((arguments[3]) ? (new arguments[3]()) : []);
			for(var i=0;i<arr.length;++i){
				outArr.push(_p[2].call(_p[1], arr[i], i, arr));
			}
			return outArr;  // Array
		},

		filter: function(/*Array*/arr, /*Function*/callback, /*Object?*/obj){
			// summary:
			//		Returns a new Array with those items from arr that match the
			//		condition implemented by callback. ob may be used to
			//		scope the call to callback. The function signature is derived
			//		from the JavaScript 1.6 Array.filter() function.
			//
			//		More information on the JS 1.6 API can be found here:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:filter
			// example:
			//	|	dojo.filter([1, 2, 3, 4], function(item){ return item>1;  });
			//		returns [2, 3, 4]

			var _p = _getParts(arr, obj, callback);  arr = _p[0];
			var outArr = [];
			for(var i = 0;  i < arr.length;  i++){
				if(_p[2].call(_p[1], arr[i], i, arr)){
					outArr.push(arr[i]);
				}
			}
			return outArr;  // Array
		}
	});
})();

}

if(!dojo._hasResource["dojo._base.Color"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.Color"] = true;
dojo.provide("dojo._base.Color");



dojo.Color = function(/*Array|String|Object*/ color){
	// summary:
	//		takes a named string, hex string, array of rgb or rgba values,
	//		an object with r, g, b, and a properties, or another dojo.Color object
	if(color){ this.setColor(color);  }
};

// FIXME: there's got to be a more space-efficient way to encode or discover these!!  Use hex?
dojo.Color.named = {
	black:      [0,0,0],
	silver:     [192,192,192],
	gray:       [128,128,128],
	white:      [255,255,255],
	maroon:		[128,0,0],
	red:        [255,0,0],
	purple:		[128,0,128],
	fuchsia:	[255,0,255],
	green:	    [0,128,0],
	lime:	    [0,255,0],
	olive:		[128,128,0],
	yellow:		[255,255,0],
	navy:       [0,0,128],
	blue:       [0,0,255],
	teal:		[0,128,128],
	aqua:		[0,255,255]
};


dojo.extend(dojo.Color, {
	r: 255, g: 255, b: 255, a: 1,
	_set: function(r, g, b, a){
		var t = this;  t.r = r;  t.g = g;  t.b = b;  t.a = a;
	},
	setColor: function(/*Array|String|Object*/ color){
		// summary:
		//		takes a named string, hex string, array of rgb or rgba values,
		//		an object with r, g, b, and a properties, or another dojo.Color object
		var d = dojo;
		if(d.isString(color)){
			d.colorFromString(color, this);
		}else if(d.isArray(color)){
			d.colorFromArray(color, this);
		}else{
			this._set(color.r, color.g, color.b, color.a);
			if(!(color instanceof d.Color)){ this.sanitize();  }
		}
		return this;	 // dojo.Color
	},
	sanitize: function(){
		// summary:
		//		makes sure that the object has correct attributes
		// description: 
		//		the default implementation does nothing, include dojo.colors to
		//		augment it to real checks
		return this;	 // dojo.Color
	},
	toRgb: function(){
		// summary: returns 3 component array of rgb values
		var t = this;
		return [t.r, t.g, t.b];	 // Array
	},
	toRgba: function(){
		// summary: returns a 4 component array of rgba values
		var t = this;
		return [t.r, t.g, t.b, t.a];	 // Array
	},
	toHex: function(){
		// summary: returns a css color string in hexadecimal representation
		var arr = dojo.map(["r", "g", "b"], function(x){
			var s = this[x].toString(16);
			return s.length < 2 ? "0" + s : s;
		}, this);
		return "#" + arr.join("");	 // String
	},
	toCss: function(/*Boolean?*/ includeAlpha){
		// summary: returns a css color string in rgb(a) representation
		var t = this, rgb = t.r + ", " + t.g + ", " + t.b;
		return (includeAlpha ? "rgba(" + rgb + ", " + t.a : "rgb(" + rgb) + ")";	 // String
	},
	toString: function(){
		// summary: returns a visual representation of the color
		return this.toCss(true);  // String
	}
});

dojo.blendColors = function(
	/*dojo.Color*/ start, 
	/*dojo.Color*/ end, 
	/*Number*/ weight,
	/*dojo.Color?*/ obj
){
	// summary: 
	//		blend colors end and start with weight from 0 to 1, 0.5 being a 50/50 blend,
	//		can reuse a previously allocated dojo.Color object for the result
	var d = dojo, t = obj || new dojo.Color();
	d.forEach(["r", "g", "b", "a"], function(x){
		t[x] = start[x] + (end[x] - start[x]) * weight;
		if(x != "a"){ t[x] = Math.round(t[x]);  }
	});
	return t.sanitize();	 // dojo.Color
};

dojo.colorFromRgb = function(/*String*/ color, /*dojo.Color?*/ obj){
	// summary: get rgb(a) array from css-style color declarations
	var m = color.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);
	return m && dojo.colorFromArray(m[1].split(/\s*,\s*/), obj);	 // dojo.Color
};

dojo.colorFromHex = function(/*String*/ color, /*dojo.Color?*/ obj){
	// summary: converts a hex string with a '#' prefix to a color object.
	//	Supports 12-bit #rgb shorthand.
	var d = dojo, t = obj || new d.Color(),
		bits = (color.length == 4) ? 4 : 8,
		mask = (1 << bits) - 1;
	color = Number("0x" + color.substr(1));
	if(isNaN(color)){
		return null;  // dojo.Color
	}
	d.forEach(["b", "g", "r"], function(x){
		var c = color & mask;
		color >>= bits;
		t[x] = bits == 4 ? 17 * c : c;
	});
	t.a = 1;
	return t;	 // dojo.Color
};

dojo.colorFromArray = function(/*Array*/ a, /*dojo.Color?*/ obj){
	// summary: builds a color from 1, 2, 3, or 4 element array
	var t = obj || new dojo.Color();
	t._set(Number(a[0]), Number(a[1]), Number(a[2]), Number(a[3]));
	if(isNaN(t.a)){ t.a = 1;  }
	return t.sanitize();	 // dojo.Color
};

dojo.colorFromString = function(/*String*/ str, /*dojo.Color?*/ obj){
	//	summary:
	//		parses str for a color value.
	//	description:
	//		Acceptable input values for str may include arrays of any form
	//		accepted by dojo.colorFromArray, hex strings such as "#aaaaaa", or
	//		rgb or rgba strings such as "rgb(133, 200, 16)" or "rgba(10, 10,
	//		10, 50)"
	//	returns:
	//		a dojo.Color object. If obj is passed, it will be the return value.
	var a = dojo.Color.named[str];
	return a && dojo.colorFromArray(a, obj) || dojo.colorFromRgb(str, obj) || dojo.colorFromHex(str, obj);
};

}

if(!dojo._hasResource["dojo._base"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base"] = true;
dojo.provide("dojo._base");















(function(){
	if(djConfig.require){
		for(var x=0;  x<djConfig.require.length;  x++){
			dojo["require"](djConfig.require[x]);
		}
	}
})();

}

if(!dojo._hasResource["dojo._base.window"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.window"] = true;
dojo.provide("dojo._base.window");

dojo._gearsObject = function(){
	// summary: 
	//		factory method to get a Google Gears plugin instance to
	//		expose in the browser runtime environment, if present
	var factory;
	var results;
	
	var gearsObj = dojo.getObject("google.gears");
	if(gearsObj){ return gearsObj;  } // already defined elsewhere
	
	if(typeof GearsFactory != "undefined"){ // Firefox
		factory = new GearsFactory();
	}else{
		if(dojo.isIE){
			// IE
			try{
				factory = new ActiveXObject("Gears.Factory");
			}catch(e){
				// ok to squelch;  there's no gears factory.  move on.
			}
		}else if(navigator.mimeTypes["application/x-googlegears"]){
			// Safari?
			factory = document.createElement("object");
			factory.setAttribute("type", "application/x-googlegears");
			factory.setAttribute("width", 0);
			factory.setAttribute("height", 0);
			factory.style.display = "none";
			document.documentElement.appendChild(factory);
		}
	}

	// still nothing?
	if(!factory){ return null;  }
	
	// define the global objects now;  don't overwrite them though if they
	// were somehow set internally by the Gears plugin, which is on their
	// dev roadmap for the future
	dojo.setObject("google.gears.factory", factory);
	return dojo.getObject("google.gears");
};

// see if we have Google Gears installed, and if
// so, make it available in the runtime environment
// and in the Google standard 'google.gears' global object
dojo.isGears = (!!dojo._gearsObject())||0;

// @global: dojo.doc

// summary:
//		Current document object. 'dojo.doc' can be modified
//		for temporary context shifting. Also see dojo.withDoc().
// description:
//    Refer to dojo.doc rather
//    than referring to 'window.document' to ensure your code runs
//    correctly in managed contexts.
dojo.doc = window["document"] || null;

dojo.body = function(){
	// summary:
	//		return the body object associated with dojo.doc

	// Note: document.body is not defined for a strict xhtml document
	// Would like to memoize this, but dojo.doc can change vi dojo.withDoc().
	return dojo.doc.body || dojo.doc.getElementsByTagName("body")[0];
}

dojo.setContext = function(/*Object*/globalObject, /*DocumentElement*/globalDocument){
	// summary:
	//		changes the behavior of many core Dojo functions that deal with
	//		namespace and DOM lookup, changing them to work in a new global
	//		context. The varibles dojo.global and dojo.doc
	//		are modified as a result of calling this function.
	dojo.global = globalObject;
	dojo.doc = globalDocument;
};

dojo._fireCallback = function(callback, context, cbArguments){
	// FIXME: should migrate to using "dojo.isString"!
	if(context && dojo.isString(callback)){
		callback = context[callback];
	}
	return (context ? callback.apply(context, cbArguments || [ ]) : callback());
}

dojo.withGlobal = function(	/*Object*/globalObject, 
							/*Function*/callback, 
							/*Object?*/thisObject, 
							/*Array?*/cbArguments){
	// summary:
	//		Call callback with globalObject as dojo.global and
	//		globalObject.document as dojo.doc. If provided, globalObject
	//		will be executed in the context of object thisObject
	// description:
	//		When callback() returns or throws an error, the dojo.global
	//		and dojo.doc will be restored to its previous state.
	var rval;
	var oldGlob = dojo.global;
	var oldDoc = dojo.doc;
	try{
		dojo.setContext(globalObject, globalObject.document);
		rval = dojo._fireCallback(callback, thisObject, cbArguments);
	}finally{
		dojo.setContext(oldGlob, oldDoc);
	}
	return rval;
}

dojo.withDoc = function(	/*Object*/documentObject, 
							/*Function*/callback, 
							/*Object?*/thisObject, 
							/*Array?*/cbArguments){
	// summary:
	//		Call callback with documentObject as dojo.doc. If provided,
	//		callback will be executed in the context of object thisObject
	// description:
	//		When callback() returns or throws an error, the dojo.doc will
	//		be restored to its previous state.
	var rval;
	var oldDoc = dojo.doc;
	try{
		dojo.doc = documentObject;
		rval = dojo._fireCallback(callback, thisObject, cbArguments);
	}finally{
		dojo.doc = oldDoc;
	}
	return rval;
};

//Register any module paths set up in djConfig. Need to do this
//in the hostenvs since hostenv_browser can read djConfig from a
//script tag's attribute.
(function(){
	var mp = djConfig["modulePaths"];
	if(mp){
		for(var param in mp){
			dojo.registerModulePath(param, mp[param]);
		}
	}
})();

}

if(!dojo._hasResource["dojo._base.event"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.event"] = true;
dojo.provide("dojo._base.event");


// this file courtesy of the TurboAjax Group, licensed under a Dojo CLA

(function(){
	// DOM event listener machinery
	var del = dojo._event_listener = {
		add: function(/*DOMNode*/node, /*String*/name, /*Function*/fp){
			if(!node){return;} 
			name = del._normalizeEventName(name);

			fp = del._fixCallback(name, fp);

			var oname = name;
			if((!dojo.isIE)&&((name == "mouseenter")||(name == "mouseleave"))){
				var oname = name;
				var ofp = fp;
				name = (name == "mouseenter") ? "mouseover" : "mouseout";
				fp = function(e){
					// thanks ben!
					var id = dojo.isDescendant(e.relatedTarget, node);
					if(id == false){
						// e.type = oname;  // FIXME: doesn't take?
						return ofp.call(this, e);
					}
				}
			}

			node.addEventListener(name, fp, false);
			return fp;  /*Handle*/
		},
		remove: function(/*DOMNode*/node, /*String*/event, /*Handle*/handle){
			// summary:
			//		clobbers the listener from the node
			// node:
			//		DOM node to attach the event to
			// event:
			//		the name of the handler to remove the function from
			// handle:
			//		the handle returned from add
			(node)&&(node.removeEventListener(del._normalizeEventName(event), handle, false));
		},
		_normalizeEventName: function(/*String*/name){
			// Generally, name should be lower case, unless it is special
			// somehow (e.g. a Mozilla DOM event).
			// Remove 'on'.
			return (name.slice(0,2)=="on" ? name.slice(2) : name);
		},
		_fixCallback: function(/*String*/name, fp){
			// By default, we only invoke _fixEvent for 'keypress'
			// If code is added to _fixEvent for other events, we have
			// to revisit this optimization.
			// This also applies to _fixEvent overrides for Safari and Opera
			// below.
			return (name!="keypress" ? fp : function(e){ return fp.call(this, del._fixEvent(e, this));  });	 
		},
		_fixEvent: function(evt, sender){
			// _fixCallback only attaches us to keypress.
			// Switch on evt.type anyway because we might 
			// be called directly from dojo.fixEvent.
			switch(evt.type){
				case "keypress":
					del._setKeyChar(evt);
					break;
			}
			return evt;
		},
		_setKeyChar: function(evt){
			evt.keyChar = (evt.charCode ? String.fromCharCode(evt.charCode) : '');
		}
	};

	// DOM events
	
	dojo.fixEvent = function(/*Event*/evt, /*DOMNode*/sender){
		// summary:
		//		normalizes properties on the event object including event
		//		bubbling methods, keystroke normalization, and x/y positions
		// evt: Event
		//		native event object
		// sender: DOMNode
		//		node to treat as "currentTarget"
		return del._fixEvent(evt, sender);
	}

	dojo.stopEvent = function(/*Event*/evt){
		// summary:
		//		prevents propagation and clobbers the default action of the
		//		passed event
		// evt: Event
		//		The event object. If omitted, window.event is used on IE.
		evt.preventDefault();
		evt.stopPropagation();
		// NOTE: below, this method is overridden for IE
	}

	// the default listener to use on dontFix nodes, overriden for IE
	var node_listener = dojo._listener;
	
	// Unify connect and event listeners
	dojo._connect = function(obj, event, context, method, dontFix){
		// FIXME: need a more strict test
		var isNode = obj && (obj.nodeType||obj.attachEvent||obj.addEventListener);
		// choose one of three listener options: raw (connect.js), DOM event on a Node, custom event on a Node
		// we need the third option to provide leak prevention on broken browsers (IE)
		var lid = !isNode ? 0 : (!dontFix ? 1 : 2), l = [dojo._listener, del, node_listener][lid];
		// create a listener
		var h = l.add(obj, event, dojo.hitch(context, method));
		// formerly, the disconnect package contained "l" directly, but if client code
		// leaks the disconnect package (by connecting it to a node), referencing "l" 
		// compounds the problem.
		// instead we return a listener id, which requires custom _disconnect below.
		// return disconnect package
		return [ obj, event, h, lid ];
	}

	dojo._disconnect = function(obj, event, handle, listener){
		([dojo._listener, del, node_listener][listener]).remove(obj, event, handle);
	}

	// Constants

	// Public: client code should test
	// keyCode against these named constants, as the
	// actual codes can vary by browser.
	dojo.keys = {
		BACKSPACE: 8,
		TAB: 9,
		CLEAR: 12,
		ENTER: 13,
		SHIFT: 16,
		CTRL: 17,
		ALT: 18,
		PAUSE: 19,
		CAPS_LOCK: 20,
		ESCAPE: 27,
		SPACE: 32,
		PAGE_UP: 33,
		PAGE_DOWN: 34,
		END: 35,
		HOME: 36,
		LEFT_ARROW: 37,
		UP_ARROW: 38,
		RIGHT_ARROW: 39,
		DOWN_ARROW: 40,
		INSERT: 45,
		DELETE: 46,
		HELP: 47,
		LEFT_WINDOW: 91,
		RIGHT_WINDOW: 92,
		SELECT: 93,
		NUMPAD_0: 96,
		NUMPAD_1: 97,
		NUMPAD_2: 98,
		NUMPAD_3: 99,
		NUMPAD_4: 100,
		NUMPAD_5: 101,
		NUMPAD_6: 102,
		NUMPAD_7: 103,
		NUMPAD_8: 104,
		NUMPAD_9: 105,
		NUMPAD_MULTIPLY: 106,
		NUMPAD_PLUS: 107,
		NUMPAD_ENTER: 108,
		NUMPAD_MINUS: 109,
		NUMPAD_PERIOD: 110,
		NUMPAD_DIVIDE: 111,
		F1: 112,
		F2: 113,
		F3: 114,
		F4: 115,
		F5: 116,
		F6: 117,
		F7: 118,
		F8: 119,
		F9: 120,
		F10: 121,
		F11: 122,
		F12: 123,
		F13: 124,
		F14: 125,
		F15: 126,
		NUM_LOCK: 144,
		SCROLL_LOCK: 145
	};
	
	// IE event normalization
	if(dojo.isIE){ 
		var _trySetKeyCode = function(e, code){
			try{
				// squelch errors when keyCode is read-only
				// (e.g. if keyCode is ctrl or shift)
				return (e.keyCode = code);
			}catch(e){
				return 0;
			}
		}

		// by default, use the standard listener
		var iel = dojo._listener;
		// dispatcher tracking property
		if(!djConfig._allow_leaks){
			// custom listener that handles leak protection for DOM events
			node_listener = iel = dojo._ie_listener = {
				// support handler indirection: event handler functions are 
				// referenced here. Event dispatchers hold only indices.
				handlers: [],
				// add a listener to an object
				add: function(/*Object*/ source, /*String*/ method, /*Function*/ listener){
					source = source || dojo.global;
					var f = source[method];
					if(!f||!f._listeners){
						var d = dojo._getIeDispatcher();
						// original target function is special
						d.target = f && (ieh.push(f) - 1);
						// dispatcher holds a list of indices into handlers table
						d._listeners = [];
						// redirect source to dispatcher
						f = source[method] = d;
					}
					return f._listeners.push(ieh.push(listener) - 1) ;  /*Handle*/
				},
				// remove a listener from an object
				remove: function(/*Object*/ source, /*String*/ method, /*Handle*/ handle){
					var f = (source||dojo.global)[method], l = f&&f._listeners;
					if(f && l && handle--){
						delete ieh[l[handle]];
						delete l[handle];  
					}
				}
			};
			// alias used above
			var ieh = iel.handlers;
		}

		dojo.mixin(del, {
			add: function(/*DOMNode*/node, /*String*/event, /*Function*/fp){
				if(!node){return;} // undefined
				event = del._normalizeEventName(event);
				if(event=="onkeypress"){
					// we need to listen to onkeydown to synthesize 
					// keypress events that otherwise won't fire
					// on IE
					var kd = node.onkeydown;
					if(!kd||!kd._listeners||!kd._stealthKeydown){
						// we simply ignore this connection when disconnecting
						// because it's side-effects are harmless 
						del.add(node, "onkeydown", del._stealthKeyDown);
						// we only want one stealth listener per node
						node.onkeydown._stealthKeydown = true;
					} 
				}
				return iel.add(node, event, del._fixCallback(fp));
			},
			remove: function(/*DOMNode*/node, /*String*/event, /*Handle*/handle){
				iel.remove(node, del._normalizeEventName(event), handle);  
			},
			_normalizeEventName: function(/*String*/eventName){
				// Generally, eventName should be lower case, unless it is
				// special somehow (e.g. a Mozilla event)
				// ensure 'on'
				return (eventName.slice(0,2)!="on" ? "on"+eventName : eventName);
			},
			_nop: function(){},
			_fixEvent: function(/*Event*/evt, /*DOMNode*/sender){
				// summary:
				//		normalizes properties on the event object including event
				//		bubbling methods, keystroke normalization, and x/y positions
				// evt: native event object
				// sender: node to treat as "currentTarget"
				if(!evt){
					var w = (sender)&&((sender.ownerDocument || sender.document || sender).parentWindow)||window;
					evt = w.event;  
				}
				if(!evt){return(evt);}
				evt.target = evt.srcElement;  
				evt.currentTarget = (sender || evt.srcElement);  
				evt.layerX = evt.offsetX;
				evt.layerY = evt.offsetY;
				// FIXME: scroll position query is duped from dojo.html to
				// avoid dependency on that entire module. Now that HTML is in
				// Base, we should convert back to something similar there.
				var se = evt.srcElement, doc = (se && se.ownerDocument) || document;
				// DO NOT replace the following to use dojo.body(), in IE, document.documentElement should be used
				// here rather than document.body
				var docBody = ((dojo.isIE<6)||(doc["compatMode"]=="BackCompat")) ? doc.body : doc.documentElement;
				var offset = dojo._getIeDocumentElementOffset();
				evt.pageX = evt.clientX + dojo._fixIeBiDiScrollLeft(docBody.scrollLeft || 0) - offset.x;
				evt.pageY = evt.clientY + (docBody.scrollTop || 0) - offset.y;
				if(evt.type == "mouseover"){ 
					evt.relatedTarget = evt.fromElement;
				}
				if(evt.type == "mouseout"){ 
					evt.relatedTarget = evt.toElement;
				}
				evt.stopPropagation = del._stopPropagation;
				evt.preventDefault = del._preventDefault;
				return del._fixKeys(evt);
			},
			_fixKeys: function(evt){
				switch(evt.type){
					case "keypress":
						var c = ("charCode" in evt ? evt.charCode : evt.keyCode);
						if (c==10){
							// CTRL-ENTER is CTRL-ASCII(10) on IE, but CTRL-ENTER on Mozilla
							c=0;
							evt.keyCode = 13;
						}else if(c==13||c==27){
							c=0;  // Mozilla considers ENTER and ESC non-printable
						}else if(c==3){
							c=99;  // Mozilla maps CTRL-BREAK to CTRL-c
						}
						// Mozilla sets keyCode to 0 when there is a charCode
						// but that stops the event on IE.
						evt.charCode = c;
						del._setKeyChar(evt);
						break;
				}
				return evt;
			},
			// some ctrl-key combinations (mostly w/punctuation) do not emit a char code in IE
			// we map those virtual key codes to ascii here
			// not valid for all (non-US) keyboards, so maybe we shouldn't bother
			_punctMap: { 
				106:42, 
				111:47, 
				186:59, 
				187:43, 
				188:44, 
				189:45, 
				190:46, 
				191:47, 
				192:96, 
				219:91, 
				220:92, 
				221:93, 
				222:39 
			},
			_stealthKeyDown: function(evt){
				// IE doesn't fire keypress for most non-printable characters.
				// other browsers do, we simulate it here.
				var kp=evt.currentTarget.onkeypress;
				// only works if kp exists and is a dispatcher
				if(!kp||!kp._listeners)return;
				// munge key/charCode
				var k=evt.keyCode;
				// These are Windows Virtual Key Codes
				// http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/WinUI/WindowsUserInterface/UserInput/VirtualKeyCodes.asp
				var unprintable = (k!=13)&&(k!=32)&&(k!=27)&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222);
				// synthesize keypress for most unprintables and CTRL-keys
				if(unprintable||evt.ctrlKey){
					var c = (unprintable ? 0 : k);
					if(evt.ctrlKey){
						if(k==3 || k==13){
							return;  // IE will post CTRL-BREAK, CTRL-ENTER as keypress natively 
						}else if(c>95 && c<106){ 
							c -= 48;  // map CTRL-[numpad 0-9] to ASCII
						}else if((!evt.shiftKey)&&(c>=65&&c<=90)){ 
							c += 32;  // map CTRL-[A-Z] to lowercase
						}else{ 
							c = del._punctMap[c] || c;  // map other problematic CTRL combinations to ASCII
						}
					}
					// simulate a keypress event
					var faux = del._synthesizeEvent(evt, {type: 'keypress', faux: true, charCode: c});
					kp.call(evt.currentTarget, faux);
					evt.cancelBubble = faux.cancelBubble;
					evt.returnValue = faux.returnValue;
					_trySetKeyCode(evt, faux.keyCode);
				}
			},
			// Called in Event scope
			_stopPropagation: function(){
				this.cancelBubble = true;  
			},
			_preventDefault: function(){
				// Setting keyCode to 0 is the only way to prevent certain keypresses (namely
				// ctrl-combinations that correspond to menu accelerator keys).
				// Otoh, it prevents upstream listeners from getting this information
				// Try to split the difference here by clobbering keyCode only for ctrl 
				// combinations. If you still need to access the key upstream, bubbledKeyCode is
				// provided as a workaround.
				this.bubbledKeyCode = this.keyCode;
				if(this.ctrlKey){_trySetKeyCode(this, 0);}
				this.returnValue = false;
			}
		});
				
		// override stopEvent for IE
		dojo.stopEvent = function(evt){
			evt = evt || window.event;
			del._stopPropagation.call(evt);
			del._preventDefault.call(evt);
		}
	}

	del._synthesizeEvent = function(evt, props){
			var faux = dojo.mixin({}, evt, props);
			del._setKeyChar(faux);
			// FIXME: would prefer to use dojo.hitch: dojo.hitch(evt, evt.preventDefault);  
			// but it throws an error when preventDefault is invoked on Safari
			// does Event.preventDefault not support "apply" on Safari?
			faux.preventDefault = function(){ evt.preventDefault();  };  
			faux.stopPropagation = function(){ evt.stopPropagation();  };  
			return faux;
	}
	
	// Opera event normalization
	if(dojo.isOpera){
		dojo.mixin(del, {
			_fixEvent: function(evt, sender){
				switch(evt.type){
					case "keypress":
						var c = evt.which;
						if(c==3){
							c=99;  // Mozilla maps CTRL-BREAK to CTRL-c
						}
						// can't trap some keys at all, like INSERT and DELETE
						// there is no differentiating info between DELETE and ".", or INSERT and "-"
						c = ((c<41)&&(!evt.shiftKey) ? 0 : c);
						if((evt.ctrlKey)&&(!evt.shiftKey)&&(c>=65)&&(c<=90)){
							// lowercase CTRL-[A-Z] keys
							c += 32;
						}
						return del._synthesizeEvent(evt, { charCode: c });
				}
				return evt;
			}
		});
	}

	// Safari event normalization
	if(dojo.isSafari){
		dojo.mixin(del, {
			_fixEvent: function(evt, sender){
				switch(evt.type){
					case "keypress":
						var c = evt.charCode, s = evt.shiftKey, k = evt.keyCode;
						// FIXME: This is a hack, suggest we rethink keyboard strategy.
						// Arrow and page keys have 0 "keyCode" in keypress events.on Safari for Windows
						k = k || identifierMap[evt.keyIdentifier] || 0;
						if(evt.keyIdentifier=="Enter"){
							c = 0;  // differentiate Enter from CTRL-m (both code 13)
						}else if((evt.ctrlKey)&&(c>0)&&(c<27)){
							c += 96;  // map CTRL-[A-Z] codes to ASCII
						} else if (c==dojo.keys.SHIFT_TAB) {
							c = dojo.keys.TAB;  // morph SHIFT_TAB into TAB + shiftKey: true
							s = true;
						} else {
							c = (c>=32 && c<63232 ? c : 0);  // avoid generating keyChar for non-printables
						}
						return del._synthesizeEvent(evt, {charCode: c, shiftKey: s, keyCode: k});
				}
				return evt;
			}
		});
		
		dojo.mixin(dojo.keys, {
			SHIFT_TAB: 25,
			UP_ARROW: 63232,
			DOWN_ARROW: 63233,
			LEFT_ARROW: 63234,
			RIGHT_ARROW: 63235,
			F1: 63236,
			F2: 63237,
			F3: 63238,
			F4: 63239,
			F5: 63240,
			F6: 63241,
			F7: 63242,
			F8: 63243,
			F9: 63244,
			F10: 63245,
			F11: 63246,
			F12: 63247,
			PAUSE: 63250,
			DELETE: 63272,
			HOME: 63273,
			END: 63275,
			PAGE_UP: 63276,
			PAGE_DOWN: 63277,
			INSERT: 63302,
			PRINT_SCREEN: 63248,
			SCROLL_LOCK: 63249,
			NUM_LOCK: 63289
		});
		var dk = dojo.keys, identifierMap = { "Up": dk.UP_ARROW, "Down": dk.DOWN_ARROW, "Left": dk.LEFT_ARROW, "Right": dk.RIGHT_ARROW, "PageUp": dk.PAGE_UP, "PageDown": dk.PAGE_DOWN };  
	}
})();

if(dojo.isIE){
	// keep this out of the closure
	// closing over 'iel' or 'ieh' b0rks leak prevention
	// ls[i] is an index into the master handler array
	dojo._getIeDispatcher = function(){
		return function(){
			var ap=Array.prototype, h=dojo._ie_listener.handlers, c=arguments.callee, ls=c._listeners, t=h[c.target];
			// return value comes from original target function
			var r = t && t.apply(this, arguments);
			// invoke listeners after target function
			for(var i in ls){
				if(!(i in ap)){
					h[ls[i]].apply(this, arguments);
				}
			}
			return r;
		}
	}
	// keep this out of the closure to reduce RAM allocation
	dojo._event_listener._fixCallback = function(fp){
		var f = dojo._event_listener._fixEvent;
		return function(e){ return fp.call(this, f(e, this));  };
	}
}

}

if(!dojo._hasResource["dojo._base.html"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.html"] = true;

dojo.provide("dojo._base.html");

// FIXME: need to add unit tests for all the semi-public methods

try{
	document.execCommand("BackgroundImageCache", false, true);
}catch(e){
	// sane browsers don't have cache "issues"
}

// =============================
// DOM Functions
// =============================

/*=====
dojo.byId = function(id, doc){
	//	summary:
	//		similar to other library's "$" function, takes a
	//		string representing a DOM id or a DomNode
	//		and returns the corresponding DomNode. If a Node is
	//		passed, this function is a no-op. Returns a
	//		single DOM node or null, working around several
	//		browser-specific bugs to do so.
	//	id: String|DOMNode
	//	 	DOM id or DOM Node
	//	doc: DocumentElement
	//		Document to work in. Defaults to the current value of
	//		dojo.doc.  Can be used to retreive
	//		node references from other documents.
=====*/
if(dojo.isIE || dojo.isOpera){
	dojo.byId = function(id, doc){
		if(dojo.isString(id)){
			var _d = doc || dojo.doc;
			var te = _d.getElementById(id);
			// attributes.id.value is better than just id in case the 
			// user has a name=id inside a form
			if(te && te.attributes.id.value == id){
				return te;
			}else{
				var eles = _d.all[id];
				if(!eles){ return;  }
				if(!eles.length){ return eles;  }
				// if more than 1, choose first with the correct id
				var i=0;
				while((te=eles[i++])){
					if(te.attributes.id.value == id){ return te;  }
				}
			}
		}else{
			return id;  // DomNode
		}
	}
}else{
	dojo.byId = function(id, doc){
		if(dojo.isString(id)){
			return (doc || dojo.doc).getElementById(id);
		}else{
			return id;  // DomNode
		}
	}
}
/*=====
}
=====*/

(function(){
	/*
	dojo.createElement = function(obj, parent, position){
		// TODO: need to finish this!
	}
	*/

	var _destroyContainer = null;
	dojo._destroyElement = function(/*String||DomNode*/node){
		// summary:
		//		removes node from its parent, clobbers it and all of its
		//		children.
		//	node:
		//		the element to be destroyed, either as an ID or a reference

		node = dojo.byId(node);
		try{
			if(!_destroyContainer){
				_destroyContainer = document.createElement("div");
			}
			_destroyContainer.appendChild(node.parentNode ? node.parentNode.removeChild(node) : node);
			// NOTE: see http://trac.dojotoolkit.org/ticket/2931. This may be a bug and not a feature
			_destroyContainer.innerHTML = "";  
		}catch(e){
			/* squelch */
		}
	};

	dojo.isDescendant = function(/*DomNode|String*/node, /*DomNode|String*/ancestor){
		//	summary:
		//		Returns true if node is a descendant of ancestor
		//	node: id or node reference to test
		//	ancestor: id or node reference of potential parent to test against
		try{
			node = dojo.byId(node);
			ancestor = dojo.byId(ancestor);
			while(node){
				if(node === ancestor){
					return true;  // Boolean
				}
				node = node.parentNode;
			}
		}catch(e){ return -1;  /* squelch */ }
		return false;  // Boolean
	};

	dojo.setSelectable = function(/*DomNode|String*/node, /*Boolean*/selectable){
		//	summary: enable or disable selection on a node
		//	node:
		//		id or reference to node
		//	selectable:
		node = dojo.byId(node);
		if(dojo.isMozilla){
			node.style.MozUserSelect = selectable ? "" : "none";
		}else if(dojo.isKhtml){
			node.style.KhtmlUserSelect = selectable ? "auto" : "none";
		}else if(dojo.isIE){
			node.unselectable = selectable ? "" : "on";
			dojo.query("*", node).forEach(function(descendant){
				descendant.unselectable = selectable ? "" : "on";
			});
		}
		//FIXME: else?  Opera?
	};

	var _insertBefore = function(/*Node*/node, /*Node*/ref){
		ref.parentNode.insertBefore(node, ref);
		return true;	 //	boolean
	}

	var _insertAfter = function(/*Node*/node, /*Node*/ref){
		//	summary:
		//		Try to insert node after ref
		var pn = ref.parentNode;
		if(ref == pn.lastChild){
			pn.appendChild(node);
		}else{
			return _insertBefore(node, ref.nextSibling);	 //	boolean
		}
		return true;	 //	boolean
	}

	dojo.place = function(/*String|DomNode*/node, /*String|DomNode*/refNode, /*String|Number*/position){
		//	summary:
		//		attempt to insert node in relation to ref based on position
		//	node: 
		//		id or reference to node to place relative to refNode
		//	refNode: 
		//		id or reference of node to use as basis for placement
		//	position:
		//		string noting the position of node relative to refNode or a
		//		number indicating the location in the childNodes collection of
		//		refNode. Accepted string values are:
		//			* before
		//			* after
		//			* first
		//			* last
		//		"first" and "last" indicate positions as children of refNode.

		// FIXME: need to write tests for this!!!!
		if(!node || !refNode || position === undefined){ 
			return false;	 //	boolean 
		}
		node = dojo.byId(node);
		refNode = dojo.byId(refNode);
		if(typeof position == "number"){
			var cn = refNode.childNodes;
			if((position == 0 && cn.length == 0) ||
				cn.length == position){
				refNode.appendChild(node);  return true;
			}
			if(position == 0){
				return _insertBefore(node, refNode.firstChild);
			}
			return _insertAfter(node, cn[position-1]);
		}
		switch(position.toLowerCase()){
			case "before":
				return _insertBefore(node, refNode);	 //	boolean
			case "after":
				return _insertAfter(node, refNode);	 	//	boolean
			case "first":
				if(refNode.firstChild){
					return _insertBefore(node, refNode.firstChild);	 //	boolean
				}else{
					refNode.appendChild(node);
					return true;	 //	boolean
				}
				break;
			default: // aka: last
				refNode.appendChild(node);
				return true;	 //	boolean
		}
	}

	// Box functions will assume this model.
	// On IE/Opera, BORDER_BOX will be set if the primary document is in quirks mode.
	// Can be set to change behavior of box setters.
	
	// can be either:
	//	"border-box"
	//	"content-box" (default)
	dojo.boxModel = "content-box";
	
	// We punt per-node box mode testing completely.
	// If anybody cares, we can provide an additional (optional) unit 
	// that overrides existing code to include per-node box sensitivity.

	// Opera documentation claims that Opera 9 uses border-box in BackCompat mode.
	// but experiments (Opera 9.10.8679 on Windows Vista) indicate that it actually continues to use content-box.
	// IIRC, earlier versions of Opera did in fact use border-box.
	// Opera guys, this is really confusing. Opera being broken in quirks mode is not our fault.

	if(dojo.isIE /*|| dojo.isOpera*/){
		var _dcm = document.compatMode;
		// client code may have to adjust if compatMode varies across iframes
		dojo.boxModel = (_dcm=="BackCompat")||(_dcm=="QuirksMode")||(dojo.isIE<6) ? "border-box" : "content-box";
	}

	// =============================
	// Style Functions
	// =============================
	
	// getComputedStyle drives most of the style code.
	// Wherever possible, reuse the returned object.
	//
	// API functions below that need to access computed styles accept an 
	// optional computedStyle parameter.
	//
	// If this parameter is omitted, the functions will call getComputedStyle themselves.
	//
	// This way, calling code can access computedStyle once, and then pass the reference to 
	// multiple API functions. 
	//
	// This is a faux declaration to take pity on the doc tool

/*=====
	dojo.getComputedStyle = function(node){
		//	summary:
		//		Returns a "computed style" object.
		//	description:
		//		get "computed style" object which can be used to gather
		//		information about the current state of the rendered node. 
		//
		//		Note that this may behave differently on different browsers.
		//		Values may have different formats and value encodings across
		//		browsers. 
		//
		//		Use the dojo.style() method for more consistent (pixelized)
		//		return values.
		//	node: DOMNode
		//		a reference to a DOM node. Does NOT support taking an
		//		ID string for speed reasons.
		//	example:
		//	|	dojo.getComputedStyle(dojo.byId('foo')).borderWidth;
		return;  // CSS2Properties
	}
=====*/

	var gcs, dv = document.defaultView;
	if(dojo.isSafari){
		gcs = function(/*DomNode*/node){
			var s = dv.getComputedStyle(node, null);
			if(!s && node.style){ 
				node.style.display = "";  
				s = dv.getComputedStyle(node, null);
			}
			return s || {};
		};  
	}else if(dojo.isIE){
		gcs = function(node){
			return node.currentStyle;
		};
	}else{
		gcs = function(node){
			return dv.getComputedStyle(node, null);
		};
	}
	dojo.getComputedStyle = gcs;

	if(!dojo.isIE){
		dojo._toPixelValue = function(element, value){
			// style values can be floats, client code may want
			// to round for integer pixels.
			return parseFloat(value) || 0;  
		}
	}else{
		dojo._toPixelValue = function(element, avalue){
			if(!avalue){ return 0;  }
			// on IE7, medium is usually 4 pixels
			if(avalue=="medium"){ return 4;  }
			// style values can be floats, client code may
			// want to round this value for integer pixels.
			if(avalue.slice && (avalue.slice(-2)=='px')){ return parseFloat(avalue);  }
			with(element){
				var sLeft = style.left;
				var rsLeft = runtimeStyle.left;
				runtimeStyle.left = currentStyle.left;
				try{
					// 'avalue' may be incompatible with style.left, which can cause IE to throw
					// this has been observed for border widths using "thin", "medium", "thick" constants
					// those particular constants could be trapped by a lookup
					// but perhaps there are more
					style.left = avalue;
					avalue = style.pixelLeft;
				}catch(e){
					avalue = 0;
				}
				style.left = sLeft;
				runtimeStyle.left = rsLeft;
			}
			return avalue;
		}
	}

	// FIXME: there opacity quirks on FF that we haven't ported over. Hrm.
	/*=====
	dojo._getOpacity = function(node){
			//	summary:
			//		Returns the current opacity of the passed node as a
			//		floating-point value between 0 and 1.
			//	node: DomNode
			//		a reference to a DOM node. Does NOT support taking an
			//		ID string for speed reasons.
			//	return: Number between 0 and 1
	}
	=====*/

	dojo._getOpacity = (dojo.isIE ? function(node){
			try{
				return (node.filters.alpha.opacity / 100);  // Number
			}catch(e){
				return 1;  // Number
			}
		} : function(node){
			return dojo.getComputedStyle(node).opacity;
		}
	);

	/*=====
	dojo._setOpacity = function(node, opacity){
			//	summary:
			//		set the opacity of the passed node portably. Returns the
			//		new opacity of the node.
			//	node: DOMNode
			//		a reference to a DOM node. Does NOT support taking an
			//		ID string for performance reasons.
			//	opacity: Number
			//		A Number between 0 and 1. 0 specifies transparent.
			//	return: Number between 0 and 1
	}
	=====*/

	dojo._setOpacity = (dojo.isIE ? function(/*DomNode*/node, /*Number*/opacity){
			if(opacity == 1){
				// on IE7 Alpha(Filter opacity=100) makes text look fuzzy so remove it altogether (bug #2661)
				node.style.cssText = node.style.cssText.replace(/FILTER:[^;]*;/i, "");
				if(node.nodeName.toLowerCase() == "tr"){
					dojo.query("> td", node).forEach(function(i){
						i.style.cssText = i.style.cssText.replace(/FILTER:[^;]*;/i, "");
					});
				}
			}else{
				var o = "Alpha(Opacity="+(opacity*100)+")";
				node.style.filter = o;
			}
			if(node.nodeName.toLowerCase() == "tr"){
				dojo.query("> td", node).forEach(function(i){
					i.style.filter = o;
				});
			}
			return opacity;
		} : function(node, opacity){
			return node.style.opacity = opacity;
		}
	);

	var _pixelNamesCache = {
		width: true, height: true, left: true, top: true
	};
	var _toStyleValue = function(node, type, value){
		type = type.toLowerCase();
		if(_pixelNamesCache[type] === true){
			return dojo._toPixelValue(node, value)
		}else if(_pixelNamesCache[type] === false){
			return value;
		}else{
			if(dojo.isOpera && type == "cssText"){
				// FIXME: add workaround for #2855 here
			}
			if(
				(type.indexOf("margin") >= 0) ||
				// (type.indexOf("border") >= 0) ||
				(type.indexOf("padding") >= 0) ||
				(type.indexOf("width") >= 0) ||
				(type.indexOf("height") >= 0) ||
				(type.indexOf("max") >= 0) ||
				(type.indexOf("min") >= 0) ||
				(type.indexOf("offset") >= 0)
			){
				_pixelNamesCache[type] = true;
				return dojo._toPixelValue(node, value)
			}else{
				_pixelNamesCache[type] = false;
				return value;
			}
		}
	}

	// public API
	
	dojo.style = function(/*DomNode|String*/ node, /*String*/style, /*String?*/value){
		//	summary:
		//		gets or sets a style property on node. If 2 arguments are
		//		passed, acts as a getter. If value is passed, acts as a setter
		//		for the property.
		//	node:
		//		id or reference to node to get/set style for
		//	style:
		//		the style property to set in DOM-accessor format
		//		("borderWidth", not "border-width").
		//	value:
		//		optional. If passed, sets value on the node for style, handling
		//		cross-browser concerns.
		var n=dojo.byId(node), args=arguments.length, op=(style=="opacity");
		if(args==3){
			return op ? dojo._setOpacity(n, value) : n.style[style] = value;  /*Number*/
		}
		if(args==2 && op){
			return dojo._getOpacity(n);
		}
		var s = dojo.getComputedStyle(n);
		return (args == 1) ? s : _toStyleValue(n, style, s[style]);  /* CSS2Properties||String||Number */
	}

	// =============================
	// Box Functions
	// =============================

	dojo._getPadExtents = function(/*DomNode*/n, /*Object*/computedStyle){
		//	summary:
		// 		Returns object with special values specifically useful for node
		// 		fitting.
		// 			l/t = left/top padding (respectively)
		// 			w = the total of the left and right padding 
		// 			h = the total of the top and bottom padding
		//		If 'node' has position, l/t forms the origin for child nodes. 
		//		The w/h are used for calculating boxes.
		//		Normally application code will not need to invoke this
		//		directly, and will use the ...box... functions instead.
		var 
			s=computedStyle||gcs(n), 
			px=dojo._toPixelValue,
			l=px(n, s.paddingLeft), 
			t=px(n, s.paddingTop);
		return { 
			l: l,
			t: t,
			w: l+px(n, s.paddingRight),
			h: t+px(n, s.paddingBottom)
		};
	}

	dojo._getBorderExtents = function(/*DomNode*/n, /*Object*/computedStyle){
		//	summary:
		//		returns an object with properties useful for noting the border
		//		dimensions.
		// 			l/t = the sum of left/top border (respectively)
		//			w = the sum of the left and right border
		//			h = the sum of the top and bottom border
		//		The w/h are used for calculating boxes.
		//		Normally application code will not need to invoke this
		//		directly, and will use the ...box... functions instead.
		var 
			ne='none',
			px=dojo._toPixelValue, 
			s=computedStyle||gcs(n), 
			bl=(s.borderLeftStyle!=ne ? px(n, s.borderLeftWidth) : 0),
			bt=(s.borderTopStyle!=ne ? px(n, s.borderTopWidth) : 0);
		return { 
			l: bl,
			t: bt,
			w: bl + (s.borderRightStyle!=ne ? px(n, s.borderRightWidth) : 0),
			h: bt + (s.borderBottomStyle!=ne ? px(n, s.borderBottomWidth) : 0)
		};
	}

	dojo._getPadBorderExtents = function(/*DomNode*/n, /*Object*/computedStyle){
		//	summary:
		//		returns object with properties useful for box fitting with
		//		regards to padding.
		//			l/t = the sum of left/top padding and left/top border (respectively)
		//			w = the sum of the left and right padding and border
		//			h = the sum of the top and bottom padding and border
		//		The w/h are used for calculating boxes.
		//		Normally application code will not need to invoke this
		//		directly, and will use the ...box... functions instead.
		var 
			s=computedStyle||gcs(n), 
			p=dojo._getPadExtents(n, s),
			b=dojo._getBorderExtents(n, s);
		return { 
			l: p.l + b.l,
			t: p.t + b.t,
			w: p.w + b.w,
			h: p.h + b.h
		};
	}

	dojo._getMarginExtents = function(n, computedStyle){
		//	summary:
		//		returns object with properties useful for box fitting with
		//		regards to box margins (i.e., the outer-box).
		//			l/t = marginLeft, marginTop, respectively
		//			w = total width, margin inclusive
		//			h = total height, margin inclusive
		//		The w/h are used for calculating boxes.
		//		Normally application code will not need to invoke this
		//		directly, and will use the ...box... functions instead.
		var 
			s=computedStyle||gcs(n), 
			px=dojo._toPixelValue,
			l=px(n, s.marginLeft),
			t=px(n, s.marginTop),
			r=px(n, s.marginRight),
			b=px(n, s.marginBottom);
		if (dojo.isSafari && (s.position != "absolute")){
			// FIXME: Safari's version of the computed right margin
			// is the space between our right edge and the right edge 
			// of our offsetParent. 
			// What we are looking for is the actual margin value as 
			// determined by CSS.
			// Hack solution is to assume left/right margins are the same.
			r = l;
		}
		return { 
			l: l,
			t: t,
			w: l+r,
			h: t+b
		};
	}

	// Box getters work in any box context because offsetWidth/clientWidth
	// are invariant wrt box context
	//
	// They do *not* work for display: inline objects that have padding styles
	// because the user agent ignores padding (it's bogus styling in any case)
	//
	// Be careful with IMGs because they are inline or block depending on 
	// browser and browser mode.

	// Although it would be easier to read, there are not separate versions of 
	// _getMarginBox for each browser because:
	// 1. the branching is not expensive
	// 2. factoring the shared code wastes cycles (function call overhead)
	// 3. duplicating the shared code wastes bytes
	
	dojo._getMarginBox = function(/*DomNode*/node, /*Object*/computedStyle){
		// summary:
		//		returns an object that encodes the width, height, left and top
		//		positions of the node's margin box.
		var s = computedStyle||gcs(node), me = dojo._getMarginExtents(node, s);
		var	l = node.offsetLeft - me.l,	t = node.offsetTop - me.t;
		if(dojo.isMoz){
			// Mozilla:
			// If offsetParent has a computed overflow != visible, the offsetLeft is decreased
			// by the parent's border.
			// We don't want to compute the parent's style, so instead we examine node's
			// computed left/top which is more stable.
			var sl = parseFloat(s.left), st = parseFloat(s.top);
			if(!isNaN(sl) && !isNaN(st)){
				l = sl, t = st;
			}else{
				// If child's computed left/top are not parseable as a number (e.g. "auto"), we
				// have no choice but to examine the parent's computed style.
				var p = node.parentNode;
				if(p && p.style){
					var pcs = gcs(p);
					if(pcs.overflow != "visible"){
						var be = dojo._getBorderExtents(p, pcs);
						l += be.l, t += be.t;
					}
				}
			}
		}else if(dojo.isOpera){
			// On Opera, offsetLeft includes the parent's border
			var p = node.parentNode;
			if(p){
				var be = dojo._getBorderExtents(p);
				l -= be.l, t -= be.t;
			}
		}
		return { 
			l: l, 
			t: t, 
			w: node.offsetWidth + me.w, 
			h: node.offsetHeight + me.h 
		};
	}
	
	dojo._getContentBox = function(node, computedStyle){
		// summary:
		//		Returns an object that encodes the width, height, left and top
		//		positions of the node's content box, irrespective of the
		//		current box model.

		// clientWidth/Height are important since the automatically account for scrollbars
		// fallback to offsetWidth/Height for special cases (see #3378)
		var s=computedStyle||gcs(node), pe=dojo._getPadExtents(node, s), be=dojo._getBorderExtents(node, s), w=node.clientWidth, h;
		if(!w){
			w=node.offsetWidth, h=node.offsetHeight;
		}else{
			h=node.clientHeight, be.w = be.h = 0;  
		}
		// On Opera, offsetLeft includes the parent's border
		if(dojo.isOpera){ pe.l += be.l;  pe.t += be.t;  };
		return { 
			l: pe.l, 
			t: pe.t, 
			w: w - pe.w - be.w, 
			h: h - pe.h - be.h
		};
	}

	dojo._getBorderBox = function(node, computedStyle){
		var s=computedStyle||gcs(node), pe=dojo._getPadExtents(node, s), cb=dojo._getContentBox(node, s);
		return { 
			l: cb.l - pe.l, 
			t: cb.t - pe.t, 
			w: cb.w + pe.w, 
			h: cb.h + pe.h
		};
	}

	// Box setters depend on box context because interpretation of width/height styles
	// vary wrt box context.
	//
	// The value of dojo.boxModel is used to determine box context.
	// dojo.boxModel can be set directly to change behavior.
	//
	// Beware of display: inline objects that have padding styles
	// because the user agent ignores padding (it's a bogus setup anyway)
	//
	// Be careful with IMGs because they are inline or block depending on 
	// browser and browser mode.
	// 
	// Elements other than DIV may have special quirks, like built-in
	// margins or padding, or values not detectable via computedStyle.
	// In particular, margins on TABLE do not seems to appear 
	// at all in computedStyle on Mozilla.
	
	dojo._setBox = function(/*DomNode*/node, /*Number?*/l, /*Number?*/t, /*Number?*/w, /*Number?*/h, /*String?*/u){
		//	summary:
		//		sets width/height/left/top in the current (native) box-model
		//		dimentions. Uses the unit passed in u.
		//	node: DOM Node reference. Id string not supported for performance reasons.
		//	l: optional. left offset from parent.
		//	t: optional. top offset from parent.
		//	w: optional. width in current box model.
		//	h: optional. width in current box model.
		//	u: optional. unit measure to use for other measures. Defaults to "px".
		u = u || "px";
		with(node.style){
			if(!isNaN(l)){ left = l+u;  }
			if(!isNaN(t)){ top = t+u;  }
			if(w>=0){ width = w+u;  }
			if(h>=0){ height = h+u;  }
		}
	}

	dojo._usesBorderBox = function(/*DomNode*/node){
		//	summary: 
		//		True if the node uses border-box layout.

		// We could test the computed style of node to see if a particular box
		// has been specified, but there are details and we choose not to bother.
		var n = node.tagName;
		// For whatever reason, TABLE and BUTTON are always border-box by default.
		// If you have assigned a different box to either one via CSS then
		// box functions will break.
		return dojo.boxModel=="border-box" || n=="TABLE" || n=="BUTTON";  // boolean
	}

	dojo._setContentSize = function(/*DomNode*/node, /*Number*/widthPx, /*Number*/heightPx, /*Object*/computedStyle){
		//	summary:
		//		Sets the size of the node's contents, irrespective of margins,
		//		padding, or borders.
		var bb = dojo._usesBorderBox(node);
		if(bb){
			var pb = dojo._getPadBorderExtents(node, computedStyle);
			if(widthPx>=0){ widthPx += pb.w;  }
			if(heightPx>=0){ heightPx += pb.h;  }
		}
		dojo._setBox(node, NaN, NaN, widthPx, heightPx);
	}

	dojo._setMarginBox = function(/*DomNode*/node, 	/*Number?*/leftPx, /*Number?*/topPx, 
													/*Number?*/widthPx, /*Number?*/heightPx, 
													/*Object*/computedStyle){
		//	summary:
		//		sets the size of the node's margin box and palcement
		//		(left/top), irrespective of box model. Think of it as a
		//		passthrough to dojo._setBox that handles box-model vagaries for
		//		you.

		var s = computedStyle || dojo.getComputedStyle(node);
		// Some elements have special padding, margin, and box-model settings. 
		// To use box functions you may need to set padding, margin explicitly.
		// Controlling box-model is harder, in a pinch you might set dojo.boxModel.
		var bb=dojo._usesBorderBox(node),
				pb=bb ? _nilExtents : dojo._getPadBorderExtents(node, s),
				mb=dojo._getMarginExtents(node, s);
		if(widthPx>=0){	widthPx = Math.max(widthPx - pb.w - mb.w, 0);  }
		if(heightPx>=0){ heightPx = Math.max(heightPx - pb.h - mb.h, 0);  }
		dojo._setBox(node, leftPx, topPx, widthPx, heightPx);
	}
	
	var _nilExtents = { l:0, t:0, w:0, h:0 };

	// public API
	
	dojo.marginBox = function(/*DomNode|String*/node, /*Object?*/box){
		//	summary:
		//		getter/setter for the margin-box of node.
		//	description: 
		//		Returns an object in the expected format of box (regardless
		//		if box is passed). The object might look like:
		//			{ l: 50, t: 200, w: 300: h: 150 }
		//		for a node offset from its parent 50px to the left, 200px from
		//		the top with a margin width of 300px and a margin-height of
		//		150px.
		//	node:
		//		id or reference to DOM Node to get/set box for
		//	box:
		//		optional. If passed, denotes that dojo.marginBox() should
		//		update/set the margin box for node. Box is an object in the
		//		above format. All properties are optional if passed.
		var n=dojo.byId(node), s=gcs(n), b=box;
		return !b ? dojo._getMarginBox(n, s) : dojo._setMarginBox(n, b.l, b.t, b.w, b.h, s);  // Object
	}

	dojo.contentBox = function(/*DomNode|String*/node, /*Object?*/box){
		//	summary:
		//		getter/setter for the content-box of node.
		//	description:
		//		Returns an object in the expected format of box (regardless if box is passed).
		//		The object might look like:
		//			{ l: 50, t: 200, w: 300: h: 150 }
		//		for a node offset from its parent 50px to the left, 200px from
		//		the top with a content width of 300px and a content-height of
		//		150px. Note that the content box may have a much larger border
		//		or margin box, depending on the box model currently in use and
		//		CSS values set/inherited for node.
		//	node:
		//		id or reference to DOM Node to get/set box for
		//	box:
		//		optional. If passed, denotes that dojo.contentBox() should
		//		update/set the content box for node. Box is an object in the
		//		above format. All properties are optional if passed.
		var n=dojo.byId(node), s=gcs(n), b=box;
		return !b ? dojo._getContentBox(n, s) : dojo._setContentSize(n, b.w, b.h, s);  // Object
	}
	
	// =============================
	// Positioning 
	// =============================
	
	var _sumAncestorProperties = function(node, prop){
		if(!(node = (node||0).parentNode)){return 0};
		var val, retVal = 0, _b = dojo.body();
		while(node && node.style){
			if(gcs(node).position == "fixed"){
				return 0;
			}
			val = node[prop];
			if(val){
				retVal += val - 0;
				// opera and khtml #body & #html has the same values, we only
				// need one value
				if(node == _b){ break;  }
			}
			node = node.parentNode;
		}
		return retVal;	 //	integer
	}

	dojo._docScroll = function(){
		var _b = dojo.body();
		var _w = dojo.global;
		var de = dojo.doc.documentElement;
		return {
			y: (_w.pageYOffset || de.scrollTop || _b.scrollTop || 0),
			x: (_w.pageXOffset || dojo._fixIeBiDiScrollLeft(de.scrollLeft) || _b.scrollLeft || 0)
		};
	};
	
	dojo._isBodyLtr = function(){
		//FIXME: could check html and body tags directly instead of computed style?  need to ignore case, accept empty values
		return !("_bodyLtr" in dojo) ? 
			dojo._bodyLtr = dojo.getComputedStyle(dojo.body()).direction == "ltr" :
			dojo._bodyLtr;  // Boolean 
	}
	
	dojo._getIeDocumentElementOffset = function(){
		// summary
		// The following values in IE contain an offset:
		//     event.clientX 
		//     event.clientY 
		//     node.getBoundingClientRect().left
		//     node.getBoundingClientRect().top
		// But other position related values do not contain this offset, such as
		// node.offsetLeft, node.offsetTop, node.style.left and node.style.top.
		// The offset is always (2, 2) in LTR direction. When the body is in RTL
		// direction, the offset counts the width of left scroll bar's width.
		// This function computes the actual offset.

		//NOTE: assumes we're being called in an IE browser

		var de = dojo.doc.documentElement;
		if(dojo.isIE >= 7){
			return {x: de.getBoundingClientRect().left, y: de.getBoundingClientRect().top};  // Object
		}else{
			// IE 6.0
			return {x: dojo._isBodyLtr() || window.parent == window ?
				de.clientLeft : de.offsetWidth - de.clientWidth - de.clientLeft, 
				y: de.clientTop};  // Object
		}
	};
	
	dojo._fixIeBiDiScrollLeft = function(/*Integer*/ scrollLeft){
		// In RTL direction, scrollLeft should be a negative value, but IE 
		// returns a positive one. All codes using documentElement.scrollLeft
		// must call this function to fix this error, otherwise the position
		// will offset to right when there is a horizonal scrollbar.
		if(dojo.isIE && !dojo._isBodyLtr()){
			var de = dojo.doc.documentElement;
			return scrollLeft + de.clientWidth - de.scrollWidth;  // Integer
		}
		return scrollLeft;  // Integer
	}
	
	dojo._abs = function(/*DomNode*/node, /*Boolean?*/includeScroll){
		//	summary:
		//		Gets the absolute position of the passed element based on the
		//		document itself. Returns an object of the form:
		//			{ x: 100, y: 300 }
		//		if includeScroll is passed, the x and y values will include any
		//		document offsets that may affect the position relative to the
		//		viewport.

		// FIXME: need to decide in the brave-new-world if we're going to be
		// margin-box or border-box.
		var ownerDocument = node.ownerDocument;
		var ret = {
			x: 0,
			y: 0
		};
		var hasScroll = false;

		// targetBoxType == "border-box"
		var db = dojo.body();
		if(dojo.isIE){
			var client = node.getBoundingClientRect();
			var offset = dojo._getIeDocumentElementOffset();
			ret.x = client.left - offset.x;
			ret.y = client.top - offset.y;
		}else if(ownerDocument["getBoxObjectFor"]){
			// mozilla
			var bo = ownerDocument.getBoxObjectFor(node);
			ret.x = bo.x - _sumAncestorProperties(node, "scrollLeft");
			ret.y = bo.y - _sumAncestorProperties(node, "scrollTop");
		}else{
			if(node["offsetParent"]){
				hasScroll = true;
				var endNode;
				// in Safari, if the node is an absolutely positioned child of
				// the body and the body has a margin the offset of the child
				// and the body contain the body's margins, so we need to end
				// at the body
				// FIXME: getting contrary results to the above in latest WebKit.
				if(dojo.isSafari &&
					//(node.style.getPropertyValue("position") == "absolute") &&
					(gcs(node).position == "absolute") &&
					(node.parentNode == db)){
					endNode = db;
				}else{
					endNode = db.parentNode;
				}
				if(node.parentNode != db){
					var nd = node;
					if(dojo.isOpera || (dojo.isSafari >= 3)){ nd = db;  }
					ret.x -= _sumAncestorProperties(nd, "scrollLeft");
					ret.y -= _sumAncestorProperties(nd, "scrollTop");
				}
				var curnode = node;
				do{
					var n = curnode["offsetLeft"];
					//FIXME: ugly hack to workaround the submenu in 
					//popupmenu2 does not shown up correctly in opera. 
					//Someone have a better workaround?
					if(!dojo.isOpera || n>0){
						ret.x += isNaN(n) ? 0 : n;
					}
					var m = curnode["offsetTop"];
					ret.y += isNaN(m) ? 0 : m;
					curnode = curnode.offsetParent;
				}while((curnode != endNode)&&curnode);
			}else if(node["x"]&&node["y"]){
				ret.x += isNaN(node.x) ? 0 : node.x;
				ret.y += isNaN(node.y) ? 0 : node.y;
			}
		}
		// account for document scrolling
		// if offsetParent is used, ret value already includes scroll position
		// so we may have to actually remove that value if !includeScroll
		if(hasScroll || includeScroll){
			var scroll = dojo._docScroll();
			var m = hasScroll ? (!includeScroll ? -1 : 0) : 1;
			ret.y += m*scroll.y;
			ret.x += m*scroll.x;
		}

		return ret;  // object
	}

	// FIXME: need a setter for coords or a moveTo!!
	dojo.coords = function(/*DomNode|String*/node, /*Boolean?*/includeScroll){
		//	summary:
		//		Returns an object that measures margin box width/height and
		//		absolute positioning data from dojo._abs(). Return value will
		//		be in the form:
		//			{ l: 50, t: 200, w: 300: h: 150, x: 100, y: 300 }
		//		does not act as a setter. If includeScroll is passed, the x and
		//		y params are affected as one would expect in dojo._abs().
		var n=dojo.byId(node), s=gcs(n), mb=dojo._getMarginBox(n, s);
		var abs = dojo._abs(n, includeScroll);
		mb.x = abs.x;
		mb.y = abs.y;
		return mb;
	}
})();

// =============================
// (CSS) Class Functions
// =============================

dojo.hasClass = function(/*DomNode|String*/node, /*String*/classStr){
	//	summary:
	//		Returns whether or not the specified classes are a portion of the
	//		class list currently applied to the node. 
	return ((" "+dojo.byId(node).className+" ").indexOf(" "+classStr+" ") >= 0);   // Boolean
};

dojo.addClass = function(/*DomNode|String*/node, /*String*/classStr){
	//	summary:
	//		Adds the specified classes to the end of the class list on the
	//		passed node.
	node = dojo.byId(node);
	var cls = node.className;
	if((" "+cls+" ").indexOf(" "+classStr+" ") < 0){
		node.className = cls + (cls ? ' ' : '') + classStr;
	}
};

dojo.removeClass = function(/*DomNode|String*/node, /*String*/classStr){
	// summary: Removes the specified classes from node.
	node = dojo.byId(node);
	var t = dojo.trim((" " + node.className + " ").replace(" " + classStr + " ", " "));
	if(node.className != t){ node.className = t;  }
};

dojo.toggleClass = function(/*DomNode|String*/node, /*String*/classStr, /*Boolean?*/condition){
	//	summary: 	
	//		Adds a class to node if not present, or removes if present.
	//		Pass a boolean condition if you want to explicitly add or remove.
	//	condition:
	//		If passed, true means to add the class, false means to remove.
	if(condition === undefined){
		condition = !dojo.hasClass(node, classStr);
	}
	dojo[condition ? "addClass" : "removeClass"](node, classStr);
};

}

if(!dojo._hasResource["dojo._base.NodeList"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.NodeList"] = true;
dojo.provide("dojo._base.NodeList");



(function(){

	var d = dojo;

	var tnl = function(arr){
		arr.constructor = dojo.NodeList;
		dojo._mixin(arr, dojo.NodeList.prototype);
		return arr;
	}

	dojo.NodeList = function(){
		//	summary:
		//		dojo.NodeList is as subclass of Array which adds syntactic 
		//		sugar for chaining, common iteration operations, animation, 
		//		and node manipulation. NodeLists are most often returned as
		//		the result of dojo.query() calls.
		//	example:
		//		create a node list from a node
		//		|	new dojo.NodeList(dojo.byId("foo"));

		return tnl(Array.apply(null, arguments));
	}

	dojo.NodeList._wrap = tnl;

	dojo.extend(dojo.NodeList, {
		// http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array#Methods

		// FIXME: handle return values for #3244
		//		http://trac.dojotoolkit.org/ticket/3244
		
		// FIXME:
		//		need to wrap or implement:
		//			join (perhaps w/ innerHTML/outerHTML overload for toString() of items?)
		//			reduce
		//			reduceRight

		slice: function(/*===== begin, end =====*/){
			// summary:
			//		Returns a new NodeList, maintaining this one in place
			// description:
			//		This method behaves exactly like the Array.slice method
			//		with the caveat that it returns a dojo.NodeList and not a
			//		raw Array. For more details, see:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:slice
			// begin: Integer
			//		Can be a positive or negative integer, with positive
			//		integers noting the offset to begin at, and negative
			//		integers denoting an offset from the end (i.e., to the left
			//		of the end)
			// end: Integer?
			//		Optional parameter to describe what position relative to
			//		the NodeList's zero index to end the slice at. Like begin,
			//		can be positive or negative.
			var a = dojo._toArray(arguments);
			return tnl(a.slice.apply(this, a));
		},

		splice: function(/*===== index, howmany, item =====*/){
			// summary:
			//		Returns a new NodeList, manipulating this NodeList based on
			//		the arguments passed, potentially splicing in new elements
			//		at an offset, optionally deleting elements
			// description:
			//		This method behaves exactly like the Array.splice method
			//		with the caveat that it returns a dojo.NodeList and not a
			//		raw Array. For more details, see:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:splice
			// index: Integer
			//		begin can be a positive or negative integer, with positive
			//		integers noting the offset to begin at, and negative
			//		integers denoting an offset from the end (i.e., to the left
			//		of the end)
			// howmany: Integer?
			//		Optional parameter to describe what position relative to
			//		the NodeList's zero index to end the slice at. Like begin,
			//		can be positive or negative.
			// item: Object...?
			//		Any number of optional parameters may be passed in to be
			//		spliced into the NodeList
			// returns:
			//		dojo.NodeList
			var a = dojo._toArray(arguments);
			return tnl(a.splice.apply(this, a));
		},

		concat: function(/*===== item =====*/){
			// summary:
			//		Returns a new NodeList comprised of items in this NodeList
			//		as well as items passed in as parameters
			// description:
			//		This method behaves exactly like the Array.concat method
			//		with the caveat that it returns a dojo.NodeList and not a
			//		raw Array. For more details, see:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:concat
			// item: Object...?
			//		Any number of optional parameters may be passed in to be
			//		spliced into the NodeList
			// returns:
			//		dojo.NodeList
			var a = dojo._toArray(arguments, 0, [this]);
			return tnl(a.concat.apply([], a));
		},
		
		indexOf: function(/*Object*/ value, /*Integer?*/ fromIndex){
			//	summary:
			//		see dojo.indexOf(). The primary difference is that the acted-on 
			//		array is implicitly this NodeList
			// value:
			//		The value to search for.
			// fromIndex:
			//		The loction to start searching from. Optional. Defaults to 0.
			//	description:
			//		For more details on the behavior of indexOf, see:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:indexOf
			//	returns:
			//		Positive Integer or 0 for a match, -1 of not found.
			return d.indexOf(this, value, fromIndex);  // Integer
		},

		lastIndexOf: function(/*===== value, fromIndex =====*/){
			// summary:
			//		see dojo.lastIndexOf(). The primary difference is that the
			//		acted-on array is implicitly this NodeList
			//	description:
			//		For more details on the behavior of lastIndexOf, see:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:lastIndexOf
			// value: Object
			//		The value to search for.
			// fromIndex: Integer?
			//		The loction to start searching from. Optional. Defaults to 0.
			// returns:
			//		Positive Integer or 0 for a match, -1 of not found.
			return d.lastIndexOf.apply(d, d._toArray(arguments, 0, [this]));  // Integer
		},

		every: function(/*Function*/callback, /*Object?*/thisObject){
			//	summary:
			//		see dojo.every() and:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:every
			//		Takes the same structure of arguments and returns as
			//		dojo.every() with the caveat that the passed array is
			//		implicitly this NodeList
			return d.every(this, callback, thisObject);  // Boolean
		},

		some: function(/*Function*/callback, /*Object?*/thisObject){
			//	summary:
			//		see dojo.some() and:
			//			http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array:some
			//		Takes the same structure of arguments and returns as
			//		dojo.some() with the caveat that the passed array is
			//		implicitly this NodeList
			return d.some(this, callback, thisObject);  // Boolean
		},

		map: function(/*Function*/ func, /*Function?*/ obj){
			//	summary:
			//		see dojo.map(). The primary difference is that the acted-on
			//		array is implicitly this NodeList and the return is a
			//		dojo.NodeList (a subclass of Array)

			return d.map(this, func, obj, d.NodeList);  // dojo.NodeList
		},

		forEach: function(callback, thisObj){
			//	summary:
			//		see dojo.forEach(). The primary difference is that the acted-on 
			//		array is implicitly this NodeList

			d.forEach(this, callback, thisObj);
			return this;  // dojo.NodeList non-standard return to allow easier chaining
		},

		// custom methods
		
		coords: function(){
			//	summary:
			// 		Returns the box objects all elements in a node list as
			// 		an Array (*not* a NodeList)
			
			return d.map(this, d.coords);
		},

		style: function(/*===== property, value =====*/){
			//	summary:
			//		gets or sets the CSS property for every element in the NodeList
			//	property: String
			//		the CSS property to get/set, in JavaScript notation
			//		("lineHieght" instead of "line-height") 
			//	value: String?
			//		optional. The value to set the property to
			//	return:
			//		if no value is passed, the result is an array of strings.
			//		If a value is passed, the return is this NodeList
			var aa = d._toArray(arguments, 0, [null]);
			var s = this.map(function(i){
				aa[0] = i;
				return d.style.apply(d, aa);
			});
			return (arguments.length > 1) ? this : s;  // String||dojo.NodeList
		},

		styles: function(/*===== property, value =====*/){
			//	summary:
			//		Deprecated. Use NodeList.style instead. Will be removed in
			//		Dojo 1.1. Gets or sets the CSS property for every element
			//		in the NodeList
			//	property: String
			//		the CSS property to get/set, in JavaScript notation
			//		("lineHieght" instead of "line-height") 
			//	value: String?
			//		optional. The value to set the property to
			//	return:
			//		if no value is passed, the result is an array of strings.
			//		If a value is passed, the return is this NodeList
			d.deprecated("NodeList.styles", "use NodeList.style instead", "1.1");
			return this.style.apply(this, arguments);
		},

		addClass: function(/*String*/ className){
			// summary:
			//		adds the specified class to every node in the list
			//
			this.forEach(function(i){ d.addClass(i, className);  });
			return this;
		},

		removeClass: function(/*String*/ className){
			this.forEach(function(i){ d.removeClass(i, className);  });
			return this;
		},

		// FIXME: toggleClass()? connectPublisher()? connectRunOnce()?

		place: function(/*String||Node*/ queryOrNode, /*String*/ position){
			//	summary:
			//		places elements of this node list relative to the first element matched
			//		by queryOrNode. Returns the original NodeList.
			//	queryOrNode:
			//		may be a string representing any valid CSS3 selector or a DOM node.
			//		In the selector case, only the first matching element will be used 
			//		for relative positioning.
			//	position:
			//		can be one of:
			//			"last"||"end" (default)
			//			"first||"start"
			//			"before"
			//			"after"
			// 		or an offset in the childNodes property
			var item = d.query(queryOrNode)[0];
			position = position||"last";

			for(var x=0;  x<this.length;  x++){
				d.place(this[x], item, position);
			}
			return this;  // dojo.NodeList
		},

		connect: function(/*String*/ methodName, /*Object||Function||String*/ objOrFunc, /*String?*/ funcName){
			//	summary:
			//		attach event handlers to every item of the NodeList. Uses dojo.connect()
			//		so event properties are normalized
			//	methodName:
			//		the name of the method to attach to. For DOM events, this should be
			//		the lower-case name of the event
			//	objOrFunc:
			//		if 2 arguments are passed (methodName, objOrFunc), objOrFunc should
			//		reference a function or be the name of the function in the global
			//		namespace to attach. If 3 arguments are provided
			//		(methodName, objOrFunc, funcName), objOrFunc must be the scope to 
			//		locate the bound function in
			//	funcName:
			//		optional. A string naming the function in objOrFunc to bind to the
			//		event. May also be a function reference.
			//	example:
			//		add an onclick handler to every button on the page
			//		|	dojo.query("onclick", function(e){
			//		|		console.debug("clicked!");
			//		|	});
			// example:
			//		attach foo.bar() to every odd div's onmouseover
			//		|	dojo.query("div:nth-child(odd)").onclick("onmouseover", foo, "bar");
			this.forEach(function(item){
				d.connect(item, methodName, objOrFunc, funcName);
			});
			return this;  // dojo.NodeList
		},

		orphan: function(/*String?*/ simpleFilter){
			//	summary:
			//		removes elements in this list that match the simple
			//		filter from their parents and returns them as a new
			//		NodeList.
			//	simpleFilter: single-expression CSS filter
			//	return: a dojo.NodeList of all of the elements orpahned
			var orphans = (simpleFilter) ? d._filterQueryResult(this, simpleFilter) : this;
			orphans.forEach(function(item){
				if(item["parentNode"]){
					item.parentNode.removeChild(item);
				}
			});
			return orphans;  // dojo.NodeList
		},

		adopt: function(/*String||Array||DomNode*/ queryOrListOrNode, /*String?*/ position){
			//	summary:
			//		places any/all elements in queryOrListOrNode at a
			//		position relative to the first element in this list.
			//		Returns a dojo.NodeList of the adopted elements.
			//	queryOrListOrNode:
			//		a DOM node or a query string or a query result.
			//		Represents the nodes to be adopted relative to the
			//		first element of this NodeList.
			//	position:
			//		optional. One of:
			//			"last"||"end" (default)
			//			"first||"start"
			//			"before"
			//			"after"
			// 		or an offset in the childNodes property
			var item = this[0];
			return d.query(queryOrListOrNode).forEach(function(ai){ d.place(ai, item, (position||"last"));  });  // dojo.NodeList
		},

		// FIXME: do we need this?
		query: function(/*String*/ queryStr){
			//	summary:
			//		Returns a new, flattened NodeList. Elements of the new list
			//		satisfy the passed query but use elements of the
			//		current NodeList as query roots.

			queryStr = queryStr||"";

			// FIXME: probably slow
			var ret = d.NodeList();
			this.forEach(function(item){
				d.query(queryStr, item).forEach(function(subItem){
					if(typeof subItem != "undefined"){
						ret.push(subItem);
					}
				});
			});
			return ret;  // dojo.NodeList
		},

		filter: function(/*String*/ simpleQuery){
			//	summary:
			// 		"masks" the built-in javascript filter() method to support
			//		passing a simple string filter in addition to supporting
			//		filtering function objects.
			//	example:
			//		"regular" JS filter syntax as exposed in dojo.filter:
			//		|	dojo.query("*").filter(function(item){
			//		|		// highlight every paragraph
			//		|		return (item.nodeName == "p");
			//		|	}).styles("backgroundColor", "yellow");
			// example:
			//		the same filtering using a CSS selector
			//		|	dojo.query("*").filter("p").styles("backgroundColor", "yellow");

			var items = this;
			var _a = arguments;
			var r = d.NodeList();
			var rp = function(t){ 
				if(typeof t != "undefined"){
					r.push(t);  
				}
			}
			if(d.isString(simpleQuery)){
				items = d._filterQueryResult(this, _a[0]);
				if(_a.length == 1){
					// if we only got a string query, pass back the filtered results
					return items;  // dojo.NodeList
				}
				// if we got a callback, run it over the filtered items
				d.forEach(d.filter(items, _a[1], _a[2]), rp);
				return r;  // dojo.NodeList
			}
			// handle the (callback, [thisObject]) case
			d.forEach(d.filter(items, _a[0], _a[1]), rp);
			return r;  // dojo.NodeList

		},
		
		/*
		// FIXME: should this be "copyTo" and include parenting info?
		clone: function(){
			// summary:
			//		creates node clones of each element of this list
			//		and returns a new list containing the clones
		},
		*/

		addContent: function(/*String*/ content, /*String||Integer?*/ position){
			//	summary:
			//		add a node or some HTML as a string to every item in the list. 
			//		Returns the original list.
			//	content:
			//		the HTML in string format to add at position to every item
			//	position:
			//		One of:
			//			"last"||"end" (default)
			//			"first||"start"
			//			"before"
			//			"after"
			//		or an integer offset in the childNodes property
			var ta = d.doc.createElement("span");
			if(d.isString(content)){
				ta.innerHTML = content;
			}else{
				ta.appendChild(content);
			}
			var ct = ((position == "first")||(position == "after")) ? "lastChild" : "firstChild";
			this.forEach(function(item){
				var tn = ta.cloneNode(true);
				while(tn[ct]){
					d.place(tn[ct], item, position);
				}
			});
			return this;  // dojo.NodeList
		}
	});

	// syntactic sugar for DOM events
	d.forEach([
		"blur", "click", "keydown", "keypress", "keyup", "mousedown", "mouseenter",
		"mouseleave", "mousemove", "mouseout", "mouseover", "mouseup"
		], function(evt){
			var _oe = "on"+evt;
			dojo.NodeList.prototype[_oe] = function(a, b){
				return this.connect(_oe, a, b);
			}
				// FIXME: should these events trigger publishes?
				/*
				return (a ? this.connect(_oe, a, b) : 
							this.forEach(function(n){  
								// FIXME:
								//		listeners get buried by
								//		addEventListener and can't be dug back
								//		out to be triggered externally.
								// see:
								//		http://developer.mozilla.org/en/docs/DOM:element

								console.debug(n, evt, _oe);

								// FIXME: need synthetic event support!
								var _e = { target: n, faux: true, type: evt };
								// dojo._event_listener._synthesizeEvent({}, { target: n, faux: true, type: evt });
								try{ n[evt](_e);  }catch(e){ console.debug(e);  }
								try{ n[_oe](_e);  }catch(e){ console.debug(e);  }
							})
				);
			}
			*/
		}
	);

})();

}

if(!dojo._hasResource["dojo._base.query"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.query"] = true;
dojo.provide("dojo._base.query");


/*
	dojo.query() architectural overview:

		dojo.query is a relatively full-featured CSS3 query library. It is
		designed to take any valid CSS3 selector and return the nodes matching
		the selector. To do this quickly, it processes queries in several
		steps, applying caching where profitable.
		
		The steps (roughly in reverse order of the way they appear in the code):
			1.) check to see if we already have a "query dispatcher"
				- if so, use that with the given parameterization. Skip to step 4.
			2.) attempt to determine which branch to dispatch the query to:
				- JS (optimized DOM iteration)
				- xpath (for browsers that support it and where it's fast)
				- native (not available in any browser yet)
			3.) tokenize and convert to executable "query dispatcher"
				- this is where the lion's share of the complexity in the
				  system lies. In the DOM version, the query dispatcher is
				  assembled as a chain of "yes/no" test functions pertaining to
				  a section of a simple query statement (".blah:nth-child(odd)"
				  but not "div div", which is 2 simple statements). Individual
				  statement dispatchers are cached (to prevent re-definition)
				  as are entire dispatch chains (to make re-execution of the
				  same query fast)
				- in the xpath path, tokenization yeilds a concatenation of
				  parameterized xpath selectors. As with the DOM version, both
				  simple selector blocks and overall evaluators are cached to
				  prevent re-defintion
			4.) the resulting query dispatcher is called in the passed scope (by default the top-level document)
				- for DOM queries, this results in a recursive, top-down
				  evaluation of nodes based on each simple query section
				- xpath queries can, thankfully, be executed in one shot
			5.) matched nodes are pruned to ensure they are unique
*/

;(function(){
	// define everything in a closure for compressability reasons. "d" is an
	// alias to "dojo" since it's so frequently used. This seems a
	// transformation that the build system could perform on a per-file basis.

	////////////////////////////////////////////////////////////////////////
	// Utility code
	////////////////////////////////////////////////////////////////////////

	var d = dojo;
	var childNodesName = dojo.isIE ? "children" : "childNodes";

	var getQueryParts = function(query){
		// summary: state machine for query tokenization
		if(query.charAt(query.length-1) == ">"){
			query += " *"
		}
		query += " ";  // ensure that we terminate the state machine

		var ts = function(s, e){
			return d.trim(query.slice(s, e));
		}

		// the overall data graph of the full query, as represented by queryPart objects
		var qparts = [];  
		// state keeping vars
		var inBrackets = -1;
		var inParens = -1;
		var inMatchFor = -1;
		var inPseudo = -1;
		var inClass = -1;
		var inId = -1;
		var inTag = -1;
		var lc = "";  // the last character
		var cc = "";  // the current character
		var pStart;
		// iteration vars
		var x = 0;  // index in the query
		var ql = query.length;
		var currentPart = null;  // data structure representing the entire clause
		var _cp = null;  // the current pseudo or attr matcher

		var endTag = function(){
			if(inTag >= 0){
				var tv = (inTag == x) ? null : ts(inTag, x).toLowerCase();
				currentPart[ (">~+".indexOf(tv) < 0)? "tag" : "oper" ] = tv;
				inTag = -1;
			}
		}

		var endId = function(){
			if(inId >= 0){
				currentPart.id = ts(inId, x).replace(/\\/g, "");
				inId = -1;
			}
		}

		var endClass = function(){
			if(inClass >= 0){
				currentPart.classes.push(ts(inClass+1, x).replace(/\\/g, ""));
				inClass = -1;
			}
		}

		var endAll = function(){
			endId();  endTag();  endClass();
		}

		for(;  x<ql, lc=cc, cc=query.charAt(x);  x++){
			if(lc == "\\"){ continue;  }
			if(!currentPart){
				// NOTE: I hate all this alloc, but it's shorter than writing tons of if's
				pStart = x;
				currentPart = {
					query: null,
					pseudos: [],
					attrs: [],
					classes: [],
					tag: null,
					oper: null,
					id: null
				};
				inTag = x;
			}

			if(inBrackets >= 0){
				// look for a the close first
				if(cc == "]"){
					if(!_cp.attr){
						_cp.attr = ts(inBrackets+1, x);
					}else{
						_cp.matchFor = ts((inMatchFor||inBrackets+1), x);
					}
					var cmf = _cp.matchFor;
					if(cmf){
						if(	(cmf.charAt(0) == '"') || (cmf.charAt(0)  == "'") ){
							_cp.matchFor = cmf.substring(1, cmf.length-1);
						}
					}
					currentPart.attrs.push(_cp);
					_cp = null;  // necessaray?
					inBrackets = inMatchFor = -1;
				}else if(cc == "="){
					var addToCc = ("|~^$*".indexOf(lc) >=0 ) ? lc : "";
					_cp.type = addToCc+cc;
					_cp.attr = ts(inBrackets+1, x-addToCc.length);
					inMatchFor = x+1;
				}
				// now look for other clause parts
			}else if(inParens >= 0){
				if(cc == ")"){
					if(inPseudo >= 0){
						_cp.value = ts(inParens+1, x);
					}
					inPseudo = inParens = -1;
				}
			}else if(cc == "#"){
				endAll();
				inId = x+1;
			}else if(cc == "."){
				endAll();
				inClass = x;
			}else if(cc == ":"){
				endAll();
				inPseudo = x;
			}else if(cc == "["){
				endAll();
				inBrackets = x;
				_cp = {
					/*=====
					attr: null, type: null, matchFor: null
					=====*/
				};
			}else if(cc == "("){
				if(inPseudo >= 0){
					_cp = { 
						name: ts(inPseudo+1, x), 
						value: null
					}
					currentPart.pseudos.push(_cp);
				}
				inParens = x;
			}else if(cc == " " && lc != cc){
				// note that we expect the string to be " " terminated
				endAll();
				if(inPseudo >= 0){
					currentPart.pseudos.push({ name: ts(inPseudo+1, x) });
				}
				currentPart.hasLoops = (	
						currentPart.pseudos.length || 
						currentPart.attrs.length || 
						currentPart.classes.length	);
				currentPart.query = ts(pStart, x);
				currentPart.tag = (currentPart["oper"]) ? null : (currentPart.tag || "*");
				qparts.push(currentPart);
				currentPart = null;
			}
		}
		return qparts;
	};
	

	////////////////////////////////////////////////////////////////////////
	// XPath query code
	////////////////////////////////////////////////////////////////////////

	// this array is a lookup used to generate an attribute matching function.
	// There is a similar lookup/generator list for the DOM branch with similar
	// calling semantics.
	var xPathAttrs = {
		"*=": function(attr, value){
			return "[contains(@"+attr+", '"+ value +"')]";
		},
		"^=": function(attr, value){
			return "[starts-with(@"+attr+", '"+ value +"')]";
		},
		"$=": function(attr, value){
			return "[substring(@"+attr+", string-length(@"+attr+")-"+(value.length-1)+")='"+value+"']";
		},
		"~=": function(attr, value){
			return "[contains(concat(' ',@"+attr+",' '), ' "+ value +" ')]";
		},
		"|=": function(attr, value){
			return "[contains(concat(' ',@"+attr+",' '), ' "+ value +"-')]";
		},
		"=": function(attr, value){
			return "[@"+attr+"='"+ value +"']";
		}
	};

	// takes a list of attribute searches, the overall query, a function to
	// generate a default matcher, and a closure-bound method for providing a
	// matching function that generates whatever type of yes/no distinguisher
	// the query method needs. The method is a bit tortured and hard to read
	// because it needs to be used in both the XPath and DOM branches.
	var handleAttrs = function(	attrList, 
								query, 
								getDefault, 
								handleMatch){
		d.forEach(query.attrs, function(attr){
			var matcher;
			// type, attr, matchFor
			if(attr.type && attrList[attr.type]){
				matcher = attrList[attr.type](attr.attr, attr.matchFor);
			}else if(attr.attr.length){
				matcher = getDefault(attr.attr);
			}
			if(matcher){ handleMatch(matcher);  }
		});
	}

	var buildPath = function(query){
		var xpath = ".";
		var qparts = getQueryParts(d.trim(query));
		while(qparts.length){
			var tqp = qparts.shift();
			var prefix;
			// FIXME: need to add support for ~ and +
			if(tqp.oper == ">"){
				prefix = "/";
				// prefix = "/child::node()";
				tqp = qparts.shift();
			}else{
				prefix = "//";
				// prefix = "/descendant::node()"
			}

			// get the tag name (if any)

			xpath += prefix + tqp.tag;
			
			// check to see if it's got an id. Needs to come first in xpath.
			if(tqp.id){
				xpath += "[@id='"+tqp.id+"'][1]";
			}

			d.forEach(tqp.classes, function(cn){
				var cnl = cn.length;
				var padding = " ";
				if(cn.charAt(cnl-1) == "*"){
					padding = "";  cn = cn.substr(0, cnl-1);
				}
				xpath += 
					"[contains(concat(' ',@class,' '), ' "+
					cn + padding + "')]";
			});

			handleAttrs(xPathAttrs, tqp, 
				function(condition){
						return "[@"+condition+"]";
				},
				function(matcher){
					xpath += matcher;
				}
			);

			// FIXME: need to implement pseudo-class checks!!
		};
		return xpath;
	};

	var _xpathFuncCache = {};
	var getXPathFunc = function(path){
		if(_xpathFuncCache[path]){
			return _xpathFuncCache[path];
		}

		var doc = d.doc;
		// var parent = d.body();  // FIXME
		// FIXME: don't need to memoize. The closure scope handles it for us.
		var xpath = buildPath(path);

		var tf = function(parent){
			// XPath query strings are memoized.
			var ret = [];
			var xpathResult;
			try{
				xpathResult = doc.evaluate(xpath, parent, null, 
												// XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
												XPathResult.ANY_TYPE, null);
			}catch(e){
				console.debug("failure in exprssion:", xpath, "under:", parent);
				console.debug(e);
			}
			var result = xpathResult.iterateNext();
			while(result){
				ret.push(result);
				result = xpathResult.iterateNext();
			}
			return ret;
		}
		return _xpathFuncCache[path] = tf;
	};

	/*
	d.xPathMatch = function(query){
		// XPath based DOM query system. Handles a small subset of CSS
		// selectors, subset is identical to the non-XPath version of this
		// function. 

		// FIXME: need to add support for alternate roots
		return getXPathFunc(query)();
	}
	*/

	////////////////////////////////////////////////////////////////////////
	// DOM query code
	////////////////////////////////////////////////////////////////////////

	var _filtersCache = {};
	var _simpleFiltersCache = {};

	// the basic building block of the yes/no chaining system. agree(f1, f2)
	// generates a new function which returns the boolean results of both of
	// the passed functions to a single logical-anded result.
	var agree = function(first, second){
		if(!first){ return second;  }
		if(!second){ return first;  }

		return function(){
			return first.apply(window, arguments) && second.apply(window, arguments);
		}
	}

	var _filterDown = function(element, queryParts, matchArr, idx){
		var nidx = idx+1;
		var isFinal = (queryParts.length == nidx);
		var tqp = queryParts[idx];

		// see if we can constrain our next level to direct children
		if(tqp.oper == ">"){
			var ecn = element[childNodesName];
			if(!ecn || !ecn.length){
				return;
			}
			nidx++;
			isFinal = (queryParts.length == nidx);
			// kinda janky, too much array alloc
			var tf = getFilterFunc(queryParts[idx+1]);
			// for(var x=ecn.length-1, te;  x>=0, te=ecn[x];  x--){
			for(var x=0, ecnl=ecn.length, te;  x<ecnl, te=ecn[x];  x++){
				if(tf(te)){
					if(isFinal){
						matchArr.push(te);
					}else{
						_filterDown(te, queryParts, matchArr, nidx);
					}
				}
				/*
				if(x==0){
					break;
				}
				*/
			}
		}

		// otherwise, keep going down, unless we'er at the end
		var candidates = getElementsFunc(tqp)(element);
		if(isFinal){
			while(candidates.length){
				matchArr.push(candidates.shift());
			}
			/*
			candidates.unshift(0, matchArr.length-1);
			matchArr.splice.apply(matchArr, candidates);
			*/
		}else{
			// if we're not yet at the bottom, keep going!
			while(candidates.length){
				_filterDown(candidates.shift(), queryParts, matchArr, nidx);
			}
		}
	}

	var filterDown = function(elements, queryParts){
		var ret = [];

		// for every root, get the elements that match the descendant selector
		// for(var x=elements.length-1, te;  x>=0, te=elements[x];  x--){
		var x = elements.length - 1, te;
		while(te = elements[x--]){
			_filterDown(te, queryParts, ret, 0);
		}
		return ret;
	}

	var getFilterFunc = function(q){
		// note: query can't have spaces!
		if(_filtersCache[q.query]){
			return _filtersCache[q.query];
		}
		var ff = null;

		// does it have a tagName component?
		if(q.tag){
			if(q.tag == "*"){
				ff = agree(ff, 
					function(elem){
						return (elem.nodeType == 1);
					}
				);
			}else{
				// tag name match
				ff = agree(ff, 
					function(elem){
						return (
							(elem.nodeType == 1) &&
							(q.tag == elem.tagName.toLowerCase())
						);
						// return isTn;
					}
				);
			}
		}

		// does the node have an ID?
		if(q.id){
			ff = agree(ff, 
				function(elem){
					return (
						(elem.nodeType == 1) &&
						(elem.id == q.id)
					);
				}
			);
		}

		if(q.hasLoops){
			// if we have other query param parts, make sure we add them to the
			// filter chain
			ff = agree(ff, getSimpleFilterFunc(q));
		}

		return _filtersCache[q.query] = ff;
	}

	var getNodeIndex = function(node){
		// NOTE: 
		//		we could have a more accurate caching mechanism by invalidating
		//		caches after the query has finished, but I think that'd lead to
		//		significantly more cache churn than the cache would provide
		//		value for in the common case. Generally, we're more
		//		conservative (and therefore, more accurate) than jQuery and
		//		DomQuery WRT node node indexes, but there may be corner cases
		//		in which we fall down.  How much we care about them is TBD.

		var pn = node.parentNode;
		var pnc = pn.childNodes;

		// check to see if we can trust the cache. If not, re-key the whole
		// thing and return our node match from that.

		var nidx = -1;
		var child = pn.firstChild;
		if(!child){
			return nidx;
		}

		var ci = node["__cachedIndex"];
		var cl = pn["__cachedLength"];

		// only handle cache building if we've gone out of sync
		if(((typeof cl == "number")&&(cl != pnc.length))||(typeof ci != "number")){
			// rip though the whole set, building cache indexes as we go
			pn["__cachedLength"] = pnc.length;
			var idx = 1;
			do{
				// we only assign indexes for nodes with nodeType == 1, as per:
				//		http://www.w3.org/TR/css3-selectors/#nth-child-pseudo
				// only elements are counted in the search order, and they
				// begin at 1 for the first child's index

				if(child === node){
					nidx = idx;
				}
				if(child.nodeType == 1){
					child["__cachedIndex"] = idx;
					idx++;
				}
				child = child.nextSibling;
			}while(child);
		}else{
			// NOTE: 
			//		could be incorrect in some cases (node swaps involving the
			//		passed node, etc.), but we ignore those due to the relative
			//		unlikelihood of that occuring
			nidx = ci;
		}
		return nidx;
	}

	var firedCount = 0;

	var blank = "";
	var _getAttr = function(elem, attr){
		if(attr == "class"){
			return elem.className || blank;
		}
		if(attr == "for"){
			return elem.htmlFor || blank;
		}
		return elem.getAttribute(attr, 2) || blank;
	}

	var attrs = {
		"*=": function(attr, value){
			return function(elem){
				// E[foo*="bar"]
				//		an E element whose "foo" attribute value contains
				//		the substring "bar"
				return (_getAttr(elem, attr).indexOf(value)>=0);
			}
		},
		"^=": function(attr, value){
			// E[foo^="bar"]
			//		an E element whose "foo" attribute value begins exactly
			//		with the string "bar"
			return function(elem){
				return (_getAttr(elem, attr).indexOf(value)==0);
			}
		},
		"$=": function(attr, value){
			// E[foo$="bar"]	
			//		an E element whose "foo" attribute value ends exactly
			//		with the string "bar"
			var tval = " "+value;
			return function(elem){
				var ea = " "+_getAttr(elem, attr);
				return (ea.lastIndexOf(value)==(ea.length-value.length));
			}
		},
		"~=": function(attr, value){
			// E[foo~="bar"]	
			//		an E element whose "foo" attribute value is a list of
			//		space-separated values, one of which is exactly equal
			//		to "bar"

			// return "[contains(concat(' ',@"+attr+",' '), ' "+ value +" ')]";
			var tval = " "+value+" ";
			return function(elem){
				var ea = " "+_getAttr(elem, attr)+" ";
				return (ea.indexOf(tval)>=0);
			}
		},
		"|=": function(attr, value){
			// E[hreflang|="en"]
			//		an E element whose "hreflang" attribute has a
			//		hyphen-separated list of values beginning (from the
			//		left) with "en"
			var valueDash = " "+value+"-";
			return function(elem){
				var ea = " "+(elem.getAttribute(attr, 2) || "");
				return (
					(ea == value) ||
					(ea.indexOf(valueDash)==0)
				);
			}
		},
		"=": function(attr, value){
			return function(elem){
				return (_getAttr(elem, attr) == value);
			}
		}
	};

	var pseudos = {
		"first-child": function(name, condition){
			return function(elem){
				if(elem.nodeType != 1){ return false;  }
				// check to see if any of the previous siblings are elements
				var fc = elem.previousSibling;
				while(fc && (fc.nodeType != 1)){
					fc = fc.previousSibling;
				}
				return (!fc);
			}
		},
		"last-child": function(name, condition){
			return function(elem){
				if(elem.nodeType != 1){ return false;  }
				// check to see if any of the next siblings are elements
				var nc = elem.nextSibling;
				while(nc && (nc.nodeType != 1)){
					nc = nc.nextSibling;
				}
				return (!nc);
			}
		},
		"empty": function(name, condition){
			return function(elem){
				// DomQuery and jQuery get this wrong, oddly enough.
				// The CSS 3 selectors spec is pretty explicit about
				// it, too.
				var cn = elem.childNodes;
				var cnl = elem.childNodes.length;
				// if(!cnl){ return true;  }
				for(var x=cnl-1;  x >= 0;  x--){
					var nt = cn[x].nodeType;
					if((nt == 1)||(nt == 3)){ return false;  }
				}
				return true;
			}
		},
		/* non standard!
		"contains": function(name, condition){
			return function(elem){
				// FIXME: I dislike this version of "contains", as
				// whimsical attribute could set it off. An inner-text
				// based version might be more accurate, but since
				// jQuery and DomQuery also potentially get this wrong,
				// I'm leaving it for now.
				return (elem.innerHTML.indexOf(condition) >= 0);
			}
		},
		*/
		"not": function(name, condition){
			var ntf = getFilterFunc(getQueryParts(condition)[0]);
			return function(elem){
				return (!ntf(elem));
			}
		},
		"nth-child": function(name, condition){
			var pi = parseInt;
			if(condition == "odd"){
				return function(elem){
					return (
						((getNodeIndex(elem)) % 2) == 1
					);
				}
			}else if((condition == "2n")||
				(condition == "even")){
				return function(elem){
					return ((getNodeIndex(elem) % 2) == 0);
				}
			}else if(condition.indexOf("0n+") == 0){
				var ncount = pi(condition.substr(3));
				return function(elem){
					return (elem.parentNode[childNodesName][ncount-1] === elem);
				}
			}else if(	(condition.indexOf("n+") > 0) &&
						(condition.length > 3) ){
				var tparts = condition.split("n+", 2);
				var pred = pi(tparts[0]);
				var idx = pi(tparts[1]);
				return function(elem){
					return ((getNodeIndex(elem) % pred) == idx);
				}
			}else if(condition.indexOf("n") == -1){
				var ncount = pi(condition);
				return function(elem){
					return (getNodeIndex(elem) == ncount);
				}
			}
		}
	};

	var defaultGetter = (d.isIE) ? function(cond){
		var clc = cond.toLowerCase();
		return function(elem){
			return elem[cond]||elem[clc];
		}
	} : function(cond){
		return function(elem){
			return (elem && elem.getAttribute && elem.hasAttribute(cond));
		}
	};

	var getSimpleFilterFunc = function(query){

		var fcHit = (_simpleFiltersCache[query.query]||_filtersCache[query.query]);
		if(fcHit){ return fcHit;  }

		var ff = null;

		// the only case where we'll need the tag name is if we came from an ID query
		if(query.id){ // do we have an ID component?
			if(query.tag != "*"){
				ff = agree(ff, function(elem){
					return (elem.tagName.toLowerCase() == query.tag);
				});
			}
		}

		// if there's a class in our query, generate a match function for it
		d.forEach(query.classes, function(cname, idx, arr){
			// get the class name
			var isWildcard = cname.charAt(cname.length-1) == "*";
			if(isWildcard){
				cname = cname.substr(0, cname.length-1);
			}
			// I dislike the regex thing, even if memozied in a cache, but it's VERY short
			var re = new RegExp("(?:^|\\s)" + cname + (isWildcard ? ".*" : "") + "(?:\\s|$)");
			ff = agree(ff, function(elem){
				return re.test(elem.className);
			});
			ff.count = idx;
		});

		d.forEach(query.pseudos, function(pseudo){
			if(pseudos[pseudo.name]){
				ff = agree(ff, pseudos[pseudo.name](pseudo.name, pseudo.value));
			}
		});

		handleAttrs(attrs, query, defaultGetter,
			function(tmatcher){ ff = agree(ff, tmatcher);  }
		);
		if(!ff){
			ff = function(){ return true;  };
		}
		return _simpleFiltersCache[query.query] = ff;
	}

	var _getElementsFuncCache = { };

	var getElementsFunc = function(query, root){
		var fHit = _getElementsFuncCache[query.query];
		if(fHit){ return fHit;  }

		// NOTE: this function is in the fast path! not memoized!!!

		// the query doesn't contain any spaces, so there's only so many
		// things it could be

		if(query.id && !query.hasLoops && !query.tag){
			// ID-only query. Easy.
			return _getElementsFuncCache[query.query] = function(root){
				// FIXME: if root != document, check for parenting!
				return [ d.byId(query.id) ];
			}
		}

		var filterFunc = getSimpleFilterFunc(query);

		var retFunc;
		if(query.tag && query.id && !query.hasLoops){
			// we got a filtered ID search (e.g., "h4#thinger")
			retFunc = function(root){
				var te = d.byId(query.id);
				if(filterFunc(te)){
					return [ te ];
				}
			}
		}else{
			var tret;

			if(!query.hasLoops){
				// it's just a plain-ol elements-by-tag-name query from the root
				retFunc = function(root){
					var ret = [];
					var te, x=0, tret = root.getElementsByTagName(query.tag);
					while(te=tret[x++]){
						ret.push(te);
					}
					return ret;
				}
			}else{
				retFunc = function(root){
					var ret = [];
					var te, x=0, tret = root.getElementsByTagName(query.tag);
					while(te=tret[x++]){
						if(filterFunc(te)){
							ret.push(te);
						}
					}
					return ret;
				}
			}
		}
		return _getElementsFuncCache[query.query] = retFunc;
	}

	var _partsCache = {};

	////////////////////////////////////////////////////////////////////////
	// the query runner
	////////////////////////////////////////////////////////////////////////

	// this is the second level of spliting, from full-length queries (e.g.,
	// "div.foo .bar") into simple query expressions (e.g., ["div.foo",
	// ".bar"])
	var _queryFuncCache = {
		"*": d.isIE ? 
			function(root){ 
					return root.all;
			} : 
			function(root){
				 return root.getElementsByTagName("*");
			},
		">": function(root){
			var ret = [];
			var te, x=0, tret = root[childNodesName];
			while(te=tret[x++]){
				if(te.nodeType == 1){ ret.push(te);  }
			}
			return ret;
		}
	};

	var getStepQueryFunc = function(query){
		// if it's trivial, get a fast-path dispatcher
		var qparts = getQueryParts(d.trim(query));
		// if(query[query.length-1] == ">"){ query += " *";  }
		if(qparts.length == 1){
			var tt = getElementsFunc(qparts[0]);
			tt.nozip = true;
			return tt;
		}

		// otherwise, break it up and return a runner that iterates over the parts recursively
		var sqf = function(root){
			var localQueryParts = qparts.slice(0);  // clone the src arr
			var candidates;
			if(localQueryParts[0].oper == ">"){
				candidates = [ root ];
				// root = document;
			}else{
				candidates = getElementsFunc(localQueryParts.shift())(root);
			}
			return filterDown(candidates, localQueryParts);
		}
		return sqf;
	}

	// a specialized method that implements our primoridal "query optimizer".
	// This allows us to dispatch queries to the fastest subsystem we can get.
	var _getQueryFunc = (
		// NOTE: 
		//		XPath on the Webkit nighlies is slower than it's DOM iteration
		//		for most test cases
		// FIXME: 
		//		we should try to capture some runtime speed data for each query
		//		function to determine on the fly if we should stick w/ the
		//		potentially optimized variant or if we should try something
		//		new.
		(document["evaluate"] && !d.isSafari) ? 
		function(query){
			// has xpath support that's faster than DOM
			var qparts = query.split(" ");
			// can we handle it?
			if(	(document["evaluate"])&&
				(query.indexOf(":") == -1)&&
				(
					(true) // ||
					// (query.indexOf("[") == -1) ||
					// (query.indexOf("=") == -1)
				)
			){
				// dojo.debug(query);
				// should we handle it?

				// kind of a lame heuristic, but it works
				if(	
					// a "div div div" style query
					((qparts.length > 2)&&(query.indexOf(">") == -1))||
					// or something else with moderate complexity. kinda janky
					(qparts.length > 3)||
					(query.indexOf("[")>=0)||
					// or if it's a ".thinger" query
					((1 == qparts.length)&&(0 <= query.indexOf(".")))

				){
					// use get and cache a xpath runner for this selector
					return getXPathFunc(query);
				}
			}

			// fallthrough
			return getStepQueryFunc(query);
		} : getStepQueryFunc
	);
	// uncomment to disable XPath for testing and tuning the DOM path
	// _getQueryFunc = getStepQueryFunc;

	// FIXME: we've got problems w/ the NodeList query()/filter() functions if we go XPath for everything

	// uncomment to disable DOM queries for testing and tuning XPath
	// _getQueryFunc = getXPathFunc;

	// this is the primary caching for full-query results. The query dispatcher
	// functions are generated here and then pickled for hash lookup in the
	// future
	var getQueryFunc = function(query){
		// return a cached version if one is available
		if(_queryFuncCache[query]){ return _queryFuncCache[query];  }
		if(0 > query.indexOf(",")){
			// if it's not a compound query (e.g., ".foo, .bar"), cache and return a dispatcher
			return _queryFuncCache[query] = _getQueryFunc(query);
		}else{
			// if it's a complex query, break it up into it's constituent parts
			// and return a dispatcher that will merge the parts when run

			// var parts = query.split(", ");
			var parts = query.split(/\s*,\s*/);
			var tf = function(root){
				var pindex = 0;  // avoid array alloc for every invocation
				var ret = [];
				var tp;
				while(tp = parts[pindex++]){
					ret = ret.concat(_getQueryFunc(tp, tp.indexOf(" "))(root));
				}
				return ret;
			}
			// ...cache and return
			return _queryFuncCache[query] = tf;
		}
	}

	// FIXME: 
	//		Dean's new Base2 uses a system whereby queries themselves note if
	//		they'll need duplicate filtering. We need to get on that plan!!

	// attempt to efficiently determine if an item in a list is a dupe,
	// returning a list of "uniques", hopefully in doucment order
	var _zipIdx = 0;
	var _zip = function(arr){
		if(arr && arr.nozip){ return d.NodeList._wrap(arr);  }
		var ret = new d.NodeList();
		if(!arr){ return ret;  }
		if(arr[0]){
			ret.push(arr[0]);
		}
		if(arr.length < 2){ return ret;  }
		_zipIdx++;
		arr[0]["_zipIdx"] = _zipIdx;
		for(var x=1, te;  te = arr[x];  x++){
			if(arr[x]["_zipIdx"] != _zipIdx){ 
				ret.push(te);
			}
			te["_zipIdx"] = _zipIdx;
		}
		// FIXME: should we consider stripping these properties?
		return ret;
	}

	// the main exectuor
	d.query = function(query, root){
		//	summary:
		//		returns nodes which match the given CSS3 selector, searching the
		//		entire document by default but optionally taking a node to scope
		//		the search by. Returns an instance of dojo.NodeList.
		//	description:
		//		dojo.query() is the swiss army knife of DOM node manipulation in
		//		Dojo. Much like Prototype's "$$" (bling-bling) function or JQuery's
		//		"$" function, dojo.query provides robust, high-performance
		//		CSS-based node selector support with the option of scoping searches
		//		to a particular sub-tree of a document.
		//
		//		Supported Selectors:
		//		--------------------
		//
		//		dojo.query() supports a rich set of CSS3 selectors, including:
		//
		//			* class selectors (e.g., ".foo")
		//			* node type selectors like "span"
		//			* " " descendant selectors
		//			* ">" child element selectors 
		//			* "#foo" style ID selectors
		//			* "*" universal selector
		//			* attribute queries:
		//				* "[foo]" attribute presence selector
		//				* "[foo='bar']" attribute value exact match
		//				* "[foo~='bar']" attribute value list item match
		//				* "[foo^='bar']" attribute start match
		//				* "[foo$='bar']" attribute end match
		//				* "[foo*='bar']" attribute substring match
		//			* ":first-child", ":last-child" positional selectors
		//			* ":nth-child(n)", ":nth-child(2n+1)" style positional calculations
		//			* ":nth-child(even)", ":nth-child(odd)" positional selectors
		//			* ":not(...)" negation pseudo selectors
		//
		//		Any legal combination of those selector types as per the CSS 3 sepc
		//		will work with dojo.query(), including compound selectors (","
		//		delimited). Very complex and useful searches can be constructed
		//		with this palette of selectors and when combined with functions for
		//		maniplation presented by dojo.NodeList, many types of DOM
		//		manipulation operations become very straightforward.
		//		
		//		Unsupported Selectors:
		//		--------------------
		//
		//		While dojo.query handles many CSS3 selectors, some fall outside of
		//		what's resaonable for a programmatic node querying engine to
		//		handle. Currently unsupported selectors include:
		//		
		//			* namespace-differentiated selectors of any form
		//			* "~", the immediately preceeded-by sibling selector
		//			* "+", the preceeded-by sibling selector
		//			* all "::" pseduo-element selectors
		//			* certain pseduo-selectors which don't get a lot of day-to-day use:
		//				* :root, :lang(), :target, :focus
		//			* all visual and state selectors:
		//				* :root, :active, :hover, :visisted, :link, :enabled, :disabled, :checked
		//			* :*-of-type pseudo selectors
		//		
		//		dojo.query and XML Documents:
		//		-----------------------------
		//		FIXME
		//		
		//	query: String
		//		The CSS3 expression to match against. For details on the syntax of
		//		CSS3 selectors, see:
		//			http://www.w3.org/TR/css3-selectors/#selectors
		//	root: String|DOMNode?
		//		A node (or string ID of a node) to scope the search from. Optional.
		//	returns:
		//		An instance of dojo.NodeList. Many methods are available on
		//		NodeLists for searching, iterating, manipulating, and handling
		//		events on the matched nodes in the returned list.

		// return is always an array
		// NOTE: elementsById is not currently supported
		// NOTE: ignores xpath-ish queries for now
		if(query.constructor == d.NodeList){
			return query;
		}
		if(!d.isString(query)){
			return new d.NodeList(query);  // dojo.NodeList
		}
		if(d.isString(root)){
			root = d.byId(root);
		}

		// FIXME: should support more methods on the return than the stock array.
		return _zip(getQueryFunc(query)(root||d.doc));
	}

	/*
	// exposing these was a mistake
	d.query.attrs = attrs;
	d.query.pseudos = pseudos;
	*/

	// one-off function for filtering a NodeList based on a simple selector
	d._filterQueryResult = function(nodeList, simpleFilter){
		var tnl = new d.NodeList();
		var ff = (simpleFilter) ? getFilterFunc(getQueryParts(simpleFilter)[0]) : function(){ return true;  };
		for(var x=0, te;  te = nodeList[x];  x++){
			if(ff(te)){ tnl.push(te);  }
		}
		return tnl;
	}
})();

}

if(!dojo._hasResource["dojo._base.xhr"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.xhr"] = true;
dojo.provide("dojo._base.xhr");





(function(){
	var _d = dojo;
	function setValue(/*Object*/obj, /*String*/name, /*String*/value){
		//summary:
		//		For the nameed property in object, set the value. If a value
		//		already exists and it is a string, convert the value to be an
		//		array of values.
		var val = obj[name];
		if(_d.isString(val)){
			obj[name] = [val, value];
		}else if(_d.isArray(val)){
			val.push(value);
		}else{
			obj[name] = value;
		}
	}

	dojo.formToObject = function(/*DOMNode||String*/ formNode){
		// summary:
		//		dojo.formToObject returns the values encoded in an HTML form as
		//		string properties in an object which it then returns. Disabled form
		//		elements, buttons, and other non-value form elements are skipped.
		//		Multi-select elements are returned as an array of string values.
		// description:
		//		This form:
		//
		//			<form id="test_form">
		//				<input type="text" name="blah" value="blah">
		//				<input type="text" name="no_value" value="blah" disabled>
		//				<input type="button" name="no_value2" value="blah">
		//				<select type="select" multiple name="multi" size="5">
		//					<option value="blah">blah</option>
		//					<option value="thud" selected>thud</option>
		//					<option value="thonk" selected>thonk</option>
		//				</select>
		//			</form>
		//
		//		yields this object structure as the result of a call to
		//		formToObject():
		//
		//			{ 
		//				blah: "blah",
		//				multi: [
		//					"thud",
		//					"thonk"
		//				]
		//			};
	
		var ret = {};
		var iq = "input:not([type=file]):not([type=submit]):not([type=image]):not([type=reset]):not([type=button]), select, textarea";
		_d.query(iq, formNode).filter(function(node){
			return (!node.disabled);
		}).forEach(function(item){
			var _in = item.name;
			var type = (item.type||"").toLowerCase();
			if(type == "radio" || type == "checkbox"){
				if(item.checked){ setValue(ret, _in, item.value);  }
			}else if(item.multiple){
				ret[_in] = [];
				_d.query("option", item).forEach(function(opt){
					if(opt.selected){
						setValue(ret, _in, opt.value);
					}
				});
			}else{ 
				setValue(ret, _in, item.value);
				if(type == "image"){
					ret[_in+".x"] = ret[_in+".y"] = ret[_in].x = ret[_in].y = 0;
				}
			}
		});
		return ret;  // Object
	}

	dojo.objectToQuery = function(/*Object*/ map){
		//	summary:
		//		takes a key/value mapping object and returns a string representing
		//		a URL-encoded version of that object.
		//	example:
		//		this object:
		//
		//		|	{ 
		//		|		blah: "blah",
		//		|		multi: [
		//		|			"thud",
		//		|			"thonk"
		//		|		]
		//		|	};
		//
		//	yeilds the following query string:
		//	
		//	|	"blah=blah&multi=thud&multi=thonk"


		// FIXME: need to implement encodeAscii!!
		var ec = encodeURIComponent;
		var ret = "";
		var backstop = {};
		for(var x in map){
			if(map[x] != backstop[x]){
				if(_d.isArray(map[x])){
					for(var y=0;  y<map[x].length;  y++){
						ret += ec(x) + "=" + ec(map[x][y]) + "&";
					}
				}else{
					ret += ec(x) + "=" + ec(map[x]) + "&";
				}
			}
		}
		if(ret.length && ret.charAt(ret.length-1) == "&"){
			ret = ret.substr(0, ret.length-1);
		}
		return ret;  // String
	}

	dojo.formToQuery = function(/*DOMNode||String*/ formNode){
		// summary:
		//		return URL-encoded string representing the form passed as either a
		//		node or string ID identifying the form to serialize
		return _d.objectToQuery(_d.formToObject(formNode));  // String
	}

	dojo.formToJson = function(/*DOMNode||String*/ formNode, /*Boolean?*/prettyPrint){
		// summary:
		//		return a serialized JSON string from a form node or string
		//		ID identifying the form to serialize
		return _d.toJson(_d.formToObject(formNode), prettyPrint);  // String
	}

	dojo.queryToObject = function(/*String*/ str){
		// summary:
		//		returns an object representing a de-serialized query section of a
		//		URL. Query keys with multiple values are returned in an array.
		// description:
		//		This string:
		//
		//			"foo=bar&foo=baz&thinger=%20spaces%20=blah&zonk=blarg&"
		//		
		//		returns this object structure:
		//
		//			{
		//				foo: [ "bar", "baz" ],
		//				thinger: " spaces =blah",
		//				zonk: "blarg"
		//			}
		//	
		//		Note that spaces and other urlencoded entities are correctly
		//		handled.

		// FIXME: should we grab the URL string if we're not passed one?
		var ret = {};
		var qp = str.split("&");
		var dc = decodeURIComponent;
		_d.forEach(qp, function(item){
			if(item.length){
				var parts = item.split("=");
				var name = dc(parts.shift());
				var val = dc(parts.join("="));
				if(_d.isString(ret[name])){
					ret[name] = [ret[name]];
				}
				if(_d.isArray(ret[name])){
					ret[name].push(val);
				}else{
					ret[name] = val;
				}
			}
		});
		return ret;  // Object
	}

	/*
		from refactor.txt:

		all bind() replacement APIs take the following argument structure:

			{
				url: "blah.html",

				// all below are optional, but must be supported in some form by
				// every IO API
				timeout: 1000, // milliseconds
				handleAs: "text", // replaces the always-wrong "mimetype"
				content: { 
					key: "value"
				},

				// browser-specific, MAY be unsupported
				sync: true, // defaults to false
				form: dojo.byId("someForm") 
			}
	*/

	// need to block async callbacks from snatching this thread as the result
	// of an async callback might call another sync XHR, this hangs khtml forever
	// must checked by watchInFlight()

	dojo._blockAsync = false;

	dojo._contentHandlers = {
		"text": function(xhr){ return xhr.responseText;  },
		"json": function(xhr){
			if(!djConfig.usePlainJson){
				console.debug("Consider using mimetype:text/json-comment-filtered"
					+ " to avoid potential security issues with JSON endpoints"
					+ " (use djConfig.usePlainJson=true to turn off this message)");
			}
			return _d.fromJson(xhr.responseText);
		},
		"json-comment-filtered": function(xhr){ 
			// NOTE: we provide the json-comment-filtered option as one solution to
			// the "JavaScript Hijacking" issue noted by Fortify and others. It is
			// not appropriate for all circumstances.

			var value = xhr.responseText;
			var cStartIdx = value.indexOf("\/*");
			var cEndIdx = value.lastIndexOf("*\/");
			if(cStartIdx == -1 || cEndIdx == -1){
				throw new Error("JSON was not comment filtered");
			}
			return _d.fromJson(value.substring(cStartIdx+2, cEndIdx));
		},
		"javascript": function(xhr){ 
			// FIXME: try Moz and IE specific eval variants?
			return _d.eval(xhr.responseText);
		},
		"xml": function(xhr){ 
			if(_d.isIE && !xhr.responseXML){
				_d.forEach(["MSXML2", "Microsoft", "MSXML", "MSXML3"], function(i){
					try{
						var doc = new ActiveXObject(prefixes[i]+".XMLDOM");
						doc.async = false;
						doc.loadXML(xhr.responseText);
						return doc;	 //	DOMDocument
					}catch(e){ /* squelch */ };
				});
			}else{
				return xhr.responseXML;
			}
		}
	};

	dojo._contentHandlers["json-comment-optional"] = function(xhr){
		var handlers = _d._contentHandlers;
		try{
			return handlers["json-comment-filtered"](xhr);
		}catch(e){
			return handlers["json"](xhr);
		}
	};

	/*=====
	dojo.__ioArgs = function(kwArgs){
		//	url: String
		//		URL to server endpoint.
		//	content: Object?
		//		Contains properties with string values. These
		//		properties will be serialized as name1=value2 and
		//		passed in the request.
		//	timeout: Integer?
		//		Milliseconds to wait for the response. If this time
		//		passes, the then error callbacks are called.
		//	form: DOMNode?
		//		DOM node for a form. Used to extract the form values
		//		and send to the server.
		//	preventCache: Boolean?
		//		Default is false. If true, then a
		//		"dojo.preventCache" parameter is sent in the request
		//		with a value that changes with each request
		//		(timestamp). Useful only with GET-type requests.
		//	handleAs: String?
		//		Acceptable values depend on the type of IO
		//		transport (see specific IO calls for more information).
		//	load: Function?
		//		function(response, ioArgs){}. response is an Object, ioArgs
		//		is of type dojo.__ioCallbackArgs. The load function will be
		//		called on a successful response.
		//	error: Function?
		//		function(response, ioArgs){}. response is an Object, ioArgs
		//		is of type dojo.__ioCallbackArgs. The error function will
		//		be called in an error case. 
		//	handle: Function
		//		function(response, ioArgs){}. response is an Object, ioArgs
		//		is of type dojo.__ioCallbackArgs. The handle function will
		//		be called in either the successful or error case.  For
		//		the load, error and handle functions, the ioArgs object
		//		will contain the following properties: 
	}
	=====*/

	/*=====
	dojo.__ioCallbackArgs = function(kwArgs){
		//	args: Object
		//		the original object argument to the IO call.
		//	xhr: XMLHttpRequest
		//		For XMLHttpRequest calls only, the
		//		XMLHttpRequest object that was used for the
		//		request.
		//	url: String
		//		The final URL used for the call. Many times it
		//		will be different than the original args.url
		//		value.
		//	query: String
		//		For non-GET requests, the
		//		name1=value1&name2=value2 parameters sent up in
		//		the request.
		//	handleAs: String
		//		The final indicator on how the response will be
		//		handled.
		//	id: String
		//		For dojo.io.script calls only, the internal
		//		script ID used for the request.
		//	canDelete: Boolean
		//		For dojo.io.script calls only, indicates
		//		whether the script tag that represents the
		//		request can be deleted after callbacks have
		//		been called. Used internally to know when
		//		cleanup can happen on JSONP-type requests.
		//	json: Object
		//		For dojo.io.script calls only: holds the JSON
		//		response for JSONP-type requests. Used
		//		internally to hold on to the JSON responses.
		//		You should not need to access it directly --
		//		the same object should be passed to the success
		//		callbacks directly.
	}
	=====*/



	dojo._ioSetArgs = function(/*dojo.__ioArgs*/args,
			/*Function*/canceller,
			/*Function*/okHandler,
			/*Function*/errHandler){
		//	summary: 
		//		sets up the Deferred and ioArgs property on the Deferred so it
		//		can be used in an io call.
		//	args:
		//		The args object passed into the public io call. Recognized properties on
		//		the args object are:
		//	canceller:
		//		The canceller function used for the Deferred object. The function
		//		will receive one argument, the Deferred object that is related to the
		//		canceller.
		//	okHandler:
		//		The first OK callback to be registered with Deferred. It has the opportunity
		//		to transform the OK response. It will receive one argument -- the Deferred
		//		object returned from this function.
		//	errHandler:
		//		The first error callback to be registered with Deferred. It has the opportunity
		//		to do cleanup on an error. It will receive two arguments: error (the 
		//		Error object) and dfd, the Deferred object returned from this function.

		var ioArgs = {args: args, url: args.url};

		//Get values from form if requestd.
		var formObject = null;
		if(args.form){ 
			var form = _d.byId(args.form);
			//IE requires going through getAttributeNode instead of just getAttribute in some form cases, 
			//so use it for all.  See #2844
			var actnNode = form.getAttributeNode("action");
			ioArgs.url = ioArgs.url || (actnNode ? actnNode.value : null);  
			formObject = _d.formToObject(form);
		}

		// set up the query params
		var miArgs = [{}];
	
		if(formObject){
			// potentially over-ride url-provided params w/ form values
			miArgs.push(formObject);
		}
		if(args.content){
			// stuff in content over-rides what's set by form
			miArgs.push(args.content);
		}
		if(args.preventCache){
			miArgs.push({"dojo.preventCache": new Date().valueOf()});
		}
		ioArgs.query = _d.objectToQuery(_d.mixin.apply(null, miArgs));
	
		// .. and the real work of getting the deferred in order, etc.
		ioArgs.handleAs = args.handleAs || "text";
		var d = new _d.Deferred(canceller);
		d.addCallbacks(okHandler, function(error){
			return errHandler(error, d);
		});

		//Support specifying load, error and handle callback functions from the args.
		//For those callbacks, the "this" object will be the args object.
		//The callbacks will get the deferred result value as the
		//first argument and the ioArgs object as the second argument.
		var ld = args.load;
		if(ld && _d.isFunction(ld)){
			d.addCallback(function(value){
				return ld.call(args, value, ioArgs);
			});
		}
		var err = args.error;
		if(err && _d.isFunction(err)){
			d.addErrback(function(value){
				return err.call(args, value, ioArgs);
			});
		}
		var handle = args.handle;
		if(handle && _d.isFunction(handle)){
			d.addBoth(function(value){
				return handle.call(args, value, ioArgs);
			});
		}
		
		d.ioArgs = ioArgs;
	
		// FIXME: need to wire up the xhr object's abort method to something
		// analagous in the Deferred
		return d;
	}

	var _deferredCancel = function(/*Deferred*/dfd){
		//summary: canceller function for dojo._ioSetArgs call.
		
		dfd.canceled = true;
		var xhr = dfd.ioArgs.xhr;
		var _at = (typeof xhr.abort);
		if((_at == "function")||(_at == "unknown")){
			xhr.abort();
		}
		var err = new Error("xhr cancelled");
		err.dojoType = "cancel";
		return err;
	}
	var _deferredOk = function(/*Deferred*/dfd){
		//summary: okHandler function for dojo._ioSetArgs call.

		return _d._contentHandlers[dfd.ioArgs.handleAs](dfd.ioArgs.xhr);
	}
	var _deferError = function(/*Error*/error, /*Deferred*/dfd){
		//summary: errHandler function for dojo._ioSetArgs call.
		
		// console.debug("xhr error in:", dfd.ioArgs.xhr);
		console.debug(error);
		return error;
	}

	var _makeXhrDeferred = function(/*dojo.__xhrArgs*/args){
		//summary: makes the Deferred object for this xhr request.
		var dfd = _d._ioSetArgs(args, _deferredCancel, _deferredOk, _deferError);
		//Pass the args to _xhrObj, to allow xhr iframe proxy interceptions.
		dfd.ioArgs.xhr = _d._xhrObj(dfd.ioArgs.args);
		return dfd;
	}

	// avoid setting a timer per request. It degrades performance on IE
	// something fierece if we don't use unified loops.
	var _inFlightIntvl = null;
	var _inFlight = [];
	var _watchInFlight = function(){
		//summary: 
		//		internal method that checks each inflight XMLHttpRequest to see
		//		if it has completed or if the timeout situation applies.
		
		var now = (new Date()).getTime();
		// make sure sync calls stay thread safe, if this callback is called
		// during a sync call and this results in another sync call before the
		// first sync call ends the browser hangs
		if(!_d._blockAsync){
			// we need manual loop because we often modify _inFlight (and therefore 'i') while iterating
			// note: the second clause is an assigment on purpose, lint may complain
			for(var i=0, tif;  (i<_inFlight.length)&&(tif=_inFlight[i]);  i++){
				var dfd = tif.dfd;
				try{
					if(!dfd || dfd.canceled || !tif.validCheck(dfd)){
						_inFlight.splice(i--, 1);  
					}else if(tif.ioCheck(dfd)){
						_inFlight.splice(i--, 1);
						tif.resHandle(dfd);
					}else if(dfd.startTime){
						//did we timeout?
						if(dfd.startTime + (dfd.ioArgs.args.timeout||0) < now){
							_inFlight.splice(i--, 1);
							var err = new Error("timeout exceeded");
							err.dojoType = "timeout";
							dfd.errback(err);
							//Cancel the request so the io module can do appropriate cleanup.
							dfd.cancel();
						}
					}
				}catch(e){
					// FIXME: make sure we errback!
					console.debug(e);
					dfd.errback(new Error("_watchInFlightError!"));
				}
			}
		}

		if(!_inFlight.length){
			clearInterval(_inFlightIntvl);
			_inFlightIntvl = null;
			return;
		}

	}

	dojo._ioCancelAll = function(){
		//summary: Cancels all pending IO requests, regardless of IO type
		//(xhr, script, iframe).
		try{
			_d.forEach(_inFlight, function(i){
				i.dfd.cancel();
			});
		}catch(e){/*squelch*/}
	}

	//Automatically call cancel all io calls on unload
	//in IE for trac issue #2357.
	if(_d.isIE){
		_d.addOnUnload(_d._ioCancelAll);
	}

	_d._ioWatch = function(/*Deferred*/dfd,
		/*Function*/validCheck,
		/*Function*/ioCheck,
		/*Function*/resHandle){
		//summary: watches the io request represented by dfd to see if it completes.
		//dfd:
		//		The Deferred object to watch.
		//validCheck:
		//		Function used to check if the IO request is still valid. Gets the dfd
		//		object as its only argument.
		//ioCheck:
		//		Function used to check if basic IO call worked. Gets the dfd
		//		object as its only argument.
		//resHandle:
		//		Function used to process response. Gets the dfd
		//		object as its only argument.
		if(dfd.ioArgs.args.timeout){
			dfd.startTime = (new Date()).getTime();
		}
		_inFlight.push({dfd: dfd, validCheck: validCheck, ioCheck: ioCheck, resHandle: resHandle});
		if(!_inFlightIntvl){
			_inFlightIntvl = setInterval(_watchInFlight, 50);
		}
		_watchInFlight();  // handle sync requests
	}

	var _defaultContentType = "application/x-www-form-urlencoded";

	var _validCheck = function(/*Deferred*/dfd){
		return dfd.ioArgs.xhr.readyState;  //boolean
	}
	var _ioCheck = function(/*Deferred*/dfd){
		return 4 == dfd.ioArgs.xhr.readyState;  //boolean
	}
	var _resHandle = function(/*Deferred*/dfd){
		if(_d._isDocumentOk(dfd.ioArgs.xhr)){
			dfd.callback(dfd);
		}else{
			dfd.errback(new Error("bad http response code:" + dfd.ioArgs.xhr.status));
		}
	}

	var _doIt = function(/*String*/type, /*Deferred*/dfd){
		// IE 6 is a steaming pile. It won't let you call apply() on the native function (xhr.open).
		// workaround for IE6's apply() "issues"
		var ioArgs = dfd.ioArgs;
		var args = ioArgs.args;
		ioArgs.xhr.open(type, ioArgs.url, args.sync !== true, args.user || undefined, args.password || undefined);
		if(args.headers){
			for(var hdr in args.headers){
				if(hdr.toLowerCase() === "content-type" && !args.contentType){
					args.contentType = args.headers[hdr];
				}else{
					ioArgs.xhr.setRequestHeader(hdr, args.headers[hdr]);
				}
			}
		}
		// FIXME: is this appropriate for all content types?
		ioArgs.xhr.setRequestHeader("Content-Type", (args.contentType||_defaultContentType));
		// FIXME: set other headers here!
		try{
			ioArgs.xhr.send(ioArgs.query);
		}catch(e){
			dfd.cancel();
		}
		_d._ioWatch(dfd, _validCheck, _ioCheck, _resHandle);
		return dfd;  //Deferred
	}

	dojo._ioAddQueryToUrl = function(/*dojo.__ioCallbackArgs*/ioArgs){
		//summary: Adds query params discovered by the io deferred construction to the URL.
		//Only use this for operations which are fundamentally GET-type operations.
		if(ioArgs.query.length){
			ioArgs.url += (ioArgs.url.indexOf("?") == -1 ? "?" : "&") + ioArgs.query;
			ioArgs.query = null;
		}		
	}

	/*=====
	dojo.__xhrArgs = function(kwArgs){
		//	summary:
		//		In addition to the properties listed for the dojo.__ioArgs type,
		//		the following properties are allowed for dojo.xhr* methods.
		//	handleAs: 
		//		String. Acceptable values are:
		//			"text" (default)
		//			"json"
		//			"json-comment-optional"
		//			"json-comment-filtered"
		//			"javascript"
		//			"xml"
		//	sync:
		//		Boolean. false is default. Indicates whether the request should
		//		be a synchronous (blocking) request.
		//	headers:
		//		Object. Additional HTTP headers to send in the request.
	}
	=====*/

	dojo.xhrGet = function(/*dojo.__xhrArgs*/ args){
		//	summary: 
		//		Sends an HTTP GET request to the server.
		var dfd = _makeXhrDeferred(args);
		_d._ioAddQueryToUrl(dfd.ioArgs);
		return _doIt("GET", dfd);  // dojo.Deferred
	}

	dojo.xhrPost = function(/*dojo.__xhrArgs*/ args){
		//summary: 
		//		Sends an HTTP POST request to the server.
		return _doIt("POST", _makeXhrDeferred(args));  // dojo.Deferred
	}

	dojo.rawXhrPost = function(/*dojo.__xhrArgs*/ args){
		//	summary:
		//		Sends an HTTP POST request to the server. In addtion to the properties
		//		listed for the dojo.__xhrArgs type, the following property is allowed:
		//	postData:
		//		String. The raw data to send in the body of the POST request.
		var dfd = _makeXhrDeferred(args);
		dfd.ioArgs.query = args.postData;
		return _doIt("POST", dfd);  // dojo.Deferred
	}

	dojo.xhrPut = function(/*dojo.__xhrArgs*/ args){
		//	summary:
		//		Sends an HTTP PUT request to the server.
		return _doIt("PUT", _makeXhrDeferred(args));  // dojo.Deferred
	}

	dojo.rawXhrPut = function(/*dojo.__xhrArgs*/ args){
		//	summary:
		//		Sends an HTTP PUT request to the server. In addtion to the properties
		//		listed for the dojo.__xhrArgs type, the following property is allowed:
		//	putData:
		//		String. The raw data to send in the body of the PUT request.
		var dfd = _makeXhrDeferred(args);
		var ioArgs = dfd.ioArgs;
		if(args["putData"]){
			ioArgs.query = args.putData;
			args.putData = null;
		}
		return _doIt("PUT", dfd);  // dojo.Deferred
	}

	dojo.xhrDelete = function(/*dojo.__xhrArgs*/ args){
		//	summary:
		//		Sends an HTTP DELETE request to the server.
		var dfd = _makeXhrDeferred(args);
		_d._ioAddQueryToUrl(dfd.ioArgs);
		return _doIt("DELETE", dfd);  // dojo.Deferred
	}

	/*
	dojo.wrapForm = function(formNode){
		//summary:
		//		A replacement for FormBind, but not implemented yet.

		// FIXME: need to think harder about what extensions to this we might
		// want. What should we allow folks to do w/ this? What events to
		// set/send?
		throw new Error("dojo.wrapForm not yet implemented");
	}
	*/
})();

}

if(!dojo._hasResource["dojo._base.fx"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo._base.fx"] = true;
dojo.provide("dojo._base.fx");






/*
	Animation losely package based on Dan Pupius' work, contributed under CLA: 
		http://pupius.co.uk/js/Toolkit.Drawing.js
*/

dojo._Line = function(/*int*/ start, /*int*/ end){
	//	summary:
	//		dojo._Line is the object used to generate values from a start value
	//		to an end value
	//	start: int
	//		Beginning value for range
	//	end: int
	//		Ending value for range
	this.start = start;
	this.end = end;
	this.getValue = function(/*float*/ n){
		//	summary: returns the point on the line
		//	n: a floating point number greater than 0 and less than 1
		return ((this.end - this.start) * n) + this.start;  // Decimal
	}
}

dojo.declare("dojo._Animation", null, {
	//	summary
	//		A generic animation object that fires callbacks into it's handlers
	//		object at various states
	//
	constructor: function(/*Object*/ args){
		dojo.mixin(this, args);
		if(dojo.isArray(this.curve)){
			/* curve: Array
				pId: a */
			this.curve = new dojo._Line(this.curve[0], this.curve[1]);
		}
	},
	
	// duration: Integer
	//	The time in milliseonds the animation will take to run
	duration: 1000,

/*=====
	// curve: dojo._Line||Array
	//	A two element array of start and end values, or a dojo._Line instance to be
	//	used in the Animation. 
	curve: null,

	// easing: Function
	//	A Function to adjust the acceleration (or deceleration) of the progress 
	//	across a dojo._Line
	easing: null,
=====*/

	// repeat: Integer
	//	The number of times to loop the animation
	repeat: 0,

	// rate: Integer
	//	the time in milliseconds to wait before advancing to next frame 
	//	(used as a fps timer: rate/1000 = fps)
	rate: 10 /* 100 fps */,

/*===== 
	// delay: Integer
	// 	The time in milliseconds to wait before starting animation after it has been .play()'ed
	delay: null,

	// events
	//
	// beforeBegin: Event
	//	Synthetic event fired before a dojo._Animation begins playing (synhcronous)
	beforeBegin: null,

	// onBegin: Event
	//	Synthetic event fired as a dojo._Animation begins playing (useful?)
	onBegin: null,

	// onAnimate: Event
	//	Synthetic event fired at each interval of a dojo._Animation
	onAnimate: null,

	// onEnd: Event
	//	Synthetic event fired after the final frame of a dojo._Animation
	onEnd: null,

	// ???
	onPlay: null,

	// onPause: Event
	//	Synthetic event fired when a dojo._Animation is paused
	onPause: null,

	// onStop: Event
	//	Synthetic event fires when a dojo._Animation is stopped
	onStop: null,

=====*/

	_percent: 0,
	_startRepeatCount: 0,

	fire: function(/*Event*/ evt, /*Array?*/ args){
		//	summary:
		//		Convenience function.  Fire event "evt" and pass it the
		//		arguments specified in "args".
		//	evt:
		//		The event to fire.
		//	args:
		//		The arguments to pass to the event.
		if(this[evt]){
			this[evt].apply(this, args||[]);
		}
		return this;  // dojo._Animation
	},

	play: function(/*int?*/ delay, /*Boolean?*/ gotoStart){
		// summary:
		//		Start the animation.
		// delay:
		//		How many milliseconds to delay before starting.
		// gotoStart:
		//		If true, starts the animation from the beginning;  otherwise,
		//		starts it from its current position.
		var _t = this;
		if(gotoStart){
			_t._stopTimer();
			_t._active = _t._paused = false;
			_t._percent = 0;
		}else if(_t._active && !_t._paused){
			return _t;  // dojo._Animation
		}

		_t.fire("beforeBegin");

		var d = delay||_t.delay;
		var _p = dojo.hitch(_t, "_play", gotoStart);
		if(d > 0){
			setTimeout(_p, d);
			return _t;  // dojo._Animation
		}
		_p();
		return _t;
	},

	_play: function(gotoStart){
		var _t = this;
		_t._startTime = new Date().valueOf();
		if(_t._paused){
			_t._startTime -= _t.duration * _t._percent;
		}
		_t._endTime = _t._startTime + _t.duration;

		_t._active = true;
		_t._paused = false;

		var value = _t.curve.getValue(_t._percent);
		if(!_t._percent){
			if(!_t._startRepeatCount){
				_t._startRepeatCount = _t.repeat;
			}
			_t.fire("onBegin", [value]);
		}

		_t.fire("onPlay", [value]);

		_t._cycle();
		return _t;  // dojo._Animation
	},

	pause: function(){
		// summary: Pauses a running animation.
		this._stopTimer();
		if(!this._active){ return this;  /*dojo._Animation*/}
		this._paused = true;
		this.fire("onPause", [this.curve.getValue(this._percent)]);
		return this;  // dojo._Animation
	},

	gotoPercent: function(/*Decimal*/ percent, /*Boolean?*/ andPlay){
		//	summary:
		//		Sets the progress of the animation.
		//	percent:
		//		A percentage in decimal notation (between and including 0.0 and 1.0).
		//	andPlay:
		//		If true, play the animation after setting the progress.
		this._stopTimer();
		this._active = this._paused = true;
		this._percent = percent;
		if(andPlay){ this.play();  }
		return this;  // dojo._Animation
	},

	stop: function(/*boolean?*/ gotoEnd){
		// summary: Stops a running animation.
		// gotoEnd: If true, the animation will end.
		if(!this._timer){ return;  }
		this._stopTimer();
		if(gotoEnd){
			this._percent = 1;
		}
		this.fire("onStop", [this.curve.getValue(this._percent)]);
		this._active = this._paused = false;
		return this;  // dojo._Animation
	},

	status: function(){
		// summary: Returns a string token representation of the status of
		//			the animation, one of: "paused", "playing", "stopped"
		if(this._active){
			return this._paused ? "paused" : "playing";  // String
		}
		return "stopped";  // String
	},

	_cycle: function(){
		var _t = this;
		if(_t._active){
			var curr = new Date().valueOf();
			var step = (curr - _t._startTime) / (_t._endTime - _t._startTime);

			if(step >= 1){
				step = 1;
			}
			_t._percent = step;

			// Perform easing
			if(_t.easing){
				step = _t.easing(step);
			}

			_t.fire("onAnimate", [_t.curve.getValue(step)]);

			if(step < 1){
				_t._startTimer();
			}else{
				_t._active = false;

				if(_t.repeat > 0){
					_t.repeat--;
					_t.play(null, true);
				}else if(_t.repeat == -1){
					_t.play(null, true);
				}else{
					if(_t._startRepeatCount){
						_t.repeat = _t._startRepeatCount;
						_t._startRepeatCount = 0;
					}
				}
				_t._percent = 0;
				_t.fire("onEnd");
			}
		}
		return _t;  // dojo._Animation
	}
});

(function(){
	var d = dojo;
	var ctr = 0;
	var _globalTimerList = [];
	var runner = {
		run: function(){}
	};
	var timer = null;
	dojo._Animation.prototype._startTimer = function(){
		// this._timer = setTimeout(dojo.hitch(this, "_cycle"), this.rate);
		if(!this._timer){
			this._timer = dojo.connect(runner, "run", this, "_cycle");
			ctr++;
		}
		if(!timer){
			timer = setInterval(dojo.hitch(runner, "run"), this.rate);
		}
	};

	dojo._Animation.prototype._stopTimer = function(){
		dojo.disconnect(this._timer);
		this._timer = null;
		ctr--;
		if(!ctr){
			clearInterval(timer);
			timer = null;
		}
	};

	var _makeFadeable = (d.isIE) ? function(node){
		// only set the zoom if the "tickle" value would be the same as the
		// default
		var ns = node.style;
		if(!ns.zoom.length && d.style(node, "zoom") == "normal"){
			// make sure the node "hasLayout"
			// NOTE: this has been tested with larger and smaller user-set text
			// sizes and works fine
			ns.zoom = "1";
			// node.style.zoom = "normal";
		}
		// don't set the width to auto if it didn't already cascade that way.
		// We don't want to f anyones designs
		if(!ns.width.length && d.style(node, "width") == "auto"){
			ns.width = "auto";
		}
	} : function(){};

	dojo._fade = function(/*Object*/ args){
		//	summary: 
		//		Returns an animation that will fade the node defined by
		//		args.node from the start to end values passed (args.start
		//		args.end) (end is mandatory, start is optional)

		args.node = d.byId(args.node);
		var fArgs = d.mixin({ properties: {} }, args);
		var props = (fArgs.properties.opacity = {});
		props.start = !("start" in fArgs) ?
			function(){ return Number(d.style(fArgs.node, "opacity"));  } : fArgs.start;
		props.end = fArgs.end;

		var anim = d.animateProperty(fArgs);
		d.connect(anim, "beforeBegin", d.partial(_makeFadeable, fArgs.node));

		return anim;  // dojo._Animation
	}

	/*=====
	dojo.__fadeArgs = function(kwArgs){
		//	duration: Integer?
		//		Duration of the animation in milliseconds.
		// easing: Function?
		//		An easing function.
	}
	=====*/

	dojo.fadeIn = function(/*dojo.__fadeArgs*/ args){
		// summary: 
		//		Returns an animation that will fade node defined in 'args' from
		//		its current opacity to fully opaque.
		return d._fade(d.mixin({ end: 1 }, args));  // dojo._Animation
	}

	dojo.fadeOut = function(/*dojo.__fadeArgs*/  args){
		// summary: 
		//		Returns an animation that will fade node defined in 'args'
		//		from its current opacity to fully transparent.
		return d._fade(d.mixin({ end: 0 }, args));  // dojo._Animation
	}

	dojo._defaultEasing = function(/*Decimal?*/ n){
		// summary: The default easing function for dojo._Animation(s)
		return 0.5 + ((Math.sin((n + 1.5) * Math.PI))/2);
	}

	var PropLine = function(properties){
		this._properties = properties;
		for(var p in properties){
			var prop = properties[p];
			if(prop.start instanceof d.Color){
				// create a reusable temp color object to keep intermediate results
				prop.tempColor = new d.Color();
			}
		}
		this.getValue = function(r){
			var ret = {};
			for(var p in this._properties){
				var prop = this._properties[p];
				var start = prop.start;
				if(start instanceof d.Color){
					ret[p] = d.blendColors(start, prop.end, r, prop.tempColor).toCss();
				}else if(!d.isArray(start)){
					ret[p] = ((prop.end - start) * r) + start + (p != "opacity" ? prop.units||"px" : "");
				}
			}
			return ret;
		}
	}

	dojo.animateProperty = function(/*Object*/ args){
		//	summary: 
		//		Returns an animation that will transition the properties of
		//		node defined in 'args' depending how they are defined in
		//		'args.properties'
		//
		// description:
		//		The foundation of most dojo.fx animations, dojo.AnimateProperty
		//		will take an object of "properties" corresponding to style
		//		properties, and animate them in parallel over a set duration.
		//	
		//		args.node can be a String or a DomNode reference
		//	
		// 	example:
		//	|	dojo.animateProperty({ node: node, duration:2000,
		//	|		properties: {
		//	|			width: { start: '200', end: '400', unit:"px" },
		//	|			height: { start:'200', end: '400', unit:"px" },
		//	|			paddingTop: { start:'5', end:'50', unit:"px" } 
		//	|		}
		//	|	}).play();
		//

		args.node = d.byId(args.node);
		if(!args.easing){ args.easing = d._defaultEasing;  }

		var anim = new d._Animation(args);
		d.connect(anim, "beforeBegin", anim, function(){
			var pm = {};
			for(var p in this.properties){
				// Make shallow copy of properties into pm because we overwrite some values below.
				// In particular if start/end are functions we don't want to overwrite them or
				// the functions won't be called if the animation is reused.
				var prop = (pm[p] = d.mixin({}, this.properties[p]));

				if(d.isFunction(prop.start)){
					prop.start = prop.start();
				}
				if(d.isFunction(prop.end)){
					prop.end = prop.end();
				}

				var isColor = (p.toLowerCase().indexOf("color") >= 0);
				function getStyle(node, p){
					// dojo.style(node, "height") can return "auto" or "" on IE;  this is more reliable:
					var v = ({height: node.offsetHeight, width: node.offsetWidth})[p];
					if(v !== undefined){ return v;  }
					v = d.style(node, p);
					return (p=="opacity") ? Number(v) : parseFloat(v);
				}
				if(!("end" in prop)){
					prop.end = getStyle(this.node, p);
				}else if(!("start" in prop)){
					prop.start = getStyle(this.node, p);
				}

				if(isColor){
					// console.debug("it's a color!");
					prop.start = new d.Color(prop.start);
					prop.end = new d.Color(prop.end);
				}else{
					prop.start = (p == "opacity") ? Number(prop.start) : parseFloat(prop.start);
				}
				// console.debug("start:", prop.start);
				// console.debug("end:", prop.end);
			}
			this.curve = new PropLine(pm);
		});
		d.connect(anim, "onAnimate", anim, function(propValues){
			// try{
			for(var s in propValues){
				// console.debug(s, propValues[s], this.node.style[s]);
				d.style(this.node, s, propValues[s]);
				// this.node.style[s] = propValues[s];
			}
			// }catch(e){ console.debug(dojo.toJson(e));  }
		});
		return anim;  // dojo._Animation
	}
})();

}
/*
	Copyright (c) 2004-2007, The Dojo Foundation
	All Rights Reserved.

	Licensed under the Academic Free License version 2.1 or above OR the
	modified BSD license. For more information on Dojo licensing, see:

		http://dojotoolkit.org/book/dojo-book-0-9/introduction/licensing
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(!dojo._hasResource["dijit._base.focus"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.focus"] = true;
dojo.provide("dijit._base.focus");

// summary:
//		These functions are used to query or set the focus and selection.
//
//		Also, they trace when widgets become actived/deactivated,
//		so that the widget can fire _onFocus/_onBlur events.
//		"Active" here means something similar to "focused", but
//		"focus" isn't quite the right word because we keep track of
//		a whole stack of "active" widgets.  Example:  Combobutton --> Menu -->
//		MenuItem.   The onBlur event for Combobutton doesn't fire due to focusing
//		on the Menu or a MenuItem, since they are considered part of the
//		Combobutton widget.  It only happens when focus is shifted
//		somewhere completely different.

dojo.mixin(dijit,
{
	// _curFocus: DomNode
	//		Currently focused item on screen
	_curFocus: null,

	// _prevFocus: DomNode
	//		Previously focused item on screen
	_prevFocus: null,

	isCollapsed: function(){
		// summary: tests whether the current selection is empty
		var _window = dojo.global;
		var _document = dojo.doc;
		if(_document.selection){ // IE
			return !_document.selection.createRange().text;  // Boolean
		}else if(_window.getSelection){
			var selection = _window.getSelection();
			if(dojo.isString(selection)){ // Safari
				return !selection;  // Boolean
			}else{ // Mozilla/W3
				return selection.isCollapsed || !selection.toString();  // Boolean
			}
		}
	},

	getBookmark: function(){
		// summary: Retrieves a bookmark that can be used with moveToBookmark to return to the same range
		var bookmark, selection = dojo.doc.selection;
		if(selection){ // IE
			var range = selection.createRange();
			if(selection.type.toUpperCase()=='CONTROL'){
				bookmark = range.length ? dojo._toArray(range) : null;
			}else{
				bookmark = range.getBookmark();
			}
		}else{
			if(dojo.global.getSelection){
				selection = dojo.global.getSelection();
				if(selection){
					var range = selection.getRangeAt(0);
					bookmark = range.cloneRange();
				}
			}else{
				console.debug("No idea how to store the current selection for this browser!");
			}
		}
		return bookmark;  // Array
	},

	moveToBookmark: function(/*Object*/bookmark){
		// summary: Moves current selection to a bookmark
		// bookmark: this should be a returned object from dojo.html.selection.getBookmark()
		var _document = dojo.doc;
		if(_document.selection){ // IE
			var range;
			if(dojo.isArray(bookmark)){
				range = _document.body.createControlRange();
				dojo.forEach(bookmark, range.addElement);
			}else{
				range = _document.selection.createRange();
				range.moveToBookmark(bookmark);
			}
			range.select();
		}else{ //Moz/W3C
			var selection = dojo.global.getSelection && dojo.global.getSelection();
			if(selection && selection.removeAllRanges){
				selection.removeAllRanges();
				selection.addRange(bookmark);
			}else{
				console.debug("No idea how to restore selection for this browser!");
			}
		}
	},

	getFocus: function(/*Widget*/menu, /*Window*/ openedForWindow){
		// summary:
		//	Returns the current focus and selection.
		//	Called when a popup appears (either a top level menu or a dialog),
		//	or when a toolbar/menubar receives focus
		//
		// menu:
		//	the menu that's being opened
		//
		// openedForWindow:
		//	iframe in which menu was opened
		//
		// returns:
		//	a handle to restore focus/selection

		return {
			// Node to return focus to
			node: menu && dojo.isDescendant(dijit._curFocus, menu.domNode) ? dijit._prevFocus : dijit._curFocus,

			// Previously selected text
			bookmark:
				!dojo.withGlobal(openedForWindow||dojo.global, dijit.isCollapsed) ?
				dojo.withGlobal(openedForWindow||dojo.global, dijit.getBookmark) :
				null,

			openedForWindow: openedForWindow
		};  // Object
	},

	focus: function(/*Object || DomNode */ handle){
		// summary:
		//		Sets the focused node and the selection according to argument.
		//		To set focus to an iframe's content, pass in the iframe itself.
		// handle:
		//		object returned by get(), or a DomNode

		if(!handle){ return;  }

		var node = "node" in handle ? handle.node : handle,		// because handle is either DomNode or a composite object
			bookmark = handle.bookmark,
			openedForWindow = handle.openedForWindow;

		// Set the focus
		// Note that for iframe's we need to use the <iframe> to follow the parentNode chain,
		// but we need to set focus to iframe.contentWindow
		if(node){
			var focusNode = (node.tagName.toLowerCase()=="iframe") ? node.contentWindow : node;
			if(focusNode && focusNode.focus){
				try{
					// Gecko throws sometimes if setting focus is impossible,
					// node not displayed or something like that
					focusNode.focus();
				}catch(e){/*quiet*/}
			}			
			dijit._onFocusNode(node);
		}

		// set the selection
		// do not need to restore if current selection is not empty
		// (use keyboard to select a menu item)
		if(bookmark && dojo.withGlobal(openedForWindow||dojo.global, dijit.isCollapsed)){
			if(openedForWindow){
				openedForWindow.focus();
			}
			try{
				dojo.withGlobal(openedForWindow||dojo.global, moveToBookmark, null, [bookmark]);
			}catch(e){
				/*squelch IE internal error, see http://trac.dojotoolkit.org/ticket/1984 */
			}
		}
	},

	// List of currently active widgets (focused widget and it's ancestors)
	_activeStack: [],

	registerWin: function(/*Window?*/targetWindow){
		// summary:
		//		Registers listeners on the specified window (either the main
		//		window or an iframe) to detect when the user has clicked somewhere.
		//		Anyone that creates an iframe should call this function.

		if(!targetWindow){
			targetWindow = window;
		}

		dojo.connect(targetWindow.document, "onmousedown", null, function(evt){
			dijit._justMouseDowned = true;
			setTimeout(function(){ dijit._justMouseDowned = false;  }, 0);
			dijit._onTouchNode(evt.target||evt.srcElement);
		});
		//dojo.connect(targetWindow, "onscroll", ???);

		// Listen for blur and focus events on targetWindow's body
		var body = targetWindow.document.body || targetWindow.document.getElementsByTagName("body")[0];
		if(body){
			if(dojo.isIE){
				body.attachEvent('onactivate', function(evt){
					if(evt.srcElement.tagName.toLowerCase() != "body"){
						dijit._onFocusNode(evt.srcElement);
					}
				});
				body.attachEvent('ondeactivate', function(evt){ dijit._onBlurNode(evt.srcElement);  });
			}else{
				body.addEventListener('focus', function(evt){ dijit._onFocusNode(evt.target);  }, true);
				body.addEventListener('blur', function(evt){ dijit._onBlurNode(evt.target);  }, true);
			}
		}
		body = null;	 // prevent memory leak (apparent circular reference via closure)
	},

	_onBlurNode: function(/*DomNode*/ node){
		// summary:
		// 		Called when focus leaves a node.
		//		Usually ignored, _unless_ it *isn't* follwed by touching another node,
		//		which indicates that we tabbed off the last field on the page,
		//		in which case every widget is marked inactive
		dijit._prevFocus = dijit._curFocus;
		dijit._curFocus = null;

		var w = dijit.getEnclosingWidget(node);
		if (w && w._setStateClass){
			w._focused = false;
			w._setStateClass();
		}
		if(dijit._justMouseDowned){
			// the mouse down caused a new widget to be marked as active;  this blur event
			// is coming late, so ignore it.
			return;
		}

		// if the blur event isn't followed by a focus event then mark all widgets as inactive.
		if(dijit._clearActiveWidgetsTimer){
			clearTimeout(dijit._clearActiveWidgetsTimer);
		}
		dijit._clearActiveWidgetsTimer = setTimeout(function(){
			delete dijit._clearActiveWidgetsTimer;  dijit._setStack([]);  }, 100);
	},

	_onTouchNode: function(/*DomNode*/ node){
		// summary
		//		Callback when node is focused or mouse-downed

		// ignore the recent blurNode event
		if(dijit._clearActiveWidgetsTimer){
			clearTimeout(dijit._clearActiveWidgetsTimer);
			delete dijit._clearActiveWidgetsTimer;
		}

		// compute stack of active widgets (ex: ComboButton --> Menu --> MenuItem)
		var newStack=[];
		try{
			while(node){
				if(node.dijitPopupParent){
					node=dijit.byId(node.dijitPopupParent).domNode;
				}else if(node.tagName && node.tagName.toLowerCase()=="body"){
					// is this the root of the document or just the root of an iframe?
					if(node===dojo.body()){
						// node is the root of the main document
						break;
					}
					// otherwise, find the iframe this node refers to (can't access it via parentNode,
					// need to do this trick instead) and continue tracing up the document
					node=dojo.query("iframe").filter(function(iframe){ return iframe.contentDocument.body===node;  })[0];
				}else{
					var id = node.getAttribute && node.getAttribute("widgetId");
					if(id){
						newStack.unshift(id);
					}
					node=node.parentNode;
				}
			}
		}catch(e){ /* squelch */ }

		dijit._setStack(newStack);
	},

	_onFocusNode: function(/*DomNode*/ node){
		// summary
		//		Callback when node is focused
		if(node && node.tagName && node.tagName.toLowerCase() == "body"){
			return;
		}
		dijit._onTouchNode(node);
		if(node==dijit._curFocus){ return;  }
		dijit._prevFocus = dijit._curFocus;
		dijit._curFocus = node;
		dojo.publish("focusNode", [node]);

		// handle focus/blur styling
		var w = dijit.getEnclosingWidget(node);
		if (w && w._setStateClass){
			w._focused = true;
			w._setStateClass();
		}
	},

	_setStack: function(newStack){
		// summary
		//	The stack of active widgets has changed.  Send out appropriate events and record new stack

		var oldStack = dijit._activeStack;	 	
		dijit._activeStack = newStack;

		// compare old stack to new stack to see how many elements they have in common
		for(var nCommon=0;  nCommon<Math.min(oldStack.length, newStack.length);  nCommon++){
			if(oldStack[nCommon] != newStack[nCommon]){
				break;
			}
		}

		// for all elements that have gone out of focus, send blur event
		for(var i=oldStack.length-1;  i>=nCommon;  i--){
			var widget = dijit.byId(oldStack[i]);
			if(widget){
				dojo.publish("widgetBlur", [widget]);
				if(widget._onBlur){
					widget._onBlur();
				}
			}
		}

		// for all element that have come into focus, send focus event
		for(var i=nCommon;  i<newStack.length;  i++){
			var widget = dijit.byId(newStack[i]);
			if(widget){
				dojo.publish("widgetFocus", [widget]);
				if(widget._onFocus){
					widget._onFocus();
				}
			}
		}
	}
});

// register top window and all the iframes it contains
dojo.addOnLoad(dijit.registerWin);

}

if(!dojo._hasResource["dijit._base.manager"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.manager"] = true;
dojo.provide("dijit._base.manager");

dojo.declare("dijit.WidgetSet", null, {
	constructor: function(){
		// summary:
		//	A set of widgets indexed by id
		this._hash={};
	},

	add: function(/*Widget*/ widget){
		if(this._hash[widget.id]){
			throw new Error("Tried to register widget with id==" + widget.id + " but that id is already registered");
		}
		this._hash[widget.id]=widget;
	},

	remove: function(/*String*/ id){
		delete this._hash[id];
	},

	forEach: function(/*Function*/ func){
		for(var id in this._hash){
			func(this._hash[id]);
		}
	},

	filter: function(/*Function*/ filter){
		var res = new dijit.WidgetSet();
		this.forEach(function(widget){
			if(filter(widget)){ res.add(widget);  }
		});
		return res;	 	// dijit.WidgetSet
	},

	byId: function(/*String*/ id){
		return this._hash[id];
	},

	byClass: function(/*String*/ cls){
		return this.filter(function(widget){ return widget.declaredClass==cls;  });	 // dijit.WidgetSet
	}
	});

// registry: list of all widgets on page
dijit.registry = new dijit.WidgetSet();

dijit._widgetTypeCtr = {};

dijit.getUniqueId = function(/*String*/widgetType){
	// summary
	//	Generates a unique id for a given widgetType

	var id;
	do{
		id = widgetType + "_" +
			(dijit._widgetTypeCtr[widgetType] !== undefined ?
				++dijit._widgetTypeCtr[widgetType] : dijit._widgetTypeCtr[widgetType] = 0);
	}while(dijit.byId(id));
	return id;  // String
};


if(dojo.isIE){
	// Only run this for IE because we think it's only necessary in that case,
	// and because it causes problems on FF.  See bug #3531 for details.
	dojo.addOnUnload(function(){
		dijit.registry.forEach(function(widget){ widget.destroy();  });
	});
}

dijit.byId = function(/*String|Widget*/id){
	// summary:
	//		Returns a widget by its id, or if passed a widget, no-op (like dojo.byId())
	return (dojo.isString(id)) ? dijit.registry.byId(id) : id;  // Widget
};

dijit.byNode = function(/* DOMNode */ node){
	// summary:
	//		Returns the widget as referenced by node
	return dijit.registry.byId(node.getAttribute("widgetId"));  // Widget
};

dijit.getEnclosingWidget = function(/* DOMNode */ node){
	// summary:
	//		Returns the widget whose dom tree contains node or null if
	//		the node is not contained within the dom tree of any widget
	while(node){
		if(node.getAttribute && node.getAttribute("widgetId")){
			return dijit.registry.byId(node.getAttribute("widgetId"));
		}
		node = node.parentNode;
	}
	return null;
};

}

if(!dojo._hasResource["dijit._base.place"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.place"] = true;
dojo.provide("dijit._base.place");

// ported from dojo.html.util

dijit.getViewport = function(){
	//	summary
	//	Returns the dimensions and scroll position of the viewable area of a browser window

	var _window = dojo.global;
	var _document = dojo.doc;

	// get viewport size
	var w = 0, h = 0;
	if(dojo.isMozilla){
		// mozilla
		// _window.innerHeight includes the height taken by the scroll bar
		// clientHeight is ideal but has DTD issues:
		// #4539: FF reverses the roles of body.clientHeight/Width and documentElement.clientHeight/Width based on the DTD!
		// check DTD to see whether body or documentElement returns the viewport dimensions using this algorithm:
		var minw, minh, maxw, maxh;
		if(_document.body.clientWidth>_document.documentElement.clientWidth){
			minw = _document.documentElement.clientWidth;
			maxw = _document.body.clientWidth;
		}else{
			maxw = _document.documentElement.clientWidth;
			minw = _document.body.clientWidth;
		}
		if(_document.body.clientHeight>_document.documentElement.clientHeight){
			minh = _document.documentElement.clientHeight;
			maxh = _document.body.clientHeight;
		}else{
			maxh = _document.documentElement.clientHeight;
			minh = _document.body.clientHeight;
		}
		w = (maxw > _window.innerWidth) ? minw : maxw;
		h = (maxh > _window.innerHeight) ? minh : maxh;
	}else if(!dojo.isOpera && _window.innerWidth){
		//in opera9, dojo.body().clientWidth should be used, instead
		//of window.innerWidth/document.documentElement.clientWidth
		//so we have to check whether it is opera
		w = _window.innerWidth;
		h = _window.innerHeight;
	}else if(dojo.isIE && _document.documentElement && _document.documentElement.clientHeight){
		w = _document.documentElement.clientWidth;
		h = _document.documentElement.clientHeight;
	}else if(dojo.body().clientWidth){
		// IE5, Opera
		w = dojo.body().clientWidth;
		h = dojo.body().clientHeight;
	}

	// get scroll position
	var scroll = dojo._docScroll();

	return { w: w, h: h, l: scroll.x, t: scroll.y };	 //	object
};

dijit.placeOnScreen = function(
	/* DomNode */	node,
	/* Object */		pos,
	/* Object */		corners,
	/* boolean? */		tryOnly){
	//	summary:
	//		Keeps 'node' in the visible area of the screen while trying to
	//		place closest to pos.x, pos.y. The input coordinates are
	//		expected to be the desired document position.
	//
	//		Set which corner(s) you want to bind to, such as
	//		
	//			placeOnScreen(node, {x: 10, y: 20}, ["TR", "BL"])
	//		
	//		The desired x/y will be treated as the topleft(TL)/topright(TR) or
	//		BottomLeft(BL)/BottomRight(BR) corner of the node. Each corner is tested
	//		and if a perfect match is found, it will be used. Otherwise, it goes through
	//		all of the specified corners, and choose the most appropriate one.
	//		
	//		NOTE: node is assumed to be absolutely or relatively positioned.

	var choices = dojo.map(corners, function(corner){ return { corner: corner, pos: pos };  });

	return dijit._place(node, choices);
}

dijit._place = function(/*DomNode*/ node, /* Array */ choices, /* Function */ layoutNode){
	// summary:
	//		Given a list of spots to put node, put it at the first spot where it fits,
	//		of if it doesn't fit anywhere then the place with the least overflow
	// choices: Array
	//		Array of elements like: {corner: 'TL', pos: {x: 10, y: 20} }
	//		Above example says to put the top-left corner of the node at (10,20)
	//	layoutNode: Function(node, orient)
	//		for things like tooltip, they are displayed differently (and have different dimensions)
	//		based on their orientation relative to the parent.   This adjusts the popup based on orientation.

	// get {x: 10, y: 10, w: 100, h:100} type obj representing position of
	// viewport over document
	var view = dijit.getViewport();

	// This won't work if the node is inside a <div style="position: relative">,
	// so reattach it to document.body.   (Otherwise, the positioning will be wrong
	// and also it might get cutoff)
	if(!node.parentNode || String(node.parentNode.tagName).toLowerCase() != "body"){
		dojo.body().appendChild(node);
	}

	var best=null;
	for(var i=0;  i<choices.length;  i++){
		var corner = choices[i].corner;
		var pos = choices[i].pos;

		// configure node to be displayed in given position relative to button
		// (need to do this in order to get an accurate size for the node, because
		// a tooltips size changes based on position, due to triangle)
		if(layoutNode){
			layoutNode(corner);
		}

		// get node's size
		var oldDisplay = node.style.display;
		var oldVis = node.style.visibility;
		node.style.visibility = "hidden";
		node.style.display = "";
		var mb = dojo.marginBox(node);
		node.style.display = oldDisplay;
		node.style.visibility = oldVis;

		// coordinates and size of node with specified corner placed at pos,
		// and clipped by viewport
		var startX = (corner.charAt(1)=='L' ? pos.x : Math.max(view.l, pos.x - mb.w)),
			startY = (corner.charAt(0)=='T' ? pos.y : Math.max(view.t, pos.y -  mb.h)),
			endX = (corner.charAt(1)=='L' ? Math.min(view.l+view.w, startX+mb.w) : pos.x),
			endY = (corner.charAt(0)=='T' ? Math.min(view.t+view.h, startY+mb.h) : pos.y),
			width = endX-startX,
			height = endY-startY,
			overflow = (mb.w-width) + (mb.h-height);

		if(best==null || overflow<best.overflow){
			best = {
				corner: corner,
				aroundCorner: choices[i].aroundCorner,
				x: startX,
				y: startY,
				w: width,
				h: height,
				overflow: overflow
			};
		}
		if(overflow==0){
			break;
		}
	}

	node.style.left = best.x + "px";
	node.style.top = best.y + "px";
	return best;
}

dijit.placeOnScreenAroundElement = function(
	/* DomNode */		node,
	/* DomNode */		aroundNode,
	/* Object */		aroundCorners,
	/* Function */		layoutNode){

	//	summary
	//	Like placeOnScreen, except it accepts aroundNode instead of x,y
	//	and attempts to place node around it.  Uses margin box dimensions.
	//
	//	aroundCorners
	//		specify Which corner of aroundNode should be
	//		used to place the node => which corner(s) of node to use (see the
	//		corners parameter in dijit.placeOnScreen)
	//		e.g. {'TL': 'BL', 'BL': 'TL'}
	//
	//	layoutNode: Function(node, orient)
	//		for things like tooltip, they are displayed differently (and have different dimensions)
	//		based on their orientation relative to the parent.   This adjusts the popup based on orientation.


	// get coordinates of aroundNode
	aroundNode = dojo.byId(aroundNode);
	var oldDisplay = aroundNode.style.display;
	aroundNode.style.display="";
	// #3172: use the slightly tighter border box instead of marginBox
	var aroundNodeW = aroundNode.offsetWidth;  //mb.w;
	var aroundNodeH = aroundNode.offsetHeight;  //mb.h;
	var aroundNodePos = dojo.coords(aroundNode, true);
	aroundNode.style.display=oldDisplay;

	// Generate list of possible positions for node
	var choices = [];
	for(var nodeCorner in aroundCorners){
		choices.push( {
			aroundCorner: nodeCorner,
			corner: aroundCorners[nodeCorner],
			pos: {
				x: aroundNodePos.x + (nodeCorner.charAt(1)=='L' ? 0 : aroundNodeW),
				y: aroundNodePos.y + (nodeCorner.charAt(0)=='T' ? 0 : aroundNodeH)
			}
		});
	}

	return dijit._place(node, choices, layoutNode);
}

}

if(!dojo._hasResource["dijit._base.window"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.window"] = true;
dojo.provide("dijit._base.window");

dijit.getDocumentWindow = function(doc){
	//	summary
	// 	Get window object associated with document doc

	// With Safari, there is not way to retrieve the window from the document, so we must fix it.
	if(dojo.isSafari && !doc._parentWindow){
		/*
			This is a Safari specific function that fix the reference to the parent
			window from the document object.
		*/
		var fix=function(win){
			win.document._parentWindow=win;
			for(var i=0;  i<win.frames.length;  i++){
				fix(win.frames[i]);
			}
		}
		fix(window.top);
	}

	//In some IE versions (at least 6.0), document.parentWindow does not return a
	//reference to the real window object (maybe a copy), so we must fix it as well
	//We use IE specific execScript to attach the real window reference to
	//document._parentWindow for later use
	if(dojo.isIE && window !== document.parentWindow && !doc._parentWindow){
		/*
		In IE 6, only the variable "window" can be used to connect events (others
		may be only copies).
		*/
		doc.parentWindow.execScript("document._parentWindow = window;", "Javascript");
		//to prevent memory leak, unset it after use
		//another possibility is to add an onUnload handler which seems overkill to me (liucougar)
		var win = doc._parentWindow;
		doc._parentWindow = null;
		return win;	 //	Window
	}

	return doc._parentWindow || doc.parentWindow || doc.defaultView;	 //	Window
}

}

if(!dojo._hasResource["dijit._base.popup"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.popup"] = true;
dojo.provide("dijit._base.popup");





dijit.popup = new function(){
	// summary:
	//		This class is used to show/hide widgets as popups.
	//

	var stack = [],
		beginZIndex=1000,
		idGen = 1;

	this.open = function(/*Object*/ args){
		// summary:
		//		Popup the widget at the specified position
		//
		// args: Object
		//		popup: Widget
		//			widget to display,
		//		parent: Widget
		//			the button etc. that is displaying this popup
		//		around: DomNode
		//			DOM node (typically a button);  place popup relative to this node
		//		orient: Object
		//			structure specifying possible positions of popup relative to "around" node
		//		onCancel: Function
		//			callback when user has canceled the popup by
		//				1. hitting ESC or
		//				2. by using the popup widget's proprietary cancel mechanism (like a cancel button in a dialog);
		//				   ie: whenever popupWidget.onCancel() is called, args.onCancel is called
		//		onClose: Function
		//			callback whenever this popup is closed
		//		onExecute: Function
		//			callback when user "executed" on the popup/sub-popup by selecting a menu choice, etc. (top menu only)
		//
		// examples:
		//		1. opening at the mouse position
		//			dijit.popup.open({popup: menuWidget, x: evt.pageX, y: evt.pageY});
		//		2. opening the widget as a dropdown
		//			dijit.popup.open({parent: this, popup: menuWidget, around: this.domNode, onClose: function(){...}  });
		//
		//	Note that whatever widget called dijit.popup.open() should also listen to it's own _onBlur callback
		//	(fired from _base/focus.js) to know that focus has moved somewhere else and thus the popup should be closed.

		var widget = args.popup,
			orient = args.orient || {'BL':'TL', 'TL':'BL'},
			around = args.around,
			id = (args.around && args.around.id) ? (args.around.id+"_dropdown") : ("popup_"+idGen++);

		// make wrapper div to hold widget and possibly hold iframe behind it.
		// we can't attach the iframe as a child of the widget.domNode because
		// widget.domNode might be a <table>, <ul>, etc.
		var wrapper = dojo.doc.createElement("div");
		wrapper.id = id;
		wrapper.className="dijitPopup";
		wrapper.style.zIndex = beginZIndex + stack.length;
		wrapper.style.visibility = "hidden";
		if(args.parent){
			wrapper.dijitPopupParent=args.parent.id;
		}
		dojo.body().appendChild(wrapper);

		widget.domNode.style.display="";
		wrapper.appendChild(widget.domNode);

		var iframe = new dijit.BackgroundIframe(wrapper);

		// position the wrapper node
		var best = around ?
			dijit.placeOnScreenAroundElement(wrapper, around, orient, widget.orient ? dojo.hitch(widget, "orient") : null) :
			dijit.placeOnScreen(wrapper, args, orient == 'R' ? ['TR','BR','TL','BL'] : ['TL','BL','TR','BR']);

		wrapper.style.visibility = "visible";
		// TODO: use effects to fade in wrapper

		var handlers = [];

		// Compute the closest ancestor popup that's *not* a child of another popup.
		// Ex: For a TooltipDialog with a button that spawns a tree of menus, find the popup of the button.
		function getTopPopup(){
			for(var pi=stack.length-1;  pi > 0 && stack[pi].parent === stack[pi-1].widget;  pi--);
			return stack[pi];
		}

		// provide default escape and tab key handling
		// (this will work for any widget, not just menu)
		handlers.push(dojo.connect(wrapper, "onkeypress", this, function(evt){
			if(evt.keyCode == dojo.keys.ESCAPE && args.onCancel){
				args.onCancel();
			}else if(evt.keyCode == dojo.keys.TAB){
				dojo.stopEvent(evt);
				var topPopup = getTopPopup();
				if(topPopup && topPopup.onCancel){
					topPopup.onCancel();
				}
			}
		}));

		// watch for cancel/execute events on the popup and notify the caller
		// (for a menu, "execute" means clicking an item)
		if(widget.onCancel){
			handlers.push(dojo.connect(widget, "onCancel", null, args.onCancel));
		}

		handlers.push(dojo.connect(widget, widget.onExecute ? "onExecute" : "onChange", null, function(){
			var topPopup = getTopPopup();
			if(topPopup && topPopup.onExecute){
				topPopup.onExecute();
			}
		}));

		stack.push({
			wrapper: wrapper,
			iframe: iframe,
			widget: widget,
			parent: args.parent,
			onExecute: args.onExecute,
			onCancel: args.onCancel,
 			onClose: args.onClose,
			handlers: handlers
		});

		if(widget.onOpen){
			widget.onOpen(best);
		}

		return best;
	};

	this.close = function(/*Widget*/ popup){
		// summary:
		//		Close specified popup and any popups that it parented
		while(dojo.some(stack, function(elem){return elem.widget == popup;})){
			var top = stack.pop(),
				wrapper = top.wrapper,
				iframe = top.iframe,
				widget = top.widget,
				onClose = top.onClose;
	
			if(widget.onClose){
				widget.onClose();
			}
			dojo.forEach(top.handlers, dojo.disconnect);
	
			// #2685: check if the widget still has a domNode so ContentPane can change its URL without getting an error
			if(!widget||!widget.domNode){ return;  }
			dojo.style(widget.domNode, "display", "none");
			dojo.body().appendChild(widget.domNode);
			iframe.destroy();
			dojo._destroyElement(wrapper);
	
			if(onClose){
				onClose();
			}
		}
	};
}();

dijit._frames = new function(){
	// summary: cache of iframes
	var queue = [];

	this.pop = function(){
		var iframe;
		if(queue.length){
			iframe = queue.pop();
			iframe.style.display="";
		}else{
			if(dojo.isIE){
				var html="<iframe src='javascript:\"\"'"
					+ " style='position: absolute;  left: 0px;  top: 0px;"
					+ "z-index: -1;  filter:Alpha(Opacity=\"0\");'>";
				iframe = dojo.doc.createElement(html);
			}else{
			 	var iframe = dojo.doc.createElement("iframe");
				iframe.src = 'javascript:""';
				iframe.className = "dijitBackgroundIframe";
			}
			iframe.tabIndex = -1;  // Magic to prevent iframe from getting focus on tab keypress - as style didnt work.
			dojo.body().appendChild(iframe);
		}
		return iframe;
	};

	this.push = function(iframe){
		iframe.style.display="";
		if(dojo.isIE){
			iframe.style.removeExpression("width");
			iframe.style.removeExpression("height");
		}
		queue.push(iframe);
	}
}();

// fill the queue
if(dojo.isIE && dojo.isIE < 7){
	dojo.addOnLoad(function(){
		var f = dijit._frames;
		dojo.forEach([f.pop()], f.push);
	});
}


dijit.BackgroundIframe = function(/* DomNode */node){
	//	summary:
	//		For IE z-index schenanigans. id attribute is required.
	//
	//	description:
	//		new dijit.BackgroundIframe(node)
	//			Makes a background iframe as a child of node, that fills
	//			area (and position) of node

	if(!node.id){ throw new Error("no id");  }
	if((dojo.isIE && dojo.isIE < 7) || (dojo.isFF && dojo.isFF < 3 && dojo.hasClass(dojo.body(), "dijit_a11y"))){
		var iframe = dijit._frames.pop();
		node.appendChild(iframe);
		if(dojo.isIE){
			iframe.style.setExpression("width", "document.getElementById('" + node.id + "').offsetWidth");
			iframe.style.setExpression("height", "document.getElementById('" + node.id + "').offsetHeight");
		}
		this.iframe = iframe;
	}
};

dojo.extend(dijit.BackgroundIframe, {
	destroy: function(){
		//	summary: destroy the iframe
		if(this.iframe){
			dijit._frames.push(this.iframe);
			delete this.iframe;
		}
	}
});

}

if(!dojo._hasResource["dijit._base.scroll"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.scroll"] = true;
dojo.provide("dijit._base.scroll");

dijit.scrollIntoView = function(/* DomNode */node){
	//	summary
	//	Scroll the passed node into view, if it is not.

	// don't rely on that node.scrollIntoView works just because the function is there
	// it doesnt work in Konqueror or Opera even though the function is there and probably
	// not safari either
	// dont like browser sniffs implementations but sometimes you have to use it
	if(dojo.isIE){
		//only call scrollIntoView if there is a scrollbar for this menu,
		//otherwise, scrollIntoView will scroll the window scrollbar
		if(dojo.marginBox(node.parentNode).h <= node.parentNode.scrollHeight){ //PORT was getBorderBox
			node.scrollIntoView(false);
		}
	}else if(dojo.isMozilla){
		node.scrollIntoView(false);
	}else{
		var parent = node.parentNode;
		var parentBottom = parent.scrollTop + dojo.marginBox(parent).h;  //PORT was getBorderBox
		var nodeBottom = node.offsetTop + dojo.marginBox(node).h;
		if(parentBottom < nodeBottom){
			parent.scrollTop += (nodeBottom - parentBottom);
		}else if(parent.scrollTop > node.offsetTop){
			parent.scrollTop -= (parent.scrollTop - node.offsetTop);
		}
	}
};

}

if(!dojo._hasResource["dijit._base.sniff"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.sniff"] = true;
dojo.provide("dijit._base.sniff");

// ported from dojo.html.applyBrowserClass (style.js)

//	summary:
//		Applies pre-set class names based on browser & version to the
//		top-level HTML node.  Simply doing a require on this module will
//		establish this CSS.  Modified version of Morris' CSS hack.
(function(){
	var d = dojo;
	var ie = d.isIE;
	var opera = d.isOpera;
	var maj = Math.floor;
	var classes = {
		dj_ie: ie,
//		dj_ie55: ie == 5.5,
		dj_ie6: maj(ie) == 6,
		dj_ie7: maj(ie) == 7,
		dj_iequirks: ie && d.isQuirks,
// NOTE: Opera not supported by dijit
		dj_opera: opera,
		dj_opera8: maj(opera) == 8,
		dj_opera9: maj(opera) == 9,
		dj_khtml: d.isKhtml,
		dj_safari: d.isSafari,
		dj_gecko: d.isMozilla
	};  // no dojo unsupported browsers

	for(var p in classes){
		if(classes[p]){
			var html = dojo.doc.documentElement;  //TODO browser-specific DOM magic needed?
			if(html.className){
				html.className += " " + p;
			}else{
				html.className = p;
			}
		}
	}
})();

}

if(!dojo._hasResource["dijit._base.bidi"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.bidi"] = true;
dojo.provide("dijit._base.bidi");

// summary: applies a class to the top of the document for right-to-left stylesheet rules

dojo.addOnLoad(function(){
	if(!dojo._isBodyLtr()){
		dojo.addClass(dojo.body(), "dijitRtl");
	}
});

}

if(!dojo._hasResource["dijit._base.typematic"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.typematic"] = true;
dojo.provide("dijit._base.typematic");

dijit.typematic = {
	// summary:
	//	These functions are used to repetitively call a user specified callback
	//	method when a specific key or mouse click over a specific DOM node is
	//	held down for a specific amount of time.
	//	Only 1 such event is allowed to occur on the browser page at 1 time.

	_fireEventAndReload: function(){
		this._timer = null;
		this._callback(++this._count, this._node, this._evt);
		this._currentTimeout = (this._currentTimeout < 0) ? this._initialDelay : ((this._subsequentDelay > 1) ? this._subsequentDelay : Math.round(this._currentTimeout * this._subsequentDelay));
		this._timer = setTimeout(dojo.hitch(this, "_fireEventAndReload"), this._currentTimeout);
	},

	trigger: function(/*Event*/ evt, /* Object */ _this, /*DOMNode*/ node, /* Function */ callback, /* Object */ obj, /* Number */ subsequentDelay, /* Number */ initialDelay){
		// summary:
		//      Start a timed, repeating callback sequence.
		//      If already started, the function call is ignored.
		//      This method is not normally called by the user but can be
		//      when the normal listener code is insufficient.
		//	Parameters:
		//	evt: key or mouse event object to pass to the user callback
		//	_this: pointer to the user's widget space.
		//	node: the DOM node object to pass the the callback function
		//	callback: function to call until the sequence is stopped called with 3 parameters:
		//		count: integer representing number of repeated calls (0..n) with -1 indicating the iteration has stopped
		//		node: the DOM node object passed in
		//		evt: key or mouse event object
		//	obj: user space object used to uniquely identify each typematic sequence
		//	subsequentDelay: if > 1, the number of milliseconds until the 3->n events occur
		//		or else the fractional time multiplier for the next event's delay, default=0.9
		//	initialDelay: the number of milliseconds until the 2nd event occurs, default=500ms
		if(obj != this._obj){
			this.stop();
			this._initialDelay = initialDelay || 500;
			this._subsequentDelay = subsequentDelay || 0.90;
			this._obj = obj;
			this._evt = evt;
			this._node = node;
			this._currentTimeout = -1;
			this._count = -1;
			this._callback = dojo.hitch(_this, callback);
			this._fireEventAndReload();
		}
	},

	stop: function(){
		// summary:
		//	  Stop an ongoing timed, repeating callback sequence.
		if(this._timer){
			clearTimeout(this._timer);
			this._timer = null;
		}
		if(this._obj){
			this._callback(-1, this._node, this._evt);
			this._obj = null;
		}
	},

	addKeyListener: function(/*DOMNode*/ node, /*Object*/ keyObject, /*Object*/ _this, /*Function*/ callback, /*Number*/ subsequentDelay, /*Number*/ initialDelay){
		// summary: Start listening for a specific typematic key.
		//	keyObject: an object defining the key to listen for.
		//		key: (mandatory) the keyCode (number) or character (string) to listen for.
		//		ctrlKey: desired ctrl key state to initiate the calback sequence:
		//			pressed (true)
		//			released (false)
		//			either (unspecified)
		//		altKey: same as ctrlKey but for the alt key
		//		shiftKey: same as ctrlKey but for the shift key
		//	See the trigger method for other parameters.
		//	Returns an array of dojo.connect handles
		return [
			dojo.connect(node, "onkeypress", this, function(evt){
				if(evt.keyCode == keyObject.keyCode && (!keyObject.charCode || keyObject.charCode == evt.charCode) &&
				(keyObject.ctrlKey === undefined || keyObject.ctrlKey == evt.ctrlKey) &&
				(keyObject.altKey === undefined || keyObject.altKey == evt.ctrlKey) &&
				(keyObject.shiftKey === undefined || keyObject.shiftKey == evt.ctrlKey)){
					dojo.stopEvent(evt);
					dijit.typematic.trigger(keyObject, _this, node, callback, keyObject, subsequentDelay, initialDelay);
				}else if(dijit.typematic._obj == keyObject){
					dijit.typematic.stop();
				}
			}),
			dojo.connect(node, "onkeyup", this, function(evt){
				if(dijit.typematic._obj == keyObject){
					dijit.typematic.stop();
				}
			})
		];
	},

	addMouseListener: function(/*DOMNode*/ node, /*Object*/ _this, /*Function*/ callback, /*Number*/ subsequentDelay, /*Number*/ initialDelay){
		// summary: Start listening for a typematic mouse click.
		//	See the trigger method for other parameters.
		//	Returns an array of dojo.connect handles
		var dc = dojo.connect;
		return [
			dc(node, "mousedown", this, function(evt){
				dojo.stopEvent(evt);
				dijit.typematic.trigger(evt, _this, node, callback, node, subsequentDelay, initialDelay);
			}),
			dc(node, "mouseup", this, function(evt){
				dojo.stopEvent(evt);
				dijit.typematic.stop();
			}),
			dc(node, "mouseout", this, function(evt){
				dojo.stopEvent(evt);
				dijit.typematic.stop();
			}),
			dc(node, "mousemove", this, function(evt){
				dojo.stopEvent(evt);
			}),
			dc(node, "dblclick", this, function(evt){
				dojo.stopEvent(evt);
				if(dojo.isIE){
					dijit.typematic.trigger(evt, _this, node, callback, node, subsequentDelay, initialDelay);
					setTimeout(dijit.typematic.stop, 50);
				}
			})
		];
	},

	addListener: function(/*Node*/ mouseNode, /*Node*/ keyNode, /*Object*/ keyObject, /*Object*/ _this, /*Function*/ callback, /*Number*/ subsequentDelay, /*Number*/ initialDelay){
		// summary: Start listening for a specific typematic key and mouseclick.
		//	This is a thin wrapper to addKeyListener and addMouseListener.
		//	mouseNode: the DOM node object to listen on for mouse events.
		//	keyNode: the DOM node object to listen on for key events.
		//	See the addMouseListener and addKeyListener methods for other parameters.
		//	Returns an array of dojo.connect handles
		return this.addKeyListener(keyNode, keyObject, _this, callback, subsequentDelay, initialDelay).concat(
			this.addMouseListener(mouseNode, _this, callback, subsequentDelay, initialDelay));
	}
};

}

if(!dojo._hasResource["dijit._base.wai"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base.wai"] = true;
dojo.provide("dijit._base.wai");

dijit.wai = {
	onload: function(){
		// summary:
		//		Function that detects if we are in high-contrast mode or not,
		//		and sets up a timer to periodically confirm the value.
		//		figure out the background-image style property
		//		and apply that to the image.src property.
		// description:
		//		This must be a named function and not an anonymous
		//		function, so that the widget parsing code can make sure it
		//		registers its onload function after this function.
		//		DO NOT USE "this" within this function.

		// create div for testing if high contrast mode is on or images are turned off
		var div = document.createElement("div");
		div.id = "a11yTestNode";
		div.style.cssText = 'border: 1px solid;'
			+ 'border-color:red green;'
			+ 'position: absolute;'
			+ 'height: 5px;'
			+ 'top: -999px;'
			+ 'background-image: url("' + dojo.moduleUrl("dijit", "form/templates/blank.gif") + '");';
		dojo.body().appendChild(div);

		// test it
		function check(){
			var cs = dojo.getComputedStyle(div);
			if(cs){
				var bkImg = cs.backgroundImage;
				var needsA11y = (cs.borderTopColor==cs.borderRightColor) || (bkImg != null && (bkImg == "none" || bkImg == "url(invalid-url:)" ));
				dojo[needsA11y ? "addClass" : "removeClass"](dojo.body(), "dijit_a11y");
			}
		}
		check();
		if(dojo.isIE){
			setInterval(check, 4000);
		}
	}
};

// Test if computer is in high contrast mode.
// Make sure the a11y test runs first, before widgets are instantiated.
if(dojo.isIE || dojo.isMoz){	// NOTE: checking in Safari messes things up
	dojo._loaders.unshift(dijit.wai.onload);
}

dojo.mixin(dijit,
{
	hasWaiRole: function(/*Element*/ elem){
		// Summary: Return true if elem has a role attribute and false if not.
		if(elem.hasAttribute){
			return elem.hasAttribute("role");
		}else{
			return elem.getAttribute("role") ? true : false;
		}
	},

	getWaiRole: function(/*Element*/ elem){
		// Summary: Return the role of elem or an empty string if
		//		elem does not have a role.
		var value = elem.getAttribute("role");
		if(value){
			var prefixEnd = value.indexOf(":");
			return prefixEnd == -1 ? value : value.substring(prefixEnd+1);
		}else{
			return "";
		}
	},

	setWaiRole: function(/*Element*/ elem, /*String*/ role){
		// Summary: Set the role on elem. On Firefox 2 and below, "wairole:" is
		//		prepended to the provided role value.
		if(dojo.isFF && dojo.isFF < 3){
			elem.setAttribute("role", "wairole:"+role);
		}else{
			elem.setAttribute("role", role);
		}
	},

	removeWaiRole: function(/*Element*/ elem){
		// Summary: Removes the role attribute from elem.
		elem.removeAttribute("role");
	},

	hasWaiState: function(/*Element*/ elem, /*String*/ state){
		// Summary: Return true if elem has a value for the given state and
		//		false if it does not.
		//		On Firefox 2 and below, we check for an attribute in namespace
		//		"http://www.w3.org/2005/07/aaa" with a name of the given state.
		//		On all other browsers, we check for an attribute called
		//		"aria-"+state.
		if(dojo.isFF && dojo.isFF < 3){
			return elem.hasAttributeNS("http://www.w3.org/2005/07/aaa", state);
		}else{
			if(elem.hasAttribute){
				return elem.hasAttribute("aria-"+state);
			}else{
				return elem.getAttribute("aria-"+state) ? true : false;
			}
		}
	},

	getWaiState: function(/*Element*/ elem, /*String*/ state){
		// Summary: Return the value of the requested state on elem
		//		or an empty string if elem has no value for state.
		//		On Firefox 2 and below, we check for an attribute in namespace
		//		"http://www.w3.org/2005/07/aaa" with a name of the given state.
		//		On all other browsers, we check for an attribute called
		//		"aria-"+state.
		if(dojo.isFF && dojo.isFF < 3){
			return elem.getAttributeNS("http://www.w3.org/2005/07/aaa", state);
		}else{
			var value =  elem.getAttribute("aria-"+state);
			return value ? value : "";
		}
	},

	setWaiState: function(/*Element*/ elem, /*String*/ state, /*String*/ value){
		// Summary: Set state on elem to value.
		//		On Firefox 2 and below, we set an attribute in namespace
		//		"http://www.w3.org/2005/07/aaa" with a name of the given state.
		//		On all other browsers, we set an attribute called
		//		"aria-"+state.
		if(dojo.isFF && dojo.isFF < 3){
			elem.setAttributeNS("http://www.w3.org/2005/07/aaa",
				"aaa:"+state, value);
		}else{
			elem.setAttribute("aria-"+state, value);
		}
	},

	removeWaiState: function(/*Element*/ elem, /*String*/ state){
		// Summary: Removes the given state from elem.
		//		On Firefox 2 and below, we remove the attribute in namespace
		//		"http://www.w3.org/2005/07/aaa" with a name of the given state.
		//		On all other browsers, we remove the attribute called
		//		"aria-"+state.
		if(dojo.isFF && dojo.isFF < 3){
			elem.removeAttributeNS("http://www.w3.org/2005/07/aaa", state);
		}else{
			elem.removeAttribute("aria-"+state);
		}
	}
});

}

if(!dojo._hasResource["dijit._base"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._base"] = true;
dojo.provide("dijit._base");












}

if(!dojo._hasResource["dojo.date.stamp"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.date.stamp"] = true;
dojo.provide("dojo.date.stamp");

// Methods to convert dates to or from a wire (string) format using well-known conventions

dojo.date.stamp.fromISOString = function(/*String*/formattedString, /*Number?*/defaultTime){
	//	summary:
	//		Returns a Date object given a string formatted according to a subset of the ISO-8601 standard.
	//
	//	description:
	//		Accepts a string formatted according to a profile of ISO8601 as defined by
	//		RFC3339 (http://www.ietf.org/rfc/rfc3339.txt), except that partial input is allowed.
	//		Can also process dates as specified by http://www.w3.org/TR/NOTE-datetime
	//		The following combinations are valid:
	// 			* dates only
	//				yyyy
	//				yyyy-MM
	//				yyyy-MM-dd
	// 			* times only, with an optional time zone appended
	//				THH:mm
	//				THH:mm:ss
	//				THH:mm:ss.SSS
	// 			* and "datetimes" which could be any combination of the above
	//		timezones may be specified as Z (for UTC) or +/- followed by a time expression HH:mm
	//		Assumes the local time zone if not specified.  Does not validate.  Improperly formatted
	//		input may return null.  Arguments which are out of bounds will be handled
	// 		by the Date constructor (e.g. January 32nd typically gets resolved to February 1st)
	//
  	//	formattedString:
	//		A string such as 2005-06-30T08:05:00-07:00 or 2005-06-30 or T08:05:00
	//
	//	defaultTime:
	//		Used for defaults for fields omitted in the formattedString.
	//		Uses 1970-01-01T00:00:00.0Z by default.

	if(!dojo.date.stamp._isoRegExp){
		dojo.date.stamp._isoRegExp =
//TODO: could be more restrictive and check for 00-59, etc.
			/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;
	}

	var match = dojo.date.stamp._isoRegExp.exec(formattedString);
	var result = null;

	if(match){
		match.shift();
		match[1] && match[1]--;  // Javascript Date months are 0-based
		match[6] && (match[6] *= 1000);  // Javascript Date expects fractional seconds as milliseconds

		if(defaultTime){
			// mix in defaultTime.  Relatively expensive, so use || operators for the fast path of defaultTime === 0
			defaultTime = new Date(defaultTime);
			dojo.map(["FullYear", "Month", "Date", "Hours", "Minutes", "Seconds", "Milliseconds"], function(prop){
				return defaultTime["get" + prop]();
			}).forEach(function(value, index){
				if(match[index] === undefined){
					match[index] = value;
				}
			});
		}
		result = new Date(match[0]||1970, match[1]||0, match[2]||0, match[3]||0, match[4]||0, match[5]||0, match[6]||0);

		var offset = 0;
		var zoneSign = match[7] && match[7].charAt(0);
		if(zoneSign != 'Z'){
			offset = ((match[8] || 0) * 60) + (Number(match[9]) || 0);
			if(zoneSign != '-'){ offset *= -1;  }
		}
		if(zoneSign){
			offset -= result.getTimezoneOffset();
		}
		if(offset){
			result.setTime(result.getTime() + offset * 60000);
		}
	}

	return result;  // Date or null
}

dojo.date.stamp.toISOString = function(/*Date*/dateObject, /*Object?*/options){
	//	summary:
	//		Format a Date object as a string according a subset of the ISO-8601 standard
	//
	//	description:
	//		When options.selector is omitted, output follows RFC3339 (http://www.ietf.org/rfc/rfc3339.txt)
	//		The local time zone is included as an offset from GMT, except when selector=='time' (time without a date)
	//		Does not check bounds.
	//
	//	dateObject:
	//		A Date object
	//
	//	object {selector: string, zulu: boolean, milliseconds: boolean}
	//		selector- "date" or "time" for partial formatting of the Date object.
	//			Both date and time will be formatted by default.
	//		zulu- if true, UTC/GMT is used for a timezone
	//		milliseconds- if true, output milliseconds

	var _ = function(n){ return (n < 10) ? "0" + n : n;  }
	options = options || {};
	var formattedDate = [];
	var getter = options.zulu ? "getUTC" : "get";
	var date = "";
	if(options.selector != "time"){
		date = [dateObject[getter+"FullYear"](), _(dateObject[getter+"Month"]()+1), _(dateObject[getter+"Date"]())].join('-');
	}
	formattedDate.push(date);
	if(options.selector != "date"){
		var time = [_(dateObject[getter+"Hours"]()), _(dateObject[getter+"Minutes"]()), _(dateObject[getter+"Seconds"]())].join(':');
		var millis = dateObject[getter+"Milliseconds"]();
		if(options.milliseconds){
			time += "."+ (millis < 100 ? "0" : "") + _(millis);
		}
		if(options.zulu){
			time += "Z";
		}else if(options.selector != "time"){
			var timezoneOffset = dateObject.getTimezoneOffset();
			var absOffset = Math.abs(timezoneOffset);
			time += (timezoneOffset > 0 ? "-" : "+") + 
				_(Math.floor(absOffset/60)) + ":" + _(absOffset%60);
		}
		formattedDate.push(time);
	}
	return formattedDate.join('T');  // String
}

}

if(!dojo._hasResource["dojo.parser"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.parser"] = true;
dojo.provide("dojo.parser");


dojo.parser = new function(){

	var d = dojo;

	function val2type(/*Object*/ value){
		// summary:
		//		Returns name of type of given value.

		if(d.isString(value)){ return "string";  }
		if(typeof value == "number"){ return "number";  }
		if(typeof value == "boolean"){ return "boolean";  }
		if(d.isFunction(value)){ return "function";  }
		if(d.isArray(value)){ return "array";  } // typeof [] == "object"
		if(value instanceof Date) { return "date";  } // assume timestamp
		if(value instanceof d._Url){ return "url";  }
		return "object";
	}

	function str2obj(/*String*/ value, /*String*/ type){
		// summary:
		//		Convert given string value to given type
		switch(type){
			case "string":
				return value;
			case "number":
				return value.length ? Number(value) : NaN;
			case "boolean":
				// for checked/disabled value might be "" or "checked".  interpret as true.
				return typeof value == "boolean" ? value : !(value.toLowerCase()=="false");
			case "function":
				if(d.isFunction(value)){
					// IE gives us a function, even when we say something like onClick="foo"
					// (in which case it gives us an invalid function "function(){ foo }"). 
					//  Therefore, convert to string
					value=value.toString();
					value=d.trim(value.substring(value.indexOf('{')+1, value.length-1));
				}
				try{
					if(value.search(/[^\w\.]+/i) != -1){
						// TODO: "this" here won't work
						value = d.parser._nameAnonFunc(new Function(value), this);
					}
					return d.getObject(value, false);
				}catch(e){ return new Function();  }
			case "array":
				return value.split(/\s*,\s*/);
			case "date":
				switch(value){
					case "": return new Date("");	 // the NaN of dates
					case "now": return new Date();	 // current date
					default: return d.date.stamp.fromISOString(value);
				}
			case "url":
				return d.baseUrl + value;
			default:
				return d.fromJson(value);
		}
	}

	var instanceClasses = {
		// map from fully qualified name (like "dijit.Button") to structure like
		// { cls: dijit.Button, params: {label: "string", disabled: "boolean"} }
	};
	
	function getClassInfo(/*String*/ className){
		// className:
		//		fully qualified name (like "dijit.Button")
		// returns:
		//		structure like
		//			{ 
		//				cls: dijit.Button, 
		//				params: { label: "string", disabled: "boolean"}
		//			}

		if(!instanceClasses[className]){
			// get pointer to widget class
			var cls = d.getObject(className);
			if(!d.isFunction(cls)){
				throw new Error("Could not load class '" + className +
					"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?");
			}
			var proto = cls.prototype;
	
			// get table of parameter names & types
			var params={};
			for(var name in proto){
				if(name.charAt(0)=="_"){ continue;  } 	// skip internal properties
				var defVal = proto[name];
				params[name]=val2type(defVal);
			}

			instanceClasses[className] = { cls: cls, params: params };
		}
		return instanceClasses[className];
	}

	this._functionFromScript = function(script){
		var preamble = "";
		var suffix = "";
		var argsStr = script.getAttribute("args");
		if(argsStr){
			d.forEach(argsStr.split(/\s*,\s*/), function(part, idx){
				preamble += "var "+part+" = arguments["+idx+"];  ";
			});
		}
		var withStr = script.getAttribute("with");
		if(withStr && withStr.length){
			d.forEach(withStr.split(/\s*,\s*/), function(part){
				preamble += "with("+part+"){";
				suffix += "}";
			});
		}
		return new Function(preamble+script.innerHTML+suffix);
	}

	this.instantiate = function(/* Array */nodes){
		// summary:
		//		Takes array of nodes, and turns them into class instances and
		//		potentially calls a layout method to allow them to connect with
		//		any children		
		var thelist = [];
		d.forEach(nodes, function(node){
			if(!node){ return;  }
			var type = node.getAttribute("dojoType");
			if((!type)||(!type.length)){ return;  }
			var clsInfo = getClassInfo(type);
			var clazz = clsInfo.cls;
			var ps = clazz._noScript||clazz.prototype._noScript;

			// read parameters (ie, attributes).
			// clsInfo.params lists expected params like {"checked": "boolean", "n": "number"}
			var params = {};
			var attributes = node.attributes;
			for(var name in clsInfo.params){
				var item = attributes.getNamedItem(name);
				if(!item || (!item.specified && (!dojo.isIE || name.toLowerCase()!="value"))){ continue;  }
				var value = item.value;
				// Deal with IE quirks for 'class' and 'style'
				switch(name){
				case "class":
					value = node.className;
					break;
				case "style":
					value = node.style && node.style.cssText;  // FIXME: Opera?
				}
				var _type = clsInfo.params[name];
				params[name] = str2obj(value, _type);
			}

			// Process <script type="dojo/*"> script tags
			// <script type="dojo/method" event="foo"> tags are added to params, and passed to
			// the widget on instantiation.
			// <script type="dojo/method"> tags (with no event) are executed after instantiation
			// <script type="dojo/connect" event="foo"> tags are dojo.connected after instantiation
			if(!ps){
				var connects = [],	// functions to connect after instantiation
					calls = [];	 	// functions to call after instantiation

				d.query("> script[type^='dojo/']", node).orphan().forEach(function(script){
					var event = script.getAttribute("event"),
						type = script.getAttribute("type"),
						nf = d.parser._functionFromScript(script);
					if(event){
						if(type == "dojo/connect"){
							connects.push({event: event, func: nf});
						}else{
							params[event] = nf;
						}
					}else{
						calls.push(nf);
					}
				});
			}

			var markupFactory = clazz["markupFactory"];
			if(!markupFactory && clazz["prototype"]){
				markupFactory = clazz.prototype["markupFactory"];
			}
			// create the instance
			var instance = markupFactory ? markupFactory(params, node, clazz) : new clazz(params, node);
			thelist.push(instance);

			// map it to the JS namespace if that makes sense
			var jsname = node.getAttribute("jsId");
			if(jsname){
				d.setObject(jsname, instance);
			}

			// process connections and startup functions
			if(!ps){
				dojo.forEach(connects, function(connect){
					dojo.connect(instance, connect.event, null, connect.func);
				});
				dojo.forEach(calls, function(func){
					func.call(instance);
				});
			}
		});

		// Call startup on each top level instance if it makes sense (as for
		// widgets).  Parent widgets will recursively call startup on their
		// (non-top level) children
		d.forEach(thelist, function(instance){
			if(	instance  && 
				(instance.startup) && 
				((!instance.getParent) || (!instance.getParent()))
			){
				instance.startup();
			}
		});
		return thelist;
	};

	this.parse = function(/*DomNode?*/ rootNode){
		// summary:
		//		Search specified node (or root node) recursively for class instances,
		//		and instantiate them Searches for
		//		dojoType="qualified.class.name"
		var list = d.query('[dojoType]', rootNode);
		// go build the object instances
		var instances = this.instantiate(list);
		return instances;
	};
}();

//Register the parser callback. It should be the first callback
//after the a11y test.

(function(){
	var parseRunner = function(){ 
		if(djConfig["parseOnLoad"] == true){
			dojo.parser.parse();  
		}
	};

	// FIXME: need to clobber cross-dependency!!
	if(dojo.exists("dijit.wai.onload") && (dijit.wai.onload === dojo._loaders[0])){
		dojo._loaders.splice(1, 0, parseRunner);
	}else{
		dojo._loaders.unshift(parseRunner);
	}
})();

//TODO: ported from 0.4.x Dojo.  Can we reduce this?
dojo.parser._anonCtr = 0;
dojo.parser._anon = {};  // why is this property required?
dojo.parser._nameAnonFunc = function(/*Function*/anonFuncPtr, /*Object*/thisObj){
	// summary:
	//		Creates a reference to anonFuncPtr in thisObj with a completely
	//		unique name. The new name is returned as a String. 
	var jpn = "$joinpoint";
	var nso = (thisObj|| dojo.parser._anon);
	if(dojo.isIE){
		var cn = anonFuncPtr["__dojoNameCache"];
		if(cn && nso[cn] === anonFuncPtr){
			return anonFuncPtr["__dojoNameCache"];
		}
	}
	var ret = "__"+dojo.parser._anonCtr++;
	while(typeof nso[ret] != "undefined"){
		ret = "__"+dojo.parser._anonCtr++;
	}
	nso[ret] = anonFuncPtr;
	return ret;  // String
}

}

if(!dojo._hasResource["dijit._Widget"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._Widget"] = true;
dojo.provide("dijit._Widget");



dojo.declare("dijit._Widget", null, {
	// summary:
	//		The foundation of dijit widgets. 	
	//
	// id: String
	//		a unique, opaque ID string that can be assigned by users or by the
	//		system. If the developer passes an ID which is known not to be
	//		unique, the specified ID is ignored and the system-generated ID is
	//		used instead.
	id: "",

	// lang: String
	//	Language to display this widget in (like en-us).
	//	Defaults to brower's specified preferred language (typically the language of the OS)
	lang: "",

	// dir: String
	//  Bi-directional support, as defined by the HTML DIR attribute. Either left-to-right "ltr" or right-to-left "rtl".
	dir: "",

	// class: String
	// HTML class attribute
	"class": "",

	// style: String
	// HTML style attribute
	style: "",

	// title: String
	// HTML title attribute
	title: "",

	// srcNodeRef: DomNode
	//		pointer to original dom node
	srcNodeRef: null,

	// domNode: DomNode
	//		this is our visible representation of the widget! Other DOM
	//		Nodes may by assigned to other properties, usually through the
	//		template system's dojoAttachPonit syntax, but the domNode
	//		property is the canonical "top level" node in widget UI.
	domNode: null,

	// attributeMap: Object
	//		A map of attributes and attachpoints -- typically standard HTML attributes -- to set
	//		on the widget's dom, at the "domNode" attach point, by default.
	//		Other node references can be specified as properties of 'this'
	attributeMap: {id:"", dir:"", lang:"", "class":"", style:"", title:""},  // TODO: add on* handlers?

	//////////// INITIALIZATION METHODS ///////////////////////////////////////

	postscript: function(params, srcNodeRef){
		this.create(params, srcNodeRef);
	},

	create: function(params, srcNodeRef){
		// summary:
		//		To understand the process by which widgets are instantiated, it
		//		is critical to understand what other methods create calls and
		//		which of them you'll want to override. Of course, adventurous
		//		developers could override create entirely, but this should
		//		only be done as a last resort.
		//
		//		Below is a list of the methods that are called, in the order
		//		they are fired, along with notes about what they do and if/when
		//		you should over-ride them in your widget:
		//			
		//			postMixInProperties:
		//				a stub function that you can over-ride to modify
		//				variables that may have been naively assigned by
		//				mixInProperties
		//			# widget is added to manager object here
		//			buildRendering
		//				Subclasses use this method to handle all UI initialization
		//				Sets this.domNode.  Templated widgets do this automatically
		//				and otherwise it just uses the source dom node.
		//			postCreate
		//				a stub function that you can over-ride to modify take
		//				actions once the widget has been placed in the UI

		// store pointer to original dom tree
		this.srcNodeRef = dojo.byId(srcNodeRef);

		// For garbage collection.  An array of handles returned by Widget.connect()
		// Each handle returned from Widget.connect() is an array of handles from dojo.connect()
		this._connects=[];

		// _attaches: String[]
		// 		names of all our dojoAttachPoint variables
		this._attaches=[];

		//mixin our passed parameters
		if(this.srcNodeRef && (typeof this.srcNodeRef.id == "string")){ this.id = this.srcNodeRef.id;  }
		if(params){
			dojo.mixin(this,params);
		}
		this.postMixInProperties();

		// generate an id for the widget if one wasn't specified
		// (be sure to do this before buildRendering() because that function might
		// expect the id to be there.
		if(!this.id){
			this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));
		}
		dijit.registry.add(this);

		this.buildRendering();

		// Copy attributes listed in attributeMap into the [newly created] DOM for the widget.
		// The placement of these attributes is according to the property mapping in attributeMap.
		// Note special handling for 'style' and 'class' attributes which are lists and can
		// have elements from both old and new structures, and some attributes like "type"
		// cannot be processed this way as they are not mutable.
		if(this.domNode){
			for(var attr in this.attributeMap){
				var mapNode = this[this.attributeMap[attr] || "domNode"];
				var value = this[attr];
				if(typeof value != "object" && (value !== "" || (params && params[attr]))){
					switch(attr){
					case "class":
						dojo.addClass(mapNode, value);
						break;
					case "style":
						if(mapNode.style.cssText){
							mapNode.style.cssText += ";  " + value;// FIXME: Opera
						}else{
							mapNode.style.cssText = value;
						}
						break;
					default:
						mapNode.setAttribute(attr, value);
					}
				}
			}
		}

		if(this.domNode){
			this.domNode.setAttribute("widgetId", this.id);
		}
		this.postCreate();

		// If srcNodeRef has been processed and removed from the DOM (e.g. TemplatedWidget) then delete it to allow GC.
		if(this.srcNodeRef && !this.srcNodeRef.parentNode){
			delete this.srcNodeRef;
		}	
	},

	postMixInProperties: function(){
		// summary
		//	Called after the parameters to the widget have been read-in,
		//	but before the widget template is instantiated.
		//	Especially useful to set properties that are referenced in the widget template.
	},

	buildRendering: function(){
		// summary:
		//		Construct the UI for this widget, setting this.domNode.
		//		Most widgets will mixin TemplatedWidget, which overrides this method.
		this.domNode = this.srcNodeRef || dojo.doc.createElement('div');
	},

	postCreate: function(){
		// summary:
		//		Called after a widget's dom has been setup
	},

	startup: function(){
		// summary:
		//		Called after a widget's children, and other widgets on the page, have been created.
		//		Provides an opportunity to manipulate any children before they are displayed
		//		This is useful for composite widgets that need to control or layout sub-widgets
		//		Many layout widgets can use this as a wiring phase
	},

	//////////// DESTROY FUNCTIONS ////////////////////////////////

	destroyRecursive: function(/*Boolean*/ finalize){
		// summary:
		// 		Destroy this widget and it's descendants. This is the generic
		// 		"destructor" function that all widget users should call to
		// 		cleanly discard with a widget. Once a widget is destroyed, it's
		// 		removed from the manager object.
		// finalize: Boolean
		//		is this function being called part of global environment
		//		tear-down?

		this.destroyDescendants();
		this.destroy();
	},

	destroy: function(/*Boolean*/ finalize){
		// summary:
		// 		Destroy this widget, but not its descendants
		// finalize: Boolean
		//		is this function being called part of global environment
		//		tear-down?
		this.uninitialize();
		dojo.forEach(this._connects, function(array){
			dojo.forEach(array, dojo.disconnect);
		});
		this.destroyRendering(finalize);
		dijit.registry.remove(this.id);
	},

	destroyRendering: function(/*Boolean*/ finalize){
		// summary:
		//		Destroys the DOM nodes associated with this widget
		// finalize: Boolean
		//		is this function being called part of global environment
		//		tear-down?

		if(this.bgIframe){
			this.bgIframe.destroy();
			delete this.bgIframe;
		}

		if(this.domNode){
			dojo._destroyElement(this.domNode);
			delete this.domNode;
		}

		if(this.srcNodeRef){
			dojo._destroyElement(this.srcNodeRef);
			delete this.srcNodeRef;
		}
	},

	destroyDescendants: function(){
		// summary:
		//		Recursively destroy the children of this widget and their
		//		descendants.

		// TODO: should I destroy in the reverse order, to go bottom up?
		dojo.forEach(this.getDescendants(), function(widget){ widget.destroy();  });
	},

	uninitialize: function(){
		// summary:
		//		stub function. Over-ride to implement custom widget tear-down
		//		behavior.
		return false;
	},

	////////////////// MISCELLANEOUS METHODS ///////////////////

	toString: function(){
		// summary:
		//		returns a string that represents the widget. When a widget is
		//		cast to a string, this method will be used to generate the
		//		output. Currently, it does not implement any sort of reversable
		//		serialization.
		return '[Widget ' + this.declaredClass + ', ' + (this.id || 'NO ID') + ']';  // String
	},

	getDescendants: function(){
		// summary:
		//	return all the descendant widgets
		var list = dojo.query('[widgetId]', this.domNode);
		return list.map(dijit.byNode);	 	// Array
	},

	nodesWithKeyClick : ["input", "button"],

	connect: function(
			/*Object|null*/ obj,
			/*String*/ event,
			/*String|Function*/ method){

		// summary:
		//		Connects specified obj/event to specified method of this object
		//		and registers for disconnect() on widget destroy.
		//		Special event: "ondijitclick" triggers on a click or enter-down or space-up
		//		Similar to dojo.connect() but takes three arguments rather than four.
		var handles =[];
		if(event == "ondijitclick"){
			var w = this;
			// add key based click activation for unsupported nodes.
			if(!this.nodesWithKeyClick[obj.nodeName]){
				handles.push(dojo.connect(obj, "onkeydown", this,
					function(e){
						if(e.keyCode == dojo.keys.ENTER){
							return (dojo.isString(method))?
								w[method](e) : method.call(w, e);
						}else if(e.keyCode == dojo.keys.SPACE){
							// stop space down as it causes IE to scroll
							// the browser window
							dojo.stopEvent(e);
						}
			 		}));
				handles.push(dojo.connect(obj, "onkeyup", this,
					function(e){
						if(e.keyCode == dojo.keys.SPACE){
							return dojo.isString(method) ?
								w[method](e) : method.call(w, e);
						}
			 		}));
			}
			event = "onclick";
		}
		handles.push(dojo.connect(obj, event, this, method));

		// return handles for FormElement and ComboBox
		this._connects.push(handles);
		return handles;
	},

	disconnect: function(/*Object*/ handles){
		// summary:
		//		Disconnects handle created by this.connect.
		//		Also removes handle from this widget's list of connects
		for(var i=0;  i<this._connects.length;  i++){
			if(this._connects[i]==handles){
				dojo.forEach(handles, dojo.disconnect);
				this._connects.splice(i, 1);
				return;
			}
		}
	},

	isLeftToRight: function(){
		// summary:
		//		Checks the DOM to for the text direction for bi-directional support
		// description:
		//		This method cannot be used during widget construction because the widget
		//		must first be connected to the DOM tree.  Parent nodes are searched for the
		//		'dir' attribute until one is found, otherwise left to right mode is assumed.
		//		See HTML spec, DIR attribute for more information.

		if(typeof this._ltr == "undefined"){
			this._ltr = dojo.getComputedStyle(this.domNode).direction != "rtl";
		}
		return this._ltr;  //Boolean
	},

	isFocusable: function(){
		// summary:
		//		Return true if this widget can currently be focused
		//		and false if not
		return this.focus && (dojo.style(this.domNode, "display") != "none");
	}
});

}

if(!dojo._hasResource["dojo.string"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.string"] = true;
dojo.provide("dojo.string");

dojo.string.pad = function(/*String*/text, /*int*/size, /*String?*/ch, /*boolean?*/end){
	// summary:
	//		Pad a string to guarantee that it is at least 'size' length by
	//		filling with the character 'c' at either the start or end of the
	//		string. Pads at the start, by default.
	// text: the string to pad
	// size: length to provide padding
	// ch: character to pad, defaults to '0'
	// end: adds padding at the end if true, otherwise pads at start

	var out = String(text);
	if(!ch){
		ch = '0';
	}
	while(out.length < size){
		if(end){
			out += ch;
		}else{
			out = ch + out;
		}
	}
	return out;	 // String
};

dojo.string.substitute = function(	/*String*/template, 
									/*Object or Array*/map, 
									/*Function?*/transform, 
									/*Object?*/thisObject){
	// summary:
	//		Performs parameterized substitutions on a string. Throws an
	//		exception if any parameter is unmatched.
	// description:
	//		For example,
	//		|	dojo.string.substitute("File '${0}' is not found in directory '${1}'.",["foo.html","/temp"]);
	//		|	dojo.string.substitute("File '${name}' is not found in directory '${info.dir}'.",{name: "foo.html", info: {dir: "/temp"}});
	//		both return
	//			"File 'foo.html' is not found in directory '/temp'."
	// template: 
	//		a string with expressions in the form ${key} to be replaced or
	//		${key:format} which specifies a format function.  NOTE syntax has
	//		changed from %{key}
	// map: where to look for substitutions
	// transform: 
	//		a function to process all parameters before substitution takes
	//		place, e.g. dojo.string.encodeXML
	// thisObject: 
	//		where to look for optional format function;  default to the global
	//		namespace

	return template.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g, function(match, key, format){
		var value = dojo.getObject(key,false,map);
		if(format){ value = dojo.getObject(format,false,thisObject)(value);}
		if(transform){ value = transform(value, key);  }
		return value.toString();
	});  // string
};

dojo.string.trim = function(/*String*/ str){
	// summary: trims whitespaces from both sides of the string
	// description:
	//	This version of trim() was taken from Steven Levithan's blog: 
	//	http://blog.stevenlevithan.com/archives/faster-trim-javascript.
	//	The short yet good-performing version of this function is 
	//	dojo.trim(), which is part of the base.
	str = str.replace(/^\s+/, '');
	for(var i = str.length - 1;  i > 0;  i--){
		if(/\S/.test(str.charAt(i))){
			str = str.substring(0, i + 1);
			break;
		}
	}
	return str;	 // String
};

}

if(!dojo._hasResource["dijit._Templated"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._Templated"] = true;
dojo.provide("dijit._Templated");






dojo.declare("dijit._Templated",
	null,
	{
		// summary:
		//		mixin for widgets that are instantiated from a template

		// templateNode: DomNode
		//		a node that represents the widget template. Pre-empts both templateString and templatePath.
		templateNode: null,

		// templateString String:
		//		a string that represents the widget template. Pre-empts the
		//		templatePath. In builds that have their strings "interned", the
		//		templatePath is converted to an inline templateString, thereby
		//		preventing a synchronous network call.
		templateString: null,

		// templatePath: String
		//	Path to template (HTML file) for this widget
		templatePath: null,

		// widgetsInTemplate Boolean:
		//		should we parse the template to find widgets that might be
		//		declared in markup inside it? false by default.
		widgetsInTemplate: false,

		// containerNode DomNode:
		//		holds child elements. "containerNode" is generally set via a
		//		dojoAttachPoint assignment and it designates where children of
		//		the src dom node will be placed
		containerNode: null,

		// skipNodeCache Boolean:
		//		if using a cached widget template node poses issues for a
		//		particular widget class, it can set this property to ensure
		//		that its template is always re-built from a string
		_skipNodeCache: false,

		// method over-ride
		buildRendering: function(){
			// summary:
			//		Construct the UI for this widget from a template, setting this.domNode.

			// Lookup cached version of template, and download to cache if it
			// isn't there already.  Returns either a DomNode or a string, depending on
			// whether or not the template contains ${foo} replacement parameters.
			var cached = dijit._Templated.getCachedTemplate(this.templatePath, this.templateString, this._skipNodeCache);

			var node;
			if(dojo.isString(cached)){
				var className = this.declaredClass, _this = this;
				// Cache contains a string because we need to do property replacement
				// do the property replacement
				var tstr = dojo.string.substitute(cached, this, function(value, key){
					if(key.charAt(0) == '!'){ value = _this[key.substr(1)];  }
					if(typeof value == "undefined"){ throw new Error(className+" template:"+key);  } // a debugging aide
					if(!value){ return "";  }

					// Substitution keys beginning with ! will skip the transform step,
					// in case a user wishes to insert unescaped markup, e.g. ${!foo}
					return key.charAt(0) == "!" ? value :
						// Safer substitution, see heading "Attribute values" in
						// http://www.w3.org/TR/REC-html40/appendix/notes.html#h-B.3.2
						value.toString().replace(/"/g,"&quot;");  //TODO: add &amp? use encodeXML method?
				}, this);

				node = dijit._Templated._createNodesFromText(tstr)[0];
			}else{
				// if it's a node, all we have to do is clone it
				node = cached.cloneNode(true);
			}

			// recurse through the node, looking for, and attaching to, our
			// attachment points which should be defined on the template node.
			this._attachTemplateNodes(node);

			var source = this.srcNodeRef;
			if(source && source.parentNode){
				source.parentNode.replaceChild(node, source);
			}

			this.domNode = node;
			if(this.widgetsInTemplate){
				var childWidgets = dojo.parser.parse(node);
				this._attachTemplateNodes(childWidgets, function(n,p){
					return n[p];
				});
			}

			this._fillContent(source);
		},

		_fillContent: function(/*DomNode*/ source){
			// summary:
			//		relocate source contents to templated container node
			//		this.containerNode must be able to receive children, or exceptions will be thrown
			var dest = this.containerNode;
			if(source && dest){
				while(source.hasChildNodes()){
					dest.appendChild(source.firstChild);
				}
			}
		},

		_attachTemplateNodes: function(rootNode, getAttrFunc){
			// summary:
			//		map widget properties and functions to the handlers specified in
			//		the dom node and it's descendants. This function iterates over all
			//		nodes and looks for these properties:
			//			* dojoAttachPoint
			//			* dojoAttachEvent	
			//			* waiRole
			//			* waiState
			// rootNode: DomNode|Array[Widgets]
			//		the node to search for properties. All children will be searched.
			// getAttrFunc: function?
			//		a function which will be used to obtain property for a given
			//		DomNode/Widget

			getAttrFunc = getAttrFunc || function(n,p){ return n.getAttribute(p);  };

			var nodes = dojo.isArray(rootNode) ? rootNode : (rootNode.all || rootNode.getElementsByTagName("*"));
			var x=dojo.isArray(rootNode)?0:-1;
			for(;  x<nodes.length;  x++){
				var baseNode = (x == -1) ? rootNode : nodes[x];
				if(this.widgetsInTemplate && getAttrFunc(baseNode,'dojoType')){
					continue;
				}
				// Process dojoAttachPoint
				var attachPoint = getAttrFunc(baseNode, "dojoAttachPoint");
				if(attachPoint){
					var point, points = attachPoint.split(/\s*,\s*/);
					while(point=points.shift()){
						if(dojo.isArray(this[point])){
							this[point].push(baseNode);
						}else{
							this[point]=baseNode;
						}
					}
				}

				// Process dojoAttachEvent
				var attachEvent = getAttrFunc(baseNode, "dojoAttachEvent");
				if(attachEvent){
					// NOTE: we want to support attributes that have the form
					// "domEvent: nativeEvent;  ..."
					var event, events = attachEvent.split(/\s*,\s*/);
					var trim = dojo.trim;
					while(event=events.shift()){
						if(event){
							var thisFunc = null;
							if(event.indexOf(":") != -1){
								// oh, if only JS had tuple assignment
								var funcNameArr = event.split(":");
								event = trim(funcNameArr[0]);
								thisFunc = trim(funcNameArr[1]);
							}else{
								event = trim(event);
							}
							if(!thisFunc){
								thisFunc = event;
							}
							this.connect(baseNode, event, thisFunc);
						}
					}
				}

				// waiRole, waiState
				var role = getAttrFunc(baseNode, "waiRole");
				if(role){
					dijit.setWaiRole(baseNode, role);
				}
				var values = getAttrFunc(baseNode, "waiState");
				if(values){
					dojo.forEach(values.split(/\s*,\s*/), function(stateValue){
						if(stateValue.indexOf('-') != -1){
							var pair = stateValue.split('-');
							dijit.setWaiState(baseNode, pair[0], pair[1]);
						}
					});
				}

			}
		}
	}
);

// key is either templatePath or templateString;  object is either string or DOM tree
dijit._Templated._templateCache = {};

dijit._Templated.getCachedTemplate = function(templatePath, templateString, alwaysUseString){
	// summary:
	//		static method to get a template based on the templatePath or
	//		templateString key
	// templatePath: String
	//		the URL to get the template from. dojo.uri.Uri is often passed as well.
	// templateString: String?
	//		a string to use in lieu of fetching the template from a URL
	// Returns:
	//	Either string (if there are ${} variables that need to be replaced) or just
	//	a DOM tree (if the node can be cloned directly)

	// is it already cached?
	var tmplts = dijit._Templated._templateCache;
	var key = templateString || templatePath;
	var cached = tmplts[key];
	if(cached){
		return cached;
	}

	// If necessary, load template string from template path
	if(!templateString){
		templateString = dijit._Templated._sanitizeTemplateString(dojo._getText(templatePath));
	}

	templateString = dojo.string.trim(templateString);

	if(templateString.match(/\$\{([^\}]+)\}/g) || alwaysUseString){
		// there are variables in the template so all we can do is cache the string
		return (tmplts[key] = templateString);  //String
	}else{
		// there are no variables in the template so we can cache the DOM tree
		return (tmplts[key] = dijit._Templated._createNodesFromText(templateString)[0]);  //Node
	}
};

dijit._Templated._sanitizeTemplateString = function(/*String*/tString){
	// summary: 
	//		Strips <?xml ...?> declarations so that external SVG and XML
	// 		documents can be added to a document without worry. Also, if the string
	//		is an HTML document, only the part inside the body tag is returned.
	if(tString){
		tString = tString.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im, "");
		var matches = tString.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
		if(matches){
			tString = matches[1];
		}
	}else{
		tString = "";
	}
	return tString;  //String
};


if(dojo.isIE){
	dojo.addOnUnload(function(){
		var cache = dijit._Templated._templateCache;
		for(var key in cache){
			var value = cache[key];
			if(!isNaN(value.nodeType)){ // isNode equivalent
				dojo._destroyElement(value);
			}
			delete cache[key];
		}
	});
}

(function(){
	var tagMap = {
		cell: {re: /^<t[dh][\s\r\n>]/i, pre: "<table><tbody><tr>", post: "</tr></tbody></table>"},
		row: {re: /^<tr[\s\r\n>]/i, pre: "<table><tbody>", post: "</tbody></table>"},
		section: {re: /^<(thead|tbody|tfoot)[\s\r\n>]/i, pre: "<table>", post: "</table>"}
	};

	// dummy container node used temporarily to hold nodes being created
	var tn;

	dijit._Templated._createNodesFromText = function(/*String*/text){
		// summary:
		//	Attempts to create a set of nodes based on the structure of the passed text.

		if(!tn){
			tn = dojo.doc.createElement("div");
			tn.style.display="none";
			dojo.body().appendChild(tn);
		}
		var tableType = "none";
		var rtext = text.replace(/^\s+/, "");
		for(var type in tagMap){
			var map = tagMap[type];
			if(map.re.test(rtext)){
				tableType = type;
				text = map.pre + text + map.post;
				break;
			}
		}

		tn.innerHTML = text;
		if(tn.normalize){
			tn.normalize();
		}

		var tag = { cell: "tr", row: "tbody", section: "table" }[tableType];
		var _parent = (typeof tag != "undefined") ?
						tn.getElementsByTagName(tag)[0] :
						tn;

		var nodes = [];
		while(_parent.firstChild){
			nodes.push(_parent.removeChild(_parent.firstChild));
		}
		tn.innerHTML="";
		return nodes;	 //	Array
	}
})();

// These arguments can be specified for widgets which are used in templates.
// Since any widget can be specified as sub widgets in template, mix it
// into the base widget class.  (This is a hack, but it's effective.)
dojo.extend(dijit._Widget,{
	dojoAttachEvent: "",
	dojoAttachPoint: "",
	waiRole: "",
	waiState:""
})

}

if(!dojo._hasResource["dijit._Container"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._Container"] = true;
dojo.provide("dijit._Container");

dojo.declare("dijit._Contained",
	null,
	{
		// summary
		//		Mixin for widgets that are children of a container widget

		getParent: function(){
			// summary:
			//		returns the parent widget of this widget, assuming the parent
			//		implements dijit._Container
			for(var p=this.domNode.parentNode;  p;  p=p.parentNode){
				var id = p.getAttribute && p.getAttribute("widgetId");
				if(id){
					var parent = dijit.byId(id);
					return parent.isContainer ? parent : null;
				}
			}
			return null;
		},

		_getSibling: function(which){
			var node = this.domNode;
			do{
				node = node[which+"Sibling"];
			}while(node && node.nodeType != 1);
			if(!node){ return null;  } // null
			var id = node.getAttribute("widgetId");
			return dijit.byId(id);
		},

		getPreviousSibling: function(){
			// summary:
			//		returns null if this is the first child of the parent,
			//		otherwise returns the next element sibling to the "left".

			return this._getSibling("previous");
		},

		getNextSibling: function(){
			// summary:
			//		returns null if this is the last child of the parent,
			//		otherwise returns the next element sibling to the "right".

			return this._getSibling("next");
		}
	}
);

dojo.declare("dijit._Container",
	null,
	{
		// summary
		//		Mixin for widgets that contain a list of children like SplitContainer

		isContainer: true,

		addChild: function(/*Widget*/ widget, /*int?*/ insertIndex){
			// summary:
			//		Process the given child widget, inserting it's dom node as
			//		a child of our dom node

			if(insertIndex === undefined){
				insertIndex = "last";
			}
			var refNode = this.containerNode || this.domNode;
			if(insertIndex && typeof insertIndex == "number"){
				var children = dojo.query("> [widgetid]", refNode);
				if(children && children.length >= insertIndex){
					refNode = children[insertIndex-1];  insertIndex = "after";
				}
			}
			dojo.place(widget.domNode, refNode, insertIndex);

			// If I've been started but the child widget hasn't been started,
			// start it now.  Make sure to do this after widget has been
			// inserted into the DOM tree, so it can see that it's being controlled by me,
			// so it doesn't try to size itself.
			if(this._started && !widget._started){
				widget.startup();
			}
		},

		removeChild: function(/*Widget*/ widget){
			// summary:
			//		removes the passed widget instance from this widget but does
			//		not destroy it
			var node = widget.domNode;
			node.parentNode.removeChild(node);	 // detach but don't destroy
		},

		_nextElement: function(node){
			do{
				node = node.nextSibling;
			}while(node && node.nodeType != 1);
			return node;
		},

		_firstElement: function(node){
			node = node.firstChild;
			if(node && node.nodeType != 1){
				node = this._nextElement(node);
			}
			return node;
		},

		getChildren: function(){
			// summary:
			//		Returns array of children widgets
			return dojo.query("> [widgetId]", this.containerNode || this.domNode).map(dijit.byNode);  // Array
		},

		hasChildren: function(){
			// summary:
			//		Returns true if widget has children
			var cn = this.containerNode || this.domNode;
			return !!this._firstElement(cn);  // Boolean
		},

		_getSiblingOfChild: function(/*Widget*/ child, /*int*/ dir){
			// summary:
			//		get the next or previous widget sibling of child
			// dir:
			//		if 1, get the next sibling
			//		if -1, get the previous sibling
			var node = child.domNode;
			var which = (dir>0 ? "nextSibling" : "previousSibling");
			do{
				node = node[which];
			}while(node && (node.nodeType != 1 || !dijit.byNode(node)));
			return node ? dijit.byNode(node) : null;
		}
	}
);

dojo.declare("dijit._KeyNavContainer",
	[dijit._Container],
	{

		// summary:
		//		A _Container with keyboard navigation of its children.
		//		To use this mixin, call connectKeyNavHandlers() in
		//		postCreate() and call startupKeyNavChildren() in startup().

/*=====
		// focusedChild: Widget
		//		The currently focused child widget, or null if there isn't one
		focusedChild: null,
=====*/

		_keyNavCodes: {},

		connectKeyNavHandlers: function(/*Array*/ prevKeyCodes, /*Array*/ nextKeyCodes){
			// summary:
			//		Call in postCreate() to attach the keyboard handlers
			//		to the container.
			// preKeyCodes: Array
			//		Key codes for navigating to the previous child.
			// nextKeyCodes: Array
			//		Key codes for navigating to the next child.

			var keyCodes = this._keyNavCodes = {};
			var prev = dojo.hitch(this, this.focusPrev);
			var next = dojo.hitch(this, this.focusNext);
			dojo.forEach(prevKeyCodes, function(code){ keyCodes[code] = prev });
			dojo.forEach(nextKeyCodes, function(code){ keyCodes[code] = next });
			this.connect(this.domNode, "onkeypress", "_onContainerKeypress");
			if(dojo.isIE){
				this.connect(this.domNode, "onactivate", "_onContainerFocus");
				this.connect(this.domNode, "ondeactivate", "_onContainerBlur");
			}else{
				this.connect(this.domNode, "onfocus", "_onContainerFocus");
				this.connect(this.domNode, "onblur", "_onContainerBlur");
			}
		},

		startupKeyNavChildren: function(){
			// summary:
			//		Call in startup() to set child tabindexes to -1
			dojo.forEach(this.getChildren(), dojo.hitch(this, "_setTabIndexMinusOne"));
		},

		addChild: function(/*Widget*/ widget, /*int?*/ insertIndex){
			// summary: Add a child to our _Container
			dijit._KeyNavContainer.superclass.addChild.apply(this, arguments);
			this._setTabIndexMinusOne(widget);
		},

		focus: function(){
			// summary: Default focus() implementation: focus the first child.
			this.focusFirstChild();
		},

		focusFirstChild: function(){
			// summary: Focus the first focusable child in the container.
			this.focusChild(this._getFirstFocusableChild());
		},

		focusNext: function(){
			// summary: Focus the next widget or focal node (for widgets
			//		with multiple focal nodes) within this container.
			if(this.focusedChild && this.focusedChild.hasNextFocalNode
					&& this.focusedChild.hasNextFocalNode()){
				this.focusedChild.focusNext();
				return;
			}
			var child = this._getNextFocusableChild(this.focusedChild, 1);
			if(child.getFocalNodes){
				this.focusChild(child, child.getFocalNodes()[0]);
			}else{
				this.focusChild(child);
			}
		},

		focusPrev: function(){
			// summary: Focus the previous widget or focal node (for widgets
			//		with multiple focal nodes) within this container.
			if(this.focusedChild && this.focusedChild.hasPrevFocalNode
					&& this.focusedChild.hasPrevFocalNode()){
				this.focusedChild.focusPrev();
				return;
			}
			var child = this._getNextFocusableChild(this.focusedChild, -1);
			if(child.getFocalNodes){
				var nodes = child.getFocalNodes();
				this.focusChild(child, nodes[nodes.length-1]);
			}else{
				this.focusChild(child);
			}
		},

		focusChild: function(/*Widget*/ widget, /*Node?*/ node){
			// summary: Focus widget. Optionally focus 'node' within widget.
			if(widget){
				if(this.focusedChild && widget !== this.focusedChild){
					this._onChildBlur(this.focusedChild);
				}
				this.focusedChild = widget;
				if(node && widget.focusFocalNode){
					widget.focusFocalNode(node);
				}else{
					widget.focus();
				}
			}
		},

		_setTabIndexMinusOne: function(/*Widget*/ widget){
			if(widget.getFocalNodes){
				dojo.forEach(widget.getFocalNodes(), function(node){
					node.setAttribute("tabIndex", -1);
				});
			}else{
				(widget.focusNode || widget.domNode).setAttribute("tabIndex", -1);
			}
		},

		_onContainerFocus: function(evt){
			this.domNode.setAttribute("tabIndex", -1);
			if(evt.target === this.domNode){
				this.focusFirstChild();
			}else{
				var widget = dijit.getEnclosingWidget(evt.target);
				if(widget && widget.isFocusable()){
					this.focusedChild = widget;
				}
			}
		},

		_onContainerBlur: function(evt){
			if(this.tabIndex){
				this.domNode.setAttribute("tabIndex", this.tabIndex);
			}
		},

		_onContainerKeypress: function(evt){
			if(evt.ctrlKey || evt.altKey){ return;  }
			var func = this._keyNavCodes[evt.keyCode];
			if(func){
				func();
				dojo.stopEvent(evt);
			}
		},

		_onChildBlur: function(/*Widget*/ widget){
			// summary:
			//		Called when focus leaves a child widget to go
			//		to a sibling widget.
		},

		_getFirstFocusableChild: function(){
			return this._getNextFocusableChild(null, 1);
		},

		_getNextFocusableChild: function(child, dir){
			if(child){
				child = this._getSiblingOfChild(child, dir);
			}
			var children = this.getChildren();
			for(var i=0;  i < children.length;  i++){
				if(!child){
					child = children[(dir>0) ? 0 : (children.length-1)];
				}
				if(child.isFocusable()){
					return child;
				}
				child = this._getSiblingOfChild(child, dir);
			}
		}
	}
);

}

if(!dojo._hasResource["dijit.layout._LayoutWidget"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.layout._LayoutWidget"] = true;
dojo.provide("dijit.layout._LayoutWidget");




dojo.declare("dijit.layout._LayoutWidget",
	[dijit._Widget, dijit._Container, dijit._Contained],
	{
		// summary
		//		Mixin for widgets that contain a list of children like SplitContainer.
		//		Widgets which mixin this code must define layout() to lay out the children

		isLayoutContainer: true,

		postCreate: function(){
			dojo.addClass(this.domNode, "dijitContainer");
		},

		startup: function(){
			// summary:
			//		Called after all the widgets have been instantiated and their
			//		dom nodes have been inserted somewhere under document.body.
			//
			//		Widgets should override this method to do any initialization
			//		dependent on other widgets existing, and then call
			//		this superclass method to finish things off.
			//
			//		startup() in subclasses shouldn't do anything
			//		size related because the size of the widget hasn't been set yet.

			if(this._started){ return;  }
			this._started=true;

			if(this.getChildren){
				dojo.forEach(this.getChildren(), function(child){ child.startup();  });
			}

			// If I am a top level widget
			if(!this.getParent || !this.getParent()){
				// Do recursive sizing and layout of all my descendants
				// (passing in no argument to resize means that it has to glean the size itself)
				this.resize();

				// since my parent isn't a layout container, and my style is width=height=100% (or something similar),
				// then I need to watch when the window resizes, and size myself accordingly
				// (passing in no argument to resize means that it has to glean the size itself)
				this.connect(window, 'onresize', function(){this.resize();});
			}
		},

		resize: function(args){
			// summary:
			//		Explicitly set this widget's size (in pixels),
			//		and then call layout() to resize contents (and maybe adjust child widgets)
			//	
			// args: Object?
			//		{w: int, h: int, l: int, t: int}

			var node = this.domNode;

			// set margin box size, unless it wasn't specified, in which case use current size
			if(args){
				dojo.marginBox(node, args);

				// set offset of the node
				if(args.t){ node.style.top = args.t + "px";  }
				if(args.l){ node.style.left = args.l + "px";  }
			}
			// If either height or width wasn't specified by the user, then query node for it.
			// But note that setting the margin box and then immediately querying dimensions may return
			// inaccurate results, so try not to depend on it.
			var mb = dojo.mixin(dojo.marginBox(node), args||{});

			// Save the size of my content box.
			this._contentBox = dijit.layout.marginBox2contentBox(node, mb);

			// Callback for widget to adjust size of it's children
			this.layout();
		},

		layout: function(){
			//	summary
			//		Widgets override this method to size & position their contents/children.
			//		When this is called this._contentBox is guaranteed to be set (see resize()).
			//
			//		This is called after startup(), and also when the widget's size has been
			//		changed.
		}
	}
);

dijit.layout.marginBox2contentBox = function(/*DomNode*/ node, /*Object*/ mb){
	// summary:
	//		Given the margin-box size of a node, return it's content box size.
	//		Functions like dojo.contentBox() but is more reliable since it doesn't have
	//		to wait for the browser to compute sizes.
	var cs = dojo.getComputedStyle(node);
	var me=dojo._getMarginExtents(node, cs);
	var pb=dojo._getPadBorderExtents(node, cs);
	return {
		l: dojo._toPixelValue(node, cs.paddingLeft),
		t: dojo._toPixelValue(node, cs.paddingTop),
		w: mb.w - (me.w + pb.w),
		h: mb.h - (me.h + pb.h)
	};
};

(function(){
	var capitalize = function(word){
		return word.substring(0,1).toUpperCase() + word.substring(1);
	};

	var size = function(widget, dim){
		// size the child
		widget.resize ? widget.resize(dim) : dojo.marginBox(widget.domNode, dim);

		// record child's size, but favor our own numbers when we have them.
		// the browser lies sometimes
		dojo.mixin(widget, dojo.marginBox(widget.domNode));
		dojo.mixin(widget, dim);
	};

	dijit.layout.layoutChildren = function(/*DomNode*/ container, /*Object*/ dim, /*Object[]*/ children){
		/**
		 * summary
		 *		Layout a bunch of child dom nodes within a parent dom node
		 * container:
		 *		parent node
		 * dim:
		 *		{l, t, w, h} object specifying dimensions of container into which to place children
		 * children:
		 *		an array like [ {domNode: foo, layoutAlign: "bottom" }, {domNode: bar, layoutAlign: "client"} ]
		 */

		// copy dim because we are going to modify it
		dim = dojo.mixin({}, dim);

		dojo.addClass(container, "dijitLayoutContainer");

		// Move "client" elements to the end of the array for layout.  a11y dictates that the author
		// needs to be able to put them in the document in tab-order, but this algorithm requires that
		// client be last.
		children = dojo.filter(children, function(item){ return item.layoutAlign != "client";  })
			.concat(dojo.filter(children, function(item){ return item.layoutAlign == "client";  }));

		// set positions/sizes
		dojo.forEach(children, function(child){
			var elm = child.domNode,
				pos = child.layoutAlign;

			// set elem to upper left corner of unused space;  may move it later
			var elmStyle = elm.style;
			elmStyle.left = dim.l+"px";
			elmStyle.top = dim.t+"px";
			elmStyle.bottom = elmStyle.right = "auto";

			dojo.addClass(elm, "dijitAlign" + capitalize(pos));

			// set size && adjust record of remaining space.
			// note that setting the width of a <div> may affect it's height.
			if(pos=="top" || pos=="bottom"){
				size(child, { w: dim.w });
				dim.h -= child.h;
				if(pos=="top"){
					dim.t += child.h;
				}else{
					elmStyle.top = dim.t + dim.h + "px";
				}
			}else if(pos=="left" || pos=="right"){
				size(child, { h: dim.h });
				dim.w -= child.w;
				if(pos=="left"){
					dim.l += child.w;
				}else{
					elmStyle.left = dim.l + dim.w + "px";
				}
			}else if(pos=="client"){
				size(child, dim);
			}
		});
	};

})();

}

if(!dojo._hasResource["dijit.form._FormWidget"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form._FormWidget"] = true;
dojo.provide("dijit.form._FormWidget");




dojo.declare("dijit.form._FormWidget", [dijit._Widget, dijit._Templated],
{
	/*
	Summary:
		FormElement widgets correspond to native HTML elements such as <input> or <button> or <select>.
		Each FormElement represents a single input value, and has a (possibly hidden) <input> element,
		to which it serializes its input value, so that form submission (either normal submission or via FormBind?)
		works as expected.

		All these widgets should have these attributes just like native HTML input elements.
		You can set them during widget construction, but after that they are read only.

		They also share some common methods.
	*/

	// baseClass: String
	//		Root CSS class of the widget (ex: dijitTextBox), used to add CSS classes of widget
	//		(ex: "dijitTextBox dijitTextBoxInvalid dijitTextBoxFocused dijitTextBoxInvalidFocused")
	//		See _setStateClass().
	baseClass: "",

	// value: String
	//		Corresponds to the native HTML <input> element's attribute.
	value: "",

	// name: String
	//		Name used when submitting form;  same as "name" attribute or plain HTML elements
	name: "",

	// id: String
	//		Corresponds to the native HTML <input> element's attribute.
	//		Also becomes the id for the widget.
	id: "",

	// alt: String
	//		Corresponds to the native HTML <input> element's attribute.
	alt: "",

	// type: String
	//		Corresponds to the native HTML <input> element's attribute.
	type: "text",

	// tabIndex: Integer
	//		Order fields are traversed when user hits the tab key
	tabIndex: "0",

	// disabled: Boolean
	//		Should this widget respond to user input?
	//		In markup, this is specified as "disabled='disabled'", or just "disabled".
	disabled: false,

	// intermediateChanges: Boolean
	//		Fires onChange for each value change or only on demand
	intermediateChanges: false,

	// These mixins assume that the focus node is an INPUT, as many but not all _FormWidgets are.
	// Don't attempt to mixin the 'type', 'name' attributes here programatically -- they must be declared
	// directly in the template as read by the parser in order to function. IE is known to specifically 
	// require the 'name' attribute at element creation time.
	attributeMap: dojo.mixin(dojo.clone(dijit._Widget.prototype.attributeMap),
		{id:"focusNode", tabIndex:"focusNode", alt:"focusNode"}),

	setDisabled: function(/*Boolean*/ disabled){
		// summary:
		//		Set disabled state of widget.

		this.domNode.disabled = this.disabled = disabled;
		if(this.focusNode){
			this.focusNode.disabled = disabled;
		}
		if(disabled){
			//reset those, because after the domNode is disabled, we can no longer receive
			//mouse related events, see #4200
			this._hovering = false;
			this._active = false;
		}
		dijit.setWaiState(this.focusNode || this.domNode, "disabled", disabled);
		this._setStateClass();
	},

	_onMouse : function(/*Event*/ event){
		// summary:
		//	Sets _hovering, _active, and stateModifier properties depending on mouse state,
		//	then calls setStateClass() to set appropriate CSS classes for this.domNode.
		//
		//	To get a different CSS class for hover, send onmouseover and onmouseout events to this method.
		//	To get a different CSS class while mouse button is depressed, send onmousedown to this method.

		var mouseNode = event.target;
		if(mouseNode && mouseNode.getAttribute){
			this.stateModifier = mouseNode.getAttribute("stateModifier") || "";
		}

		if(!this.disabled){
			switch(event.type){
				case "mouseenter" :	
				case "mouseover" :
					this._hovering = true;
					break;

				case "mouseout" :	
				case "mouseleave" :	
					this._hovering = false;
					break;

				case "mousedown" :
					this._active = true;
					// set a global event to handle mouseup, so it fires properly
					//	even if the cursor leaves the button
					var self = this;
					// #2685: use this.connect and disconnect so destroy works properly
					var mouseUpConnector = this.connect(dojo.body(), "onmouseup", function(){
						self._active = false;
						self._setStateClass();
						self.disconnect(mouseUpConnector);
					});
					break;
			}
			this._setStateClass();
		}
	},

	isFocusable: function(){
		return !this.disabled && (dojo.style(this.domNode, "display") != "none");
	},

	focus: function(){
		dijit.focus(this.focusNode);
	},

	_setStateClass: function(){
		// summary
		//	Update the visual state of the widget by setting the css classes on this.domNode
		//  (or this.stateNode if defined) by combining this.baseClass with
		//	various suffixes that represent the current widget state(s).
		//
		//	In the case where a widget has multiple
		//	states, it sets the class based on all possible
		//  combinations.  For example, an invalid form widget that is being hovered
		//	will be "dijitInput dijitInputInvalid dijitInputHover dijitInputInvalidHover".
		//
		//	For complex widgets with multiple regions, there can be various hover/active states,
		//	such as "Hover" or "CloseButtonHover" (for tab buttons).
		//	This is controlled by a stateModifier="CloseButton" attribute on the close button node.
		//
		//	The widget may have one or more of the following states, determined
		//	by this.state, this.checked, this.valid, and this.selected:
		//		Error - ValidationTextBox sets this.state to "Error" if the current input value is invalid
		//		Checked - ex: a checkmark or a ToggleButton in a checked state, will have this.checked==true
		//		Selected - ex: currently selected tab will have this.selected==true
		//
		//	In addition, it may have at most one of the following states,
		//	based on this.disabled and flags set in _onMouse (this._active, this._hovering, this._focused):
		//		Disabled	- if the widget is disabled
		//		Active		- if the mouse (or space/enter key?) is being pressed down
		//		Focused		- if the widget has focus
		//		Hover		- if the mouse is over the widget
		//
		//	(even if multiple af the above conditions are true we only pick the first matching one)


		// Get original (non state related, non baseClass related) class specified in template
		if(!("staticClass" in this)){
			this.staticClass = (this.stateNode||this.domNode).className;
		}

		// Compute new set of classes
		var classes = [ this.baseClass ];

		function multiply(modifier){
			classes=classes.concat(dojo.map(classes, function(c){ return c+modifier;  }));
		}

		if(this.checked){
			multiply("Checked");
		}
		if(this.state){
			multiply(this.state);
		}
		if(this.selected){
			multiply("Selected");
		}

		// Only one of these four can be applied.
		// Active trumps Focused, Focused trumps Hover, and Disabled trumps all.
		if(this.disabled){
			multiply("Disabled");
		}else if(this._active){
			multiply(this.stateModifier+"Active");
		}else{
			if(this._focused){
				multiply("Focused");
			}
			if((this.stateModifier || !this._focused) && this._hovering){
				multiply(this.stateModifier+"Hover");
			}
		}
		(this.stateNode || this.domNode).className = this.staticClass + " " + classes.join(" ");
	},

	onChange: function(newValue){
		// summary: callback when value is changed
	},

	postCreate: function(){
		this.setValue(this.value, null);  // null reserved for initial value
		this.setDisabled(this.disabled);
		this._setStateClass();
	},

	setValue: function(/*anything*/ newValue, /*Boolean, optional*/ priorityChange){
		// summary: set the value of the widget.
		this._lastValue = newValue;
		dijit.setWaiState(this.focusNode || this.domNode, "valuenow", this.forWaiValuenow());
		if(priorityChange === undefined){ priorityChange = true;  } // setValue with value only should fire onChange
		if(this._lastValueReported == undefined && priorityChange === null){ // don't report the initial value
			this._lastValueReported = newValue;
		}
		if((this.intermediateChanges || priorityChange) && 
			((newValue && newValue.toString)?newValue.toString():newValue) !== ((this._lastValueReported && this._lastValueReported.toString)?this._lastValueReported.toString():this._lastValueReported)){
			this._lastValueReported = newValue;
			this.onChange(newValue);
		}
	},

	getValue: function(){
		// summary: get the value of the widget.
		return this._lastValue;
	},

	undo: function(){
		// summary: restore the value to the last value passed to onChange
		this.setValue(this._lastValueReported, false);
	},

	_onKeyPress: function(e){
		if(e.keyCode == dojo.keys.ESCAPE && !e.shiftKey && !e.ctrlKey && !e.altKey){
			var v = this.getValue();
			var lv = this._lastValueReported;
			// Equality comparison of objects such as dates are done by reference so
			// two distinct objects are != even if they have the same data. So use
			// toStrings in case the values are objects.
			if((typeof lv != "undefined") && ((v!==null && v.toString)?v.toString():null) !== lv.toString()){	
				this.undo();
				dojo.stopEvent(e);
				return false;
			}
		}
		return true;
	},

	forWaiValuenow: function(){
		// summary: returns a value, reflecting the current state of the widget,
		//		to be used for the ARIA valuenow.
		// 		This method may be overridden by subclasses that want
		// 		to use something other than this.getValue() for valuenow
		return this.getValue();
	}
});

}

if(!dojo._hasResource["dijit.dijit"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.dijit"] = true;
dojo.provide("dijit.dijit");

// All the stuff in _base (these are the function that are guaranteed available without an explicit dojo.require)


// And some other stuff that we tend to pull in all the time anyway







}

/*@mpt dijit.js above;  dijit-all below ->*/

if(!dojo._hasResource["dojo.colors"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.colors"] = true;
dojo.provide("dojo.colors");

(function(){
	// this is a standard convertion prescribed by the CSS3 Color Module
	var hue2rgb = function(m1, m2, h){
		if(h < 0){ ++h;  }
		if(h > 1){ --h;  }
		var h6 = 6 * h;
		if(h6 < 1){ return m1 + (m2 - m1) * h6;  }
		if(2 * h < 1){ return m2;  }
		if(3 * h < 2){ return m1 + (m2 - m1) * (2 / 3 - h) * 6;  }
		return m1;
	};
	
	dojo.colorFromRgb = function(/*String*/ color, /*dojo.Color?*/ obj){
		// summary:
		//		get rgb(a) array from css-style color declarations
		// description:
		//		this function can handle all 4 CSS3 Color Module formats: rgb,
		//		rgba, hsl, hsla, including rgb(a) with percentage values.
		var m = color.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);
		if(m){
			var c = m[2].split(/\s*,\s*/), l = c.length, t = m[1];
			if((t == "rgb" && l == 3) || (t == "rgba" && l == 4)){
				var r = c[0];
				if(r.charAt(r.length - 1) == "%"){
					// 3 rgb percentage values
					var a = dojo.map(c, function(x){
						return parseFloat(x) * 2.56;
					});
					if(l == 4){ a[3] = c[3];  }
					return dojo.colorFromArray(a, obj);	 // dojo.Color
				}
				return dojo.colorFromArray(c, obj);	 // dojo.Color
			}
			if((t == "hsl" && l == 3) || (t == "hsla" && l == 4)){
				// normalize hsl values
				var H = ((parseFloat(c[0]) % 360) + 360) % 360 / 360,
					S = parseFloat(c[1]) / 100,
					L = parseFloat(c[2]) / 100,
					// calculate rgb according to the algorithm 
					// recommended by the CSS3 Color Module 
					m2 = L <= 0.5 ? L * (S + 1) : L + S - L * S, 
					m1 = 2 * L - m2,
					a = [hue2rgb(m1, m2, H + 1 / 3) * 256,
						hue2rgb(m1, m2, H) * 256, hue2rgb(m1, m2, H - 1 / 3) * 256, 1];
				if(l == 4){ a[3] = c[3];  }
				return dojo.colorFromArray(a, obj);	 // dojo.Color
			}
		}
		return null;	 // dojo.Color
	};
	
	var confine = function(c, low, high){
		// summary:
		//		sanitize a color component by making sure it is a number,
		//		and clamping it to valid values
		c = Number(c);
		return isNaN(c) ? high : c < low ? low : c > high ? high : c;	 // Number
	};
	
	dojo.Color.prototype.sanitize = function(){
		// summary: makes sure that the object has correct attributes
		var t = this;
		t.r = Math.round(confine(t.r, 0, 255));
		t.g = Math.round(confine(t.g, 0, 255));
		t.b = Math.round(confine(t.b, 0, 255));
		t.a = confine(t.a, 0, 1);
		return this;	 // dojo.Color
	};
})();


dojo.colors.makeGrey = function(/*Number*/ g, /*Number?*/ a){
	// summary: creates a greyscale color with an optional alpha
	return dojo.colorFromArray([g, g, g, a]);
};


// mixin all CSS3 named colors not already in _base, along with SVG 1.0 variant spellings
dojo.Color.named = dojo.mixin({
	aliceblue:	[240,248,255],
	antiquewhite:	[250,235,215],
	aquamarine:	[127,255,212],
	azure:	[240,255,255],
	beige:	[245,245,220],
	bisque:	[255,228,196],
	blanchedalmond:	[255,235,205],
	blueviolet:	[138,43,226],
	brown:	[165,42,42],
	burlywood:	[222,184,135],
	cadetblue:	[95,158,160],
	chartreuse:	[127,255,0],
	chocolate:	[210,105,30],
	coral:	[255,127,80],
	cornflowerblue:	[100,149,237],
	cornsilk:	[255,248,220],
	crimson:	[220,20,60],
	cyan:	[0,255,255],
	darkblue:	[0,0,139],
	darkcyan:	[0,139,139],
	darkgoldenrod:	[184,134,11],
	darkgray:	[169,169,169],
	darkgreen:	[0,100,0],
	darkgrey:	[169,169,169],
	darkkhaki:	[189,183,107],
	darkmagenta:	[139,0,139],
	darkolivegreen:	[85,107,47],
	darkorange:	[255,140,0],
	darkorchid:	[153,50,204],
	darkred:	[139,0,0],
	darksalmon:	[233,150,122],
	darkseagreen:	[143,188,143],
	darkslateblue:	[72,61,139],
	darkslategray:	[47,79,79],
	darkslategrey:	[47,79,79],
	darkturquoise:	[0,206,209],
	darkviolet:	[148,0,211],
	deeppink:	[255,20,147],
	deepskyblue:	[0,191,255],
	dimgray:	[105,105,105],
	dimgrey:	[105,105,105],
	dodgerblue:	[30,144,255],
	firebrick:	[178,34,34],
	floralwhite:	[255,250,240],
	forestgreen:	[34,139,34],
	gainsboro:	[220,220,220],
	ghostwhite:	[248,248,255],
	gold:	[255,215,0],
	goldenrod:	[218,165,32],
	greenyellow:	[173,255,47],
	grey:	[128,128,128],
	honeydew:	[240,255,240],
	hotpink:	[255,105,180],
	indianred:	[205,92,92],
	indigo:	[75,0,130],
	ivory:	[255,255,240],
	khaki:	[240,230,140],
	lavender:	[230,230,250],
	lavenderblush:	[255,240,245],
	lawngreen:	[124,252,0],
	lemonchiffon:	[255,250,205],
	lightblue:	[173,216,230],
	lightcoral:	[240,128,128],
	lightcyan:	[224,255,255],
	lightgoldenrodyellow:	[250,250,210],
	lightgray:	[211,211,211],
	lightgreen:	[144,238,144],
	lightgrey:	[211,211,211],
	lightpink:	[255,182,193],
	lightsalmon:	[255,160,122],
	lightseagreen:	[32,178,170],
	lightskyblue:	[135,206,250],
	lightslategray:	[119,136,153],
	lightslategrey:	[119,136,153],
	lightsteelblue:	[176,196,222],
	lightyellow:	[255,255,224],
	limegreen:	[50,205,50],
	linen:	[250,240,230],
	magenta:	[255,0,255],
	mediumaquamarine:	[102,205,170],
	mediumblue:	[0,0,205],
	mediumorchid:	[186,85,211],
	mediumpurple:	[147,112,219],
	mediumseagreen:	[60,179,113],
	mediumslateblue:	[123,104,238],
	mediumspringgreen:	[0,250,154],
	mediumturquoise:	[72,209,204],
	mediumvioletred:	[199,21,133],
	midnightblue:	[25,25,112],
	mintcream:	[245,255,250],
	mistyrose:	[255,228,225],
	moccasin:	[255,228,181],
	navajowhite:	[255,222,173],
	oldlace:	[253,245,230],
	olivedrab:	[107,142,35],
	orange:	[255,165,0],
	orangered:	[255,69,0],
	orchid:	[218,112,214],
	palegoldenrod:	[238,232,170],
	palegreen:	[152,251,152],
	paleturquoise:	[175,238,238],
	palevioletred:	[219,112,147],
	papayawhip:	[255,239,213],
	peachpuff:	[255,218,185],
	peru:	[205,133,63],
	pink:	[255,192,203],
	plum:	[221,160,221],
	powderblue:	[176,224,230],
	rosybrown:	[188,143,143],
	royalblue:	[65,105,225],
	saddlebrown:	[139,69,19],
	salmon:	[250,128,114],
	sandybrown:	[244,164,96],
	seagreen:	[46,139,87],
	seashell:	[255,245,238],
	sienna:	[160,82,45],
	skyblue:	[135,206,235],
	slateblue:	[106,90,205],
	slategray:	[112,128,144],
	slategrey:	[112,128,144],
	snow:	[255,250,250],
	springgreen:	[0,255,127],
	steelblue:	[70,130,180],
	tan:	[210,180,140],
	thistle:	[216,191,216],
	tomato:	[255,99,71],
	transparent: [0, 0, 0, 0],
	turquoise:	[64,224,208],
	violet:	[238,130,238],
	wheat:	[245,222,179],
	whitesmoke:	[245,245,245],
	yellowgreen:	[154,205,50]
}, dojo.Color.named);

}

if(!dojo._hasResource["dojo.i18n"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.i18n"] = true;
dojo.provide("dojo.i18n");

dojo.i18n.getLocalization = function(/*String*/packageName, /*String*/bundleName, /*String?*/locale){
	//	summary:
	//		Returns an Object containing the localization for a given resource
	//		bundle in a package, matching the specified locale.
	//	description:
	//		Returns a hash containing name/value pairs in its prototypesuch
	//		that values can be easily overridden.  Throws an exception if the
	//		bundle is not found.  Bundle must have already been loaded by
	//		dojo.requireLocalization() or by a build optimization step.  NOTE:
	//		try not to call this method as part of an object property
	//		definition (var foo = { bar: dojo.i18n.getLocalization() }).  In
	//		some loading situations, the bundle may not be available in time
	//		for the object definition.  Instead, call this method inside a
	//		function that is run after all modules load or the page loads (like
	//		in dojo.adOnLoad()), or in a widget lifecycle method.
	//	packageName:
	//		package which is associated with this resource
	//	bundleName:
	//		the base filename of the resource bundle (without the ".js" suffix)
	//	locale:
	//		the variant to load (optional).  By default, the locale defined by
	//		the host environment: dojo.locale

	locale = dojo.i18n.normalizeLocale(locale);

	// look for nearest locale match
	var elements = locale.split('-');
	var module = [packageName,"nls",bundleName].join('.');
	var bundle = dojo._loadedModules[module];
	if(bundle){
		var localization;
		for(var i = elements.length;  i > 0;  i--){
			var loc = elements.slice(0, i).join('_');
			if(bundle[loc]){
				localization = bundle[loc];
				break;
			}
		}
		if(!localization){
			localization = bundle.ROOT;
		}

		// make a singleton prototype so that the caller won't accidentally change the values globally
		if(localization){
			var clazz = function(){};
			clazz.prototype = localization;
			return new clazz();  // Object
		}
	}

	throw new Error("Bundle not found: " + bundleName + " in " + packageName+" , locale=" + locale);
};

dojo.i18n.normalizeLocale = function(/*String?*/locale){
	//	summary:
	//		Returns canonical form of locale, as used by Dojo.
	//
	//  description:
	//		All variants are case-insensitive and are separated by '-' as specified in RFC 3066.
	//		If no locale is specified, the dojo.locale is returned.  dojo.locale is defined by
	//		the user agent's locale unless overridden by djConfig.

	var result = locale ? locale.toLowerCase() : dojo.locale;
	if(result == "root"){
		result = "ROOT";
	}
	return result;  // String
};

dojo.i18n._requireLocalization = function(/*String*/moduleName, /*String*/bundleName, /*String?*/locale, /*String?*/availableFlatLocales){
	//	summary:
	//		See dojo.requireLocalization()
	//	description:
	// 		Called by the bootstrap, but factored out so that it is only
	// 		included in the build when needed.

	var targetLocale = dojo.i18n.normalizeLocale(locale);
 	var bundlePackage = [moduleName, "nls", bundleName].join(".");
	// NOTE: 
	//		When loading these resources, the packaging does not match what is
	//		on disk.  This is an implementation detail, as this is just a
	//		private data structure to hold the loaded resources.  e.g.
	//		tests/hello/nls/en-us/salutations.js is loaded as the object
	//		tests.hello.nls.salutations.en_us={...} The structure on disk is
	//		intended to be most convenient for developers and translators, but
	//		in memory it is more logical and efficient to store in a different
	//		order.  Locales cannot use dashes, since the resulting path will
	//		not evaluate as valid JS, so we translate them to underscores.
	
	//Find the best-match locale to load if we have available flat locales.
	var bestLocale = "";
	if(availableFlatLocales){
		var flatLocales = availableFlatLocales.split(",");
		for(var i = 0;  i < flatLocales.length;  i++){
			//Locale must match from start of string.
			if(targetLocale.indexOf(flatLocales[i]) == 0){
				if(flatLocales[i].length > bestLocale.length){
					bestLocale = flatLocales[i];
				}
			}
		}
		if(!bestLocale){
			bestLocale = "ROOT";
		}		
	}

	//See if the desired locale is already loaded.
	var tempLocale = availableFlatLocales ? bestLocale : targetLocale;
	var bundle = dojo._loadedModules[bundlePackage];
	var localizedBundle = null;
	if(bundle){
		if(djConfig.localizationComplete && bundle._built){return;}
		var jsLoc = tempLocale.replace(/-/g, '_');
		var translationPackage = bundlePackage+"."+jsLoc;
		localizedBundle = dojo._loadedModules[translationPackage];
	}

	if(!localizedBundle){
		bundle = dojo["provide"](bundlePackage);
		var syms = dojo._getModuleSymbols(moduleName);
		var modpath = syms.concat("nls").join("/");
		var parent;

		dojo.i18n._searchLocalePath(tempLocale, availableFlatLocales, function(loc){
			var jsLoc = loc.replace(/-/g, '_');
			var translationPackage = bundlePackage + "." + jsLoc;
			var loaded = false;
			if(!dojo._loadedModules[translationPackage]){
				// Mark loaded whether it's found or not, so that further load attempts will not be made
				dojo["provide"](translationPackage);
				var module = [modpath];
				if(loc != "ROOT"){module.push(loc);}
				module.push(bundleName);
				var filespec = module.join("/") + '.js';
				loaded = dojo._loadPath(filespec, null, function(hash){
					// Use singleton with prototype to point to parent bundle, then mix-in result from loadPath
					var clazz = function(){};
					clazz.prototype = parent;
					bundle[jsLoc] = new clazz();
					for(var j in hash){ bundle[jsLoc][j] = hash[j];  }
				});
			}else{
				loaded = true;
			}
			if(loaded && bundle[jsLoc]){
				parent = bundle[jsLoc];
			}else{
				bundle[jsLoc] = parent;
			}
			
			if(availableFlatLocales){
				//Stop the locale path searching if we know the availableFlatLocales, since
				//the first call to this function will load the only bundle that is needed.
				return true;
			}
		});
	}

	//Save the best locale bundle as the target locale bundle when we know the
	//the available bundles.
	if(availableFlatLocales && targetLocale != bestLocale){
		bundle[targetLocale.replace(/-/g, '_')] = bundle[bestLocale.replace(/-/g, '_')];
	}
};

(function(){
	// If other locales are used, dojo.requireLocalization should load them as
	// well, by default. 
	// 
	// Override dojo.requireLocalization to do load the default bundle, then
	// iterate through the extraLocale list and load those translations as
	// well, unless a particular locale was requested.

	var extra = djConfig.extraLocale;
	if(extra){
		if(!extra instanceof Array){
			extra = [extra];
		}

		var req = dojo.i18n._requireLocalization;
		dojo.i18n._requireLocalization = function(m, b, locale, availableFlatLocales){
			req(m,b,locale, availableFlatLocales);
			if(locale){return;}
			for(var i=0;  i<extra.length;  i++){
				req(m,b,extra[i], availableFlatLocales);
			}
		};
	}
})();

dojo.i18n._searchLocalePath = function(/*String*/locale, /*Boolean*/down, /*Function*/searchFunc){
	//	summary:
	//		A helper method to assist in searching for locale-based resources.
	//		Will iterate through the variants of a particular locale, either up
	//		or down, executing a callback function.  For example, "en-us" and
	//		true will try "en-us" followed by "en" and finally "ROOT".

	locale = dojo.i18n.normalizeLocale(locale);

	var elements = locale.split('-');
	var searchlist = [];
	for(var i = elements.length;  i > 0;  i--){
		searchlist.push(elements.slice(0, i).join('-'));
	}
	searchlist.push(false);
	if(down){searchlist.reverse();}

	for(var j = searchlist.length - 1;  j >= 0;  j--){
		var loc = searchlist[j] || "ROOT";
		var stop = searchFunc(loc);
		if(stop){ break;  }
	}
};

dojo.i18n._preloadLocalizations = function(/*String*/bundlePrefix, /*Array*/localesGenerated){
	//	summary:
	//		Load built, flattened resource bundles, if available for all
	//		locales used in the page. Only called by built layer files.

	function preload(locale){
		locale = dojo.i18n.normalizeLocale(locale);
		dojo.i18n._searchLocalePath(locale, true, function(loc){
			for(var i=0;  i<localesGenerated.length;i++){
				if(localesGenerated[i] == loc){
					dojo["require"](bundlePrefix+"_"+loc);
					return true;  // Boolean
				}
			}
			return false;  // Boolean
		});
	}
	preload();
	var extra = djConfig.extraLocale||[];
	for(var i=0;  i<extra.length;  i++){
		preload(extra[i]);
	}
};

}

if(!dojo._hasResource["dijit.ColorPalette"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.ColorPalette"] = true;
dojo.provide("dijit.ColorPalette");







dojo.declare(
		"dijit.ColorPalette",
		[dijit._Widget, dijit._Templated],
{
	// summary
	//		Grid showing various colors, so the user can pick a certain color

	// defaultTimeout: Number
	//		number of milliseconds before a held key or button becomes typematic
	defaultTimeout: 500,

	// timeoutChangeRate: Number
	//		fraction of time used to change the typematic timer between events
	//		1.0 means that each typematic event fires at defaultTimeout intervals
	//		< 1.0 means that each typematic event fires at an increasing faster rate
	timeoutChangeRate: 0.90,

	// palette: String
	//		Size of grid, either "7x10" or "3x4".
	palette: "7x10",

	//_value: String
	//		The value of the selected color.
	value: null,

	//_currentFocus: Integer
	//		Index of the currently focused color.
	_currentFocus: 0,

	// _xDim: Integer
	//		This is the number of colors horizontally across.
	_xDim: null,

	// _yDim: Integer
	///		This is the number of colors vertically down.
	_yDim: null,

	// _palettes: Map
	// 		This represents the value of the colors.
	//		The first level is a hashmap of the different arrays available
	//		The next two dimensions represent the columns and rows of colors.
	_palettes: {

		"7x10":	[["white", "seashell", "cornsilk", "lemonchiffon","lightyellow", "palegreen", "paleturquoise", "lightcyan",	"lavender", "plum"],
				["lightgray", "pink", "bisque", "moccasin", "khaki", "lightgreen", "lightseagreen", "lightskyblue", "cornflowerblue", "violet"],
				["silver", "lightcoral", "sandybrown", "orange", "palegoldenrod", "chartreuse", "mediumturquoise", 	"skyblue", "mediumslateblue","orchid"],
				["gray", "red", "orangered", "darkorange", "yellow", "limegreen", 	"darkseagreen", "royalblue", "slateblue", "mediumorchid"],
				["dimgray", "crimson", 	"chocolate", "coral", "gold", "forestgreen", "seagreen", "blue", "blueviolet", "darkorchid"],
				["darkslategray","firebrick","saddlebrown", "sienna", "olive", "green", "darkcyan", "mediumblue","darkslateblue", "darkmagenta" ],
				["black", "darkred", "maroon", "brown", "darkolivegreen", "darkgreen", "midnightblue", "navy", "indigo", 	"purple"]],

		"3x4": [["white", "lime", "green", "blue"],
			["silver", "yellow", "fuchsia", "navy"],
			["gray", "red", "purple", "black"]]	

	},

	// _imagePaths: Map
	//		This is stores the path to the palette images
	_imagePaths: {
		"7x10": dojo.moduleUrl("dijit", "templates/colors7x10.png"),
		"3x4": dojo.moduleUrl("dijit", "templates/colors3x4.png")
	},

	// _paletteCoords: Map
	//		This is a map that is used to calculate the coordinates of the
	//		images that make up the palette.
	_paletteCoords: {
		"leftOffset": 4, "topOffset": 4,
		"cWidth": 20, "cHeight": 20
		
	},

	// templatePath: String
	//		Path to the template of this widget.
	templateString:"<div class=\"dijitInline dijitColorPalette\">\n\t<div class=\"dijitColorPaletteInner\" dojoAttachPoint=\"divNode\" waiRole=\"grid\" tabIndex=\"-1\">\n\t\t<img class=\"dijitColorPaletteUnder\" dojoAttachPoint=\"imageNode\" waiRole=\"presentation\">\n\t</div>\t\n</div>\n",

	// _paletteDims: Object
	//		Size of the supported palettes for alignment purposes.
	_paletteDims: {
		"7x10": {"width": "206px", "height": "145px"},
		"3x4": {"width": "86px", "height": "64px"}
	},


	postCreate: function(){
		// A name has to be given to the colorMap, this needs to be unique per Palette.
		dojo.mixin(this.divNode.style, this._paletteDims[this.palette]);
		this.imageNode.setAttribute("src", this._imagePaths[this.palette]);
		var choices = this._palettes[this.palette];	 
		this.domNode.style.position = "relative";
		this._highlightNodes = [];	 
		this.colorNames = dojo.i18n.getLocalization("dojo", "colors", this.lang);
		var url= dojo.moduleUrl("dijit", "templates/blank.gif");
		var colorObject = new dojo.Color(),
		    coords = this._paletteCoords;
		for(var row=0;  row < choices.length;  row++){
			for(var col=0;  col < choices[row].length;  col++) {
                var highlightNode = document.createElement("img");
                highlightNode.src = url;
                dojo.addClass(highlightNode, "dijitPaletteImg");
                var color = choices[row][col],
                        colorValue = colorObject.setColor(dojo.Color.named[color]);
                highlightNode.alt = this.colorNames[color];
                highlightNode.color = colorValue.toHex();
                var highlightStyle = highlightNode.style;
                highlightStyle.color = highlightStyle.backgroundColor = highlightNode.color;
                dojo.forEach(["Dijitclick", "MouseOut", "MouseOver", "Blur", "Focus"], function(handler) {
                    this.connect(highlightNode, "on" + handler.toLowerCase(), "_onColor" + handler);
                }, this);
                this.divNode.appendChild(highlightNode);
                highlightStyle.top = coords.topOffset + (row * coords.cHeight) + "px";
                highlightStyle.left = coords.leftOffset + (col * coords.cWidth) + "px";
                highlightNode.setAttribute("tabIndex", "-1");
                highlightNode.title = this.colorNames[color];
                dijit.setWaiRole(highlightNode, "gridcell");
                highlightNode.index = this._highlightNodes.length;
                this._highlightNodes.push(highlightNode);
            }
		}
		this._highlightNodes[this._currentFocus].tabIndex = 0;
		this._xDim = choices[0].length;
		this._yDim = choices.length;

		// Now set all events
		// The palette itself is navigated to with the tab key on the keyboard
		// Keyboard navigation within the Palette is with the arrow keys
		// Spacebar selects the color.
		// For the up key the index is changed by negative the x dimension.		

		var keyIncrementMap = {
			UP_ARROW: -this._xDim,
			// The down key the index is increase by the x dimension.	
			DOWN_ARROW: this._xDim,
			// Right and left move the index by 1.
			RIGHT_ARROW: 1,
			LEFT_ARROW: -1
		};
		for(var key in keyIncrementMap){
			this._connects.push(dijit.typematic.addKeyListener(this.domNode,
				{keyCode:dojo.keys[key], ctrlKey:false, altKey:false, shiftKey:false},
				this,
				function(){
					var increment = keyIncrementMap[key];
					return function(count){ this._navigateByKey(increment, count);  };
				}(),
				this.timeoutChangeRate, this.defaultTimeout));
		}
	},

	focus: function(){
		// summary:
		//		Focus this ColorPalette.
		dijit.focus(this._highlightNodes[this._currentFocus]);
	},

	onChange: function(color){
		// summary:
		//		Callback when a color is selected.
		// color: String
		//		Hex value corresponding to color.
//		console.debug("Color selected is: "+color);
	},

	_onColorDijitclick: function(/*Event*/ evt){
		// summary:
		//		Handler for click, enter key & space key. Selects the color.
		// evt:
		//		The event.
		var target = evt.currentTarget;
		if (this._currentFocus != target.index){
			this._currentFocus = target.index;
			dijit.focus(target);
		}
		this._selectColor(target);
		dojo.stopEvent(evt);
	},

	_onColorMouseOut: function(/*Event*/ evt){
		// summary:
		//		Handler for onMouseOut. Removes highlight.
		// evt:
		//		The mouse event.
		dojo.removeClass(evt.currentTarget, "dijitPaletteImgHighlight");
	},

	_onColorMouseOver: function(/*Event*/ evt){
		// summary:
		//		Handler for onMouseOver. Highlights the color.
		// evt:
		//		The mouse event.
		var target = evt.currentTarget;
		target.tabIndex = 0;
		target.focus();
	},

	_onColorBlur: function(/*Event*/ evt){
		// summary:
		//		Handler for onBlur. Removes highlight and sets
		//		the first color as the palette's tab point.
		// evt:
		//		The blur event.
		dojo.removeClass(evt.currentTarget, "dijitPaletteImgHighlight");
		evt.currentTarget.tabIndex = -1;
		this._currentFocus = 0;
		this._highlightNodes[0].tabIndex = 0;
	},

	_onColorFocus: function(/*Event*/ evt){
		// summary:
		//		Handler for onFocus. Highlights the color.
		// evt:
		//		The focus event.
		if(this._currentFocus != evt.currentTarget.index){
			this._highlightNodes[this._currentFocus].tabIndex = -1;
		}
		this._currentFocus = evt.currentTarget.index;
		dojo.addClass(evt.currentTarget, "dijitPaletteImgHighlight");

	},

	_selectColor: function(selectNode){	
		// summary:
		// 		This selects a color. It triggers the onChange event
		// area:
		//		The area node that covers the color being selected.
		this.onChange(this.value = selectNode.color);
	},

	_navigateByKey: function(increment, typeCount){
		// summary:we
		// 	  	This is the callback for typematic.
		// 		It changes the focus and the highlighed color.
		// increment:
		// 		How much the key is navigated.
		// typeCount:
		//		How many times typematic has fired.

		// typecount == -1 means the key is released.
		if(typeCount == -1){ return;  }

		var newFocusIndex = this._currentFocus + increment;
		if(newFocusIndex < this._highlightNodes.length && newFocusIndex > -1)
		{
			var focusNode = this._highlightNodes[newFocusIndex];
			focusNode.tabIndex = 0;
			focusNode.focus();
		}
	}
});

}

if(!dojo._hasResource["dijit.Declaration"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.Declaration"] = true;
dojo.provide("dijit.Declaration");



dojo.declare(
	"dijit.Declaration",
	dijit._Widget,
	{
		// summary:
		//		The Declaration widget allows a user to declare new widget
		//		classes directly from a snippet of markup.

		_noScript: true,
		widgetClass: "",
		replaceVars: true,
		defaults: null,
		mixins: [],
		buildRendering: function(){
			var src = this.srcNodeRef.parentNode.removeChild(this.srcNodeRef);
			var preambles = dojo.query("> script[type='dojo/method'][event='preamble']", src).orphan();
			var scripts = dojo.query("> script[type^='dojo/']", src).orphan();
			var srcType = src.nodeName;

			var propList = this.defaults||{};

			// map array of strings like [ "dijit.form.Button" ] to array of mixin objects
			// (note that dojo.map(this.mixins, dojo.getObject) doesn't work because it passes
			// a bogus third argument to getObject(), confusing it)
			this.mixins = this.mixins.length ?
				dojo.map(this.mixins, function(name){ return dojo.getObject(name);  } ) :
				[ dijit._Widget, dijit._Templated ];

			if(preambles.length){
				// we only support one preamble. So be it.
				propList.preamble = dojo.parser._functionFromScript(preambles[0]);
			}

			var parsedScripts = dojo.map(scripts, function(s){
				var evt = s.getAttribute("event")||"postscript";
				return {
					event: evt,
					func: dojo.parser._functionFromScript(s)
				};
			});

			// do the connects for each <script type="dojo/connect" event="foo"> block and make
			// all <script type="dojo/method"> tags execute right after construction
			this.mixins.push(function(){
				dojo.forEach(parsedScripts, function(s){
					dojo.connect(this, s.event, this, s.func);
				}, this);
			});

			propList.widgetsInTemplate = true;
			propList._skipNodeCache = true;
			propList.templateString = "<"+srcType+" class='"+src.className+"' dojoAttachPoint='"+(src.getAttribute("dojoAttachPoint")||'')+"' dojoAttachEvent='"+(src.getAttribute("dojoAttachEvent")||'')+"' >"+src.innerHTML.replace(/\%7B/g,"{").replace(/\%7D/g,"}")+"</"+srcType+">";
			// console.debug(propList.templateString);

			// strip things so we don't create stuff under us in the initial setup phase
			dojo.query("[dojoType]", src).forEach(function(node){
				node.removeAttribute("dojoType");
			});

			// create the new widget class
			dojo.declare(
				this.widgetClass,
				this.mixins,
				propList
			);
		}
	}
);

}

if(!dojo._hasResource["dojo.dnd.common"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.dnd.common"] = true;
dojo.provide("dojo.dnd.common");

dojo.dnd._copyKey = navigator.appVersion.indexOf("Macintosh") < 0 ? "ctrlKey" : "metaKey";

dojo.dnd.getCopyKeyState = function(e) {
	// summary: abstracts away the difference between selection on Mac and PC,
	//	and returns the state of the "copy" key to be pressed.
	// e: Event: mouse event
	return e[dojo.dnd._copyKey];	 // Boolean
};

dojo.dnd._uniqueId = 0;
dojo.dnd.getUniqueId = function(){
	// summary: returns a unique string for use with any DOM element
	var id;
	do{
		id = "dojoUnique" + (++dojo.dnd._uniqueId);
	}while(dojo.byId(id));
	return id;
};

dojo.dnd._empty = {};

dojo.dnd.isFormElement = function(/*Event*/ e){
	// summary: returns true, if user clicked on a form element
	var t = e.target;
	if(t.nodeType == 3 /*TEXT_NODE*/){
		t = t.parentNode;
	}
	return " button textarea input select option ".indexOf(" " + t.tagName.toLowerCase() + " ") >= 0;	 // Boolean
};

}

if(!dojo._hasResource["dojo.dnd.autoscroll"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.dnd.autoscroll"] = true;
dojo.provide("dojo.dnd.autoscroll");

dojo.dnd.getViewport = function(){
	// summary: returns a viewport size (visible part of the window)

	// FIXME: need more docs!!
	var d = dojo.doc, dd = d.documentElement, w = window, b = dojo.body();
	if(dojo.isMozilla){
		return {w: dd.clientWidth, h: w.innerHeight};	 // Object
	}else if(!dojo.isOpera && w.innerWidth){
		return {w: w.innerWidth, h: w.innerHeight};	 	// Object
	}else if (!dojo.isOpera && dd && dd.clientWidth){
		return {w: dd.clientWidth, h: dd.clientHeight};	 // Object
	}else if (b.clientWidth){
		return {w: b.clientWidth, h: b.clientHeight};	 // Object
	}
	return null;	 // Object
};

dojo.dnd.V_TRIGGER_AUTOSCROLL = 32;
dojo.dnd.H_TRIGGER_AUTOSCROLL = 32;

dojo.dnd.V_AUTOSCROLL_VALUE = 16;
dojo.dnd.H_AUTOSCROLL_VALUE = 16;

dojo.dnd.autoScroll = function(e){
	// summary:
	//		a handler for onmousemove event, which scrolls the window, if
	//		necesary
	// e: Event:
	//		onmousemove event

	// FIXME: needs more docs!
	var v = dojo.dnd.getViewport(), dx = 0, dy = 0;
	if(e.clientX < dojo.dnd.H_TRIGGER_AUTOSCROLL){
		dx = -dojo.dnd.H_AUTOSCROLL_VALUE;
	}else if(e.clientX > v.w - dojo.dnd.H_TRIGGER_AUTOSCROLL){
		dx = dojo.dnd.H_AUTOSCROLL_VALUE;
	}
	if(e.clientY < dojo.dnd.V_TRIGGER_AUTOSCROLL){
		dy = -dojo.dnd.V_AUTOSCROLL_VALUE;
	}else if(e.clientY > v.h - dojo.dnd.V_TRIGGER_AUTOSCROLL){
		dy = dojo.dnd.V_AUTOSCROLL_VALUE;
	}
	window.scrollBy(dx, dy);
};

dojo.dnd._validNodes = {"div": 1, "p": 1, "td": 1};
dojo.dnd._validOverflow = {"auto": 1, "scroll": 1};

dojo.dnd.autoScrollNodes = function(e){
	// summary:
	//		a handler for onmousemove event, which scrolls the first avaialble
	//		Dom element, it falls back to dojo.dnd.autoScroll()
	// e: Event:
	//		onmousemove event

	// FIXME: needs more docs!
	for(var n = e.target;  n;){
		if(n.nodeType == 1 && (n.tagName.toLowerCase() in dojo.dnd._validNodes)){
			var s = dojo.getComputedStyle(n);
			if(s.overflow.toLowerCase() in dojo.dnd._validOverflow){
				var b = dojo._getContentBox(n, s), t = dojo._abs(n, true);
				// console.debug(b.l, b.t, t.x, t.y, n.scrollLeft, n.scrollTop);
				b.l += t.x + n.scrollLeft;
				b.t += t.y + n.scrollTop;
				var w = Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL, b.w / 2), 
					h = Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL, b.h / 2),
					rx = e.pageX - b.l, ry = e.pageY - b.t, dx = 0, dy = 0;
				if(rx > 0 && rx < b.w){
					if(rx < w){
						dx = -dojo.dnd.H_AUTOSCROLL_VALUE;
					}else if(rx > b.w - w){
						dx = dojo.dnd.H_AUTOSCROLL_VALUE;
					}
				}
				//console.debug("ry =", ry, "b.h =", b.h, "h =", h);
				if(ry > 0 && ry < b.h){
					if(ry < h){
						dy = -dojo.dnd.V_AUTOSCROLL_VALUE;
					}else if(ry > b.h - h){
						dy = dojo.dnd.V_AUTOSCROLL_VALUE;
					}
				}
				var oldLeft = n.scrollLeft, oldTop = n.scrollTop;
				n.scrollLeft = n.scrollLeft + dx;
				n.scrollTop  = n.scrollTop  + dy;
				// if(dx || dy){ console.debug(oldLeft + ", " + oldTop + "\n" + dx + ", " + dy + "\n" + n.scrollLeft + ", " + n.scrollTop);  }
				if(oldLeft != n.scrollLeft || oldTop != n.scrollTop){ return;  }
			}
		}
		try{
			n = n.parentNode;
		}catch(x){
			n = null;
		}
	}
	dojo.dnd.autoScroll(e);
};

}

if(!dojo._hasResource["dojo.dnd.Mover"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.dnd.Mover"] = true;
dojo.provide("dojo.dnd.Mover");




dojo.declare("dojo.dnd.Mover", null, {
	constructor: function(node, e, host){
		// summary: an object, which makes a node follow the mouse, 
		//	used as a default mover, and as a base class for custom movers
		// node: Node: a node (or node's id) to be moved
		// e: Event: a mouse event, which started the move;
		//	only pageX and pageY properties are used
		// host: Object?: object which implements the functionality of the move,
		//	 and defines proper events (onMoveStart and onMoveStop)
		this.node = dojo.byId(node);
		this.marginBox = {l: e.pageX, t: e.pageY};
		this.mouseButton = e.button;
		var h = this.host = host, d = node.ownerDocument, 
			firstEvent = dojo.connect(d, "onmousemove", this, "onFirstMove");
		this.events = [
			dojo.connect(d, "onmousemove", this, "onMouseMove"),
			dojo.connect(d, "onmouseup",   this, "onMouseUp"),
			// cancel text selection and text dragging
			dojo.connect(d, "ondragstart",   dojo, "stopEvent"),
			dojo.connect(d, "onselectstart", dojo, "stopEvent"),
			firstEvent
		];
		// notify that the move has started
		if(h && h.onMoveStart){
			h.onMoveStart(this);
		}
	},
	// mouse event processors
	onMouseMove: function(e){
		// summary: event processor for onmousemove
		// e: Event: mouse event
		dojo.dnd.autoScroll(e);
		var m = this.marginBox;
		this.host.onMove(this, {l: m.l + e.pageX, t: m.t + e.pageY});
	},
	onMouseUp: function(e){
		if(this.mouseButton == e.button){
			this.destroy();
		}
	},
	// utilities
	onFirstMove: function(){
		// summary: makes the node absolute;  it is meant to be called only once
		this.node.style.position = "absolute";	 // enforcing the absolute mode
		var m = dojo.marginBox(this.node);
		m.l -= this.marginBox.l;
		m.t -= this.marginBox.t;
		this.marginBox = m;
		this.host.onFirstMove(this);
		dojo.disconnect(this.events.pop());
	},
	destroy: function(){
		// summary: stops the move, deletes all references, so the object can be garbage-collected
		dojo.forEach(this.events, dojo.disconnect);
		// undo global settings
		var h = this.host;
		if(h && h.onMoveStop){
			h.onMoveStop(this);
		}
		// destroy objects
		this.events = this.node = null;
	}
});

}

if(!dojo._hasResource["dojo.dnd.Moveable"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.dnd.Moveable"] = true;
dojo.provide("dojo.dnd.Moveable");



dojo.declare("dojo.dnd.Moveable", null, {
	// object attributes (for markup)
	handle: "",
	delay: 0,
	skip: false,
	
	constructor: function(node, params){
		// summary: an object, which makes a node moveable
		// node: Node: a node (or node's id) to be moved
		// params: Object: an optional object with additional parameters;
		//	following parameters are recognized:
		//		handle: Node: a node (or node's id), which is used as a mouse handle
		//			if omitted, the node itself is used as a handle
		//		delay: Number: delay move by this number of pixels
		//		skip: Boolean: skip move of form elements
		//		mover: Object: a constructor of custom Mover
		this.node = dojo.byId(node);
		if(!params){ params = {};  }
		this.handle = params.handle ? dojo.byId(params.handle) : null;
		if(!this.handle){ this.handle = this.node;  }
		this.delay = params.delay > 0 ? params.delay : 0;
		this.skip  = params.skip;
		this.mover = params.mover ? params.mover : dojo.dnd.Mover;
		this.events = [
			dojo.connect(this.handle, "onmousedown", this, "onMouseDown"),
			// cancel text selection and text dragging
			dojo.connect(this.handle, "ondragstart",   this, "onSelectStart"),
			dojo.connect(this.handle, "onselectstart", this, "onSelectStart")
		];
	},

	// markup methods
	markupFactory: function(params, node){
		return new dojo.dnd.Moveable(node, params);
	},

	// methods
	destroy: function(){
		// summary: stops watching for possible move, deletes all references, so the object can be garbage-collected
		dojo.forEach(this.events, dojo.disconnect);
		this.events = this.node = this.handle = null;
	},
	
	// mouse event processors
	onMouseDown: function(e){
		// summary: event processor for onmousedown, creates a Mover for the node
		// e: Event: mouse event
		if(this.skip && dojo.dnd.isFormElement(e)){ return;  }
		if(this.delay){
			this.events.push(dojo.connect(this.handle, "onmousemove", this, "onMouseMove"));
			this.events.push(dojo.connect(this.handle, "onmouseup", this, "onMouseUp"));
			this._lastX = e.pageX;
			this._lastY = e.pageY;
		}else{
			new this.mover(this.node, e, this);
		}
		dojo.stopEvent(e);
	},
	onMouseMove: function(e){
		// summary: event processor for onmousemove, used only for delayed drags
		// e: Event: mouse event
		if(Math.abs(e.pageX - this._lastX) > this.delay || Math.abs(e.pageY - this._lastY) > this.delay){
			this.onMouseUp(e);
			new this.mover(this.node, e, this);
		}
		dojo.stopEvent(e);
	},
	onMouseUp: function(e){
		// summary: event processor for onmouseup, used only for delayed delayed drags
		// e: Event: mouse event
		dojo.disconnect(this.events.pop());
		dojo.disconnect(this.events.pop());
	},
	onSelectStart: function(e){
		// summary: event processor for onselectevent and ondragevent
		// e: Event: mouse event
		if(!this.skip || !dojo.dnd.isFormElement(e)){
			dojo.stopEvent(e);
		}
	},
	
	// local events
	onMoveStart: function(/* dojo.dnd.Mover */ mover){
		// summary: called before every move operation
		dojo.publish("/dnd/move/start", [mover]);
		dojo.addClass(dojo.body(), "dojoMove");  
		dojo.addClass(this.node, "dojoMoveItem");  
	},
	onMoveStop: function(/* dojo.dnd.Mover */ mover){
		// summary: called after every move operation
		dojo.publish("/dnd/move/stop", [mover]);
		dojo.removeClass(dojo.body(), "dojoMove");
		dojo.removeClass(this.node, "dojoMoveItem");
	},
	onFirstMove: function(/* dojo.dnd.Mover */ mover){
		// summary: called during the very first move notification,
		//	can be used to initialize coordinates, can be overwritten.
		
		// default implementation does nothing
	},
	onMove: function(/* dojo.dnd.Mover */ mover, /* Object */ leftTop){
		// summary: called during every move notification,
		//	should actually move the node, can be overwritten.
		this.onMoving(mover, leftTop);
		dojo.marginBox(mover.node, leftTop);
		this.onMoved(mover, leftTop);
	},
	onMoving: function(/* dojo.dnd.Mover */ mover, /* Object */ leftTop){
		// summary: called before every incremental move,
		//	can be overwritten.
		
		// default implementation does nothing
	},
	onMoved: function(/* dojo.dnd.Mover */ mover, /* Object */ leftTop){
		// summary: called after every incremental move,
		//	can be overwritten.
		
		// default implementation does nothing
	}
});

}

if(!dojo._hasResource["dojo.dnd.move"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.dnd.move"] = true;
dojo.provide("dojo.dnd.move");




dojo.declare("dojo.dnd.move.constrainedMoveable", dojo.dnd.Moveable, {
	// object attributes (for markup)
	constraints: function(){},
	within: false,
	
	// markup methods
	markupFactory: function(params, node){
		return new dojo.dnd.move.constrainedMoveable(node, params);
	},

	constructor: function(node, params){
		// summary: an object, which makes a node moveable
		// node: Node: a node (or node's id) to be moved
		// params: Object: an optional object with additional parameters;
		//	following parameters are recognized:
		//		constraints: Function: a function, which calculates a constraint box,
		//			it is called in a context of the moveable object.
		//		within: Boolean: restrict move within boundaries.
		//	the rest is passed to the base class
		if(!params){ params = {};  }
		this.constraints = params.constraints;
		this.within = params.within;
	},
	onFirstMove: function(/* dojo.dnd.Mover */ mover){
		// summary: called during the very first move notification,
		//	can be used to initialize coordinates, can be overwritten.
		var c = this.constraintBox = this.constraints.call(this, mover), m = mover.marginBox;
		c.r = c.l + c.w - (this.within ? m.w : 0);
		c.b = c.t + c.h - (this.within ? m.h : 0);
	},
	onMove: function(/* dojo.dnd.Mover */ mover, /* Object */ leftTop){
		// summary: called during every move notification,
		//	should actually move the node, can be overwritten.
		var c = this.constraintBox;
		leftTop.l = leftTop.l < c.l ? c.l : c.r < leftTop.l ? c.r : leftTop.l;
		leftTop.t = leftTop.t < c.t ? c.t : c.b < leftTop.t ? c.b : leftTop.t;
		dojo.marginBox(mover.node, leftTop);
	}
});

dojo.declare("dojo.dnd.move.boxConstrainedMoveable", dojo.dnd.move.constrainedMoveable, {
	// object attributes (for markup)
	box: {},
	
	// markup methods
	markupFactory: function(params, node){
		return new dojo.dnd.move.boxConstrainedMoveable(node, params);
	},

	constructor: function(node, params){
		// summary: an object, which makes a node moveable
		// node: Node: a node (or node's id) to be moved
		// params: Object: an optional object with additional parameters;
		//	following parameters are recognized:
		//		box: Object: a constraint box
		//	the rest is passed to the base class
		var box = params && params.box;
		this.constraints = function(){ return box;  };
	}
});

dojo.declare("dojo.dnd.move.parentConstrainedMoveable", dojo.dnd.move.constrainedMoveable, {
	// object attributes (for markup)
	area: "content",

	// markup methods
	markupFactory: function(params, node){
		return new dojo.dnd.move.parentConstrainedMoveable(node, params);
	},

	constructor: function(node, params){
		// summary: an object, which makes a node moveable
		// node: Node: a node (or node's id) to be moved
		// params: Object: an optional object with additional parameters;
		//	following parameters are recognized:
		//		area: String: a parent's area to restrict the move,
		//			can be "margin", "border", "padding", or "content".
		//	the rest is passed to the base class
		var area = params && params.area;
		this.constraints = function(){
			var n = this.node.parentNode, 
				s = dojo.getComputedStyle(n), 
				mb = dojo._getMarginBox(n, s);
			if(area == "margin"){
				return mb;	 // Object
			}
			var t = dojo._getMarginExtents(n, s);
			mb.l += t.l, mb.t += t.t, mb.w -= t.w, mb.h -= t.h;
			if(area == "border"){
				return mb;	 // Object
			}
			t = dojo._getBorderExtents(n, s);
			mb.l += t.l, mb.t += t.t, mb.w -= t.w, mb.h -= t.h;
			if(area == "padding"){
				return mb;	 // Object
			}
			t = dojo._getPadExtents(n, s);
			mb.l += t.l, mb.t += t.t, mb.w -= t.w, mb.h -= t.h;
			return mb;	 // Object
		};
	}
});

// WARNING: below are obsolete objects, instead of custom movers use custom moveables (above)

dojo.dnd.move.constrainedMover = function(fun, within){
	// summary: returns a constrained version of dojo.dnd.Mover
	// description: this function produces n object, which will put a constraint on 
	//	the margin box of dragged object in absolute coordinates
	// fun: Function: called on drag, and returns a constraint box
	// within: Boolean: if true, constraints the whole dragged object withtin the rectangle, 
	//	otherwise the constraint is applied to the left-top corner
	var mover = function(node, e, notifier){
		dojo.dnd.Mover.call(this, node, e, notifier);
	};
	dojo.extend(mover, dojo.dnd.Mover.prototype);
	dojo.extend(mover, {
		onMouseMove: function(e){
			// summary: event processor for onmousemove
			// e: Event: mouse event
			dojo.dnd.autoScroll(e);
			var m = this.marginBox, c = this.constraintBox,
				l = m.l + e.pageX, t = m.t + e.pageY;
			l = l < c.l ? c.l : c.r < l ? c.r : l;
			t = t < c.t ? c.t : c.b < t ? c.b : t;
			this.host.onMove(this, {l: l, t: t});
		},
		onFirstMove: function(){
			// summary: called once to initialize things;  it is meant to be called only once
			dojo.dnd.Mover.prototype.onFirstMove.call(this);
			var c = this.constraintBox = fun.call(this), m = this.marginBox;
			c.r = c.l + c.w - (within ? m.w : 0);
			c.b = c.t + c.h - (within ? m.h : 0);
		}
	});
	return mover;	 // Object
};

dojo.dnd.move.boxConstrainedMover = function(box, within){
	// summary: a specialization of dojo.dnd.constrainedMover, which constrains to the specified box
	// box: Object: a constraint box (l, t, w, h)
	// within: Boolean: if true, constraints the whole dragged object withtin the rectangle, 
	//	otherwise the constraint is applied to the left-top corner
	return dojo.dnd.move.constrainedMover(function(){ return box;  }, within);	 // Object
};

dojo.dnd.move.parentConstrainedMover = function(area, within){
	// summary: a specialization of dojo.dnd.constrainedMover, which constrains to the parent node
	// area: String: "margin" to constrain within the parent's margin box, "border" for the border box,
	//	"padding" for the padding box, and "content" for the content box;  "content" is the default value.
	// within: Boolean: if true, constraints the whole dragged object withtin the rectangle, 
	//	otherwise the constraint is applied to the left-top corner
	var fun = function(){
		var n = this.node.parentNode, 
			s = dojo.getComputedStyle(n), 
			mb = dojo._getMarginBox(n, s);
		if(area == "margin"){
			return mb;	 // Object
		}
		var t = dojo._getMarginExtents(n, s);
		mb.l += t.l, mb.t += t.t, mb.w -= t.w, mb.h -= t.h;
		if(area == "border"){
			return mb;	 // Object
		}
		t = dojo._getBorderExtents(n, s);
		mb.l += t.l, mb.t += t.t, mb.w -= t.w, mb.h -= t.h;
		if(area == "padding"){
			return mb;	 // Object
		}
		t = dojo._getPadExtents(n, s);
		mb.l += t.l, mb.t += t.t, mb.w -= t.w, mb.h -= t.h;
		return mb;	 // Object
	};
	return dojo.dnd.move.constrainedMover(fun, within);	 // Object
};

// patching functions one level up for compatibility

dojo.dnd.constrainedMover = dojo.dnd.move.constrainedMover;
dojo.dnd.boxConstrainedMover = dojo.dnd.move.boxConstrainedMover;
dojo.dnd.parentConstrainedMover = dojo.dnd.move.parentConstrainedMover;

}

if(!dojo._hasResource["dojo.fx"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.fx"] = true;
dojo.provide("dojo.fx");
dojo.provide("dojo.fx.Toggler");

dojo.fx.chain = function(/*dojo._Animation[]*/ animations){
	// summary: Chain a list of dojo._Animation s to run in sequence
	// example:
	//	|	dojo.fx.chain([
	//	|		dojo.fadeIn({ node:node }),
	//	|		dojo.fadeOut({ node:otherNode })
	//	|	]).play();
	//
	var first = animations.shift();
	var previous = first;
	dojo.forEach(animations, function(current){
		dojo.connect(previous, "onEnd", current, "play");
		previous = current;
	});
	return first;  // dojo._Animation
};

dojo.fx.combine = function(/*dojo._Animation[]*/ animations){
	// summary: Combine a list of dojo._Animation s to run in parallel
	// example:
	//	|	dojo.fx.combine([
	//	|		dojo.fadeIn({ node:node }),
	//	|		dojo.fadeOut({ node:otherNode })
	//	|	]).play();
	var ctr = new dojo._Animation({ curve: [0, 1] });
	if(!animations.length){ return ctr;  }
	// animations.sort(function(a, b){ return a.duration-b.duration;  });
	ctr.duration = animations[0].duration;
	dojo.forEach(animations, function(current){
		dojo.forEach([ "play", "pause", "stop" ],
			function(e){
				if(current[e]){
					dojo.connect(ctr, e, current, e);
				}
			}
		);
	});
	return ctr;  // dojo._Animation
};

dojo.declare("dojo.fx.Toggler", null, {
	// summary:
	//		class constructor for an animation toggler. It accepts a packed
	//		set of arguments about what type of animation to use in each
	//		direction, duration, etc.
	//
	// example:
	//	|	var t = new dojo.fx.Toggler({
	//	|		node: "nodeId",
	//	|		showDuration: 500,
	//	|		// hideDuration will default to "200"
	//	|		showFunc: dojo.wipeIn, 
	//	|		// hideFunc will default to "fadeOut"
	//	|	});
	//	|	t.show(100);  // delay showing for 100ms
	//	|	// ...time passes...
	//	|	t.hide();

	// FIXME: need a policy for where the toggler should "be" the next
	// time show/hide are called if we're stopped somewhere in the
	// middle.

	constructor: function(args){
		var _t = this;

		dojo.mixin(_t, args);
		_t.node = args.node;
		_t._showArgs = dojo.mixin({}, args);
		_t._showArgs.node = _t.node;
		_t._showArgs.duration = _t.showDuration;
		_t.showAnim = _t.showFunc(_t._showArgs);

		_t._hideArgs = dojo.mixin({}, args);
		_t._hideArgs.node = _t.node;
		_t._hideArgs.duration = _t.hideDuration;
		_t.hideAnim = _t.hideFunc(_t._hideArgs);

		dojo.connect(_t.showAnim, "beforeBegin", dojo.hitch(_t.hideAnim, "stop", true));
		dojo.connect(_t.hideAnim, "beforeBegin", dojo.hitch(_t.showAnim, "stop", true));
	},

	// node: DomNode
	//	the node to toggle
	node: null,

	// showFunc: Function
	//	The function that returns the dojo._Animation to show the node
	showFunc: dojo.fadeIn,

	// hideFunc: Function	
	//	The function that returns the dojo._Animation to hide the node
	hideFunc: dojo.fadeOut,

	// showDuration:
	//	Time in milliseconds to run the show Animation
	showDuration: 200,

	// hideDuration:
	//	Time in milliseconds to run the hide Animation
	hideDuration: 200,

	/*=====
	_showArgs: null,
	_showAnim: null,

	_hideArgs: null,
	_hideAnim: null,

	_isShowing: false,
	_isHiding: false,
	=====*/

	show: function(delay){
		// summary: Toggle the node to showing
		return this.showAnim.play(delay || 0);
	},

	hide: function(delay){
		// summary: Toggle the node to hidden
		return this.hideAnim.play(delay || 0);
	}
});

dojo.fx.wipeIn = function(/*Object*/ args){
	// summary
	//		Returns an animation that will expand the
	//		node defined in 'args' object from it's current height to
	//		it's natural height (with no scrollbar).
	//		Node must have no margin/border/padding.
	args.node = dojo.byId(args.node);
	var node = args.node, s = node.style;

	var anim = dojo.animateProperty(dojo.mixin({
		properties: {
			height: {
				// wrapped in functions so we wait till the last second to query (in case value has changed)
				start: function(){
					// start at current [computed] height, but use 1px rather than 0
					// because 0 causes IE to display the whole panel
					s.overflow="hidden";
					if(s.visibility=="hidden"||s.display=="none"){
						s.height="1px";
						s.display="";
						s.visibility="";
						return 1;
					}else{
						var height = dojo.style(node, "height");
						return Math.max(height, 1);
					}
				},
				end: function(){
					return node.scrollHeight;
				}
			}
		}
	}, args));

	dojo.connect(anim, "onEnd", function(){ 
		s.height = "auto";
	});

	return anim;  // dojo._Animation
}

dojo.fx.wipeOut = function(/*Object*/ args){
	// summary
	//		Returns an animation that will shrink node defined in "args"
	//		from it's current height to 1px, and then hide it.
	var node = args.node = dojo.byId(args.node);
	var s = node.style;

	var anim = dojo.animateProperty(dojo.mixin({
		properties: {
			height: {
				end: 1 // 0 causes IE to display the whole panel
			}
		}
	}, args));

	dojo.connect(anim, "beforeBegin", function(){
		s.overflow = "hidden";
		s.display = "";
	});
	dojo.connect(anim, "onEnd", function(){
		s.height = "auto";
		s.display = "none";
	});

	return anim;  // dojo._Animation
}

dojo.fx.slideTo = function(/*Object?*/ args){
	// summary
	//		Returns an animation that will slide "node" 
	//		defined in args Object from its current position to
	//		the position defined by (args.left, args.top).
	// example:
	//	|	dojo.fx.slideTo({ node: node, left:"40", top:"50", unit:"px" }).play()

	var node = (args.node = dojo.byId(args.node));
	
	var top = null;
	var left = null;
	
	var init = (function(n){
		return function(){
			var cs = dojo.getComputedStyle(n);
			var pos = cs.position;
			top = (pos == 'absolute' ? n.offsetTop : parseInt(cs.top) || 0);
			left = (pos == 'absolute' ? n.offsetLeft : parseInt(cs.left) || 0);
			if(pos != 'absolute' && pos != 'relative'){
				var ret = dojo.coords(n, true);
				top = ret.y;
				left = ret.x;
				n.style.position="absolute";
				n.style.top=top+"px";
				n.style.left=left+"px";
			}
		};
	})(node);
	init();

	var anim = dojo.animateProperty(dojo.mixin({
		properties: {
			top: { end: args.top||0 },
			left: { end: args.left||0 }
		}
	}, args));
	dojo.connect(anim, "beforeBegin", anim, init);

	return anim;  // dojo._Animation
}

}

if(!dojo._hasResource["dijit.layout.ContentPane"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.layout.ContentPane"] = true;
dojo.provide("dijit.layout.ContentPane");








dojo.declare(
	"dijit.layout.ContentPane",
	dijit._Widget,
{
	// summary:
	//		A widget that acts as a Container for other widgets, and includes a ajax interface
	// description:
	//		A widget that can be used as a standalone widget
	//		or as a baseclass for other widgets
	//		Handles replacement of document fragment using either external uri or javascript
	//		generated markup or DOM content, instantiating widgets within that content.
	//		Don't confuse it with an iframe, it only needs/wants document fragments.
	//		It's useful as a child of LayoutContainer, SplitContainer, or TabContainer.
	//		But note that those classes can contain any widget as a child.
	// example:
	//		Some quick samples:
	//		To change the innerHTML use .setContent('<b>new content</b>')
	//
	//		Or you can send it a NodeList, .setContent(dojo.query('div [class=selected]', userSelection))
	//		please note that the nodes in NodeList will copied, not moved
	//
	//		To do a ajax update use .setHref('url')
	//
	// href: String
	//		The href of the content that displays now.
	//		Set this at construction if you want to load data externally when the
	//		pane is shown.  (Set preload=true to load it immediately.)
	//		Changing href after creation doesn't have any effect;  see setHref();
	href: "",

	// extractContent: Boolean
	//	Extract visible content from inside of <body> .... </body>
	extractContent: false,

	// parseOnLoad: Boolean
	//	parse content and create the widgets, if any
	parseOnLoad:	true,

	// preventCache: Boolean
	//		Cache content retreived externally
	preventCache:	false,

	// preload: Boolean
	//	Force load of data even if pane is hidden.
	preload: false,

	// refreshOnShow: Boolean
	//		Refresh (re-download) content when pane goes from hidden to shown
	refreshOnShow: false,

	// loadingMessage: String
	//	Message that shows while downloading
	loadingMessage: "<span class='dijitContentPaneLoading'>${loadingState}</span>", 

	// errorMessage: String
	//	Message that shows if an error occurs
	errorMessage: "<span class='dijitContentPaneError'>${errorState}</span>", 

	// isLoaded: Boolean
	//	Tells loading status see onLoad|onUnload for event hooks
	isLoaded: false,

	// class: String
	//	Class name to apply to ContentPane dom nodes
	"class": "dijitContentPane",

	postCreate: function(){
		// remove the title attribute so it doesn't show up when i hover
		// over a node
		this.domNode.title = "";

		if(this.preload){
			this._loadCheck();
		}

		/*@mpt causes localization err
		var messages = dojo.i18n.getLocalization("dijit", "loading", this.lang);
		this.loadingMessage = dojo.string.substitute(this.loadingMessage, messages);
		this.errorMessage = dojo.string.substitute(this.errorMessage, messages);
		*/

		// for programatically created ContentPane (with <span> tag), need to muck w/CSS
		// or it's as though overflow:visible is set
		dojo.addClass(this.domNode, this["class"]);
	},

	startup: function(){
		if(this._started){ return;  }
		this._checkIfSingleChild();
		if(this._singleChild){
			this._singleChild.startup();
		}
		this._loadCheck();
		this._started = true;
	},

	_checkIfSingleChild: function(){
		// summary:
		// 	Test if we have exactly one widget as a child, and if so assume that we are a container for that widget,
		//	and should propogate startup() and resize() calls to it.
		var childNodes = dojo.query(">", this.containerNode || this.domNode),
			childWidgets = childNodes.filter("[widgetId]");

		if(childNodes.length == 1 && childWidgets.length == 1){
			this.isContainer = true;
			this._singleChild = dijit.byNode(childWidgets[0]);
		}else{
			delete this.isContainer;
			delete this._singleChild;
		}
	},

	refresh: function(){
		// summary:
		//	Force a refresh (re-download) of content, be sure to turn off cache

		// we return result of _prepareLoad here to avoid code dup. in dojox.layout.ContentPane
		return this._prepareLoad(true);
	},

	setHref: function(/*String|Uri*/ href){
		// summary:
		//		Reset the (external defined) content of this pane and replace with new url
		//		Note: It delays the download until widget is shown if preload is false
		//	href:
		//		url to the page you want to get, must be within the same domain as your mainpage
		this.href = href;

		// we return result of _prepareLoad here to avoid code dup. in dojox.layout.ContentPane
		return this._prepareLoad();
	},

	setContent: function(/*String|DomNode|Nodelist*/data){
		// summary:
		//		Replaces old content with data content, include style classes from old content
		//	data:
		//		the new Content may be String, DomNode or NodeList
		//
		//		if data is a NodeList (or an array of nodes) nodes are copied
		//		so you can import nodes from another document implicitly

		// clear href so we cant run refresh and clear content
		// refresh should only work if we downloaded the content
		if(!this._isDownloaded){
			this.href = "";
			this._onUnloadHandler();
		}

		this._setContent(data || "");

		this._isDownloaded = false;  // must be set after _setContent(..), pathadjust in dojox.layout.ContentPane

		if(this.parseOnLoad){
			this._createSubWidgets();
		}

		this._checkIfSingleChild();
		if(this._singleChild && this._singleChild.resize){
			this._singleChild.resize(this._contentBox);
		}

		this._onLoadHandler();
	},

	cancel: function(){
		// summary:
		//		Cancels a inflight download of content
		if(this._xhrDfd && (this._xhrDfd.fired == -1)){
			this._xhrDfd.cancel();
		}
		delete this._xhrDfd;  // garbage collect
	},

	destroy: function(){
		// if we have multiple controllers destroying us, bail after the first
		if(this._beingDestroyed){
			return;
		}
		// make sure we call onUnload
		this._onUnloadHandler();
		this._beingDestroyed = true;
		this.inherited("destroy",arguments);
	},

	resize: function(size){
		dojo.marginBox(this.domNode, size);

		// Compute content box size in case we [later] need to size child
		// If either height or width wasn't specified by the user, then query node for it.
		// But note that setting the margin box and then immediately querying dimensions may return
		// inaccurate results, so try not to depend on it.
		var node = this.containerNode || this.domNode,
			mb = dojo.mixin(dojo.marginBox(node), size||{});

		this._contentBox = dijit.layout.marginBox2contentBox(node, mb);

		// If we have a single widget child then size it to fit snugly within my borders
		if(this._singleChild && this._singleChild.resize){
			this._singleChild.resize(this._contentBox);
		}
	},

	_prepareLoad: function(forceLoad){
		// sets up for a xhrLoad, load is deferred until widget onShow
		// cancels a inflight download
		this.cancel();
		this.isLoaded = false;
		this._loadCheck(forceLoad);
	},

	_loadCheck: function(forceLoad){
		// call this when you change onShow (onSelected) status when selected in parent container
		// it's used as a trigger for href download when this.domNode.display != 'none'

		// sequence:
		// if no href -> bail
		// forceLoad -> always load
		// this.preload -> load when download not in progress, domNode display doesn't matter
		// this.refreshOnShow -> load when download in progress bails, domNode display !='none' AND
		//						this.open !== false (undefined is ok), isLoaded doesn't matter
		// else -> load when download not in progress, if this.open !== false (undefined is ok) AND
		//						domNode display != 'none', isLoaded must be false

		var displayState = ((this.open !== false) && (this.domNode.style.display != 'none'));

		if(this.href &&	
			(forceLoad ||
				(this.preload && !this._xhrDfd) ||
				(this.refreshOnShow && displayState && !this._xhrDfd) ||
				(!this.isLoaded && displayState && !this._xhrDfd)
			)
		){
			this._downloadExternalContent();
		}
	},

	_downloadExternalContent: function(){
		this._onUnloadHandler();

		// display loading message
		this._setContent(
			this.onDownloadStart.call(this)
		);

		var self = this;
		var getArgs = {
			preventCache: (this.preventCache || this.refreshOnShow),
			url: this.href,
			handleAs: "text"
		};
		if(dojo.isObject(this.ioArgs)){
			dojo.mixin(getArgs, this.ioArgs);
		}

		var hand = this._xhrDfd = (this.ioMethod || dojo.xhrGet)(getArgs);

		hand.addCallback(function(html){
			try{
				self.onDownloadEnd.call(self);
				self._isDownloaded = true;
				self.setContent.call(self, html);  // onload event is called from here
			}catch(err){
				self._onError.call(self, 'Content', err);  // onContentError
			}
			delete self._xhrDfd;
			return html;
		});

		hand.addErrback(function(err){
			if(!hand.cancelled){
				// show error message in the pane
				self._onError.call(self, 'Download', err);  // onDownloadError
			}
			delete self._xhrDfd;
			return err;
		});
	},

	_onLoadHandler: function(){
		this.isLoaded = true;
		try{
			this.onLoad.call(this);
		}catch(e){
			console.error('Error '+this.widgetId+' running custom onLoad code');
		}
	},

	_onUnloadHandler: function(){
		this.isLoaded = false;
		this.cancel();
		try{
			this.onUnload.call(this);
		}catch(e){
			console.error('Error '+this.widgetId+' running custom onUnload code');
		}
	},

	_setContent: function(cont){
		this.destroyDescendants();

		try{
			var node = this.containerNode || this.domNode;
			while(node.firstChild){
				dojo._destroyElement(node.firstChild);
			}
			if(typeof cont == "string"){
				// dijit.ContentPane does only minimal fixes,
				// No pathAdjustments, script retrieval, style clean etc
				// some of these should be available in the dojox.layout.ContentPane
				if(this.extractContent){
					match = cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
					if(match){ cont = match[1];  }
				}
				node.innerHTML = cont;
			}else{
				// domNode or NodeList
				if(cont.nodeType){ // domNode (htmlNode 1 or textNode 3)
					node.appendChild(cont);
				}else{// nodelist or array such as dojo.Nodelist
					dojo.forEach(cont, function(n){
						node.appendChild(n.cloneNode(true));
					});
				}
			}
		}catch(e){
			// check if a domfault occurs when we are appending this.errorMessage
			// like for instance if domNode is a UL and we try append a DIV
			var errMess = this.onContentError(e);
			try{
				node.innerHTML = errMess;
			}catch(e){
				console.error('Fatal '+this.id+' could not change content due to '+e.message, e);
			}
		}
	},

	_onError: function(type, err, consoleText){
		// shows user the string that is returned by on[type]Error
		// overide on[type]Error and return your own string to customize
		var errText = this['on' + type + 'Error'].call(this, err);
		if(consoleText){
			console.error(consoleText, err);
		}else if(errText){// a empty string won't change current content
			this._setContent.call(this, errText);
		}
	},

	_createSubWidgets: function(){
		// summary: scan my contents and create subwidgets
		var rootNode = this.containerNode || this.domNode;
		try{
			dojo.parser.parse(rootNode, true);
		}catch(e){
			this._onError('Content', e, "Couldn't create widgets in "+this.id
				+(this.href ? " from "+this.href : ""));
		}
	},

	// EVENT's, should be overide-able
	onLoad: function(e){
		// summary:
		//		Event hook, is called after everything is loaded and widgetified
	},

	onUnload: function(e){
		// summary:
		//		Event hook, is called before old content is cleared
	},

	onDownloadStart: function(){
		// summary:
		//		called before download starts
		//		the string returned by this function will be the html
		//		that tells the user we are loading something
		//		override with your own function if you want to change text
		return this.loadingMessage;
	},

	onContentError: function(/*Error*/ error){
		// summary:
		//		called on DOM faults, require fault etc in content
		//		default is to display errormessage inside pane
	},

	onDownloadError: function(/*Error*/ error){
		// summary:
		//		Called when download error occurs, default is to display
		//		errormessage inside pane. Overide function to change that.
		//		The string returned by this function will be the html
		//		that tells the user a error happend
		return this.errorMessage;
	},

	onDownloadEnd: function(){
		// summary:
		//		called when download is finished
	}
});

}

if(!dojo._hasResource["dijit.form.Form"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.Form"] = true;
dojo.provide("dijit.form.Form");




dojo.declare("dijit.form._FormMixin", null,
	{
		/*
		summary:
			Widget corresponding to <form> tag, for validation and serialization

		usage:
			<form dojoType="dijit.form.Form" id="myForm">
				Name: <input type="text" name="name" />
			</form>
			myObj={name: "John Doe"};
			dijit.byId('myForm').setValues(myObj);

			myObj=dijit.byId('myForm').getValues();
		TODO:
		* Repeater
		* better handling for arrays.  Often form elements have names with [] like
		* people[3].sex (for a list of people [{name: Bill, sex: M}, ...])

		*/

		// HTML <FORM> attributes

		action: "",
		method: "",
		enctype: "",
		name: "",
		"accept-charset": "",
		accept: "",
		target: "",

		attributeMap: dojo.mixin(dojo.clone(dijit._Widget.prototype.attributeMap),
			{action: "", method: "", enctype: "", "accept-charset": "", accept: "", target: ""}),

		// execute: Function
		//	User defined function to do stuff when the user hits the submit button
		execute: function(/*Object*/ formContents){},

		// onCancel: Function
		//	Callback when user has canceled dialog, to notify container
		//	(user shouldn't override)
		onCancel: function(){},

		// onExecute: Function
		//	Callback when user is about to execute dialog, to notify container
		//	(user shouldn't override)
		onExecute: function(){},

		templateString: "<form dojoAttachPoint='containerNode' dojoAttachEvent='onsubmit:_onSubmit' name='${name}' enctype='multipart/form-data'></form>",

		_onSubmit: function(/*event*/e) {
			// summary: callback when user hits submit button
			dojo.stopEvent(e);
			this.onExecute();	 // notify container that we are about to execute
			this.execute(this.getValues());
		},

		submit: function() {
			// summary: programatically submit form
			this.containerNode.submit();
		},

		setValues: function(/*object*/obj) {
			// summary: fill in form values from a JSON structure

			// generate map from name --> [list of widgets with that name]
			var map = {};
			dojo.forEach(this.getDescendants(), function(widget){
				if(!widget.name){ return;  }
				var entry = map[widget.name] || (map[widget.name] = [] );
				entry.push(widget);
			});

			// call setValue() or setChecked() for each widget, according to obj
			for(var name in map){
				var widgets = map[name],						// array of widgets w/this name
					values = dojo.getObject(name, false, obj);	 // list of values for those widgets
				if(!dojo.isArray(values)){
					values = [ values ];
				}
				if(widgets[0].setChecked){
					// for checkbox/radio, values is a list of which widgets should be checked
					dojo.forEach(widgets, function(w, i){
						w.setChecked(dojo.indexOf(values, w.value) != -1);
					});
				}else{
					// otherwise, values is a list of values to be assigned sequentially to each widget
					dojo.forEach(widgets, function(w, i){
						w.setValue(values[i]);
					});	 				
				}
			}

			/***
			 * 	TODO: code for plain input boxes (this shouldn't run for inputs that are part of widgets

			dojo.forEach(this.containerNode.elements, function(element){
				if (element.name == ''){return};	 // like "continue"	
				var namePath = element.name.split(".");
				var myObj=obj;
				var name=namePath[namePath.length-1];
				for(var j=1,len2=namePath.length;j<len2;++j) {
					var p=namePath[j - 1];
					// repeater support block
					var nameA=p.split("[");
					if (nameA.length > 1) {
						if(typeof(myObj[nameA[0]]) == "undefined") {
							myObj[nameA[0]]=[ ];
						} // if

						nameIndex=parseInt(nameA[1]);
						if(typeof(myObj[nameA[0]][nameIndex]) == "undefined") {
							myObj[nameA[0]][nameIndex]={};
						}
						myObj=myObj[nameA[0]][nameIndex];
						continue;
					} // repeater support ends

					if(typeof(myObj[p]) == "undefined") {
						myObj=undefined;
						break;
					};
					myObj=myObj[p];
				}

				if (typeof(myObj) == "undefined") {
					return;	 	// like "continue"
				}
				if (typeof(myObj[name]) == "undefined" && this.ignoreNullValues) {
					return;	 	// like "continue"
				}

				// TODO: widget values (just call setValue() on the widget)

				switch(element.type) {
					case "checkbox":
						element.checked = (name in myObj) &&
							dojo.some(myObj[name], function(val){ return val==element.value;  });
						break;
					case "radio":
						element.checked = (name in myObj) && myObj[name]==element.value;
						break;
					case "select-multiple":
						element.selectedIndex=-1;
						dojo.forEach(element.options, function(option){
							option.selected = dojo.some(myObj[name], function(val){ return option.value == val;  });
						});
						break;
					case "select-one":
						element.selectedIndex="0";
						dojo.forEach(element.options, function(option){
							option.selected = option.value == myObj[name];
						});
						break;
					case "hidden":
					case "text":
					case "textarea":
					case "password":
						element.value = myObj[name] || "";
						break;
				}
	  		});
	  		*/
		},

		getValues: function() {
			// summary: generate JSON structure from form values

			// get widget values
			var obj = {};
			dojo.forEach(this.getDescendants(), function(widget){
				var value = widget.getValue ? widget.getValue() : widget.value;
				var name = widget.name;
				if(!name){ return;  }

				// Store widget's value(s) as a scalar, except for checkboxes which are automatically arrays
				if(widget.setChecked){
					if(/Radio/.test(widget.declaredClass)){
						// radio button
						if(widget.checked){
							dojo.setObject(name, value, obj);
						}
					}else{
						// checkbox/toggle button
						var ary=dojo.getObject(name, false, obj);
						if(!ary){
							ary=[];
							dojo.setObject(name, ary, obj);
						}
						if(widget.checked){
							ary.push(value);
						}
					}
				}else{
					// plain input
					dojo.setObject(name, value, obj);
				}
			});

			/***
			 * code for plain input boxes (see also dojo.formToObject, can we use that instead of this code?
			 * but it doesn't understand [] notation, presumably)
			var obj = { };
			dojo.forEach(this.containerNode.elements, function(elm){
				if (!elm.name)	{
					return;	 	// like "continue"
				}
				var namePath = elm.name.split(".");
				var myObj=obj;
				var name=namePath[namePath.length-1];
				for(var j=1,len2=namePath.length;j<len2;++j) {
					var nameIndex = null;
					var p=namePath[j - 1];
					var nameA=p.split("[");
					if (nameA.length > 1) {
						if(typeof(myObj[nameA[0]]) == "undefined") {
							myObj[nameA[0]]=[ ];
						} // if
						nameIndex=parseInt(nameA[1]);
						if(typeof(myObj[nameA[0]][nameIndex]) == "undefined") {
							myObj[nameA[0]][nameIndex]={};
						}
					} else if(typeof(myObj[nameA[0]]) == "undefined") {
						myObj[nameA[0]]={}
					} // if

					if (nameA.length == 1) {
						myObj=myObj[nameA[0]];
					} else {
						myObj=myObj[nameA[0]][nameIndex];
					} // if
				} // for

				if ((elm.type != "select-multiple" && elm.type != "checkbox" && elm.type != "radio") || (elm.type=="radio" && elm.checked)) {
					if(name == name.split("[")[0]) {
						myObj[name]=elm.value;
					} else {
						// can not set value when there is no name
					}
				} else if (elm.type == "checkbox" && elm.checked) {
					if(typeof(myObj[name]) == 'undefined') {
						myObj[name]=[ ];
					}
					myObj[name].push(elm.value);
				} else if (elm.type == "select-multiple") {
					if(typeof(myObj[name]) == 'undefined') {
						myObj[name]=[ ];
					}
					for (var jdx=0,len3=elm.options.length;  jdx<len3;  ++jdx) {
						if (elm.options[jdx].selected) {
							myObj[name].push(elm.options[jdx].value);
						}
					}
				} // if
				name=undefined;
			});  // forEach
			***/
			return obj;
		},

	 	isValid: function() {
	 		// TODO: ComboBox might need time to process a recently input value.  This should be async?
	 		// make sure that every widget that has a validator function returns true
	 		return dojo.every(this.getDescendants(), function(widget){
	 			return !widget.isValid || widget.isValid();
	 		});
		}
	});

dojo.declare(
	"dijit.form.Form",
	[dijit._Widget, dijit._Templated, dijit.form._FormMixin],
	null
);

}

if(!dojo._hasResource["dijit.Dialog"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.Dialog"] = true;
dojo.provide("dijit.Dialog");









dojo.declare(
	"dijit.DialogUnderlay",
	[dijit._Widget, dijit._Templated],
	{
		// summary: the thing that grays out the screen behind the dialog

		// Template has two divs;  outer div is used for fade-in/fade-out, and also to hold background iframe.
		// Inner div has opacity specified in CSS file.
		templateString: "<div class=dijitDialogUnderlayWrapper id='${id}_underlay'><div class=dijitDialogUnderlay dojoAttachPoint='node'></div></div>",

		postCreate: function(){
			dojo.body().appendChild(this.domNode);
			this.bgIframe = new dijit.BackgroundIframe(this.domNode);
		},

		layout: function(){
			// summary
			//		Sets the background to the size of the viewport (rather than the size
			//		of the document) since we need to cover the whole browser window, even
			//		if the document is only a few lines long.

			var viewport = dijit.getViewport();
			var is = this.node.style,
				os = this.domNode.style;

			os.top = viewport.t + "px";
			os.left = viewport.l + "px";
			is.width = viewport.w + "px";
			is.height = viewport.h + "px";

			// process twice since the scroll bar may have been removed
			// by the previous resizing
			var viewport2 = dijit.getViewport();
			if(viewport.w != viewport2.w){ is.width = viewport2.w + "px";  }
			if(viewport.h != viewport2.h){ is.height = viewport2.h + "px";  }
		},

		show: function(){
			this.domNode.style.display = "block";
			this.layout();
			if(this.bgIframe.iframe){
				this.bgIframe.iframe.style.display = "block";
			}
			this._resizeHandler = this.connect(window, "onresize", "layout");
		},

		hide: function(){
			this.domNode.style.display = "none";
			if(this.bgIframe.iframe){
				this.bgIframe.iframe.style.display = "none";
			}
			this.disconnect(this._resizeHandler);
		},

		uninitialize: function(){
			if(this.bgIframe){
				this.bgIframe.destroy();
			}
		}
	}
);

dojo.declare(
	"dijit.Dialog",
	[dijit.layout.ContentPane, dijit._Templated, dijit.form._FormMixin],
	{
		// summary:
		//		Pops up a modal dialog window, blocking access to the screen
		//		and also graying out the screen Dialog is extended from
		//		ContentPane so it supports all the same parameters (href, etc.)

		//@mpt
		templateString:"<div class=\"dijitDialog\">"+
			"<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\" tabindex=\"0\" waiRole=\"dialog\">"+
			"<table class='innerBluTable'><tr><td><span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\">${title}</span>"+
			"  </td><td align='right' dojoAttachEvent=\"onclick: hide\" class='oPlsCloseCircleIcon'><span dojoAttachPoint=\"_closeButtonNode\" >"+
			"    <span dojoAttachPoint=\"_closeText\" class=\"_closeText\"></span>"+
			"  </span></td>"+
			"</tr></table></div>"+
			"<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div>"+
			"  <span dojoAttachPoint=\"tabEnd\" dojoAttachEvent=\"onfocus:_cycleFocus\" tabindex=\"0\"></span>"+
			"</div>",

		// open: Boolean
		//		is True or False depending on state of dialog
		open: false,

		// duration: Integer
		//		The time in milliseconds it takes the dialog to fade in and out
		duration: 400,

		_lastFocusItem:null,

		attributeMap: dojo.mixin(dojo.clone(dijit._Widget.prototype.attributeMap),
			{title: "titleBar"}),

		postCreate: function(){
			dojo.body().appendChild(this.domNode);
			this.inherited("postCreate",arguments);
			this.domNode.style.display="none";
			this.connect(this, "onExecute", "hide");
			this.connect(this, "onCancel", "hide");
		},

		onLoad: function(){
			// summary: 
			//		when href is specified we need to reposition the dialog after the data is loaded
			this._position();
			this.inherited("onLoad",arguments);
		},

		_setup: function(){
			// summary:
			//		stuff we need to do before showing the Dialog for the first
			//		time (but we defer it until right beforehand, for
			//		performance reasons)

			this._modalconnects = [];

			if(this.titleBar){
				this._moveable = new dojo.dnd.Moveable(this.domNode, { handle: this.titleBar });
			}

			this._underlay = new dijit.DialogUnderlay();

			var node = this.domNode;
			this._fadeIn = dojo.fx.combine(
				[dojo.fadeIn({
					node: node,
					duration: this.duration
				 }),
				 dojo.fadeIn({
					node: this._underlay.domNode,
					duration: this.duration,
					onBegin: dojo.hitch(this._underlay, "show")
				 })
				]
			);

			this._fadeOut = dojo.fx.combine(
				[dojo.fadeOut({
					node: node,
					duration: this.duration,
					onEnd: function(){
						node.style.display="none";
					}
				 }),
				 dojo.fadeOut({
					node: this._underlay.domNode,
					duration: this.duration,
					onEnd: dojo.hitch(this._underlay, "hide")
				 })
				]
			);
		},

		uninitialize: function(){
			if(this._underlay){
				this._underlay.destroy();
			}
		},

		_position: function(){
			// summary: position modal dialog in center of screen
			
			if(dojo.hasClass(dojo.body(),"dojoMove")){ return;  }
			var viewport = dijit.getViewport();
			var mb = dojo.marginBox(this.domNode);

			var style = this.domNode.style;
			style.left = Math.floor((viewport.l + (viewport.w - mb.w)/2)) + "px";
			style.top = Math.floor((viewport.t + (viewport.h - mb.h)/2)) + "px";
		},

		_findLastFocus: function(/*Event*/ evt){
			// summary:  called from onblur of dialog container to determine the last focusable item
			this._lastFocused = evt.target;
		},

		_cycleFocus: function(/*Event*/ evt){
			// summary: when tabEnd receives focus, advance focus around to titleBar

			// on first focus to tabEnd, store the last focused item in dialog
			if(!this._lastFocusItem){
				this._lastFocusItem = this._lastFocused;
			}
			this.titleBar.focus();
		},

		_onKey: function(/*Event*/ evt){
			if(evt.keyCode){
				var node = evt.target;
				// see if we are shift-tabbing from titleBar
				if(node == this.titleBar && evt.shiftKey && evt.keyCode == dojo.keys.TAB){
					if(this._lastFocusItem){
						this._lastFocusItem.focus();  // send focus to last item in dialog if known
					}
					dojo.stopEvent(evt);
				}else{
					// see if the key is for the dialog
					while(node){
						if(node == this.domNode){
							if(evt.keyCode == dojo.keys.ESCAPE){
								this.hide();  
							}else{
								return;  // just let it go
							}
						}
						node = node.parentNode;
					}
					// this key is for the disabled document window
					if(evt.keyCode != dojo.keys.TAB){ // allow tabbing into the dialog for a11y
						dojo.stopEvent(evt);
					// opera won't tab to a div
					}else if (!dojo.isOpera){
						try{
							this.titleBar.focus();
						}catch(e){/*squelch*/}
					}
				}
			}
		},

		show: function(){
			// summary: display the dialog

			// first time we show the dialog, there's some initialization stuff to do			
			if(!this._alreadyInitialized){
				this._setup();
				this._alreadyInitialized=true;
			}

			if(this._fadeOut.status() == "playing"){
				this._fadeOut.stop();
			}

			this._modalconnects.push(dojo.connect(window, "onscroll", this, "layout"));
			this._modalconnects.push(dojo.connect(document.documentElement, "onkeypress", this, "_onKey"));

			// IE doesn't bubble onblur events - use ondeactivate instead
			var ev = typeof(document.ondeactivate) == "object" ? "ondeactivate" : "onblur";
			this._modalconnects.push(dojo.connect(this.containerNode, ev, this, "_findLastFocus"));

			dojo.style(this.domNode, "opacity", 0);
			this.domNode.style.display="block";
			this.open = true;
			this._loadCheck();  // lazy load trigger

			this._position();

			this._fadeIn.play();

			this._savedFocus = dijit.getFocus(this);

			// set timeout to allow the browser to render dialog
			setTimeout(dojo.hitch(this, function(){
				dijit.focus(this.titleBar);
			}), 50);
		},

		hide: function(){
			// summary
			//		Hide the dialog

			// if we haven't been initialized yet then we aren't showing and we can just return		
			if(!this._alreadyInitialized){
				return;
			}

			if(this._fadeIn.status() == "playing"){
				this._fadeIn.stop();
			}
			this._fadeOut.play();

			if (this._scrollConnected){
				this._scrollConnected = false;
			}
			dojo.forEach(this._modalconnects, dojo.disconnect);
			this._modalconnects = [];

			this.connect(this._fadeOut,"onEnd",dojo.hitch(this,function(){
				dijit.focus(this._savedFocus);
			}));
			this.open = false;
		},

		layout: function() {
			// summary: position the Dialog and the underlay
			if(this.domNode.style.display == "block"){
				this._underlay.layout();
				this._position();
			}
		}
	}
);

dojo.declare(
	"dijit.TooltipDialog",
	[dijit.layout.ContentPane, dijit._Templated, dijit.form._FormMixin],
	{
		// summary:
		//		Pops up a dialog that appears like a Tooltip
		// title: String
		// 		Description of tooltip dialog (required for a11Y)
		title: "",

		_lastFocusItem: null,

		templateString: null,
		templateString:"<div class=\"dijitTooltipDialog\" >\n\t<div class=\"dijitTooltipContainer\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" dojoAttachPoint=\"containerNode\" tabindex=\"0\" waiRole=\"dialog\"></div>\n\t</div>\n\t<span dojoAttachPoint=\"tabEnd\" tabindex=\"0\" dojoAttachEvent=\"focus:_cycleFocus\"></span>\n\t<div class=\"dijitTooltipConnector\" ></div>\n</div>\n",

		postCreate: function(){
			this.inherited("postCreate",arguments);
			this.connect(this.containerNode, "onkeypress", "_onKey");

			// IE doesn't bubble onblur events - use ondeactivate instead
			var ev = typeof(document.ondeactivate) == "object" ? "ondeactivate" : "onblur";
			this.connect(this.containerNode, ev, "_findLastFocus");
			this.containerNode.title=this.title;
		},

		orient: function(/*Object*/ corner){
			// summary: configure widget to be displayed in given position relative to the button
			this.domNode.className="dijitTooltipDialog " +" dijitTooltipAB"+(corner.charAt(1)=='L'?"Left":"Right")+" dijitTooltip"+(corner.charAt(0)=='T' ? "Below" : "Above");
		},

		onOpen: function(/*Object*/ pos){
			// summary: called when dialog is displayed
			this.orient(pos.corner);
			this._loadCheck();  // lazy load trigger
			this.containerNode.focus();
		},

		_onKey: function(/*Event*/ evt){
			// summary: keep keyboard focus in dialog;  close dialog on escape key
			if(evt.keyCode == dojo.keys.ESCAPE){
				this.onCancel();
			}else if(evt.target == this.containerNode && evt.shiftKey && evt.keyCode == dojo.keys.TAB){
				if (this._lastFocusItem){
					this._lastFocusItem.focus();
				}
				dojo.stopEvent(evt);
			}else if(evt.keyCode == dojo.keys.TAB){
				// we want the browser's default tab handling to move focus
				// but we don't want the tab to propagate upwards
				evt.stopPropagation();
			}
		},

		_findLastFocus: function(/*Event*/ evt){
			// summary: called from onblur of dialog container to determine the last focusable item
			this._lastFocused = evt.target;
		},

		_cycleFocus: function(/*Event*/ evt){
			// summary: when tabEnd receives focus, advance focus around to containerNode

			// on first focus to tabEnd, store the last focused item in dialog
			if(!this._lastFocusItem){
				this._lastFocusItem = this._lastFocused;
			}
			this.containerNode.focus();
		}
	}	
);


}

if(!dojo._hasResource["dijit._editor.selection"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._editor.selection"] = true;
dojo.provide("dijit._editor.selection");

// FIXME:
//		all of these methods branch internally for IE. This is probably
//		sub-optimal in terms of runtime performance. We should investigate the
//		size difference for differentiating at definition time.

dojo.mixin(dijit._editor.selection, {
	getType: function(){
		// summary: Get the selection type (like document.select.type in IE).
		if(dojo.doc["selection"]){ //IE
			return dojo.doc.selection.type.toLowerCase();
		}else{
			var stype = "text";

			// Check if the actual selection is a CONTROL (IMG, TABLE, HR, etc...).
			var oSel;
			try{
				oSel = dojo.global.getSelection();
			}catch(e){ /*squelch*/ }

			if(oSel && oSel.rangeCount==1){
				var oRange = oSel.getRangeAt(0);
				if(	(oRange.startContainer == oRange.endContainer) &&
					((oRange.endOffset - oRange.startOffset) == 1) &&
					(oRange.startContainer.nodeType != 3 /* text node*/)
				){
					stype = "control";
				}
			}
			return stype;
		}
	},

	getSelectedText: function(){
		// summary:
		//		Return the text (no html tags) included in the current selection or null if no text is selected
		if(dojo.doc["selection"]){ //IE
			if(dijit._editor.selection.getType() == 'control'){
				return null;
			}
			return dojo.doc.selection.createRange().text;
		}else{
			var selection = dojo.global.getSelection();
			if(selection){
				return selection.toString();
			}
		}
	},

	getSelectedHtml: function(){
		// summary:
		//		Return the html of the current selection or null if unavailable
		if(dojo.doc["selection"]){ //IE
			if(dijit._editor.selection.getType() == 'control'){
				return null;
			}
			return dojo.doc.selection.createRange().htmlText;
		}else{
			var selection = dojo.global.getSelection();
			if(selection && selection.rangeCount){
				var frag = selection.getRangeAt(0).cloneContents();
				var div = document.createElement("div");
				div.appendChild(frag);
				return div.innerHTML;
			}
			return null;
		}
	},

	getSelectedElement: function(){
		// summary:
		//		Retrieves the selected element (if any), just in the case that
		//		a single element (object like and image or a table) is
		//		selected.
		if(this.getType() == "control"){
			if(dojo.doc["selection"]){ //IE
				var range = dojo.doc.selection.createRange();
				if(range && range.item){
					return dojo.doc.selection.createRange().item(0);
				}
			}else{
				var selection = dojo.global.getSelection();
				return selection.anchorNode.childNodes[ selection.anchorOffset ];
			}
		}
	},

	getParentElement: function(){
		// summary:
		//		Get the parent element of the current selection
		if(this.getType() == "control"){
			var p = this.getSelectedElement();
			if(p){ return p.parentNode;  }
		}else{
			if(dojo.doc["selection"]){ //IE
				return dojo.doc.selection.createRange().parentElement();
			}else{
				var selection = dojo.global.getSelection();
				if(selection){
					var node = selection.anchorNode;

					while(node && (node.nodeType != 1)){ // not an element
						node = node.parentNode;
					}

					return node;
				}
			}
		}
	},

	hasAncestorElement: function(/*String*/tagName /* ... */){
		// summary:
		// 		Check whether current selection has a  parent element which is
		// 		of type tagName (or one of the other specified tagName)
		return (this.getAncestorElement.apply(this, arguments) != null);
	},

	getAncestorElement: function(/*String*/tagName /* ... */){
		// summary:
		//		Return the parent element of the current selection which is of
		//		type tagName (or one of the other specified tagName)

		var node = this.getSelectedElement() || this.getParentElement();
		return this.getParentOfType(node, arguments);
	},

	isTag: function(/*DomNode*/node, /*Array*/tags){
		if(node && node.tagName){
			var _nlc = node.tagName.toLowerCase();
			for(var i=0;  i<tags.length;  i++){
				var _tlc = String(tags[i]).toLowerCase();
				if(_nlc == _tlc){
					return _tlc;
				}
			}
		}
		return "";
	},

	getParentOfType: function(/*DomNode*/node, /*Array*/tags){
		while(node){
			if(this.isTag(node, tags).length){
				return node;
			}
			node = node.parentNode;
		}
		return null;
	},

	remove: function(){
		// summary: delete current selection
		var _s = dojo.doc.selection;
		if(_s){ //IE
			if(_s.type.toLowerCase() != "none"){
				_s.clear();
			}
			return _s;
		}else{
			_s = dojo.global.getSelection();
			_s.deleteFromDocument();
			return _s;
		}
	},

	selectElementChildren: function(/*DomNode*/element,/*Boolean?*/nochangefocus){
		// summary:
		//		clear previous selection and select the content of the node
		//		(excluding the node itself)
		var _window = dojo.global;
		var _document = dojo.doc;
		element = dojo.byId(element);
		if(_document.selection && dojo.body().createTextRange){ // IE
			var range = element.ownerDocument.body.createTextRange();
			range.moveToElementText(element);
			if(!nochangefocus){
				range.select();
			}
		}else if(_window["getSelection"]){
			var selection = _window.getSelection();
			if(selection["setBaseAndExtent"]){ // Safari
				selection.setBaseAndExtent(element, 0, element, element.innerText.length - 1);
			}else if(selection["selectAllChildren"]){ // Mozilla
				selection.selectAllChildren(element);
			}
		}
	},

	selectElement: function(/*DomNode*/element,/*Boolean?*/nochangefocus){
		// summary:
		//		clear previous selection and select element (including all its children)
		var _document = dojo.doc;
		element = dojo.byId(element);
		if(_document.selection && dojo.body().createTextRange){ // IE
			try{
				var range = dojo.body().createControlRange();
				range.addElement(element);
				if(!nochangefocus){
					range.select();
				}
			}catch(e){
				this.selectElementChildren(element,nochangefocus);
			}
		}else if(dojo.global["getSelection"]){
			var selection = dojo.global.getSelection();
			// FIXME: does this work on Safari?
			if(selection["removeAllRanges"]){ // Mozilla
				var range = _document.createRange() ;
				range.selectNode(element) ;
				selection.removeAllRanges() ;
				selection.addRange(range) ;
			}
		}
	}
});

}

if(!dojo._hasResource["dijit._editor.RichText"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._editor.RichText"] = true;
dojo.provide("dijit._editor.RichText");






// used to restore content when user leaves this page then comes back
// but do not try doing document.write if we are using xd loading.
// document.write will only work if RichText.js is included in the dojo.js
// file. If it is included in dojo.js and you want to allow rich text saving
// for back/forward actions, then set djConfig.allowXdRichTextSave = true.
if(!djConfig["useXDomain"] || djConfig["allowXdRichTextSave"]){
	if(dojo._postLoad){
		(function(){
			var savetextarea = dojo.doc.createElement('textarea');
			savetextarea.id = "dijit._editor.RichText.savedContent";
			var s = savetextarea.style;
			s.display='none';
			s.position='absolute';
			s.top="-100px";
			s.left="-100px"
			s.height="3px";
			s.width="3px";
			dojo.body().appendChild(savetextarea);
		})();
	}else{
		//dojo.body() is not available before onLoad is fired
		try {
			dojo.doc.write('<textarea id="dijit._editor.RichText.savedContent" ' +
				'style="display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;"></textarea>');
		}catch(e){ }
	}
}
dojo.declare("dijit._editor.RichText", [ dijit._Widget ], {
	constructor: function(){
		// summary:
		//		dijit._editor.RichText is the core of the WYSIWYG editor in dojo, which
		//		provides the basic editing features. It also encapsulates the differences
		//		of different js engines for various browsers
		//
		// contentPreFilters: Array
		//		pre content filter function register array.
		//		these filters will be executed before the actual
		//		editing area get the html content
		this.contentPreFilters = [];

		// contentPostFilters: Array
		//		post content filter function register array.
		//		these will be used on the resulting html
		//		from contentDomPostFilters. The resuling
		//		content is the final html (returned by getValue())
		this.contentPostFilters = [];

		// contentDomPreFilters: Array
		//		pre content dom filter function register array.
		//		these filters are applied after the result from
		//		contentPreFilters are set to the editing area
		this.contentDomPreFilters = [];

		// contentDomPostFilters: Array
		//		post content dom filter function register array.
		//		these filters are executed on the editing area dom
		//		the result from these will be passed to contentPostFilters
		this.contentDomPostFilters = [];

		// editingAreaStyleSheets: Array
		//		array to store all the stylesheets applied to the editing area
		this.editingAreaStyleSheets=[];

		this._keyHandlers = {};
		this.contentPreFilters.push(dojo.hitch(this, "_preFixUrlAttributes"));
		if(dojo.isMoz){
			this.contentPreFilters.push(this._fixContentForMoz);
		}
		//this.contentDomPostFilters.push(this._postDomFixUrlAttributes);

		this.onLoadDeferred = new dojo.Deferred();
	},

	// inheritWidth: Boolean
	//		whether to inherit the parent's width or simply use 100%
	inheritWidth: false,

	// focusOnLoad: Boolean
	//		whether focusing into this instance of richtext when page onload
	focusOnLoad: false,

	// name: String
	//		If a save name is specified the content is saved and restored when the user
	//		leave this page can come back, or if the editor is not properly closed after
	//		editing has started.
	name: "",

	// styleSheets: String
	//		semicolon (";") separated list of css files for the editing area
	styleSheets: "",

	// _content: String
	//		temporary content storage
	_content: "",

	// height: String
	//		set height to fix the editor at a specific height, with scrolling.
	//		By default, this is 300px. If you want to have the editor always
	//		resizes to accommodate the content, use AlwaysShowToolbar plugin
	//		and set height=""
	height: "300px",

	// minHeight: String
	//		The minimum height that the editor should have
	minHeight: "1em",
	
	// isClosed: Boolean
	isClosed: true,

	// isLoaded: Boolean
	isLoaded: false,

	// _SEPARATOR: String
	//		used to concat contents from multiple textareas into a single string
	_SEPARATOR: "@@**%%__RICHTEXTBOUNDRY__%%**@@",

	// onLoadDeferred: dojo.Deferred
	//		deferred which is fired when the editor finishes loading
	onLoadDeferred: null,

	postCreate: function(){
		// summary: init
		dojo.publish("dijit._editor.RichText::init", [this]);
		this.open();
		this.setupDefaultShortcuts();
	},

	setupDefaultShortcuts: function(){
		// summary: add some default key handlers
		// description:
		// 		Overwrite this to setup your own handlers. The default
		// 		implementation does not use Editor commands, but directly
		//		executes the builtin commands within the underlying browser
		//		support.
		var ctrl = this.KEY_CTRL;
		var exec = function(cmd, arg){
			return arguments.length == 1 ? function(){ this.execCommand(cmd);  } :
				function(){ this.execCommand(cmd, arg);  }
		}
		this.addKeyHandler("b", ctrl, exec("bold"));
		this.addKeyHandler("i", ctrl, exec("italic"));
		this.addKeyHandler("u", ctrl, exec("underline"));
		this.addKeyHandler("a", ctrl, exec("selectall"));
		this.addKeyHandler("s", ctrl, function () { this.save(true);  });

		this.addKeyHandler("1", ctrl, exec("formatblock", "h1"));
		this.addKeyHandler("2", ctrl, exec("formatblock", "h2"));
		this.addKeyHandler("3", ctrl, exec("formatblock", "h3"));
		this.addKeyHandler("4", ctrl, exec("formatblock", "h4"));

		this.addKeyHandler("\\", ctrl, exec("insertunorderedlist"));
		if(!dojo.isIE){
			this.addKeyHandler("Z", ctrl, exec("redo"));
		}
	},

	// events: Array
	//		 events which should be connected to the underlying editing area
	events: ["onKeyPress", "onKeyDown", "onKeyUp", "onClick"],

	// events: Array
	//		 events which should be connected to the underlying editing
	//		 area, events in this array will be addListener with
	//		 capture=true
	captureEvents: [],

	_editorCommandsLocalized: false,
	_localizeEditorCommands: function(){
		if(this._editorCommandsLocalized){
			return;
		}
		this._editorCommandsLocalized = true;

		//in IE, names for blockformat is locale dependent, so we cache the values here

		//if the normal way fails, we try the hard way to get the list

		//do not use _cacheLocalBlockFormatNames here, as it will
		//trigger security warning in IE7

		//in the array below, ul can not come directly after ol,
		//otherwise the queryCommandValue returns Normal for it
		var formats = ['p', 'pre', 'address', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'ol', 'div', 'ul'];
		var localhtml = "", format, i=0;
		while((format=formats[i++])){
			if(format.charAt(1) != 'l'){
				localhtml += "<"+format+"><span>content</span></"+format+">";
			}else{
				localhtml += "<"+format+"><li>content</li></"+format+">";
			}
		}
		//queryCommandValue returns empty if we hide editNode, so move it out of screen temporary
		var div=document.createElement('div');
		div.style.position = "absolute";
		div.style.left = "-2000px";
		div.style.top = "-2000px";
		document.body.appendChild(div);
		div.innerHTML = localhtml;
		var node = div.firstChild;
		while(node){
			dijit._editor.selection.selectElement(node.firstChild);
			dojo.withGlobal(this.window, "selectElement", dijit._editor.selection, [node.firstChild]);
			var nativename = node.tagName.toLowerCase();
			this._local2NativeFormatNames[nativename] = document.queryCommandValue("formatblock");//this.queryCommandValue("formatblock");
			this._native2LocalFormatNames[this._local2NativeFormatNames[nativename]] = nativename;
			node = node.nextSibling;
		}
		document.body.removeChild(div);
	},

	open: function(/*DomNode?*/element){
		// summary:
		//		Transforms the node referenced in this.domNode into a rich text editing
		//		node. This will result in the creation and replacement with an <iframe>
		//		if designMode(FF)/contentEditable(IE) is used.

		if((!this.onLoadDeferred)||(this.onLoadDeferred.fired >= 0)){
			this.onLoadDeferred = new dojo.Deferred();
		}

		if(!this.isClosed){ this.close();  }
		dojo.publish("dijit._editor.RichText::open", [ this ]);

		this._content = "";
		if((arguments.length == 1)&&(element["nodeName"])){ this.domNode = element;  } // else unchanged

		if(	(this.domNode["nodeName"])&&
			(this.domNode.nodeName.toLowerCase() == "textarea")){
			// if we were created from a textarea, then we need to create a
			// new editing harness node.
			this.textarea = this.domNode;
			this.name=this.textarea.name;
			var html = this._preFilterContent(this.textarea.value);
			this.domNode = dojo.doc.createElement("div");
			this.domNode.setAttribute('widgetId',this.id);
			this.textarea.removeAttribute('widgetId');
			this.domNode.cssText = this.textarea.cssText;
			this.domNode.className += " "+this.textarea.className;
			dojo.place(this.domNode, this.textarea, "before");
			var tmpFunc = dojo.hitch(this, function(){
				//some browsers refuse to submit display=none textarea, so
				//move the textarea out of screen instead
				with(this.textarea.style){
					display = "block";
					position = "absolute";
					left = top = "-1000px";

					if(dojo.isIE){ //nasty IE bug: abnormal formatting if overflow is not hidden
						this.__overflow = overflow;
						overflow = "hidden";
					}
				}
			});
			if(dojo.isIE){
				setTimeout(tmpFunc, 10);
			}else{
				tmpFunc();
			}

			// this.domNode.innerHTML = html;

//				if(this.textarea.form){
//					// FIXME: port: this used to be before advice!!!
//					dojo.connect(this.textarea.form, "onsubmit", this, function(){
//						// FIXME: should we be calling close() here instead?
//						this.textarea.value = this.getValue();
//					});
//				}
		}else{
			var html = this._preFilterContent(this.getNodeChildrenHtml(this.domNode));
			this.domNode.innerHTML = '';
		}
		if(html == ""){ html = "&nbsp;";  }

		var content = dojo.contentBox(this.domNode);
		// var content = dojo.contentBox(this.srcNodeRef);
		this._oldHeight = content.h;
		this._oldWidth = content.w;

		this.savedContent = html;

		// If we're a list item we have to put in a blank line to force the
		// bullet to nicely align at the top of text
		if(	(this.domNode["nodeName"]) &&
			(this.domNode.nodeName == "LI") ){
			this.domNode.innerHTML = " <br>";
		}

		this.editingArea = dojo.doc.createElement("div");
		this.domNode.appendChild(this.editingArea);

		if(this.name != "" && (!djConfig["useXDomain"] || djConfig["allowXdRichTextSave"])){
			var saveTextarea = dojo.byId("dijit._editor.RichText.savedContent");
			if(saveTextarea.value != ""){
				var datas = saveTextarea.value.split(this._SEPARATOR), i=0, dat;
				while((dat=datas[i++])){
					var data = dat.split(":");
					if(data[0] == this.name){
						html = data[1];
						datas.splice(i, 1);
						break;
					}
				}
			}

			// FIXME: need to do something different for Opera/Safari
			dojo.connect(window, "onbeforeunload", this, "_saveContent");
			// dojo.connect(window, "onunload", this, "_saveContent");
		}

		this.isClosed = false;
		// Safari's selections go all out of whack if we do it inline,
		// so for now IE is our only hero
		//if (typeof document.body.contentEditable != "undefined") {
		if(dojo.isIE || dojo.isSafari || dojo.isOpera){ // contentEditable, easy
			var ifr = this.iframe = dojo.doc.createElement('iframe');
			ifr.src = 'javascript:void(0)';
			this.editorObject = ifr;
			ifr.style.border = "none";
			ifr.style.width = "100%";
			ifr.frameBorder = 0;
//			ifr.style.scrolling = this.height ? "auto" : "vertical";
			this.editingArea.appendChild(ifr);
			this.window = ifr.contentWindow;
			this.document = this.window.document;
			this.document.open();
			this.document.write(this._getIframeDocTxt(html));
			this.document.close();

			if(dojo.isIE >= 7){
				if(this.height){
					ifr.style.height = this.height;
				}
				if(this.minHeight){
					ifr.style.minHeight = this.minHeight;
				}
			}else{
				ifr.style.height = this.height ? this.height : this.minHeight;
			}

			if(dojo.isIE){
				this._localizeEditorCommands();
			}

			this.onLoad();
		}else{ // designMode in iframe
			this._drawIframe(html);
		}

		// TODO: this is a guess at the default line-height, kinda works
		if(this.domNode.nodeName == "LI"){ this.domNode.lastChild.style.marginTop = "-1.2em";  }
		this.domNode.className += " RichTextEditable";
	},

	//static cache variables shared among all instance of this class
	_local2NativeFormatNames: {},
	_native2LocalFormatNames: {},
	_localizedIframeTitles: null,

	_getIframeDocTxt: function(/* String */ html){
		var _cs = dojo.getComputedStyle(this.domNode);
		if(!this.height && !dojo.isMoz){
			html="<div>"+html+"</div>";
		}
		var font = [ _cs.fontWeight, _cs.fontSize, _cs.fontFamily ].join(" ");

		// line height is tricky - applying a units value will mess things up.
		// if we can't get a non-units value, bail out.
		var lineHeight = _cs.lineHeight;
		if(lineHeight.indexOf("px") >= 0){
			lineHeight = parseFloat(lineHeight)/parseFloat(_cs.fontSize);
			// console.debug(lineHeight);
		}else if(lineHeight.indexOf("em")>=0){
			lineHeight = parseFloat(lineHeight);
		}else{
			lineHeight = "1.0";
		}
		return [
			this.isLeftToRight() ? "<html><head>" : "<html dir='rtl'><head>",
			(dojo.isMoz ? "<title>" + this._localizedIframeTitles.iframeEditTitle + "</title>" : ""),
			"<style>",
			"body,html {",
			"	background:transparent;",
			"	padding: 0;",
			"	margin: 0;",
			"}",
			// TODO: left positioning will cause contents to disappear out of view
			//	   if it gets too wide for the visible area
			"body{",
			"	top:0px;  left:0px;  right:0px;",
				((this.height||dojo.isOpera) ? "" : "position: fixed;"),
			"	font:", font, ";",
			// FIXME: IE 6 won't understand min-height?
			"	min-height:", this.minHeight, ";",
			"	line-height:", lineHeight,
			"}",
			"p{ margin: 1em 0 !important;  }",
			(this.height ?
				"" : "body,html{overflow-y:hidden;/*for IE*/} body > div {overflow-x:auto;/*for FF to show vertical scrollbar*/}"
			),
			"li > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em;  } ",
			"li{ min-height:1.2em;  }",
			"</style>",
			this._applyEditingAreaStyleSheets(),
			"</head><body>"+html+"</body></html>"
		].join("");  // String
	},

	_drawIframe: function(/*String*/html){
		// summary:
		//		Draws an iFrame using the existing one if one exists.
		//		Used by Mozilla, Safari, and Opera

		if(!this.iframe){
			var ifr = this.iframe = dojo.doc.createElement("iframe");
			// this.iframe.src = "about:blank";
			// document.body.appendChild(this.iframe);
			// console.debug(this.iframe.contentDocument.open());
			// dojo.body().appendChild(this.iframe);
			var ifrs = ifr.style;
			// ifrs.border = "1px solid black";
			ifrs.border = "none";
			ifrs.lineHeight = "0";  // squash line height
			ifrs.verticalAlign = "bottom";
//			ifrs.scrolling = this.height ? "auto" : "vertical";
			this.editorObject = this.iframe;
			// get screen reader text for mozilla here, too
			this._localizedIframeTitles = dojo.i18n.getLocalization("dijit", "Textarea");
			// need to find any associated label element and update iframe document title
			var label=dojo.query('label[for="'+this.id+'"]');
			if(label.length){
				this._localizedIframeTitles.iframeEditTitle = label[0].innerHTML + " " + this._localizedIframeTitles.iframeEditTitle;
			}
		}
		// opera likes this to be outside the with block
		//	this.iframe.src = "javascript:void(0)";//dojo.uri.dojoUri("src/widget/templates/richtextframe.html") + ((dojo.doc.domain != currentDomain) ? ("#"+dojo.doc.domain) : "");
		this.iframe.style.width = this.inheritWidth ? this._oldWidth : "100%";

		if(this.height){
			this.iframe.style.height = this.height;
		}else{
			this.iframe.height = this._oldHeight;
		}

		if(this.textarea){
			var tmpContent = this.srcNodeRef;
		}else{
			var tmpContent = dojo.doc.createElement('div');
			tmpContent.style.display="none";
			tmpContent.innerHTML = html;
			//append tmpContent to under the current domNode so that the margin
			//calculation below is correct
			this.editingArea.appendChild(tmpContent);
		}

		this.editingArea.appendChild(this.iframe);

		//do we want to show the content before the editing area finish loading here?
		//if external style sheets are used for the editing area, the appearance now
		//and after loading of the editing area won't be the same (and padding/margin
		//calculation above may not be accurate)
		//	tmpContent.style.display = "none";
		//	this.editingArea.appendChild(this.iframe);

		var _iframeInitialized = false;
		// console.debug(this.iframe);
		// var contentDoc = this.iframe.contentWindow.document;


		// note that on Safari lower than 420+, we have to get the iframe
		// by ID in order to get something w/ a contentDocument property

		var contentDoc = this.iframe.contentDocument;
		contentDoc.open();
		contentDoc.write(this._getIframeDocTxt(html));
		contentDoc.close();

		// now we wait for onload. Janky hack!
		var ifrFunc = dojo.hitch(this, function(){
			if(!_iframeInitialized){
				_iframeInitialized = true;
			}else{ return;  }
			if(!this.editNode){
				try{
					if(this.iframe.contentWindow){
						this.window = this.iframe.contentWindow;
						this.document = this.iframe.contentWindow.document
					}else if(this.iframe.contentDocument){
						// for opera
						this.window = this.iframe.contentDocument.window;
						this.document = this.iframe.contentDocument;
					}
					if(!this.document.body){
						throw 'Error';
					}
				}catch(e){
					setTimeout(ifrFunc,500);
					_iframeInitialized = false;
					return;
				}

				dojo._destroyElement(tmpContent);
				this.document.designMode = "on";
				//	try{
				//	this.document.designMode = "on";
				// }catch(e){
				//	this._tryDesignModeOnClick=true;
				// }

				this.onLoad();
			}else{
				dojo._destroyElement(tmpContent);
				this.editNode.innerHTML = html;
				this.onDisplayChanged();
			}
			this._preDomFilterContent(this.editNode);
		});

		ifrFunc();
	},

	_applyEditingAreaStyleSheets: function(){
		// summary:
		//		apply the specified css files in styleSheets
		var files = [];
		if(this.styleSheets){
			files = this.styleSheets.split(';');
			this.styleSheets = '';
		}

		//empty this.editingAreaStyleSheets here, as it will be filled in addStyleSheet
		files = files.concat(this.editingAreaStyleSheets);
		this.editingAreaStyleSheets = [];

		var text='', i=0, url;
		while((url=files[i++])){
			var abstring = (new dojo._Url(dojo.global.location, url)).toString();
			this.editingAreaStyleSheets.push(abstring);
			text += '<link rel="stylesheet" type="text/css" href="'+abstring+'"/>'
		}
		return text;
	},

	addStyleSheet: function(/*dojo._Url*/uri){
		// summary:
		//		add an external stylesheet for the editing area
		// uri:	a dojo.uri.Uri pointing to the url of the external css file
		var url=uri.toString();

		//if uri is relative, then convert it to absolute so that it can be resolved correctly in iframe
		if(url.charAt(0) == '.' || (url.charAt(0) != '/' && !uri.host)){
			url = (new dojo._Url(dojo.global.location, url)).toString();
		}

		if(dojo.indexOf(this.editingAreaStyleSheets, url) > -1){
			console.debug("dijit._editor.RichText.addStyleSheet: Style sheet "+url+" is already applied to the editing area!");
			return;
		}

		this.editingAreaStyleSheets.push(url);
		if(this.document.createStyleSheet){ //IE
			this.document.createStyleSheet(url);
		}else{ //other browser
			var head = this.document.getElementsByTagName("head")[0];
			var stylesheet = this.document.createElement("link");
			with(stylesheet){
				rel="stylesheet";
				type="text/css";
				href=url;
			}
			head.appendChild(stylesheet);
		}
	},

	removeStyleSheet: function(/*dojo._Url*/uri){
		// summary:
		//		remove an external stylesheet for the editing area
		var url=uri.toString();
		//if uri is relative, then convert it to absolute so that it can be resolved correctly in iframe
		if(url.charAt(0) == '.' || (url.charAt(0) != '/' && !uri.host)){
			url = (new dojo._Url(dojo.global.location, url)).toString();
		}
		var index = dojo.indexOf(this.editingAreaStyleSheets, url);
		if(index == -1){
			console.debug("dijit._editor.RichText.removeStyleSheet: Style sheet "+url+" is not applied to the editing area so it can not be removed!");
			return;
		}
		delete this.editingAreaStyleSheets[index];
		dojo.withGlobal(this.window,'query', dojo, ['link:[href="'+url+'"]']).orphan()
	},

	disabled: false,
	_mozSettingProps: ['styleWithCSS','insertBrOnReturn'],
	setDisabled: function(/*Boolean*/ disabled){
		if(dojo.isIE || dojo.isSafari || dojo.isOpera){
			this.editNode.contentEditable=!disabled;
		}else{ //moz
			if(disabled){
				this._mozSettings=[false,this.blockNodeForEnter==='BR'];
			}
			this.document.designMode=(disabled?'off':'on');
			if(!disabled){
				dojo.forEach(this._mozSettingProps, function(s,i){
					this.document.execCommand(s,false,this._mozSettings[i]);
				},this);
			}
//			this.document.execCommand('contentReadOnly', false, disabled);
//				if(disabled){
//					this.blur();  //to remove the blinking caret
//				}
//				
		}
		this.disabled=disabled;
	},

/* Event handlers
 *****************/

	_isResized: function(){ return false;  },

	onLoad: function(/* Event */ e){
		// summary: handler after the content of the document finishes loading
		this.isLoaded = true;
		if(this.height || dojo.isMoz){
			this.editNode=this.document.body;
		}else{
			this.editNode=this.document.body.firstChild;
		}
		this.editNode.contentEditable = true;  //should do no harm in FF
		this._preDomFilterContent(this.editNode);

		var events=this.events.concat(this.captureEvents),i=0,et;
		while((et=events[i++])){
			this.connect(this.document, et.toLowerCase(), et);
		}
		if(!dojo.isIE){
			try{ // sanity check for Mozilla
//					this.document.execCommand("useCSS", false, true);  // old moz call
				this.document.execCommand("styleWithCSS", false, false);  // new moz call
				//this.document.execCommand("insertBrOnReturn", false, false);  // new moz call
			}catch(e2){ }
			// FIXME: when scrollbars appear/disappear this needs to be fired
		}else{ // IE contentEditable
			// give the node Layout on IE
			this.editNode.style.zoom = 1.0;
		}

		if(this.focusOnLoad){
			this.focus();
		}

		this.onDisplayChanged(e);
		if(this.onLoadDeferred){
			this.onLoadDeferred.callback(true);
		}
	},

	onKeyDown: function(/* Event */ e){
		// summary: Fired on keydown

//		 console.info("onkeydown:", e.keyCode);

		// we need this event at the moment to get the events from control keys
		// such as the backspace. It might be possible to add this to Dojo, so that
		// keyPress events can be emulated by the keyDown and keyUp detection.
		if(dojo.isIE){
			if(e.keyCode === dojo.keys.BACKSPACE && this.document.selection.type === "Control"){
				// IE has a bug where if a non-text object is selected in the editor,
		  // hitting backspace would act as if the browser's back button was
		  // clicked instead of deleting the object. see #1069
				dojo.stopEvent(e);
				this.execCommand("delete");
			}else if(	(65 <= e.keyCode&&e.keyCode <= 90) ||
				(e.keyCode>=37&&e.keyCode<=40) // FIXME: get this from connect() instead!
			){ //arrow keys
				e.charCode = e.keyCode;
				this.onKeyPress(e);
			}
		}
		else if (dojo.isMoz){
			if(e.keyCode == dojo.keys.TAB && !e.shiftKey && !e.ctrlKey && !e.altKey && this.iframe){
				// update iframe document title for screen reader
				this.iframe.contentDocument.title = this._localizedIframeTitles.iframeFocusTitle;
				
				// Place focus on the iframe. A subsequent tab or shift tab will put focus
				// on the correct control.
				this.iframe.focus();   // this.focus();  won't work
				dojo.stopEvent(e);
			}else if (e.keyCode == dojo.keys.TAB && e.shiftKey){
				// if there is a toolbar, set focus to it, otherwise ignore
				if (this.toolbar){
					this.toolbar.focus();
				}
				dojo.stopEvent(e);
			}
		}
	},

	onKeyUp: function(e){
		// summary: Fired on keyup
		return;
	},

	KEY_CTRL: 1,
	KEY_SHIFT: 2,

	onKeyPress: function(e){
		// summary: Fired on keypress

//		 console.info("onkeypress:", e.keyCode);

		// handle the various key events
		var modifiers = e.ctrlKey ? this.KEY_CTRL : 0 | e.shiftKey?this.KEY_SHIFT : 0;

		var key = e.keyChar||e.keyCode;
		if(this._keyHandlers[key]){
			// console.debug("char:", e.key);
			var handlers = this._keyHandlers[key], i = 0, h;
			while((h = handlers[i++])){
				if(modifiers == h.modifiers){
					if(!h.handler.apply(this,arguments)){
						e.preventDefault();
					}
					break;
				}
			}
		}

		// function call after the character has been inserted
		setTimeout(dojo.hitch(this, function(){
			this.onKeyPressed(e);
		}), 1);
	},

	addKeyHandler: function(/*String*/key, /*Int*/modifiers, /*Function*/handler){
		// summary: add a handler for a keyboard shortcut
		if(!dojo.isArray(this._keyHandlers[key])){ this._keyHandlers[key] = [];  }
		this._keyHandlers[key].push({
			modifiers: modifiers || 0,
			handler: handler
		});
	},

	onKeyPressed: function(/*Event*/e){
		this.onDisplayChanged(/*e*/);  // can't pass in e
	},

	onClick: function(/*Event*/e){
//			console.debug('onClick',this._tryDesignModeOnClick);
//			if(this._tryDesignModeOnClick){
//				try{
//					this.document.designMode='on';
//					this._tryDesignModeOnClick=false;
//				}catch(e){}
//			}
		this.onDisplayChanged(e);  },
	_onBlur: function(e){
		var _c=this.getValue(true);
		if(_c!=this.savedContent){
			this.onChange(_c);
			this.savedContent=_c;
		}
		if (dojo.isMoz && this.iframe){
			this.iframe.contentDocument.title = this._localizedIframeTitles.iframeEditTitle;
		} 
//			console.info('_onBlur')
	},
	_initialFocus: true,
	_onFocus: function(/*Event*/e){
//			console.info('_onFocus')
		// summary: Fired on focus
		if( (dojo.isMoz)&&(this._initialFocus) ){
			this._initialFocus = false;
			if(this.editNode.innerHTML.replace(/^\s+|\s+$/g, "") == "&nbsp;"){
				this.placeCursorAtStart();
//					this.execCommand("selectall");
//					this.window.getSelection().collapseToStart();
			}
		}
	},

	blur: function(){
		// summary: remove focus from this instance
		if(this.iframe){
			this.window.blur();
		}else if(this.editNode){
			this.editNode.blur();
		}
	},

	focus: function(){
		// summary: move focus to this instance
		if(this.iframe && !dojo.isIE){
			dijit.focus(this.iframe);
		}else if(this.editNode && this.editNode.focus){
			// editNode may be hidden in display:none div, lets just punt in this case
			dijit.focus(this.editNode);
		}else{
			console.debug("Have no idea how to focus into the editor!");
		}
	},

//		_lastUpdate: 0,
	updateInterval: 200,
	_updateTimer: null,
	onDisplayChanged: function(/*Event*/e){
		// summary:
		//		This event will be fired everytime the display context
		//		changes and the result needs to be reflected in the UI.
		// description:
		//		If you don't want to have update too often,
		//		onNormalizedDisplayChanged should be used instead

//			var _t=new Date();
		if(!this._updateTimer){
//				this._lastUpdate=_t;
			if(this._updateTimer){
				clearTimeout(this._updateTimer);
			}
			this._updateTimer=setTimeout(dojo.hitch(this,this.onNormalizedDisplayChanged),this.updateInterval);
		}
	},
	onNormalizedDisplayChanged: function(){
		// summary:
		//		This event is fired every updateInterval ms or more
		// description:
		//		If something needs to happen immidiately after a
		//		user change, please use onDisplayChanged instead
		this._updateTimer=null;
	},
	onChange: function(newContent){
		// summary:
		//		this is fired if and only if the editor loses focus and
		//		the content is changed

//			console.log('onChange',newContent);
	},
	_normalizeCommand: function(/*String*/cmd){
		// summary:
		//		Used as the advice function by dojo.connect to map our
		//		normalized set of commands to those supported by the target
		//		browser

		var command = cmd.toLowerCase();
		if(command == "formatblock"){
			if(dojo.isSafari){ command = "heading";  }
		}else if(command == "hilitecolor" && !dojo.isMoz){
			command = "backcolor";
		}

		return command;
	},

	queryCommandAvailable: function(/*String*/command){
		// summary:
		//		Tests whether a command is supported by the host. Clients SHOULD check
		//		whether a command is supported before attempting to use it, behaviour
		//		for unsupported commands is undefined.
		// command: The command to test for
		var ie = 1;
		var mozilla = 1 << 1;
		var safari = 1 << 2;
		var opera = 1 << 3;
		var safari420 = 1 << 4;

		var gt420 = dojo.isSafari;

		function isSupportedBy(browsers){
			return {
				ie: Boolean(browsers & ie),
				mozilla: Boolean(browsers & mozilla),
				safari: Boolean(browsers & safari),
				safari420: Boolean(browsers & safari420),
				opera: Boolean(browsers & opera)
			}
		}

		var supportedBy = null;

		switch(command.toLowerCase()){
			case "bold": case "italic": case "underline":
			case "subscript": case "superscript":
			case "fontname": case "fontsize":
			case "forecolor": case "hilitecolor":
			case "justifycenter": case "justifyfull": case "justifyleft":
			case "justifyright": case "delete": case "selectall":
				supportedBy = isSupportedBy(mozilla | ie | safari | opera);
				break;

			case "createlink": case "unlink": case "removeformat":
			case "inserthorizontalrule": case "insertimage":
			case "insertorderedlist": case "insertunorderedlist":
			case "indent": case "outdent": case "formatblock":
			case "inserthtml": case "undo": case "redo": case "strikethrough":
				supportedBy = isSupportedBy(mozilla | ie | opera | safari420);
				break;

			case "blockdirltr": case "blockdirrtl":
			case "dirltr": case "dirrtl":
			case "inlinedirltr": case "inlinedirrtl":
				supportedBy = isSupportedBy(ie);
				break;
			case "cut": case "copy": case "paste":
				supportedBy = isSupportedBy( ie | mozilla | safari420);
				break;

			case "inserttable":
				supportedBy = isSupportedBy(mozilla | ie);
				break;

			case "insertcell": case "insertcol": case "insertrow":
			case "deletecells": case "deletecols": case "deleterows":
			case "mergecells": case "splitcell":
				supportedBy = isSupportedBy(ie | mozilla);
				break;

			default: return false;
		}

		return (dojo.isIE && supportedBy.ie) ||
			(dojo.isMoz && supportedBy.mozilla) ||
			(dojo.isSafari && supportedBy.safari) ||
			(gt420 && supportedBy.safari420) ||
			(dojo.isOpera && supportedBy.opera);   // Boolean return true if the command is supported, false otherwise
	},

	execCommand: function(/*String*/command, argument){
		// summary: Executes a command in the Rich Text area
		// command: The command to execute
		// argument: An optional argument to the command
		var returnValue;

		//focus() is required for IE to work
		//In addition, focus() makes sure after the execution of
		//the command, the editor receives the focus as expected
		this.focus();

		command = this._normalizeCommand(command);
		if(argument != undefined){
			if(command == "heading"){
				throw new Error("unimplemented");
			}else if((command == "formatblock") && dojo.isIE){
				argument = '<'+argument+'>';
			}
		}
		if(command == "inserthtml"){
			//TODO: we shall probably call _preDomFilterContent here as well
			argument=this._preFilterContent(argument);
			if(dojo.isIE){
				var insertRange = this.document.selection.createRange();
				insertRange.pasteHTML(argument);
				insertRange.select();
				//insertRange.collapse(true);
				returnValue=true;
			}else if(dojo.isMoz && !argument.length){
				//mozilla can not inserthtml an empty html to delete current selection
				//so we delete the selection instead in this case
				dojo.withGlobal(this.window,'remove',dijit._editor.selection);  // FIXME
				returnValue=true;
			}else{
				returnValue=this.document.execCommand(command, false, argument);
			}
		}else if(
			(command == "unlink")&&
			(this.queryCommandEnabled("unlink"))&&
			(dojo.isMoz || dojo.isSafari)
		){
			// fix up unlink in Mozilla to unlink the link and not just the selection

			// grab selection
			// Mozilla gets upset if we just store the range so we have to
			// get the basic properties and recreate to save the selection
			var selection = this.window.getSelection();
			//	var selectionRange = selection.getRangeAt(0);
			//	var selectionStartContainer = selectionRange.startContainer;
			//	var selectionStartOffset = selectionRange.startOffset;
			//	var selectionEndContainer = selectionRange.endContainer;
			//	var selectionEndOffset = selectionRange.endOffset;

			// select our link and unlink
			var a = dojo.withGlobal(this.window, "getAncestorElement",dijit._editor.selection, ['a']);
			dojo.withGlobal(this.window, "selectElement", dijit._editor.selection, [a]);

			returnValue=this.document.execCommand("unlink", false, null);
		}else if((command == "hilitecolor")&&(dojo.isMoz)){
//				// mozilla doesn't support hilitecolor properly when useCSS is
//				// set to false (bugzilla #279330)

			this.document.execCommand("styleWithCSS", false, true);
			returnValue = this.document.execCommand(command, false, argument);
			this.document.execCommand("styleWithCSS", false, false);

		}else if((dojo.isIE)&&( (command == "backcolor")||(command == "forecolor") )){
			// Tested under IE 6 XP2, no problem here, comment out
			// IE weirdly collapses ranges when we exec these commands, so prevent it
//				var tr = this.document.selection.createRange();
			argument = arguments.length > 1 ? argument : null;
			returnValue = this.document.execCommand(command, false, argument);

			// timeout is workaround for weird IE behavior were the text
			// selection gets correctly re-created, but subsequent input
			// apparently isn't bound to it
//				setTimeout(function(){tr.select();}, 1);
		}else{
			argument = arguments.length > 1 ? argument : null;
//				if(dojo.isMoz){
//					this.document = this.iframe.contentWindow.document
//				}

			if(argument || command!="createlink"){
				returnValue = this.document.execCommand(command, false, argument);
			}
		}

		this.onDisplayChanged();
		return returnValue;
	},

	queryCommandEnabled: function(/*String*/command){
		// summary: check whether a command is enabled or not
		command = this._normalizeCommand(command);
		if(dojo.isMoz || dojo.isSafari){
			if(command == "unlink"){ // mozilla returns true always
				// console.debug(dojo.withGlobal(this.window, "hasAncestorElement",dijit._editor.selection, ['a']));
				return dojo.withGlobal(this.window, "hasAncestorElement",dijit._editor.selection, ['a']);
			}else if (command == "inserttable"){
				return true;
			}
		}
		//see #4109
		if(dojo.isSafari)
			if(command == "copy"){
				command="cut";
			}else if(command == "paste"){
				return true;
		}

		// return this.document.queryCommandEnabled(command);
		var elem = (dojo.isIE) ? this.document.selection.createRange() : this.document;
		return elem.queryCommandEnabled(command);
	},

	queryCommandState: function(command){
		// summary: check the state of a given command
		command = this._normalizeCommand(command);
		return this.document.queryCommandState(command);
	},

	queryCommandValue: function(command){
		// summary: check the value of a given command
		command = this._normalizeCommand(command);
		if(dojo.isIE && command == "formatblock"){
			return this._local2NativeFormatNames[this.document.queryCommandValue(command)];
		}
		return this.document.queryCommandValue(command);
	},

	// Misc.

	placeCursorAtStart: function(){
		// summary:
		//		place the cursor at the start of the editing area
		this.focus();

		//see comments in placeCursorAtEnd
		var isvalid=false;
		if(dojo.isMoz){
			var first=this.editNode.firstChild;
			while(first){
				if(first.nodeType == 3){
					if(first.nodeValue.replace(/^\s+|\s+$/g, "").length>0){
						isvalid=true;
						dojo.withGlobal(this.window, "selectElement", dijit._editor.selection, [first]);
						break;
					}
				}else if(first.nodeType == 1){
					isvalid=true;
					dojo.withGlobal(this.window, "selectElementChildren",dijit._editor.selection, [first]);
					break;
				}
				first = first.nextSibling;
			}
		}else{
			isvalid=true;
			dojo.withGlobal(this.window, "selectElementChildren",dijit._editor.selection, [this.editNode]);
		}
		if(isvalid){
			dojo.withGlobal(this.window, "collapse", dijit._editor.selection, [true]);
		}
	},

	placeCursorAtEnd: function(){
		// summary:
		//		place the cursor at the end of the editing area
		this.focus();

		//In mozilla, if last child is not a text node, we have to use selectElementChildren on this.editNode.lastChild
		//otherwise the cursor would be placed at the end of the closing tag of this.editNode.lastChild
		var isvalid=false;
		if(dojo.isMoz){
			var last=this.editNode.lastChild;
			while(last){
				if(last.nodeType == 3){
					if(last.nodeValue.replace(/^\s+|\s+$/g, "").length>0){
						isvalid=true;
						dojo.withGlobal(this.window, "selectElement",dijit._editor.selection, [last]);
						break;
					}
				}else if(last.nodeType == 1){
					isvalid=true;
					if(last.lastChild){
						dojo.withGlobal(this.window, "selectElement",dijit._editor.selection, [last.lastChild]);
					}else{
						dojo.withGlobal(this.window, "selectElement",dijit._editor.selection, [last]);
					}
					break;
				}
				last = last.previousSibling;
			}
		}else{
			isvalid=true;
			dojo.withGlobal(this.window, "selectElementChildren",dijit._editor.selection, [this.editNode]);
		}
		if(isvalid){
			dojo.withGlobal(this.window, "collapse", dijit._editor.selection, [false]);
		}
	},

	getValue: function(/*Boolean?*/nonDestructive){
		// summary:
		//		return the current content of the editing area (post filters are applied)
		if(this.textarea){
			if(this.isClosed || !this.isLoaded){
				return this.textarea.value;
			}
		}

		return this._postFilterContent(null, nonDestructive);
	},

	setValue: function(/*String*/html){
		// summary:
		//		this function set the content. No undo history is preserved
		if(this.textarea && (this.isClosed || !this.isLoaded)){
			this.textarea.value=html;
		}else{
			html = this._preFilterContent(html);
			if(this.isClosed){
				this.domNode.innerHTML = html;
				this._preDomFilterContent(this.domNode);
			}else{
				this.editNode.innerHTML = html;
				this._preDomFilterContent(this.editNode);
			}
		}
	},

	replaceValue: function(/*String*/html){
		// summary:
		//		this function set the content while trying to maintain the undo stack
		//		(now only works fine with Moz, this is identical to setValue in all
		//		other browsers)
		if(this.isClosed){
			this.setValue(html);
		}else if(this.window && this.window.getSelection && !dojo.isMoz){ // Safari
			// look ma! it's a totally f'd browser!
			this.setValue(html);
		}else if(this.window && this.window.getSelection){ // Moz
			html = this._preFilterContent(html);
			this.execCommand("selectall");
			if(dojo.isMoz && !html){ html = "&nbsp;" }
			this.execCommand("inserthtml", html);
			this._preDomFilterContent(this.editNode);
		}else if(this.document && this.document.selection){//IE
			//In IE, when the first element is not a text node, say
			//an <a> tag, when replacing the content of the editing
			//area, the <a> tag will be around all the content
			//so for now, use setValue for IE too
			this.setValue(html);
		}
	},

	_preFilterContent: function(/*String*/html){
		// summary:
		//		filter the input before setting the content of the editing area
		var ec = html;
		dojo.forEach(this.contentPreFilters, function(ef){ if(ef){ ec = ef(ec);  } });
		return ec;
	},
	_preDomFilterContent: function(/*DomNode*/dom){
		// summary:
		//		filter the input
		dom = dom || this.editNode;
		dojo.forEach(this.contentDomPreFilters, function(ef){
			if(ef && dojo.isFunction(ef)){
				ef(dom);
			}
		}, this);
	},

	_postFilterContent: function(/*DomNode|DomNode[]?*/dom,/*Boolean?*/nonDestructive){
		// summary:
		//		filter the output after getting the content of the editing area
		dom = dom || this.editNode;
		if(this.contentDomPostFilters.length){
			if(nonDestructive && dom['cloneNode']){
				dom = dom.cloneNode(true);
			}
			dojo.forEach(this.contentDomPostFilters, function(ef){
				dom = ef(dom);
			});
		}
		var ec = this.getNodeChildrenHtml(dom);
		if(!ec.replace(/^(?:\s|\xA0)+/g, "").replace(/(?:\s|\xA0)+$/g,"").length){ ec = "";  }

		//	if(dojo.isIE){
		//		//removing appended <P>&nbsp;</P> for IE
		//		ec = ec.replace(/(?:<p>&nbsp;</p>[\n\r]*)+$/i,"");
		//	}
		dojo.forEach(this.contentPostFilters, function(ef){
			ec = ef(ec);
		});

		return ec;
	},

	_saveContent: function(/*Event*/e){
		// summary:
		//		Saves the content in an onunload event if the editor has not been closed
		var saveTextarea = dojo.byId("dijit._editor.RichText.savedContent");
		saveTextarea.value += this._SEPARATOR + this.name + ":" + this.getValue();
	},


	escapeXml: function(/*String*/str, /*Boolean*/noSingleQuotes){
		//summary:
		//		Adds escape sequences for special characters in XML: &<>"'
		//		Optionally skips escapes for single quotes
		str = str.replace(/&/gm, "&amp;").replace(/</gm, "&lt;").replace(/>/gm, "&gt;").replace(/"/gm, "&quot;");
		if(!noSingleQuotes){
			str = str.replace(/'/gm, "&#39;");
		}
		return str;  // string
	},

	getNodeHtml: function(/* DomNode */node){
		switch(node.nodeType){
			case 1: //element node
				var output = '<'+node.tagName.toLowerCase();
				if(dojo.isMoz){
					if(node.getAttribute('type')=='_moz'){
						node.removeAttribute('type');
					}
					if(node.getAttribute('_moz_dirty') != undefined){
						node.removeAttribute('_moz_dirty');
					}
				}
				//store the list of attributes and sort it to have the
				//attributes appear in the dictionary order
				var attrarray = [];
				if(dojo.isIE){
					var s = node.outerHTML;
					s = s.substr(0,s.indexOf('>'));
					s = s.replace(/(?:['"])[^"']*\1/g, '');//to make the following regexp safe
					var reg = /([^\s=]+)=/g;
					var m, key;
					while((m = reg.exec(s)) != undefined){
						key=m[1];
						if(key.substr(0,3) != '_dj'){
							if(key == 'src' || key == 'href'){
								if(node.getAttribute('_djrealurl')){
									attrarray.push([key,node.getAttribute('_djrealurl')]);
									continue;
								}
							}
							if(key == 'class'){
								attrarray.push([key,node.className]);
							}else{
								attrarray.push([key,node.getAttribute(key)]);
							}
						}
					}
				}else{
					var attr, i=0, attrs = node.attributes;
					while((attr=attrs[i++])){
						//ignore all attributes starting with _dj which are
						//internal temporary attributes used by the editor
						if(attr.name.substr(0,3) != '_dj' /*&&
							(attr.specified == undefined || attr.specified)*/){
							var v = attr.value;
							if(attr.name == 'src' || attr.name == 'href'){
								if(node.getAttribute('_djrealurl')){
									v = node.getAttribute('_djrealurl');
								}
							}
							attrarray.push([attr.name,v]);
						}
					}
				}
				attrarray.sort(function(a,b){
					return a[0]<b[0]?-1:(a[0]==b[0]?0:1);
				});
				i=0;
				while((attr=attrarray[i++])){
					output += ' '+attr[0]+'="'+attr[1]+'"';
				}
				if(node.childNodes.length){
					output += '>' + this.getNodeChildrenHtml(node)+'</'+node.tagName.toLowerCase()+'>';
				}else{
					output += ' />';
				}
				break;
			case 3: //text
				// FIXME:
				var output = this.escapeXml(node.nodeValue,true);
				break;
			case 8: //comment
				// FIXME:
				var output = '<!--'+this.escapeXml(node.nodeValue,true)+'-->';
				break;
			default:
				var output = "Element not recognized - Type: " + node.nodeType + " Name: " + node.nodeName;
		}
		return output;
	},

	getNodeChildrenHtml: function(/* DomNode */dom){
		// summary: Returns the html content of a DomNode and children
		var out = "";
		if(!dom){ return out;  }
		var nodes = dom["childNodes"]||dom;
		var i=0;
		var node;
		while((node=nodes[i++])){
			out += this.getNodeHtml(node);
		}
		return out;  // String
	},

	close: function(/*Boolean*/save, /*Boolean*/force){
		// summary:
		//		Kills the editor and optionally writes back the modified contents to the
		//		element from which it originated.
		// save:
		//		Whether or not to save the changes. If false, the changes are discarded.
		// force:
		if(this.isClosed){return false;  }

		if(!arguments.length){ save = true;  }
		this._content = this.getValue();
		var changed = (this.savedContent != this._content);

		// line height is squashed for iframes
		// FIXME: why was this here? if (this.iframe){ this.domNode.style.lineHeight = null;  }

		if(this.interval){ clearInterval(this.interval);  }

		if(this.textarea){
			with(this.textarea.style){
				position = "";
				left = top = "";
				if(dojo.isIE){
					overflow = this.__overflow;
					this.__overflow = null;
				}
			}
			if(save){
				this.textarea.value = this._content;
			}else{
				this.textarea.value = this.savedContent;
			}
			dojo._destroyElement(this.domNode);
			this.domNode = this.textarea;
		}else{
			if(save){
				//why we treat moz differently? comment out to fix #1061
//					if(dojo.isMoz){
//						var nc = dojo.doc.createElement("span");
//						this.domNode.appendChild(nc);
//						nc.innerHTML = this.editNode.innerHTML;
//					}else{
//						this.domNode.innerHTML = this._content;
//					}
				this.domNode.innerHTML = this._content;
			}else{
				this.domNode.innerHTML = this.savedContent;
			}
		}

		dojo.removeClass(this.domNode, "RichTextEditable");
		this.isClosed = true;
		this.isLoaded = false;
		// FIXME: is this always the right thing to do?
		delete this.editNode;

		if(this.window && this.window._frameElement){
			this.window._frameElement = null;
		}

		this.window = null;
		this.document = null;
		this.editingArea = null;
		this.editorObject = null;

		return changed;  // Boolean: whether the content has been modified
	},

	destroyRendering: function(){
		// summary: stub	
	}, 

	destroy: function(){
		this.destroyRendering();
		if(!this.isClosed){ this.close(false);  }
		this.inherited("destroy",arguments);
		//dijit._editor.RichText.superclass.destroy.call(this);
	},

	_fixContentForMoz: function(/* String */ html){
		// summary:
		//		Moz can not handle strong/em tags correctly, convert them to b/i
		html = html.replace(/<(\/)?strong([ \>])/gi, '<$1b$2' );
		html = html.replace(/<(\/)?em([ \>])/gi, '<$1i$2' );
		return html;  // String
	},

	_srcInImgRegex	: /(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi ,
	_hrefInARegex	: /(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi ,

	_preFixUrlAttributes: function(/* String */ html){
		html = html.replace(this._hrefInARegex, '$1$4$2$3$5$2 _djrealurl=$2$3$5$2') ;
		html = html.replace(this._srcInImgRegex, '$1$4$2$3$5$2 _djrealurl=$2$3$5$2') ;
		return html;  // String
	}
});

}

if(!dojo._hasResource["dijit.Toolbar"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.Toolbar"] = true;
dojo.provide("dijit.Toolbar");





dojo.declare(
	"dijit.Toolbar",
	[dijit._Widget, dijit._Templated, dijit._KeyNavContainer],
{
	templateString:
		'<div class="dijit dijitToolbar" waiRole="toolbar" tabIndex="${tabIndex}" dojoAttachPoint="containerNode">' +
//			'<table style="table-layout: fixed" class="dijitReset dijitToolbarTable">' + // factor out style
//				'<tr class="dijitReset" dojoAttachPoint="containerNode"></tr>'+
//			'</table>' +
		'</div>',

	tabIndex: "0",

	postCreate: function(){
		this.connectKeyNavHandlers(
			this.isLeftToRight() ? [dojo.keys.LEFT_ARROW] : [dojo.keys.RIGHT_ARROW],
			this.isLeftToRight() ? [dojo.keys.RIGHT_ARROW] : [dojo.keys.LEFT_ARROW]
		);
	},

	startup: function(){
		this.startupKeyNavChildren();
	}
}
);

// Combine with dijit.MenuSeparator??
dojo.declare(
	"dijit.ToolbarSeparator",
	[ dijit._Widget, dijit._Templated ],
{
	// summary
	//	A line between two menu items
	templateString: '<div class="dijitToolbarSeparator dijitInline"></div>',
	postCreate: function(){ dojo.setSelectable(this.domNode, false);  },
	isFocusable: function(){ return false;  }
});

}

if(!dojo._hasResource["dijit.form.Button"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.Button"] = true;
dojo.provide("dijit.form.Button");




dojo.declare("dijit.form.Button", dijit.form._FormWidget, {
/*
 * usage
 *	<button dojoType="button" onClick="...">Hello world</button>
 *
 *  var button1 = new dijit.form.Button({label: "hello world", onClick: foo});
 *	dojo.body().appendChild(button1.domNode);
 */
	// summary
	//	Basically the same thing as a normal HTML button, but with special styling.

	// label: String
	//	text to display in button
	label: "",

	// showLabel: Boolean
	//	whether or not to display the text label in button
	showLabel: true,

	// iconClass: String
	//	class to apply to div in button to make it display an icon
	iconClass: "",

	type: "button",
	baseClass: "dijitButton",
	templateString:"<div class=\"dijit dijitLeft dijitInline dijitButton\"\n\tdojoAttachEvent=\"onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"\n\t><div class='dijitRight'\n\t\t><button class=\"dijitStretch dijitButtonNode dijitButtonContents\" dojoAttachPoint=\"focusNode,titleNode\"\n\t\t\ttype=\"${type}\" waiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t><span class=\"dijitInline ${iconClass}\" dojoAttachPoint=\"iconNode\" \n \t\t\t\t><span class=\"dijitToggleButtonIconChar\">&#10003</span \n\t\t\t></span\n\t\t\t><span class=\"dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\">${label}</span\n\t\t></button\n\t></div\n></div>\n",

	// TODO: set button's title to this.containerNode.innerText

	_onClick: function(/*Event*/ e){
		// summary: internal function to handle click actions
		if(this.disabled){ return false;  }
		this._clicked();  // widget click actions
		return this.onClick(e);  // user click actions
	},

	_onButtonClick: function(/*Event*/ e){
		// summary: callback when the user mouse clicks the button portion
		dojo.stopEvent(e);
		var okToSubmit = this._onClick(e) !== false;  // returning nothing is same as true

		// for some reason type=submit buttons don't automatically submit the form;  do it manually
		if(this.type=="submit" && okToSubmit){
			for(var node=this.domNode;  node;  node=node.parentNode){
				var widget=dijit.byNode(node);
				if(widget && widget._onSubmit){
					widget._onSubmit(e);
					break;
				}
				if(node.tagName.toLowerCase() == "form"){
					if(!node.onsubmit || node.onsubmit()){ node.submit();  }
					break;
				}
			}
		}
	},

	postCreate: function(){
		// summary:
		//	get label and set as title on button icon if necessary
		if (this.showLabel == false){
			var labelText = "";
			this.label = this.containerNode.innerHTML;
			labelText = dojo.trim(this.containerNode.innerText || this.containerNode.textContent);
			// set title attrib on iconNode
			this.titleNode.title=labelText;
			dojo.addClass(this.containerNode,"dijitDisplayNone");
		}
		this.inherited(arguments);
	},

	onClick: function(/*Event*/ e){
		// summary: user callback for when button is clicked
		//      if type="submit", return value != false to perform submit
		return true;
	},

	_clicked: function(/*Event*/ e){
		// summary: internal replaceable function for when the button is clicked
	},

	setLabel: function(/*String*/ content){
		// summary: reset the label (text) of the button;  takes an HTML string
		this.containerNode.innerHTML = this.label = content;
		if(dojo.isMozilla){ // Firefox has re-render issues with tables
			var oldDisplay = dojo.getComputedStyle(this.domNode).display;
			this.domNode.style.display="none";
			var _this = this;
			setTimeout(function(){_this.domNode.style.display=oldDisplay;},1);
		}
		if (this.showLabel == false){
				this.titleNode.title=dojo.trim(this.containerNode.innerText || this.containerNode.textContent);
		}
	}		
});

/*
 * usage
 *	<button dojoType="DropDownButton" label="Hello world"><div dojotype=dijit.Menu>...</div></button>
 *
 *  var button1 = new dijit.form.DropDownButton({ label: "hi", dropDown: new dijit.Menu(...) });
 *	dojo.body().appendChild(button1);
 */
dojo.declare("dijit.form.DropDownButton", [dijit.form.Button, dijit._Container], {
	// summary
	//		push the button and a menu shows up

	baseClass : "dijitDropDownButton",

	templateString:"<div class=\"dijit dijitLeft dijitInline\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey\"\n\t><div class='dijitRight'>\n\t<button class=\"dijitStretch dijitButtonNode dijitButtonContents\" type=\"${type}\"\n\t\tdojoAttachPoint=\"focusNode,titleNode\" waiRole=\"button\" waiState=\"haspopup-true,labelledby-${id}_label\"\n\t\t><div class=\"dijitInline ${iconClass}\" dojoAttachPoint=\"iconNode\"></div\n\t\t><span class=\"dijitButtonText\" \tdojoAttachPoint=\"containerNode,popupStateNode\"\n\t\tid=\"${id}_label\">${label}</span\n\t\t><span class='dijitA11yDownArrow'>&#9660;</span>\n\t</button>\n</div></div>\n",

	_fillContent: function(){
		// my inner HTML contains both the button contents and a drop down widget, like
		// <DropDownButton>  <span>push me</span>  <Menu> ... </Menu> </DropDownButton>
		// The first node is assumed to be the button content. The widget is the popup.
		if(this.srcNodeRef){ // programatically created buttons might not define srcNodeRef
			//FIXME: figure out how to filter out the widget and use all remaining nodes as button
			//	content, not just nodes[0]
			var nodes = dojo.query("*", this.srcNodeRef);
			dijit.form.DropDownButton.superclass._fillContent.call(this, nodes[0]);

			// save pointer to srcNode so we can grab the drop down widget after it's instantiated
			this.dropDownContainer = this.srcNodeRef;
		}
	},

	startup: function(){
		// the child widget from srcNodeRef is the dropdown widget.  Insert it in the page DOM,
		// make it invisible, and store a reference to pass to the popup code.
		if(!this.dropDown){
			var dropDownNode = dojo.query("[widgetId]", this.dropDownContainer)[0];
			this.dropDown = dijit.byNode(dropDownNode);
			delete this.dropDownContainer;
		}
		dojo.body().appendChild(this.dropDown.domNode);
		this.dropDown.domNode.style.display="none";
	},

	_onArrowClick: function(/*Event*/ e){
		// summary: callback when the user mouse clicks on menu popup node
		if(this.disabled){ return;  }
		this._toggleDropDown();
	},

	_onDropDownClick: function(/*Event*/ e){
		// on Firefox 2 on the Mac it is possible to fire onclick
		// by pressing enter down on a second element and transferring
		// focus to the DropDownButton;
		// we want to prevent opening our menu in this situation
		// and only do so if we have seen a keydown on this button;
		// e.detail != 0 means that we were fired by mouse
		var isMacFFlessThan3 = dojo.isFF && dojo.isFF < 3
			&& navigator.appVersion.indexOf("Macintosh") != -1;
		if(!isMacFFlessThan3 || e.detail != 0 || this._seenKeydown){
			this._onArrowClick(e);
		}
		this._seenKeydown = false;
	},

	_onDropDownKeydown: function(/*Event*/ e){
		this._seenKeydown = true;
	},

	_onDropDownBlur: function(/*Event*/ e){
		this._seenKeydown = false;
	},

	_onKey: function(/*Event*/ e){
		// summary: callback when the user presses a key on menu popup node
		if(this.disabled){ return;  }
		if(e.keyCode == dojo.keys.DOWN_ARROW){
			if(!this.dropDown || this.dropDown.domNode.style.display=="none"){
				dojo.stopEvent(e);
				return this._toggleDropDown();
			}
		}
	},

	_onBlur: function(){
		// summary: called magically when focus has shifted away from this widget and it's dropdown
		this._closeDropDown();
		// don't focus on button.  the user has explicitly focused on something else.
	},

	_toggleDropDown: function(){
		// summary: toggle the drop-down widget;  if it is up, close it, if not, open it
		if(this.disabled){ return;  }
		dijit.focus(this.popupStateNode);
		var dropDown = this.dropDown;
		if(!dropDown){ return false;  }
		if(!dropDown.isShowingNow){
			// If there's an href, then load that first, so we don't get a flicker
			if(dropDown.href && !dropDown.isLoaded){
				var self = this;
				var handler = dojo.connect(dropDown, "onLoad", function(){
					dojo.disconnect(handler);
					self._openDropDown();
				});
				dropDown._loadCheck(true);
				return;
			}else{
				this._openDropDown();
			}
		}else{
			this._closeDropDown();
		}
	},

	_openDropDown: function(){
		var dropDown = this.dropDown;
		var oldWidth=dropDown.domNode.style.width;
		var self = this;

		dijit.popup.open({
			parent: this,
			popup: dropDown,
			around: this.domNode,
			orient: this.isLeftToRight() ? {'BL':'TL', 'BR':'TR', 'TL':'BL', 'TR':'BR'}
				: {'BR':'TR', 'BL':'TL', 'TR':'BR', 'TL':'BL'},
			onExecute: function(){
				self._closeDropDown(true);
			},
			onCancel: function(){
				self._closeDropDown(true);
			},
			onClose: function(){
				dropDown.domNode.style.width = oldWidth;
				self.popupStateNode.removeAttribute("popupActive");
				this._opened = false;
			}
		});
		if(this.domNode.offsetWidth > dropDown.domNode.offsetWidth){
			var adjustNode = null;
			if(!this.isLeftToRight()){
				adjustNode = dropDown.domNode.parentNode;
				var oldRight = adjustNode.offsetLeft + adjustNode.offsetWidth;
			}
			// make menu at least as wide as the button
			dojo.marginBox(dropDown.domNode, {w: this.domNode.offsetWidth});
			if(adjustNode){
				adjustNode.style.left = oldRight - this.domNode.offsetWidth + "px";
			}
		}
		this.popupStateNode.setAttribute("popupActive", "true");
		this._opened=true;
		if(dropDown.focus){
			dropDown.focus();
		}
		// TODO: set this.checked and call setStateClass(), to affect button look while drop down is shown
	},
	
	_closeDropDown: function(/*Boolean*/ focus){
		if(this._opened){
			dijit.popup.close(this.dropDown);
			if(focus){ this.focus();  }
			this._opened = false;	 		
		}
	}
});

/*
 * usage
 *	<button dojoType="ComboButton" onClick="..."><span>Hello world</span><div dojoType=dijit.Menu>...</div></button>
 *
 *  var button1 = new dijit.form.ComboButton({label: "hello world", onClick: foo, dropDown: "myMenu"});
 *	dojo.body().appendChild(button1.domNode);
 */
dojo.declare("dijit.form.ComboButton", dijit.form.DropDownButton, {
	// summary
	//		left side is normal button, right side displays menu
	templateString:"<table class='dijit dijitReset dijitInline dijitLeft'\n\tcellspacing='0' cellpadding='0'\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\">\n\t<tr>\n\t\t<td\tclass=\"dijitStretch dijitButtonContents dijitButtonNode\"\n\t\t\ttabIndex=\"${tabIndex}\"\n\t\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick\"  dojoAttachPoint=\"titleNode\"\n\t\t\twaiRole=\"button\" waiState=\"labelledby-${id}_label\">\n\t\t\t<div class=\"dijitInline ${iconClass}\" dojoAttachPoint=\"iconNode\"></div>\n\t\t\t<span class=\"dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\">${label}</span>\n\t\t</td>\n\t\t<td class='dijitReset dijitRight dijitButtonNode dijitDownArrowButton'\n\t\t\tdojoAttachPoint=\"popupStateNode,focusNode\"\n\t\t\tdojoAttachEvent=\"ondijitclick:_onArrowClick, onkeypress:_onKey\"\n\t\t\tstateModifier=\"DownArrow\"\n\t\t\ttitle=\"${optionsTitle}\" name=\"${name}\"\n\t\t\twaiRole=\"button\" waiState=\"haspopup-true\"\n\t\t><div waiRole=\"presentation\">&#9660;</div>\n\t</td></tr>\n</table>\n",

	attributeMap: dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),
		{id:"", name:""}),

	// optionsTitle: String
	//  text that describes the options menu (accessibility)
	optionsTitle: "",

	baseClass: "dijitComboButton",

	_focusedNode: null,

	postCreate: function(){
		this.inherited(arguments);
		this._focalNodes = [this.titleNode, this.popupStateNode];
		dojo.forEach(this._focalNodes, dojo.hitch(this, function(node){
			if(dojo.isIE){
				this.connect(node, "onactivate", this._onNodeFocus);
			}else{
				this.connect(node, "onfocus", this._onNodeFocus);
			}
		}));
	},

	focusFocalNode: function(node){
		// summary: Focus the focal node node.
		this._focusedNode = node;
		dijit.focus(node);
	},

	hasNextFocalNode: function(){
		// summary: Returns true if this widget has no node currently
		//		focused or if there is a node following the focused one.
		//		False is returned if the last node has focus.
		return this._focusedNode !== this.getFocalNodes()[1];
	},

	focusNext: function(){
		// summary: Focus the focal node following the current node with focus
		//		or the first one if no node currently has focus.
		this._focusedNode = this.getFocalNodes()[this._focusedNode ? 1 : 0];
		dijit.focus(this._focusedNode);
	},

	hasPrevFocalNode: function(){
		// summary: Returns true if this widget has no node currently
		//		focused or if there is a node before the focused one.
		//		False is returned if the first node has focus.
		return this._focusedNode !== this.getFocalNodes()[0];
	},

	focusPrev: function(){
		// summary: Focus the focal node before the current node with focus
		//		or the last one if no node currently has focus.
		this._focusedNode = this.getFocalNodes()[this._focusedNode ? 0 : 1];
		dijit.focus(this._focusedNode);
	},

	getFocalNodes: function(){
		// summary: Returns an array of focal nodes for this widget.
		return this._focalNodes;
	},

	_onNodeFocus: function(evt){
		this._focusedNode = evt.currentTarget;
	},

	_onBlur: function(evt){
		this.inherited(arguments);
		this._focusedNode = null;
	}
});

dojo.declare("dijit.form.ToggleButton", dijit.form.Button, {
	// summary
	//	A button that can be in two states (checked or not).
	//	Can be base class for things like tabs or checkbox or radio buttons

	baseClass: "dijitToggleButton",

	// checked: Boolean
	//		Corresponds to the native HTML <input> element's attribute.
	//		In markup, specified as "checked='checked'" or just "checked".
	//		True if the button is depressed, or the checkbox is checked,
	//		or the radio button is selected, etc.
	checked: false,

	_clicked: function(/*Event*/ evt){
		this.setChecked(!this.checked);
	},

	setChecked: function(/*Boolean*/ checked){
		// summary
		//	Programatically deselect the button
		this.checked = checked;
		dijit.setWaiState(this.focusNode || this.domNode, "pressed", this.checked);
		this._setStateClass();	 	
		this.onChange(checked);
	}
});

}

if(!dojo._hasResource["dijit._editor._Plugin"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._editor._Plugin"] = true;
dojo.provide("dijit._editor._Plugin");




dojo.declare("dijit._editor._Plugin", null, {
	// summary
	//		This represents a "plugin" to the editor, which is basically
	//		a single button on the Toolbar and some associated code
	constructor: function(/*Object?*/args, /*DomNode?*/node){
		if(args){
			dojo.mixin(this, args);
		}
	},

	editor: null,
	iconClassPrefix: "dijitEditorIcon",
	button: null,
	queryCommand: null,
	command: "",
	commandArg: null,
	useDefaultCommand: true,
	buttonClass: dijit.form.Button,
	updateInterval: 200, // only allow updates every two tenths of a second
	_initButton: function(){
		if(this.command.length){
			var label = this.editor.commands[this.command];
			var className = "dijitEditorIcon "+this.iconClassPrefix + this.command.charAt(0).toUpperCase() + this.command.substr(1);
			if(!this.button){
				var props = {
					label: label,
					showLabel: false,
					iconClass: className,
					dropDown: this.dropDown
				};
				this.button = new this.buttonClass(props);
			}
		}
	},
	updateState: function(){
		var _e = this.editor;
		var _c = this.command;
		if(!_e){ return;  }
		if(!_e.isLoaded){ return;  }
		if(!_c.length){ return;  }
		if(this.button){
			try{
				var enabled = _e.queryCommandEnabled(_c);
				this.button.setDisabled(!enabled);
				if(this.button.setChecked){
					this.button.setChecked(_e.queryCommandState(_c));
				}
			}catch(e){
				console.debug(e);
			}
		}
	},
	setEditor: function(/*Widget*/editor){
		// FIXME: detatch from previous editor!!
		this.editor = editor;

		// FIXME: prevent creating this if we don't need to (i.e., editor can't handle our command)
		this._initButton();

		// FIXME: wire up editor to button here!
		if(	(this.command.length) &&
			(!this.editor.queryCommandAvailable(this.command))
		){
			// console.debug("hiding:", this.command);
			if(this.button){
				this.button.domNode.style.display = "none";
			}
		}
		if(this.button && this.useDefaultCommand){
			dojo.connect(this.button, "onClick",
				dojo.hitch(this.editor, "execCommand", this.command, this.commandArg)
			);
		}
		dojo.connect(this.editor, "onNormalizedDisplayChanged", this, "updateState");
	},
	setToolbar: function(/*Widget*/toolbar){
		if(this.button){
			toolbar.addChild(this.button);
		}
		// console.debug("adding", this.button, "to:", toolbar);
	}
});

}

if(!dojo._hasResource["dijit.Editor"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.Editor"] = true;
dojo.provide("dijit.Editor");







dojo.declare(
	"dijit.Editor",
	dijit._editor.RichText,
	{
	// summary: A rich-text Editing widget

		// plugins: Array
		//		a list of plugin names (as strings) or instances (as objects)
		//		for this widget.
		plugins: null,

		// extraPlugins: Array
		//		a list of extra plugin names which will be appended to plugins array
		extraPlugins: null,

		constructor: function(){
			this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|",
			"insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull"/*"createLink"*/];

			this._plugins=[];
			this._editInterval = this.editActionInterval * 1000;
		},

		postCreate: function(){
			//for custom undo/redo
			if(this.customUndo){
				dojo['require']("dijit._editor.range");
				this._steps=this._steps.slice(0);
				this._undoedSteps=this._undoedSteps.slice(0);
//				this.addKeyHandler('z',this.KEY_CTRL,this.undo);
//				this.addKeyHandler('y',this.KEY_CTRL,this.redo);
			}
			if(dojo.isArray(this.extraPlugins)){
				this.plugins=this.plugins.concat(this.extraPlugins);
			}

//			try{
			dijit.Editor.superclass.postCreate.apply(this, arguments);

			this.commands = dojo.i18n.getLocalization("dijit._editor", "commands", this.lang);

			if(!this.toolbar){
				// if we haven't been assigned a toolbar, create one
				var toolbarNode = dojo.doc.createElement("div");
				dojo.place(toolbarNode, this.editingArea, "before");
				this.toolbar = new dijit.Toolbar({}, toolbarNode);
			}

			dojo.forEach(this.plugins, this.addPlugin, this);
			this.onNormalizedDisplayChanged();  //update toolbar button status
//			}catch(e){ console.debug(e);  }
		},
		destroy: function(){
			dojo.forEach(this._plugins, function(p){
				if(p.destroy){
					p.destroy();
				}
			});
			this._plugins=[];
			this.toolbar.destroy();  delete this.toolbar;
			this.inherited('destroy',arguments);
		},
		addPlugin: function(/*String||Object*/plugin, /*Integer?*/index){
			//	summary:
			//		takes a plugin name as a string or a plugin instance and
			//		adds it to the toolbar and associates it with this editor
			//		instance. The resulting plugin is added to the Editor's
			//		plugins array. If index is passed, it's placed in the plugins
			//		array at that index. No big magic, but a nice helper for
			//		passing in plugin names via markup.
			//	plugin: String, args object or plugin instance. Required.
			//	args: This object will be passed to the plugin constructor.
			//	index:	
			//		Integer, optional. Used when creating an instance from
			//		something already in this.plugins. Ensures that the new
			//		instance is assigned to this.plugins at that index.
			var args=dojo.isString(plugin)?{name:plugin}:plugin;
			if(!args.setEditor){
				var o={"args":args,"plugin":null,"editor":this};
				dojo.publish("dijit.Editor.getPlugin",[o]);
				if(!o.plugin){
					var pc = dojo.getObject(args.name);
					if(pc){
						o.plugin=new pc(args);
					}
				}
				if(!o.plugin){
					console.debug('Cannot find plugin',plugin);
					return;
				}
				plugin=o.plugin;
			}
			if(arguments.length > 1){
				this._plugins[index] = plugin;
			}else{
				this._plugins.push(plugin);
			}
			plugin.setEditor(this);
			if(dojo.isFunction(plugin.setToolbar)){
				plugin.setToolbar(this.toolbar);
			}
		},
		/* beginning of custom undo/redo support */

		// customUndo: Boolean
		//		Whether we shall use custom undo/redo support instead of the native
		//		browser support. By default, we only enable customUndo for IE, as it
		//		has broken native undo/redo support. Note: the implementation does
		//		support other browsers which have W3C DOM2 Range API.
		customUndo: dojo.isIE,

		//	editActionInterval: Integer
		//		When using customUndo, not every keystroke will be saved as a step.
		//		Instead typing (including delete) will be grouped together: after
		//		a user stop typing for editActionInterval seconds, a step will be
		//		saved;  if a user resume typing within editActionInterval seconds,
		//		the timeout will be restarted. By default, editActionInterval is 3
		//		seconds.
		editActionInterval: 3,
		beginEditing: function(cmd){
			if(!this._inEditing){
				this._inEditing=true;
				this._beginEditing(cmd);
			}
			if(this.editActionInterval>0){
				if(this._editTimer){
					clearTimeout(this._editTimer);
				}
				this._editTimer = setTimeout(dojo.hitch(this, this.endEditing), this._editInterval);
			}
		},
		_steps:[],
		_undoedSteps:[],
		execCommand: function(cmd){
			if(this.customUndo && (cmd=='undo' || cmd=='redo')){
				return this[cmd]();
			}else{
				try{
					if(this.customUndo){
						this.endEditing();
						this._beginEditing();
					}
					var r = this.inherited('execCommand',arguments);
					if(this.customUndo){
						this._endEditing();
					}
					return r;
				}catch(e){
					if(dojo.isMoz && /copy|cut|paste/.test(cmd)){
						// Warn user of platform limitation.  Cannot programmatically access keyboard. See ticket #4136
						var sub = dojo.string.substitute,
							accel = {cut:'X', copy:'C', paste:'V'},
							isMac = navigator.userAgent.indexOf("Macintosh") != -1;
						alert(sub(this.commands.systemShortcutFF,
							[this.commands[cmd], sub(this.commands[isMac ? 'appleKey' : 'ctrlKey'], [accel[cmd]])]));
					}
					return false;
				}
			}
		},
		queryCommandEnabled: function(cmd){
			if(this.customUndo && (cmd=='undo' || cmd=='redo')){
				return cmd=='undo'?(this._steps.length>1):(this._undoedSteps.length>0);
			}else{
				return this.inherited('queryCommandEnabled',arguments);
			}
		},
		_changeToStep: function(from,to){
			this.setValue(to.text);
			var b=to.bookmark;
			if(!b){ return;  }
			if(dojo.isIE){
				if(dojo.isArray(b)){//IE CONTROL
					var tmp=[];
					dojo.forEach(b,function(n){
						tmp.push(dijit.range.getNode(n,this.editNode));
					},this);
					b=tmp;
				}
			}else{//w3c range
				var r=dijit.range.create();
				r.setStart(dijit.range.getNode(b.startContainer,this.editNode),b.startOffset);
				r.setEnd(dijit.range.getNode(b.endContainer,this.editNode),b.endOffset);
				b=r;
			}
			dojo.withGlobal(this.window,'moveToBookmark',dijit,[b]);
		},
		undo: function(){
//			console.log('undo');
			this.endEditing(true);
			var s=this._steps.pop();
			if(this._steps.length>0){
				this.focus();
				this._changeToStep(s,this._steps[this._steps.length-1]);
				this._undoedSteps.push(s);
				this.onDisplayChanged();
				return true;
			}
			return false;
		},
		redo: function(){
//			console.log('redo');
			this.endEditing(true);
			var s=this._undoedSteps.pop();
			if(s && this._steps.length>0){
				this.focus();
				this._changeToStep(this._steps[this._steps.length-1],s);
				this._steps.push(s);
				this.onDisplayChanged();
				return true;
			}
			return false;
		},
		endEditing: function(ignore_caret){
			if(this._editTimer){
				clearTimeout(this._editTimer);
			}
			if(this._inEditing){
				this._endEditing(ignore_caret);
				this._inEditing=false;
			}
		},
		_getBookmark: function(){
			var b=dojo.withGlobal(this.window,dijit.getBookmark);
			if(dojo.isIE){
				if(dojo.isArray(b)){//CONTROL
					var tmp=[];
					dojo.forEach(b,function(n){
						tmp.push(dijit.range.getIndex(n,this.editNode).o);
					},this);
					b=tmp;
				}
			}else{//w3c range
				var tmp=dijit.range.getIndex(b.startContainer,this.editNode).o
				b={startContainer:tmp,
					startOffset:b.startOffset,
					endContainer:b.endContainer===b.startContainer?tmp:dijit.range.getIndex(b.endContainer,this.editNode).o,
					endOffset:b.endOffset};
			}
			return b;
		},
		_beginEditing: function(cmd){
			if(this._steps.length===0){
				this._steps.push({'text':this.savedContent,'bookmark':this._getBookmark()});
			}
		},
		_endEditing: function(ignore_caret){
			var v=this.getValue(true);

			this._undoedSteps=[];//clear undoed steps
			this._steps.push({'text':v,'bookmark':this._getBookmark()});
		},
		onKeyDown: function(e){
			if(!this.customUndo){
				this.inherited('onKeyDown',arguments);
				return;
			}
			var k=e.keyCode,ks=dojo.keys;
			if(e.ctrlKey){
				if(k===90||k===122){ //z
					dojo.stopEvent(e);
					this.undo();
					return;
				}else if(k===89||k===121){ //y
					dojo.stopEvent(e);
					this.redo();
					return;
				}
			}
			this.inherited('onKeyDown',arguments);

			switch(k){
					case ks.ENTER:
						this.beginEditing();
						break;
					case ks.BACKSPACE:
					case ks.DELETE:
						this.beginEditing();
						break;
					case 88: //x
					case 86: //v
						if(e.ctrlKey && !e.altKey && !e.metaKey){
							this.endEditing();//end current typing step if any
							if(e.keyCode == 88){
								this.beginEditing('cut');
								//use timeout to trigger after the cut is complete
								setTimeout(dojo.hitch(this, this.endEditing), 1);
							}else{
								this.beginEditing('paste');
								//use timeout to trigger after the paste is complete
								setTimeout(dojo.hitch(this, this.endEditing), 1);
							}
							break;
						}
						//pass through
					default:
						if(!e.ctrlKey && !e.altKey && !e.metaKey && (e.keyCode<dojo.keys.F1 || e.keyCode>dojo.keys.F15)){
							this.beginEditing();
							break;
						}
						//pass through
					case ks.ALT:
						this.endEditing();
						break;
					case ks.UP_ARROW:
					case ks.DOWN_ARROW:
					case ks.LEFT_ARROW:
					case ks.RIGHT_ARROW:
					case ks.HOME:
					case ks.END:
					case ks.PAGE_UP:
					case ks.PAGE_DOWN:
						this.endEditing(true);
						break;
					//maybe ctrl+backspace/delete, so don't endEditing when ctrl is pressed
					case ks.CTRL:
					case ks.SHIFT:
					case ks.TAB:
						break;
				}	
		},
		_onBlur: function(){
			this.inherited('_onBlur',arguments);
			this.endEditing(true);
		},
		onClick: function(){
			this.endEditing(true);
			this.inherited('onClick',arguments);
		}
		/* end of custom undo/redo support */
	}
);

/* the following code is to registered a handler to get default plugins */
dojo.subscribe("dijit.Editor.getPlugin",null,function(o){
	if(o.plugin){ return;  }
	var args=o.args, p;
	var _p = dijit._editor._Plugin;
	var name=args.name;
	switch(name){
		case "undo": case "redo": case "cut": case "copy": case "paste": case "insertOrderedList":
		case "insertUnorderedList": case "indent": case "outdent": case "justifyCenter":
		case "justifyFull": case "justifyLeft": case "justifyRight": case "delete":
		case "selectAll": case "removeFormat":
			p = new _p({ command: name });
			break;

		case "bold": case "italic": case "underline": case "strikethrough":
		case "subscript": case "superscript":
			p = new _p({ buttonClass: dijit.form.ToggleButton, command: name });
			break;
		case "|":
			p = new _p({ button: new dijit.ToolbarSeparator() });
			break;
		case "createLink":
//					dojo['require']('dijit._editor.plugins.LinkDialog');
			p = new dijit._editor.plugins.LinkDialog({ command: name });
			break;
		case "foreColor": case "hiliteColor":
			p = new dijit._editor.plugins.TextColor({ command: name });
			break;
		case "fontName": case "fontSize": case "formatBlock":
			p = new dijit._editor.plugins.FontChoice({ command: name });
	}
//	console.log('name',name,p);
	o.plugin=p;
});

}

if(!dojo._hasResource["dijit.Menu"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.Menu"] = true;
dojo.provide("dijit.Menu");





dojo.declare(
	"dijit.Menu",
	[dijit._Widget, dijit._Templated, dijit._KeyNavContainer],
{
	constructor: function() {
		this._bindings = [];
	},

	templateString:
			'<table class="dijit dijitMenu dijitReset dijitMenuTable innerTable" waiRole="menu" dojoAttachEvent="onkeypress:_onKeyPress">' +
				'<tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody>'+
			'</table>',

	// targetNodeIds: String[]
	//	Array of dom node ids of nodes to attach to.
	//	Fill this with nodeIds upon widget creation and it becomes context menu for those nodes.
	targetNodeIds: [],

	// contextMenuForWindow: Boolean
	//	if true, right clicking anywhere on the window will cause this context menu to open;
	//	if false, must specify targetNodeIds
	contextMenuForWindow: false,

	// parentMenu: Widget
	// pointer to menu that displayed me
	parentMenu: null,

	// popupDelay: Integer
	//	number of milliseconds before hovering (without clicking) causes the popup to automatically open
	popupDelay: 500,

	// _contextMenuWithMouse: Boolean
	//	used to record mouse and keyboard events to determine if a context
	//	menu is being opened with the keyboard or the mouse
	_contextMenuWithMouse: false,

	postCreate: function(){
		if(this.contextMenuForWindow){
			this.bindDomNode(dojo.body());
		}else{
			dojo.forEach(this.targetNodeIds, this.bindDomNode, this);
		}
		this.connectKeyNavHandlers([dojo.keys.UP_ARROW], [dojo.keys.DOWN_ARROW]);
	},

	startup: function(){
		dojo.forEach(this.getChildren(), function(child){ child.startup();  });
		this.startupKeyNavChildren();
	},

	onExecute: function(){
		// summary: attach point for notification about when a menu item has been executed
	},

	onCancel: function(/*Boolean*/ closeAll){
		// summary: attach point for notification about when the user cancels the current menu
	},

	_moveToPopup: function(/*Event*/ evt){
		if(this.focusedChild && this.focusedChild.popup && !this.focusedChild.disabled){
			this.focusedChild._onClick(evt);
		}
	},

	_onKeyPress: function(/*Event*/ evt){
		// summary
		//	Handle keyboard based menu navigation.
		if(evt.ctrlKey || evt.altKey){ return;  }

		switch(evt.keyCode){
			case dojo.keys.RIGHT_ARROW:
				this._moveToPopup(evt);
				dojo.stopEvent(evt);
				break;
			case dojo.keys.LEFT_ARROW:
				if(this.parentMenu){
					this.onCancel(false);
				}else{
					dojo.stopEvent(evt);
				}
				break;
		}
	},

	onItemHover: function(/*MenuItem*/ item){
		this.focusChild(item);

		if(this.focusedChild.popup && !this.focusedChild.disabled && !this.hover_timer){
			this.hover_timer = setTimeout(dojo.hitch(this, "_openPopup"), this.popupDelay);
		}
	},

	_onChildBlur: function(item){
		// Close all popups that are open and descendants of this menu
		dijit.popup.close(item.popup);
		item._blur();
		this._stopPopupTimer();
	},

	onItemUnhover: function(/*MenuItem*/ item){
	},

	_stopPopupTimer: function(){
		if(this.hover_timer){
			clearTimeout(this.hover_timer);
			this.hover_timer = null;
		}
	},

	_getTopMenu: function(){
		for(var top=this;  top.parentMenu;  top=top.parentMenu);
		return top;
	},

	onItemClick: function(/*Widget*/ item){
		// summary: user defined function to handle clicks on an item
		// summary: internal function for clicks
		if(item.disabled){ return false;  }

		if(item.popup){
			if(!this.is_open){
				this._openPopup();
			}
		}else{
			// before calling user defined handler, close hierarchy of menus
			// and restore focus to place it was when menu was opened
			this.onExecute();

			// user defined handler for click
			item.onClick();
		}
	},

	// thanks burstlib!
	_iframeContentWindow: function(/* HTMLIFrameElement */iframe_el) {
		//	summary
		//	returns the window reference of the passed iframe
		var win = dijit.getDocumentWindow(dijit.Menu._iframeContentDocument(iframe_el)) ||
			// Moz. TODO: is this available when defaultView isn't?
			dijit.Menu._iframeContentDocument(iframe_el)['__parent__'] ||
			(iframe_el.name && document.frames[iframe_el.name]) || null;
		return win;	 //	Window
	},

	_iframeContentDocument: function(/* HTMLIFrameElement */iframe_el){
		//	summary
		//	returns a reference to the document object inside iframe_el
		var doc = iframe_el.contentDocument // W3
			|| (iframe_el.contentWindow && iframe_el.contentWindow.document) // IE
			|| (iframe_el.name && document.frames[iframe_el.name] && document.frames[iframe_el.name].document)
			|| null;
		return doc;	 //	HTMLDocument
	},

	bindDomNode: function(/*String|DomNode*/ node){
		// summary: attach menu to given node
		node = dojo.byId(node);

		//TODO: this is to support context popups in Editor.  Maybe this shouldn't be in dijit.Menu
		var win = dijit.getDocumentWindow(node.ownerDocument);
		if(node.tagName.toLowerCase()=="iframe"){
			win = this._iframeContentWindow(node);
			node = dojo.withGlobal(win, dojo.body);
		}

		// to capture these events at the top level,
		// attach to document, not body
		var cn = (node == dojo.body() ? dojo.doc : node);

		node[this.id] = this._bindings.push([
			dojo.connect(cn, "oncontextmenu", this, "_openMyself"),
			dojo.connect(cn, "onkeydown", this, "_contextKey"),
			dojo.connect(cn, "onmousedown", this, "_contextMouse")
		]);
	},

	unBindDomNode: function(/*String|DomNode*/ nodeName){
		// summary: detach menu from given node
		var node = dojo.byId(nodeName);
		var bid = node[this.id]-1, b = this._bindings[bid];
		dojo.forEach(b, dojo.disconnect);
		delete this._bindings[bid];
	},

	_contextKey: function(e){
		this._contextMenuWithMouse = false;
		if (e.keyCode == dojo.keys.F10) {
			dojo.stopEvent(e);
			if (e.shiftKey && e.type=="keydown") {
				// FF: copying the wrong property from e will cause the system
				// context menu to appear in spite of stopEvent. Don't know
				// exactly which properties cause this effect.
				var _e = { target: e.target, pageX: e.pageX, pageY: e.pageY };
				_e.preventDefault = _e.stopPropagation = function(){};
				// IE: without the delay, focus work in "open" causes the system
				// context menu to appear in spite of stopEvent.
				window.setTimeout(dojo.hitch(this, function(){ this._openMyself(_e);  }), 1);
			}
		}
	},

	_contextMouse: function(e){
		this._contextMenuWithMouse = true;
	},

	_openMyself: function(/*Event*/ e){
		// summary:
		//		Internal function for opening myself when the user
		//		does a right-click or something similar

		dojo.stopEvent(e);

		// Get coordinates.
		// if we are opening the menu with the mouse or on safari open
		// the menu at the mouse cursor
		// (Safari does not have a keyboard command to open the context menu
		// and we don't currently have a reliable way to determine
		// _contextMenuWithMouse on Safari)
		var x,y;
		if(dojo.isSafari || this._contextMenuWithMouse){
			x=e.pageX;
			y=e.pageY;
		}else{
			// otherwise open near e.target
			var coords = dojo.coords(e.target, true);
			x = coords.x + 10;
			y = coords.y + 10;
		}

		var self=this;
		var savedFocus = dijit.getFocus(this);
		function closeAndRestoreFocus(){
			// user has clicked on a menu or popup
			dijit.focus(savedFocus);
			dijit.popup.close(self);
		}
		dijit.popup.open({
			popup: this,
			x: x,
			y: y,
			onExecute: closeAndRestoreFocus,
			onCancel: closeAndRestoreFocus,
			orient: this.isLeftToRight() ? 'L' : 'R'
		});
		this.focus();

		this._onBlur = function(){
			// Usually the parent closes the child widget but if this is a context
			// menu then there is no parent
			dijit.popup.close(this);
			// don't try to restore focus;  user has clicked another part of the screen
			// and set focus there
		}
	},

	onOpen: function(/*Event*/ e){
		// summary
		//		Open menu relative to the mouse
		this.isShowingNow = true;
	},

	onClose: function(){
		// summary: callback when this menu is closed
		this._stopPopupTimer();
		this.parentMenu = null;
		this.isShowingNow = false;
		this.currentPopup = null;
		if(this.focusedChild){
			this._onChildBlur(this.focusedChild);
			this.focusedChild = null;
		}
	},

	_openPopup: function(){
		// summary: open the popup to the side of the current menu item
		this._stopPopupTimer();
		var from_item = this.focusedChild;
		var popup = from_item.popup;

		if(popup.isShowingNow){ return;  }
		popup.parentMenu = this;
		var self = this;
		dijit.popup.open({
			parent: this,
			popup: popup,
			around: from_item.arrowCell,
			orient: this.isLeftToRight() ? {'TR': 'TL', 'TL': 'TR'} : {'TL': 'TR', 'TR': 'TL'},
			onCancel: function(){
				// called when the child menu is canceled
				dijit.popup.close(popup);
				from_item.focus();	 // put focus back on my node
				self.currentPopup = null;
			}
		});

		this.currentPopup = popup;

		if(popup.focus){
			popup.focus();
		}
	}
}
);

dojo.declare(
	"dijit.MenuItem",
	[dijit._Widget, dijit._Templated, dijit._Contained],
{
	// summary
	//	A line item in a Menu2

	// Make 3 columns
	//   icon, label, and expand arrow (BiDi-dependent) indicating sub-menu
	templateString:
		 '<tr class="dijitReset dijitMenuItem"'
		+'dojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">'
		+'<td class="dijitReset"><div class="dijitMenuItemIcon ${iconClass}" dojoAttachPoint="iconNode" ></div></td>'
		+'<td tabIndex="-1" class="dijitReset dijitMenuItemLabel" style="padding-left: 6px;" dojoAttachPoint="containerNode" waiRole="menuitem"></td>'
		+'<td class="dijitReset" dojoAttachPoint="arrowCell">'
			+'<div class="dijitMenuExpand" dojoAttachPoint="expand" style="display:none">'
			+'<span class="dijitInline dijitArrowNode oPlsCaretRightIcon"></span>'
			+'</div>'
		+'</td>'
		+'</tr>',

	// label: String
	//	menu text
	label: '',

	// iconClass: String
	//	class to apply to div in button to make it display an icon
	iconClass: "",

	// disabled: Boolean
	//  if true, the menu item is disabled
	//  if false, the menu item is enabled
	disabled: false,

	postCreate: function(){
		dojo.setSelectable(this.domNode, false);
		this.setDisabled(this.disabled);
		if(this.label){
			this.containerNode.innerHTML=this.label;
		}
	},

	_onHover: function(){
		// summary: callback when mouse is moved onto menu item
		this.getParent().onItemHover(this);
	},

	_onUnhover: function(){
		// summary: callback when mouse is moved off of menu item
		// if we are unhovering the currently selected item
		// then unselect it
		this.getParent().onItemUnhover(this);
	},

	_onClick: function(evt){
		this.getParent().onItemClick(this);
		dojo.stopEvent(evt);
	},

	onClick: function() {
		// summary
		//	User defined function to handle clicks
	},

	focus: function(){
		dojo.addClass(this.domNode, 'dijitMenuItemHover');
		try{
			dijit.focus(this.containerNode);
		}catch(e){
			// this throws on IE (at least) in some scenarios
		}
	},

	_blur: function(){
		dojo.removeClass(this.domNode, 'dijitMenuItemHover');
	},

	setDisabled: function(/*Boolean*/ value){
		// summary: enable or disable this menu item
		this.disabled = value;
		dojo[value ? "addClass" : "removeClass"](this.domNode, 'dijitMenuItemDisabled');
		dijit.setWaiState(this.containerNode, 'disabled', value ? 'true' : 'false');
	}
});

dojo.declare(
	"dijit.PopupMenuItem",
	dijit.MenuItem,
{
	_fillContent: function(){
		// my inner HTML contains both the menu item text and a popup widget, like
		// <div dojoType="dijit.PopupMenuItem">
		//		<span>pick me</span>
		//		<popup> ... </popup>
		// </div>
		// the first part holds the menu item text and the second part is the popup
		if(this.srcNodeRef){
			var nodes = dojo.query("*", this.srcNodeRef);
			dijit.PopupMenuItem.superclass._fillContent.call(this, nodes[0]);

			// save pointer to srcNode so we can grab the drop down widget after it's instantiated
			this.dropDownContainer = this.srcNodeRef;
		}
	},

	startup: function(){
		// we didn't copy the dropdown widget from the this.srcNodeRef, so it's in no-man's
		// land now.  move it to document.body.
		if(!this.popup){
			var node = dojo.query("[widgetId]", this.dropDownContainer)[0];
			this.popup = dijit.byNode(node);
		}
		dojo.body().appendChild(this.popup.domNode);

		this.popup.domNode.style.display="none";
		dojo.addClass(this.expand, "dijitMenuExpandEnabled");
		dojo.style(this.expand, "display", "");
		dijit.setWaiState(this.containerNode, "haspopup", "true");
	}
});

dojo.declare(
	"dijit.MenuSeparator",
	[dijit._Widget, dijit._Templated, dijit._Contained],
{
	// summary
	//	A line between two menu items

	templateString: '<tr class="dijitMenuSeparator"><td colspan=3>'
			+'<div class="dijitMenuSeparatorTop"></div>'
			+'<div class="dijitMenuSeparatorBottom"></div>'
			+'</td></tr>',

	postCreate: function(){
		dojo.setSelectable(this.domNode, false);
	},
	
	isFocusable: function(){
		// summary:
		//		over ride to always return false
		return false;
	}
});

}

if(!dojo._hasResource["dojo.regexp"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.regexp"] = true;
dojo.provide("dojo.regexp");

dojo.regexp.escapeString = function(/*String*/str, /*String?*/except){
	//	summary:
	//		Adds escape sequences for special characters in regular expressions
	// except:
	//		a String with special characters to be left unescaped

//	return str.replace(/([\f\b\n\t\r[\^$|?*+(){}])/gm, "\\$1");  // string
	return str.replace(/([\.$?*!=:|{}\(\)\[\]\\\/^])/g, function(ch){
		if(except && except.indexOf(ch) != -1){
			return ch;
		}
		return "\\" + ch;
	});  // String
}

dojo.regexp.buildGroupRE = function(/*Object|Array*/arr, /*Function*/re, /*Boolean?*/nonCapture){
	//	summary:
	//		Builds a regular expression that groups subexpressions
	//	description:
	//		A utility function used by some of the RE generators. The
	//		subexpressions are constructed by the function, re, in the second
	//		parameter.  re builds one subexpression for each elem in the array
	//		a, in the first parameter. Returns a string for a regular
	//		expression that groups all the subexpressions.
	// arr:
	//		A single value or an array of values.
	// re:
	//		A function. Takes one parameter and converts it to a regular
	//		expression. 
	// nonCapture:
	//		If true, uses non-capturing match, otherwise matches are retained
	//		by regular expression. Defaults to false

	// case 1: a is a single value.
	if(!(arr instanceof Array)){
		return re(arr);  // String
	}

	// case 2: a is an array
	var b = [];
	for(var i = 0;  i < arr.length;  i++){
		// convert each elem to a RE
		b.push(re(arr[i]));
	}

	 // join the REs as alternatives in a RE group.
	return dojo.regexp.group(b.join("|"), nonCapture);  // String
}

dojo.regexp.group = function(/*String*/expression, /*Boolean?*/nonCapture){
	// summary:
	//		adds group match to expression
	// nonCapture:
	//		If true, uses non-capturing match, otherwise matches are retained
	//		by regular expression. 
	return "(" + (nonCapture ? "?:":"") + expression + ")";  // String
}

}

if(!dojo._hasResource["dojo.number"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.number"] = true;
dojo.provide("dojo.number");







/*=====
dojo.number.__formatOptions = function(kwArgs){
	//	pattern: String?
	//		override formatting pattern with this string (see
	//		dojo.number._applyPattern)
	//	type: String?
	//		choose a format type based on the locale from the following:
	//		decimal, scientific, percent, currency. decimal by default.
	//	places: Number?
	//		fixed number of decimal places to show.  This overrides any
	//		information in the provided pattern.
	//	round: NUmber?
	//		5 rounds to nearest .5;  0 rounds to nearest whole (default). -1
	//		means don't round.
	//	currency: String?
	//		iso4217 currency code
	//	symbol: String?
	//		localized currency symbol
	//	locale: String?
	//		override the locale used to determine formatting rules
}
=====*/

dojo.number.format = function(/*Number*/value, /*dojo.number.__formatOptions?*/options){
	// summary:
	//		Format a Number as a String, using locale-specific settings
	// description:
	//		Create a string from a Number using a known localized pattern.
	//		Formatting patterns appropriate to the locale are chosen from the
	//		CLDR http://unicode.org/cldr as well as the appropriate symbols and
	//		delimiters.  See http://www.unicode.org/reports/tr35/#Number_Elements
	// value:
	//		the number to be formatted.  If not a valid JavaScript number,
	//		return null.

	options = dojo.mixin({}, options || {});
	var locale = dojo.i18n.normalizeLocale(options.locale);
	var bundle = dojo.i18n.getLocalization("dojo.cldr", "number", locale);
	options.customs = bundle;
	var pattern = options.pattern || bundle[(options.type || "decimal") + "Format"];
	if(isNaN(value)){ return null;  } // null
	return dojo.number._applyPattern(value, pattern, options);  // String
};

//dojo.number._numberPatternRE = /(?:[#0]*,?)*[#0](?:\.0*#*)?/;  // not precise, but good enough
dojo.number._numberPatternRE = /[#0,]*[#0](?:\.0*#*)?/;  // not precise, but good enough

dojo.number._applyPattern = function(/*Number*/value, /*String*/pattern, /*dojo.number.__formatOptions?*/options){
	// summary:
	//		Apply pattern to format value as a string using options. Gives no
	//		consideration to local customs.
	// value:
	//		the number to be formatted.
	// pattern:
	//		a pattern string as described in
	//		http://www.unicode.org/reports/tr35/#Number_Format_Patterns
	// options: dojo.number.__formatOptions?
	//		_applyPattern is usually called via dojo.number.format() which
	//		populates an extra property in the options parameter, "customs".
	//		The customs object specifies group and decimal parameters if set.

	//TODO: support escapes
	options = options || {};
	var group = options.customs.group;
	var decimal = options.customs.decimal;

	var patternList = pattern.split(';');
	var positivePattern = patternList[0];
	pattern = patternList[(value < 0) ? 1 : 0] || ("-" + positivePattern);

	//TODO: only test against unescaped
	if(pattern.indexOf('%') != -1){
		value *= 100;
	}else if(pattern.indexOf('\u2030') != -1){
		value *= 1000;  // per mille
	}else if(pattern.indexOf('\u00a4') != -1){
		group = options.customs.currencyGroup || group;//mixins instead?
		decimal = options.customs.currencyDecimal || decimal;// Should these be mixins instead?
		pattern = pattern.replace(/\u00a4{1,3}/, function(match){
			var prop = ["symbol", "currency", "displayName"][match.length-1];
			return options[prop] || options.currency || "";
		});
	}else if(pattern.indexOf('E') != -1){
		throw new Error("exponential notation not supported");
	}
	
	//TODO: support @ sig figs?
	var numberPatternRE = dojo.number._numberPatternRE;
	var numberPattern = positivePattern.match(numberPatternRE);
	if(!numberPattern){
		throw new Error("unable to find a number expression in pattern: "+pattern);
	}
	return pattern.replace(numberPatternRE,
		dojo.number._formatAbsolute(value, numberPattern[0], {decimal: decimal, group: group, places: options.places}));
}

dojo.number.round = function(/*Number*/value, /*Number*/places, /*Number?*/multiple){
	//	summary:
	//		Rounds the number at the given number of places
	//	value:
	//		the number to round
	//	places:
	//		the number of decimal places where rounding takes place
	//	multiple:
	//		rounds next place to nearest multiple

	var pieces = String(value).split(".");
	var length = (pieces[1] && pieces[1].length) || 0;
	if(length > places){
		var factor = Math.pow(10, places);
		if(multiple > 0){factor *= 10/multiple;places++;} //FIXME
		value = Math.round(value * factor)/factor;

		// truncate to remove any residual floating point values
		pieces = String(value).split(".");
		length = (pieces[1] && pieces[1].length) || 0;
		if(length > places){
			pieces[1] = pieces[1].substr(0, places);
			value = Number(pieces.join("."));
		}
	}
	return value;  //Number
}

/*=====
dojo.number.__formatAbsoluteOptions = function(kwArgs){
	//	decimal: String?
	//		the decimal separator
	//	group: String?
	//		the group separator
	//	places: Integer?
	//		number of decimal places
	//	round: Number?
	//		5 rounds to nearest .5;  0 rounds to nearest whole (default). -1
	//		means don't round.
}
=====*/

dojo.number._formatAbsolute = function(/*Number*/value, /*String*/pattern, /*dojo.number.__formatAbsoluteOptions?*/options){
	// summary: 
	//		Apply numeric pattern to absolute value using options. Gives no
	//		consideration to local customs.
	// value:
	//		the number to be formatted, ignores sign
	// pattern:
	//		the number portion of a pattern (e.g. #,##0.00)
	options = options || {};
	if(options.places === true){options.places=0;}
	if(options.places === Infinity){options.places=6;} // avoid a loop;  pick a limit

	var patternParts = pattern.split(".");
	var maxPlaces = (options.places >= 0) ? options.places : (patternParts[1] && patternParts[1].length) || 0;
	if(!(options.round < 0)){
		value = dojo.number.round(value, maxPlaces, options.round);
	}

	var valueParts = String(Math.abs(value)).split(".");
	var fractional = valueParts[1] || "";
	if(options.places){
		valueParts[1] = dojo.string.pad(fractional.substr(0, options.places), options.places, '0', true);
	}else if(patternParts[1] && options.places !== 0){
		// Pad fractional with trailing zeros
		var pad = patternParts[1].lastIndexOf("0") + 1;
		if(pad > fractional.length){
			valueParts[1] = dojo.string.pad(fractional, pad, '0', true);
		}

		// Truncate fractional
		var places = patternParts[1].length;
		if(places < fractional.length){
			valueParts[1] = fractional.substr(0, places);
		}
	}else{
		if(valueParts[1]){ valueParts.pop();  }
	}

	// Pad whole with leading zeros
	var patternDigits = patternParts[0].replace(',', '');
	pad = patternDigits.indexOf("0");
	if(pad != -1){
		pad = patternDigits.length - pad;
		if(pad > valueParts[0].length){
			valueParts[0] = dojo.string.pad(valueParts[0], pad);
		}

		// Truncate whole
		if(patternDigits.indexOf("#") == -1){
			valueParts[0] = valueParts[0].substr(valueParts[0].length - pad);
		}
	}

	// Add group separators
	var index = patternParts[0].lastIndexOf(',');
	var groupSize, groupSize2;
	if(index != -1){
		groupSize = patternParts[0].length - index - 1;
		var remainder = patternParts[0].substr(0, index);
		index = remainder.lastIndexOf(',');
		if(index != -1){
			groupSize2 = remainder.length - index - 1;
		}
	}
	var pieces = [];
	for(var whole = valueParts[0];  whole;){
		var off = whole.length - groupSize;
		pieces.push((off > 0) ? whole.substr(off) : whole);
		whole = (off > 0) ? whole.slice(0, off) : "";
		if(groupSize2){
			groupSize = groupSize2;
			delete groupSize2;
		}
	}
	valueParts[0] = pieces.reverse().join(options.group || ",");

	return valueParts.join(options.decimal || ".");
};

/*=====
dojo.number.__regexpOptions = function(kwArgs){
	//	pattern: String?
	//		override pattern with this string.  Default is provided based on
	//		locale.
	//	type: String?
	//		choose a format type based on the locale from the following:
	//		decimal, scientific, percent, currency. decimal by default.
	//	locale: String?
	//		override the locale used to determine formatting rules
	//	strict: Boolean?
	//		strict parsing, false by default
	//	places: Number|String?
	//		number of decimal places to accept: Infinity, a positive number, or
	//		a range "n,m".  By default, defined by pattern.
}
=====*/
dojo.number.regexp = function(/*dojo.number.__regexpOptions?*/options){
	//	summary:
	//		Builds the regular needed to parse a number
	//	description:
	//		Returns regular expression with positive and negative match, group
	//		and decimal separators
	return dojo.number._parseInfo(options).regexp;  // String
}

dojo.number._parseInfo = function(/*Object?*/options){
	options = options || {};
	var locale = dojo.i18n.normalizeLocale(options.locale);
	var bundle = dojo.i18n.getLocalization("dojo.cldr", "number", locale);
	var pattern = options.pattern || bundle[(options.type || "decimal") + "Format"];
//TODO: memoize?
	var group = bundle.group;
	var decimal = bundle.decimal;
	var factor = 1;

	if(pattern.indexOf('%') != -1){
		factor /= 100;
	}else if(pattern.indexOf('\u2030') != -1){
		factor /= 1000;  // per mille
	}else{
		var isCurrency = pattern.indexOf('\u00a4') != -1;
		if(isCurrency){
			group = bundle.currencyGroup || group;
			decimal = bundle.currencyDecimal || decimal;
		}
	}

	//TODO: handle quoted escapes
	var patternList = pattern.split(';');
	if(patternList.length == 1){
		patternList.push("-" + patternList[0]);
	}

	var re = dojo.regexp.buildGroupRE(patternList, function(pattern){
		pattern = "(?:"+dojo.regexp.escapeString(pattern, '.')+")";
		return pattern.replace(dojo.number._numberPatternRE, function(format){
			var flags = {
				signed: false,
				separator: options.strict ? group : [group,""],
				fractional: options.fractional,
				decimal: decimal,
				exponent: false};
			var parts = format.split('.');
			var places = options.places;
			if(parts.length == 1 || places === 0){flags.fractional = false;}
			else{
				if(typeof places == "undefined"){ places = parts[1].lastIndexOf('0')+1;  }
				if(places && options.fractional == undefined){flags.fractional = true;} // required fractional, unless otherwise specified
				if(!options.places && (places < parts[1].length)){ places += "," + parts[1].length;  }
				flags.places = places;
			}
			var groups = parts[0].split(',');
			if(groups.length>1){
				flags.groupSize = groups.pop().length;
				if(groups.length>1){
					flags.groupSize2 = groups.pop().length;
				}
			}
			return "("+dojo.number._realNumberRegexp(flags)+")";
		});
	}, true);

	if(isCurrency){
		// substitute the currency symbol for the placeholder in the pattern
		re = re.replace(/(\s*)(\u00a4{1,3})(\s*)/g, function(match, before, target, after){
			var prop = ["symbol", "currency", "displayName"][target.length-1];
			var symbol = dojo.regexp.escapeString(options[prop] || options.currency || "");
			before = before ? "\\s" : "";
			after = after ? "\\s" : "";
			if(!options.strict){
				if(before){before += "*";}
				if(after){after += "*";}
				return "(?:"+before+symbol+after+")?";
			}
			return before+symbol+after;
		});
	}

//TODO: substitute localized sign/percent/permille/etc.?

	// normalize whitespace and return
	return {regexp: re.replace(/[\xa0 ]/g, "[\\s\\xa0]"), group: group, decimal: decimal, factor: factor};  // Object
}

/*=====
dojo.number.__parseOptions = function(kwArgs){
	//	pattern: String
	//		override pattern with this string.  Default is provided based on
	//		locale.
	//	type: String?
	//		choose a format type based on the locale from the following:
	//		decimal, scientific, percent, currency. decimal by default.
	//	locale: String
	//		override the locale used to determine formatting rules
	//	strict: Boolean?
	//		strict parsing, false by default
	//	currency: Object
	//		object with currency information
}
=====*/
dojo.number.parse = function(/*String*/expression, /*dojo.number.__parseOptions?*/options){
	// summary:
	//		Convert a properly formatted string to a primitive Number, using
	//		locale-specific settings.
	// description:
	//		Create a Number from a string using a known localized pattern.
	//		Formatting patterns are chosen appropriate to the locale.
	//		Formatting patterns are implemented using the syntax described at
	//		*URL*
	// expression:
	//		A string representation of a Number
	var info = dojo.number._parseInfo(options);
	var results = (new RegExp("^"+info.regexp+"$")).exec(expression);
	if(!results){
		return NaN;  //NaN
	}
	var absoluteMatch = results[1];  // match for the positive expression
	if(!results[1]){
		if(!results[2]){
			return NaN;  //NaN
		}
		// matched the negative pattern
		absoluteMatch =results[2];
		info.factor *= -1;
	}

	// Transform it to something Javascript can parse as a number.  Normalize
	// decimal point and strip out group separators or alternate forms of whitespace
	absoluteMatch = absoluteMatch.
		replace(new RegExp("["+info.group + "\\s\\xa0"+"]", "g"), "").
		replace(info.decimal, ".");
	// Adjust for negative sign, percent, etc. as necessary
	return Number(absoluteMatch) * info.factor;  //Number
};

/*=====
dojo.number.__realNumberRegexpFlags = function(kwArgs){
	//	places: Number?
	//		The integer number of decimal places or a range given as "n,m".  If
	//		not given, the decimal part is optional and the number of places is
	//		unlimited.
	//	decimal: String?
	//		A string for the character used as the decimal point.  Default
	//		is ".".
	//	fractional: Boolean|Array?
	//		Whether decimal places are allowed.  Can be true, false, or [true,
	//		false].  Default is [true, false]
	//	exponent: Boolean|Array?
	//		Express in exponential notation.  Can be true, false, or [true,
	//		false]. Default is [true, false], (i.e. will match if the
	//		exponential part is present are not).
	//	eSigned: Boolean|Array?
	//		The leading plus-or-minus sign on the exponent.  Can be true,
	//		false, or [true, false].  Default is [true, false], (i.e. will
	//		match if it is signed or unsigned).  flags in regexp.integer can be
	//		applied.
}
=====*/

dojo.number._realNumberRegexp = function(/*dojo.number.__realNumberRegexpFlags?*/flags){
	// summary:
	//		Builds a regular expression to match a real number in exponential
	//		notation
	// flags:
	//		An object

	// assign default values to missing paramters
	flags = flags || {};
	if(typeof flags.places == "undefined"){ flags.places = Infinity;  }
	if(typeof flags.decimal != "string"){ flags.decimal = ".";  }
	if(typeof flags.fractional == "undefined" || /^0/.test(flags.places)){ flags.fractional = [true, false];  }
	if(typeof flags.exponent == "undefined"){ flags.exponent = [true, false];  }
	if(typeof flags.eSigned == "undefined"){ flags.eSigned = [true, false];  }

	// integer RE
	var integerRE = dojo.number._integerRegexp(flags);

	// decimal RE
	var decimalRE = dojo.regexp.buildGroupRE(flags.fractional,
		function(q){
			var re = "";
			if(q && (flags.places!==0)){
				re = "\\" + flags.decimal;
				if(flags.places == Infinity){ 
					re = "(?:" + re + "\\d+)?";  
				}else{
					re += "\\d{" + flags.places + "}";  
				}
			}
			return re;
		},
		true
	);

	// exponent RE
	var exponentRE = dojo.regexp.buildGroupRE(flags.exponent,
		function(q){ 
			if(q){ return "([eE]" + dojo.number._integerRegexp({ signed: flags.eSigned}) + ")";  }
			return "";  
		}
	);

	// real number RE
	var realRE = integerRE + decimalRE;
	// allow for decimals without integers, e.g. .25
	if(decimalRE){realRE = "(?:(?:"+ realRE + ")|(?:" + decimalRE + "))";}
	return realRE + exponentRE;  // String
};

/*=====
dojo.number.__integerRegexpFlags = function(kwArgs){
	//	signed: Boolean?
	//		The leading plus-or-minus sign. Can be true, false, or [true,
	//		false]. Default is [true, false], (i.e. will match if it is signed
	//		or unsigned).
	//	separator: String?
	//		The character used as the thousands separator. Default is no
	//		separator. For more than one symbol use an array, e.g. [",", ""],
	//		makes ',' optional.
	//	groupSize: Number?
	//		group size between separators
	//	flags.groupSize2: Number?
	//		second grouping (for India)
}
=====*/

dojo.number._integerRegexp = function(/*dojo.number.__integerRegexpFlags?*/flags){
	// summary: 
	//		Builds a regular expression that matches an integer
	// flags: 
	//		An object

	// assign default values to missing paramters
	flags = flags || {};
	if(typeof flags.signed == "undefined"){ flags.signed = [true, false];  }
	if(typeof flags.separator == "undefined"){
		flags.separator = "";
	}else if(typeof flags.groupSize == "undefined"){
		flags.groupSize = 3;
	}
	// build sign RE
	var signRE = dojo.regexp.buildGroupRE(flags.signed,
		function(q) { return q ? "[-+]" : "";  },
		true
	);

	// number RE
	var numberRE = dojo.regexp.buildGroupRE(flags.separator,
		function(sep){
			if(!sep){
				return "(?:0|[1-9]\\d*)";
			}

			sep = dojo.regexp.escapeString(sep);
			if(sep == " "){ sep = "\\s";  }
			else if(sep == "\xa0"){ sep = "\\s\\xa0";  }

			var grp = flags.groupSize, grp2 = flags.groupSize2;
			if(grp2){
				var grp2RE = "(?:0|[1-9]\\d{0," + (grp2-1) + "}(?:[" + sep + "]\\d{" + grp2 + "})*[" + sep + "]\\d{" + grp + "})";
				return ((grp-grp2) > 0) ? "(?:" + grp2RE + "|(?:0|[1-9]\\d{0," + (grp-1) + "}))" : grp2RE;
			}
			return "(?:0|[1-9]\\d{0," + (grp-1) + "}(?:[" + sep + "]\\d{" + grp + "})*)";
		},
		true
	);

	// integer RE
	return signRE + numberRE;  // String
}

}

if(!dojo._hasResource["dijit.ProgressBar"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.ProgressBar"] = true;
dojo.provide("dijit.ProgressBar");







dojo.declare("dijit.ProgressBar", [dijit._Widget, dijit._Templated], {
	// summary:
	// a progress widget
	//
	// usage:
	// <div dojoType="ProgressBar"
	//   places="0"
	//   progress="..." maximum="..."></div>

	// progress: String (Percentage or Number)
	// initial progress value.
	// with "%": percentage value, 0% <= progress <= 100%
	// or without "%": absolute value, 0 <= progress <= maximum
	progress: "0",

	// maximum: Float
	// max sample number
	maximum: 100,

	// places: Number
	// number of places to show in values;  0 by default
	places: 0,

	// indeterminate: Boolean
	// false: show progress
	// true: show that a process is underway but that the progress is unknown
	indeterminate: false,

	templateString:"<div class=\"dijitProgressBar dijitProgressBarEmpty\"\n\t><div waiRole=\"progressbar\" tabindex=\"0\" dojoAttachPoint=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\"></div\n\t\t><span style=\"visibility:hidden\">&nbsp;</span\n\t></div\n\t><div dojoAttachPoint=\"label\" class=\"dijitProgressBarLabel\" id=\"${id}_label\">&nbsp;</div\n\t><img dojoAttachPoint=\"inteterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\"\n\t></img\n></div>\n",

	_indeterminateHighContrastImagePath:
		dojo.moduleUrl("dijit", "themes/a11y/indeterminate_progress.gif"),

	// public functions
	postCreate: function(){
		this.inherited("postCreate",arguments);
		this.inteterminateHighContrastImage.setAttribute("src",
			this._indeterminateHighContrastImagePath);
		this.update();
	},

	update: function(/*Object?*/attributes){
		// summary: update progress information
		//
		// attributes: may provide progress and/or maximum properties on this parameter,
		//	see attribute specs for details.
		dojo.mixin(this, attributes||{});
		var percent = 1, classFunc;
		if(this.indeterminate){
			classFunc = "addClass";
			dijit.removeWaiState(this.internalProgress, "valuenow");
			dijit.removeWaiState(this.internalProgress, "valuemin");
			dijit.removeWaiState(this.internalProgress, "valuemax");
		}else{
			classFunc = "removeClass";
			if(String(this.progress).indexOf("%") != -1){
				percent = Math.min(parseFloat(this.progress)/100, 1);
				this.progress = percent * this.maximum;
			}else{
				this.progress = Math.min(this.progress, this.maximum);
				percent = this.progress / this.maximum;
			}
			var text = this.report(percent);
			this.label.firstChild.nodeValue = text;
			dijit.setWaiState(this.internalProgress, "describedby", this.label.id);
			dijit.setWaiState(this.internalProgress, "valuenow", this.progress);
			dijit.setWaiState(this.internalProgress, "valuemin", 0);
			dijit.setWaiState(this.internalProgress, "valuemax", this.maximum);
		}
		dojo[classFunc](this.domNode, "dijitProgressBarIndeterminate");
		this.internalProgress.style.width = (percent * 100) + "%";
		this.onChange();
	},

	report: function(/*float*/percent){
		// Generates message to show;  may be overridden by user
		return dojo.number.format(percent, {type: "percent", places: this.places, locale: this.lang});
	},

	onChange: function(){}
});

}

if(!dojo._hasResource["dijit.TitlePane"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.TitlePane"] = true;
dojo.provide("dijit.TitlePane");






dojo.declare(
	"dijit.TitlePane",
	[dijit.layout.ContentPane, dijit._Templated],
{
	// summary
	//		A pane with a title on top, that can be opened or collapsed.
	//
	// title: String
	//		Title of the pane
	title: "",

	// open: Boolean
	//		Whether pane is opened or closed.
	open: true,

	// duration: Integer
	//		Time in milliseconds to fade in/fade out
	duration: 250,

	// baseClass: String
	//	the root className to use for the various states of this widget
	baseClass: "dijitTitlePane",

	templateString:"<div class=\"dijitTitlePane\">\n\t<div dojoAttachEvent=\"onclick:toggle,onkeypress: _onTitleKey,onfocus:_handleFocus,onblur:_handleFocus\" tabindex=\"0\"\n\t\t\twaiRole=\"button\" class=\"dijitTitlePaneTitle\" dojoAttachPoint=\"focusNode\">\n\t\t<div dojoAttachPoint=\"arrowNode\" class=\"dijitInline dijitArrowNode\"><span dojoAttachPoint=\"arrowNodeInner\" class=\"dijitArrowNodeInner\"></span></div>\n\t\t<div dojoAttachPoint=\"titleNode\" class=\"dijitTitlePaneTextNode\"></div>\n\t</div>\n\t<div class=\"dijitTitlePaneContentOuter\" dojoAttachPoint=\"hideNode\">\n\t\t<div class=\"dijitReset\" dojoAttachPoint=\"wipeNode\">\n\t\t\t<div class=\"dijitTitlePaneContentInner\" dojoAttachPoint=\"containerNode\" waiRole=\"region\" tabindex=\"-1\">\n\t\t\t\t<!-- nested divs because wipeIn()/wipeOut() doesn't work right on node w/padding etc.  Put padding on inner div. -->\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n",

	postCreate: function(){
		this.setTitle(this.title);
		if(!this.open){
			this.hideNode.style.display = this.wipeNode.style.display = "none";
		}
		this._setCss();
		dojo.setSelectable(this.titleNode, false);
		this.inherited("postCreate",arguments);
		dijit.setWaiState(this.containerNode, "labelledby", this.titleNode.id);
		dijit.setWaiState(this.focusNode, "haspopup", "true");

		// setup open/close animations
		var hideNode = this.hideNode, wipeNode = this.wipeNode;
		this._wipeIn = dojo.fx.wipeIn({
			node: this.wipeNode,
			duration: this.duration,
			beforeBegin: function(){
				hideNode.style.display="";
			}
		});
		this._wipeOut = dojo.fx.wipeOut({
			node: this.wipeNode,
			duration: this.duration,
			onEnd: function(){
				hideNode.style.display="none";
			}
		});
	},

	setContent: function(content){
		// summary
		// 		Typically called when an href is loaded.  Our job is to make the animation smooth
		if(this._wipeOut.status() == "playing"){
			// we are currently *closing* the pane, so just let that continue
			this.inherited("setContent",arguments);
		}else{
			if(this._wipeIn.status() == "playing"){
				this._wipeIn.stop();
			}

			// freeze container at current height so that adding new content doesn't make it jump
			dojo.marginBox(this.wipeNode, {h: dojo.marginBox(this.wipeNode).h});

			// add the new content (erasing the old content, if any)
			this.inherited("setContent",arguments);

			// call _wipeIn.play() to animate from current height to new height
			this._wipeIn.play();
		}
	},

	toggle: function(){
		// summary: switches between opened and closed state
		dojo.forEach([this._wipeIn, this._wipeOut], function(animation){
			if(animation.status() == "playing"){
				animation.stop();
			}
		});

		this[this.open ? "_wipeOut" : "_wipeIn"].play();
		this.open =! this.open;

		// load content (if this is the first time we are opening the TitlePane
		// and content is specified as an href, or we have setHref when hidden)
		this._loadCheck();

		this._setCss();
	},

	_setCss: function(){
		// summary: set the open/close css state for the TitlePane
		var classes = ["dijitClosed", "dijitOpen"];
		var boolIndex = this.open;
		dojo.removeClass(this.focusNode, classes[!boolIndex+0]);
		this.focusNode.className += " " + classes[boolIndex+0];

		// provide a character based indicator for images-off mode
		this.arrowNodeInner.innerHTML = this.open ? "-" : "+";
	},

	_onTitleKey: function(/*Event*/ e){
		// summary: callback when user hits a key
		if(e.keyCode == dojo.keys.ENTER || e.charCode == dojo.keys.SPACE){
			this.toggle();
		}
		else if(e.keyCode == dojo.keys.DOWN_ARROW){
			if(this.open){
				this.containerNode.focus();
				e.preventDefault();
			}
	 	}
	},
	
	_handleFocus: function(/*Event*/ e){
		// summary: handle blur and focus for this widget
		
		// add/removeClass is safe to call without hasClass in this case
		dojo[(e.type=="focus" ? "addClass" : "removeClass")](this.focusNode,this.baseClass+"Focused");
	},

	setTitle: function(/*String*/ title){
		// summary: sets the text of the title
		this.titleNode.innerHTML=title;
	}
});

}

if(!dojo._hasResource["dijit.Tooltip"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.Tooltip"] = true;
dojo.provide("dijit.Tooltip");




dojo.declare(
	"dijit._MasterTooltip",
	[dijit._Widget, dijit._Templated],
	{
		// summary
		//		Internal widget that holds the actual tooltip markup,
		//		which occurs once per page.
		//		Called by Tooltip widgets which are just containers to hold
		//		the markup

		// duration: Integer
		//		Milliseconds to fade in/fade out
		duration: 200,

		templateString:"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\">\n\t<div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" waiRole='alert'></div>\n\t<div class=\"dijitTooltipConnector\"></div>\n</div>\n",

		postCreate: function(){
			dojo.body().appendChild(this.domNode);

			this.bgIframe = new dijit.BackgroundIframe(this.domNode);

			// Setup fade-in and fade-out functions.
			this.fadeIn = dojo.fadeIn({ node: this.domNode, duration: this.duration, onEnd: dojo.hitch(this, "_onShow") });
			this.fadeOut = dojo.fadeOut({ node: this.domNode, duration: this.duration, onEnd: dojo.hitch(this, "_onHide") });

		},

		show: function(/*String*/ innerHTML, /*DomNode*/ aroundNode){
			// summary:
			//	Display tooltip w/specified contents to right specified node
			//	(To left if there's no space on the right, or if LTR==right)

			if(this.aroundNode && this.aroundNode === aroundNode){
				return;
			}

			if(this.fadeOut.status() == "playing"){
				// previous tooltip is being hidden;  wait until the hide completes then show new one
				this._onDeck=arguments;
				return;
			}
			this.containerNode.innerHTML=innerHTML;

			// Firefox bug. when innerHTML changes to be shorter than previous
			// one, the node size will not be updated until it moves.
			this.domNode.style.top = (this.domNode.offsetTop + 1) + "px";

			// position the element and change CSS according to position	
			var align = this.isLeftToRight() ? {'BR': 'BL', 'BL': 'BR'} : {'BL': 'BR', 'BR': 'BL'};
			var pos = dijit.placeOnScreenAroundElement(this.domNode, aroundNode, align);
			this.domNode.className="dijitTooltip dijitTooltip" + (pos.corner=='BL' ? "Right" : "Left");//FIXME: might overwrite class

			// show it
			dojo.style(this.domNode, "opacity", 0);
			this.fadeIn.play();
			this.isShowingNow = true;
			this.aroundNode = aroundNode;
		},

		_onShow: function(){
			if(dojo.isIE){
				// the arrow won't show up on a node w/an opacity filter
				this.domNode.style.filter="";
			}
		},

		hide: function(aroundNode){
			// summary: hide the tooltip
			if(!this.aroundNode || this.aroundNode !== aroundNode){
				return;
			}
			if(this._onDeck){
				// this hide request is for a show() that hasn't even started yet;
				// just cancel the pending show()
				this._onDeck=null;
				return;
			}
			this.fadeIn.stop();
			this.isShowingNow = false;
			this.aroundNode = null;
			this.fadeOut.play();
		},

		_onHide: function(){
			this.domNode.style.cssText="";	 // to position offscreen again
			if(this._onDeck){
				// a show request has been queued up;  do it now
				this.show.apply(this, this._onDeck);
				this._onDeck=null;
			}
		}

	}
);

dijit.showTooltip = function(/*String*/ innerHTML, /*DomNode*/ aroundNode){
	// summary:
	//	Display tooltip w/specified contents to right specified node
	//	(To left if there's no space on the right, or if LTR==right)
	if(!dijit._masterTT){ dijit._masterTT = new dijit._MasterTooltip();  }
	return dijit._masterTT.show(innerHTML, aroundNode);
};

dijit.hideTooltip = function(aroundNode){
	// summary: hide the tooltip
	if(!dijit._masterTT){ dijit._masterTT = new dijit._MasterTooltip();  }
	return dijit._masterTT.hide(aroundNode);
};

dojo.declare(
	"dijit.Tooltip",
	dijit._Widget,
	{
		// summary
		//		Pops up a tooltip (a help message) when you hover over a node.

		// label: String
		//		Text to display in the tooltip.
		//		Specified as innerHTML when creating the widget from markup.
		label: "",

		// showDelay: Integer
		//		Number of milliseconds to wait after hovering over/focusing on the object, before
		//		the tooltip is displayed.
		showDelay: 400,

		// connectId: String[]
		//		Id(s) of domNodes to attach the tooltip to.
		//		When user hovers over any of the specified dom nodes, the tooltip will appear.
		connectId: [],

		postCreate: function(){
			if(this.srcNodeRef){
				this.srcNodeRef.style.display = "none";
			}

			this._connectNodes = [];
			
			dojo.forEach(this.connectId, function(id) {
				var node = dojo.byId(id);
				if (node) {
					this._connectNodes.push(node);
					dojo.forEach(["onMouseOver", "onMouseOut", "onFocus", "onBlur", "onHover", "onUnHover"], function(event){
						this.connect(node, event.toLowerCase(), "_"+event);
					}, this);
					if(dojo.isIE){
						// BiDi workaround
						node.style.zoom = 1;
					}
				}
			}, this);
		},

		_onMouseOver: function(/*Event*/ e){
			this._onHover(e);
		},

		_onMouseOut: function(/*Event*/ e){
			if(dojo.isDescendant(e.relatedTarget, e.target)){
				// false event;  just moved from target to target child;  ignore.
				return;
			}
			this._onUnHover(e);
		},

		_onFocus: function(/*Event*/ e){
			this._focus = true;
			this._onHover(e);
		},
		
		_onBlur: function(/*Event*/ e){
			this._focus = false;
			this._onUnHover(e);
		},

		_onHover: function(/*Event*/ e){
			if(!this._showTimer){
				var target = e.target;
				this._showTimer = setTimeout(dojo.hitch(this, function(){this.open(target)}), this.showDelay);
			}
		},

		_onUnHover: function(/*Event*/ e){
			// keep a tooltip open if the associated element has focus
			if(this._focus){ return;  }
			if(this._showTimer){
				clearTimeout(this._showTimer);
				delete this._showTimer;
			}
			this.close();
		},

		open: function(/*DomNode*/ target){
 			// summary: display the tooltip;  usually not called directly.
			target = target || this._connectNodes[0];
			if(!target){ return;  }

			if(this._showTimer){
				clearTimeout(this._showTimer);
				delete this._showTimer;
			}
			dijit.showTooltip(this.label || this.domNode.innerHTML, target);
			
			this._connectNode = target;
		},

		close: function(){
			// summary: hide the tooltip;  usually not called directly.
			dijit.hideTooltip(this._connectNode);
			delete this._connectNode;
			if(this._showTimer){
				clearTimeout(this._showTimer);
				delete this._showTimer;
			}
		},

		uninitialize: function(){
			this.close();
		}
	}
);

}

if(!dojo._hasResource["dojo.cookie"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.cookie"] = true;
dojo.provide("dojo.cookie");

/*=====
dojo.__cookieProps = function(kwArgs){
	//	expires: Date|Number?
	//		If a number, seen as the number of days from today. If a date, the
	//		date past which the cookie is invalid. If expires is in the past,
	//		the cookie will be deleted If expires is left out or is 0, the
	//		cookie will expire when the browser closes.
	//	path: String?
	//		The path to use for the cookie.
	//	domain: String?
	//		The domain to use for the cookie.
	//	secure: Boolean?
	//		Whether to only send the cookie on secure connections
}
=====*/


dojo.cookie = function(/*String*/name, /*String?*/value, /*dojo.__cookieProps?*/props){
	//	summary: 
	//		Get or set a cookie.
	//	description:
	// 		If you pass in one argument, the the value of the cookie is returned
	//
	// 		If you pass in two arguments, the cookie value is set to the second
	// 		argument.
	//
	// 		If you pass in three arguments, the cookie value is set to the
	// 		second argument, and the options on the third argument are used for
	// 		extended properties on the cookie
	//	name:
	//		The name of the cookie
	//	value:
	//		Optional. The value for the cookie.
	//	props: 
	//		Optional additional properties for the cookie
	//	example:
	//		set a cookie with the JSON-serialized contents of an object which
	//		will expire 5 days from now:
	//	|	dojo.cookie("configObj", dojo.toJson(config), { expires: 5 });
	//	
	//	example:
	//		de-serialize a cookie back into a JavaScript object:
	//	|	var config = dojo.fromJson(dojo.cookie("configObj"));
	//	
	//	example:
	//		delete a cookie:
	//	|	dojo.cookie("configObj", null);
	var c = document.cookie;
	if(arguments.length == 1){
		var idx = c.lastIndexOf(name+'=');
		if(idx == -1){ return null;  }
		var start = idx+name.length+1;
		var end = c.indexOf(';', idx+name.length+1);
		if(end == -1){ end = c.length;  }
		return decodeURIComponent(c.substring(start, end));  
	}else{
		props = props || {};
		value = encodeURIComponent(value);
		if(typeof(props.expires) == "number"){ 
			var d = new Date();
			d.setTime(d.getTime()+(props.expires*24*60*60*1000));
			props.expires = d;
		}
		document.cookie = name + "=" + value 
			+ (props.expires ? ";  expires=" + props.expires.toUTCString() : "")
			+ (props.path ? ";  path=" + props.path : "")
			+ (props.domain ? ";  domain=" + props.domain : "")
			+ (props.secure ? ";  secure" : "");
		return null;
	}
};

}

if(!dojo._hasResource["dijit.Tree"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.Tree"] = true;
dojo.provide("dijit.Tree");








dojo.declare(
	"dijit._TreeNode",
	[dijit._Widget, dijit._Templated, dijit._Container, dijit._Contained],
{
	// summary
	//		Single node within a tree

	// item: dojo.data.Item
	//		the dojo.data entry this tree represents
	item: null,	

	isTreeNode: true,

	// label: String
	//		Text of this tree node
	label: "",
	
	isExpandable: null, // show expando node
	
	isExpanded: false,

	// state: String
	//		dynamic loading-related stuff.
	//		When an empty folder node appears, it is "UNCHECKED" first,
	//		then after dojo.data query it becomes "LOADING" and, finally "LOADED"	
	state: "UNCHECKED",
	
	templateString:"<div class=\"dijitTreeNode dijitTreeExpandLeaf dijitTreeChildrenNo\" waiRole=\"presentation\"\n\t><span dojoAttachPoint=\"expandoNode\" class=\"dijitTreeExpando\" waiRole=\"presentation\"\n\t></span\n\t><span dojoAttachPoint=\"expandoNodeText\" class=\"dijitExpandoText\" waiRole=\"presentation\"\n\t></span\n\t>\n\t<div dojoAttachPoint=\"contentNode\" class=\"dijitTreeContent\" waiRole=\"presentation\">\n\t\t<div dojoAttachPoint=\"iconNode\" class=\"dijitInline dijitTreeIcon\" waiRole=\"presentation\"></div>\n\t\t<span dojoAttachPoint=\"labelNode\" class=\"dijitTreeLabel\" wairole=\"treeitem\" tabindex=\"-1\"></span>\n\t</div>\n</div>\n",		

	postCreate: function(){
		// set label, escaping special characters
		this.setLabelNode(this.label);

		// set expand icon for leaf 	
		this._setExpando();

		// set icon and label class based on item
		this._updateItemClasses(this.item);

		if(this.isExpandable){
			dijit.setWaiState(this.labelNode, "expanded", this.isExpanded);
		}
	},

	markProcessing: function(){
		// summary: visually denote that tree is loading data, etc.
		this.state = "LOADING";
		this._setExpando(true);	 
	},

	unmarkProcessing: function(){
		// summary: clear markup from markProcessing() call
		this._setExpando(false);	 
	},

	_updateItemClasses: function(item){
		// summary: set appropriate CSS classes for item (used to allow for item updates to change respective CSS)
		this.iconNode.className = "dijitInline dijitTreeIcon " + this.tree.getIconClass(item);
		this.labelNode.className = "dijitTreeLabel " + this.tree.getLabelClass(item);
	},
	
	_updateLayout: function(){
		// summary: set appropriate CSS classes for this.domNode
		var parent = this.getParent();
		if(parent && parent.isTree && parent._hideRoot){
			/* if we are hiding the root node then make every first level child look like a root node */
			dojo.addClass(this.domNode, "dijitTreeIsRoot");
		}else{
			dojo.toggleClass(this.domNode, "dijitTreeIsLast", !this.getNextSibling());
		}
	},

	_setExpando: function(/*Boolean*/ processing){
		// summary: set the right image for the expando node

		// apply the appropriate class to the expando node
		var styles = ["dijitTreeExpandoLoading", "dijitTreeExpandoOpened",
			"dijitTreeExpandoClosed", "dijitTreeExpandoLeaf"];
		var idx = processing ? 0 : (this.isExpandable ?	(this.isExpanded ? 1 : 2) : 3);
		dojo.forEach(styles,
			function(s){
				dojo.removeClass(this.expandoNode, s);
			}, this
		);
		dojo.addClass(this.expandoNode, styles[idx]);

		// provide a non-image based indicator for images-off mode
		this.expandoNodeText.innerHTML =
			processing ? "*" :
				(this.isExpandable ?
					(this.isExpanded ? "-" : "+") : "*");
	},	

	expand: function(){
		// summary: show my children
		if(this.isExpanded){ return;  }
		// cancel in progress collapse operation
		if(this._wipeOut.status() == "playing"){
			this._wipeOut.stop();
		}

		this.isExpanded = true;
		dijit.setWaiState(this.labelNode, "expanded", "true");
		dijit.setWaiRole(this.containerNode, "group");

		this._setExpando();

		this._wipeIn.play();
	},

	collapse: function(){					
		if(!this.isExpanded){ return;  }

		// cancel in progress expand operation
		if(this._wipeIn.status() == "playing"){
			this._wipeIn.stop();
		}

		this.isExpanded = false;
		dijit.setWaiState(this.labelNode, "expanded", "false");
		this._setExpando();

		this._wipeOut.play();
	},

	setLabelNode: function(label){
		this.labelNode.innerHTML="";
		this.labelNode.appendChild(document.createTextNode(label));
	},

	_setChildren: function(/* Object[] */ childrenArray){
		// summary:
		//		Sets the children of this node.
		//		Sets this.isExpandable based on whether or not there are children
		// 		Takes array of objects like: {label: ...} (_TreeNode options basically)
		//		See parameters of _TreeNode for details.

		this.destroyDescendants();

		this.state = "LOADED";
		var nodeMap= {};
		if(childrenArray && childrenArray.length > 0){
			this.isExpandable = true;
			if(!this.containerNode){ // maybe this node was unfolderized and still has container
				this.containerNode = this.tree.containerNodeTemplate.cloneNode(true);
				this.domNode.appendChild(this.containerNode);
			}

			// Create _TreeNode widget for each specified tree node
			dojo.forEach(childrenArray, function(childParams){
				var child = new dijit._TreeNode(dojo.mixin({
					tree: this.tree,
					label: this.tree.getLabel(childParams.item)
				}, childParams));
				this.addChild(child);
				var identity = this.tree.store.getIdentity(childParams.item);
				nodeMap[identity] = child;
				if(this.tree.persist){
					if(this.tree._openedItemIds[identity]){
						this.tree._expandNode(child);
					}
				}
			}, this);

			// note that updateLayout() needs to be called on each child after
			// _all_ the children exist
			dojo.forEach(this.getChildren(), function(child, idx){
				child._updateLayout();
			});
		}else{
			this.isExpandable=false;
		}

		if(this._setExpando){
			// change expando to/form dot or + icon, as appropriate
			this._setExpando(false);
		}

		if(this.isTree && this._hideRoot){
			// put first child in tab index if one exists.
			var fc = this.getChildren()[0];
			var tabnode = fc ? fc.labelNode : this.domNode;
			tabnode.setAttribute("tabIndex", "0");
		}

		// create animations for showing/hiding the children (if children exist)
		if(this.containerNode && !this._wipeIn){
			this._wipeIn = dojo.fx.wipeIn({node: this.containerNode, duration: 150});
			this._wipeOut = dojo.fx.wipeOut({node: this.containerNode, duration: 150});
		}

		return nodeMap;
	},

	_addChildren: function(/* object[] */ childrenArray){
		// summary:
		//		adds the children to this node.
		// 		Takes array of objects like: {label: ...}  (_TreeNode options basically)

		//		See parameters of _TreeNode for details.
		var nodeMap = {};
		if(childrenArray && childrenArray.length > 0){
			dojo.forEach(childrenArray, function(childParams){
				var child = new dijit._TreeNode(
					dojo.mixin({
						tree: this.tree,
						label: this.tree.getLabel(childParams.item)
					}, childParams)
				);
				this.addChild(child);
				nodeMap[this.tree.store.getIdentity(childParams.item)] = child;
			}, this);

			dojo.forEach(this.getChildren(), function(child, idx){
				child._updateLayout();
			});
		}

		return nodeMap;
	},

	deleteNode: function(/* treeNode */ node){
		node.destroy();

		var children = this.getChildren();	 	
		if(children.length == 0){
			this.isExpandable = false;
			this.collapse();
		}

		dojo.forEach(children, function(child){
				child._updateLayout();
		});
	},

	makeExpandable: function(){
		//summary
		//		if this node wasn't already showing the expando node,
		//		turn it into one and call _setExpando()
		this.isExpandable = true;
		this._setExpando(false);
	}
});

dojo.declare(
	"dijit.Tree",
	dijit._TreeNode,
{
	// summary
	//	This widget displays hierarchical data from a store.  A query is specified
	//	to get the "top level children" from a data store, and then those items are
	//	queried for their children and so on (but lazily, as the user clicks the expand node).
	//
	//	Thus in the default mode of operation this widget is technically a forest, not a tree,
	//	in that there can be multiple "top level children".  However, if you specify label,
	//	then a special top level node (not corresponding to any item in the datastore) is
	//	created, to father all the top level children.

	// store: String||dojo.data.Store
	//	The store to get data to display in the tree
	store: null,

	// query: String
	//	query to get top level node(s) of tree (ex: {type:'continent'})
	query: null,

	// childrenAttr: String
	//		one ore more attributes that holds children of a tree node
	childrenAttr: ["children"],

	templateString:"<div class=\"dijitTreeContainer\" style=\"\" waiRole=\"tree\"\n\tdojoAttachEvent=\"onclick:_onClick,onkeypress:_onKeyPress\">\n\t<div class=\"dijitTreeNode  dijitTreeIsRoot dijitTreeExpandLeaf dijitTreeChildrenNo\" waiRole=\"presentation\"\n\t\tdojoAttachPoint=\"rowNode\"\n\t\t><span dojoAttachPoint=\"expandoNode\" class=\"dijitTreeExpando\" waiRole=\"presentation\"\n\t\t></span\n\t\t><span dojoAttachPoint=\"expandoNodeText\" class=\"dijitExpandoText\" waiRole=\"presentation\"\n\t\t></span\n\t\t>\n\t\t<div dojoAttachPoint=\"contentNode\" class=\"dijitTreeContent\" waiRole=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"iconNode\" class=\"dijitInline dijitTreeIcon\" waiRole=\"presentation\"></div>\n\t\t\t<span dojoAttachPoint=\"labelNode\" class=\"dijitTreeLabel\" wairole=\"treeitem\" tabindex=\"0\"></span>\n\t\t</div>\n\t</div>\n</div>\n",		

	isExpandable: true,

	isTree: true,

	// persist: Boolean
	//	enables/disables use of cookies for state saving.
	persist: true,
	
	// dndController: String
	//	class name to use as as the dnd controller
	dndController: null,

	//parameters to pull off of the tree and pass on to the dndController as its params
	dndParams: ["onDndDrop","itemCreator","onDndCancel","checkAcceptance", "checkItemAcceptance"],

	//declare the above items so they can be pulled from the tree's markup
	onDndDrop:null,
	itemCreator:null,
	onDndCancel:null,
	checkAcceptance:null,	
	checkItemAcceptance:null,

	_publish: function(/*String*/ topicName, /*Object*/ message){
		// summary:
		//		Publish a message for this widget/topic
		dojo.publish(this.id, [dojo.mixin({tree: this, event: topicName}, message||{})]);
	},

	postMixInProperties: function(){
		this.tree = this;
		this.lastFocused = this.labelNode;

		this._itemNodeMap={};

		this._hideRoot = !this.label;

		if(!this.store.getFeatures()['dojo.data.api.Identity']){
			throw new Error("dijit.tree requires access to a store supporting the dojo.data Identity api");	 		
		}

		if(!this.cookieName){
			this.cookieName = this.id + "SaveStateCookie";
		}

		// if the store supports Notification, subscribe to the notification events
		if(this.store.getFeatures()['dojo.data.api.Notification']){
			this.connect(this.store, "onNew", "_onNewItem");
			this.connect(this.store, "onDelete", "_onDeleteItem");
			this.connect(this.store, "onSet", "_onSetItem");
		}
	},

	postCreate: function(){
		// load in which nodes should be opened automatically
		if(this.persist){
			var cookie = dojo.cookie(this.cookieName);
			this._openedItemIds = {};
			if(cookie){
				dojo.forEach(cookie.split(','), function(item){
					this._openedItemIds[item] = true;
				}, this);
			}
		}
		
		// make template for container node (we will clone this and insert it into
		// any nodes that have children)
		var div = document.createElement('div');
		div.style.display = 'none';
		div.className = "dijitTreeContainer";	 
		dijit.setWaiRole(div, "presentation");
		this.containerNodeTemplate = div;

		if(this._hideRoot){
			this.rowNode.style.display="none";
		}

		this.inherited("postCreate", arguments);

		// load top level children
		this._expandNode(this);

		if(this.dndController){
			if(dojo.isString(this.dndController)){
				this.dndController= dojo.getObject(this.dndController);
			}	
			var params={};
			for (var i=0;  i<this.dndParams.length;i++){
				if(this[this.dndParams[i]]){
					params[this.dndParams[i]]=this[this.dndParams[i]];
				}
			}
			this.dndController= new this.dndController(this, params);
		}

		this.connect(this.domNode,
			dojo.isIE ? "onactivate" : "onfocus",
			"_onTreeFocus");
	},

	////////////// Data store related functions //////////////////////

	mayHaveChildren: function(/*dojo.data.Item*/ item){
		// summary
		//		User overridable function to tell if an item has or may have children.
		//		Controls whether or not +/- expando icon is shown.
		//		(For efficiency reasons we may not want to check if an element has
		//		children until user clicks the expando node)

		return dojo.some(this.childrenAttr, function(attr){
			return this.store.hasAttribute(item, attr);
		}, this);
	},

	getItemChildren: function(/*dojo.data.Item*/ parentItem, /*function(items)*/ onComplete){
		// summary
		// 		User overridable function that return array of child items of given parent item,
		//		or if parentItem==null then return top items in tree
		var store = this.store;
		if(parentItem == null){
			// get top level nodes
			store.fetch({ query: this.query, onComplete: onComplete});
		}else{
			// get children of specified node
			var childItems = [];
			for (var i=0;  i<this.childrenAttr.length;  i++){	
				childItems= childItems.concat(store.getValues(parentItem, this.childrenAttr[i]));
			}
			// count how many items need to be loaded
			var _waitCount = 0;
			dojo.forEach(childItems, function(item){ if(!store.isItemLoaded(item)){ _waitCount++;  } });

			if(_waitCount == 0){
				// all items are already loaded.  proceed..
				onComplete(childItems);
			}else{
				// still waiting for some or all of the items to load
				function onItem(item){
					if(--_waitCount == 0){
						// all nodes have been loaded, send them to the tree
						onComplete(childItems);
					}
				}
				dojo.forEach(childItems, function(item){
					if(!store.isItemLoaded(item)){
						store.loadItem({item: item, onItem: onItem});
					}
				});
			}
		}
	},

	getItemParentIdentity: function(/*dojo.data.Item*/ item, /*Object*/ parentInfo){
		// summary
		//		User overridable function, to return id of parent (or null if top level).
		//		It's called with args from dojo.store.onNew
		return this.store.getIdentity(parentInfo.item);	 	// String
	},

	getLabel: function(/*dojo.data.Item*/ item){
		// summary: user overridable function to get the label for a tree node (given the item)
		return this.store.getLabel(item);	 // String
	},

	getIconClass: function(/*dojo.data.Item*/ item){
		// summary: user overridable function to return CSS class name to display icon
	},

	getLabelClass: function(/*dojo.data.Item*/ item){
		// summary: user overridable function to return CSS class name to display label
	},

	_onLoadAllItems: function(/*_TreeNode*/ node, /*dojo.data.Item[]*/ items){
		// sumary: callback when all the children of a given node have been loaded
		var childParams=dojo.map(items, function(item){
			return {
				item: item,
				isExpandable: this.mayHaveChildren(item)
			};
		}, this);

		dojo.mixin(this._itemNodeMap,node._setChildren(childParams));

		this._expandNode(node);
	},

	/////////// Keyboard and Mouse handlers ////////////////////

	_onKeyPress: function(/*Event*/ e){
		// summary: translates keypress events into commands for the controller
		if(e.altKey){ return;  }
		var treeNode = dijit.getEnclosingWidget(e.target);
		if(!treeNode){ return;  }

		// Note: On IE e.keyCode is not 0 for printables so check e.charCode.
		// In dojo charCode is universally 0 for non-printables.
		if(e.charCode){  // handle printables (letter navigation)
			// Check for key navigation.
			var navKey = e.charCode;
			if(!e.altKey && !e.ctrlKey && !e.shiftKey && !e.metaKey){
				navKey = (String.fromCharCode(navKey)).toLowerCase();
				this._onLetterKeyNav( { node: treeNode, key: navKey } );
				dojo.stopEvent(e);
			}
		}else{  // handle non-printables (arrow keys)
			var map = this._keyHandlerMap;
			if(!map){
				// setup table mapping keys to events
				map = {};
				map[dojo.keys.ENTER]="_onEnterKey";
				map[dojo.keys.LEFT_ARROW]="_onLeftArrow";
				map[dojo.keys.RIGHT_ARROW]="_onRightArrow";
				map[dojo.keys.UP_ARROW]="_onUpArrow";
				map[dojo.keys.DOWN_ARROW]="_onDownArrow";
				map[dojo.keys.HOME]="_onHomeKey";
				map[dojo.keys.END]="_onEndKey";
				this._keyHandlerMap = map;
			}
			if(this._keyHandlerMap[e.keyCode]){
				this[this._keyHandlerMap[e.keyCode]]( { node: treeNode, item: treeNode.item } );	 
				dojo.stopEvent(e);
			}
		}
	},

	_onEnterKey: function(/*Object*/ message){
		this._publish("execute", { item: message.item, node: message.node} );
		this.onClick(message.item, message.node);
	},

	_onDownArrow: function(/*Object*/ message){
		// summary: down arrow pressed;  get next visible node, set focus there
		var returnNode = this._navToNextNode(message.node);
		if(returnNode && returnNode.isTreeNode){
			returnNode.tree.focusNode(returnNode);
			return returnNode;
		}	
	},

	_onUpArrow: function(/*Object*/ message){
		// summary: up arrow pressed;  move to previous visible node

		var nodeWidget = message.node;
		var returnWidget = nodeWidget;

		// if younger siblings		
		var previousSibling = nodeWidget.getPreviousSibling();
		if(previousSibling){
			nodeWidget = previousSibling;
			// if the previous nodeWidget is expanded, dive in deep
			while(nodeWidget.isExpandable && nodeWidget.isExpanded && nodeWidget.hasChildren()){
				returnWidget = nodeWidget;
				// move to the last child
				var children = nodeWidget.getChildren();
				nodeWidget = children[children.length-1];
			}
		}else{
			// if this is the first child, return the parent
			// unless the parent is the root of a tree with a hidden root
			var parent = nodeWidget.getParent();
			if(!(this._hideRoot && parent === this)){
				nodeWidget = parent;
			}
		}

		if(nodeWidget && nodeWidget.isTreeNode){
			returnWidget = nodeWidget;
		}

		if(returnWidget && returnWidget.isTreeNode){
			returnWidget.tree.focusNode(returnWidget);
			return returnWidget;
		}
	},

	_onRightArrow: function(/*Object*/ message){
		// summary: right arrow pressed;  go to child node
		var nodeWidget = message.node;
		var returnWidget = nodeWidget;

		// if not expanded, expand, else move to 1st child
		if(nodeWidget.isExpandable && !nodeWidget.isExpanded){
			this._expandNode(nodeWidget);
		}else if(nodeWidget.hasChildren()){
			nodeWidget = nodeWidget.getChildren()[0];
		}

		if(nodeWidget && nodeWidget.isTreeNode){
			returnWidget = nodeWidget;
		}

		if(returnWidget && returnWidget.isTreeNode){
			returnWidget.tree.focusNode(returnWidget);
			return returnWidget;
		}
	},

	_onLeftArrow: function(/*Object*/ message){
		// summary: left arrow pressed;  go to parent

		var node = message.node;
		var returnWidget = node;

		// if not collapsed, collapse, else move to parent
		if(node.isExpandable && node.isExpanded){
			this._collapseNode(node);
		}else{
			node = node.getParent();
		}
		if(node && node.isTreeNode){
			returnWidget = node;
		}

		if(returnWidget && returnWidget.isTreeNode){
			returnWidget.tree.focusNode(returnWidget);
			return returnWidget;
		}
	},

	_onHomeKey: function(){
		// summary: home pressed;  get first visible node, set focus there
		var returnNode = this._navToRootOrFirstNode();
		if(returnNode){
			returnNode.tree.focusNode(returnNode);
			return returnNode;
		}
	},

	_onEndKey: function(/*Object*/ message){
		// summary: end pressed;  go to last visible node

		var returnWidget = message.node.tree;

		var lastChild = returnWidget;
		while(lastChild.isExpanded){
			var c = lastChild.getChildren();
			lastChild = c[c.length - 1];
			if(lastChild.isTreeNode){
				returnWidget = lastChild;
			}
		}

		if(returnWidget && returnWidget.isTreeNode){
			returnWidget.tree.focusNode(returnWidget);
			return returnWidget;
		}
	},

	_onLetterKeyNav: function(message){
		// summary: letter key pressed;  search for node starting with first char = key
		var node = startNode = message.node;
		var key = message.key;
		do{
			node = this._navToNextNode(node);
			//check for last node, jump to first node if necessary
			if(!node){
				node = this._navToRootOrFirstNode();
			}
		}while(node !== startNode && (node.label.charAt(0).toLowerCase() != key));
		if(node && node.isTreeNode){
			// no need to set focus if back where we started
			if(node !== startNode){
				node.tree.focusNode(node);
			}
			return node;
		}
	},

	_onClick: function(/*Event*/ e){
		// summary: translates click events into commands for the controller to process
		var domElement = e.target;

		// find node
		var nodeWidget = dijit.getEnclosingWidget(domElement);	 
		if(!nodeWidget || !nodeWidget.isTreeNode){
			return;
		}

		if(domElement == nodeWidget.expandoNode ||
			 domElement == nodeWidget.expandoNodeText){
			// expando node was clicked
			if(nodeWidget.isExpandable){
				this._onExpandoClick({node:nodeWidget});
			}
		}else{
			this._publish("execute", { item: nodeWidget.item, node: nodeWidget} );
			this.onClick(nodeWidget.item, nodeWidget);
			this.focusNode(nodeWidget);
		}
		dojo.stopEvent(e);
	},

	_onExpandoClick: function(/*Object*/ message){
		// summary: user clicked the +/- icon;  expand or collapse my children.
		var node = message.node;
		if(node.isExpanded){
			this._collapseNode(node);
		}else{
			this._expandNode(node);
		}
	},

	onClick: function(/* dojo.data */ item, /*TreeNode*/ node){
		// summary: user overridable function for executing a tree item
	},

	_navToNextNode: function(node){
		// summary: get next visible node
		var returnNode;
		// if this is an expanded node, get the first child
		if(node.isExpandable && node.isExpanded && node.hasChildren()){
			returnNode = node.getChildren()[0];	 		
		}else{
			// find a parent node with a sibling
			while(node && node.isTreeNode){
				returnNode = node.getNextSibling();
				if(returnNode){
					break;
				}
				node = node.getParent();
			}	
		}
		return returnNode;
	},

	_navToRootOrFirstNode: function(){
		// summary: get first visible node
		if(!this._hideRoot){
			return this;
		}else{
			var returnNode = this.getChildren()[0];
			if(returnNode && returnNode.isTreeNode){
				return returnNode;
			}
		}
	},

	_collapseNode: function(/*_TreeNode*/ node){
		// summary: called when the user has requested to collapse the node

		if(node.isExpandable){
			if(node.state == "LOADING"){
				// ignore clicks while we are in the process of loading data
				return;
			}
			if(this.lastFocused){
				// are we collapsing a descendant with focus?
				if(dojo.isDescendant(this.lastFocused.domNode, node.domNode)){
					this.focusNode(node);
				}else{
					// clicking the expando node might have erased focus from
					// the current item;  restore it
					this.focusNode(this.lastFocused);
				}
			}
			node.collapse();
			if(this.persist && node.item){
				delete this._openedItemIds[this.store.getIdentity(node.item)];
				this._saveState();
			}
		}
	},

	_expandNode: function(/*_TreeNode*/ node){
		// summary: called when the user has requested to expand the node

		// clicking the expando node might have erased focus from the current item;  restore it
		var t = node.tree;
		if(t.lastFocused){ t.focusNode(t.lastFocused);  }

		if(!node.isExpandable){
			return;
		}

		var store = this.store;
		var getValue = this.store.getValue;

		switch(node.state){
			case "LOADING":
				// ignore clicks while we are in the process of loading data
				return;

			case "UNCHECKED":
				// need to load all the children, and then expand
				node.markProcessing();
				var _this = this;
				var onComplete = function(childItems){
					node.unmarkProcessing();
					_this._onLoadAllItems(node, childItems);
				};
				this.getItemChildren(node.item, onComplete);
				break;

			default:
				// data is already loaded;  just proceed
				if(node.expand){	// top level Tree doesn't have expand() method
					node.expand();
					if(this.persist && node.item){
						this._openedItemIds[this.store.getIdentity(node.item)] = true;
						this._saveState();
					}
				}
				break;
		}
	},

	////////////////// Miscellaneous functions ////////////////

	blurNode: function(){
		// summary
		//	Removes focus from the currently focused node (which must be visible).
		//	Usually not called directly (just call focusNode() on another node instead)
		var node = this.lastFocused;
		if(!node){ return;  }
		var labelNode = node.labelNode;
		dojo.removeClass(labelNode, "dijitTreeLabelFocused");
		labelNode.setAttribute("tabIndex", "-1");
		this.lastFocused = null;
	},

	focusNode: function(/* _tree.Node */ node){
		// summary
		//	Focus on the specified node (which must be visible)

		// set focus so that the label will be voiced using screen readers
		node.labelNode.focus();
	},

	_onBlur: function(){
		// summary:
		// 		We've moved away from the whole tree.  The currently "focused" node
		//		(see focusNode above) should remain as the lastFocused node so we can
		//		tab back into the tree.  Just change CSS to get rid of the dotted border
		//		until that time
		if(this.lastFocused){
			var labelNode = this.lastFocused.labelNode;
			dojo.removeClass(labelNode, "dijitTreeLabelFocused");	 
		}
	},

	_onTreeFocus: function(evt){
		var node = dijit.getEnclosingWidget(evt.target);
		if(node != this.lastFocused){
			this.blurNode();
		}
		var labelNode = node.labelNode;
		// set tabIndex so that the tab key can find this node
		labelNode.setAttribute("tabIndex", "0");
		dojo.addClass(labelNode, "dijitTreeLabelFocused");
		this.lastFocused = node;
	},

	//////////////// Events from data store //////////////////////////


	_onNewItem: function(/*Object*/ item, parentInfo){
		//summary: callback when new item has been added to the store.

		var loadNewItem;	 // should new item be displayed in tree?

		if(parentInfo){
			var parent = this._itemNodeMap[this.getItemParentIdentity(item, parentInfo)];
			
			// If new item's parent item not in tree view yet, can safely ignore.
			// Also, if a query of specified parent wouldn't return this item, then ignore.
			if(!parent ||
				dojo.indexOf(this.childrenAttr, parentInfo.attribute) == -1){
				return;
			}
		}

		var childParams = {
			item: item,
			isExpandable: this.mayHaveChildren(item)
		};
		if(parent){
			if(!parent.isExpandable){
				parent.makeExpandable();
			}
			if(parent.state=="LOADED" || parent.isExpanded){
				var childrenMap=parent._addChildren([childParams]);
			}
		}else{
			// top level node
			var childrenMap=this._addChildren([childParams]);	 	
		}

		if(childrenMap){
			dojo.mixin(this._itemNodeMap, childrenMap);
			//this._itemNodeMap[this.store.getIdentity(item)]=child;
		}
	},
	
	_onDeleteItem: function(/*Object*/ item){
		//summary: delete event from the store
		//since the object has just been deleted, we need to
		//use the name directly
		var identity = this.store.getIdentity(item);
		var node = this._itemNodeMap[identity];

		if(node){
			var parent = node.getParent();
			parent.deleteNode(node);
			this._itemNodeMap[identity]=null;
		}
	},

	_onSetItem: function(/*Object*/ item){
		//summary: set data event  on an item in the store
		var identity = this.store.getIdentity(item);
		node = this._itemNodeMap[identity];

		if(node){
			node.setLabelNode(this.getLabel(item));
			node._updateItemClasses(item);
		}
	},
	
	_saveState: function(){
		//summary: create and save a cookie with the currently expanded nodes identifiers
		if(!this.persist){
			return;
		}
		var ary = [];
		for(var id in this._openedItemIds){
			ary.push(id);
		}
		dojo.cookie(this.cookieName, ary.join(","));
	}
});

}

if(!dojo._hasResource["dijit.form.TextBox"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.TextBox"] = true;
dojo.provide("dijit.form.TextBox");



dojo.declare(
	"dijit.form.TextBox",
	dijit.form._FormWidget,
	{
		// summary:
		//		A generic textbox field.
		//		Serves as a base class to derive more specialized functionality in subclasses.

		//	trim: Boolean
		//		Removes leading and trailing whitespace if true.  Default is false.
		trim: false,

		//	uppercase: Boolean
		//		Converts all characters to uppercase if true.  Default is false.
		uppercase: false,

		//	lowercase: Boolean
		//		Converts all characters to lowercase if true.  Default is false.
		lowercase: false,

		//	propercase: Boolean
		//		Converts the first character of each word to uppercase if true.
		propercase: false,

		// maxLength: String
		//		HTML INPUT tag maxLength declaration.
		maxLength: "",

		templateString:"<input class=\"dojoTextBox\" dojoAttachPoint='textbox,focusNode' name=\"${name}\"\n\tdojoAttachEvent='onmouseenter:_onMouse,onmouseleave:_onMouse,onfocus:_onMouse,onblur:_onMouse,onkeyup,onkeypress:_onKeyPress'\n\tautocomplete=\"off\" type=\"${type}\"\n\t/>\n",
		baseClass: "dijitTextBox",

		attributeMap: dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),
			{maxLength:"focusNode"}),

		getDisplayedValue: function(){
			return this.filter(this.textbox.value);
		},

		getValue: function(){
			return this.parse(this.getDisplayedValue(), this.constraints);
		},

		setValue: function(value, /*Boolean, optional*/ priorityChange, /*String, optional*/ formattedValue){
			var filteredValue = this.filter(value);
			if((typeof filteredValue == typeof value) && (formattedValue == null || formattedValue == undefined)){
				formattedValue = this.format(filteredValue, this.constraints);
			}
			if(formattedValue != null && formattedValue != undefined){
				this.textbox.value = formattedValue;
			}
			dijit.form.TextBox.superclass.setValue.call(this, filteredValue, priorityChange);
		},

		setDisplayedValue: function(/*String*/value){
			this.textbox.value = value;
			this.setValue(this.getValue(), true);
		},

		forWaiValuenow: function(){
			return this.getDisplayedValue();
		},

		format: function(/* String */ value, /* Object */ constraints){
			// summary: Replacable function to convert a value to a properly formatted string
			return ((value == null || value == undefined) ? "" : (value.toString ? value.toString() : value));
		},

		parse: function(/* String */ value, /* Object */ constraints){
			// summary: Replacable function to convert a formatted string to a value
			return value;
		},

		postCreate: function(){
			// setting the value here is needed since value="" in the template causes "undefined"
			// and setting in the DOM (instead of the JS object) helps with form reset actions
			this.textbox.setAttribute("value", this.getDisplayedValue());
			this.inherited('postCreate', arguments);

			if(this.srcNodeRef){
				dojo.style(this.textbox, "cssText", this.style);
				this.textbox.className += " " + this["class"];
			}
			this._layoutHack();
		},

		_layoutHack: function(){
			// summary: work around table sizing bugs on FF2 by forcing redraw
			if(dojo.isFF == 2 && this.domNode.tagName=="TABLE"){
				var node=this.domNode;
				var old = node.style.opacity;
				node.style.opacity = "0.999";
				setTimeout(function(){
					node.style.opacity = old;
				}, 0);
			}			
		},

		filter: function(val){
			// summary: Apply various filters to textbox value
			if(val == undefined || val == null){ return "";  }
			else if(typeof val != "string"){ return val;  }
			if(this.trim){
				val = dojo.trim(val);
			}
			if(this.uppercase){
				val = val.toUpperCase();
			}
			if(this.lowercase){
				val = val.toLowerCase();
			}
			if(this.propercase){
				val = val.replace(/[^\s]+/g, function(word){
					return word.substring(0,1).toUpperCase() + word.substring(1);
				});
			}
			return val;
		},

		// event handlers, you can over-ride these in your own subclasses
		_onBlur: function(){
			this.setValue(this.getValue(), (this.isValid ? this.isValid() : true));
		},

		onkeyup: function(){
			// TODO: it would be nice to massage the value (ie: automatic uppercase, etc) as the user types
			// but this messes up the cursor position if you are typing into the middle of a word, and
			// also trimming doesn't work correctly (it prevents spaces between words too!)
			// this.setValue(this.getValue());
		}
	}
);

}

if(!dojo._hasResource["dijit.InlineEditBox"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.InlineEditBox"] = true;
dojo.provide("dijit.InlineEditBox");










dojo.declare("dijit.InlineEditBox",
	dijit._Widget,
	{
	// summary: An element with in-line edit capabilitites
	//
	// description:
	//		Behavior for an existing node (<p>, <div>, <span>, etc.) so that
	// 		when you click it, an editor shows up in place of the original
	//		text.  Optionally, Save and Cancel button are displayed below the edit widget.
	//		When Save is clicked, the text is pulled from the edit
	//		widget and redisplayed and the edit widget is again hidden.
	//		By default a plain Textarea widget is used as the editor (or for
	//		inline values a TextBox), but you can specify an editor such as
	//		dijit.Editor (for editing HTML) or a Slider (for adjusting a number).
	//		An edit widget must support the following API to be used:
	//		String getDisplayedValue() OR String getValue()
	//		void setDisplayedValue(String) OR void setValue(String)
	//		void focus()
	//
	// editing: Boolean
	//		Is the node currently in edit mode?
	editing: false,

	// autoSave: Boolean
	//		Changing the value automatically saves it;  don't have to push save button
	//		(and save button isn't even displayed)
	autoSave: true,

	// buttonSave: String
	//		Save button label
	buttonSave: "",

	// buttonCancel: String
	//		Cancel button label
	buttonCancel: "",

	// renderAsHtml: Boolean
	//		Set this to true if the specified Editor's value should be interpreted as HTML
	//		rather than plain text (ie, dijit.Editor)
	renderAsHtml: false,

	// editor: String
	//		Class name for Editor widget
	editor: "dijit.form.TextBox",

	// editorParams: Object
	//		Set of parameters for editor, like {required: true}
	editorParams: {},

	onChange: function(value){
		// summary: User should set this handler to be notified of changes to value
	},

	// width: String
	//		Width of editor.  By default it's width=100% (ie, block mode)
	width: "100%",

	// value: String
	//		The display value of the widget in read-only mode
	value: "",

	// noValueIndicator: String
	//		The text that gets displayed when there is no value (so that the user has a place to click to edit)
	noValueIndicator: "<span style='font-family: wingdings;  text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>",

	postMixInProperties: function(){
		this.inherited('postMixInProperties', arguments);

		// save pointer to original source node, since Widget nulls-out srcNodeRef
		this.displayNode = this.srcNodeRef;

		// connect handlers to the display node
		var events = {
			ondijitclick: "_onClick",
			onmouseover: "_onMouseOver",
			onmouseout: "_onMouseOut",
			onfocus: "_onMouseOver",
			onblur: "_onMouseOut"			
		};
		for(var name in events){
			this.connect(this.displayNode, name, events[name]);
		}
		dijit.setWaiRole(this.displayNode, "button");
		if(!this.displayNode.getAttribute("tabIndex")){
			this.displayNode.setAttribute("tabIndex", 0);
		}

		if(!this.value){
			this.value = this.displayNode.innerHTML;
		}
		this._setDisplayValue(this.value);	 // if blank, change to icon for "input needed"
	},

	_onMouseOver: function(){
		dojo.addClass(this.displayNode, this.disabled ? "dijitDisabledClickableRegion" : "dijitClickableRegion");
	},

	_onMouseOut: function(){
		dojo.removeClass(this.displayNode, this.disabled ? "dijitDisabledClickableRegion" : "dijitClickableRegion");
	},

	_onClick: function(/*Event*/ e){
		if(this.disabled){ return;  }
		if(e){ dojo.stopEvent(e);  }
		this._onMouseOut();

		// Since FF gets upset if you move a node while in an event handler for that node...
		setTimeout(dojo.hitch(this, "_edit"), 0);
	},

	_edit: function(){
		// summary: display the editor widget in place of the original (read only) markup

		this.editing = true;

		var editValue = 
				(this.renderAsHtml ?
				this.value :
				this.value.replace(/\s*\r?\n\s*/g,"").replace(/<br\/?>/gi, "\n").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"));

		// Placeholder for edit widget
		// Put place holder (and eventually editWidget) before the display node so that it's positioned correctly
		// when Calendar dropdown appears, which happens automatically on focus.
		var placeholder = document.createElement("span");
		dojo.place(placeholder, this.domNode, "before");

		var ew = this.editWidget = new dijit._InlineEditor({
			value: dojo.trim(editValue),
			autoSave: this.autoSave,
			buttonSave: this.buttonSave,
			buttonCancel: this.buttonCancel,
			renderAsHtml: this.renderAsHtml,
			editor: this.editor,
			editorParams: this.editorParams,
			style: dojo.getComputedStyle(this.displayNode),
			save: dojo.hitch(this, "save"),
			cancel: dojo.hitch(this, "cancel"),
			width: this.width
		}, placeholder);

		// to avoid screen jitter, we first create the editor with position:absolute, visibility:hidden,
		// and then when it's finished rendering, we switch from display mode to editor
		var ews = ew.domNode.style;
		this.displayNode.style.display="none";
		ews.position = "static";
		ews.visibility = "visible";

		// Replace the display widget with edit widget, leaving them both displayed for a brief time so that
		// focus can be shifted without incident.  (browser may needs some time to render the editor.)
		this.domNode = ew.domNode;
		setTimeout(function(){
			ew.focus();
		}, 100);
	},

	_showText: function(/*Boolean*/ focus){
		// summary: revert to display mode, and optionally focus on display node

		// display the read-only text and then quickly hide the editor (to avoid screen jitter)
		this.displayNode.style.display="";
		var ews = this.editWidget.domNode.style;
		ews.position="absolute";
		ews.visibility="hidden";

		this.domNode = this.displayNode;

		// give the browser some time to render the display node and then shift focus to it
		// and hide the edit widget
		var _this = this;
		setTimeout(function(){
			if(focus){
				dijit.focus(_this.displayNode);
			}
			_this.editWidget.destroy();
			delete _this.editWidget;
		}, 100);
	},

	save: function(/*Boolean*/ focus){
		// summary:
		//		Save the contents of the editor and revert to display mode.
		// focus: Boolean
		//		Focus on the display mode text
		this.editing = false;

		this.value = this.editWidget.getValue() + "";
		if(this.renderAsHtml){
			this.value = this.value.replace(/&/gm, "&amp;").replace(/</gm, "&lt;").replace(/>/gm, "&gt;").replace(/"/gm, "&quot;")
				.replace("\n", "<br>");
		}
		this._setDisplayValue(this.value);

		// tell the world that we have changed
		this.onChange(this.value);

		this._showText(focus);	 
	},

	_setDisplayValue: function(/*String*/ val){
		// summary: inserts specified HTML value into this node, or an "input needed" character if node is blank
		this.displayNode.innerHTML = val || this.noValueIndicator;
	},

	cancel: function(/*Boolean*/ focus){
		// summary:
		//		Revert to display mode, discarding any changes made in the editor
		this.editing = false;
		this._showText(focus);
	}
});

dojo.declare(
	"dijit._InlineEditor",
	 [dijit._Widget, dijit._Templated],
{
	// summary:
	// 		internal widget used by InlineEditBox, displayed when in editing mode
	//		to display the editor and maybe save/cancel buttons.  Calling code should
	//		connect to save/cancel methods to detect when editing is finished
	//
	//		Has mainly the same parameters as InlineEditBox, plus these values:
	//
	// style: Object
	//		Set of CSS attributes of display node, to replicate in editor
	//
	// value: String
	//		Value as an HTML string or plain text string, depending on renderAsHTML flag

	templateString:"<fieldset dojoAttachPoint=\"editNode\" waiRole=\"presentation\" style=\"position: absolute;  visibility:hidden\" class=\"dijitReset dijitInline\"\n\tdojoAttachEvent=\"onkeypress: _onKeyPress\" \n\t><input dojoAttachPoint=\"editorPlaceholder\"\n\t/><span dojoAttachPoint=\"buttonContainer\"\n\t\t><button class='saveButton' dojoAttachPoint=\"saveButton\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:save\">${buttonSave}</button\n\t\t><button class='cancelButton' dojoAttachPoint=\"cancelButton\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:cancel\">${buttonCancel}</button\n\t></span\n></fieldset>\n",
	widgetsInTemplate: true,

	postMixInProperties: function(){
		this.inherited('postMixInProperties', arguments);
		this.messages = dojo.i18n.getLocalization("dijit", "common", this.lang);
		dojo.forEach(["buttonSave", "buttonCancel"], function(prop){
			if(!this[prop]){ this[prop] = this.messages[prop];  }
		}, this);
	},

	postCreate: function(){
		// Create edit widget in place in the template
		var cls = dojo.getObject(this.editor);
		var ew = this.editWidget = new cls(this.editorParams, this.editorPlaceholder);

		// Copy the style from the source
		// Don't copy ALL properties though, just the necessary/applicable ones
		var srcStyle = this.style;
		dojo.forEach(["fontWeight","fontFamily","fontSize","fontStyle"], function(prop){
			ew.focusNode.style[prop]=srcStyle[prop];
		}, this);
		dojo.forEach(["marginTop","marginBottom","marginLeft", "marginRight"], function(prop){
			this.domNode.style[prop]=srcStyle[prop];
		}, this);
		if(this.width=="100%"){
			// block mode
			ew.domNode.style.width = "100%";	 // because display: block doesn't work for table widgets
			this.domNode.style.display="block";
		}else{
			// inline-block mode
			ew.domNode.style.width = this.width + (Number(this.width)==this.width ? "px" : "");	 		
		}

		this.connect(this.editWidget, "onChange", "_onChange");

		// setting the value of the edit widget will cause a possibly asynchronous onChange() call.
		// we need to ignore it, since we are only interested in when the user changes the value.
		this._ignoreNextOnChange = true;
		(this.editWidget.setDisplayedValue||this.editWidget.setValue).call(this.editWidget, this.value);

		this._initialText = this.getValue();

		if(this.autoSave){
			this.buttonContainer.style.display="none";
		}
	},

	destroy: function(){
		this.editWidget.destroy();
		this.inherited(arguments);
	},

	getValue: function(){
		var ew = this.editWidget;
		return ew.getDisplayedValue ? ew.getDisplayedValue() : ew.getValue();
	},

	_onKeyPress: function(e){
		// summary: Callback when keypress in the edit box (see template).
		// description:
		//		For autoSave widgets, if Esc/Enter, call cancel/save.
		//		For non-autoSave widgets, enable save button if the text value is
		//		different than the original value.
		if(this._exitInProgress){
			return;
		}
		if(this.autoSave){
			// If Enter/Esc pressed, treat as save/cancel.
			if(e.keyCode == dojo.keys.ESCAPE){
				dojo.stopEvent(e);
				this._exitInProgress = true;
				this.cancel(true);
			}else if(e.keyCode == dojo.keys.ENTER){
				dojo.stopEvent(e);
				this._exitInProgress = true;
				this.save(true);
			}
		}else{
			var _this = this;
			// Delay before calling getValue().
			// The delay gives the browser a chance to update the Textarea.
			setTimeout(
				function(){
					_this.saveButton.setDisabled(_this.getValue() == _this._initialText);
				}, 100);
		}
	},

	_onBlur: function(){
		// summary:
		//	Called when focus moves outside the editor
		if(this._exitInProgress){
			// when user clicks the "save" button, focus is shifted back to display text, causing this
			// function to be called, but in that case don't do anything
			return;
		}
		if(this.autoSave){
			this._exitInProgress = true;
			if(this.getValue() == this._initialText){
				this.cancel(false);
			}else{
				this.save(false);
			}
		}
	},

	enableSave: function(){
		// summary: User replacable function returning a Boolean to indicate
		// 	if the Save button should be enabled or not - usually due to invalid conditions
		return this.editWidget.isValid ? this.editWidget.isValid() : true;  // Boolean
	},

	_onChange: function(){
		// summary:
		//	Called when the underlying widget fires an onChange event,
		//	which means that the user has finished entering the value
		
		if(this._ignoreNextOnChange){
			delete this._ignoreNextOnChange;
			return;
		}
		if(this._exitInProgress){
			// TODO: the onChange event might happen after the return key for an async widget
			// like FilteringSelect.  Shouldn't be deleting the edit widget on end-of-edit
			return;
		}
		if(this.autoSave){
			this._exitInProgress = true;
			this.save(true);
		}else{
			// in case the keypress event didn't get through (old problem with Textarea that has been fixed
			// in theory) or if the keypress event comes too quickly and the value inside the Textarea hasn't
			// been updated yet)
			this.saveButton.setDisabled((this.getValue() == this._initialText) || !this.enableSave());
		}
	},
	
	enableSave: function(){
		// summary: User replacable function returning a Boolean to indicate
		// 	if the Save button should be enabled or not - usually due to invalid conditions
		return this.editWidget.isValid ? this.editWidget.isValid() : true;
	},

	focus: function(){
		this.editWidget.focus();
		dijit.selectInputText(this.editWidget.focusNode);
	}
});

dijit.selectInputText = function(/*DomNode*/element){
	// summary: select all the text in an input element 

	// TODO: use functions in _editor/selection.js?
	var _window = dojo.global;
	var _document = dojo.doc;
	element = dojo.byId(element);
	if(_document["selection"] && dojo.body()["createTextRange"]){ // IE
		if(element.createTextRange){
			var range = element.createTextRange();
			range.moveStart("character", 0);
			range.moveEnd("character", element.value.length);
			range.select();
		}
	}else if(_window["getSelection"]){
		var selection = _window.getSelection();
		// FIXME: does this work on Safari?
		if(element.setSelectionRange){
			element.setSelectionRange(0, element.value.length);
		}
	}
	element.focus();
};


}

if(!dojo._hasResource["dijit.form.CheckBox"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.CheckBox"] = true;
dojo.provide("dijit.form.CheckBox");



dojo.declare(
	"dijit.form.CheckBox",
	dijit.form.ToggleButton,
	{
		// summary:
		// 		Same as an HTML checkbox, but with fancy styling.
		//
		// description:
		// User interacts with real html inputs.
		// On onclick (which occurs by mouse click, space-bar, or
		// using the arrow keys to switch the selected radio button),
		// we update the state of the checkbox/radio.
		//
		// There are two modes:
		//   1. High contrast mode
		//   2. Normal mode
		// In case 1, the regular html inputs are shown and used by the user.
		// In case 2, the regular html inputs are invisible but still used by
		// the user. They are turned quasi-invisible and overlay the background-image.

		templateString:"<fieldset class=\"dijitReset dijitInline\" waiRole=\"presentation\"\n\t><input\n\t \ttype=\"${type}\" name=\"${name}\"\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdojoAttachPoint=\"inputNode,focusNode\"\n\t \tdojoAttachEvent=\"onmouseover:_onMouse,onmouseout:_onMouse,onclick:_onClick\"\n/></fieldset>\n",

		baseClass: "dijitCheckBox",

		//	Value of "type" attribute for <input>
		type: "checkbox",

		// value: Value
		//	equivalent to value field on normal checkbox (if checked, the value is passed as
		//	the value when form is submitted)
		value: "on",

		postCreate: function(){
			dojo.setSelectable(this.inputNode, false);
			this.setChecked(this.checked);
			this.inherited(arguments);
		},

		setChecked: function(/*Boolean*/ checked){
			if(dojo.isIE){
				if(checked){ this.inputNode.setAttribute('checked', 'checked');  }
				else{ this.inputNode.removeAttribute('checked');  }
			}else{ this.inputNode.checked = checked;  }
			this.inherited(arguments);
		},

		setValue: function(/*String*/ value){
			if(value == null){ value = "";  }
			this.inputNode.value = value;
			dijit.form.CheckBox.superclass.setValue.call(this,value);
		}
	}
);

dojo.declare(
	"dijit.form.RadioButton",
	dijit.form.CheckBox,
	{
		// summary:
		// 		Same as an HTML radio, but with fancy styling.
		//
		// description:
		// Implementation details
		//
		// Specialization:
		// We keep track of dijit radio groups so that we can update the state
		// of all the siblings (the "context") in a group based on input
		// events. We don't rely on browser radio grouping.

		type: "radio",
		baseClass: "dijitRadio",

		// This shared object keeps track of all widgets, grouped by name
		_groups: {},

		postCreate: function(){
			// add this widget to _groups
			(this._groups[this.name] = this._groups[this.name] || []).push(this);

			this.inherited(arguments);
		},

		uninitialize: function(){
			// remove this widget from _groups
			dojo.forEach(this._groups[this.name], function(widget, i, arr){
				if(widget === this){
					arr.splice(i, 1);
					return;
				}
			}, this);
		},

		setChecked: function(/*Boolean*/ checked){
			// If I am being checked then have to deselect currently checked radio button
			if(checked){
				dojo.forEach(this._groups[this.name], function(widget){
					if(widget != this && widget.checked){
						widget.setChecked(false);
					}
				}, this);
			}
			this.inherited(arguments);	 		
		},

		_clicked: function(/*Event*/ e){
			if(!this.checked){
				this.setChecked(true);
			}
		}
	}
);

}

if(!dojo._hasResource["dojo.data.util.filter"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.data.util.filter"] = true;
dojo.provide("dojo.data.util.filter");

dojo.data.util.filter.patternToRegExp = function(/*String*/pattern, /*boolean?*/ ignoreCase){
	//	summary:  
	//		Helper function to convert a simple pattern to a regular expression for matching.
	//	description:
	//		Returns a regular expression object that conforms to the defined conversion rules.
	//		For example:  
	//			ca*   -> /^ca.*$/
	//			*ca*  -> /^.*ca.*$/
	//			*c\*a*  -> /^.*c\*a.*$/
	//			*c\*a?*  -> /^.*c\*a..*$/
	//			and so on.
	//
	//	pattern: string
	//		A simple matching pattern to convert that follows basic rules:
	//			* Means match anything, so ca* means match anything starting with ca
	//			? Means match single character.  So, b?b will match to bob and bab, and so on.
	//      	\ is an escape character.  So for example, \* means do not treat * as a match, but literal character *.
	//				To use a \ as a character in the string, it must be escaped.  So in the pattern it should be 
	//				represented by \\ to be treated as an ordinary \ character instead of an escape.
	//
	//	ignoreCase:
	//		An optional flag to indicate if the pattern matching should be treated as case-sensitive or not when comparing
	//		By default, it is assumed case sensitive.

	var rxp = "^";
	var c = null;
	for(var i = 0;  i < pattern.length;  i++){
		c = pattern.charAt(i);
		switch (c) {
			case '\\':
				rxp += c;
				i++;
				rxp += pattern.charAt(i);
				break;
			case '*':
				rxp += ".*";  break;
			case '?':
				rxp += ".";  break;
			case '$':
			case '^':
			case '/':
			case '+':
			case '.':
			case '|':
			case '(':
			case ')':
			case '{':
			case '}':
			case '[':
			case ']':
				rxp += "\\";  //fallthrough
			default:
				rxp += c;
		}
	}
	rxp += "$";
	if(ignoreCase){
		return new RegExp(rxp,"i");  //RegExp
	}else{
		return new RegExp(rxp);  //RegExp
	}
	
};

}

if(!dojo._hasResource["dojo.data.util.sorter"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.data.util.sorter"] = true;
dojo.provide("dojo.data.util.sorter");

dojo.data.util.sorter.basicComparator = function(	/*anything*/ a, 
													/*anything*/ b){
	//	summary:  
	//		Basic comparision function that compares if an item is greater or less than another item
	//	description:  
	//		returns 1 if a > b, -1 if a < b, 0 if equal.
	//		undefined values are treated as larger values so that they're pushed to the end of the list.

	var ret = 0;
	if(a > b || typeof a === "undefined" || a === null){
		ret = 1;
	}else if(a < b || typeof b === "undefined" || b === null){
		ret = -1;
	}
	return ret;  //int, {-1,0,1}
};

dojo.data.util.sorter.createSortFunction = function(	/* attributes array */sortSpec,
														/*dojo.data.core.Read*/ store){
	//	summary:  
	//		Helper function to generate the sorting function based off the list of sort attributes.
	//	description:  
	//		The sort function creation will look for a property on the store called 'comparatorMap'.  If it exists
	//		it will look in the mapping for comparisons function for the attributes.  If one is found, it will
	//		use it instead of the basic comparator, which is typically used for strings, ints, booleans, and dates.
	//		Returns the sorting function for this particular list of attributes and sorting directions.
	//
	//	sortSpec: array
	//		A JS object that array that defines out what attribute names to sort on and whether it should be descenting or asending.
	//		The objects should be formatted as follows:
	//		{
	//			attribute: "attributeName-string" || attribute,
	//			descending: true|false;    // Default is false.
	//		}
	//	store: object
	//		The datastore object to look up item values from.
	//
	var sortFunctions=[];    

	function createSortFunction(attr, dir){
		return function(itemA, itemB){
			var a = store.getValue(itemA, attr);
			var b = store.getValue(itemB, attr);
			//See if we have a override for an attribute comparison.
			var comparator = null;
			if(store.comparatorMap){
				if(typeof attr !== "string"){
					 attr = store.getIdentity(attr);
				}
				comparator = store.comparatorMap[attr]||dojo.data.util.sorter.basicComparator;
			}
			comparator = comparator||dojo.data.util.sorter.basicComparator;  
			return dir * comparator(a,b);  //int
		};
	}

	for(var i = 0;  i < sortSpec.length;  i++){
		sortAttribute = sortSpec[i];
		if(sortAttribute.attribute){
			var direction = (sortAttribute.descending) ? -1 : 1;
			sortFunctions.push(createSortFunction(sortAttribute.attribute, direction));
		}
	}

	return function(rowA, rowB){
		var i=0;
		while(i < sortFunctions.length){
			var ret = sortFunctions[i++](rowA, rowB);
			if(ret !== 0){
				return ret;//int
			}
		}
		return 0;  //int  
	};   //  Function
};

}

if(!dojo._hasResource["dojo.data.util.simpleFetch"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.data.util.simpleFetch"] = true;
dojo.provide("dojo.data.util.simpleFetch");


dojo.data.util.simpleFetch.fetch = function(/* Object? */ request){
	//	summary:
	//		The simpleFetch mixin is designed to serve as a set of function(s) that can
	//		be mixed into other datastore implementations to accelerate their development.  
	//		The simpleFetch mixin should work well for any datastore that can respond to a _fetchItems() 
	//		call by returning an array of all the found items that matched the query.  The simpleFetch mixin
	//		is not designed to work for datastores that respond to a fetch() call by incrementally
	//		loading items, or sequentially loading partial batches of the result
	//		set.  For datastores that mixin simpleFetch, simpleFetch 
	//		implements a fetch method that automatically handles eight of the fetch()
	//		arguments -- onBegin, onItem, onComplete, onError, start, count, sort and scope
	//		The class mixing in simpleFetch should not implement fetch(),
	//		but should instead implement a _fetchItems() method.  The _fetchItems() 
	//		method takes three arguments, the keywordArgs object that was passed 
	//		to fetch(), a callback function to be called when the result array is
	//		available, and an error callback to be called if something goes wrong.
	//		The _fetchItems() method should ignore any keywordArgs parameters for
	//		start, count, onBegin, onItem, onComplete, onError, sort, and scope.  
	//		The _fetchItems() method needs to correctly handle any other keywordArgs
	//		parameters, including the query parameter and any optional parameters 
	//		(such as includeChildren).  The _fetchItems() method should create an array of 
	//		result items and pass it to the fetchHandler along with the original request object 
	//		-- or, the _fetchItems() method may, if it wants to, create an new request object 
	//		with other specifics about the request that are specific to the datastore and pass 
	//		that as the request object to the handler.
	//
	//		For more information on this specific function, see dojo.data.api.Read.fetch()
	request = request || {};
	if(!request.store){
		request.store = this;
	}
	var self = this;

	var _errorHandler = function(errorData, requestObject){
		if(requestObject.onError){
			var scope = requestObject.scope || dojo.global;
			requestObject.onError.call(scope, errorData, requestObject);
		}
	};

	var _fetchHandler = function(items, requestObject){
		var oldAbortFunction = requestObject.abort || null;
		var aborted = false;

		var startIndex = requestObject.start?requestObject.start:0;
		var endIndex   = requestObject.count?(startIndex + requestObject.count):items.length;

		requestObject.abort = function(){
			aborted = true;
			if(oldAbortFunction){
				oldAbortFunction.call(requestObject);
			}
		};

		var scope = requestObject.scope || dojo.global;
		if(!requestObject.store){
			requestObject.store = self;
		}
		if(requestObject.onBegin){
			requestObject.onBegin.call(scope, items.length, requestObject);
		}
		if(requestObject.sort){
			items.sort(dojo.data.util.sorter.createSortFunction(requestObject.sort, self));
		}
		if(requestObject.onItem){
			for(var i = startIndex;  (i < items.length) && (i < endIndex);  ++i){
				var item = items[i];
				if(!aborted){
					requestObject.onItem.call(scope, item, requestObject);
				}
			}
		}
		if(requestObject.onComplete && !aborted){
			var subset = null;
			if (!requestObject.onItem) {
				subset = items.slice(startIndex, endIndex);
			}
			requestObject.onComplete.call(scope, subset, requestObject);    
		}
	};
	this._fetchItems(request, _fetchHandler, _errorHandler);
	return request;	 // Object
};

}

if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.data.ItemFileReadStore"] = true;
dojo.provide("dojo.data.ItemFileReadStore");





dojo.declare("dojo.data.ItemFileReadStore", null,{
	//	summary:
	//		The ItemFileReadStore implements the dojo.data.api.Read API and reads
	//		data from JSON files that have contents in this format --
	//		{ items: [
	//			{ name:'Kermit', color:'green', age:12, friends:['Gonzo', {_reference:{name:'Fozzie Bear'}}]},
	//			{ name:'Fozzie Bear', wears:['hat', 'tie']},
	//			{ name:'Miss Piggy', pets:'Foo-Foo'}
	//		]}
	//		Note that it can also contain an 'identifer' property that specified which attribute on the items 
	//		in the array of items that acts as the unique identifier for that item.
	//
	constructor: function(/* Object */ keywordParameters){
		//	summary: constructor
		//	keywordParameters: {url: String}
		//	keywordParameters: {data: jsonObject}
		//	keywordParameters: {typeMap: object)
		//		The structure of the typeMap object is as follows:
		//		{
		//			type0: function || object,
		//			type1: function || object,
		//			...
		//			typeN: function || object
		//		}
		//		Where if it is a function, it is assumed to be an object constructor that takes the 
		//		value of _value as the initialization parameters.  If it is an object, then it is assumed
		//		to be an object of general form:
		//		{
		//			type: function, //constructor.
		//			deserialize:	function(value) //The function that parses the value and constructs the object defined by type appropriately.
		//		}
	
		this._arrayOfAllItems = [];
		this._arrayOfTopLevelItems = [];
		this._loadFinished = false;
		this._jsonFileUrl = keywordParameters.url;
		this._jsonData = keywordParameters.data;
		this._datatypeMap = keywordParameters.typeMap || {};
		if(!this._datatypeMap['Date']){
			//If no default mapping for dates, then set this as default.
			//We use the dojo.date.stamp here because the ISO format is the 'dojo way'
			//of generically representing dates.
			this._datatypeMap['Date'] = {
											type: Date,
											deserialize: function(value){
												return dojo.date.stamp.fromISOString(value);
											}
										};
		}
		this._features = {'dojo.data.api.Read':true, 'dojo.data.api.Identity':true};
		this._itemsByIdentity = null;
		this._storeRefPropName = "_S";   // Default name for the store reference to attach to every item.
		this._itemNumPropName = "_0";  // Default Item Id for isItem to attach to every item.
		this._rootItemPropName = "_RI";  // Default Item Id for isItem to attach to every item.
		this._loadInProgress = false;	 //Got to track the initial load to prevent duelling loads of the dataset.
		this._queuedFetches = [];
	},
	
	url: "",	// use "" rather than undefined for the benefit of the parser (#3539)

	_assertIsItem: function(/* item */ item){
		//	summary:
		//		This function tests whether the item passed in is indeed an item in the store.
		//	item: 
		//		The item to test for being contained by the store.
		if(!this.isItem(item)){ 
			throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");
		}
	},

	_assertIsAttribute: function(/* attribute-name-string */ attribute){
		//	summary:
		//		This function tests whether the item passed in is indeed a valid 'attribute' like type for the store.
		//	attribute: 
		//		The attribute to test for being contained by the store.
		if(typeof attribute !== "string"){ 
			throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");
		}
	},

	getValue: function(	/* item */ item, 
						/* attribute-name-string */ attribute, 
						/* value? */ defaultValue){
		//	summary: 
		//		See dojo.data.api.Read.getValue()
		var values = this.getValues(item, attribute);
		return (values.length > 0)?values[0]:defaultValue;  // mixed
	},

	getValues: function(/* item */ item, 
						/* attribute-name-string */ attribute){
		//	summary: 
		//		See dojo.data.api.Read.getValues()

		this._assertIsItem(item);
		this._assertIsAttribute(attribute);
		return item[attribute] || [];  // Array
	},

	getAttributes: function(/* item */ item){
		//	summary: 
		//		See dojo.data.api.Read.getAttributes()
		this._assertIsItem(item);
		var attributes = [];
		for(var key in item){
			// Save off only the real item attributes, not the special id marks for O(1) isItem.
			if((key !== this._storeRefPropName) && (key !== this._itemNumPropName) && (key !== this._rootItemPropName)){
				attributes.push(key);
			}
		}
		return attributes;  // Array
	},

	hasAttribute: function(	/* item */ item,
							/* attribute-name-string */ attribute) {
		//	summary: 
		//		See dojo.data.api.Read.hasAttribute()
		return this.getValues(item, attribute).length > 0;
	},

	containsValue: function(/* item */ item, 
							/* attribute-name-string */ attribute, 
							/* anything */ value){
		//	summary: 
		//		See dojo.data.api.Read.containsValue()
		var regexp = undefined;
		if(typeof value === "string"){
			regexp = dojo.data.util.filter.patternToRegExp(value, false);
		}
		return this._containsValue(item, attribute, value, regexp);  //boolean.
	},

	_containsValue: function(	/* item */ item, 
								/* attribute-name-string */ attribute, 
								/* anything */ value,
								/* RegExp?*/ regexp){
		//	summary: 
		//		Internal function for looking at the values contained by the item.
		//	description: 
		//		Internal function for looking at the values contained by the item.  This 
		//		function allows for denoting if the comparison should be case sensitive for
		//		strings or not (for handling filtering cases where string case should not matter)
		//	
		//	item:
		//		The data item to examine for attribute values.
		//	attribute:
		//		The attribute to inspect.
		//	value:	
		//		The value to match.
		//	regexp:
		//		Optional regular expression generated off value if value was of string type to handle wildcarding.
		//		If present and attribute values are string, then it can be used for comparison instead of 'value'
		return dojo.some(this.getValues(item, attribute), function(possibleValue){
			if(possibleValue !== null && !dojo.isObject(possibleValue) && regexp){
				if(possibleValue.toString().match(regexp)){
					return true;  // Boolean
				}
			}else if(value === possibleValue){
				return true;  // Boolean
			}
		});
	},

	isItem: function(/* anything */ something){
		//	summary: 
		//		See dojo.data.api.Read.isItem()
		if(something && something[this._storeRefPropName] === this){
			if(this._arrayOfAllItems[something[this._itemNumPropName]] === something){
				return true;
			}
		}
		return false;  // Boolean
	},

	isItemLoaded: function(/* anything */ something){
		//	summary: 
		//		See dojo.data.api.Read.isItemLoaded()
		return this.isItem(something);  //boolean
	},

	loadItem: function(/* object */ keywordArgs){
		//	summary: 
		//		See dojo.data.api.Read.loadItem()
		this._assertIsItem(keywordArgs.item);
	},

	getFeatures: function(){
		//	summary: 
		//		See dojo.data.api.Read.getFeatures()
		return this._features;  //Object
	},

	getLabel: function(/* item */ item){
		//	summary: 
		//		See dojo.data.api.Read.getLabel()
		if(this._labelAttr && this.isItem(item)){
			return this.getValue(item,this._labelAttr);  //String
		}
		return undefined;  //undefined
	},

	getLabelAttributes: function(/* item */ item){
		//	summary: 
		//		See dojo.data.api.Read.getLabelAttributes()
		if(this._labelAttr){
			return [this._labelAttr];  //array
		}
		return null;  //null
	},

	_fetchItems: function(	/* Object */ keywordArgs, 
							/* Function */ findCallback, 
							/* Function */ errorCallback){
		//	summary: 
		//		See dojo.data.util.simpleFetch.fetch()
		var self = this;
		var filter = function(requestArgs, arrayOfItems){
			var items = [];
			if(requestArgs.query){
				var ignoreCase = requestArgs.queryOptions ? requestArgs.queryOptions.ignoreCase : false;  

				//See if there are any string values that can be regexp parsed first to avoid multiple regexp gens on the
				//same value for each item examined.  Much more efficient.
				var regexpList = {};
				for(var key in requestArgs.query){
					var value = requestArgs.query[key];
					if(typeof value === "string"){
						regexpList[key] = dojo.data.util.filter.patternToRegExp(value, ignoreCase);
					}
				}

				for(var i = 0;  i < arrayOfItems.length;  ++i){
					var match = true;
					var candidateItem = arrayOfItems[i];
					if(candidateItem === null){
						match = false;
					}else{
						for(var key in requestArgs.query) {
							var value = requestArgs.query[key];
							if (!self._containsValue(candidateItem, key, value, regexpList[key])){
								match = false;
							}
						}
					}
					if(match){
						items.push(candidateItem);
					}
				}
				findCallback(items, requestArgs);
			}else{
				// We want a copy to pass back in case the parent wishes to sort the array. 
				// We shouldn't allow resort of the internal list, so that multiple callers 
				// can get lists and sort without affecting each other.  We also need to
				// filter out any null values that have been left as a result of deleteItem()
				// calls in ItemFileWriteStore.
				for(var i = 0;  i < arrayOfItems.length;  ++i){
					var item = arrayOfItems[i];
					if(item !== null){
						items.push(item);
					}
				}
				findCallback(items, requestArgs);
			}
		};

		if(this._loadFinished){
			filter(keywordArgs, this._getItemsArray(keywordArgs.queryOptions));
		}else{

			if(this._jsonFileUrl){
				//If fetches come in before the loading has finished, but while
				//a load is in progress, we have to defer the fetching to be 
				//invoked in the callback.
				if(this._loadInProgress){
					this._queuedFetches.push({args: keywordArgs, filter: filter});
				}else{
					this._loadInProgress = true;
					var getArgs = {
							url: self._jsonFileUrl, 
							handleAs: "json-comment-optional"
						};
					var getHandler = dojo.xhrGet(getArgs);
					getHandler.addCallback(function(data){
						try{
							self._getItemsFromLoadedData(data);
							self._loadFinished = true;
							self._loadInProgress = false;
							
							filter(keywordArgs, self._getItemsArray(keywordArgs.queryOptions));
							self._handleQueuedFetches();
						}catch(e){
							self._loadFinished = true;
							self._loadInProgress = false;
							errorCallback(e, keywordArgs);
						}
					});
					getHandler.addErrback(function(error){
						self._loadInProgress = false;
						errorCallback(error, keywordArgs);
					});
				}
			}else if(this._jsonData){
				try{
					this._loadFinished = true;
					this._getItemsFromLoadedData(this._jsonData);
					this._jsonData = null;
					filter(keywordArgs, this._getItemsArray(keywordArgs.queryOptions));
				}catch(e){
					errorCallback(e, keywordArgs);
				}
			}else{
				errorCallback(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."), keywordArgs);
			}
		}
	},

	_handleQueuedFetches: function(){
		//	summary: 
		//		Internal function to execute delayed request in the store.
		//Execute any deferred fetches now.
		if (this._queuedFetches.length > 0) {
			for(var i = 0;  i < this._queuedFetches.length;  i++){
				var fData = this._queuedFetches[i];
				var delayedQuery = fData.args;
				var delayedFilter = fData.filter;
				if(delayedFilter){
					delayedFilter(delayedQuery, this._getItemsArray(delayedQuery.queryOptions));  
				}else{
					this.fetchItemByIdentity(delayedQuery);
				}
			}
			this._queuedFetches = [];
		}
	},

	_getItemsArray: function(/*object?*/queryOptions){
		//	summary: 
		//		Internal function to determine which list of items to search over.
		//	queryOptions: The query options parameter, if any.
		if(queryOptions && queryOptions.deep) {
			return this._arrayOfAllItems;  
		}
		return this._arrayOfTopLevelItems;
	},

	close: function(/*dojo.data.api.Request || keywordArgs || null */ request){
		 //	summary: 
		 //		See dojo.data.api.Read.close()
	},

	_getItemsFromLoadedData: function(/* Object */ dataObject){
		//	summary:
		//		Function to parse the loaded data into item format and build the internal items array.
		//	description:
		//		Function to parse the loaded data into item format and build the internal items array.
		//
		//	dataObject:
		//		The JS data object containing the raw data to convery into item format.
		//
		// 	returns: array
		//		Array of items in store item format.
		
		// First, we define a couple little utility functions...
		
		function valueIsAnItem(/* anything */ aValue){
			// summary:
			//		Given any sort of value that could be in the raw json data,
			//		return true if we should interpret the value as being an
			//		item itself, rather than a literal value or a reference.
			// example:
			// 	|	false == valueIsAnItem("Kermit");
			// 	|	false == valueIsAnItem(42);
			// 	|	false == valueIsAnItem(new Date());
			// 	|	false == valueIsAnItem({_type:'Date', _value:'May 14, 1802'});
			// 	|	false == valueIsAnItem({_reference:'Kermit'});
			// 	|	true == valueIsAnItem({name:'Kermit', color:'green'});
			// 	|	true == valueIsAnItem({iggy:'pop'});
			// 	|	true == valueIsAnItem({foo:42});
			var isItem = (
				(aValue != null) &&
				(typeof aValue == "object") &&
				(!dojo.isArray(aValue)) &&
				(!dojo.isFunction(aValue)) &&
				(aValue.constructor == Object) &&
				(typeof aValue._reference == "undefined") && 
				(typeof aValue._type == "undefined") && 
				(typeof aValue._value == "undefined")
			);
			return isItem;
		}
		
		var self = this;
		function addItemAndSubItemsToArrayOfAllItems(/* Item */ anItem){
			self._arrayOfAllItems.push(anItem);
			for(var attribute in anItem){
				var valueForAttribute = anItem[attribute];
				if(valueForAttribute){
					if(dojo.isArray(valueForAttribute)){
						var valueArray = valueForAttribute;
						for(var k = 0;  k < valueArray.length;  ++k){
							var singleValue = valueArray[k];
							if(valueIsAnItem(singleValue)){
								addItemAndSubItemsToArrayOfAllItems(singleValue);
							}
						}
					}else{
						if(valueIsAnItem(valueForAttribute)){
							addItemAndSubItemsToArrayOfAllItems(valueForAttribute);
						}
					}
				}
			}
		}

		this._labelAttr = dataObject.label;

		// We need to do some transformations to convert the data structure
		// that we read from the file into a format that will be convenient
		// to work with in memory.

		// Step 1: Walk through the object hierarchy and build a list of all items
		var i;
		var item;
		this._arrayOfAllItems = [];
		this._arrayOfTopLevelItems = dataObject.items;

		for(i = 0;  i < this._arrayOfTopLevelItems.length;  ++i){
			item = this._arrayOfTopLevelItems[i];
			addItemAndSubItemsToArrayOfAllItems(item);
			item[this._rootItemPropName]=true;
		}

		// Step 2: Walk through all the attribute values of all the items, 
		// and replace single values with arrays.  For example, we change this:
		//		{ name:'Miss Piggy', pets:'Foo-Foo'}
		// into this:
		//		{ name:['Miss Piggy'], pets:['Foo-Foo']}
		// 
		// We also store the attribute names so we can validate our store  
		// reference and item id special properties for the O(1) isItem
		var allAttributeNames = {};
		var key;

		for(i = 0;  i < this._arrayOfAllItems.length;  ++i){
			item = this._arrayOfAllItems[i];
			for(key in item){
				if (key !== this._rootItemPropName)
				{
					var value = item[key];
					if(value !== null){
						if(!dojo.isArray(value)){
							item[key] = [value];
						}
					}else{
						item[key] = [null];
					}
				}
				allAttributeNames[key]=key;
			}
		}

		// Step 3: Build unique property names to use for the _storeRefPropName and _itemNumPropName
		// This should go really fast, it will generally never even run the loop.
		while(allAttributeNames[this._storeRefPropName]){
			this._storeRefPropName += "_";
		}
		while(allAttributeNames[this._itemNumPropName]){
			this._itemNumPropName += "_";
		}

		// Step 4: Some data files specify an optional 'identifier', which is 
		// the name of an attribute that holds the identity of each item. 
		// If this data file specified an identifier attribute, then build a 
		// hash table of items keyed by the identity of the items.
		var arrayOfValues;

		var identifier = dataObject.identifier;
		if(identifier){
			this._itemsByIdentity = {};
			this._features['dojo.data.api.Identity'] = identifier;
			for(i = 0;  i < this._arrayOfAllItems.length;  ++i){
				item = this._arrayOfAllItems[i];
				arrayOfValues = item[identifier];
				var identity = arrayOfValues[0];
				if(!this._itemsByIdentity[identity]){
					this._itemsByIdentity[identity] = item;
				}else{
					if(this._jsonFileUrl){
						throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: [" + this._jsonFileUrl + "] is malformed.  Items within the list have identifier: [" + identifier + "].  Value collided: [" + identity + "]");
					}else if(this._jsonData){
						throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: [" + identifier + "].  Value collided: [" + identity + "]");
					}
				}
			}
		}else{
			this._features['dojo.data.api.Identity'] = Number;
		}

		// Step 5: Walk through all the items, and set each item's properties 
		// for _storeRefPropName and _itemNumPropName, so that store.isItem() will return true.
		for(i = 0;  i < this._arrayOfAllItems.length;  ++i){
			item = this._arrayOfAllItems[i];
			item[this._storeRefPropName] = this;
			item[this._itemNumPropName] = i;
		}

		// Step 6: We walk through all the attribute values of all the items,
		// looking for type/value literals and item-references.
		//
		// We replace item-references with pointers to items.  For example, we change:
		//		{ name:['Kermit'], friends:[{_reference:{name:'Miss Piggy'}}] }
		// into this:
		//		{ name:['Kermit'], friends:[miss_piggy] } 
		// (where miss_piggy is the object representing the 'Miss Piggy' item).
		//
		// We replace type/value pairs with typed-literals.  For example, we change:
		//		{ name:['Nelson Mandela'], born:[{_type:'Date', _value:'July 18, 1918'}] }
		// into this:
		//		{ name:['Kermit'], born:(new Date('July 18, 1918')) } 
		//
		// We also generate the associate map for all items for the O(1) isItem function.
		for(i = 0;  i < this._arrayOfAllItems.length;  ++i){
			item = this._arrayOfAllItems[i];  // example: { name:['Kermit'], friends:[{_reference:{name:'Miss Piggy'}}] }
			for(key in item){
				arrayOfValues = item[key];  // example: [{_reference:{name:'Miss Piggy'}}]
				for(var j = 0;  j < arrayOfValues.length;  ++j) {
					value = arrayOfValues[j];  // example: {_reference:{name:'Miss Piggy'}}
					if(value !== null && typeof value == "object"){
						if(value._type && value._value){
							var type = value._type;  // examples: 'Date', 'Color', or 'ComplexNumber'
							var mappingObj = this._datatypeMap[type];  // examples: Date, dojo.Color, foo.math.ComplexNumber, {type: dojo.Color, deserialize(value){ return new dojo.Color(value)}}
							if(!mappingObj){ 
								throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '" + type + "'");
							}else if(dojo.isFunction(mappingObj)){
								arrayOfValues[j] = new mappingObj(value._value);
							}else if(dojo.isFunction(mappingObj.deserialize)){
								arrayOfValues[j] = mappingObj.deserialize(value._value);
							}else{
								throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");
							}
						}
						if(value._reference){
							var referenceDescription = value._reference;  // example: {name:'Miss Piggy'}
							if(dojo.isString(referenceDescription)){
								// example: 'Miss Piggy'
								// from an item like: { name:['Kermit'], friends:[{_reference:'Miss Piggy'}]}
								arrayOfValues[j] = this._itemsByIdentity[referenceDescription];
							}else{
								// example: {name:'Miss Piggy'}
								// from an item like: { name:['Kermit'], friends:[{_reference:{name:'Miss Piggy'}}] }
								for(var k = 0;  k < this._arrayOfAllItems.length;  ++k){
									var candidateItem = this._arrayOfAllItems[k];
									var found = true;
									for(var refKey in referenceDescription){
										if(candidateItem[refKey] != referenceDescription[refKey]){ 
											found = false;  
										}
									}
									if(found){ 
										arrayOfValues[j] = candidateItem;  
									}
								}
							}
						}
					}
				}
			}
		}
	},

	getIdentity: function(/* item */ item){
		//	summary: 
		//		See dojo.data.api.Identity.getIdentity()
		var identifier = this._features['dojo.data.api.Identity'];
		if(identifier === Number){
			return item[this._itemNumPropName];  // Number
		}else{
			var arrayOfValues = item[identifier];
			if(arrayOfValues){
				return arrayOfValues[0];  // Object || String
			}
		}
		return null;  // null
	},

	fetchItemByIdentity: function(/* Object */ keywordArgs){
		//	summary: 
		//		See dojo.data.api.Identity.fetchItemByIdentity()

		// Hasn't loaded yet, we have to trigger the load.
		if(!this._loadFinished){
			var self = this;
			if(this._jsonFileUrl){

				if(this._loadInProgress){
					this._queuedFetches.push({args: keywordArgs});
				}else{
					this._loadInProgress = true;
					var getArgs = {
							url: self._jsonFileUrl, 
							handleAs: "json-comment-optional"
					};
					var getHandler = dojo.xhrGet(getArgs);
					getHandler.addCallback(function(data){
						var scope =  keywordArgs.scope?keywordArgs.scope:dojo.global;
						try{
							self._getItemsFromLoadedData(data);
							self._loadFinished = true;
							self._loadInProgress = false;
							var item = self._getItemByIdentity(keywordArgs.identity);
							if(keywordArgs.onItem){
								keywordArgs.onItem.call(scope, item);
							}
							self._handleQueuedFetches();
						}catch(error){
							self._loadInProgress = false;
							if(keywordArgs.onError){
								keywordArgs.onError.call(scope, error);
							}
						}
					});
					getHandler.addErrback(function(error){
						self._loadInProgress = false;
						if(keywordArgs.onError){
							var scope =  keywordArgs.scope?keywordArgs.scope:dojo.global;
							keywordArgs.onError.call(scope, error);
						}
					});
				}

			}else if(this._jsonData){
				// Passed in data, no need to xhr.
				self._getItemsFromLoadedData(self._jsonData);
				self._jsonData = null;
				self._loadFinished = true;
				var item = self._getItemByIdentity(keywordArgs.identity);
				if(keywordArgs.onItem){
					var scope =  keywordArgs.scope?keywordArgs.scope:dojo.global;
					keywordArgs.onItem.call(scope, item);
				}
			} 
		}else{
			// Already loaded.  We can just look it up and call back.
			var item = this._getItemByIdentity(keywordArgs.identity);
			if(keywordArgs.onItem){
				var scope =  keywordArgs.scope?keywordArgs.scope:dojo.global;
				keywordArgs.onItem.call(scope, item);
			}
		}
	},

	_getItemByIdentity: function(/* Object */ identity){
		//	summary:
		//		Internal function to look an item up by its identity map.
		var item = null;
		if(this._itemsByIdentity){
			item = this._itemsByIdentity[identity];
		}else{
			item = this._arrayOfAllItems[identity];
		}
		if(item === undefined){
			item = null;
		}
		return item;  // Object
	},

	getIdentityAttributes: function(/* item */ item){
		//	summary: 
		//		See dojo.data.api.Identity.getIdentifierAttributes()
		 
		var identifier = this._features['dojo.data.api.Identity'];
		if(identifier === Number){
			// If (identifier === Number) it means getIdentity() just returns
			// an integer item-number for each item.  The dojo.data.api.Identity
			// spec says we need to return null if the identity is not composed 
			// of attributes 
			return null;  // null
		}else{
			return [identifier];  // Array
		}
	},
	
	_forceLoad: function(){
		//	summary: 
		//		Internal function to force a load of the store if it hasn't occurred yet.  This is required
		//		for specific functions to work properly.  
		var self = this;
		if(this._jsonFileUrl){
				var getArgs = {
					url: self._jsonFileUrl, 
					handleAs: "json-comment-optional",
					sync: true
				};
			var getHandler = dojo.xhrGet(getArgs);
			getHandler.addCallback(function(data){
				try{
					//Check to be sure there wasn't another load going on concurrently 
					//So we don't clobber data that comes in on it.  If there is a load going on
					//then do not save this data.  It will potentially clobber current data.
					//We mainly wanted to sync/wait here.
					//TODO:  Revisit the loading scheme of this store to improve multi-initial
					//request handling.
					if (self._loadInProgress !== true && !self._loadFinished) {
						self._getItemsFromLoadedData(data);
						self._loadFinished = true;
					}
				}catch(e){
					console.log(e);
					throw e;
				}
			});
			getHandler.addErrback(function(error){
				throw error;
			});
		}else if(this._jsonData){
			self._getItemsFromLoadedData(self._jsonData);
			self._jsonData = null;
			self._loadFinished = true;
		} 
	}
});
//Mix in the simple fetch implementation to this class.
dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch);

}

if(!dojo._hasResource["dijit.form.ValidationTextBox"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.ValidationTextBox"] = true;
dojo.provide("dijit.form.ValidationTextBox");








dojo.declare(
	"dijit.form.ValidationTextBox",
	dijit.form.TextBox,
	{
		// summary:
		//		A subclass of TextBox.
		//		Over-ride isValid in subclasses to perform specific kinds of validation.

		templateString:"<table style=\"display: -moz-inline-stack;\" class=\"dijit dijitReset dijitInlineTable\" cellspacing=\"0\" cellpadding=\"0\"\n\tid=\"widget_${id}\" name=\"${name}\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse\" waiRole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitInputField\" width=\"100%\"\n\t\t\t><input dojoAttachPoint='textbox,focusNode' dojoAttachEvent='onfocus,onblur:_onMouse,onkeyup,onkeypress:_onKeyPress' autocomplete=\"off\"\n\t\t\ttype='${type}' name='${name}'\n\t\t/></td\n\t\t><td class=\"dijitReset dijitValidationIconField\" width=\"0%\"\n\t\t\t><div dojoAttachPoint='iconNode' class='dijitValidationIcon'></div><div class='dijitValidationIconText'>&Chi;</div\n\t\t></td\n\t></tr\n></table>\n",
		baseClass: "dijitTextBox",

		// default values for new subclass properties
		// required: Boolean
		//		Can be true or false, default is false.
		required: false,
		// promptMessage: String
		//		Hint string
		promptMessage: "",
		// invalidMessage: String
		// 		The message to display if value is invalid.
		invalidMessage: "$_unset_$", // read from the message file if not overridden
		// constraints: Object
		//		user-defined object needed to pass parameters to the validator functions
		constraints: {},
		// regExp: String
		//		regular expression string used to validate the input
		//		Do not specify both regExp and regExpGen
		regExp: ".*",
		// regExpGen: Function
		//		user replaceable function used to generate regExp when dependent on constraints
		//		Do not specify both regExp and regExpGen
		regExpGen: function(constraints){ return this.regExp;  },
		
		// state: String
		//		Shows current state (ie, validation result) of input (Normal, Warning, or Error)
		state: "",

		setValue: function(){
			this.inherited('setValue', arguments);
			this.validate(false);
		},

		validator: function(value,constraints){
			// summary: user replaceable function used to validate the text input against the regular expression.
			return (new RegExp("^(" + this.regExpGen(constraints) + ")"+(this.required?"":"?")+"$")).test(value) &&
				(!this.required || !this._isEmpty(value)) &&
				(this._isEmpty(value) || this.parse(value, constraints) !== null);
		},

		isValid: function(/* Boolean*/ isFocused){
			// summary: Need to over-ride with your own validation code in subclasses
			return this.validator(this.textbox.value, this.constraints);
		},

		_isEmpty: function(value){
			// summary: Checks for whitespace
			return /^\s*$/.test(value);  // Boolean
		},

		getErrorMessage: function(/* Boolean*/ isFocused){
			// summary: return an error message to show if appropriate
			return this.invalidMessage;
		},

		getPromptMessage: function(/* Boolean*/ isFocused){
			// summary: return a hint to show if appropriate
			return this.promptMessage;
		},

		validate: function(/* Boolean*/ isFocused){
			// summary:
			//		Called by oninit, onblur, and onkeypress.
			// description:
			//		Show missing or invalid messages if appropriate, and highlight textbox field.
			var message = "";
			var isValid = this.isValid(isFocused);
			var isEmpty = this._isEmpty(this.textbox.value);
			this.state = (isValid || (!this._hasBeenBlurred && isEmpty)) ? "" : "Error";
			this._setStateClass();
			dijit.setWaiState(this.focusNode, "invalid", (isValid? "false" : "true"));
			if(isFocused){
				if(isEmpty){
					message = this.getPromptMessage(true);
				}
				if(!message && !isValid){
					message = this.getErrorMessage(true);
				}
			}
			this._displayMessage(message);
		},

		// currently displayed message
		_message: "",

		_displayMessage: function(/*String*/ message){
			if(this._message == message){ return;  }
			this._message = message;
			this.displayMessage(message);
		},

		displayMessage: function(/*String*/ message){
			// summary:
			//		User overridable method to display validation errors/hints.
			//		By default uses a tooltip.
			if(message){
				dijit.showTooltip(message, this.domNode);
			}else{
				dijit.hideTooltip(this.domNode);
			}
		},

		_hasBeenBlurred: false,

		_onBlur: function(evt){
			this._hasBeenBlurred = true;
			this.validate(false);
			this.inherited('_onBlur', arguments);
		},

		onfocus: function(evt){
			// TODO: change to _onFocus?
			this.validate(true);
			this._onMouse(evt);	 // update CSS classes
		},

		onkeyup: function(evt){
			this.onfocus(evt);
		},

		//////////// INITIALIZATION METHODS ///////////////////////////////////////
		constructor: function(){
			this.constraints = {};
		},

		postMixInProperties: function(){
			this.inherited('postMixInProperties', arguments);
			this.constraints.locale=this.lang;
			this.messages = dojo.i18n.getLocalization("dijit.form", "validate", this.lang);
			if(this.invalidMessage == "$_unset_$"){ this.invalidMessage = this.messages.invalidMessage;  }
			var p = this.regExpGen(this.constraints);
			this.regExp = p;
			// make value a string for all types so that form reset works well
		}
	}
);

dojo.declare(
	"dijit.form.MappedTextBox",
	dijit.form.ValidationTextBox,
	{
		// summary:
		//		A subclass of ValidationTextBox.
		//		Provides a hidden input field and a serialize method to override

		serialize: function(val, /*Object?*/options){
			// summary: user replaceable function used to convert the getValue() result to a String
			return (val.toString ? val.toString() : "");
		},

		toString: function(){
			// summary: display the widget as a printable string using the widget's value
			var val = this.filter(this.getValue());
			return (val!=null) ? ((typeof val == "string") ? val : this.serialize(val, this.constraints)) : "";
		},

		validate: function(){
			this.valueNode.value = this.toString();
			this.inherited('validate', arguments);
		},

		postCreate: function(){
			var textbox = this.textbox;
			var valueNode = (this.valueNode = document.createElement("input"));
			valueNode.setAttribute("type", textbox.type);
			valueNode.setAttribute("value", this.toString());
			dojo.style(valueNode, "display", "none");
			valueNode.name = this.textbox.name;
			this.textbox.name = "_" + this.textbox.name + "_displayed_";
			this.textbox.removeAttribute("name");
			dojo.place(valueNode, textbox, "after");

			this.inherited('postCreate', arguments);
		}
	}
);

dojo.declare(
	"dijit.form.RangeBoundTextBox",
	dijit.form.MappedTextBox,
	{
		// summary:
		//		A subclass of MappedTextBox.
		//		Tests for a value out-of-range
		/*===== contraints object:
		// min: Number
		//		Minimum signed value.  Default is -Infinity
		min: undefined,
		// max: Number
		//		Maximum signed value.  Default is +Infinity
		max: undefined,
		=====*/

		// rangeMessage: String
		//		The message to display if value is out-of-range
		rangeMessage: "",

		compare: function(val1, val2){
			// summary: compare 2 values
			return val1 - val2;
		},

		rangeCheck: function(/* Number */ primitive, /* Object */ constraints){
			// summary: user replaceable function used to validate the range of the numeric input value
			var isMin = (typeof constraints.min != "undefined");
			var isMax = (typeof constraints.max != "undefined");
			if(isMin || isMax){
				return (!isMin || this.compare(primitive,constraints.min) >= 0) &&
					(!isMax || this.compare(primitive,constraints.max) <= 0);
			}else{ return true;  }
		},

		isInRange: function(/* Boolean*/ isFocused){
			// summary: Need to over-ride with your own validation code in subclasses
			return this.rangeCheck(this.getValue(), this.constraints);
		},

		isValid: function(/* Boolean*/ isFocused){
			return this.inherited('isValid', arguments) &&
				((this._isEmpty(this.textbox.value) && !this.required) || this.isInRange(isFocused));
		},

		getErrorMessage: function(/* Boolean*/ isFocused){
			if(dijit.form.RangeBoundTextBox.superclass.isValid.call(this, false) && !this.isInRange(isFocused)){ return this.rangeMessage;  }
			else{ return this.inherited('getErrorMessage', arguments);  }
		},

		postMixInProperties: function(){
			this.inherited('postMixInProperties', arguments);
			if(!this.rangeMessage){
				this.messages = dojo.i18n.getLocalization("dijit.form", "validate", this.lang);
				this.rangeMessage = this.messages.rangeMessage;
			}
		},

		postCreate: function(){
			this.inherited('postCreate', arguments);
			if(typeof this.constraints.min != "undefined"){
				dijit.setWaiState(this.focusNode, "valuemin", this.constraints.min);
			}
			if(typeof this.constraints.max != "undefined"){
				dijit.setWaiState(this.focusNode, "valuemax", this.constraints.max);
			}
		}
	}
);

}

if(!dojo._hasResource["dijit.form.ComboBox"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.ComboBox"] = true;
dojo.provide("dijit.form.ComboBox");





dojo.declare(
	"dijit.form.ComboBoxMixin",
	null,
	{
		// summary:
		//		Auto-completing text box, and base class for FilteringSelect widget.
		//
		//		The drop down box's values are populated from an class called
		//		a data provider, which returns a list of values based on the characters
		//		that the user has typed into the input box.
		//
		//		Some of the options to the ComboBox are actually arguments to the data
		//		provider.
		//
		//		You can assume that all the form widgets (and thus anything that mixes
		//		in ComboBoxMixin) will inherit from _FormWidget and thus the "this"
		//		reference will also "be a" _FormWidget.

		// item: Object
		//		This is the item returned by the dojo.data.store implementation that
		//		provides the data for this cobobox, it's the currently selected item.
		item: null,

		// pageSize: Integer
		//		Argument to data provider.
		//		Specifies number of search results per page (before hitting "next" button)
		pageSize: Infinity,

		// store: Object
		//		Reference to data provider object used by this ComboBox
		store: null,

		// query: Object
		//		A query that can be passed to 'store' to initially filter the items,
		//		before doing further filtering based on searchAttr and the key.
		query: {},

		// autoComplete: Boolean
		//		If you type in a partial string, and then tab out of the <input> box,
		//		automatically copy the first entry displayed in the drop down list to
		//		the <input> field
		autoComplete: true,

		// searchDelay: Integer
		//		Delay in milliseconds between when user types something and we start
		//		searching based on that value
		searchDelay: 100,

		// searchAttr: String
		//		Searches pattern match against this field
		searchAttr: "name",

		// ignoreCase: Boolean
		//		Set true if the ComboBox should ignore case when matching possible items
		ignoreCase: true,

		// hasDownArrow: Boolean
		//		Set this textbox to have a down arrow button.
		//		Defaults to true.
		hasDownArrow:true,

		// _hasFocus: Boolean
		//		Represents focus state of the textbox
		// TODO: get rid of this;  it's unnecessary (but currently referenced in FilteringSelect)
		_hasFocus:false,

		templateString:"<table class=\"dijit dijitReset dijitInlineTable dijitLeft\" cellspacing=\"0\" cellpadding=\"0\"\n\tid=\"widget_${id}\" name=\"${name}\" dojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse\" waiRole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class='dijitReset dijitStretch dijitInputField' width=\"100%\"\n\t\t\t><input type=\"text\" autocomplete=\"off\" name=\"${name}\"\n\t\t\tdojoAttachEvent=\"onkeypress, onkeyup, onfocus, compositionend\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" waiRole=\"combobox\"\n\t\t/></td\n\t\t><td class=\"dijitReset dijitValidationIconField\" width=\"0%\"\n\t\t\t><div dojoAttachPoint='iconNode' class='dijitValidationIcon'></div\n\t\t\t><div class='dijitValidationIconText'>&Chi;</div\n\t\t></td\n\t\t><td class='dijitReset dijitRight dijitButtonNode dijitDownArrowButton' width=\"0%\"\n\t\t\tdojoAttachPoint=\"downArrowNode\"\n\t\t\tdojoAttachEvent=\"onmousedown:_onArrowMouseDown,onmouseup:_onMouse,onmouseenter:_onMouse,onmouseleave:_onMouse\"\n\t\t\t><div class=\"dijitDownArrowButtonInner\" waiRole=\"presentation\"\n\t\t\t\t><div class=\"dijitDownArrowButtonChar\">&#9660;</div\n\t\t\t></div\n\t\t></td\t\n\t></tr\n></table>\n",

		baseClass:"dijitComboBox",

		_lastDisplayedValue: "",

		getValue:function(){
			// don't get the textbox value but rather the previously set hidden value
			return dijit.form.TextBox.superclass.getValue.apply(this, arguments);
		},

		setDisplayedValue:function(/*String*/ value){
			this._lastDisplayedValue = value;
			this.setValue(value, true);
		},

		_getCaretPos: function(/*DomNode*/ element){
			// khtml 3.5.2 has selection* methods as does webkit nightlies from 2005-06-22
			if(typeof(element.selectionStart)=="number"){
				// FIXME: this is totally borked on Moz < 1.3. Any recourse?
				return element.selectionStart;
			}else if(dojo.isIE){
				// in the case of a mouse click in a popup being handled,
				// then the document.selection is not the textarea, but the popup
				// var r = document.selection.createRange();
				// hack to get IE 6 to play nice. What a POS browser.
				var tr = document.selection.createRange().duplicate();
				var ntr = element.createTextRange();
				tr.move("character",0);
				ntr.move("character",0);
				try{
					// If control doesnt have focus, you get an exception.
					// Seems to happen on reverse-tab, but can also happen on tab (seems to be a race condition - only happens sometimes).
					// There appears to be no workaround for this - googled for quite a while.
					ntr.setEndPoint("EndToEnd", tr);
					return String(ntr.text).replace(/\r/g,"").length;
				}catch(e){
					return 0;  // If focus has shifted, 0 is fine for caret pos.
				}
			}
		},

		_setCaretPos: function(/*DomNode*/ element, /*Number*/ location){
			location = parseInt(location);
			this._setSelectedRange(element, location, location);
		},

		_setSelectedRange: function(/*DomNode*/ element, /*Number*/ start, /*Number*/ end){
			if(!end){
				end = element.value.length;
			}  // NOTE: Strange - should be able to put caret at start of text?
			// Mozilla
			// parts borrowed from http://www.faqts.com/knowledge_base/view.phtml/aid/13562/fid/130
			if(element.setSelectionRange){
				dijit.focus(element);
				element.setSelectionRange(start, end);
			}else if(element.createTextRange){ // IE
				var range = element.createTextRange();
				with(range){
					collapse(true);
					moveEnd('character', end);
					moveStart('character', start);
					select();
				}
			}else{ //otherwise try the event-creation hack (our own invention)
				// do we need these?
				element.value = element.value;
				element.blur();
				dijit.focus(element);
				// figure out how far back to go
				var dist = parseInt(element.value.length)-end;
				var tchar = String.fromCharCode(37);
				var tcc = tchar.charCodeAt(0);
				for(var x = 0;  x < dist;  x++){
					var te = document.createEvent("KeyEvents");
					te.initKeyEvent("keypress", true, true, null, false, false, false, false, tcc, tcc);
					element.dispatchEvent(te);
				}
			}
		},

		onkeypress: function(/*Event*/ evt){
			// summary: handles keyboard events

			//except for pasting case - ctrl + v(118)
			if(evt.altKey || (evt.ctrlKey && evt.charCode != 118)){
				return;
			}
			var doSearch = false;
			this.item = null;  // #4872
			if(this._isShowingNow){this._popupWidget.handleKey(evt);}
			switch(evt.keyCode){
				case dojo.keys.PAGE_DOWN:
				case dojo.keys.DOWN_ARROW:
					if(!this._isShowingNow||this._prev_key_esc){
						this._arrowPressed();
						doSearch=true;
					}else{
						this._announceOption(this._popupWidget.getHighlightedOption());
					}
					dojo.stopEvent(evt);
					this._prev_key_backspace = false;
					this._prev_key_esc = false;
					break;

				case dojo.keys.PAGE_UP:
				case dojo.keys.UP_ARROW:
					if(this._isShowingNow){
						this._announceOption(this._popupWidget.getHighlightedOption());
					}
					dojo.stopEvent(evt);
					this._prev_key_backspace = false;
					this._prev_key_esc = false;
					break;

				case dojo.keys.ENTER:
					// prevent submitting form if user presses enter
					// also prevent accepting the value if either Next or Previous are selected
					var highlighted;
					if(this._isShowingNow&&(highlighted=this._popupWidget.getHighlightedOption())){
						// only stop event on prev/next
						if(highlighted==this._popupWidget.nextButton){
							this._nextSearch(1);
							dojo.stopEvent(evt);
							break;
						}
						else if(highlighted==this._popupWidget.previousButton){
							this._nextSearch(-1);
							dojo.stopEvent(evt);
							break;
						}
					}else{
						this.setDisplayedValue(this.getDisplayedValue());
					}
					// default case:
					// prevent submit, but allow event to bubble
					evt.preventDefault();
					// fall through

				case dojo.keys.TAB:
					var newvalue=this.getDisplayedValue();
					// #4617: if the user had More Choices selected fall into the _onBlur handler
					if(this._popupWidget &&
						(newvalue == this._popupWidget._messages["previousMessage"] ||
							newvalue == this._popupWidget._messages["nextMessage"])){
						break;
					}
					if(this._isShowingNow){
						this._prev_key_backspace = false;
						this._prev_key_esc = false;
						if(this._popupWidget.getHighlightedOption()){
							this._popupWidget.setValue({target:this._popupWidget.getHighlightedOption()}, true);
						}
						this._hideResultList();
					}
					break;

				case dojo.keys.SPACE:
					this._prev_key_backspace = false;
					this._prev_key_esc = false;
					if(this._isShowingNow && this._popupWidget.getHighlightedOption()){
						dojo.stopEvent(evt);
						this._selectOption();
						this._hideResultList();
					}else{
						doSearch = true;
					}
					break;

				case dojo.keys.ESCAPE:
					this._prev_key_backspace = false;
					this._prev_key_esc = true;
					this._hideResultList();
					if(this._lastDisplayedValue != this.getDisplayedValue()){
						this.setDisplayedValue(this._lastDisplayedValue);
						dojo.stopEvent(evt);
					}else{
						this.setValue(this.getValue(), false);
					}
					break;

				case dojo.keys.DELETE:
				case dojo.keys.BACKSPACE:
					this._prev_key_esc = false;
					this._prev_key_backspace = true;
					doSearch = true;
					break;

				case dojo.keys.RIGHT_ARROW: // fall through

				case dojo.keys.LEFT_ARROW: // fall through
					this._prev_key_backspace = false;
					this._prev_key_esc = false;
					break;

				default:// non char keys (F1-F12 etc..)  shouldn't open list
					this._prev_key_backspace = false;
					this._prev_key_esc = false;
					if(dojo.isIE || evt.charCode != 0){
						doSearch=true;
					}
			}
			if(this.searchTimer){
				clearTimeout(this.searchTimer);
			}
			if(doSearch){
				// need to wait a tad before start search so that the event bubbles through DOM and we have value visible
				this.searchTimer = setTimeout(dojo.hitch(this, this._startSearchFromInput), this.searchDelay);
			}
		},

		_autoCompleteText: function(/*String*/ text){
			// summary:
			// Fill in the textbox with the first item from the drop down list, and
			// highlight the characters that were auto-completed.   For example, if user
			// typed "CA" and the drop down list appeared, the textbox would be changed to
			// "California" and "ifornia" would be highlighted.

			// IE7: clear selection so next highlight works all the time
			this._setSelectedRange(this.focusNode, this.focusNode.value.length, this.focusNode.value.length);
			// does text autoComplete the value in the textbox?
			// #3744: escape regexp so the user's input isn't treated as a regular expression.
			// Example: If the user typed "(" then the regexp would throw "unterminated parenthetical."
			// Also see #2558 for the autocompletion bug this regular expression fixes.
			if(new RegExp("^"+escape(this.focusNode.value), this.ignoreCase ? "i" : "").test(escape(text))){
				var cpos = this._getCaretPos(this.focusNode);
				// only try to extend if we added the last character at the end of the input
				if((cpos+1) > this.focusNode.value.length){
					// only add to input node as we would overwrite Capitalisation of chars
					// actually, that is ok
					this.focusNode.value = text;//.substr(cpos);
					// visually highlight the autocompleted characters
					this._setSelectedRange(this.focusNode, cpos, this.focusNode.value.length);
					dijit.setWaiState(this.focusNode, "valuenow", text);
				}
			}else{
				// text does not autoComplete;  replace the whole value and highlight
				this.focusNode.value = text;
				this._setSelectedRange(this.focusNode, 0, this.focusNode.value.length);
				dijit.setWaiState(this.focusNode, "valuenow", text);
			}
		},

		_openResultList: function(/*Object*/ results, /*Object*/ dataObject){
			if(this.disabled || dataObject.query[this.searchAttr] != this._lastQuery){
				return;
			}
			this._popupWidget.clearResultList();
			if(!results.length){
				this._hideResultList();
				return;
			}

			// Fill in the textbox with the first item from the drop down list, and
			// highlight the characters that were auto-completed.   For example, if user
			// typed "CA" and the drop down list appeared, the textbox would be changed to
			// "California" and "ifornia" would be highlighted.

			var zerothvalue=new String(this.store.getValue(results[0], this.searchAttr));
			if(zerothvalue && this.autoComplete && !this._prev_key_backspace &&
			// when the user clicks the arrow button to show the full list,
			// startSearch looks for "*".
			// it does not make sense to autocomplete
			// if they are just previewing the options available.
				(dataObject.query[this.searchAttr] != "*")){
				this._autoCompleteText(zerothvalue);
				// announce the autocompleted value
				dijit.setWaiState(this.focusNode || this.domNode, "valuenow", zerothvalue);
			}
			this._popupWidget.createOptions(results, dataObject, dojo.hitch(this, this._getMenuLabelFromItem));

			// show our list (only if we have content, else nothing)
			this._showResultList();

			// #4091: tell the screen reader that the paging callback finished by shouting the next choice
			if(dataObject.direction){
				if(dataObject.direction==1){
					this._popupWidget.highlightFirstOption();
				}else if(dataObject.direction==-1){
					this._popupWidget.highlightLastOption();
				}
				this._announceOption(this._popupWidget.getHighlightedOption());
			}
		},

		_showResultList: function(){
			this._hideResultList();
			var items = this._popupWidget.getItems(),
				visibleCount = Math.min(items.length,this.maxListLength);
			this._arrowPressed();
			// hide the tooltip
			this._displayMessage("");
			
			// Position the list and if it's too big to fit on the screen then
			// size it to the maximum possible height
			// Our dear friend IE doesnt take max-height so we need to calculate that on our own every time
			// TODO: want to redo this, see http://trac.dojotoolkit.org/ticket/3272, http://trac.dojotoolkit.org/ticket/4108
			with(this._popupWidget.domNode.style){
				// natural size of the list has changed, so erase old width/height settings,
				// which were hardcoded in a previous call to this function (via dojo.marginBox() call) 
				width="";
				height="";
			}
			var best=this.open();
			// #3212: only set auto scroll bars if necessary
			// prevents issues with scroll bars appearing when they shouldn't when node is made wider (fractional pixels cause this)
			var popupbox=dojo.marginBox(this._popupWidget.domNode);
			this._popupWidget.domNode.style.overflow=((best.h==popupbox.h)&&(best.w==popupbox.w))?"hidden":"auto";
			// #4134: borrow TextArea scrollbar test so content isn't covered by scrollbar and horizontal scrollbar doesn't appear
			var newwidth=best.w;
			if(best.h<this._popupWidget.domNode.scrollHeight){newwidth+=16;}
			dojo.marginBox(this._popupWidget.domNode, {h:best.h,w:Math.max(newwidth,this.domNode.offsetWidth)});
		},

		_hideResultList: function(){
			if(this._isShowingNow){
				dijit.popup.close(this._popupWidget);
				this._arrowIdle();
				this._isShowingNow=false;
			}
		},

		_onBlur: function(){
			// summary: called magically when focus has shifted away from this widget and it's dropdown
			this._hasFocus=false;
			this._hasBeenBlurred = true;
			this._hideResultList();
			this._arrowIdle();
			// if the user clicks away from the textbox OR tabs away, set the value to the textbox value
			// #4617: if value is now more choices or previous choices, revert the value
			var newvalue=this.getDisplayedValue();
			if(this._popupWidget&&(newvalue==this._popupWidget._messages["previousMessage"]||newvalue==this._popupWidget._messages["nextMessage"])){
				this.setValue(this._lastValueReported, true);
			}else{
				this.setDisplayedValue(newvalue);
			}
		},

		onfocus:function(/*Event*/ evt){
			this._hasFocus=true;
			
			// update styling to reflect that we are focused
			this._onMouse(evt);
		},

		_announceOption: function(/*Node*/ node){
			// summary:
			//	a11y code that puts the highlighted option in the textbox
			//	This way screen readers will know what is happening in the menu

			if(node==null){return;}
			// pull the text value from the item attached to the DOM node
			var newValue;
			if(node==this._popupWidget.nextButton||node==this._popupWidget.previousButton){
				newValue=node.innerHTML;
			}else{
				newValue=this.store.getValue(node.item, this.searchAttr);
			}
			// get the text that the user manually entered (cut off autocompleted text)
			this.focusNode.value=this.focusNode.value.substring(0, this._getCaretPos(this.focusNode));
			// autocomplete the rest of the option to announce change
			this._autoCompleteText(newValue);
		},

		_selectOption: function(/*Event*/ evt){
			var tgt = null;
			if(!evt){
				evt ={ target: this._popupWidget.getHighlightedOption()};
			}
				// what if nothing is highlighted yet?
			if(!evt.target){
				// handle autocompletion where the the user has hit ENTER or TAB
				this.setDisplayedValue(this.getDisplayedValue());
				return;
			// otherwise the user has accepted the autocompleted value
			}else{
				tgt = evt.target;
			}
			if(!evt.noHide){
				this._hideResultList();
				this._setCaretPos(this.focusNode, this.store.getValue(tgt.item, this.searchAttr).length);
			}
			this._doSelect(tgt);
		},

		_doSelect: function(tgt){
			this.item = tgt.item;
			this.setValue(this.store.getValue(tgt.item, this.searchAttr), true);
		},

		_onArrowMouseDown: function(evt){
			// summary: callback when arrow is clicked
			if(this.disabled){
				return;
			}
			dojo.stopEvent(evt);
			this.focus();
			if(this._isShowingNow){
				this._hideResultList();
			}else{
				// forces full population of results, if they click
				// on the arrow it means they want to see more options
				this._startSearch("");
			}
		},

		_startSearchFromInput: function(){
			this._startSearch(this.focusNode.value);
		},

		_startSearch: function(/*String*/ key){
			if(!this._popupWidget){
				this._popupWidget = new dijit.form._ComboBoxMenu({
					onChange: dojo.hitch(this, this._selectOption)
				});
			}
			// create a new query to prevent accidentally querying for a hidden value from FilteringSelect's keyField
			var query=this.query;
			this._lastQuery=query[this.searchAttr]=key+"*";
			var dataObject=this.store.fetch({queryOptions:{ignoreCase:this.ignoreCase, deep:true}, query: query, onComplete:dojo.hitch(this, "_openResultList"), start:0, count:this.pageSize});
			function nextSearch(dataObject, direction){
				dataObject.start+=dataObject.count*direction;
				// #4091: tell callback the direction of the paging so the screen reader knows which menu option to shout
				dataObject.direction=direction;
				dataObject.store.fetch(dataObject);
			}
			this._nextSearch=this._popupWidget.onPage=dojo.hitch(this, nextSearch, dataObject);
		},

		_getValueField:function(){
			return this.searchAttr;
		},

		/////////////// Event handlers /////////////////////

		_arrowPressed: function(){
			if(!this.disabled&&this.hasDownArrow){
				dojo.addClass(this.downArrowNode, "dijitArrowButtonActive");
			}
		},

		_arrowIdle: function(){
			if(!this.disabled&&this.hasDownArrow){
				dojo.removeClass(this.downArrowNode, "dojoArrowButtonPushed");
			}
		},

		compositionend: function(/*Event*/ evt){
			// summary: When inputting characters using an input method, such as Asian
			// languages, it will generate this event instead of onKeyDown event
			// Note: this event is only triggered in FF (not in IE)
			this.onkeypress({charCode:-1});
		},

		//////////// INITIALIZATION METHODS ///////////////////////////////////////
		constructor: function(){
			this.query={};
		},

		postMixInProperties: function(){
			if(!this.hasDownArrow){
				this.baseClass = "dijitTextBox";
			}
			if(!this.store){
				// if user didn't specify store, then assume there are option tags
				var items = this.srcNodeRef ? dojo.query("> option", this.srcNodeRef).map(function(node){
					node.style.display="none";
					return { value: node.getAttribute("value"), name: String(node.innerHTML) };
				}) : {};
				this.store = new dojo.data.ItemFileReadStore({data: {identifier:this._getValueField(), items:items}});

				// if there is no value set and there is an option list,
				// set the value to the first value to be consistent with native Select
				if(items && items.length && !this.value){
					// For <select>, IE does not let you set the value attribute of the srcNodeRef (and thus dojo.mixin does not copy it).
					// IE does understand selectedIndex though, which is automatically set by the selected attribute of an option tag
					this.value = items[this.srcNodeRef.selectedIndex != -1 ? this.srcNodeRef.selectedIndex : 0]
						[this._getValueField()];
				}
			}
		},

		uninitialize:function(){
			if(this._popupWidget){
				this._hideResultList();
				this._popupWidget.destroy()
			};
		},

		_getMenuLabelFromItem:function(/*Item*/ item){
			return {html:false, label:this.store.getValue(item, this.searchAttr)};
		},

		open:function(){
			this._isShowingNow=true;
			return dijit.popup.open({
				popup: this._popupWidget,
				around: this.domNode,
				parent: this
			});
		}
	}
);

dojo.declare(
	"dijit.form._ComboBoxMenu",
	[dijit._Widget, dijit._Templated],

	{
		// summary:
		//	Focus-less div based menu for internal use in ComboBox

		templateString:"<div class='dijitMenu' dojoAttachEvent='onmousedown,onmouseup,onmouseover,onmouseout' tabIndex='-1' style='overflow:\"auto\";'>"
				+"<div class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton'></div>"
				+"<div class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton'></div>"
			+"</div>",
		_messages:null,

		postMixInProperties:function(){
			this._messages = dojo.i18n.getLocalization("dijit.form", "ComboBox", this.lang);
			this.inherited("postMixInProperties", arguments);
		},

		setValue:function(/*Object*/ value){
			this.value=value;
			this.onChange(value);
		},

		onChange:function(/*Object*/ value){},
		onPage:function(/*Number*/ direction){},

		postCreate:function(){
			// fill in template with i18n messages
			this.previousButton.innerHTML=this._messages["previousMessage"];
			this.nextButton.innerHTML=this._messages["nextMessage"];
			this.inherited("postCreate", arguments);
		},

		onClose:function(){
			this._blurOptionNode();
		},

		_createOption:function(/*Object*/ item, labelFunc){
			// summary: creates an option to appear on the popup menu
			// subclassed by FilteringSelect

			var labelObject=labelFunc(item);
			var menuitem = document.createElement("div");
			if(labelObject.html){menuitem.innerHTML=labelObject.label;}
			else{menuitem.appendChild(document.createTextNode(labelObject.label));}
			// #3250: in blank options, assign a normal height
			if(menuitem.innerHTML==""){
				menuitem.innerHTML="&nbsp;"
			}
			menuitem.item=item;
			return menuitem;
		},

		createOptions:function(results, dataObject, labelFunc){
			//this._dataObject=dataObject;
			//this._dataObject.onComplete=dojo.hitch(comboBox, comboBox._openResultList);
			// display "Previous . . ." button
			this.previousButton.style.display=dataObject.start==0?"none":"";
			// create options using _createOption function defined by parent ComboBox (or FilteringSelect) class
			// #2309: iterate over cache nondestructively
			var _this=this;
			dojo.forEach(results, function(item){
				var menuitem=_this._createOption(item, labelFunc);
				menuitem.className = "dijitMenuItem";
				_this.domNode.insertBefore(menuitem, _this.nextButton);
			});
			// display "Next . . ." button
			this.nextButton.style.display=dataObject.count==results.length?"":"none";
		},

		clearResultList:function(){
			// keep the previous and next buttons of course
			while(this.domNode.childNodes.length>2){
				this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);
			}
		},

		// these functions are called in showResultList
		getItems:function(){
			return this.domNode.childNodes;
		},

		getListLength:function(){
			return this.domNode.childNodes.length-2;
		},

		onmousedown:function(/*Event*/ evt){
			dojo.stopEvent(evt);
		},

		onmouseup:function(/*Event*/ evt){
			if(evt.target === this.domNode){
				return;
			}else if(evt.target==this.previousButton){
				this.onPage(-1);
			}else if(evt.target==this.nextButton){
				this.onPage(1);
			}else{
				var tgt=evt.target;
				// while the clicked node is inside the div
				while(!tgt.item){
					// recurse to the top
					tgt=tgt.parentNode;
				}
				this.setValue({target:tgt}, true);
			}
		},

		onmouseover:function(/*Event*/ evt){
			if(evt.target === this.domNode){ return;  }
			var tgt=evt.target;
			if(!(tgt==this.previousButton||tgt==this.nextButton)){
				// while the clicked node is inside the div
				while(!tgt.item){
					// recurse to the top
					tgt=tgt.parentNode;
				}
			}
			this._focusOptionNode(tgt);
		},

		onmouseout:function(/*Event*/ evt){
			if(evt.target === this.domNode){ return;  }
			this._blurOptionNode();
		},

		_focusOptionNode:function(/*DomNode*/ node){
			// summary:
			//	does the actual highlight
			if(this._highlighted_option != node){
				this._blurOptionNode();
				this._highlighted_option = node;
				dojo.addClass(this._highlighted_option, "dijitMenuItemHover");
			}
		},

		_blurOptionNode:function(){
			// summary:
			//	removes highlight on highlighted option
			if(this._highlighted_option){
				dojo.removeClass(this._highlighted_option, "dijitMenuItemHover");
				this._highlighted_option = null;
			}
		},

		_highlightNextOption:function(){
			// because each press of a button clears the menu,
			// the highlighted option sometimes becomes detached from the menu!
			// test to see if the option has a parent to see if this is the case.
			if(!this.getHighlightedOption()){
				this._focusOptionNode(this.domNode.firstChild.style.display=="none"?this.domNode.firstChild.nextSibling:this.domNode.firstChild);
			}else if(this._highlighted_option.nextSibling&&this._highlighted_option.nextSibling.style.display!="none"){
				this._focusOptionNode(this._highlighted_option.nextSibling);
			}
			// scrollIntoView is called outside of _focusOptionNode because in IE putting it inside causes the menu to scroll up on mouseover
			dijit.scrollIntoView(this._highlighted_option);
		},

		highlightFirstOption:function(){
			// highlight the non-Previous choices option
			this._focusOptionNode(this.domNode.firstChild.nextSibling);
			dijit.scrollIntoView(this._highlighted_option);
		},

		highlightLastOption:function(){
			// highlight the noon-More choices option
			this._focusOptionNode(this.domNode.lastChild.previousSibling);
			dijit.scrollIntoView(this._highlighted_option);
		},

		_highlightPrevOption:function(){
			// if nothing selected, highlight last option
			// makes sense if you select Previous and try to keep scrolling up the list
			if(!this.getHighlightedOption()){
				this._focusOptionNode(this.domNode.lastChild.style.display=="none"?this.domNode.lastChild.previousSibling:this.domNode.lastChild);
			}else if(this._highlighted_option.previousSibling&&this._highlighted_option.previousSibling.style.display!="none"){
				this._focusOptionNode(this._highlighted_option.previousSibling);
			}
			dijit.scrollIntoView(this._highlighted_option);
		},

		_page:function(/*Boolean*/ up){
			var scrollamount=0;
			var oldscroll=this.domNode.scrollTop;
			var height=parseInt(dojo.getComputedStyle(this.domNode).height);
			// if no item is highlighted, highlight the first option
			if(!this.getHighlightedOption()){this._highlightNextOption();}
			while(scrollamount<height){
				if(up){
					// stop at option 1
					if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break;}
					this._highlightPrevOption();
				}else{
					// stop at last option
					if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break;}
					this._highlightNextOption();
				}
				// going backwards
				var newscroll=this.domNode.scrollTop;
				scrollamount+=(newscroll-oldscroll)*(up ? -1:1);
				oldscroll=newscroll;
			}
		},

		pageUp:function(){
			this._page(true);
		},

		pageDown:function(){
			this._page(false);
		},

		getHighlightedOption:function(){
			// summary:
			//	Returns the highlighted option.
			return this._highlighted_option&&this._highlighted_option.parentNode ? this._highlighted_option : null;
		},

		handleKey:function(evt){
			switch(evt.keyCode){
				case dojo.keys.DOWN_ARROW:
					this._highlightNextOption();
					break;
				case dojo.keys.PAGE_DOWN:
					this.pageDown();
					break;	 
				case dojo.keys.UP_ARROW:
					this._highlightPrevOption();
					break;
				case dojo.keys.PAGE_UP:
					this.pageUp();
					break;	 
			}
		}
	}
);

dojo.declare(
	"dijit.form.ComboBox",
	[dijit.form.ValidationTextBox, dijit.form.ComboBoxMixin],
	{
		postMixInProperties: function(){
			dijit.form.ComboBoxMixin.prototype.postMixInProperties.apply(this, arguments);
			dijit.form.ValidationTextBox.prototype.postMixInProperties.apply(this, arguments);
		}
	}
);

}

if(!dojo._hasResource["dojo.cldr.monetary"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.cldr.monetary"] = true;
dojo.provide("dojo.cldr.monetary");

dojo.cldr.monetary.getData = function(code){
// summary: A mapping of currency code to currency-specific formatting information. Returns a unique object with properties: places, round.
// code: an iso4217 currency code

// from http://www.unicode.org/cldr/data/common/supplemental/supplementalData.xml:supplementalData/currencyData/fractions

	var placesData = {
		ADP:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,DJF:0,ESP:0,GNF:0,
		IQD:3,ITL:0,JOD:3,JPY:0,KMF:0,KRW:0,KWD:3,LUF:0,LYD:3,
		MGA:0,MGF:0,OMR:3,PYG:0,RWF:0,TND:3,TRL:0,VUV:0,XAF:0,
		XOF:0,XPF:0
	};

	var roundingData = {CHF:5};

	var places = placesData[code], round = roundingData[code];
	if(typeof places == "undefined"){ places = 2;  }
	if(typeof round == "undefined"){ round = 0;  }

	return {places: places, round: round};  // Object
};

}

if(!dojo._hasResource["dojo.currency"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.currency"] = true;
dojo.provide("dojo.currency");






dojo.currency._mixInDefaults = function(options){
	options = options || {};
	options.type = "currency";

	// Get locale-depenent currency data, like the symbol
	var bundle = dojo.i18n.getLocalization("dojo.cldr", "currency", options.locale) || {};

	// Mixin locale-independent currency data, like # of places
	var iso = options.currency;
	var data = dojo.cldr.monetary.getData(iso);

	dojo.forEach(["displayName","symbol","group","decimal"], function(prop){
		data[prop] = bundle[iso+"_"+prop];
	});

	data.fractional = [true, false];

	// Mixin with provided options
	return dojo.mixin(data, options);
}

dojo.currency.format = function(/*Number*/value, /*Object?*/options){
// summary:
//		Format a Number as a String, using locale-specific settings
//
// description:
//		Create a string from a Number using a known localized pattern.
//		Formatting patterns appropriate to the locale are chosen from the CLDR http://unicode.org/cldr
//		as well as the appropriate symbols and delimiters.  See http://www.unicode.org/reports/tr35/#Number_Elements
//
// value:
//		the number to be formatted.
//
// options: object {currency: String, pattern: String?, places: Number?, round: Number?, symbol: String?, locale: String?}
//		currency- the ISO4217 currency code, a three letter sequence like "USD"
//			See http://en.wikipedia.org/wiki/ISO_4217
//		symbol- override currency symbol. Normally, will be looked up in table of supported currencies, and ISO currency code will
//			be used if not found.  See dojo.i18n.cldr.nls->currency.js
//		pattern- override formatting pattern with this string (see dojo.number.applyPattern)
//		places- fixed number of decimal places to show.  Default is defined by the currency.
//	    round- 5 rounds to nearest .5;  0 rounds to nearest whole (default). -1 means don't round.
//		locale- override the locale used to determine formatting rules

	return dojo.number.format(value, dojo.currency._mixInDefaults(options));
}

dojo.currency.regexp = function(/*Object?*/options){
//
// summary:
//		Builds the regular needed to parse a number
//
// description:
//		Returns regular expression with positive and negative match, group and decimal separators
//
// options: object {pattern: String, locale: String, strict: Boolean, places: mixed}
//		currency- the ISO4217 currency code, a three letter sequence like "USD"
//			See http://en.wikipedia.org/wiki/ISO_4217
//		symbol- override currency symbol. Normally, will be looked up in table of supported currencies, and ISO currency code will
//			be used if not found.  See dojo.i18n.cldr.nls->currency.js
//		pattern- override pattern with this string
//		locale- override the locale used to determine formatting rules
//		strict- strict parsing, false by default
//		places- number of decimal places to accept.  Default is defined by currency.
	return dojo.number.regexp(dojo.currency._mixInDefaults(options));  // String
}

dojo.currency.parse = function(/*String*/expression, /*Object?*/options){
//
// summary:
//		Convert a properly formatted string to a primitive Number,
//		using locale-specific settings.
//
// description:
//		Create a Number from a string using a known localized pattern.
//		Formatting patterns are chosen appropriate to the locale.
//		Formatting patterns are implemented using the syntax described at *URL*
//
// expression: A string representation of a Number
//
// options: object {pattern: string, locale: string, strict: boolean}
//		currency- the ISO4217 currency code, a three letter sequence like "USD"
//			See http://en.wikipedia.org/wiki/ISO_4217
//		symbol- override currency symbol. Normally, will be looked up in table of supported currencies, and ISO currency code will
//			be used if not found.  See dojo.i18n.cldr.nls->currency.js
//		pattern- override pattern with this string
//		locale- override the locale used to determine formatting rules
//		strict- strict parsing, false by default
//		places- number of decimal places to accept.  Default is defined by currency.
//		fractional- where places are implied by pattern or explicit 'places' parameter, whether to include the fractional portion.
//			By default for currencies, it the fractional portion is optional.
	return dojo.number.parse(expression, dojo.currency._mixInDefaults(options));
}

}

if(!dojo._hasResource["dijit.form.NumberTextBox"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.NumberTextBox"] = true;
dojo.provide("dijit.form.NumberTextBox");




dojo.declare(
	"dijit.form.NumberTextBoxMixin",
	null,
	{
		// summary:
		//		A mixin for all number textboxes
		regExpGen: dojo.number.regexp,

		format: function(/*Number*/ value, /*Object*/ constraints){
			if(isNaN(value)){ return "";  }
			return dojo.number.format(value, constraints);
		},

		parse: dojo.number.parse,

		filter: function(/*Number*/ value){
			if(typeof value == "string"){ return this.inherited('filter', arguments);  }
			return (isNaN(value) ? '' : value);
		},

		value: NaN
	}
);

dojo.declare(
	"dijit.form.NumberTextBox",
	[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],
	{
		// summary:
		//		A validating, serializable, range-bound text box.
		// constraints object: min, max, places
	}
);

}

if(!dojo._hasResource["dijit.form.CurrencyTextBox"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.CurrencyTextBox"] = true;
dojo.provide("dijit.form.CurrencyTextBox");

//FIXME: dojo.experimental throws an unreadable exception?
//dojo.experimental("dijit.form.CurrencyTextBox");




dojo.declare(
	"dijit.form.CurrencyTextBox",
	dijit.form.NumberTextBox,
	{
		// code: String
		//		the ISO4217 currency code, a three letter sequence like "USD"
		//		See http://en.wikipedia.org/wiki/ISO_4217
		currency: "",

		regExpGen: dojo.currency.regexp,
		format: dojo.currency.format,
		parse: dojo.currency.parse,

		postMixInProperties: function(){
			if(this.constraints === dijit.form.ValidationTextBox.prototype.constraints){
				// declare a constraints property on 'this' so we don't overwrite the shared default object in 'prototype'
				this.constraints = {};
			}
			this.constraints.currency = this.currency;
			dijit.form.CurrencyTextBox.superclass.postMixInProperties.apply(this, arguments);
		}
	}
);

}

if(!dojo._hasResource["dojo.cldr.supplemental"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.cldr.supplemental"] = true;
dojo.provide("dojo.cldr.supplemental");



dojo.cldr.supplemental.getFirstDayOfWeek = function(/*String?*/locale){
// summary: Returns a zero-based index for first day of the week
// description:
//		Returns a zero-based index for first day of the week, as used by the local (Gregorian) calendar.
//		e.g. Sunday (returns 0), or Monday (returns 1)

	// from http://www.unicode.org/cldr/data/common/supplemental/supplementalData.xml:supplementalData/weekData/firstDay
	var firstDay = {/*default is 1=Monday*/
		mv:5,
		ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,lb:6,ly:6,ma:6,om:6,qa:6,sa:6,
		sd:6,so:6,tn:6,ye:6,
		as:0,au:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,ie:0,il:0,is:0,jm:0,jp:0,kg:0,kr:0,la:0,
		mh:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,za:0,zw:0,
		et:0,mw:0,ng:0,tj:0,
		gb:0,
		sy:4
	};

	var country = dojo.cldr.supplemental._region(locale);
	var dow = firstDay[country];
	return (typeof dow == 'undefined') ? 1 : dow;  /*Number*/
};

dojo.cldr.supplemental._region = function(/*String?*/locale){
	locale = dojo.i18n.normalizeLocale(locale);
	var tags = locale.split('-');
	var region = tags[1];
	if(!region){
		// IE often gives language only (#2269)
		// Arbitrary mappings of language-only locales to a country:
        region = {de:"de", en:"us", es:"es", fi:"fi", fr:"fr", hu:"hu", it:"it",
        ja:"jp", ko:"kr", nl:"nl", pt:"br", sv:"se", zh:"cn"}[tags[0]];
	}else if(region.length == 4){
		// The ISO 3166 country code is usually in the second position, unless a
		// 4-letter script is given. See http://www.ietf.org/rfc/rfc4646.txt
		region = tags[2];
	}
	return region;
}

dojo.cldr.supplemental.getWeekend = function(/*String?*/locale){
// summary: Returns a hash containing the start and end days of the weekend
// description:
//		Returns a hash containing the start and end days of the weekend according to local custom using locale,
//		or by default in the user's locale.
//		e.g. {start:6, end:0}

	// from http://www.unicode.org/cldr/data/common/supplemental/supplementalData.xml:supplementalData/weekData/weekend{Start,End}
	var weekendStart = {/*default is 6=Saturday*/
		eg:5,il:5,sy:5,
		'in':0,
		ae:4,bh:4,dz:4,iq:4,jo:4,kw:4,lb:4,ly:4,ma:4,om:4,qa:4,sa:4,sd:4,tn:4,ye:4		
	};

	var weekendEnd = {/*default is 0=Sunday*/
		ae:5,bh:5,dz:5,iq:5,jo:5,kw:5,lb:5,ly:5,ma:5,om:5,qa:5,sa:5,sd:5,tn:5,ye:5,af:5,ir:5,
		eg:6,il:6,sy:6
	};

	var country = dojo.cldr.supplemental._region(locale);
	var start = weekendStart[country];
	var end = weekendEnd[country];
	if(typeof start == 'undefined'){start=6;}
	if(typeof end == 'undefined'){end=0;}
	return {start:start, end:end};  /*Object {start,end}*/
};

}

if(!dojo._hasResource["dojo.date"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.date"] = true;
dojo.provide("dojo.date");

dojo.date.getDaysInMonth = function(/*Date*/dateObject){
	//	summary:
	//		Returns the number of days in the month used by dateObject
	var month = dateObject.getMonth();
	var days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
	if(month == 1 && dojo.date.isLeapYear(dateObject)){ return 29;  } // Number
	return days[month];  // Number
}

dojo.date.isLeapYear = function(/*Date*/dateObject){
	//	summary:
	//		Determines if the year of the dateObject is a leap year
	//	description:
	//		Leap years are years with an additional day YYYY-02-29, where the
	//		year number is a multiple of four with the following exception: If
	//		a year is a multiple of 100, then it is only a leap year if it is
	//		also a multiple of 400. For example, 1900 was not a leap year, but
	//		2000 is one.

	var year = dateObject.getFullYear();
	return !(year%400) || (!(year%4) && !!(year%100));  // Boolean
}

// FIXME: This is not localized
dojo.date.getTimezoneName = function(/*Date*/dateObject){
	//	summary:
	//		Get the user's time zone as provided by the browser
	// dateObject:
	//		Needed because the timezone may vary with time (daylight savings)
	//	description:
	//		Try to get time zone info from toString or toLocaleString method of
	//		the Date object -- UTC offset is not a time zone.  See
	//		http://www.twinsun.com/tz/tz-link.htm Note: results may be
	//		inconsistent across browsers.

	var str = dateObject.toString();  // Start looking in toString
	var tz = '';  // The result -- return empty string if nothing found
	var match;

	// First look for something in parentheses -- fast lookup, no regex
	var pos = str.indexOf('(');
	if(pos > -1){
		tz = str.substring(++pos, str.indexOf(')'));
	}else{
		// If at first you don't succeed ...
		// If IE knows about the TZ, it appears before the year
		// Capital letters or slash before a 4-digit year 
		// at the end of string
		var pat = /([A-Z\/]+) \d{4}$/;
		if((match = str.match(pat))){
			tz = match[1];
		}else{
		// Some browsers (e.g. Safari) glue the TZ on the end
		// of toLocaleString instead of putting it in toString
			str = dateObject.toLocaleString();
			// Capital letters or slash -- end of string, 
			// after space
			pat = / ([A-Z\/]+)$/;
			if((match = str.match(pat))){
				tz = match[1];
			}
		}
	}

	// Make sure it doesn't somehow end up return AM or PM
	return (tz == 'AM' || tz == 'PM') ? '' : tz;  // String
}

// Utility methods to do arithmetic calculations with Dates

dojo.date.compare = function(/*Date*/date1, /*Date?*/date2, /*String?*/portion){
	//	summary:
	//		Compare two date objects by date, time, or both.
	//	description:
	//  	Returns 0 if equal, positive if a > b, else negative.
	//	date1:
	//		Date object
	//	date2:
	//		Date object.  If not specified, the current Date is used.
	//	portion:
	//		A string indicating the "date" or "time" portion of a Date object.
	//		Compares both "date" and "time" by default.  One of the following:
	//		"date", "time", "datetime"

	// Extra step required in copy for IE - see #3112
	date1 = new Date(Number(date1));
	date2 = new Date(Number(date2 || new Date()));

	if(typeof portion !== "undefined"){
		if(portion == "date"){
			// Ignore times and compare dates.
			date1.setHours(0, 0, 0, 0);
			date2.setHours(0, 0, 0, 0);
		}else if(portion == "time"){
			// Ignore dates and compare times.
			date1.setFullYear(0, 0, 0);
			date2.setFullYear(0, 0, 0);
		}
	}
	
	if(date1 > date2){ return 1;  } // int
	if(date1 < date2){ return -1;  } // int
	return 0;  // int
};

dojo.date.add = function(/*Date*/date, /*String*/interval, /*int*/amount){
	//	summary:
	//		Add to a Date in intervals of different size, from milliseconds to years
	//	date: Date
	//		Date object to start with
	//	interval:
	//		A string representing the interval.  One of the following:
	//			"year", "month", "day", "hour", "minute", "second",
	//			"millisecond", "quarter", "week", "weekday"
	//	amount:
	//		How much to add to the date.

	var sum = new Date(Number(date));  // convert to Number before copying to accomodate IE (#3112)
	var fixOvershoot = false;
	var property = "Date";

	switch(interval){
		case "day":
			break;
		case "weekday":
			//i18n FIXME: assumes Saturday/Sunday weekend, but even this is not standard.  There are CLDR entries to localize this.
			var days, weeks;
			var adj = 0;
			// Divide the increment time span into weekspans plus leftover days
			// e.g., 8 days is one 5-day weekspan / and two leftover days
			// Can't have zero leftover days, so numbers divisible by 5 get
			// a days value of 5, and the remaining days make up the number of weeks
			var mod = amount % 5;
			if(!mod){
				days = (amount > 0) ? 5 : -5;
				weeks = (amount > 0) ? ((amount-5)/5) : ((amount+5)/5);
			}else{
				days = mod;
				weeks = parseInt(amount/5);
			}
			// Get weekday value for orig date param
			var strt = date.getDay();
			// Orig date is Sat / positive incrementer
			// Jump over Sun
			if(strt == 6 && amount > 0){
				adj = 1;
			}else if(strt == 0 && amount < 0){
			// Orig date is Sun / negative incrementer
			// Jump back over Sat
				adj = -1;
			}
			// Get weekday val for the new date
			var trgt = strt + days;
			// New date is on Sat or Sun
			if(trgt == 0 || trgt == 6){
				adj = (amount > 0) ? 2 : -2;
			}
			// Increment by number of weeks plus leftover days plus
			// weekend adjustments
			amount = 7 * weeks + days + adj;
			break;
		case "year":
			property = "FullYear";
			// Keep increment/decrement from 2/29 out of March
			fixOvershoot = true;
			break;
		case "week":
			amount *= 7;
			break;
		case "quarter":
			// Naive quarter is just three months
			amount *= 3;
			// fallthrough...
		case "month":
			// Reset to last day of month if you overshoot
			fixOvershoot = true;
			property = "Month";
			break;
		case "hour":
		case "minute":
		case "second":
		case "millisecond":
			property = "UTC" + interval.charAt(0).toUpperCase() + interval.substring(1) + "s";
	}

	if(property){
		sum["set"+property](sum["get"+property]()+amount);
	}

	if(fixOvershoot && (sum.getDate() < date.getDate())){
		sum.setDate(0);
	}

	return sum;  // Date
};

dojo.date.difference = function(/*Date*/date1, /*Date?*/date2, /*String?*/interval){
	//	summary:
	//		Get the difference in a specific unit of time (e.g., number of
	//		months, weeks, days, etc.) between two dates, rounded to the
	//		nearest integer.
	//	date1:
	//		Date object
	//	date2:
	//		Date object.  If not specified, the current Date is used.
	//	interval:
	//		A string representing the interval.  One of the following:
	//			"year", "month", "day", "hour", "minute", "second",
	//			"millisecond", "quarter", "week", "weekday"
	//		Defaults to "day".

	date2 = date2 || new Date();
	interval = interval || "day";
	var yearDiff = date2.getFullYear() - date1.getFullYear();
	var delta = 1;  // Integer return value

	switch(interval){
		case "quarter":
			var m1 = date1.getMonth();
			var m2 = date2.getMonth();
			// Figure out which quarter the months are in
			var q1 = Math.floor(m1/3) + 1;
			var q2 = Math.floor(m2/3) + 1;
			// Add quarters for any year difference between the dates
			q2 += (yearDiff * 4);
			delta = q2 - q1;
			break;
		case "weekday":
			var days = Math.round(dojo.date.difference(date1, date2, "day"));
			var weeks = parseInt(dojo.date.difference(date1, date2, "week"));
			var mod = days % 7;

			// Even number of weeks
			if(mod == 0){
				days = weeks*5;
			}else{
				// Weeks plus spare change (< 7 days)
				var adj = 0;
				var aDay = date1.getDay();
				var bDay = date2.getDay();

				weeks = parseInt(days/7);
				mod = days % 7;
				// Mark the date advanced by the number of
				// round weeks (may be zero)
				var dtMark = new Date(date1);
				dtMark.setDate(dtMark.getDate()+(weeks*7));
				var dayMark = dtMark.getDay();

				// Spare change days -- 6 or less
				if(days > 0){
					switch(true){
						// Range starts on Sat
						case aDay == 6:
							adj = -1;
							break;
						// Range starts on Sun
						case aDay == 0:
							adj = 0;
							break;
						// Range ends on Sat
						case bDay == 6:
							adj = -1;
							break;
						// Range ends on Sun
						case bDay == 0:
							adj = -2;
							break;
						// Range contains weekend
						case (dayMark + mod) > 5:
							adj = -2;
					}
				}else if(days < 0){
					switch(true){
						// Range starts on Sat
						case aDay == 6:
							adj = 0;
							break;
						// Range starts on Sun
						case aDay == 0:
							adj = 1;
							break;
						// Range ends on Sat
						case bDay == 6:
							adj = 2;
							break;
						// Range ends on Sun
						case bDay == 0:
							adj = 1;
							break;
						// Range contains weekend
						case (dayMark + mod) < 0:
							adj = 2;
					}
				}
				days += adj;
				days -= (weeks*2);
			}
			delta = days;
			break;
		case "year":
			delta = yearDiff;
			break;
		case "month":
			delta = (date2.getMonth() - date1.getMonth()) + (yearDiff * 12);
			break;
		case "week":
			// Truncate instead of rounding
			// Don't use Math.floor -- value may be negative
			delta = parseInt(dojo.date.difference(date1, date2, "day")/7);
			break;
		case "day":
			delta /= 24;
			// fallthrough
		case "hour":
			delta /= 60;
			// fallthrough
		case "minute":
			delta /= 60;
			// fallthrough
		case "second":
			delta /= 1000;
			// fallthrough
		case "millisecond":
			delta *= date2.getTime() - date1.getTime();
	}

	// Round for fractional values and DST leaps
	return Math.round(delta);  // Number (integer)
};

}

if(!dojo._hasResource["dojo.date.locale"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dojo.date.locale"] = true;
dojo.provide("dojo.date.locale");

// Localization methods for Date.   Honor local customs using locale-dependent dojo.cldr data.







// Load the bundles containing localization information for
// names and formats


//NOTE: Everything in this module assumes Gregorian calendars.
// Other calendars will be implemented in separate modules.

(function(){
	// Format a pattern without literals
	function formatPattern(dateObject, bundle, pattern){
		return pattern.replace(/([a-z])\1*/ig, function(match){
			var s;
			var c = match.charAt(0);
			var l = match.length;
			var pad;
			var widthList = ["abbr", "wide", "narrow"];
			switch(c){
				case 'G':
					s = bundle[(l < 4) ? "eraAbbr" : "eraNames"][dateObject.getFullYear() < 0 ? 0 : 1];
					break;
				case 'y':
					s = dateObject.getFullYear();
					switch(l){
						case 1:
							break;
						case 2:
							s = String(s);  s = s.substr(s.length - 2);
							break;
						default:
							pad = true;
					}
					break;
				case 'Q':
				case 'q':
					s = Math.ceil((dateObject.getMonth()+1)/3);
//					switch(l){
//						case 1: case 2:
							pad = true;
//							break;
//						case 3: case 4: // unimplemented
//					}
					break;
				case 'M':
				case 'L':
					var m = dateObject.getMonth();
					var width;
					switch(l){
						case 1: case 2:
							s = m+1;  pad = true;
							break;
						case 3: case 4: case 5:
							width = widthList[l-3];
							break;
					}
					if(width){
						var type = (c == "L") ? "standalone" : "format";
						var prop = ["months",type,width].join("-");
						s = bundle[prop][m];
					}
					break;
				case 'w':
					var firstDay = 0;
					s = dojo.date.locale._getWeekOfYear(dateObject, firstDay);  pad = true;
					break;
				case 'd':
					s = dateObject.getDate();  pad = true;
					break;
				case 'D':
					s = dojo.date.locale._getDayOfYear(dateObject);  pad = true;
					break;
				case 'E':
				case 'e':
				case 'c': // REVIEW: don't see this in the spec?
					var d = dateObject.getDay();
					var width;
					switch(l){
						case 1: case 2:
							if(c == 'e'){
								var first = dojo.cldr.supplemental.getFirstDayOfWeek(options.locale);
								d = (d-first+7)%7;
							}
							if(c != 'c'){
								s = d+1;  pad = true;
								break;
							}
							// else fallthrough...
						case 3: case 4: case 5:
							width = widthList[l-3];
							break;
					}
					if(width){
						var type = (c == "c") ? "standalone" : "format";
						var prop = ["days",type,width].join("-");
						s = bundle[prop][d];
					}
					break;
				case 'a':
					var timePeriod = (dateObject.getHours() < 12) ? 'am' : 'pm';
					s = bundle[timePeriod];
					break;
				case 'h':
				case 'H':
				case 'K':
				case 'k':
					var h = dateObject.getHours();
					// strange choices in the date format make it impossible to write this succinctly
					switch (c) {
						case 'h': // 1-12
							s = (h % 12) || 12;
							break;
						case 'H': // 0-23
							s = h;
							break;
						case 'K': // 0-11
							s = (h % 12);
							break;
						case 'k': // 1-24
							s = h || 24;
							break;
					}
					pad = true;
					break;
				case 'm':
					s = dateObject.getMinutes();  pad = true;
					break;
				case 's':
					s = dateObject.getSeconds();  pad = true;
					break;
				case 'S':
					s = Math.round(dateObject.getMilliseconds() * Math.pow(10, l-3));
					break;
				case 'v': // FIXME: don't know what this is. seems to be same as z?
				case 'z':
					// We only have one timezone to offer;  the one from the browser
					s = dojo.date.getTimezoneName(dateObject);
					if(s){break;}
					l=4;
					// fallthrough... use GMT if tz not available
				case 'Z':
					var offset = dateObject.getTimezoneOffset();
					var tz = [
						(offset<=0 ? "+" : "-"),
						dojo.string.pad(Math.floor(Math.abs(offset)/60), 2),
						dojo.string.pad(Math.abs(offset)% 60, 2)
					];
					if(l==4){
						tz.splice(0, 0, "GMT");
						tz.splice(3, 0, ":");
					}
					s = tz.join("");
					break;
//				case 'Y': case 'u': case 'W': case 'F': case 'g': case 'A':
//					console.debug(match+" modifier unimplemented");
				default:
					throw new Error("dojo.date.locale.format: invalid pattern char: "+pattern);
			}
			if(pad){ s = dojo.string.pad(s, l);  }
			return s;
		});
	}

dojo.date.locale.format = function(/*Date*/dateObject, /*Object?*/options){
	// summary:
	//		Format a Date object as a String, using locale-specific settings.
	//
	// description:
	//		Create a string from a Date object using a known localized pattern.
	//		By default, this method formats both date and time from dateObject.
	//		Formatting patterns are chosen appropriate to the locale.  Different
	//		formatting lengths may be chosen, with "full" used by default.
	//		Custom patterns may be used or registered with translations using
	//		the addCustomFormats method.
	//		Formatting patterns are implemented using the syntax described at
	//		http://www.unicode.org/reports/tr35/tr35-4.html#Date_Format_Patterns
	//
	// dateObject:
	//		the date and/or time to be formatted.  If a time only is formatted,
	//		the values in the year, month, and day fields are irrelevant.  The
	//		opposite is true when formatting only dates.
	//
	// options: object {selector: string, formatLength: string, datePattern: string, timePattern: string, locale: string}
	//		selector- choice of 'time','date' (default: date and time)
	//		formatLength- choice of long, short, medium or full (plus any custom additions).  Defaults to 'short'
	//		datePattern,timePattern- override pattern with this string
	//		am,pm- override strings for am/pm in times
	//		locale- override the locale used to determine formatting rules

	options = options || {};

	var locale = dojo.i18n.normalizeLocale(options.locale);
	var formatLength = options.formatLength || 'short';
	var bundle = dojo.date.locale._getGregorianBundle(locale);
	var str = [];
	var sauce = dojo.hitch(this, formatPattern, dateObject, bundle);
	if(options.selector == "year"){
		// Special case as this is not yet driven by CLDR data
		var year = dateObject.getFullYear();
		if(locale.match(/^zh|^ja/)){
			year += "\u5E74";
		}
		return year;
	}
	if(options.selector != "time"){
		var datePattern = options.datePattern || bundle["dateFormat-"+formatLength];
		if(datePattern){str.push(_processPattern(datePattern, sauce));}
	}
	if(options.selector != "date"){
		var timePattern = options.timePattern || bundle["timeFormat-"+formatLength];
		if(timePattern){str.push(_processPattern(timePattern, sauce));}
	}
	var result = str.join(" ");  //TODO: use locale-specific pattern to assemble date + time
	return result;  // String
};

dojo.date.locale.regexp = function(/*Object?*/options){
	// summary:
	//		Builds the regular needed to parse a localized date
	//
	// options: object {selector: string, formatLength: string, datePattern: string, timePattern: string, locale: string, strict: boolean}
	//		selector- choice of 'time', 'date' (default: date and time)
	//		formatLength- choice of long, short, medium or full (plus any custom additions).  Defaults to 'short'
	//		datePattern,timePattern- override pattern with this string
	//		locale- override the locale used to determine formatting rules

	return dojo.date.locale._parseInfo(options).regexp;  // String
};

dojo.date.locale._parseInfo = function(/*Object?*/options){
	options = options || {};
	var locale = dojo.i18n.normalizeLocale(options.locale);
	var bundle = dojo.date.locale._getGregorianBundle(locale);
	var formatLength = options.formatLength || 'short';
	var datePattern = options.datePattern || bundle["dateFormat-" + formatLength];
	var timePattern = options.timePattern || bundle["timeFormat-" + formatLength];
	var pattern;
	if(options.selector == 'date'){
		pattern = datePattern;
	}else if(options.selector == 'time'){
		pattern = timePattern;
	}else{
		pattern = datePattern + ' ' + timePattern;  //TODO: use locale-specific pattern to assemble date + time
	}

	var tokens = [];
	var re = _processPattern(pattern, dojo.hitch(this, _buildDateTimeRE, tokens, bundle, options));
	return {regexp: re, tokens: tokens, bundle: bundle};
};

dojo.date.locale.parse = function(/*String*/value, /*Object?*/options){
	// summary:
	//		Convert a properly formatted string to a primitive Date object,
	//		using locale-specific settings.
	//
	// description:
	//		Create a Date object from a string using a known localized pattern.
	//		By default, this method parses looking for both date and time in the string.
	//		Formatting patterns are chosen appropriate to the locale.  Different
	//		formatting lengths may be chosen, with "full" used by default.
	//		Custom patterns may be used or registered with translations using
	//		the addCustomFormats method.
	//		Formatting patterns are implemented using the syntax described at
	//		http://www.unicode.org/reports/tr35/#Date_Format_Patterns
	//
	// value:
	//		A string representation of a date
	//
	// options: object {selector: string, formatLength: string, datePattern: string, timePattern: string, locale: string, strict: boolean}
	//		selector- choice of 'time', 'date' (default: date and time)
	//		formatLength- choice of long, short, medium or full (plus any custom additions).  Defaults to 'short'
	//		datePattern,timePattern- override pattern with this string
	//		am,pm- override strings for am/pm in times
	//		locale- override the locale used to determine formatting rules
	//		strict- strict parsing, off by default

	var info = dojo.date.locale._parseInfo(options);
	var tokens = info.tokens, bundle = info.bundle;
	var re = new RegExp("^" + info.regexp + "$");
	var match = re.exec(value);
	if(!match){ return null;  } // null

	var widthList = ['abbr', 'wide', 'narrow'];
	//1972 is a leap year.  We want to avoid Feb 29 rolling over into Mar 1,
	//in the cases where the year is parsed after the month and day.
	var result = new Date(1972, 0);
	var expected = {};
	var amPm = "";
	dojo.forEach(match, function(v, i){
		if(!i){return;}
		var token=tokens[i-1];
		var l=token.length;
		switch(token.charAt(0)){
			case 'y':
				if(l != 2){
					//interpret year literally, so '5' would be 5 A.D.
					result.setFullYear(v);
					expected.year = v;
				}else{
					if(v<100){
						v = Number(v);
						//choose century to apply, according to a sliding window
						//of 80 years before and 20 years after present year
						var year = '' + new Date().getFullYear();
						var century = year.substring(0, 2) * 100;
						var yearPart = Number(year.substring(2, 4));
						var cutoff = Math.min(yearPart + 20, 99);
						var num = (v < cutoff) ? century + v : century - 100 + v;
						result.setFullYear(num);
						expected.year = num;
					}else{
						//we expected 2 digits and got more...
						if(options.strict){
							return null;
						}
						//interpret literally, so '150' would be 150 A.D.
						//also tolerate '1950', if 'yyyy' input passed to 'yy' format
						result.setFullYear(v);
						expected.year = v;
					}
				}
				break;
			case 'M':
				if(l>2){
					var months = bundle['months-format-' + widthList[l-3]].concat();
					if(!options.strict){
						//Tolerate abbreviating period in month part
						//Case-insensitive comparison
						v = v.replace(".","").toLowerCase();
						months = dojo.map(months, function(s){ return s.replace(".","").toLowerCase();  } );
					}
					v = dojo.indexOf(months, v);
					if(v == -1){
//						console.debug("dojo.date.locale.parse: Could not parse month name: '" + v + "'.");
						return null;
					}
				}else{
					v--;
				}
				result.setMonth(v);
				expected.month = v;
				break;
			case 'E':
			case 'e':
				var days = bundle['days-format-' + widthList[l-3]].concat();
				if(!options.strict){
					//Case-insensitive comparison
					v = v.toLowerCase();
					days = dojo.map(days, "".toLowerCase);
				}
				v = dojo.indexOf(days, v);
				if(v == -1){
//					console.debug("dojo.date.locale.parse: Could not parse weekday name: '" + v + "'.");
					return null;
				}

				//TODO: not sure what to actually do with this input,
				//in terms of setting something on the Date obj...?
				//without more context, can't affect the actual date
				//TODO: just validate?
				break;
			case 'd':
				result.setDate(v);
				expected.date = v;
				break;
			case 'D':
				//FIXME: need to defer this until after the year is set for leap-year?
				result.setMonth(0);
				result.setDate(v);
				break;
			case 'a': //am/pm
				var am = options.am || bundle.am;
				var pm = options.pm || bundle.pm;
				if(!options.strict){
					var period = /\./g;
					v = v.replace(period,'').toLowerCase();
					am = am.replace(period,'').toLowerCase();
					pm = pm.replace(period,'').toLowerCase();
				}
				if(options.strict && v != am && v != pm){
//					console.debug("dojo.date.locale.parse: Could not parse am/pm part.");
					return null;
				}

				// we might not have seen the hours field yet, so store the state and apply hour change later
				amPm = (v == pm) ? 'p' : (v == am) ? 'a' : '';
				break;
			case 'K': //hour (1-24)
				if(v==24){v=0;}
				// fallthrough...
			case 'h': //hour (1-12)
			case 'H': //hour (0-23)
			case 'k': //hour (0-11)
				//TODO: strict bounds checking, padding
				if(v > 23){
//					console.debug("dojo.date.locale.parse: Illegal hours value");
					return null;
				}

				//in the 12-hour case, adjusting for am/pm requires the 'a' part
				//which could come before or after the hour, so we will adjust later
				result.setHours(v);
				break;
			case 'm': //minutes
				result.setMinutes(v);
				break;
			case 's': //seconds
				result.setSeconds(v);
				break;
			case 'S': //milliseconds
				result.setMilliseconds(v);
//				break;
//			case 'w':
//TODO				var firstDay = 0;
//			default:
//TODO: throw?
//				console.debug("dojo.date.locale.parse: unsupported pattern char=" + token.charAt(0));
		}
	});

	var hours = result.getHours();
	if(amPm === 'p' && hours < 12){
		result.setHours(hours + 12);  //e.g., 3pm -> 15
	}else if(amPm === 'a' && hours == 12){
		result.setHours(0);  //12am -> 0
	}

	//validate parse date fields versus input date fields
	if(expected.year && result.getFullYear() != expected.year){
//		console.debug("dojo.date.locale.parse: Parsed year: '" + result.getFullYear() + "' did not match input year: '" + expected.year + "'.");
		return null;
	}
	if(expected.month && result.getMonth() != expected.month){
//		console.debug("dojo.date.locale.parse: Parsed month: '" + result.getMonth() + "' did not match input month: '" + expected.month + "'.");
		return null;
	}
	if(expected.date && result.getDate() != expected.date){
//		console.debug("dojo.date.locale.parse: Parsed day of month: '" + result.getDate() + "' did not match input day of month: '" + expected.date + "'.");
		return null;
	}

	//TODO: implement a getWeekday() method in order to test 
	//validity of input strings containing 'EEE' or 'EEEE'...
	return result;  // Date
};

function _processPattern(pattern, applyPattern, applyLiteral, applyAll){
	//summary: Process a pattern with literals in it

	// Break up on single quotes, treat every other one as a literal, except '' which becomes '
	var identity = function(x){return x;};
	applyPattern = applyPattern || identity;
	applyLiteral = applyLiteral || identity;
	applyAll = applyAll || identity;

	//split on single quotes (which escape literals in date format strings) 
	//but preserve escaped single quotes (e.g., o''clock)
	var chunks = pattern.match(/(''|[^'])+/g);  
	var literal = false;

	dojo.forEach(chunks, function(chunk, i){
		if(!chunk){
			chunks[i]='';
		}else{
			chunks[i]=(literal ? applyLiteral : applyPattern)(chunk);
			literal = !literal;
		}
	});
	return applyAll(chunks.join(''));
}

function _buildDateTimeRE(tokens, bundle, options, pattern){
	pattern = dojo.regexp.escapeString(pattern);
	if(!options.strict){ pattern = pattern.replace(" a", " ?a");  } // kludge to tolerate no space before am/pm
	return pattern.replace(/([a-z])\1*/ig, function(match){
		// Build a simple regexp.  Avoid captures, which would ruin the tokens list
		var s;
		var c = match.charAt(0);
		var l = match.length;
		var p2 = '', p3 = '';
		if(options.strict){
			if(l > 1){ p2 = '0' + '{'+(l-1)+'}';  }
			if(l > 2){ p3 = '0' + '{'+(l-2)+'}';  }
		}else{
			p2 = '0?';  p3 = '0{0,2}';
		}
		switch(c){
			case 'y':
				s = '\\d{2,4}';
				break;
			case 'M':
				s = (l>2) ? '\\S+' : p2+'[1-9]|1[0-2]';
				break;
			case 'D':
				s = p2+'[1-9]|'+p3+'[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]';
				break;
			case 'd':
				s = p2+'[1-9]|[12]\\d|3[01]';
				break;
			case 'w':
				s = p2+'[1-9]|[1-4][0-9]|5[0-3]';
				break;
		    case 'E':
				s = '\\S+';
				break;
			case 'h': //hour (1-12)
				s = p2+'[1-9]|1[0-2]';
				break;
			case 'k': //hour (0-11)
				s = p2+'\\d|1[01]';
				break;
			case 'H': //hour (0-23)
				s = p2+'\\d|1\\d|2[0-3]';
				break;
			case 'K': //hour (1-24)
				s = p2+'[1-9]|1\\d|2[0-4]';
				break;
			case 'm':
			case 's':
				s = '[0-5]\\d';
				break;
			case 'S':
				s = '\\d{'+l+'}';
				break;
			case 'a':
				var am = options.am || bundle.am || 'AM';
				var pm = options.pm || bundle.pm || 'PM';
				if(options.strict){
					s = am + '|' + pm;
				}else{
					s = am + '|' + pm;
					if(am != am.toLowerCase()){ s += '|' + am.toLowerCase();  }
					if(pm != pm.toLowerCase()){ s += '|' + pm.toLowerCase();  }
				}
				break;
			default:
			// case 'v':
			// case 'z':
			// case 'Z':
				s = ".*";
//				console.debug("parse of date format, pattern=" + pattern);
		}

		if(tokens){ tokens.push(match);  }

		return "(" + s + ")";  // add capture
	}).replace(/[\xa0 ]/g, "[\\s\\xa0]");  // normalize whitespace.  Need explicit handling of \xa0 for IE.
}
})();

(function(){
var _customFormats = [];
dojo.date.locale.addCustomFormats = function(/*String*/packageName, /*String*/bundleName){
	// summary:
	//		Add a reference to a bundle containing localized custom formats to be
	//		used by date/time formatting and parsing routines.
	//
	// description:
	//		The user may add custom localized formats where the bundle has properties following the
	//		same naming convention used by dojo for the CLDR data: dateFormat-xxxx / timeFormat-xxxx
	//		The pattern string should match the format used by the CLDR.
	//		See dojo.date.format for details.
	//		The resources must be loaded by dojo.requireLocalization() prior to use

	_customFormats.push({pkg:packageName,name:bundleName});
};

dojo.date.locale._getGregorianBundle = function(/*String*/locale){
	var gregorian = {};
	dojo.forEach(_customFormats, function(desc){
		var bundle = dojo.i18n.getLocalization(desc.pkg, desc.name, locale);
		gregorian = dojo.mixin(gregorian, bundle);
	}, this);
	return gregorian;  /*Object*/
};
})();

dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");

dojo.date.locale.getNames = function(/*String*/item, /*String*/type, /*String?*/use, /*String?*/locale){
	// summary:
	//		Used to get localized strings from dojo.cldr for day or month names.
	//
	// item: 'months' || 'days'
	// type: 'wide' || 'narrow' || 'abbr' (e.g. "Monday", "Mon", or "M" respectively, in English)
	// use: 'standAlone' || 'format' (default)
	// locale: override locale used to find the names

	var label;
	var lookup = dojo.date.locale._getGregorianBundle(locale);
	var props = [item, use, type];
	if(use == 'standAlone'){
		label = lookup[props.join('-')];
	}
	props[1] = 'format';

	// return by copy so changes won't be made accidentally to the in-memory model
	return (label || lookup[props.join('-')]).concat();  /*Array*/
};

dojo.date.locale.isWeekend = function(/*Date?*/dateObject, /*String?*/locale){
	// summary:
	//	Determines if the date falls on a weekend, according to local custom.

	var weekend = dojo.cldr.supplemental.getWeekend(locale);
	var day = (dateObject || new Date()).getDay();
	if(weekend.end < weekend.start){
		weekend.end += 7;
		if(day < weekend.start){ day += 7;  }
	}
	return day >= weekend.start && day <= weekend.end;  // Boolean
};

// These are used only by format and strftime.  Do they need to be public?  Which module should they go in?

dojo.date.locale._getDayOfYear = function(/*Date*/dateObject){
	// summary: gets the day of the year as represented by dateObject
	return dojo.date.difference(new Date(dateObject.getFullYear(), 0, 1), dateObject) + 1;  // Number
};

dojo.date.locale._getWeekOfYear = function(/*Date*/dateObject, /*Number*/firstDayOfWeek){
	if(arguments.length == 1){ firstDayOfWeek = 0;  } // Sunday

	var firstDayOfYear = new Date(dateObject.getFullYear(), 0, 1).getDay();
	var adj = (firstDayOfYear - firstDayOfWeek + 7) % 7;
	var week = Math.floor((dojo.date.locale._getDayOfYear(dateObject) + adj - 1) / 7);

	// if year starts on the specified day, start counting weeks at 1
	if(firstDayOfYear == firstDayOfWeek){ week++;  }

	return week;  // Number
};

}

if(!dojo._hasResource["dijit._Calendar"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._Calendar"] = true;
dojo.provide("dijit._Calendar");








dojo.declare(
	"dijit._Calendar",
	[dijit._Widget, dijit._Templated],
	{
		/*
		summary:
			A simple GUI for choosing a date in the context of a monthly calendar.

		description:
			This widget is used internally by other widgets and is not accessible
			as a standalone widget.
			This widget can't be used in a form because it doesn't serialize the date to an
			<input> field.  For a form element, use DateTextBox instead.

			Note that the parser takes all dates attributes passed in the 'RFC 3339' format:
			http://www.faqs.org/rfcs/rfc3339.html (2005-06-30T08:05:00-07:00)
			so that they are serializable and locale-independent.

		usage:
			var calendar = new dijit._Calendar({}, dojo.byId("calendarNode"));
		 	-or-
			<div dojoType="dijit._Calendar"></div>
		*/
		templateString:"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset' dojoAttachPoint=\"decrementMonth\">\n\t\t\t\t<span class=\"dijitInline dijitCalendarIncrementControl dijitCalendarDecrease\"><span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow dijitCalendarIncrementControl dijitCalendarDecreaseInner\">-</span></span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div dojoAttachPoint=\"monthLabelSpacer\" class=\"dijitCalendarMonthLabelSpacer\"></div>\n\t\t\t\t<div dojoAttachPoint=\"monthLabelNode\" class=\"dijitCalendarMonth\"></div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' dojoAttachPoint=\"incrementMonth\">\n\t\t\t\t<div class=\"dijitInline dijitCalendarIncrementControl dijitCalendarIncrease\"><span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow dijitCalendarIncrementControl dijitCalendarIncreaseInner\">+</span></div>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"dijitReset dijitCalendarDayLabelTemplate\"><span class=\"dijitCalendarDayLabel\"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\">\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\"><span class=\"dijitCalendarDateLabel\"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\t\n",

		// value: Date
		// the currently selected Date
		value: new Date(),

		// dayWidth: String
		// How to represent the days of the week in the calendar header. See dojo.date.locale
		dayWidth: "narrow",

		setValue: function(/*Date*/ value){
			// summary: set the current date and update the UI.  If the date is disabled, the selection will
			//	not change, but the display will change to the corresponding month.
			if(!this.value || dojo.date.compare(value, this.value)){
				value = new Date(value);
				this.displayMonth = new Date(value);
				if(!this.isDisabledDate(value, this.lang)){
					this.value = value;
					this.value.setHours(0,0,0,0);
					this.onChange(this.value);
				}
				this._populateGrid();
			}
		},

		_setText: function(node, text){
			while(node.firstChild){
				node.removeChild(node.firstChild);
			}
			node.appendChild(document.createTextNode(text));
		},

		_populateGrid: function(){
			var month = this.displayMonth;
			month.setDate(1);
			var firstDay = month.getDay();
			var daysInMonth = dojo.date.getDaysInMonth(month);
			var daysInPreviousMonth = dojo.date.getDaysInMonth(dojo.date.add(month, "month", -1));
			var today = new Date();
			var selected = this.value;

			var dayOffset = dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);
			if(dayOffset > firstDay){ dayOffset -= 7;  }

			// Iterate through dates in the calendar and fill in date numbers and style info
			dojo.query(".dijitCalendarDateTemplate", this.domNode).forEach(function(template, i){
				i += dayOffset;
				var date = new Date(month);
				var number, clazz = "dijitCalendar", adj = 0;

				if(i < firstDay){
					number = daysInPreviousMonth - firstDay + i + 1;
					adj = -1;
					clazz += "Previous";
				}else if(i >= (firstDay + daysInMonth)){
					number = i - firstDay - daysInMonth + 1;
					adj = 1;
					clazz += "Next";
				}else{
					number = i - firstDay + 1;
					clazz += "Current";
				}

				if(adj){
					date = dojo.date.add(date, "month", adj);
				}
				date.setDate(number);

				if(!dojo.date.compare(date, today, "date")){
					clazz = "dijitCalendarCurrentDate " + clazz;
				}

				if(!dojo.date.compare(date, selected, "date")){
					clazz = "dijitCalendarSelectedDate " + clazz;
				}

				if(this.isDisabledDate(date, this.lang)){
					clazz = "dijitCalendarDisabledDate " + clazz;
				}

				template.className =  clazz + "Month dijitCalendarDateTemplate";
				template.dijitDateValue = date.valueOf();
				var label = dojo.query(".dijitCalendarDateLabel", template)[0];
				this._setText(label, date.getDate());
			}, this);

			// Fill in localized month name
			var monthNames = dojo.date.locale.getNames('months', 'wide', 'standAlone', this.lang);
			this._setText(this.monthLabelNode, monthNames[month.getMonth()]);

			// Fill in localized prev/current/next years
			var y = month.getFullYear() - 1;
			dojo.forEach(["previous", "current", "next"], function(name){
				this._setText(this[name+"YearLabelNode"],
					dojo.date.locale.format(new Date(y++, 0), {selector:'year', locale:this.lang}));
			}, this);

			// Set up repeating mouse behavior
			var _this = this;
			var typematic = function(nodeProp, dateProp, adj){
				dijit.typematic.addMouseListener(_this[nodeProp], _this, function(count){
					if(count >= 0){ _this._adjustDisplay(dateProp, adj);  }
				}, 0.8, 500);
			};
			typematic("incrementMonth", "month", 1);
			typematic("decrementMonth", "month", -1);
			typematic("nextYearLabelNode", "year", 1);
			typematic("previousYearLabelNode", "year", -1);
		},

		postCreate: function(){
			dijit._Calendar.superclass.postCreate.apply(this);

			var cloneClass = dojo.hitch(this, function(clazz, n){
				var template = dojo.query(clazz, this.domNode)[0];
	 			for(var i=0;  i<n;  i++){
					template.parentNode.appendChild(template.cloneNode(true));
				}
			});

			// clone the day label and calendar day templates 6 times to make 7 columns
			cloneClass(".dijitCalendarDayLabelTemplate", 6);
			cloneClass(".dijitCalendarDateTemplate", 6);

			// now make 6 week rows
			cloneClass(".dijitCalendarWeekTemplate", 5);

			// insert localized day names in the header
			var dayNames = dojo.date.locale.getNames('days', this.dayWidth, 'standAlone', this.lang);
			var dayOffset = dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);
			dojo.query(".dijitCalendarDayLabel", this.domNode).forEach(function(label, i){
				this._setText(label, dayNames[(i + dayOffset) % 7]);
			}, this);

			// Fill in spacer element with all the month names (invisible) so that the maximum width will affect layout
			var monthNames = dojo.date.locale.getNames('months', 'wide', 'standAlone', this.lang);
			dojo.forEach(monthNames, function(name){
				var monthSpacer = dojo.doc.createElement("div");
				this._setText(monthSpacer, name);
				this.monthLabelSpacer.appendChild(monthSpacer);
			}, this);

			this.value = null;
			this.setValue(new Date());
		},

		_adjustDisplay: function(/*String*/part, /*int*/amount){
			this.displayMonth = dojo.date.add(this.displayMonth, part, amount);
			this._populateGrid();
		},

		_onDayClick: function(/*Event*/evt){
			var node = evt.target;
			dojo.stopEvent(evt);
			while(!node.dijitDateValue){
				node = node.parentNode;
			}
			if(!dojo.hasClass(node, "dijitCalendarDisabledDate")){
				this.setValue(node.dijitDateValue);
				this.onValueSelected(this.value);
			}
		},

		onValueSelected: function(/*Date*/date){
			//summary: a date cell was selected.  It may be the same as the previous value.
		},

		onChange: function(/*Date*/date){
			//summary: called only when the selected date has changed
		},

		isDisabledDate: function(/*Date*/dateObject, /*String?*/locale){
			// summary:
			//	May be overridden to disable certain dates in the calendar e.g. isDisabledDate=dojo.date.locale.isWeekend
			return false;  // Boolean
		}
	}
);

}

if(!dojo._hasResource["dijit._TimePicker"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit._TimePicker"] = true;
dojo.provide("dijit._TimePicker");




dojo.declare("dijit._TimePicker",
	[dijit._Widget, dijit._Templated],
	{
		// summary:
		// A graphical time picker that TimeTextBox pops up
		// It is functionally modeled after the Java applet at http://java.arcadevillage.com/applets/timepica.htm
		// See ticket #599

		templateString:"<div id=\"widget_${id}\" class=\"dijitMenu\"\n    ><div dojoAttachPoint=\"upArrow\" class=\"dijitButtonNode\"><span class=\"dijitTimePickerA11yText\">&#9650;</span></div\n    ><div dojoAttachPoint=\"timeMenu,focusNode\" dojoAttachEvent=\"onclick:_onOptionSelected,onmouseover,onmouseout\"></div\n    ><div dojoAttachPoint=\"downArrow\" class=\"dijitButtonNode\"><span class=\"dijitTimePickerA11yText\">&#9660;</span></div\n></div>\n",
		baseClass: "dijitTimePicker",

		// clickableIncrement: String
		//		ISO-8601 string representing the amount by which
		//		every clickable element in the time picker increases
		//		Set in non-Zulu time, without a time zone
		//		Example: "T00:15:00" creates 15 minute increments
		//		Must divide visibleIncrement evenly
		clickableIncrement: "T00:15:00",

		// visibleIncrement: String
		//		ISO-8601 string representing the amount by which
		//		every element with a visible time in the time picker increases
		//		Set in non Zulu time, without a time zone
		//		Example: "T01:00:00" creates text in every 1 hour increment
		visibleIncrement: "T01:00:00",

		// visibleRange: String
		//		ISO-8601 string representing the range of this TimePicker
		//		The TimePicker will only display times in this range
		//		Example: "T05:00:00" displays 5 hours of options
		visibleRange: "T05:00:00",

		// value: String
		//		Date to display.
		//		Defaults to current time and date.
		//		Can be a Date object or an ISO-8601 string
		//		If you specify the GMT time zone ("-01:00"),
		//		the time will be converted to the local time in the local time zone.
		//		Otherwise, the time is considered to be in the local time zone.
		//		If you specify the date and isDate is true, the date is used.
		//		Example: if your local time zone is GMT -05:00,
		//		"T10:00:00" becomes "T10:00:00-05:00" (considered to be local time),
		//		"T10:00:00-01:00" becomes "T06:00:00-05:00" (4 hour difference),
		//		"T10:00:00Z" becomes "T05:00:00-05:00" (5 hour difference between Zulu and local time)
		//		"yyyy-mm-ddThh:mm:ss" is the format to set the date and time
		//		Example: "2007-06-01T09:00:00"
		value: new Date(),

		_visibleIncrement:2,
		_clickableIncrement:1,
		_totalIncrements:10,
		constraints:{},

		serialize: dojo.date.stamp.toISOString,

		setValue:function(/*Date*/ date, /*Boolean*/ priority){
			// summary:
			//	Set the value of the TimePicker
			//	Redraws the TimePicker around the new date

			//dijit._TimePicker.superclass.setValue.apply(this, arguments);
			this.value=date;
			this._showText();
		},

		isDisabledDate: function(/*Date*/dateObject, /*String?*/locale){
			// summary:
			//	May be overridden to disable certain dates in the TimePicker e.g. isDisabledDate=dojo.date.locale.isWeekend
			return false;  // Boolean
		},

		_showText:function(){
			this.timeMenu.innerHTML="";
			var fromIso = dojo.date.stamp.fromISOString;
			this._clickableIncrementDate=fromIso(this.clickableIncrement);
			this._visibleIncrementDate=fromIso(this.visibleIncrement);
			this._visibleRangeDate=fromIso(this.visibleRange);
			// get the value of the increments and the range in seconds (since 00:00:00) to find out how many divs to create
			var sinceMidnight = function(/*Date*/ date){
				return date.getHours()*60*60+date.getMinutes()*60+date.getSeconds();
			};

			var clickableIncrementSeconds = sinceMidnight(this._clickableIncrementDate);
			var visibleIncrementSeconds = sinceMidnight(this._visibleIncrementDate);
			var visibleRangeSeconds = sinceMidnight(this._visibleRangeDate);

			// round reference date to previous visible increment
			var time = this.value.getTime();
			this._refDate = new Date(time - time % (visibleIncrementSeconds*1000));

			// assume clickable increment is the smallest unit
			this._clickableIncrement=1;
			// divide the visible range by the clickable increment to get the number of divs to create
			// example: 10:00:00/00:15:00 -> display 40 divs
			this._totalIncrements=visibleRangeSeconds/clickableIncrementSeconds;
			// divide the visible increments by the clickable increments to get how often to display the time inline
			// example: 01:00:00/00:15:00 -> display the time every 4 divs
			this._visibleIncrement=visibleIncrementSeconds/clickableIncrementSeconds;
			for(var i=-this._totalIncrements/2;  i<=this._totalIncrements/2;  i+=this._clickableIncrement){
				var div=this._createOption(i);
				this.timeMenu.appendChild(div);
			}
			
			// TODO:
			// I commented this out because it
			// causes problems for a TimeTextBox in a Dialog, or as the editor of an InlineEditBox,
			// because the timeMenu node isn't visible yet. -- Bill (Bug #????)
			// dijit.focus(this.timeMenu);
		},

		postCreate:function(){
			// instantiate constraints
			if(this.constraints===dijit._TimePicker.prototype.constraints){
				this.constraints={};
			}
			// dojo.date.locale needs the lang in the constraints as locale
			if(!this.constraints.locale){
				this.constraints.locale=this.lang;
			}

			// assign typematic mouse listeners to the arrow buttons
			this.connect(this.timeMenu, dojo.isIE ? "onmousewheel" : 'DOMMouseScroll', "_mouseWheeled");
			dijit.typematic.addMouseListener(this.upArrow,this,this._onArrowUp, 0.8, 500);
			dijit.typematic.addMouseListener(this.downArrow,this,this._onArrowDown, 0.8, 500);
			//dijit.typematic.addListener(this.upArrow,this.timeMenu, {keyCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false}, this, "_onArrowUp", 0.8, 500);
			//dijit.typematic.addListener(this.downArrow, this.timeMenu, {keyCode:dojo.keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false}, this, "_onArrowDown", 0.8,500);

			this.inherited("postCreate", arguments);
			this.setValue(this.value);
		},

		_createOption:function(/*Number*/ index){
			// summary: creates a clickable time option
			var div=document.createElement("div");
			var date = (div.date = new Date(this._refDate));
			div.index=index;
			var incrementDate = this._clickableIncrementDate;
			date.setHours(date.getHours()+incrementDate.getHours()*index,
				date.getMinutes()+incrementDate.getMinutes()*index,
				date.getSeconds()+incrementDate.getSeconds()*index);

			var innerDiv = document.createElement('div');
			dojo.addClass(div,this.baseClass+"Item");
			dojo.addClass(innerDiv,this.baseClass+"ItemInner");
			innerDiv.innerHTML=dojo.date.locale.format(date, this.constraints);	 			
			div.appendChild(innerDiv);

			if(index%this._visibleIncrement<1 && index%this._visibleIncrement>-1){
				dojo.addClass(div, this.baseClass+"Marker");
			}else if(index%this._clickableIncrement==0){
				dojo.addClass(div, this.baseClass+"Tick");
			}
						
			if(this.isDisabledDate(date)){
				// set disabled
				dojo.addClass(div, this.baseClass+"ItemDisabled");
			}
			if(dojo.date.compare(this.value, date, this.constraints.selector)==0){
				div.selected=true;
				dojo.addClass(div, this.baseClass+"ItemSelected");
			}
			return div;
		},

		_onOptionSelected:function(/*Object*/ tgt){
			var tdate = tgt.target.date || tgt.target.parentNode.date;	 		
			if(!tdate||this.isDisabledDate(tdate)){return;}
			this.setValue(tdate);
			this.onValueSelected(tdate);
		},

		onValueSelected:function(value){
		},

		onmouseover:function(/*Event*/ e){
			var tgr = (e.target.parentNode === this.timeMenu) ? e.target : e.target.parentNode;	 		
			this._highlighted_option=tgr;
			dojo.addClass(tgr, this.baseClass+"ItemHover");
		},

		onmouseout:function(/*Event*/ e){
			var tgr = (e.target.parentNode === this.timeMenu) ? e.target : e.target.parentNode;
			if(this._highlighted_option===tgr){			
				dojo.removeClass(tgr, this.baseClass+"ItemHover");
			}
		},

		_mouseWheeled:function(/*Event*/e){
			// summary: handle the mouse wheel listener
			dojo.stopEvent(e);
			// we're not _measuring_ the scroll amount, just direction
			var scrollAmount = (dojo.isIE ? e.wheelDelta : -e.detail);
			this[(scrollAmount>0 ? "_onArrowUp" : "_onArrowDown")]();  // yes, we're making a new dom node every time you mousewheel, or click
		},

		_onArrowUp:function(){
			// summary: remove the bottom time and add one to the top
			var index=this.timeMenu.childNodes[0].index-1;
			var div=this._createOption(index);
			this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);
			this.timeMenu.insertBefore(div, this.timeMenu.childNodes[0]);
		},

		_onArrowDown:function(){
			// summary: remove the top time and add one to the bottom
			var index=this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1;
			var div=this._createOption(index);
			this.timeMenu.removeChild(this.timeMenu.childNodes[0]);
			this.timeMenu.appendChild(div);
		}
	}
);

}

if(!dojo._hasResource["dijit.form.TimeTextBox"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.TimeTextBox"] = true;
dojo.provide("dijit.form.TimeTextBox");







dojo.declare(
	"dijit.form.TimeTextBox",
	dijit.form.RangeBoundTextBox,
	{
		// summary:
		//		A validating, serializable, range-bound date text box.

		// constraints object: min, max
		regExpGen: dojo.date.locale.regexp,
		compare: dojo.date.compare,
		format: function(/*Date*/ value, /*Object*/ constraints){
			if(!value || value.toString() == this._invalid){ return null;  }
			return dojo.date.locale.format(value, constraints);
		},
		parse: dojo.date.locale.parse,
		serialize: dojo.date.stamp.toISOString,

		value: new Date(""),	// NaN
		_invalid: (new Date("")).toString(),	// NaN

		_popupClass: "dijit._TimePicker",

		postMixInProperties: function(){
			//dijit.form.RangeBoundTextBox.prototype.postMixInProperties.apply(this, arguments);
			this.inherited("postMixInProperties",arguments);
			var constraints = this.constraints;
			constraints.selector = 'time';
			if(typeof constraints.min == "string"){ constraints.min = dojo.date.stamp.fromISOString(constraints.min);  }
 			if(typeof constraints.max == "string"){ constraints.max = dojo.date.stamp.fromISOString(constraints.max);  }
		},

		_onFocus: function(/*Event*/ evt){
			// summary: open the TimePicker popup
			this._open();
		},

		setValue: function(/*Date*/ value, /*Boolean, optional*/ priorityChange){
			// summary:
			//	Sets the date on this textbox
			this.inherited('setValue', arguments);
			if(this._picker){
				// #3948: fix blank date on popup only
				if(!value || value.toString() == this._invalid){value=new Date();}
				this._picker.setValue(value);
			}
		},

		_open: function(){
			// summary:
			//	opens the TimePicker, and sets the onValueSelected value

			if(this.disabled){return;}

			var self = this;

			if(!this._picker){
				var popupProto=dojo.getObject(this._popupClass, false);
				this._picker = new popupProto({
					onValueSelected: function(value){

						self.focus();  // focus the textbox before the popup closes to avoid reopening the popup
						setTimeout(dojo.hitch(self, "_close"), 1);  // allow focus time to take

						// this will cause InlineEditBox and other handlers to do stuff so make sure it's last
						dijit.form.TimeTextBox.superclass.setValue.call(self, value, true);
					},
					lang: this.lang,
					constraints:this.constraints,
					isDisabledDate: function(/*Date*/ date){
						// summary:
						// 	disables dates outside of the min/max of the TimeTextBox
						return self.constraints && (dojo.date.compare(self.constraints.min,date) > 0 || dojo.date.compare(self.constraints.max,date) < 0);
					}
				});
				this._picker.setValue(this.getValue() || new Date());
			}
			if(!this._opened){
				dijit.popup.open({
					parent: this,
					popup: this._picker,
					around: this.domNode,
					onCancel: dojo.hitch(this, this._close),
					onClose: function(){ self._opened=false;  }
				});
				this._opened=true;
			}
			
			dojo.marginBox(this._picker.domNode,{ w:this.domNode.offsetWidth });
		},

		_close: function(){
			if(this._opened){
				dijit.popup.close(this._picker);
				this._opened=false;
			}			
		},

		_onBlur: function(){
			// summary: called magically when focus has shifted away from this widget and it's dropdown
			this._close();
			this.inherited('_onBlur', arguments);
			// don't focus on <input>.  the user has explicitly focused on something else.
		},

		getDisplayedValue:function(){
			return this.textbox.value;
		},

		setDisplayedValue:function(/*String*/ value){
			this.textbox.value=value;
		}
	}
);

}

if(!dojo._hasResource["dijit.form.DateTextBox"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.DateTextBox"] = true;
dojo.provide("dijit.form.DateTextBox");




dojo.declare(
	"dijit.form.DateTextBox",
	dijit.form.TimeTextBox,
	{
		// summary:
		//		A validating, serializable, range-bound date text box.

		_popupClass: "dijit._Calendar",

		postMixInProperties: function(){
			this.inherited('postMixInProperties', arguments);
			this.constraints.selector = 'date';
		}
	}
);

}

if(!dojo._hasResource["dijit.form.FilteringSelect"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.FilteringSelect"] = true;
dojo.provide("dijit.form.FilteringSelect");



dojo.declare(
	"dijit.form.FilteringSelect",
	[dijit.form.MappedTextBox, dijit.form.ComboBoxMixin],
	{
		/*
		 * summary
		 *	Enhanced version of HTML's <select> tag.
		 *
		 *	Similar features:
		 *	  - There is a drop down list of possible values.
		 *	- You can only enter a value from the drop down list.  (You can't enter an arbitrary value.)
		 *	- The value submitted with the form is the hidden value (ex: CA),
		 *	  not the displayed value a.k.a. label (ex: California)
		 *
		 *	Enhancements over plain HTML version:
		 *	- If you type in some text then it will filter down the list of possible values in the drop down list.
		 *	- List can be specified either as a static list or via a javascript function (that can get the list from a server)
		 */

		// searchAttr: String
		//		Searches pattern match against this field

		// labelAttr: String
		//		Optional.  The text that actually appears in the drop down.
		//		If not specified, the searchAttr text is used instead.
		labelAttr: "",

		// labelType: String
		//		"html" or "text"
		labelType: "text",

		_isvalid:true,

		isValid:function(){
			return this._isvalid;
		},

		_callbackSetLabel: function(/*Array*/ result, /*Object*/ dataObject, /*Boolean, optional*/ priorityChange){
			// summary
			//	Callback function that dynamically sets the label of the ComboBox

			// setValue does a synchronous lookup,
			// so it calls _callbackSetLabel directly,
			// and so does not pass dataObject
			// dataObject==null means do not test the lastQuery, just continue
			if(dataObject&&dataObject.query[this.searchAttr]!=this._lastQuery){return;}
			if(!result.length){
				//#3268: do nothing on bad input
				//this._setValue("", "");
				//#3285: change CSS to indicate error
				if(!this._hasFocus){ this.valueNode.value="";  }
				dijit.form.TextBox.superclass.setValue.call(this, undefined, !this._hasFocus);
				this._isvalid=false;
				this.validate(this._hasFocus);
			}else{
				this._setValueFromItem(result[0], priorityChange);
			}
		},

		_openResultList: function(/*Object*/ results, /*Object*/ dataObject){
			// #3285: tap into search callback to see if user's query resembles a match
			if(dataObject.query[this.searchAttr]!=this._lastQuery){return;}
			this._isvalid=results.length!=0;
			this.validate(true);
			dijit.form.ComboBoxMixin.prototype._openResultList.apply(this, arguments);
		},

		getValue:function(){
			// don't get the textbox value but rather the previously set hidden value
			return this.valueNode.value;
		},

		_getValueField:function(){
			// used for option tag selects
			return "value";
		},

		_setValue:function(/*String*/ value, /*String*/ displayedValue, /*Boolean, optional*/ priorityChange){
			this.valueNode.value = value;
			dijit.form.FilteringSelect.superclass.setValue.call(this, value, priorityChange, displayedValue);
			this._lastDisplayedValue = displayedValue;
		},

		setValue: function(/*String*/ value, /*Boolean, optional*/ priorityChange){
			// summary
			//	Sets the value of the select.
			//	Also sets the label to the corresponding value by reverse lookup.

			//#3347: fetchItemByIdentity if no keyAttr specified
			var self=this;
			var handleFetchByIdentity = function(item, priorityChange){
				if(item){
					if(self.store.isItemLoaded(item)){
						self._callbackSetLabel([item], undefined, priorityChange);
					}else{
						self.store.loadItem({item:item, onItem: function(result, dataObject){self._callbackSetLabel(result, dataObject, priorityChange)}});
					}
				}else{
					self._isvalid=false;
					// prevent errors from Tooltip not being created yet
					self.validate(false);
				}
			}
			this.store.fetchItemByIdentity({identity: value, onItem: function(item){handleFetchByIdentity(item, priorityChange)}});
		},

		_setValueFromItem: function(/*item*/ item, /*Boolean, optional*/ priorityChange){
			// summary
			//	Set the displayed valued in the input box, based on a selected item.
			//	Users shouldn't call this function;  they should be calling setDisplayedValue() instead
			this._isvalid=true;
			this._setValue(this.store.getIdentity(item), this.labelFunc(item, this.store), priorityChange);
		},

		labelFunc: function(/*item*/ item, /*dojo.data.store*/ store){
			// summary: Event handler called when the label changes
			// returns the label that the ComboBox should display
			return store.getValue(item, this.searchAttr);
		},

		onkeyup: function(/*Event*/ evt){
			// summary: internal function
			// FilteringSelect needs to wait for the complete label before committing to a reverse lookup
			//this.setDisplayedValue(this.textbox.value);
		},

		_doSelect: function(/*Event*/ tgt){
			// summary:
			//	ComboBox's menu callback function
			//	FilteringSelect overrides this to set both the visible and hidden value from the information stored in the menu
			this.item = tgt.item;
			this._setValueFromItem(tgt.item, true);
		},

		setDisplayedValue:function(/*String*/ label){
			// summary:
			//	Set textbox to display label
			//	Also performs reverse lookup to set the hidden value
			//	Used in InlineEditBox

			if(this.store){
				var query={};
				this._lastQuery=query[this.searchAttr]=label;
				// if the label is not valid, the callback will never set it,
				// so the last valid value will get the warning textbox
				// set the textbox value now so that the impending warning will make sense to the user
				this.textbox.value=label;
				this._lastDisplayedValue=label;
				this.store.fetch({query:query, queryOptions:{ignoreCase:this.ignoreCase, deep:true}, onComplete: dojo.hitch(this, this._callbackSetLabel)});
			}
		},

		_getMenuLabelFromItem:function(/*Item*/ item){
			// internal function to help ComboBoxMenu figure out what to display
			if(this.labelAttr){return {html:this.labelType=="html", label:this.store.getValue(item, this.labelAttr)};}
			else{
				// because this function is called by ComboBoxMenu, this.inherited tries to find the superclass of ComboBoxMenu
				return dijit.form.ComboBoxMixin.prototype._getMenuLabelFromItem.apply(this, arguments);
			}
		},

		postMixInProperties: function(){
			dijit.form.ComboBoxMixin.prototype.postMixInProperties.apply(this, arguments);
			dijit.form.MappedTextBox.prototype.postMixInProperties.apply(this, arguments);
		}
	}
);

}

if(!dojo._hasResource["dijit.form._Spinner"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form._Spinner"] = true;
dojo.provide("dijit.form._Spinner");



dojo.declare(
	"dijit.form._Spinner",
	dijit.form.RangeBoundTextBox,
	{

		// summary: Mixin for validation widgets with a spinner
		// description: This class basically (conceptually) extends dijit.form.ValidationTextBox.
		//	It modifies the template to have up/down arrows, and provides related handling code.

		// defaultTimeout: Number
		//	  number of milliseconds before a held key or button becomes typematic
		defaultTimeout: 500,

		// timeoutChangeRate: Number
		//	  fraction of time used to change the typematic timer between events
		//	  1.0 means that each typematic event fires at defaultTimeout intervals
		//	  < 1.0 means that each typematic event fires at an increasing faster rate
		timeoutChangeRate: 0.90,

		// smallDelta: Number
		//	  adjust the value by this much when spinning using the arrow keys/buttons
		smallDelta: 1,
		// largeDelta: Number
		//	  adjust the value by this much when spinning using the PgUp/Dn keys
		largeDelta: 10,

		templateString:"<table class=\"dijit dijitReset dijitInlineTable dijitLeft\" cellspacing=\"0\" cellpadding=\"0\"\n\tid=\"widget_${id}\" name=\"${name}\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onkeypress:_onKeyPress\"\n\twaiRole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td rowspan=\"2\" class=\"dijitReset dijitStretch dijitInputField\" width=\"100%\"\n\t\t\t><input dojoAttachPoint=\"textbox,focusNode\" type=\"${type}\" dojoAttachEvent=\"onfocus,onkeyup\"\n\t\t\t\twaiRole=\"spinbutton\" autocomplete=\"off\" name=\"${name}\"\n\t\t></td\n\t\t><td rowspan=\"2\" class=\"dijitReset dijitValidationIconField\" width=\"0%\" \n\t\t\t><div dojoAttachPoint='iconNode' class='dijitValidationIcon'></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitUpArrowButton\" width=\"0%\"\n\t\t\t\tdojoAttachPoint=\"upArrowNode\"\n\t\t\t\tdojoAttachEvent=\"onmousedown:_handleUpArrowEvent,onmouseup:_handleUpArrowEvent,onmouseover:_handleUpArrowEvent,onmouseout:_handleUpArrowEvent\"\n\t\t\t\tstateModifier=\"UpArrow\"\n\t\t\t><div class=\"dijitA11yUpArrow\">&#9650;</div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitDownArrowButton\" width=\"0%\"\n\t\t\t\tdojoAttachPoint=\"downArrowNode\"\n\t\t\t\tdojoAttachEvent=\"onmousedown:_handleDownArrowEvent,onmouseup:_handleDownArrowEvent,onmouseover:_handleDownArrowEvent,onmouseout:_handleDownArrowEvent\"\n\t\t\t\tstateModifier=\"DownArrow\"\n\t\t\t><div class=\"dijitA11yDownArrow\">&#9660;</div\n\t\t></td\n\t></tr\n></table>\n\n",
		baseClass: "dijitSpinner",

		adjust: function(/* Object */ val, /*Number*/ delta){
			// summary: user replaceable function used to adjust a primitive value(Number/Date/...) by the delta amount specified
			// the val is adjusted in a way that makes sense to the object type
			return val;
		},

		_handleUpArrowEvent : function(/*Event*/ e){
			this._onMouse(e, this.upArrowNode);
		},

		_handleDownArrowEvent : function(/*Event*/ e){
			this._onMouse(e, this.downArrowNode);
		},


		_arrowPressed: function(/*Node*/ nodePressed, /*Number*/ direction){
			if(this.disabled){ return;  }
			dojo.addClass(nodePressed, "dijitSpinnerButtonActive");
			this.setValue(this.adjust(this.getValue(), direction*this.smallDelta), false);
		},

		_arrowReleased: function(/*Node*/ node){
			if(this.disabled){ return;  }
			this._wheelTimer = null;
			dijit.focus(this.textbox);
			dojo.removeClass(node, "dijitSpinnerButtonActive");
		},

		_typematicCallback: function(/*Number*/ count, /*DOMNode*/ node, /*Event*/ evt){
			if(node == this.textbox){ node = (evt.keyCode == dojo.keys.UP_ARROW) ? this.upArrowNode : this.downArrowNode;  }
			if(count == -1){ this._arrowReleased(node);  }
			else{ this._arrowPressed(node, (node == this.upArrowNode) ? 1 : -1);  }
		},

		_wheelTimer: null,
		_mouseWheeled: function(/*Event*/ evt){
			dojo.stopEvent(evt);
			var scrollAmount = 0;
			if(typeof evt.wheelDelta == 'number'){ // IE
				scrollAmount = evt.wheelDelta;
			}else if(typeof evt.detail == 'number'){ // Mozilla+Firefox
				scrollAmount = -evt.detail;
			}
			if(scrollAmount > 0){
				var node = this.upArrowNode;
				var dir = +1;
			}else if(scrollAmount < 0){
				var node = this.downArrowNode;
				var dir = -1;
			}else{ return;  }
			this._arrowPressed(node, dir);
			if(this._wheelTimer != null){
				clearTimeout(this._wheelTimer);
			}
			var _this = this;
			this._wheelTimer = setTimeout(function(){_this._arrowReleased(node);}, 50);
		},

		postCreate: function(){
			this.inherited('postCreate', arguments);

			// extra listeners
			this.connect(this.textbox, dojo.isIE ? "onmousewheel" : 'DOMMouseScroll', "_mouseWheeled");
			dijit.typematic.addListener(this.upArrowNode, this.textbox, {keyCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false}, this, "_typematicCallback", this.timeoutChangeRate, this.defaultTimeout);
			dijit.typematic.addListener(this.downArrowNode, this.textbox, {keyCode:dojo.keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false}, this, "_typematicCallback", this.timeoutChangeRate, this.defaultTimeout);
		}
});

}

if(!dojo._hasResource["dijit.form.NumberSpinner"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.NumberSpinner"] = true;
dojo.provide("dijit.form.NumberSpinner");




dojo.declare(
"dijit.form.NumberSpinner",
[dijit.form._Spinner, dijit.form.NumberTextBoxMixin],
{
	// summary: Number Spinner
	// description: This widget is the same as NumberTextBox but with up/down arrows added

	required: true,

	adjust: function(/* Object */ val, /*Number*/ delta){
		// summary: change Number val by the given amount
		var newval = val+delta;
		if(isNaN(val) || isNaN(newval)){ return val;  }
		if((typeof this.constraints.max == "number") && (newval > this.constraints.max)){
			newval = this.constraints.max;
		}
		if((typeof this.constraints.min == "number") && (newval < this.constraints.min)){
			newval = this.constraints.min;
		}
		return newval;
	}
});

}

if(!dojo._hasResource["dijit.form.Slider"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.Slider"] = true;
dojo.provide("dijit.form.Slider");







dojo.declare(
	"dijit.form.HorizontalSlider",
	[dijit.form._FormWidget, dijit._Container],
{
	// summary
	//	A form widget that allows one to select a value with a horizontally draggable image

	templateString:"<table class=\"dijit dijitReset dijitSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,topDecoration\" class=\"dijitReset\" style=\"text-align:center;width:100%;\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitHorizontalSliderButtonContainer\"\n\t\t\t><div class=\"dijitHorizontalSliderDecrementIcon\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\" dojoAttachEvent=\"onclick: decrement\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitHorizontalSliderBumper dijitSliderLeftBumper dijitHorizontalSliderLeftBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" name=\"${name}\"\n\t\t\t/><div style=\"position:relative;\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitHorizontalSliderBar dijitSliderProgressBar dijitHorizontalSliderProgressBar\" dojoAttachEvent=\"onclick:_onBarClick\"\n\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderMoveable dijitHorizontalSliderMoveable\" dojoAttachEvent=\"onkeypress:_onKeyPress,onclick:_onHandleClick\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"\n\t\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitHorizontalSliderImageHandle\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitHorizontalSliderBar dijitSliderRemainingBar dijitHorizontalSliderRemainingBar\" dojoAttachEvent=\"onclick:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitHorizontalSliderBumper dijitSliderRightBumper dijitHorizontalSliderRightBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitHorizontalSliderButtonContainer\" style=\"right:0px;\"\n\t\t\t><div class=\"dijitHorizontalSliderIncrementIcon\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\" dojoAttachEvent=\"onclick: increment\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset\" style=\"text-align:center;\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n",
	value: 0,

	// showButtons: boolean
	//	Show increment/decrement buttons at the ends of the slider?
	showButtons: true,

	// minimum:: integer
	//	The minimum value allowed.
	minimum: 0,

	// maximum: integer
	//	The maximum allowed value.
	maximum: 100,

	// discreteValues: integer
	//	The maximum allowed values dispersed evenly between minimum and maximum (inclusive).
	discreteValues: Infinity,

	// pageIncrement: integer
	//	The amount of change with shift+arrow
	pageIncrement: 2,

	// clickSelect: boolean
	//	If clicking the progress bar changes the value or not
	clickSelect: true,

	widgetsInTemplate: true,

	attributeMap: dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),
		{id:"", name:"valueNode"}),

	baseClass: "dijitSlider",

	_mousePixelCoord: "pageX",
	_pixelCount: "w",
	_startingPixelCoord: "x",
	_startingPixelCount: "l",
	_handleOffsetCoord: "left",
	_progressPixelSize: "width",
	_upsideDown: false,

	_onKeyPress: function(/*Event*/ e){
		if(this.disabled || e.altKey || e.ctrlKey){ return;  }
		switch(e.keyCode){
			case dojo.keys.HOME:
				this.setValue(this.minimum, false);
				break;
			case dojo.keys.END:
				this.setValue(this.maximum, false);
				break;
			case dojo.keys.UP_ARROW:
			case (this._isReversed() ? dojo.keys.LEFT_ARROW : dojo.keys.RIGHT_ARROW):
			case dojo.keys.PAGE_UP:
				this.increment(e);
				break;
			case dojo.keys.DOWN_ARROW:
			case (this._isReversed() ? dojo.keys.RIGHT_ARROW : dojo.keys.LEFT_ARROW):
			case dojo.keys.PAGE_DOWN:
				this.decrement(e);
				break;
			default:
				this.inherited("_onKeyPress", arguments);
				return;
		}
		dojo.stopEvent(e);
	},

	_onHandleClick: function(e){
		if(this.disabled){ return;  }
		if(!dojo.isIE){
			// make sure you get focus when dragging the handle
			// (but don't do on IE because it causes a flicker on mouse up (due to blur then focus)
			dijit.focus(this.sliderHandle);
		}
		dojo.stopEvent(e);
	},
	
	_isReversed: function() {
		return !(this._upsideDown || this.isLeftToRight());
	},

	_onBarClick: function(e){
		if(this.disabled || !this.clickSelect){ return;  }
		dijit.focus(this.sliderHandle);
		dojo.stopEvent(e);
		var abspos = dojo.coords(this.sliderBarContainer, true);
		var pixelValue = e[this._mousePixelCoord] - abspos[this._startingPixelCoord];
		this._setPixelValue(this._isReversed() || this._upsideDown ? (abspos[this._pixelCount] - pixelValue) : pixelValue, abspos[this._pixelCount], true);
	},

	_setPixelValue: function(/*Number*/ pixelValue, /*Number*/ maxPixels, /*Boolean, optional*/ priorityChange){
		if(this.disabled){ return;  }
		pixelValue = pixelValue < 0 ? 0 : maxPixels < pixelValue ? maxPixels : pixelValue;
		var count = this.discreteValues;
		if(count <= 1 || count == Infinity){ count = maxPixels;  }
		count--;
		var pixelsPerValue = maxPixels / count;
		var wholeIncrements = Math.round(pixelValue / pixelsPerValue);
		this.setValue((this.maximum-this.minimum)*wholeIncrements/count + this.minimum, priorityChange);
	},

	setValue: function(/*Number*/ value, /*Boolean, optional*/ priorityChange){
		this.valueNode.value = this.value = value;
		this.inherited('setValue', arguments);
		var percent = (value - this.minimum) / (this.maximum - this.minimum);
		this.progressBar.style[this._progressPixelSize] = (percent*100) + "%";
		this.remainingBar.style[this._progressPixelSize] = ((1-percent)*100) + "%";
	},

	_bumpValue: function(signedChange){
		if(this.disabled){ return;  }
		var s = dojo.getComputedStyle(this.sliderBarContainer);
		var c = dojo._getContentBox(this.sliderBarContainer, s);
		var count = this.discreteValues;
		if(count <= 1 || count == Infinity){ count = c[this._pixelCount];  }
		count--;
		var value = (this.value - this.minimum) * count / (this.maximum - this.minimum) + signedChange;
		if(value < 0){ value = 0;  }
		if(value > count){ value = count;  }
		value = value * (this.maximum - this.minimum) / count + this.minimum;
		this.setValue(value, true);
	},

	decrement: function(e){
		// summary
		//	decrement slider by 1 unit
		this._bumpValue(e.keyCode == dojo.keys.PAGE_DOWN?-this.pageIncrement:-1);
	},

	increment: function(e){
		// summary
		//	increment slider by 1 unit
		this._bumpValue(e.keyCode == dojo.keys.PAGE_UP?this.pageIncrement:1);
	},

	_mouseWheeled: function(/*Event*/ evt){
		dojo.stopEvent(evt);
		var scrollAmount = 0;
		if(typeof evt.wheelDelta == 'number'){ // IE
			scrollAmount = evt.wheelDelta;
		}else if(typeof evt.detail == 'number'){ // Mozilla+Firefox
			scrollAmount = -evt.detail;
		}
		if(scrollAmount > 0){
			this.increment(evt);
		}else if(scrollAmount < 0){
			this.decrement(evt);
		}
	},

	startup: function(){
		dojo.forEach(this.getChildren(), function(child){
			if(this[child.container] != this.containerNode){
				this[child.container].appendChild(child.domNode);
			}
		}, this);
	},

	_onBlur: function(){
		dijit.form.HorizontalSlider.superclass.setValue.call(this, this.value, true);
	},

	postCreate: function(){
		if(this.showButtons){
			this.incrementButton.style.display="";
			this.decrementButton.style.display="";
		}
		this.connect(this.domNode, dojo.isIE ? "onmousewheel" : 'DOMMouseScroll', "_mouseWheeled");

		// define a custom constructor for a SliderMover that points back to me
		var _self = this;
		var mover = function(){
			dijit.form._SliderMover.apply(this, arguments);
			this.widget = _self;
		};
		dojo.extend(mover, dijit.form._SliderMover.prototype);

		this._movable = new dojo.dnd.Moveable(this.sliderHandle, {mover: mover});
		this.inherited('postCreate', arguments);
	},

	destroy: function(){
		this._movable.destroy();
		this.inherited('destroy', arguments);	 
	}
});

dojo.declare(
	"dijit.form.VerticalSlider",
	dijit.form.HorizontalSlider,
{
	// summary
	//	A form widget that allows one to select a value with a vertically draggable image

	templateString:"<table class=\"dijitReset dijitSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\"\n><tbody class=\"dijitReset\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitVerticalSliderButtonContainer\"\n\t\t\t><div class=\"dijitVerticalSliderIncrementIcon\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\" dojoAttachEvent=\"onclick: increment\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitVerticalSliderBumper dijitSliderTopBumper dijitVerticalSliderTopBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td dojoAttachPoint=\"leftDecoration\" class=\"dijitReset\" style=\"text-align:center;height:100%;\"></td\n\t\t><td class=\"dijitReset\" style=\"height:100%;\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" name=\"${name}\"\n\t\t\t/><center style=\"position:relative;height:100%;\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitVerticalSliderBar dijitSliderRemainingBar dijitVerticalSliderRemainingBar\" dojoAttachEvent=\"onclick:_onBarClick\"></div\n\t\t\t\t><div dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitVerticalSliderBar dijitSliderProgressBar dijitVerticalSliderProgressBar\" dojoAttachEvent=\"onclick:_onBarClick\"\n\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderMoveable\" dojoAttachEvent=\"onkeypress:_onKeyPress,onclick:_onHandleClick\" style=\"vertical-align:top;\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"\n\t\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitVerticalSliderImageHandle\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td dojoAttachPoint=\"containerNode,rightDecoration\" class=\"dijitReset\" style=\"text-align:center;height:100%;\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitVerticalSliderBumper dijitSliderBottomBumper dijitVerticalSliderBottomBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitVerticalSliderButtonContainer\"\n\t\t\t><div class=\"dijitVerticalSliderDecrementIcon\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\" dojoAttachEvent=\"onclick: decrement\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n></tbody></table>\n",
	_mousePixelCoord: "pageY",
	_pixelCount: "h",
	_startingPixelCoord: "y",
	_startingPixelCount: "t",
	_handleOffsetCoord: "top",
	_progressPixelSize: "height",
	_upsideDown: true
});

dojo.declare("dijit.form._SliderMover",
	dojo.dnd.Mover,
{
	onMouseMove: function(e){
		var widget = this.widget;
		var c = this.constraintBox;
		if(!c){
			var container = widget.sliderBarContainer;
			var s = dojo.getComputedStyle(container);
			var c = dojo._getContentBox(container, s);
			c[widget._startingPixelCount] = 0;
			this.constraintBox = c;
		}
		var m = this.marginBox;
		var pixelValue = widget._isReversed() ?
			e[widget._mousePixelCoord] - dojo._abs(widget.sliderBarContainer).x : 
			m[widget._startingPixelCount] + e[widget._mousePixelCoord];
		dojo.hitch(widget, "_setPixelValue")(widget._isReversed() || widget._upsideDown? (c[widget._pixelCount]-pixelValue) : pixelValue, c[widget._pixelCount]);
	},
	
	destroy: function(e){
		var widget = this.widget;
		widget.setValue(widget.value, true);
		dojo.dnd.Mover.prototype.destroy.call(this);
	}
});


dojo.declare("dijit.form.HorizontalRule", [dijit._Widget, dijit._Templated],
{
	//	Summary:
	//		Create hash marks for the Horizontal slider
	templateString: '<div class="RuleContainer HorizontalRuleContainer"></div>',

	// count: Integer
	//		Number of hash marks to generate
	count: 3,

	// container: Node
	//		If this is a child widget, connect it to this parent node
	container: "containerNode",

	// ruleStyle: String
	//		CSS style to apply to individual hash marks
	ruleStyle: "",

	_positionPrefix: '<div class="RuleMark HorizontalRuleMark" style="left:',
	_positionSuffix: '%;',
	_suffix: '"></div>',

	_genHTML: function(pos, ndx){
		return this._positionPrefix + pos + this._positionSuffix + this.ruleStyle + this._suffix;
	},
	
	_isHorizontal: true,

	postCreate: function(){
		if(this.count==1){
			var innerHTML = this._genHTML(50, 0);
		}else{
			var interval = 100 / (this.count-1);
			if(!this._isHorizontal || this.isLeftToRight()){
				var innerHTML = this._genHTML(0, 0);
				for(var i=1;  i < this.count-1;  i++){
					innerHTML += this._genHTML(interval*i, i);
				}
				innerHTML += this._genHTML(100, this.count-1);
			}else{
				var innerHTML = this._genHTML(100, 0);
				for(var i=1;  i < this.count-1;  i++){
					innerHTML += this._genHTML(100-interval*i, i);
				}
				innerHTML += this._genHTML(0, this.count-1);
			}
		}
		this.domNode.innerHTML = innerHTML;
	}
});

dojo.declare("dijit.form.VerticalRule", dijit.form.HorizontalRule,
{
	//	Summary:
	//		Create hash marks for the Vertical slider
	templateString: '<div class="RuleContainer VerticalRuleContainer"></div>',
	_positionPrefix: '<div class="RuleMark VerticalRuleMark" style="top:',
	
	_isHorizontal: false
});

dojo.declare("dijit.form.HorizontalRuleLabels", dijit.form.HorizontalRule,
{
	//	Summary:
	//		Create labels for the Horizontal slider
	templateString: '<div class="RuleContainer HorizontalRuleContainer"></div>',

	// labelStyle: String
	//		CSS style to apply to individual text labels
	labelStyle: "",

	// labels: Array
	//	Array of text labels to render - evenly spaced from left-to-right or bottom-to-top
	labels: [],

	// numericMargin: Integer
	//	Number of generated numeric labels that should be rendered as '' on the ends when labels[] are not specified
	numericMargin: 0,

	// numericMinimum: Integer
	//	Leftmost label value for generated numeric labels when labels[] are not specified
	minimum: 0,

	// numericMaximum: Integer
	//	Rightmost label value for generated numeric labels when labels[] are not specified
	maximum: 1,

	// constraints: object
	//	pattern, places, lang, et al (see dojo.number) for generated numeric labels when labels[] are not specified
	constraints: {pattern:"#%"},

	_positionPrefix: '<div class="RuleLabelContainer HorizontalRuleLabelContainer" style="left:',
	_labelPrefix: '"><span class="RuleLabel HorizontalRuleLabel">',
	_suffix: '</span></div>',

	_calcPosition: function(pos){
		return pos;
	},

	_genHTML: function(pos, ndx){
		return this._positionPrefix + this._calcPosition(pos) + this._positionSuffix + this.labelStyle + this._labelPrefix + this.labels[ndx] + this._suffix;
	},

	getLabels: function(){
		// summary: user replaceable function to return the labels array

		// if the labels array was not specified directly, then see if <li> children were
		var labels = this.labels;
		if(!labels.length){
			// for markup creation, labels are specified as child elements
			labels = dojo.query("> li", this.srcNodeRef).map(function(node){
				return String(node.innerHTML);
			});
		}
		this.srcNodeRef.innerHTML = '';
		// if the labels were not specified directly and not as <li> children, then calculate numeric labels
		if(!labels.length && this.count > 1){
			var start = this.minimum;
			var inc = (this.maximum - start) / (this.count-1);
			for (var i=0;  i < this.count;  i++){
				labels.push((i<this.numericMargin||i>=(this.count-this.numericMargin))? '' : dojo.number.format(start, this.constraints));
				start += inc;
			}
		}
		return labels;
	},

	postMixInProperties: function(){
		this.inherited('postMixInProperties', arguments);
		this.labels = this.getLabels();
		this.count = this.labels.length;
	}
});

dojo.declare("dijit.form.VerticalRuleLabels", dijit.form.HorizontalRuleLabels,
{
	//	Summary:
	//		Create labels for the Vertical slider
	templateString: '<div class="RuleContainer VerticalRuleContainer"></div>',

	_positionPrefix: '<div class="RuleLabelContainer VerticalRuleLabelContainer" style="top:',
	_labelPrefix: '"><span class="RuleLabel VerticalRuleLabel">',

	_calcPosition: function(pos){
		return 100-pos;
	},
	
	_isHorizontal: false
});

}

if(!dojo._hasResource["dijit.form.Textarea"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.form.Textarea"] = true;
dojo.provide("dijit.form.Textarea");





dojo.declare(
	"dijit.form.Textarea",
	dijit.form._FormWidget,
{
	// summary
	//	A textarea that resizes vertically to contain the data.
	//	Takes nearly all the parameters (name, value, etc.) that a vanilla textarea takes.
	//	Cols is not supported and the width should be specified with style width.
	//	Rows is not supported since this widget adjusts the height.
	// usage:
	//	<textarea dojoType="dijit.form.TextArea">...</textarea>

	attributeMap: dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),
		{style:"styleNode", 'class':"styleNode"}),


	//@mpt build script unescaped;  monkeys strike again.
/*

*/
	templateString: '<textarea id="${id}" name="${name}" value="${value}" dojoAttachPoint="formValueNode,editNode,focusNode,styleNode" class="dijitInputField dijitTextArea"></textarea>',

	focus: function(){
		// summary: Received focus, needed for the InlineEditBox widget
		if(!this.disabled){
			this._changing();  // set initial height
		}
		if(dojo.isMozilla){
			dijit.focus(this.iframe);
		}else{
			dijit.focus(this.focusNode);
		}
	},

	setValue: function(/*String*/ value, /*Boolean, optional*/ priorityChange){
		var editNode = this.editNode;
		if(typeof value == "string"){
			editNode.innerHTML = "";  // wipe out old nodes
			if(value.split){
				var _this=this;
				var isFirst = true;
				dojo.forEach(value.split("\n"), function(line){
					if(isFirst){ isFirst = false;  }
					else {
						editNode.appendChild(document.createElement("BR"));  // preserve line breaks
					}
					editNode.appendChild(document.createTextNode(line));  // use text nodes so that imbedded tags can be edited
				});
			}else{
				editNode.appendChild(document.createTextNode(value));
			}
		}else{
			// blah<BR>blah --> blah\nblah
			// <P>blah</P><P>blah</P> --> blah\nblah
			// <DIV>blah</DIV><DIV>blah</DIV> --> blah\nblah
			// &amp;&lt;&gt;  -->&< >
			value = editNode.innerHTML;
			if(this.iframe){ // strip sizeNode
				value = value.replace(/<div><\/div>\r?\n?$/i,"");
			}
			value = value.replace(/\s*\r?\n|^\s+|\s+$|&nbsp;/g,"").replace(/>\s+</g,"><").replace(/<\/(p|div)>$|^<(p|div)[^>]*>/gi,"").replace(/([^>])<div>/g,"$1\n").replace(/<\/p>\s*<p[^>]*>|<br[^>]*>/gi,"\n").replace(/<[^>]*>/g,"").replace(/&amp;/gi,"\&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">");
		}
		this.value = this.formValueNode.value = value;
		if(this.iframe){
			var sizeNode = document.createElement('div');
			editNode.appendChild(sizeNode);
			var newHeight = sizeNode.offsetTop;
			if(editNode.scrollWidth > editNode.clientWidth){ newHeight+=16;  } // scrollbar space needed?
			if(this.lastHeight != newHeight){ // cache size so that we don't get a resize event because of a resize event
				if(newHeight == 0){ newHeight = 16;  } // height = 0 causes the browser to not set scrollHeight
				dojo.contentBox(this.iframe, {h: newHeight});
				this.lastHeight = newHeight;
			}
			editNode.removeChild(sizeNode);
		}
		dijit.form.Textarea.superclass.setValue.call(this, this.getValue(), priorityChange);
	},

	getValue: function(){
		return this.formValueNode.value.replace(/\r/g,"");
	},

	postMixInProperties: function(){
		dijit.form.Textarea.superclass.postMixInProperties.apply(this,arguments);
		// don't let the source text be converted to a DOM structure since we just want raw text
		if(this.srcNodeRef && this.srcNodeRef.innerHTML != ""){
			this.value = this.srcNodeRef.innerHTML;
			this.srcNodeRef.innerHTML = "";
		}
		if((!this.value || this.value == "") && this.srcNodeRef && this.srcNodeRef.value){
			this.value = this.srcNodeRef.value;
		}
		if(!this.value){ this.value = "";  }
		this.value = this.value.replace(/\r\n/g,"\n").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");
		if(dojo.isMozilla){
			// In the case of Firefox an iframe is used and when the text gets focus,
			// focus is fired from the document object.  There isn't a way to put a
			// waiRole on the document object and as a result screen readers don't
			// announce the role.  As a result screen reader users are lost.
			//
			// An additional problem is that the browser gives the document object a
			// very cryptic accessible name, e.g.
			// wysiwyg://13/http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/tests/form/test_InlineEditBox.html
			// When focus is fired from the document object, the screen reader speaks
			// the accessible name.  The cyptic accessile name is confusing.
			//
			// A workaround for both of these problems is to give the iframe's
			// document a title, the name of which is similar to a role name, i.e.
			// "edit area".  This will be used as the accessible name which will replace
			// the cryptic name and will also convey the role information to the user.
			// Because it is read directly to the user, the string must be localized.
			// In addition, since a <label> element can not be associated with an iframe, if 
			// this control has a label, insert the text into the title as well.
			var _nlsResources = dojo.i18n.getLocalization("dijit", "Textarea");
			this._iframeEditTitle = _nlsResources.iframeEditTitle;
			this._iframeFocusTitle = _nlsResources.iframeFocusTitle;
			var label=dojo.query('label[for="'+this.id+'"]');
			if(label.length){
				this._iframeEditTitle = label[0].innerHTML + " " + this._iframeEditTitle;
			}
			var body = this.focusNode = this.editNode = document.createElement('BODY');
			body.style.margin="0px";
			body.style.padding="0px";
			body.style.border="0px";
		}
	},

	postCreate: function(){
		if(dojo.isIE || dojo.isSafari){
			this.domNode.style.overflowY = 'hidden';
		}else if(dojo.isMozilla){
			var w = this.iframe.contentWindow;
			try { // #4715: peeking at the title can throw a security exception during iframe setup
				var title = this.iframe.contentDocument.title;
			} catch(e) { var title = '';  }
			if(!w || !title){
				this.iframe.postCreate = dojo.hitch(this, this.postCreate);
				return;
			}
			var d = w.document;
			d.getElementsByTagName('HTML')[0].replaceChild(this.editNode, d.getElementsByTagName('BODY')[0]);
			if(!this.isLeftToRight()){
				d.getElementsByTagName('HTML')[0].dir = "rtl";
			}			
			this.iframe.style.overflowY = 'hidden';
			this.eventNode = d;
			// this.connect won't destroy this handler cleanly since its on the iframe's window object
			// resize is a method of window, not document
			w.addEventListener("resize", dojo.hitch(this, this._changed), false);  // resize is only on the window object
		}else{
			this.focusNode = this.domNode;
		}
		if(this.eventNode){
			this.connect(this.eventNode, "keypress", this._onKeyPress);
			this.connect(this.eventNode, "mousemove", this._changed);
			this.connect(this.eventNode, "focus", this._focused);
			this.connect(this.eventNode, "blur", this._blurred);
		}
		if(this.editNode){
			this.connect(this.editNode, "change", this._changed);  // needed for mouse paste events per #3479
		}
		this.inherited('postCreate', arguments);
	},

	// event handlers, you can over-ride these in your own subclasses
	_focused: function(e){
		dojo.addClass(this.iframe||this.domNode, "dijitInputFieldFocused");
		this._changed(e);
	},

	_blurred: function(e){
		dojo.removeClass(this.iframe||this.domNode, "dijitInputFieldFocused");
		this._changed(e, true);
	},

	_onIframeBlur: function(){
		// Reset the title back to "edit area".
		this.iframe.contentDocument.title = this._iframeEditTitle;
	},

	_onKeyPress: function(e){
		if(e.keyCode == dojo.keys.TAB && !e.shiftKey && !e.ctrlKey && !e.altKey && this.iframe){
			// Pressing the tab key in the iframe (with designMode on) will cause the
			// entry of a tab character so we have to trap that here.  Since we don't
			// know the next focusable object we put focus on the iframe and then the
			// user has to press tab again (which then does the expected thing).
			// A problem with that is that the screen reader user hears "edit area"
			// announced twice which causes confusion.  By setting the
			// contentDocument's title to "edit area frame" the confusion should be
			// eliminated.
			this.iframe.contentDocument.title = this._iframeFocusTitle;
			// Place focus on the iframe. A subsequent tab or shift tab will put focus
			// on the correct control.
			// Note: Can't use this.focus() because that results in a call to
			// dijit.focus and if that receives an iframe target it will set focus
			// on the iframe's contentWindow.
			this.iframe.focus();   // this.focus();  won't work
			dojo.stopEvent(e);
		}else if(e.keyCode == dojo.keys.ENTER){
			e.stopPropagation();
		}else if(this.inherited("_onKeyPress", arguments) && this.iframe){
			// #3752:
			// The key press will not make it past the iframe.
			// If a widget is listening outside of the iframe, (like InlineEditBox)
			// it will not hear anything.
			// Create an equivalent event so everyone else knows what is going on.
			var te = document.createEvent("KeyEvents");
			te.initKeyEvent("keypress", true, true, null, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.keyCode, e.charCode);
			this.iframe.dispatchEvent(te);
		}
		this._changing();
	},

	_changing: function(e){
		// summary: event handler for when a change is imminent
		setTimeout(dojo.hitch(this, "_changed", e, false), 1);
	},

	_changed: function(e, priorityChange){
		// summary: event handler for when a change has already happened
		if(this.iframe && this.iframe.contentDocument.designMode != "on"){
			this.iframe.contentDocument.designMode="on";  // in case this failed on init due to being hidden
		}
		this.setValue(null, priorityChange);
	}
});

}

if(!dojo._hasResource["dijit.layout.StackContainer"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.layout.StackContainer"] = true;
dojo.provide("dijit.layout.StackContainer");





dojo.declare(
	"dijit.layout.StackContainer",
	dijit.layout._LayoutWidget,

	// summary
	//	A container that has multiple children, but shows only
	//	one child at a time (like looking at the pages in a book one by one).
	//
	//	Publishes topics <widgetId>-addChild, <widgetId>-removeChild, and <widgetId>-selectChild
	//
	//	Can be base class for container, Wizard, Show, etc.
{
	// doLayout: Boolean
	//  if true, change the size of my currently displayed child to match my size
	doLayout: true,

	_started: false,

	// selectedChildWidget: Widget
	//	References the currently selected child widget, if any

	postCreate: function(){
		dijit.setWaiRole((this.containerNode || this.domNode), "tabpanel");
		this.connect(this.domNode, "onkeypress", this._onKeyPress);
	},
	
	startup: function(){
		if(this._started){ return;  }

		var children = this.getChildren();

		// Setup each page panel
		dojo.forEach(children, this._setupChild, this);

		// Figure out which child to initially display
		dojo.some(children, function(child){
			if(child.selected){
				this.selectedChildWidget = child;
			}
			return child.selected;
		}, this);

		var selected = this.selectedChildWidget;

		// Default to the first child
		if(!selected && children[0]){
			selected = this.selectedChildWidget = children[0];
			selected.selected = true;
		}
		if(selected){
			this._showChild(selected);
		}

		// Now publish information about myself so any StackControllers can initialize..
		dojo.publish(this.id+"-startup", [{children: children, selected: selected}]);
		this.inherited("startup",arguments);
		this._started = true;
	},

	_setupChild: function(/*Widget*/ page){
		// Summary: prepare the given child

		page.domNode.style.display = "none";

		// since we are setting the width/height of the child elements, they need
		// to be position:relative, or IE has problems (See bug #2033)
		page.domNode.style.position = "relative";

		return page;  // dijit._Widget
	},

	addChild: function(/*Widget*/ child, /*Integer?*/ insertIndex){
		// summary: Adds a widget to the stack
		 
		dijit._Container.prototype.addChild.apply(this, arguments);
		child = this._setupChild(child);

		if(this._started){
			// in case the tab titles have overflowed from one line to two lines
			this.layout();

			dojo.publish(this.id+"-addChild", [child, insertIndex]);

			// if this is the first child, then select it
			if(!this.selectedChildWidget){
				this.selectChild(child);
			}
		}
	},

	removeChild: function(/*Widget*/ page){
		// summary: Removes the pane from the stack

		dijit._Container.prototype.removeChild.apply(this, arguments);

		// If we are being destroyed than don't run the code below (to select another page), because we are deleting
		// every page one by one
		if(this._beingDestroyed){ return;  }

		if(this._started){
			// this will notify any tablists to remove a button;  do this first because it may affect sizing
			dojo.publish(this.id+"-removeChild", [page]);

			// in case the tab titles now take up one line instead of two lines
			this.layout();
		}

		if(this.selectedChildWidget === page){
			this.selectedChildWidget = undefined;
			if(this._started){
				var children = this.getChildren();
				if(children.length){
					this.selectChild(children[0]);
				}
			}
		}
	},

	selectChild: function(/*Widget*/ page){
		// summary:
		//	Show the given widget (which must be one of my children)

		page = dijit.byId(page);

		if(this.selectedChildWidget != page){
			// Deselect old page and select new one
			this._transition(page, this.selectedChildWidget);
			this.selectedChildWidget = page;
			dojo.publish(this.id+"-selectChild", [page]);
		}
	},

	_transition: function(/*Widget*/newWidget, /*Widget*/oldWidget){
		if(oldWidget){
			this._hideChild(oldWidget);
		}
		this._showChild(newWidget);

		// Size the new widget, in case this is the first time it's being shown,
		// or I have been resized since the last time it was shown.
		// page must be visible for resizing to work
		if(this.doLayout && newWidget.resize){
			newWidget.resize(this._containerContentBox || this._contentBox);
		}
	},

	_adjacent: function(/*Boolean*/ forward){
		// summary: Gets the next/previous child widget in this container from the current selection
		var children = this.getChildren();
		var index = dojo.indexOf(children, this.selectedChildWidget);
		index += forward ? 1 : children.length - 1;
		return children[ index % children.length ];  // dijit._Widget
	},

	forward: function(){
		// Summary: advance to next page
		this.selectChild(this._adjacent(true));
	},

	back: function(){
		// Summary: go back to previous page
		this.selectChild(this._adjacent(false));
	},

	_onKeyPress: function(e){
		dojo.publish(this.id+"-containerKeyPress", [{ e: e, page: this}]);
	},

	layout: function(){
		if(this.doLayout && this.selectedChildWidget && this.selectedChildWidget.resize){
			this.selectedChildWidget.resize(this._contentBox);
		}
	},

	_showChild: function(/*Widget*/ page){
		var children = this.getChildren();
		page.isFirstChild = (page == children[0]);
		page.isLastChild = (page == children[children.length-1]);
		page.selected = true;

		page.domNode.style.display="";
		if(page._loadCheck){
			page._loadCheck();  // trigger load in ContentPane
		}
		if(page.onShow){
			page.onShow();
		}
	},

	_hideChild: function(/*Widget*/ page){
		page.selected=false;
		page.domNode.style.display="none";
		if(page.onHide){
			page.onHide();
		}
	},

	closeChild: function(/*Widget*/ page){
		// summary
		//	callback when user clicks the [X] to remove a page
		//	if onClose() returns true then remove and destroy the childd
		var remove = page.onClose(this, page);
		if(remove){
			this.removeChild(page);
			// makes sure we can clean up executeScripts in ContentPane onUnLoad
			page.destroy();
		}
	},

	destroy: function(){
		this._beingDestroyed = true;
		this.inherited("destroy",arguments);
	}
});

dojo.declare(
	"dijit.layout.StackController",
	[dijit._Widget, dijit._Templated, dijit._Container],
	{
		// summary:
		//	Set of buttons to select a page in a page list.
		//	Monitors the specified StackContainer, and whenever a page is
		//	added, deleted, or selected, updates itself accordingly.

		templateString: "<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",

		// containerId: String
		//	the id of the page container that I point to
		containerId: "",

		// buttonWidget: String
		//	the name of the button widget to create to correspond to each page
		buttonWidget: "dijit.layout._StackButton",

		postCreate: function(){
			dijit.setWaiRole(this.domNode, "tablist");

			this.pane2button = {};	 	// mapping from panes to buttons
			this._subscriptions=[
				dojo.subscribe(this.containerId+"-startup", this, "onStartup"),
				dojo.subscribe(this.containerId+"-addChild", this, "onAddChild"),
				dojo.subscribe(this.containerId+"-removeChild", this, "onRemoveChild"),
				dojo.subscribe(this.containerId+"-selectChild", this, "onSelectChild"),
				dojo.subscribe(this.containerId+"-containerKeyPress", this, "onContainerKeyPress")
			];
		},

		onStartup: function(/*Object*/ info){
			// summary: called after StackContainer has finished initializing
			dojo.forEach(info.children, this.onAddChild, this);
			this.onSelectChild(info.selected);
		},

		destroy: function(){
			dojo.forEach(this._subscriptions, dojo.unsubscribe);
			this.inherited("destroy",arguments);
		},

		onAddChild: function(/*Widget*/ page, /*Integer?*/ insertIndex){
			// summary:
			//   Called whenever a page is added to the container.
			//   Create button corresponding to the page.

			// add a node that will be promoted to the button widget
			var refNode = document.createElement("span");
			this.domNode.appendChild(refNode);
			// create an instance of the button widget
			var cls = dojo.getObject(this.buttonWidget);
			var button = new cls({label: page.title, closeButton: page.closable}, refNode);
			this.addChild(button, insertIndex);
			this.pane2button[page] = button;
			page.controlButton = button;	 // this value might be overwritten if two tabs point to same container
			
			dojo.connect(button, "onClick", dojo.hitch(this,"onButtonClick",page));
			dojo.connect(button, "onClickCloseButton", dojo.hitch(this,"onCloseButtonClick",page));
			
			if(!this._currentChild){ // put the first child into the tab order
				button.focusNode.setAttribute("tabIndex","0");
				this._currentChild = page;
			}
		},

		onRemoveChild: function(/*Widget*/ page){
			// summary:
			//   Called whenever a page is removed from the container.
			//   Remove the button corresponding to the page.
			if(this._currentChild === page){ this._currentChild = null;  }
			var button = this.pane2button[page];
			if(button){
				// TODO? if current child { reassign }
				button.destroy();
			}
			this.pane2button[page] = null;
		},

		onSelectChild: function(/*Widget*/ page){
			// summary:
			//	Called when a page has been selected in the StackContainer, either by me or by another StackController

			if(!page){ return;  }

			if(this._currentChild){
				var oldButton=this.pane2button[this._currentChild];
				oldButton.setChecked(false);
				oldButton.focusNode.setAttribute("tabIndex", "-1");
			}

			var newButton=this.pane2button[page];
			newButton.setChecked(true);
			this._currentChild = page;
			newButton.focusNode.setAttribute("tabIndex", "0");
		},

		onButtonClick: function(/*Widget*/ page){
			// summary:
			//   Called whenever one of my child buttons is pressed in an attempt to select a page
			var container = dijit.byId(this.containerId);	 // TODO: do this via topics?
			container.selectChild(page);  
		},

		onCloseButtonClick: function(/*Widget*/ page){
			// summary:
			//   Called whenever one of my child buttons [X] is pressed in an attempt to close a page
			var container = dijit.byId(this.containerId);
			container.closeChild(page);
			var b = this.pane2button[this._currentChild];
			if(b){
				dijit.focus(b.focusNode || b.domNode);
			}
		},
		
		// TODO: this is a bit redundant with forward, back api in StackContainer
		adjacent: function(/*Boolean*/ forward){
			// find currently focused button in children array
			var children = this.getChildren();
			var current = dojo.indexOf(children, this.pane2button[this._currentChild]);
			// pick next button to focus on
			var offset = forward ? 1 : children.length - 1;
			return children[ (current + offset) % children.length ];  // dijit._Widget
		},

		onkeypress: function(/*Event*/ e){
			// summary:
			//   Handle keystrokes on the page list, for advancing to next/previous button
			//   and closing the current page if the page is closable.

			if(this.disabled || e.altKey ){ return;  }
			var forward = true;
			if(e.ctrlKey || !e._djpage){
				var k = dojo.keys;
				switch(e.keyCode){
					case k.LEFT_ARROW:
					case k.UP_ARROW:
					case k.PAGE_UP:
						forward = false;
						// fall through
					case k.RIGHT_ARROW:
					case k.DOWN_ARROW:
					case k.PAGE_DOWN:
						this.adjacent(forward).onClick();
						dojo.stopEvent(e);
						break;
					case k.DELETE:
						if(this._currentChild.closable){
							this.onCloseButtonClick(this._currentChild);
						}
						dojo.stopEvent(e);
						break;
					default:
						if(e.ctrlKey){
							if(e.keyCode == k.TAB){
								this.adjacent(!e.shiftKey).onClick();
								dojo.stopEvent(e);
							}else if(e.keyChar == "w"){
								if(this._currentChild.closable){
									this.onCloseButtonClick(this._currentChild);
								}
								dojo.stopEvent(e);  // avoid browser tab closing.
							}
						}
				}
			}
		},

		onContainerKeyPress: function(/*Object*/ info){
			info.e._djpage = info.page;
			this.onkeypress(info.e);
		}
});

dojo.declare("dijit.layout._StackButton",
	dijit.form.ToggleButton,
	{
	// summary
	//	Internal widget used by StackContainer.
	//	The button-like or tab-like object you click to select or delete a page
	
	tabIndex: "-1", // StackContainer buttons are not in the tab order by default
	
	postCreate: function(/*Event*/ evt){
		dijit.setWaiRole((this.focusNode || this.domNode), "tab");
		this.inherited("postCreate", arguments);
	},
	
	onClick: function(/*Event*/ evt){
		// summary: This is for TabContainer where the tabs are <span> rather than button,
		// 	so need to set focus explicitly (on some browsers)
		dijit.focus(this.focusNode);

		// ... now let StackController catch the event and tell me what to do
	},

	onClickCloseButton: function(/*Event*/ evt){
		// summary
		//	StackContainer connects to this function;  if your widget contains a close button
		//	then clicking it should call this function.
		evt.stopPropagation();
	}
});

// These arguments can be specified for the children of a StackContainer.
// Since any widget can be specified as a StackContainer child, mix them
// into the base widget class.  (This is a hack, but it's effective.)
dojo.extend(dijit._Widget, {
	// title: String
	//		Title of this widget.  Used by TabContainer to the name the tab, etc.
	title: "",

	// selected: Boolean
	//		Is this child currently selected?
	selected: false,

	// closable: Boolean
	//		True if user can close (destroy) this child, such as (for example) clicking the X on the tab.
	closable: false,	// true if user can close this tab pane

	onClose: function(){
		// summary: Callback if someone tries to close the child, child will be closed if func returns true
		return true;
	}
});

}

if(!dojo._hasResource["dijit.layout.AccordionContainer"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.layout.AccordionContainer"] = true;
dojo.provide("dijit.layout.AccordionContainer");








dojo.declare(
	"dijit.layout.AccordionContainer",
	dijit.layout.StackContainer,
	{
		// summary:
		//		Holds a set of panes where every pane's title is visible, but only one pane's content is visible at a time,
		//		and switching between panes is visualized by sliding the other panes up/down.
		// usage:
		// 	<div dojoType="dijit.layout.AccordionContainer">
		// 		<div dojoType="dijit.layout.AccordionPane" title="pane 1">
		// 			<div dojoType="dijit.layout.ContentPane">...</div>
		//  	</div>
		// 		<div dojoType="dijit.layout.AccordionPane" title="pane 2">
		//			<p>This is some text</p>
		// 		...
		// 	</div>

		// duration: Integer
		//		Amount of time (in ms) it takes to slide panes
		duration: 250,

		_verticalSpace: 0,

		postCreate: function(){
			this.domNode.style.overflow="hidden";
			this.inherited("postCreate",arguments);  
			dijit.setWaiRole(this.domNode, "tablist");
			dojo.addClass(this.domNode,"dijitAccordionContainer");
		},

		startup: function(){
			if(this._started){ return;  }
			this.inherited("startup",arguments);	 
			if(this.selectedChildWidget){
				/*@mpt 0114: the monkeys've overwritten the containeNode, so commented out
				var style = this.selectedChildWidget.containerNode.style;
				style.display = "";
				style.overflow = "auto";
				this.selectedChildWidget._setSelectedState(true);
				*/
			}
		},

		layout: function(){
			// summary
			//		Set the height of the open pane based on what room remains
			// get cumulative height of all the title bars, and figure out which pane is open
			var totalCollapsedHeight = 0;
			var openPane = this.selectedChildWidget;
			dojo.forEach(this.getChildren(), function(child){
				totalCollapsedHeight += child.getTitleHeight();
			});
			var mySize = this._contentBox;
			this._verticalSpace = (mySize.h - totalCollapsedHeight);
			if(openPane){
				openPane.containerNode.style.height = this._verticalSpace + "px";
/***
TODO: this is wrong.  probably you wanted to call resize on the SplitContainer
inside the AccordionPane??
				if(openPane.resize){
					openPane.resize({h: this._verticalSpace});
				}
***/
			}
		},

		_setupChild: function(/*Widget*/ page){
			// Summary: prepare the given child
			return page;
		},

		_transition: function(/*Widget?*/newWidget, /*Widget?*/oldWidget){
//TODO: should be able to replace this with calls to slideIn/slideOut
			if(this._inTransition){ return;  }
			this._inTransition = true;
			var animations = [];
			var paneHeight = this._verticalSpace;
			if(newWidget){
				newWidget.setSelected(true);
				var newContents = newWidget.containerNode;
				newContents.style.display = "";

				animations.push(dojo.animateProperty({
					node: newContents,
					duration: this.duration,
					properties: {
						height: { start: "1", end: paneHeight }
					},
					onEnd: function(){
						newContents.style.overflow = "auto";
					}
				}));
			}
			if(oldWidget){
				oldWidget.setSelected(false);
				var oldContents = oldWidget.containerNode;
				oldContents.style.overflow = "hidden";
				animations.push(dojo.animateProperty({
					node: oldContents,
					duration: this.duration,
					properties: {
						height: { start: paneHeight, end: "1" }
					},
					onEnd: function(){
						oldContents.style.display = "none";
					}
				}));
			}

			this._inTransition = false;

			dojo.fx.combine(animations).play();
		},

		// note: we are treating the container as controller here
		_onKeyPress: function(/*Event*/ e){
			if(this.disabled || e.altKey ){ return;  }
			var k = dojo.keys;
			switch(e.keyCode){
				case k.LEFT_ARROW:
				case k.UP_ARROW:
				case k.PAGE_UP:
					this._adjacent(false)._onTitleClick();
					dojo.stopEvent(e);
					break;
				case k.RIGHT_ARROW:
				case k.DOWN_ARROW:
				case k.PAGE_DOWN:
					this._adjacent(true)._onTitleClick();
					dojo.stopEvent(e);
					break;
				default:
					if(e.ctrlKey && e.keyCode == k.TAB){
						this._adjacent(e._dijitWidget, !e.shiftKey)._onTitleClick();
						dojo.stopEvent(e);
					}
				
			}
		}
	}
);

dojo.declare(
	"dijit.layout.AccordionPane",
	[dijit.layout.ContentPane, dijit._Templated, dijit._Contained],
{
	// summary
	//		AccordionPane is a ContentPane with a title that may contain another widget.
	//		Nested layout widgets, such as SplitContainer, are not supported at this time.

	templateString:"<div class='dijitAccordionPane'\n\t><div dojoAttachPoint='titleNode,focusNode' dojoAttachEvent='ondijitclick:_onTitleClick,onkeypress:_onTitleKeyPress,onfocus:_handleFocus,onblur:_handleFocus'\n\t\tclass='dijitAccordionTitle' wairole=\"tab\"\n\t\t><div class='dijitAccordionArrow'></div\n\t\t><div class='arrowTextUp' waiRole=\"presentation\">&#9650;</div\n\t\t><div class='arrowTextDown' waiRole=\"presentation\">&#9660;</div\n\t\t><div dojoAttachPoint='titleTextNode' class='dijitAccordionText'>${title}</div></div\n\t><div><div dojoAttachPoint='containerNode' style='overflow: hidden;  height: 1px;  display: none'\n\t\tclass='dijitAccordionBody' wairole=\"tabpanel\"\n\t></div></div>\n</div>\n",

	postCreate: function(){
		this.inherited("postCreate",arguments)
		dojo.setSelectable(this.titleNode, false);
		this.setSelected(this.selected);
	},

	getTitleHeight: function(){
		// summary: returns the height of the title dom node
		return dojo.marginBox(this.titleNode).h;	 // Integer
	},

	_onTitleClick: function(){
		// summary: callback when someone clicks my title
		var parent = this.getParent();
		if(!parent._inTransition){
			parent.selectChild(this);
			dijit.focus(this.focusNode);
		}
	},

	_onTitleKeyPress: function(/*Event*/ evt){
		evt._dijitWidget = this;
		return this.getParent()._onKeyPress(evt);
	},

	_setSelectedState: function(/*Boolean*/ isSelected){
		this.selected = isSelected;
		dojo[(isSelected ? "addClass" : "removeClass")](this.domNode,"dijitAccordionPane-selected");
		this.focusNode.setAttribute("tabIndex", isSelected ? "0" : "-1");
	},
	
	_handleFocus: function(/*Event*/e){
		// summary: handle the blur and focus state of this widget
		dojo[(e.type=="focus" ? "addClass" : "removeClass")](this.focusNode,"dijitAccordionPaneFocused");	 	
	},

	setSelected: function(/*Boolean*/ isSelected){
		// summary: change the selected state on this pane
		this._setSelectedState(isSelected);
		if(isSelected){ this.onSelected();  }
	},

	onSelected: function(){
		// summary: called when this pane is selected
	}
});

}

if(!dojo._hasResource["dijit.layout.LayoutContainer"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.layout.LayoutContainer"] = true;
dojo.provide("dijit.layout.LayoutContainer");



dojo.declare(
	"dijit.layout.LayoutContainer",
	dijit.layout._LayoutWidget,
{
	// summary
	//	Provides Delphi-style panel layout semantics.
	//
	// details
	//	A LayoutContainer is a box with a specified size (like style="width: 500px;  height: 500px;"),
	//	that contains children widgets marked with "layoutAlign" of "left", "right", "bottom", "top", and "client".
	//	It takes it's children marked as left/top/bottom/right, and lays them out along the edges of the box,
	//	and then it takes the child marked "client" and puts it into the remaining space in the middle.
	//
	//  Left/right positioning is similar to CSS's "float: left" and "float: right",
	//	and top/bottom positioning would be similar to "float: top" and "float: bottom", if there were such
	//	CSS.
	//
	//	Note that there can only be one client element, but there can be multiple left, right, top,
	//	or bottom elements.
	//
	// usage
	//	<style>
	//		html, body{ height: 100%;  width: 100%;  }
	//	</style>
	//	<div dojoType="dijit.layout.LayoutContainer" style="width: 100%;  height: 100%">
	//		<div dojoType="dijit.layout.ContentPane" layoutAlign="top">header text</div>
	//		<div dojoType="dijit.layout.ContentPane" layoutAlign="left" style="width: 200px;">table of contents</div>
	//		<div dojoType="dijit.layout.ContentPane" layoutAlign="client">client area</div>
	//	</div>
	//
	//	Lays out each child in the natural order the children occur in.
	//	Basically each child is laid out into the "remaining space", where "remaining space" is initially
	//	the content area of this widget, but is reduced to a smaller rectangle each time a child is added.
	//	

	layout: function(){
		dijit.layout.layoutChildren(this.domNode, this._contentBox, this.getChildren());
	},

	addChild: function(/*Widget*/ child, /*Integer?*/ insertIndex){
		dijit._Container.prototype.addChild.apply(this, arguments);
		if(this._started){
			dijit.layout.layoutChildren(this.domNode, this._contentBox, this.getChildren());
		}
	},

	removeChild: function(/*Widget*/ widget){
		dijit._Container.prototype.removeChild.apply(this, arguments);
		if(this._started){
			dijit.layout.layoutChildren(this.domNode, this._contentBox, this.getChildren());
		}
	}
});

// This argument can be specified for the children of a LayoutContainer.
// Since any widget can be specified as a LayoutContainer child, mix it
// into the base widget class.  (This is a hack, but it's effective.)
dojo.extend(dijit._Widget, {
	// layoutAlign: String
	//		"none", "left", "right", "bottom", "top", and "client".
	//		See the LayoutContainer description for details on this parameter.
	layoutAlign: 'none'
});

}

if(!dojo._hasResource["dijit.layout.LinkPane"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.layout.LinkPane"] = true;
dojo.provide("dijit.layout.LinkPane");




dojo.declare("dijit.layout.LinkPane",
	[dijit.layout.ContentPane, dijit._Templated],
	{
	// summary: 
	//	A ContentPane that loads data remotely
	// description:
	//	LinkPane is just a ContentPane that loads data remotely (via the href attribute),
	//	and has markup similar to an anchor.  The anchor's body (the words between <a> and </a>)
	//	become the title of the widget (used for TabContainer, AccordionContainer, etc.)
	// example:
	//	<a href="foo.html">my title</a>

	// I'm using a template because the user may specify the input as
	// <a href="foo.html">title</a>, in which case we need to get rid of the
	// <a> because we don't want a link.
	templateString: '<div class="dijitLinkPane"></div>',

	postCreate: function(){

		// If user has specified node contents, they become the title
		// (the link must be plain text)
		if(this.srcNodeRef){
			this.title += this.srcNodeRef.innerHTML;
		}
		this.inherited("postCreate",arguments);
	}
});

}

if(!dojo._hasResource["dijit.layout.SplitContainer"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.layout.SplitContainer"] = true;
dojo.provide("dijit.layout.SplitContainer");

//
// FIXME: make it prettier
// FIXME: active dragging upwards doesn't always shift other bars (direction calculation is wrong in this case)
//




dojo.declare("dijit.layout.SplitContainer",
	dijit.layout._LayoutWidget,
	{
	// summary: 
	//	A Container widget with sizing handles in-between each child
	// description:
	//		Contains multiple children widgets, all of which are displayed side by side
	//		(either horizontally or vertically);  there's a bar between each of the children,
	//		and you can adjust the relative size of each child by dragging the bars.
	//
	//		You must specify a size (width and height) for the SplitContainer.
	//
	// activeSizing: Boolean
	//		If true, the children's size changes as you drag the bar;
	//		otherwise, the sizes don't change until you drop the bar (by mouse-up)
	activeSizing: false,

	// sizerWidth: Integer
	//		Size in pixels of the bar between each child
	sizerWidth: 7, // FIXME: this should be a CSS attribute (at 7 because css wants it to be 7 until we fix to css)

	// orientation: String
	//		either 'horizontal' or vertical;  indicates whether the children are
	//		arranged side-by-side or up/down.
	orientation: 'horizontal',

	// persist: Boolean
	//		Save splitter positions in a cookie
	persist: true,

	postMixInProperties: function(){
		this.inherited("postMixInProperties",arguments);
		this.isHorizontal = (this.orientation == 'horizontal');
	},

	postCreate: function(){
		this.inherited("postCreate",arguments);
		this.sizers = [];
		dojo.addClass(this.domNode, "dijitSplitContainer");
		// overflow has to be explicitly hidden for splitContainers using gekko (trac #1435)
		// to keep other combined css classes from inadvertantly making the overflow visible
		if(dojo.isMozilla){
			this.domNode.style.overflow = '-moz-scrollbars-none';  // hidden doesn't work
		}

		// create the fake dragger
		if(typeof this.sizerWidth == "object"){
			try{ //FIXME: do this without a try/catch
				this.sizerWidth = parseInt(this.sizerWidth.toString());
			}catch(e){ this.sizerWidth = 7;  }
		}
		var sizer = this.virtualSizer = document.createElement('div');
		sizer.style.position = 'relative';

		// #1681: work around the dreaded 'quirky percentages in IE' layout bug
		// If the splitcontainer's dimensions are specified in percentages, it
		// will be resized when the virtualsizer is displayed in _showSizingLine
		// (typically expanding its bounds unnecessarily). This happens because
		// we use position: relative for .dijitSplitContainer.
		// The workaround: instead of changing the display style attribute,
		// switch to changing the zIndex (bring to front/move to back)

		sizer.style.zIndex = 10;
		sizer.className = this.isHorizontal ? 'dijitSplitContainerVirtualSizerH' : 'dijitSplitContainerVirtualSizerV';
		this.domNode.appendChild(sizer);
		dojo.setSelectable(sizer, false);
	},

	startup: function(){
		if(this._started){ return;  }
		dojo.forEach(this.getChildren(), function(child, i, children){
			// attach the children and create the draggers
			this._injectChild(child);

			if(i < children.length-1){
				this._addSizer();
			}
		}, this);

		if(this.persist){
			this._restoreState();
		}
		this.inherited("startup",arguments);  
		this._started = true;
	},

	_injectChild: function(child){
		child.domNode.style.position = "absolute";
		dojo.addClass(child.domNode, "dijitSplitPane");
	},

	_addSizer: function(){
		var i = this.sizers.length;

		// TODO: use a template for this!!!
		var sizer = this.sizers[i] = document.createElement('div');
		sizer.className = this.isHorizontal ? 'dijitSplitContainerSizerH' : 'dijitSplitContainerSizerV';

		// add the thumb div
		var thumb = document.createElement('div');
		thumb.className = 'thumb';
		sizer.appendChild(thumb);

		// FIXME: are you serious? why aren't we using mover start/stop combo?
		var self = this;
		var handler = (function(){ var sizer_i = i;  return function(e){ self.beginSizing(e, sizer_i);  } })();
		dojo.connect(sizer, "onmousedown", handler);

		this.domNode.appendChild(sizer);
		dojo.setSelectable(sizer, false);
	},

	removeChild: function(widget){
		// summary: Remove sizer, but only if widget is really our child and
		// we have at least one sizer to throw away
		if(this.sizers.length && dojo.indexOf(this.getChildren(), widget) != -1){
			var i = this.sizers.length - 1;
			dojo._destroyElement(this.sizers[i]);
			this.sizers.length--;
		}

		// Remove widget and repaint
		this.inherited("removeChild",arguments);  
		if(this._started){
			this.layout();
		}
	},

	addChild: function(/*Widget*/ child, /*Integer?*/ insertIndex){
		// summary: Add a child widget to the container
		// child: a widget to add
		// insertIndex: postion in the "stack" to add the child widget
		
		this.inherited("addChild",arguments);  

		if(this._started){
			// Do the stuff that startup() does for each widget
			this._injectChild(child);
			var children = this.getChildren();
			if(children.length > 1){
				this._addSizer();
			}

			// and then reposition (ie, shrink) every pane to make room for the new guy
			this.layout();
		}
	},

	layout: function(){
		// summary:
		//		Do layout of panels

		// base class defines this._contentBox on initial creation and also
		// on resize
		this.paneWidth = this._contentBox.w;
		this.paneHeight = this._contentBox.h;

		var children = this.getChildren();
		if(!children.length){ return;  }

		//
		// calculate space
		//

		var space = this.isHorizontal ? this.paneWidth : this.paneHeight;
		if(children.length > 1){
			space -= this.sizerWidth * (children.length - 1);
		}

		//
		// calculate total of SizeShare values
		//
		var outOf = 0;
		dojo.forEach(children, function(child){
			outOf += child.sizeShare;
		});

		//
		// work out actual pixels per sizeshare unit
		//
		var pixPerUnit = space / outOf;

		//
		// set the SizeActual member of each pane
		//
		var totalSize = 0;
		dojo.forEach(children.slice(0, children.length - 1), function(child){
			var size = Math.round(pixPerUnit * child.sizeShare);
			child.sizeActual = size;
			totalSize += size;
		});

		children[children.length-1].sizeActual = space - totalSize;

		//
		// make sure the sizes are ok
		//
		this._checkSizes();

		//
		// now loop, positioning each pane and letting children resize themselves
		//

		var pos = 0;
		var size = children[0].sizeActual;
		this._movePanel(children[0], pos, size);
		children[0].position = pos;
		pos += size;

		// if we don't have any sizers, our layout method hasn't been called yet
		// so bail until we are called..TODO: REVISIT: need to change the startup
		// algorithm to guaranteed the ordering of calls to layout method
		if(!this.sizers){
			return;
		}

		dojo.some(children.slice(1), function(child, i){
			// error-checking
			if(!this.sizers[i]){
				return true;
			}
			// first we position the sizing handle before this pane
			this._moveSlider(this.sizers[i], pos, this.sizerWidth);
			this.sizers[i].position = pos;
			pos += this.sizerWidth;

			size = child.sizeActual;
			this._movePanel(child, pos, size);
			child.position = pos;
			pos += size;
		}, this);
	},

	_movePanel: function(panel, pos, size){
		if(this.isHorizontal){
			panel.domNode.style.left = pos + 'px';	 // TODO: resize() takes l and t parameters too, don't need to set manually
			panel.domNode.style.top = 0;
			var box = {w: size, h: this.paneHeight};
			if(panel.resize){
				panel.resize(box);
			}else{
				dojo.marginBox(panel.domNode, box);
			}
		}else{
			panel.domNode.style.left = 0;	 // TODO: resize() takes l and t parameters too, don't need to set manually
			panel.domNode.style.top = pos + 'px';
			var box = {w: this.paneWidth, h: size};
			if(panel.resize){
				panel.resize(box);
			}else{
				dojo.marginBox(panel.domNode, box);
			}
		}
	},

	_moveSlider: function(slider, pos, size){
		if(this.isHorizontal){
			slider.style.left = pos + 'px';
			slider.style.top = 0;
			dojo.marginBox(slider, { w: size, h: this.paneHeight });
		}else{
			slider.style.left = 0;
			slider.style.top = pos + 'px';
			dojo.marginBox(slider, { w: this.paneWidth, h: size });
		}
	},

	_growPane: function(growth, pane){
		if(growth > 0){
			if(pane.sizeActual > pane.sizeMin){
				if((pane.sizeActual - pane.sizeMin) > growth){

					// stick all the growth in this pane
					pane.sizeActual = pane.sizeActual - growth;
					growth = 0;
				}else{
					// put as much growth in here as we can
					growth -= pane.sizeActual - pane.sizeMin;
					pane.sizeActual = pane.sizeMin;
				}
			}
		}
		return growth;
	},

	_checkSizes: function(){

		var totalMinSize = 0;
		var totalSize = 0;
		var children = this.getChildren();

		dojo.forEach(children, function(child){
			totalSize += child.sizeActual;
			totalMinSize += child.sizeMin;
		});

		// only make adjustments if we have enough space for all the minimums

		if(totalMinSize <= totalSize){

			var growth = 0;

			dojo.forEach(children, function(child){
				if(child.sizeActual < child.sizeMin){
					growth += child.sizeMin - child.sizeActual;
					child.sizeActual = child.sizeMin;
				}
			});

			if(growth > 0){
				var list = this.isDraggingLeft ? children.reverse() : children;
				dojo.forEach(list, function(child){
					growth = this._growPane(growth, child);
				}, this);
			}
		}else{
			dojo.forEach(children, function(child){
				child.sizeActual = Math.round(totalSize * (child.sizeMin / totalMinSize));
			});
		}
	},

	beginSizing: function(e, i){
		var children = this.getChildren();
		this.paneBefore = children[i];
		this.paneAfter = children[i+1];

		this.isSizing = true;
		this.sizingSplitter = this.sizers[i];

		if(!this.cover){
			this.cover = dojo.doc.createElement('div');
			this.domNode.appendChild(this.cover);
			var s = this.cover.style;
			s.position = 'absolute';
			s.zIndex = 1;
			s.top = 0;
			s.left = 0;
			s.width = "100%";
			s.height = "100%";
		}else{
			this.cover.style.zIndex = 1;
		}
		this.sizingSplitter.style.zIndex = 2;

		// TODO: REVISIT - we want MARGIN_BOX and core hasn't exposed that yet (but can't we use it anyway if we pay attention? we do elsewhere.)
		this.originPos = dojo.coords(children[0].domNode, true);
		if(this.isHorizontal){
			var client = (e.layerX ? e.layerX : e.offsetX);
			var screen = e.pageX;
			this.originPos = this.originPos.x;
		}else{
			var client = (e.layerY ? e.layerY : e.offsetY);
			var screen = e.pageY;
			this.originPos = this.originPos.y;
		}
		this.startPoint = this.lastPoint = screen;
		this.screenToClientOffset = screen - client;
		this.dragOffset = this.lastPoint - this.paneBefore.sizeActual - this.originPos - this.paneBefore.position;

		if(!this.activeSizing){
			this._showSizingLine();
		}

		//					
		// attach mouse events
		//
		this._connects = [];
		this._connects.push(dojo.connect(document.documentElement, "onmousemove", this, "changeSizing"));
		this._connects.push(dojo.connect(document.documentElement, "onmouseup", this, "endSizing"));

		dojo.stopEvent(e);
	},

	changeSizing: function(e){
		if(!this.isSizing){ return;  }
		this.lastPoint = this.isHorizontal ? e.pageX : e.pageY;
		this.movePoint();
		if(this.activeSizing){
			this._updateSize();
		}else{
			this._moveSizingLine();
		}
		dojo.stopEvent(e);
	},

	endSizing: function(e){
		if(!this.isSizing){ return;  }
		if(this.cover){
			this.cover.style.zIndex = -1;
		}
		if(!this.activeSizing){
			this._hideSizingLine();
		}

		this._updateSize();

		this.isSizing = false;

		if(this.persist){
			this._saveState(this);
		}

		dojo.forEach(this._connects,dojo.disconnect);  
	},

	movePoint: function(){

		// make sure lastPoint is a legal point to drag to
		var p = this.lastPoint - this.screenToClientOffset;

		var a = p - this.dragOffset;
		a = this.legaliseSplitPoint(a);
		p = a + this.dragOffset;

		this.lastPoint = p + this.screenToClientOffset;
	},

	legaliseSplitPoint: function(a){

		a += this.sizingSplitter.position;

		this.isDraggingLeft = !!(a > 0);

		if(!this.activeSizing){
			var min = this.paneBefore.position + this.paneBefore.sizeMin;
			if(a < min){
				a = min;
			}

			var max = this.paneAfter.position + (this.paneAfter.sizeActual - (this.sizerWidth + this.paneAfter.sizeMin));
			if(a > max){
				a = max;
			}
		}

		a -= this.sizingSplitter.position;

		this._checkSizes();

		return a;
	},

	_updateSize: function(){
	//FIXME: sometimes this.lastPoint is NaN
		var pos = this.lastPoint - this.dragOffset - this.originPos;

		var start_region = this.paneBefore.position;
		var end_region   = this.paneAfter.position + this.paneAfter.sizeActual;

		this.paneBefore.sizeActual = pos - start_region;
		this.paneAfter.position	= pos + this.sizerWidth;
		this.paneAfter.sizeActual  = end_region - this.paneAfter.position;

		dojo.forEach(this.getChildren(), function(child){
			child.sizeShare = child.sizeActual;
		});

		if(this._started){
			this.layout();
		}
	},

	_showSizingLine: function(){

		this._moveSizingLine();

		dojo.marginBox(this.virtualSizer,
			this.isHorizontal ? { w: this.sizerWidth, h: this.paneHeight } : { w: this.paneWidth, h: this.sizerWidth });

		this.virtualSizer.style.display = 'block';
	},

	_hideSizingLine: function(){
		this.virtualSizer.style.display = 'none';
	},

	_moveSizingLine: function(){
		var pos = (this.lastPoint - this.startPoint) + this.sizingSplitter.position;
		dojo.style(this.virtualSizer,(this.isHorizontal ? "left" : "top"),pos+"px");
		// this.virtualSizer.style[ this.isHorizontal ? "left" : "top" ] = pos + 'px';  // FIXME: remove this line if the previous is better
	},

	_getCookieName: function(i){
		return this.id + "_" + i;
	},

	_restoreState: function(){
		dojo.forEach(this.getChildren(), function(child, i){
			var cookieName = this._getCookieName(i);
			var cookieValue = dojo.cookie(cookieName);
			if(cookieValue){
				var pos = parseInt(cookieValue);
				if(typeof pos == "number"){
					child.sizeShare = pos;
				}
			}
		}, this);
	},

	_saveState: function(){
		dojo.forEach(this.getChildren(), function(child, i){
			dojo.cookie(this._getCookieName(i), child.sizeShare);
		}, this);
	}
});

// These arguments can be specified for the children of a SplitContainer.
// Since any widget can be specified as a SplitContainer child, mix them
// into the base widget class.  (This is a hack, but it's effective.)
dojo.extend(dijit._Widget, {
	// sizeMin: Integer
	//	Minimum size (width or height) of a child of a SplitContainer.
	//	The value is relative to other children's sizeShare properties.
	sizeMin: 10,

	// sizeShare: Integer
	//	Size (width or height) of a child of a SplitContainer.
	//	The value is relative to other children's sizeShare properties.
	//	For example, if there are two children and each has sizeShare=10, then
	//	each takes up 50% of the available space.
	sizeShare: 10
});

}

if(!dojo._hasResource["dijit.layout.TabContainer"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.layout.TabContainer"] = true;
dojo.provide("dijit.layout.TabContainer");




dojo.declare("dijit.layout.TabContainer",
	[dijit.layout.StackContainer, dijit._Templated],
	{	
	// summary: 
	//	A Container with Title Tabs, each one pointing at a pane in the container.
	// description:
	//	A TabContainer is a container that has multiple panes, but shows only
	//	one pane at a time.  There are a set of tabs corresponding to each pane,
	//	where each tab has the title (aka title) of the pane, and optionally a close button.
	//
	//	Publishes topics <widgetId>-addChild, <widgetId>-removeChild, and <widgetId>-selectChild
	//	(where <widgetId> is the id of the TabContainer itself.
	//
	// tabPosition: String
	//   Defines where tabs go relative to tab content.
	//   "top", "bottom", "left-h", "right-h"
	tabPosition: "top",

	templateString: null,	// override setting in StackContainer
	templateString:"<div class=\"dijitTabContainer\">\n\t<div dojoAttachPoint=\"tablistNode\"></div>\n\t<div class=\"dijitTabPaneWrapper\" dojoAttachPoint=\"containerNode\"></div>\n</div>\n",

	postCreate: function(){	
		dijit.layout.TabContainer.superclass.postCreate.apply(this, arguments);
		// create the tab list that will have a tab (a.k.a. tab button) for each tab panel
		this.tablist = new dijit.layout.TabController(
			{
				id: this.id + "_tablist",
				tabPosition: this.tabPosition,
				doLayout: this.doLayout,
				containerId: this.id
			}, this.tablistNode);	 	
	},

	_setupChild: function(/* Widget */tab){
		dojo.addClass(tab.domNode, "dijitTabPane");
		this.inherited("_setupChild",arguments);
		return tab;  // Widget
	},

	startup: function(){
		if(this._started){ return;  }

		// wire up the tablist and its tabs
		this.tablist.startup();
		this.inherited("startup",arguments);

		if(dojo.isSafari){
			// sometimes safari 3.0.3 miscalculates the height of the tab labels, see #4058
			setTimeout(dojo.hitch(this, "layout"), 0);
		}
	},

	layout: function(){
		// Summary: Configure the content pane to take up all the space except for where the tabs are
		if(!this.doLayout){ return;  }

		// position and size the titles and the container node
		var titleAlign=this.tabPosition.replace(/-h/,"");
		var children = [
			{domNode: this.tablist.domNode, layoutAlign: titleAlign},
			{domNode: this.containerNode, layoutAlign: "client"}
		];
		dijit.layout.layoutChildren(this.domNode, this._contentBox, children);

		// Compute size to make each of my children.
		// children[1] is the margin-box size of this.containerNode, set by layoutChildren() call above
		this._containerContentBox = dijit.layout.marginBox2contentBox(this.containerNode, children[1]);

		if(this.selectedChildWidget){
			this._showChild(this.selectedChildWidget);
			if(this.doLayout && this.selectedChildWidget.resize){
				this.selectedChildWidget.resize(this._containerContentBox);
			}
		}
	},

	destroy: function(){
		this.tablist.destroy();
		this.inherited("destroy",arguments);
	}
});

//TODO: make private?
dojo.declare("dijit.layout.TabController",
	dijit.layout.StackController,
	{
	// summary:
	// 	Set of tabs (the things with titles and a close button, that you click to show a tab panel).
	// description:
	//	Lets the user select the currently shown pane in a TabContainer or StackContainer.
	//	TabController also monitors the TabContainer, and whenever a pane is
	//	added or deleted updates itself accordingly.

	templateString: "<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",

	// tabPosition: String
	//   Defines where tabs go relative to the content.
	//   "top", "bottom", "left-h", "right-h"
	tabPosition: "top",

	// doLayout: Boolean
	// 	TODOC: deprecate doLayout? not sure.
	doLayout: true,

	// buttonWidget: String
	//	the name of the tab widget to create to correspond to each page
	buttonWidget: "dijit.layout._TabButton",

	postMixInProperties: function(){
		this["class"] = "dijitTabLabels-" + this.tabPosition + (this.doLayout ? "" : " dijitTabNoLayout");
		this.inherited("postMixInProperties",arguments);
	}
});

dojo.declare("dijit.layout._TabButton",
	dijit.layout._StackButton,
	{
	// summary:
	//	A tab (the thing you click to select a pane).
	// description:
	//	Contains the title of the pane, and optionally a close-button to destroy the pane.
	//	This is an internal widget and should not be instantiated directly.

	baseClass: "dijitTab",

	//@mpt xstateModifier;  the monkeys are misusing that to show/hide their css crap.
	templateString: "<div dojoAttachEvent='onclick:onClick,onmouseenter:_onMouse,onmouseleave:_onMouse'>"+
		"<div class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>"+
		"<table><tr><td>"+
		"        <span dojoAttachPoint='containerNode,focusNode'>${!label}</span>"+
		"       </td><td class='innerTable' align='right'><span dojoAttachPoint='closeButtonNode' dojoAttachEvent='onmouseenter:_onMouse, onmouseleave:_onMouse, onclick:onClickCloseButton' xstateModifier='CloseButton'>"+
		"            <span dojoAttachPoint='closeText' class='closeText'>x</span>\n        </span>\n    </td></tr></table></div>\n</div>\n",

	postCreate: function(){
		if(this.closeButton){
			//@mpt
			dojo.addClass(this.closeButtonNode, "oPlsCloseCircleIcon");
		} else {
			this.closeButtonNode.style.display="none";
		}
		this.inherited("postCreate",arguments);  
		dojo.setSelectable(this.containerNode, false);
	}
});

}

if(!dojo._hasResource["dijit.dijit-all"]){ //_hasResource checks added by build. Do not use _hasResource directly in your code.
dojo._hasResource["dijit.dijit-all"] = true;
console.warn("dijit-all may include much more code than your application actually requires. We strongly recommend that you investigate a custom build or the web build tool");
dojo.provide("dijit.dijit-all");

}


//dojo.i18n._preloadLocalizations("dijit.nls.dijit-all", ["es-es", "es", "hu", "it-it", "de", "pt-br", "pl", "fr-fr", "zh-cn", "pt", "en-us", "zh", "ru", "xx", "fr", "zh-tw", "it", "cs", "en-gb", "de-de", "ja-jp", "ko-kr", "ko", "en", "ROOT", "ja"]);


/*v1.1 cldr/nls/colors*/
dojo.provide("dijit.nls.dijit-all_ROOT");
dojo.provide("dojo.nls.colors");
dojo.nls.colors.ROOT={
// local representation of all CSS3 named colors, companion to dojo.colors.  To be used where descriptive information
// is required for each color, such as a palette widget, and not for specifying color programatically.

//Note: due to the SVG 1.0 spec additions, some of these are alternate spellings for the same color e.g. gray vs. gray. 
//TODO: should we be using unique rgb values as keys instead and avoid these duplicates, or rely on the caller to do the reverse mapping?
aliceblue: "alice blue",
antiquewhite: "antique white",
aqua: "aqua",
aquamarine: "aquamarine",
azure: "azure",
beige: "beige",
bisque: "bisque",
black: "black",
blanchedalmond: "blanched almond",
blue: "blue",
blueviolet: "blue-violet",
brown: "brown",
burlywood: "burlywood",
cadetblue: "cadet blue",
chartreuse: "chartreuse",
chocolate: "chocolate",
coral: "coral",
cornflowerblue: "cornflower blue",
cornsilk: "cornsilk",
crimson: "crimson",
cyan: "cyan",
darkblue: "dark blue",
darkcyan: "dark cyan",
darkgoldenrod: "dark goldenrod",
darkgray: "dark gray",
darkgreen: "dark green",
darkgrey: "dark gray", // same as darkgray
darkkhaki: "dark khaki",
darkmagenta: "dark magenta",
darkolivegreen: "dark olive green",
darkorange: "dark orange",
darkorchid: "dark orchid",
darkred: "dark red",
darksalmon: "dark salmon",
darkseagreen: "dark sea green",
darkslateblue: "dark slate blue",
darkslategray: "dark slate gray",
darkslategrey: "dark slate gray", // same as darkslategray
darkturquoise: "dark turquoise",
darkviolet: "dark violet",
deeppink: "deep pink",
deepskyblue: "deep sky blue",
dimgray: "dim gray",
dimgrey: "dim gray", // same as dimgray
dodgerblue: "dodger blue",
firebrick: "fire brick",
floralwhite: "floral white",
forestgreen: "forest green",
fuchsia: "fuchsia",
gainsboro: "gainsboro",
ghostwhite: "ghost white",
gold: "gold",
goldenrod: "goldenrod",
gray: "gray",
green: "green",
greenyellow: "green-yellow",
grey: "gray", // same as gray
honeydew: "honeydew",
hotpink: "hot pink",
indianred: "indian red",
indigo: "indigo",
ivory: "ivory",
khaki: "khaki",
lavender: "lavender",
lavenderblush: "lavender blush",
lawngreen: "lawn green",
lemonchiffon: "lemon chiffon",
lightblue: "light blue",
lightcoral: "light coral",
lightcyan: "light cyan",
lightgoldenrodyellow: "light goldenrod yellow",
lightgray: "light gray",
lightgreen: "light green",
lightgrey: "light gray", // same as lightgray
lightpink: "light pink",
lightsalmon: "light salmon",
lightseagreen: "light sea green",
lightskyblue: "light sky blue",
lightslategray: "light slate gray",
lightslategrey: "light slate gray", // same as lightslategray
lightsteelblue: "light steel blue",
lightyellow: "light yellow",
lime: "lime",
limegreen: "lime green",
linen: "linen",
magenta: "magenta",
maroon: "maroon",
mediumaquamarine: "medium aquamarine",
mediumblue: "medium blue",
mediumorchid: "medium orchid",
mediumpurple: "medium purple",
mediumseagreen: "medium sea green",
mediumslateblue: "medium slate blue",
mediumspringgreen: "medium spring green",
mediumturquoise: "medium turquoise",
mediumvioletred: "medium violet-red",
midnightblue: "midnight blue",
mintcream: "mint cream",
mistyrose: "misty rose",
moccasin: "moccasin",
navajowhite: "navajo white",
navy: "navy",
oldlace: "old lace",
olive: "olive",
olivedrab: "olive drab",
orange: "orange",
orangered: "orange red",
orchid: "orchid",
palegoldenrod: "pale goldenrod",
palegreen: "pale green",
paleturquoise: "pale turquoise",
palevioletred: "pale violet-red",
papayawhip: "papaya whip",
peachpuff: "peach puff",
peru: "peru",
pink: "pink",
plum: "plum",
powderblue: "powder blue",
purple: "purple",
red: "red",
rosybrown: "rosy brown",
royalblue: "royal blue",
saddlebrown: "saddle brown",
salmon: "salmon",
sandybrown: "sandy brown",
seagreen: "sea green",
seashell: "seashell",
sienna: "sienna",
silver: "silver",
skyblue: "sky blue",
slateblue: "slate blue",
slategray: "slate gray",
slategrey: "slate gray", // same as slategray
snow: "snow",
springgreen: "spring green",
steelblue: "steel blue",
tan: "tan",
teal: "teal",
thistle: "thistle",
tomato: "tomato",
turquoise: "turquoise",
violet: "violet",
wheat: "wheat",
white: "white",
whitesmoke: "white smoke",
yellow: "yellow",
yellowgreen: "yellow green"
};


/*v1.1 cldr/nls/currency*/

// generated from ldml/main/*.xml, xpath: ldml/numbers/currencies
dojo.provide("dojo.nls.currency");
dojo.nls.currency.ROOT={
	EUR_displayName:"EUR",
	EUR_symbol:"",
	GBP_displayName:"GBP",
	GBP_symbol:"UK",
	JPY_displayName:"JPY",
	JPY_symbol:"JP",
	USD_displayName:"USD",
	USD_symbol:"US$"
};

/*v1.1 cldr/nls/gregorian*/
// generated from ldml/main/*.xml, xpath: ldml/calendars/calendar-gregorian
dojo.provide("dojo.nls.gregorian");
dojo.nls.gregorian.ROOT={
        'months-format-abbr':["1","2","3","4","5","6","7","8","9","10","11","12"],
        'months-standAlone-narrow':["1","2","3","4","5","6","7","8","9","10","11","12"],
        'months-format-wide':["1","2","3","4","5","6","7","8","9","10","11","12"],
        'months-format-abbr':["1","2","3","4","5","6","7","8","9","10","11","12"],
        'months-standAlone-narrow':["1","2","3","4","5","6","7","8","9","10","11","12"],
        'months-format-wide':["1","2","3","4","5","6","7","8","9","10","11","12"],
        'days-format-abbr':["1","2","3","4","5","6","7"],
        'days-standAlone-narrow':["1","2","3","4","5","6","7"],
        'days-format-wide':["1","2","3","4","5","6","7"],
        'days-format-abbr':["1","2","3","4","5","6","7"],
        'days-standAlone-narrow':["1","2","3","4","5","6","7"],
        'days-format-wide':["1","2","3","4","5","6","7"],
        'quarters-format-abbreviated':["Q1","Q2","Q3","Q4"],
        'quarters-stand-alone-narrow':["1","2","3","4"],
        'quarters-format-wide':["Q1","Q2","Q3","Q4"],
        'quarters-format-abbreviated':["Q1","Q2","Q3","Q4"],
        'quarters-stand-alone-narrow':["1","2","3","4"],
        'quarters-format-wide':["Q1","Q2","Q3","Q4"],
        'am':"AM",
        'pm':"PM",
        'eraNames':["BCE","CE"],
        'eraAbbr':["BCE","CE"],
        'eraNarrow':["BCE","CE"],
        'dateFormat-full': "EEEE, yyyy MMMM dd",
        'dateFormat-long': "yyyy MMMM d",
        'dateFormat-medium': "yyyy MMM d",
        'dateFormat-short': "yyyy-MM-dd",
        'timeFormat-full': "HH:mm:ss v",
        'timeFormat-long': "HH:mm:ss z",
        'timeFormat-medium': "HH:mm:ss",
        'timeFormat-short': "HH:mm",
        'dateTimeFormat': "{1} {0}" ,
        'dateTimeAvailableFormats':["E d","H","HH:mm","HH:mm:ss","E MMM d","MMMM d","M-d","mm:ss","yy-MM","yy MMM","yy Q","yyyy"],
        'dateTimeFormats-appendItem-Day':"{0} ({2}: {1})",
        'dateTimeFormats-appendItem-Day-Of-Week':"{0} {1}",
        'dateTimeFormats-appendItem-Era':"{0} {1}",
        'dateTimeFormats-appendItem-Hour':"{0} ({2}: {1})",
        'dateTimeFormats-appendItem-Minute':"{0} ({2}: {1})",
        'dateTimeFormats-appendItem-Month':"{0} ({2}: {1})",
        'dateTimeFormats-appendItem-Quarter':"{0} ({2}: {1})",
        'dateTimeFormats-appendItem-Second':"{0} ({2}: {1})",
        'dateTimeFormats-appendItem-Timezone':"{0} {1}",
        'dateTimeFormats-appendItem-Week':"{0} ({2}: {1})",
        'dateTimeFormats-appendItem-Year':"{0} {1}",
        'field-era':"Era",
        'field-year':"Year",
        'field-month':"Month",
        'field-week':"Week",
        'field-day':"Day",
        'field-weekday':"Day of the Week",
        'field-dayperiod':"Dayperiod",
        'field-hour':"Hour",
        'field-minute':"Minute",
        'field-second':"Second",
        'field-zone':"Zone"
};


/*v1.1 cldr/nls/number*/
// generated from ldml/main/*.xml, xpath: ldml/numbers
dojo.provide("dojo.nls.number");
dojo.nls.number.ROOT={
        'decimal':".",
        'group':",",
        'list':";",
        'percentSign':"%",
        'nativeZeroDigit':"0",
        'patternDigit':"#",
        'plusSign':"+",
        'minusSign':"-",
        'exponential':"E",
        'perMille':"",
        'infinity':" ",
        'nan':"NaN",
        'decimalFormat':"#,##0.###",
        'scientificFormat':"#E0",
        'percentFormat':"#,##0%",
        'currencySpacing-beforeCurrency-currencyMatch':"[:letter:]",
        'currencySpacing-beforeCurrency-surroundingMatch':"[:digit:]",
        'currencySpacing-beforeCurrency-insertBetween':" ",
        'currencySpacing-afterCurrency-currencyMatch':"[:letter:]",
        'currencySpacing-afterCurrency-surroundingMatch':"[:digit:]",
        'currencySpacing-afterCurrency-insertBetween':" ",
        'currencyFormat':" #,##0.00"
};

/*dojox_v1 Toaster.js*/
dojo.provide("dojox.widget.Toaster");

dojo.require("dojo.fx");

dojo.require("dijit._Widget");
dojo.require("dijit._Templated");

// This is mostly taken from Jesse Kuhnert's MessageNotifier.
// Modified by Bryan Forbes to support topics and a variable delay.
// Modified by Karl Tiedt to support 0 duration messages that require user interaction and message stacking

dojo.declare("dojox.widget.Toaster", [dijit._Widget, dijit._Templated], {
		// summary
		//		Message that slides in from the corner of the screen, used for notifications
		//		like "new email".
		templateString: '<div dojoAttachPoint="clipNode"><div dojoAttachPoint="containerNode" dojoAttachEvent="onclick:onSelect"><div dojoAttachPoint="contentNode"></div></div></div>',

		// messageTopic: String
		//		Name of topic; anything published to this topic will be displayed as a message.
		//		Message format is either String or an object like
		//		{message: "hello word", type: "MESSAGE", duration: 500}
		messageTopic: "",

		_uniqueId: 0,
		
		// messageTypes: Enumeration
		//		Possible message types.
		messageTypes: {
			MESSAGE: "message",
			WARNING: "warning",
			ERROR: "error",
			FATAL: "fatal"
		},

		// defaultType: String
		//		If message type isn't specified (see "messageTopic" parameter),
		//		then display message as this type.
		//		Possible values in messageTypes enumeration ("message", "warning", "error", "fatal")
		defaultType: "message",

		// positionDirection: String
		//		Position from which message slides into screen, one of
		//		["br-up", "br-left", "bl-up", "bl-right", "tr-down", "tr-left", "tl-down", "tl-right"]
		positionDirection: "tr-up",
		
		// positionDirectionTypes: Array
		//		Possible values for positionDirection parameter
		positionDirectionTypes: ["br-up", "br-left", "bl-up", "bl-right", "tr-down", "tr-left", "tl-down", "tl-right"],

		// duration: Integer
		//		Number of milliseconds to show message
		duration: "10000",

		//separator: String
		//		String used to separate messages if consecutive calls are made to setContent before previous messages go away
		separator: "<hr></hr>",

		postCreate: function(){
			dojox.widget.Toaster.superclass.postCreate.apply(this);
			this.hide();

			this.clipNode.className = "dijitToasterClip";
			this.containerNode.className += " dijitToasterContainer";
			this.contentNode.className = "dijitToasterContent";
			if(this.messageTopic){
				dojo.subscribe(this.messageTopic, this, "_handleMessage");
			}
		},

		_handleMessage: function(/*String|Object*/message){
			if(dojo.isString(message)){
				this.setContent( (messageType || this.defaultType) + this.separator + message);
			}else{
				this.setContent(message.type + this.separator + message.message, message.type, message.duration);
			}
		},

		setContent: function(/*String*/message, /*String*/messageType, /*int?*/duration){
			// summary
			//		sets and displays the given message and show duration
			// message:
			//		the message
			// messageType:
			//		type of message; possible values in messageTypes enumeration ("message", "warning", "error", "fatal")
			// duration:
			//		duration in milliseconds to display message before removing it. Widget has default value.
			duration = duration||this.duration;
			// sync animations so there are no ghosted fades and such
			if(this.slideAnim){
				if(this.slideAnim.status() != "playing"){
					this.slideAnim.stop();
				}
				if(this.slideAnim.status() == "playing" || (this.fadeAnim && this.fadeAnim.status() == "playing")){
					setTimeout(dojo.hitch(this, function(){
						this.setContent( messageType + "<br><hr><br>" + message, messageType);
					}), 50);
					return;
				}
			}

			var capitalize = function(word){
				return word.substring(0,1).toUpperCase() + word.substring(1);
			};

			// determine type of content and apply appropriately
			for(var type in this.messageTypes){
				dojo.removeClass(this.containerNode, "dijitToaster" + capitalize(this.messageTypes[type]));
			}

			dojo.style(this.containerNode, "opacity", 1);

			if(message && this.isVisible){
				message = this.contentNode.innerHTML + this.separator + (messageType || this.defaultType) + this.separator + message;
			}
			this.contentNode.innerHTML = message;

			dojo.addClass(this.containerNode, "dijitToaster" + capitalize(messageType || this.defaultType));

			// now do funky animation of widget appearing from
			// bottom right of page and up
			this.show();
			var nodeSize = dojo.marginBox(this.containerNode);
			
			if(this.isVisible){
				this._placeClip();
			}else{
				var style = this.containerNode.style;
				var pd = this.positionDirection;
				// sets up initial position of container node and slide-out direction
				if(pd.indexOf("-up") >= 0){
					style.left=0+"px";
					style.top=nodeSize.h + 10 + "px";
				}else if(pd.indexOf("-left") >= 0){
					style.left=nodeSize.w + 10 +"px";
					style.top=0+"px";
				}else if(pd.indexOf("-right") >= 0){
					style.left = 0 - nodeSize.w - 10 + "px";
					style.top = 0+"px";
				}else if(pd.indexOf("-down") >= 0){
					style.left = 0+"px";
					style.top = 0 - nodeSize.h - 10 + "px";
				}else{
					throw new Error(this.id + ".positionDirection is invalid: " + pd);
				}

				this.slideAnim = dojo.fx.slideTo({
					node: this.containerNode,
					top: 0, left: 0,
					duration: 450});
				dojo.connect(this.slideAnim, "onEnd", this, function(nodes, anim){
						//we build the fadeAnim here so we dont have to duplicate it later
						// can't do a fadeHide because we're fading the
						// inner node rather than the clipping node
						this.fadeAnim = dojo.fadeOut({
							node: this.containerNode,
							duration: 1000});
						dojo.connect(this.fadeAnim, "onEnd", this, function(evt){
							this.isVisible = false;
							this.hide();
						});
						//if duration == 0 we keep the message displayed until clicked
						//TODO: fix so that if a duration > 0 is displayed when a duration==0 is appended to it, the fadeOut is canceled
						if(duration>0){
							setTimeout(dojo.hitch(this, function(evt){
								// we must hide the iframe in order to fade
								// TODO: figure out how to fade with a BackgroundIframe
								if(this.bgIframe && this.bgIframe.iframe){
									this.bgIframe.iframe.style.display="none";
								}
								this.fadeAnim.play();
							}), duration);
						}else{
							dojo.connect(this, 'onSelect', this, function(evt){
								this.fadeAnim.play();
							});
						}
						this.isVisible = true;
					});
				this.slideAnim.play();
			}
		},

		_placeClip: function(){
			var view = dijit.getViewport();

			var nodeSize = dojo.marginBox(this.containerNode);

			var style = this.clipNode.style;
			// sets up the size of the clipping node
			style.height = nodeSize.h+"px";
			style.width = nodeSize.w+"px";

			// sets up the position of the clipping node
			var pd = this.positionDirection;
			if(pd.match(/^t/)){
				style.top = view.t+"px";
			}else if(pd.match(/^b/)){
				style.top = (view.h - nodeSize.h - 2 + view.t)+"px";
			}
			if(pd.match(/^[tb]r-/)){
				style.left = (view.w - nodeSize.w - 1 - view.l)+"px";
			}else if(pd.match(/^[tb]l-/)){
				style.left = 0 + "px";
			}

			style.clip = "rect(0px, " + nodeSize.w + "px, " + nodeSize.h + "px, 0px)";
			if(dojo.isIE){
				if(!this.bgIframe){
					this.clipNode.id = "__dojoXToaster_"+this._uniqueId++;
					this.bgIframe = new dijit.BackgroundIframe(this.clipNode);
//TODO					this.bgIframe.setZIndex(this.clipNode);
				}
//TODO				this.bgIframe.onResized();
				var iframe = this.bgIframe.iframe;
				iframe && (iframe.style.display="block");
			}
		},

		onSelect: function(/*Event*/e){
			// summary: callback for when user clicks the message
		},

		show: function(){
			// summary: show the Toaster
			dojo.style(this.containerNode, 'display', '');

			this._placeClip();

			if(!this._scrollConnected){
				this._scrollConnected = dojo.connect(window, "onscroll", this, this._placeClip);
			}
		},

		hide: function(){
			// summary: hide the Toaster

			//Q: ALP: I didn't port all the toggler stuff from d.w.HtmlWidget.  Is it needed? Ditto for show.
			dojo.style(this.containerNode, 'display', 'none');

			if(this._scrollConnected){
				dojo.disconnect(this._scrollConnected);
				this._scrollConnected = false;
			}

			dojo.style(this.containerNode, "opacity", 1);
		}
	}
);


</script>

	<!--script type="text/javascript" src="ui/scripts/desktop.js"></script-->
<script>
/*
	com.trivedi.oPls.desktop
	Copyright (c) 2016-2020 M. P. Trivedi.  All rights reserved.
	Last updated: 12.18 pm
	left off @ //EOD
*/

	var consTxt = "Console logging began @ " + new Date().toTimeString() + "<br>";
	var consoleTail = function(){
		var l = consTxt.length;
		var tail = consTxt.substring( l- 999, l);
		alert(tail);
	};
	
	var dP = function(strLogEntry){
		var now = new Date();
		var tmStamp = (now.toTimeString()) + "--> ";
		consTxt += "<span class='mLogInfo'>" + tmStamp + strLogEntry + "</span><br>";
		console.log(tmStamp + strLogEntry );
	};

	var tkData =  [
		{ categ1: "System (23 items)", parentId: "root", id: "mT_-1803461041" },
		{ id: "201710220243674", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "mTable - .addAll(List<obj>)", rowTTip: "does Replace or Put as needed;  allows .mSaveTbl() &nbsp;&nbsp;this will merge directly into mObjMap;  no need to mess w/instance vars", Objective: "New Feature", Priority: "9" },
		{ id: "20187171202252654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "Modularize View Generation", rowTTip: "<ul><li>Create a new fn accepting all config opts as params</li><li>@ the end we want a Fn where we can pass in something like:</li><li>FldChoice1, Sorted - PreDef Order (sys shd chk wh this is avail., or throw err)</li><li>FldChoice2, Sorted - Alpha - Desc</li><li>FldChoice3, sorted - Alpha - Asc w/Custom TTip contents (usr provided, cld be fld)</li><li>FldChoice4, calculated fld (usr set)</li><li>FldChoice5, System value (e.g. DtCreated)</li><li>and recieve the View exactly as currently hard-coded, w/ALL options</li><li><span style='color: red'>Note</span> that eventually we'll have to do this for the toolBars as well.</li></ul><br>5/26: Add computedFlds+PredBlder+FilterBlder to mDataView builderUI<br>6/22: Add fldType for Lookup flds", Objective: "New Feature", Priority: "3" },
		{ id: "201871712021951654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "Impl. creation/population of tbl-lvl vars used in UI", rowTTip: "e.g., Modules/Objectives/etc.  stream, get distinct(), store for retrieval into shell.<br>This is URGENT coz we'll need to get this done before implementing things like 'switch view'and 'switch Module|Project' etc.<br><span style='color: red'>5/14: Consider:</span> In a Modular sys, Switch View will switch to either another user-designed DataView, OR<br>usr has opt to Create a new one, which is the ONLY USE CASE for a list of Modules/Projects.<br>We don't need this feature, keep in list for now just in case.<br><span style='color: blue'>5/27: related task:</span> ALL list generators will need to filter recs<br>and show no prior versions i.e., UNID doesn't contain '^'.  Prior versions can be accessed via toolbar<br>btn only visible to people who have the appropriate Tbl Role.<br>In that case, we'll pop a DlgBox showing all priorVers, with ability to repl current w/any chosen after perusing.  Also poss place for DIFF view, if impl.<br><span style='color: blue'>5/27: related Qn:</span> Where is this tblProperty stored?  Set @ tbl def Stage & Serialized along w/table?<br><span style='color: blue'>5/27: related Note:</span> Impl this 1st for the Ad tbl since we NEED this functionality there.", Objective: "To Be Impl.", Priority: "1" },
		{ id: "201871712022131654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "Update Setup", rowTTip: "Setup shd do ALL the (un)packing reqd at one go, so NEEDED: <br><ul><li>9999_sys.enc to .zip & vice versa</li><li>9999_run.enc to .zip & vice versa</li><li>9999_upd.enc to .zip & vice versa</li><li>split_12.3 to split1.enc, split2.enc ... where ea are 12.3 Mb</li></ul>", Objective: "New Feature", Priority: "1" },
		{ id: "201871712022108654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "new dataClass ", rowTTip: "Add a new type for testing<br>AFTER the form functionality is working & <br>the generic DV infrastructure's in place<br>test w/ mNote/mBookMk / mFilm (toDojoRow() creates mBoxes)<br>Note for later: ContainerPane needs CSS class for mBoxContainer<br>test also w/a new dataClass for ShoppingCart (Product) class<br>dVs like AMZN w/ Tbl pagination;<br>ea row item containing HTML tables", Objective: "New Feature", Priority: "7" },
		{ id: "201871712021985654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "Imperative to decide whether we'll allow multiple tables open (same type) in the same session.", rowTTip: "This impacts many things down the line.  If we allow only one of ea type;  <br>we don't have to worry about idNames clashing <br>(which'd make the webpage crash)<br>FOR NOW it seems the way to go is: allow only 1 of each type.<br>There's no clear use case for allowing multiple-opens UNLESS we want to copy/compare from Tbl to Tbl.<br>and even in those sit.s, we can do that in the background without explicitly 'opening' in terms of the UI<br>Multi-open ality can be added later.", Objective: "New Features", Priority: "2" },
		{ id: "20187171202213654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "Serialize AllTbls as ONE dat file enc.", rowTTip: "</div>", Objective: "New Feature", Priority: "1" },
		{ id: "20187171202236654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "metaData Update fn.", rowTTip: "Update the existing fn. which gets metaData from Leads (mAd)<br> to generate a report of matches & counts (poss sep fn)<br>", Objective: "New Feature", Priority: "5" },
		{ id: "201871712022126654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "mTbl class needs new fld to store CLASS", rowTTip: "<ul><li>will allow totally generic fns</li><li>Class viewDoc = (Clazz) mTbl.get(suppliedUNID);</li><li>viewDoc.loadEditForm;</li></ul>", Objective: "New Feature", Priority: "1" },
		{ id: "201871712021875654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "mNotes/mBoxes", rowTTip: "read/resolve and import Links & mBoxes from ShellQn: consolidate Tables?<br><span style='color: red'>5/14: Note:</span> this offers an exc opportunity to test modular deployment when we do impl it since they're diff docTypes (esp Boxes). CAPITAL!</div>", Objective: "Version Fixes", Priority: "7" },
		{ id: "201871712021960654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "Update code to use Optional", rowTTip: "e.g., fnGetAdminString() -> if it doesn't exist or monkey has removed it;  will return null..", Objective: "To Be Impl.", Priority: "3" },
		{ id: "201711251245510", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "System - Amend getImage() proc to accept Str param", rowTTip: " (to run on docSave())", Objective: "Fix", Priority: "1" },
		{ id: "201871712022113654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "New flds for mData", rowTTip: "<ul><li>ATTACHMENTS: allows access via Dlg showing ZipEntries w/ #, Name</li><li>IMAGES: works similarly;  replaces mImage class</li>	</ul><br>Notice how this affects storage/display of html w/embedded images<br>cld bld request based off curr /docUNID=1111&dataClass=DDDD&imgName=XXX", Objective: "New Feature", Priority: "3" },
		{ id: "2018717120222654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "design/code a autoVersioning System (cld later incl <span style='color: red'>DIFF</span>)", rowTTip: "DIFF is non-trivial, PLUS has scope for errors: esply since we're working AFTER the fact<br>to reconstruct possible edits.  A better way wld be to track ea. keystroke while it's being made,<br> i.e., like an Editor, to capture the exact sequence AS it HAPPENS.  <br>Another approach:<br>Since storage isn't an issue;  why not save the whole obj every time (w/a limit, say 50 edits)<br>Use versioning prior ver saved as '^1' + UNID (^ for delta) ~~ upto '^50'.<br>Cld impl diff later in order to hightlight changes as a service to the user;  but if so get the ORIGINAL<br>Diff code, which's probably GNU, rather than using Google or Eclipse, which're copyrighted.<br>Workflow for versioning:<br><ul><li>User clicks on save -> </li><li>QuerySave (prior to PUT) Sys chks if prior version exist</li><li>Sys chks if prior version exist;  'saves' current prior to end of list(i.e., ^n + UNID )</li><li>Current version saved as UNID</li><li style='color: red'>All pred's to be updated to exclude prior versions from searches/indexing/reports</li><li>Later cld give user ability to remove prior versions via 'compacting' db</li><li style='color: red'>new docFlds: hasPriorVersions & lastVersionNum;  updated on QrySave to help avoid having to lookup.</li></ul>", Objective: "New Feature", Priority: "1" },
		{ id: "20185312584938000000", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "Impl. creation/population of tbl-lvl vars used in UI", rowTTip: "e.g., Modules/Objectives/etc.  stream, get distinct(), store for retrieval into shell.<br>This is URGENT coz we'll need to get this done before implementing things like 'switch view'and 'switch Module|Project' etc.", Objective: "To Be Impl.", Priority: "1" },
		{ id: "20187171202243654800", parentId: "mT_-1803461041", Project: "System", Module: "System", TaskName: "mTbl class vars", rowTTip: "mTbl init shd populate vars like Flds/tableName/even Defined DVs<br>NOTE: there is an INIT issue storing stuff in the mAd tbl (e.g., Logger) <br>", Objective: "New Feature", Priority: "1" },
		{ categ1: "Web:FrontEnd (14 items)", parentId: "root", id: "mT_821995416" },
		{ id: "201871712022122654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "impl single common ToolBar w/show-hide btns???", rowTTip: "<ul><li>single selected items fld w/class: '20182018&dataClass=XX' or 'mA_201812121'</li><li>Switching pane triggers toolbar show/hides</li><li>Could have QuickEdit dlgs for ea dataClass;  show appropriate one w/flds</li><li>If going this route, after REMOVE all but one Select fld;<br>modify code so ea selected item is in the form 'id=XX&dataClass=YY'</li></ul>", Objective: "New Feature", Priority: "2" },
		{ id: "20185312584947000000", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "docProps convert to dojoRow class", rowTTip: "we'll need this for front-end showing/hiding of functionality etc.<br>for instance:<br><ul><li>if a doc HAS prior versions there's a button to view them.</li><li><li>If an article's Flagged/Marked Read, 'unMark' or 'mark Unread' btns available.</li></ul>", Objective: "New Features", Priority: "3" },
		{ id: "20185312584944000000", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "Implement full functionality in mTask first. (View/Edit/Update)", rowTTip: "Easiest to test & actually use;  we can then port to other classes.<br>NOT implementing in all is imperative to prevent the monkeys from destroying data.<br>We also need to ensure that the security is working and they're not intercepting keystrokes, etc...", Objective: "New Features", Priority: "1" },
		{ id: "20187171202240654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "QuickEdit Dlg updates", rowTTip: "Above: a DropDown fld w/flds of the selectedClass<br>Below: appropriate inputFld (radio for Bool, dateControl for Date etc.).  <br>Copy over to editForm later<br>[PLACEHOLDER] Link for dojo examle form w/all the controls", Objective: "New Feature", Priority: "8" },
		{ id: "20187171202230654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "Replace Tables w/Grid -> if impl, shld be NOW", rowTTip: "Impacts possibly much dupl of effort (refresh/filtering/etc)<br>chk Tests for Dojo Server-side data pushes (not only var pushes via script payload)<br>As before, stick to IBM dojo not monkey-supplied Grid (yes, pout and sulk again)<br>Impacts possibly much dupl of effort<br>Qn: HOW MUCH dupl effort reqd? If not much can leave for later.", Objective: "New Feature", Priority: "1" },
		{ id: "20185312584946000000", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "Move all splash/Tbl-level functionality to ToolBars", rowTTip: "e.g, Ability to, e.g., choose Project/Module/Article Src etc.<br><ul><li>TASK -> [Choose new Project] (btn brings up dlgBox w/choices)</li><li>ARTICLE -> [Choose new Sources](likewise)</li></ul>LATER -> This wd also be a gd place to allow switching tables, if we decide to allow it.", Objective: "New Features", Priority: "3" },
		{ id: "20187171202224654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "CSS for Read docs", rowTTip: "Update CSS w/new style for UnREAD (read remains black)<br>Add a 'marked' style (used by Articles to show Marked;  other types to show 'highlighted' - 'not complete' if show all tasks turned on?)<br>Dark Blue is unRead</div>", Objective: "New Feature", Priority: "6" },
		{ id: "201871712022119654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "Misc dojo items", rowTTip: "<ul><li>fix fade/dissolve.  Necc to revert to earlier dojo ver?</li><li>Lookup set/get dojo-props for Pane dataClass Type/tbl info<br>This will be useful esply if using common toolBar w/ show-hide based on currDataType</li></ul>", Objective: "New Feature", Priority: "3" },
		{ id: "201871712021966654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "Add formatting btns to Article View", rowTTip: "Toolbar shd have basic fmting functions: Hilight, bkmark, fonts/etc.</div>", Objective: "To Be Impl.", Priority: "5" },
		{ id: "201871712021998654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "docProps convert to dojoRow class", rowTTip: "we'll need this for front-end showing/hiding of functionality etc.<br>for instance:<br><ul><li>if a doc HAS prior versions there's a button to view them.</li><li><li>If an article's Flagged/Marked Read, 'unMark' or 'mark Unread' btns available.</li></ul>", Objective: "New Features", Priority: "3" },
		{ id: "20187171202220654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "Remove Splash Pane", rowTTip: "(decide on a Fixed set of panes & open em all on startup<br>This avoids divID conflicts</div>", Objective: "Fix", Priority: "3" },
		{ id: "20187171202233654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "Shell Updates", rowTTip: "REMOVE dupl toolbars & selFields, use only ONE w/fmt 'mData_UNID'.'<br>Before the req is run, filter array & pipe the results.", Objective: "New Feature", Priority: "1" },
		{ id: "20185312584942000000", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "Design & Add Article Header to Article View", rowTTip: "Just a standard way to present all articles, showing source, headline, pubDt & tags<br>Later, cld get fancy e.g., acc to length of headline we cld maximize the adjust the font-size.", Objective: "New Feature", Priority: "1" },
		{ id: "2018717120227654800", parentId: "mT_821995416", Project: "System", Module: "Web:FrontEnd", TaskName: "Session mngt - trap exits", rowTTip: "Since the UI is going to be on a browser, we'll have to trap Page Leaves for session exits.This way we can process the session exit (cleanup, saves, etc) on the Server side.  Ask the user'close the session?/Save Changes?' and do cleanup on the server-side.  Includes displaying sysMessages e.g. new Module name etc.", Objective: "New Feature", Priority: "5" },

		{ categ1: "mArticle (10 items)", parentId: "root", id: "mT_1920040905" },
		{ id: "201871712021894654800", parentId: "mT_1920040905", Project: "System", Module: "mArticle", TaskName: "mArticle - Add MarkRead, auto + option to mark so", rowTTip: "<br><span style='color: red'>5/14: Note:</span> markRead or just opening doc via the 'View' button<br>shd. set Read = true and art.readOn = LocalDate.now()<br><span style='color: red'>5/14: RELATED:</span> We need to incorporate View colors for Read arts vs. default (unRead).</div>", Objective: "New Features", Priority: "1" },
		{ id: "201871712021936654800", parentId: "mT_1920040905", Project: "System", Module: "mArticle", TaskName: "Code & impl Async Import Process Queue", rowTTip: "Sep threads but synchronized.  parse->fmt->proc->run AI tagger module->etc.<br>Certain tasks can run on sep threads, e.g. Tagger;  & retn res to be inc. into doc<br>Others will need to be sequential coz they'll be changing the content<br>(all formatting fns) which MIGHT be the input to other procs.<br>Look into impl Queues etc. rather'n using flags.<br><span style='color: red'>Correction</span> This isn't portable across docTypes;  so no use (run manually via code).</div>", Objective: "New Features", Priority: "4" },

		{ categ1: "Spawn (8 items)", parentId: "root", id: "mT_80085851" },
		{ id: "20187171202275654800", parentId: "mT_80085851", Project: "System", Module: "Spawn", TaskName: "Qry Builder", rowTTip: "No need to check for exceptions;  we'll only allow valid construction based upon fldTypes<br>note: ea qryParam has option to be negated (chkbox)<br>note: button -> 'add qry criteria'<br><ul><li>Lookup Fld -> fetch & pop dropDn for choice</li><li>String Fld -> {contains}, {contains exactly}, {isBlank}</li><li>Number Fld (incl currency) -> >, <, =</li><li>Bool Fld -> true/false</li></ul></div>", Objective: "New Feature", Priority: "5" },
		{ id: "20187171202272654800", parentId: "mT_80085851", Project: "System", Module: "Spawn", TaskName: "Reqd flds", rowTTip: "Incl option to specify reqd flds during contruction via Wizard.</div>", Objective: "New Feature", Priority: "5" },
		{ id: "20187171202287654800", parentId: "mT_80085851", Project: "System", Module: "Spawn", TaskName: "Remove extraneous mods", rowTTip: "Remove stuff not needed by user (e.g. Tagger)</div>", Objective: "New Feature", Priority: "9" },
		{ id: "20187171202293654800", parentId: "mT_80085851", Project: "System", Module: "Spawn", TaskName: "Add ability to add flds", rowTTip: "Same forms altered to load existing data...</div>", Objective: "New Feature", Priority: "3" },
		{ id: "20187171202281654800", parentId: "mT_80085851", Project: "System", Module: "Spawn", TaskName: "Data Import", rowTTip: "Offer bulk-loading via CSV, json? via Wizard.<br>This WILL need thorough err checking for <br>blank flds/no separators/extra-missing flds<br>(poss approach: chk for errs & prompt to AutoFix)<br>TESTING: use NorthWind & TaskTbl</div>", Objective: "New Feature", Priority: "5" },
		{ id: "20187171202290654800", parentId: "mT_80085851", Project: "System", Module: "Spawn", TaskName: "Add reqd flds logic", rowTTip: "note that this also affects data imports after spawnSetup</div>", Objective: "New Feature", Priority: "3" },
		{ id: "201871712022101654800", parentId: "mT_80085851", Project: "System", Module: "Spawn", TaskName: "AdminTbl access by User", rowTTip: "Only via custom front-end adminUI offering limited func.<br>Note: Users' clients only SUBMIT;  if they want to browse user can setup/generate.</div>", Objective: "New Feature", Priority: "8" },
		{ id: "20187171202284654800", parentId: "mT_80085851", Project: "System", Module: "Spawn", TaskName: "Data Import - json", rowTTip: "Chk jdk json import/proc libs.</div>", Objective: "New Feature", Priority: "5" },

		{ categ1: "Tagger (6 items)", parentId: "root", id: "mT_-1797366374" },
		{ id: "201802140432040", parentId: "mT_-1797366374", Project: "System", Module: "Tagger", TaskName: "Add TagChk field to mArticle", rowTTip: "Set to true for newly Tagged docs.<br>  Workflow is like this<br>			-  New view is populated w/recently tagged docs<br>			-  Necessary changes are made<br>			-  If tag changed;  prompt 'Include doc in next Training?'<br>			-  Button click to reset flags & docs merged into gen population.", Objective: "mArticle", Priority: "8" },
		{ id: "201871712021921654800", parentId: "mT_-1797366374", Project: "System", Module: "Tagger", TaskName: "Add 2 mArt flds: Bool recentlyTagged;  Bool tagVetoed (by user)", rowTTip: "Set to true for newly Tagged docs.<br>  Workflow is like this<br>-  New view is populated w/recently tagged docs<br>-  Necessary changes are made<br>-  If tag changed;  prompt 'Include doc in next Training?'<br>-  Button click to reset flags & docs merged into gen population.</div>", Objective: "mArticle", Priority: "8" },
		{ id: "201871712021940654800", parentId: "mT_-1797366374", Project: "System", Module: "Tagger", TaskName: "Tagger POA", rowTTip: "-&gt;  NOTE: Test the keyDb against the corpus before working on this;  it may suffice;  if it does, we're done with this.<br>-&gt;  If not;  we shd 'learn from the data' ie., NaiveBayes & using custom Map/Reduce<br>-&gt;  The maps can be optimized later IF NECESSARY (if they just lie on a server they don't need optimization for size)<br>-&gt;  Build custom module for this rather than using off-the-shelf;  it's simple enough.  <br>Use a 'pipeline' like Mallet/Stanford/et al, but allow Multi-tagging & N-grams.<br>-&gt;  Use N-grams + wordmaps;  our approach will differ in that on proc new art;  instd of <br>looking for ea token in the Map;  at least the N-gram maps'll have to work the other way (ie, running art.indexOf(map Keys))<br>This is necc for N-grams since we don't know their poss lens.<br>-&gt;  Some core 'standard' tags based on content;  other 'custom' tags will further add tags (eg, a Desi article cd be Fin or Body + Desi Tagged;  sim.ly Amuse, which is anoth custom tag)<br>-&gt;  After running ea import (& tagger) articles will be marked \"justTagged\" & avail in a DataView to check.  That dataView will have a btn to \"incl art in next training\" and btns to reassign tags AND/OR add tags<br>-&gt;  This fits in better to the approach used by, say, mBox tagging (ie, ea film appears under diff tags & will show up when that tag is clicked upon).<br><span style='color: red'>Addenda 5/29: </span> After finalizing proc & testing we'll have to set 'confidence limits', e.g., 60 / .6, above which tags'll be considered appropriate & multi-tagging will occur.", Objective: "Tagger", Priority: "1" },
		{ id: "20185312584939000000", parentId: "mT_-1797366374", Project: "System", Module: "Tagger", TaskName: "Fix weird chars in data corpus before proceeding", rowTTip: "This opens up a whole can of worms (monkeys?).  The Monkeys use MACs (of crse?) and, apparently,<br>corrupt OUR data when they're evesdropping & save docs using the macs.  Monkeys've damaged<br>enough articles that they can't just be left out;  they'll have to be fixed.<br>Any attempt at fixing these leads to the primates monkeying with the compiler and interrupting all work.<br>Fortunately we have other things to do;  but we can't really <br>work on the AI Module until the monkeys straighten up their act.<br>Call this task DELAYED rather than POSTPONED.  as always, we shall prevail.", Objective: "Fix", Priority: "1" },
		{ id: "201871712021889654800", parentId: "mT_-1797366374", Project: "System", Module: "Tagger", TaskName: "Tagger - we have enough data;  Tag existing articles", rowTTip: "&nbsp;&nbsp;&nbsp;&nbsp;Missing from Tag Keywd list: Theatre, Opera, Desi, DesiNYC, Amuse (basti edit?)add new object : mDataView<br> -> implement Abstract;  Factory<br>  -> For ea. sort param;  <br>      ->chk mAdmin for sortKey<br>      ->if exists, get;  if not, use naturalSortOrder<br>      ->create a compositeComparator<br>      ->build dataView<br>Create & add more views now;  incl Arts/BySource;  Arts/ByCreationDt (sort w Yr/Mo a la Notes)</div>", Objective: "Data", Priority: "3" },

		{ categ1: "mTask (5 items)", parentId: "root", id: "mT_103263122" },
		{ id: "201871712021885654800", parentId: "mT_103263122", Project: "System", Module: "mTask", TaskName: "mTask - Business Case Logic for SaveProc", rowTTip: "mTask Business Case Logic for SaveProc -> <br> -> if mTask.Parent not in mAdmin.get(mTaskParentSortOrder);  add to end of this list<br> -> if mTask.ProjectName not in mAdmin.get(mTaskProjectNameSortOrder);  add to end of this list</div>", Objective: "Feature", Priority: "9" },
		{ id: "20187171202249654800", parentId: "mT_103263122", Project: "System", Module: "mTask", TaskName: "new Task Toolbar button to set options", rowTTip: "Task List Toolbar new btn 'View Options' allows displ. completed tasks", Objective: "New Feature", Priority: "9" },

		{ categ1: "mImage (4 items)", parentId: "root", id: "mT_-1103629074" },
		{ id: "201712141158904", parentId: "mT_-1103629074", Project: "System", Module: "mImage", TaskName: "imgDb Impl notes", rowTTip: "	Lookup Expected img types<br>RegExp srch:	  http:||~~|~~.ext (.*?)  &lt;BR&gt;   (.*?)  &lt;BR&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;(If grp(0).len < 10, grp(1) is the caption)<br>&nbsp;&nbsp;Replace w/mBox HTML (<- needs width fix)<br>&nbsp;&nbsp;Get img & put in imgDb;  same UNID as doc w appended fileNm<br>&nbsp;&nbsp;On the doc side;  QuerySave change in docUNID updates imgUNID.", Objective: "mImage", Priority: "2" },
		{ id: "20187171202217654800", parentId: "mT_-1103629074", Project: "System", Module: "mImage", TaskName: "images in adminTbl?", rowTTip: "Need to decide whether we need a separate file or just incl these in Admin <br>if we're only going to retain a few system images. <br><span style='color: red'>5/14: Consider:</span> Looks like we We do, even if using just as an example for Article to lookup<br>and return obs from another Table (img tbl).", Objective: "New Feature", Priority: "9" },
		{ id: "201871712021882654800", parentId: "mT_-1103629074", Project: "System", Module: "mImage", TaskName: "mImage Table", rowTTip: "import images;  Explore java API for thumbnails/compressionImport all image refsCreate fn to scan mArt post-Create & do the fetchingOptimize and/or reduce img sizes?Will need new CSS classes to display mBoxes inline within Content</div>", Objective: "Feature", Priority: "6" },

		{ categ1: "mAdmin (3 items)", parentId: "root", id: "mT_-1111273758" },
		{ id: "201871712021871654800", parentId: "mT_-1111273758", Project: "System", Module: "mAdmin", TaskName: "Keyword Table (mAdmin)", rowTTip: "For the Keyword Table;  incl add (List) Key -> Pub Name(s);  variations thereof    Val -> SRC_KEY Int (mapped to single Str val) eg (\"The Times of ~\", \"Times, the\") -> maps to -> int -> maps to -> \"TOI\"</div>", Objective: "New Features", Priority: "6" },
		{ id: "201871712021917654800", parentId: "mT_-1111273758", Project: "System", Module: "mAdmin", TaskName: "import Dict sheet", rowTTip: "Also a good place for similar placeholders.</div>", Objective: "mAdmin", Priority: "6" },
		{ id: "201711251245526", parentId: "mT_-1111273758", Project: "System", Module: "mAdmin", TaskName: "mAdmin - Need to web-enable Ad db;  ability to list/edit keys", rowTTip: "", Objective: "Web", Priority: "5" },

		{ categ1: "Web:ServerSide (3 items)", parentId: "root", id: "mT_-1814108320" },
		{ id: "201871712021933654800", parentId: "mT_-1814108320", Project: "System", Module: "Web:ServerSide", TaskName: "impl Sessions/userIds/accessLevels", rowTTip: "Setup, test & deploy Sessions in Jetty.<br><span style='color: red'>Design: </span> Sessions will preserve STATE and be NON-INTRUSIVE (no cookies/client side).<br><ul><li>A Session record wlll contain the output of the mErr log (so we'll have a way to chk for errors etc.)</li><li>Since it's saved in Admin it'll have Revision history ie a doc saved for ea session as a 'Prior Version'</li><li>Add an Observer to reqUpdates inside the session Obj to track open windows/panes for restoration of session</li></ul><li>When a user establishes a new session, the windows are restored (data will be new)</li></ul></div>", Objective: "New Features", Priority: "1" },
		{ id: "20185312584934000000", parentId: "mT_-1814108320", Project: "System", Module: "Web:ServerSide", TaskName: "if using DojoGrid (standard, non-monkey version) decide soon.", rowTTip: "The longer we take to decide, the more issues will crop up.<br>Also, more wasted effort on FrontEnd<br>Monkeys will always exist. If we DON'T go with DojoGrid eventually, <br>we'll have to provide some of the func. in our 'basic' HTML version, <br>e.g., pagination.<br>1 factor to consider: porting custom sort-orders to dojoGrd will be a pain.", Objective: "To Be Impl.", Priority: "7" },
		{ id: "201871712021973654800", parentId: "mT_-1814108320", Project: "System", Module: "Web:ServerSide", TaskName: "PaneCfg info", rowTTip: "We need to track info on a per-Pane-basis on the Server-side;  linked to paneId or something.<br>This will be necess. once we starting pushing back data after every change to ensure we're working on the same wavelength w/client as to TblName, ViewName etc.", Objective: "New Features", Priority: "2" },

		{ categ1: "MonkeyFix (2 items)", parentId: "root", id: "mT_444805922" },
		{ id: "201871712021927654800", parentId: "mT_444805922", Project: "System", Module: "MonkeyFix", TaskName: "Line up 5-6 tasks in IDE, work in parallel", rowTTip: "This way when the monkeys mess w/the compiler or files we can continue working seamlessly.</div>", Objective: "MonkeyFix", Priority: "3" },
		{ id: "201871712021910654800", parentId: "mT_444805922", Project: "System", Module: "MonkeyFix", TaskName: "'mobile' Working dirs", rowTTip: "Necessary to confuse the monkeys;  shd use new dirs every time.</div>", Objective: "MonkeyFix", Priority: "4" },

		{ categ1: "Admin (2 items)", parentId: "root", id: "mT_63116079" },
		{ id: "20187171202265654800", parentId: "mT_63116079", Project: "System", Module: "Admin", TaskName: "Pseudo-reflective proc in Init", rowTTip: "We need to add a proc in Init which builds/checks Adm tbl docs<br>1 doc per Table: w/FldNames & other params for ea table - ClassName<br>if new flds added (by user);  these docs w/autoPopulate. <br>This gives us a way to continue having the classes PRIVATE while <br>having a lookup alternative to getFlds/getDeclFlds.  <br>This shd incl fldtype & shall be tested by 1st auto-blding UItoolbars</div>", Objective: "New Feature", Priority: "5" },
		{ id: "20187171202256654800", parentId: "mT_63116079", Project: "System", Module: "Admin", TaskName: "Add Form Func to Edit|AdminDoc", rowTTip: "Edit|AdminDoc is a good place to add fn.ality for Forms: <br>Editing a sortKey, for inst, shd automatically bring up a pg w/btns for choosing fields,<br>after which system shd automatically bring up distinct values for user <br>to sort in user-def order.<br>Similarly, editing a diff TYPE of adDoc shld bring up corresp. pg.</div>", Objective: "New Feature", Priority: "3" },

		{ categ1: "DataViews (1 items)", parentId: "root", id: "mT_1631950020" },
		{ id: "201871712022104654800", parentId: "mT_1631950020", Project: "System", Module: "DataViews", TaskName: "Create & Impl a dataView builder 'wizard'", rowTTip: "FILTERS & SORTING (Preds) will be a part of the builder<br>	Impl a Filter Wizard;  used in conjunction w/DV blder<br>	<ul><li>Auto-saves prior choices</li>	<li>Only allows valid choices</li>	<li>Offers examples bott of screen</li>	<li>Adds filter pred to DV (create Fld if necc)</li></ul>", Objective: "New Feature", Priority: "2" },
		
		{ categ1: "Images (1 items)", parentId: "root", id: "mT_-2101383528" },
		{ id: "20187171202298654800", parentId: "mT_-2101383528", Project: "System", Module: "Images", TaskName: "Form qryOpen", rowTTip: "needs to chk for & resolve images/attachments<br>STANDARDIZE the approach: <br>1) (pref) hasImg=true hasAttchments=true numAttachments;  list of UNIDs/fileTypes<br>2) docUNIDs stored in imagesTbl for direct access w/o lookup<br>note: continue w/o using binary fmt;  small diff + we're deflating.</div>", Objective: "New Feature", Priority: "3" },

		{ categ1: "Misc (1 items)", parentId: "root", id: "mT_2398476" },
		{ id: "201871712022116654800", parentId: "mT_2398476", Project: "System", Module: "Misc", TaskName: "System Misc items", rowTTip: "<ul><li>Tmp DropDown to switch categs in Tk for now? (until DVs impl)</li></ul>", Objective: "New Feature", Priority: "1" },

		{ categ1: "Image (1 items)", parentId: "root", id: "mT_70760763" },
		{ id: "20187171202268654800", parentId: "mT_70760763", Project: "System", Module: "Image", TaskName: "Rename/repurpose (resourceTbl?)", rowTTip: "Same as existing tbl but allows Attachments;  stores fileName & fileType<br>(probed) for lookup.  ONE file per doc;  lookup UNID ref in doc.  Test w/Java PDFs.<br></div>", Objective: "New Feature", Priority: "5" },

		{ categ1: "Refactoring (1 items)", parentId: "root", id: "mT_-1021457600" },
		{ id: "20187171202260654800", parentId: "mT_-1021457600", Project: "System", Module: "Refactoring", TaskName: "Notes & tasks fore the next refactoring", rowTTip: "<span style='color: red'>Notes:<br></span><ul><li>List tips here & remove tasks after ea refactoring</li><li>Use eclipse for the final refactoring</li></ul><span style='color: red'>Tasks:<br></span><ul><li>Repl ea Internal Fld w prefix & update existing data</li><li></li></ul></div>", Objective: "New Feature", Priority: "3" }
	];

	var initPayload = [{
				id: "System.opl",
				name: "System", 
				desc: "System Table", 
				icon: "oPlsSysTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "By Source", dvName: "view1"},
					  {	dvLabel: "View2\By PubDate", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Article.opl",
				name: "Article", 
				desc: "Article Table", 
				icon: "oPlsDocTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "By Module\Priority", dvName: "view1"},
					  {	dvLabel: "View2\By Due Date", dvName: "view2"},
					  {	dvLabel: "View3\Completed Items", dvName: "view3"},
					  {	dvLabel: "View4\By Priority", dvName: "view4"}]
			},
			{ 	id: "Task.opl",
				name: "Task", 
				desc: "Task Table", 
				icon: "oPlsTaskTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image.opl",
				name: "Image And This and That", 
				desc: "Image Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image1.opl",
				name: "Image1", 
				desc: "Image1 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image2.opl",
				name: "Image2", 
				desc: "Image2 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image3.opl",
				name: "Image3", 
				desc: "Image3 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image4.opl",
				name: "Image4", 
				desc: "Image4 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image5.opl",
				name: "Image5", 
				desc: "Image5 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image6.opl",
				name: "Image6", 
				desc: "Image6 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image7.opl",
				name: "Image7", 
				desc: "Image7 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image8.opl",
				name: "Image8", 
				desc: "Image8 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image9.opl",
				name: "Image9", 
				desc: "Image9 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image19.opl",
				name: "Image19", 
				desc: "Image19 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			}/*,
			{ 	id: "Image29.opl",
				name: "Image29", 
				desc: "Image29 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image39.opl",
				name: "Image39", 
				desc: "Image39 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image494.opl",
				name: "Image49", 
				desc: "Image49 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			},
			{ 	id: "Image59.opl",
				name: "Image59", 
				desc: "Image59 Table", 
				icon: "oPlsImgTblIcon",
				accLvl: "Admin",
				dvs: [{	dvLabel: "dataView1", dvName: "view1"},
					  {	dvLabel: "View2\By Date", dvName: "view2"},
					  {	dvLabel: "View3\By Priority", dvName: "view3"}]
			}*/
		];



dojo.provide("com.trivedi.oPls.tblIcon");

	dojo.require("dojo.parser");
	dojo.require("dijit._Widget");
	dojo.require("dijit._Templated");
	dojo.require("dojo.fx");
	dojo.require("dijit.Menu");

	dojo.declare("com.trivedi.oPls.tblIcon",
		[dijit._Widget, dijit._Templated],{

		imgUrl: "divClassForIcon",
		descTxt:"This is the desc of the widget...",
		tblName:"The Table Name goes here",
		accessLevel:"user",
		dataViews: null,
		MinimizedBox: null,

		templateString:
			"<div class='oPlsTblIconLg' dojoAttachPoint='iconOuter'>"+
			"<center><div class='${imgUrl}' style='width:36px;overflow: hidden;' dojoAttachPoint='iconInner'>"+
			"<br></div><div class='oPlsIconLabel' dojoAttachPoint='iconLabel'>${tblName}</div></center></div>",

		postCreate: function(){
			this.inherited(arguments);
			dojo.connect(this, "onClick", function(evt){
				//dojo.stopEvent(evt);
				alert("adding pane for : " + dijit.byId(this.id).tblName);
				this.MinimizedBox = dojo._getMarginBox(this.iconOuter);
				//dP('iconClick ->  left: ' + window.clickSourceMinimizedBox.l + ' top: ' + window.clickSourceMinimizedBox.t + ' width: ' + window.clickSourceMinimizedBox.w + ' ht: ' + window.clickSourceMinimizedBox.h);
				window.desktop.addDesktopPane(this.id, this.MinimizedBox);
			});

			/*
			dojo.connect(this, "onmouseenter", function(evt){
				dojo.stopEvent(evt);
				alert("this.descTxt: " + dijit.byId(this.id).descTxt);
				//this.imgUrl = this.imgUrl.replace("on", "off");
				alert(' imgUrl before ' + this.imgUrl);
				this.set('imgUrl',"ui\\css\\images\\sysIconoff.gif");
				alert(' imgUrl after ' + this.get('imgUrl'));
			});

			dojo.connect(this, "onmouseleave", function(evt){
				//dojo.stopEvent(evt);
				//alert("this.descTxt: " + dijit.byId(this.id).descTxt);
				this.imgUrl = this.imgUrl.replace("off", "on");	 			
			});
			*/
			

			
			/*
			//	temp disabled;  the monkeys have requested a 
			//	"holiday season Menu" for the rest of the month.
			//create & attach Menu
			iconMenu = new dijit.Menu({targetNodeIds:[this.id], id:"iMenu", leftClickToOpen: false});
		        var mItem1 = new dijit.MenuItem({label:"dojo.event clicking", iconClass:"fas fa-database"});
				var mItem2 = new dijit.MenuItem({label:"Info"});
				var mItem3 = new dijit.MenuItem({label:"Open"});
		        dojo.connect(mItem1, "onClick", function(){alert("click! handler created via dojo.connect()")});
		        iconMenu.addChild(mItem1);
				iconMenu.addChild(mItem2);
				iconMenu.addChild(mItem3);
				if ( this.accessLevel == "Admin" ) {
					var mItem4 = new dijit.MenuItem({label:"Design"});
					iconMenu.addChild(mItem4);
				};
				
				var dvSubMenu = new dijit.Menu({parentMenu:iconMenu, id:"dvSubMenu"});
				for (var key in this.dvs){
					dv = itm.dvs[key];
					//alert('dvItem: label:' + dv.dvLabel + ' name: ' + dv.dvName );
					var dvsubMenuItem = new dijit.MenuItem({label:dv.dvLabel});
					var tmpCmd = "get" + dv.dvName;
					dojo.connect(dvsubMenuItem, "onClick", function(){alert(tmpCmd)});
					dvSubMenu.addChild(dvsubMenuItem);
				};
			iconMenu.addChild(new dijit.PopupMenuItem({label:"View", popup:dvSubMenu, id:"dvSubMenu"}));
			iconMenu.startup();
			*/
		},
		
		startup: function(){
			if(!this._started){
				this.inherited(arguments);
				//alert(this.tblName + ' icon started');
			}
		},
		
		center: function(e){
			// summary: public function to center a particular image
			//var p = dijit.getEnclosingWidget(this.domNode.parentNode);
			//p._center(this.domNode);
		}
});


dojo.provide("com.trivedi.oPls.mPane");

	dojo.require("dojo.parser");
	dojo.require("dijit._Widget");
	dojo.require("dijit._Templated");
	dojo.require("dijit.TitlePane");
	dojo.require("dojo.fx");
	dojo.require("dijit.Menu");

	dojo.declare("com.trivedi.oPls.mPane",
		[dijit.TitlePane, dijit._Widget, dijit._Templated],{

		boxType: "unknown",
		tags: "none",
		MinimizedBox: null,
		title: "mPaneTitle",
		selected: false,

		templateString:
		"    <div class=\"mPane\">"+
		"      <div tabindex=\"0\""+
		"		waiRole=\"button\" class=\"mPaneTitle\" dojoAttachPoint=\"focusNode\">"+
		"        <div dojoAttachPoint=\"titleNode\" dojoAttachEvent=\"onclick:titleClick\" class=\"mPaneTitleNode\">"+
		"	    <table class='dijitReset'><tr class='dijitReset'><td  class='dijitReset' align='left' dojoAttachPoint=\"iconNode\"></td>"+
		"	      <td>${boxType}</td><td class='dijitReset' align='right' dojoAttachPoint=\"selectIconNode\" class=\"\"></td></tr></table>"+
		"	 </div></div>"+
		"      <div class=\"mPaneContentOuter\" dojoAttachPoint=\"hideNode\" style='max-width: 175px;'>${title}"+
		"	<div class=\"mPaneContentInner\" dojoAttachPoint=\"containerNode\"  style='display:none;' waiRole=\"region\" tabindex=\"-1\">"+
		"      </div></div></div>",

		//postCreate: function(){
		startup: function(){
			this.inherited(arguments);

			if ( this.tags.indexOf("snippet") >=0 ) { this.boxType = "snippet"; };
			if ( this.tags.indexOf("link")>=0 ) {  alert('found a link');this.boxType = "link"; };
			if ( this.tags.indexOf("bookmark")>=0 ) { this.boxType = "bookmark"; };
			if ( this.tags.indexOf("notes")>=0 ) { this.boxType = "notes"; };
			if ( this.tags.indexOf("article")>=0 ) { this.boxType = "article"; };

		
			switch (this.boxType) {
			 case 'snippet':
			    dojo.addClass(this.iconNode, 'oPlsCodeIcon');
			    break;
			 case 'link':
			    dojo.addClass(this.iconNode, 'oPlsBookmarkIcon');
			    break;
			 case 'bookmark':
			    dojo.addClass(this.iconNode, 'oPlsBookmarkIcon');
			    break;
			 case 'notes':
			    dojo.addClass(this.iconNode, 'oPlsFileIcon2');
			    break;
			 case 'article':
			    dojo.addClass(this.iconNode, 'oPlsFileIcon2');
			    break;
			 default:
			    dojo.addClass(this.iconNode, 'oPlsHelpIcon');
			}
			if(!this._started){
				this.inherited(arguments);
			}
		},


		titleClick: function(/*Object*/ tgt){
			alert('mpane toggle');
			alert('mpane toggle -> item type -> ' + this.boxType + ' content -> \r\n' + this.containerNode.innerHTML );
			dojo.addClass(this.selectIconNode, 'oPlsDoneIcon');
			this.selected = true;
		},
		
		xstartup: function(){
			if(!this._started){
				this.inherited(arguments);
			}
		}
});

dojo.provide("com.trivedi.oPls._AccordionButton");

dojo.require("dijit.layout.AccordionContainer");

dojo.declare("com.trivedi.oPls._AccordionButton", dijit.layout._AccordionButton, {

	_setSelectedAttr: function(/*Boolean*/ isSelected){
		dP('in _setSelectedAttr for accPane');
		alert('custom_accBtn-> in _setSelectedAttr() for accPane');
		//consoleTail();
		this.selected = isSelected;
		dijit.setWaiState(this.focusNode, "expanded", isSelected);
		dijit.setWaiState(this.focusNode, "selected", isSelected);
		this.focusNode.setAttribute("tabIndex", isSelected ? "0" : "-1");
		if ( !isSelected && (this.contentWidget.id.indexOf('desktopLayoutPane') < 0)) {
			setTimeout(function(){
				window.desktopContainer.removeChild(dijit.byId(window.tblPane.id));
			}, 1500);
		};
	}
});


dojo.provide("com.trivedi.oPls.desktopPane");

dojo.declare(
	"com.trivedi.oPls.desktopPane",
	[dijit.layout.AccordionPane], {

	minimizedBox: null,
	maximizedBox: null
});

dojo.provide("com.trivedi.oPls.desktopContainer");

	dojo.require("dijit.layout.AccordionContainer");

dojo.declare("com.trivedi.oPls.desktopContainer", dijit.layout.AccordionContainer, {
		//		The name of the widget used to display the title of each pane
		buttonWidget: "com.trivedi.oPls._AccordionButton",

		__getTargetWidth: function(/* Node */ node){
			var cs = dojo.getComputedStyle(node);
			//@mpt 12.13 h = node._contentBox.h;w = node._contentBox.w;
			w = this._containerContentBox.w;
			return Math.max(w - dojo._getPadBorderExtents(node, cs).w - dojo._getMarginExtents(node, cs).w, 0);
		},
		__getTargetHeight: function(/* Node */ node){
			var cs = dojo.getComputedStyle(node);
			//@mpt 12.13 h = node._contentBox.h;
			h = this._verticalSpace;
			return Math.max(h - dojo._getPadBorderExtents(node, cs).h - dojo._getMarginExtents(node, cs).h, 0);
		},
		
		layout: function(){
		
			// Implement _LayoutWidget.layout() virtual method.
			// Set the height of the open pane based on what room remains.

			var openPane = this.selectedChildWidget;
			
			if(!openPane){ return;}


			if ( openPane.declaredClass.indexOf('LayoutContainer') < 0 ) {

			var openPaneContainer = openPane._wrapperWidget.domNode,
				openPaneContainerMargin = dojo._getMarginExtents(openPaneContainer),
				openPaneContainerPadBorder = dojo._getPadBorderExtents(openPaneContainer),
				mySize = this._contentBox;

			// get cumulative height of all the unselected title bars
			var totalCollapsedHeight = 0;
			dojo.forEach(this.getChildren(), function(child){
			if(child != openPane){
					totalCollapsedHeight += dojo.marginBox(child._wrapperWidget.domNode).h;
				}
			});
			this._verticalSpace = mySize.h - totalCollapsedHeight - openPaneContainerMargin.h 
			 	- openPaneContainerPadBorder.h - openPane._buttonWidget.getTitleHeight();

				// Memo size to make displayed child
				this._containerContentBox = {
					h: this._verticalSpace,
					w: this._contentBox.w - openPaneContainerMargin.w - openPaneContainerPadBorder.w
				};


				openPane.maximizedBox = this._containerContentBox;
				alert('accContainer.layout() sizing regular (not container) pane of type ' + openPane.baseClass + 
				"openPane.minimizedBox.t = " + openPane.minimizedBox.t + 
				"openPane.maximizedBox.t = " + openPane.maximizedBox.t );
				openPane.resize(openPane.minimizedBox);

			} else {
				alert('accContainer.layout() sizing container pane of type ' + openPane.declaredClass);
 
				//'max: ' + openPane.maximizedBox.t);
				openPane.resize(this._containerContentBox);
			}

		},
		
		_setupChild: function(child){
			// Overrides _LayoutWidget._setupChild().
			// Put wrapper widget around the child widget, showing title
			alert('in _setupChild for desktopContainer - 1');
			/*@mpt 0114: wtf? monkey biz
			child._wrapperWidget = new dijit.layout._AccordionInnerContainer({
				contentWidget: child,
				buttonWidget: this.buttonWidget,
				id: child.id + "_wrapper",
				dir: child.dir,
				lang: child.lang,
				parent: this
			});*/
			alert('in _setupChild for desktopContainer - calling this.inherited');
			dojo.addClass(child.domNode, this.baseClass+"-child");
			if(child.baseClass){
				dojo.addClass(child.domNode, this.baseClass+"-"+child.baseClass);
			}
		},
		
		customAddChild: function(/*dijit._Widget*/ child, /*Integer?*/ insertIndex){	
			alert('desktopContainer-> in in customAddChild() for pane: ' + child.domNode.id);
			if(this._started){
				// Adding a child to a started Accordion is complicated because children have
				// wrapper widgets.  Default code path (calling this.inherited()) would add
				// the new child inside another child's wrapper.

				// First add in child as a direct child of this AccordionContainer
				dojo.place(child.domNode, this.containerNode, insertIndex);

				//@1216;  store curr size & leave this for later.
				//child.resize({w: window.clickSourceMinimizedBox.w, h: window.clickSourceMinimizedBox.h,
					//l: window.clickSourceMinimizedBox.l, t: window.clickSourceMinimizedBox.t});
				

				if(!child._started){
					child.startup();
				}
				
				if (child.minimizedBox) {

					dojo.marginBox(child.domNode, {w: child.minimizedBox.w, h: child.minimizedBox.h, l: child.minimizedBox.l, t: child.minimizedBox.t});
					//proc iconBoxes
					alert('marginBoxes after startup & before _setupChild -> ' +
					' l-> max ' + dojo.marginBox(child.domNode).l +
					' l-> min ' + child.minimizedBox.l +
					' h-> max ' + dojo.marginBox(child.domNode).h +
					' t-> max ' + dojo.marginBox(child.domNode).t +
					' w-> max ' + dojo.marginBox(child.domNode).w );
					//EODchild.resize({ child.minimizedBox.w, child.minimizedBox.h });
				}
				// Then stick the wrapper widget around the child widget
				this._setupChild(child);
				alert('desktopContainer-> in customAddChild() for pane: ' + child.domNode.id + ' -> going to run _setupChild' + "\r\n(sticks the wrapper widget around the child widget)");

				//@mpt 0114: ERROR getting _wrapperWidget (called something else now);  get it WHILE CREATING IT
				//child.maximizedBox = dojo.marginBox(child._wrapperWidget.domNode);
				

				// Code below copied from StackContainer	
				//alert('in customAddChild-> going to run this.layout();  child has minBox.t: ' + 
				//	child.minimizedBox.t);
				//alert('desktopContainer-> in customAddChild() for pane: ' + child.domNode.id + ' -> going to run layout() on container');
				//@12.29this.layout();
				
				/*@12.17: accContainer.layout() does the foll -> 
				this is where we need to capture fut. child size.
				so ignore the customAddChild & override layout() in accCont
							// Memo size to make displayed child
							this._containerContentBox = {
								h: this._verticalSpace,
								w: this._contentBox.w - openPaneContainerMargin.w - openPaneContainerPadBorder.w
							};

							if(openPane){
								openPane.resize(this._containerContentBox);
							}
				*/
				
				if(!this.selectedChildWidget){
					this.selectChild(child);
				}
			}else{
				// We haven't been started yet so just add in the child widget directly,
				// and the wrapper will be created on startup()
				this.inherited(arguments);
			}
		},
		
		/* we need to resize earlier*/
		transition: function(/*dijit._Widget?*/newWidget, /*dijit._Widget?*/oldWidget, /*Boolean*/ animate){
			alert('desktopContainer-> in transition();  newWidget= ' + newWidget.id + ' oldWidget= ' + oldWidget.id);
			// Overrides StackContainer._transition() to provide sliding of title bars etc.
			if(this._inTransition){ return;  }
			var animations = [];
			var paneHeight = this._verticalSpace;
			if(newWidget){
				// Size the new widget, in case this is the first time it's being shown,
				// or I have been resized since the last time it was shown.
				// Note that page must be visible for resizing to work.
				if(this.doLayout && newWidget.resize){
					if ( !newWidget.minimizedBox ) {
						alert("in transition() -> newWidget -> DOESN'T HAVE minBox, calling resize to containersize");
						newWidget.resize(this._containerContentBox);
					}
				}

				newWidget._wrapperWidget.set("selected", true);
				this._showChild(newWidget);	 // prepare widget to be slid in

				var newContents = newWidget.domNode;
				dojo.addClass(newContents, "dijitVisible");
				dojo.removeClass(newContents, "dijitHidden");
						

				if(animate){
					var newContentsOverflow = newContents.style.overflow;
					newContents.style.overflow = "hidden";
					
					if (newWidget.minimizedBox) {


				alert('_transition: newWidget HAS maxBox -> ' +
				' l-> max ' + newWidget.maximizedBox.l +
				' h-> max ' + newWidget.maximizedBox.h +
				' t-> max ' + newWidget.maximizedBox.t +
				' w-> max ' + newWidget.maximizedBox.w );

				//@12.29 mpt: the maxBox is wrong;  it's being set AFTER the new pane is created/pushed below screen
				//consequently the anim runs from screen bottom to below the screen
				//However, the wrapperWidget comes into play too & there is a jitter.  We need to debug this to find out what's what.

				  alert('_transition: newWidget HAS minBox -> ' +
				' l-> min ' + newWidget.minimizedBox.l +
				' h-> min ' + newWidget.minimizedBox.h +
				' t-> min ' + newWidget.minimizedBox.t +
				' w-> min ' + newWidget.minimizedBox.w +
				' running animations for newWidget from minBox to targetHeight.  First setting to minBox' + newWidget.domNode.innerHTML);

					//newWidget._wrapperWidget.resize({w: newWidget.minimizedBox.w, h: newWidget.minimizedBox.h, l: newWidget.minimizedBox.l, t: newWidget.minimizedBox.t});
					/*var s = newContents.style;
					s.top = "-9999px";*/
					dojo.marginBox(newContents, {w: newWidget.minimizedBox.w, h: newWidget.minimizedBox.h, l: newWidget.minimizedBox.l, t: newWidget.minimizedBox.t});
					//this sets the OFFSET dims

					//newContents.resize({w: newWidget.minimizedBox.w, h: newWidget.minimizedBox.h, l: newWidget.minimizedBox.l, t: newWidget.minimizedBox.t});

					alert('just set to minBox');

					animations.push(dojo.animateProperty({
						node: newContents,
						duration: 9000,
						properties: {
							left: { start: newWidget.minimizedBox.l, end: newWidget.maximizedBox.l },
							top: { start: newWidget.minimizedBox.t, end: newWidget.maximizedBox.t },
							height: { start: newWidget.minimizedBox.h, end: newWidget.maximizedBox.h },
							width: { start: newWidget.minimizedBox.w, end: newWidget.maximizedBox.w }
						},


							/*left: { start: newWidget.minimizedBox.l, end: newWidget.maximizedBox.l },
							top: { start: newWidget.minimizedBox.t, end: newWidget.maximizedBox.t },
							height: { start: newWidget.minimizedBox.h, end: newWidget.maximizedBox.h },
							width: { start: newWidget.minimizedBox.w, end: newWidget.maximizedBox.w }
							*/
						onEnd: function(){
							newContents.style.overflow = newContentsOverflow;

							// Kick IE to workaround layout bug, see #11415
							if(dojo.isIE){
								setTimeout(function(){
									dojo.removeClass(newContents.parentNode, "dijitAccordionInnerContainerFocused");
									setTimeout(function(){
										dojo.addClass(newContents.parentNode, "dijitAccordionInnerContainerFocused");
									}, 0);
								}, 0);
							}
						}
					}));
					} else {
						//no minimizedBox
						//non-custom pane;  proceed as normal

						  alert('_transition: newWidget HAS NO minBox -> ' +
						'running animations for a normal newWidget from 1 to targetHeight');
						animations.push(dojo.animateProperty({
						node: newContents,
						duration: this.duration,
						properties: {
							height: { start: 1, end: this._getTargetHeight(newContents) }
						},
						onEnd: function(){
							newContents.style.overflow = newContentsOverflow;

							// Kick IE to workaround layout bug, see #11415
							if(dojo.isIE){
								setTimeout(function(){
									dojo.removeClass(newContents.parentNode, "dijitAccordionInnerContainerFocused");
									setTimeout(function(){
										dojo.addClass(newContents.parentNode, "dijitAccordionInnerContainerFocused");
									}, 0);
								}, 0);
							}
						}
						}));  //animations.push
					}
				}//else if animate
			}
			if(oldWidget){
				oldWidget._wrapperWidget.set("selected", false);
				var oldContents = oldWidget.domNode;
				if(animate){
					var oldContentsOverflow = oldContents.style.overflow;
					oldContents.style.overflow = "hidden";
					animations.push(dojo.animateProperty({
						node: oldContents,
						duration: this.duration,
						properties: {

						},
						onEnd: function(){
							dojo.addClass(oldContents, "dijitHidden");
							dojo.removeClass(oldContents, "dijitVisible");
							oldContents.style.overflow = oldContentsOverflow;
							if(oldWidget.onHide){
								oldWidget.onHide();
							}
						}
					}));
				}else{
					dojo.addClass(oldContents, "dijitHidden");
					dojo.removeClass(oldContents, "dijitVisible");
					if(oldWidget.onHide){
						oldWidget.onHide();
					}
				}
			}

			if(animate){
				this._inTransition = true;
				var combined = dojo.fx.combine(animations);
				combined.onEnd = dojo.hitch(this, function(){
					delete this._inTransition;
				});
				combined.play();
			}			
		}
		
});

dojo._hasResource["com.trivedi.oPls.desktop"] = true;

dojo.provide("com.trivedi.oPls.desktop");
		dojo.require("dijit.layout.LayoutContainer");
		/*dojo.require("dijit.layout.AccordionContainer");*/
		dojo.require("com.trivedi.oPls.desktopContainer");
		dojo.require("com.trivedi.oPls.gridPane");
		dojo.require("dijit.layout.TabContainer");
		dojo.require("dijit.layout.SplitContainer");
		dojo.require("dijit.layout.ContentPane");
		dojo.require("dijit.Tooltip");
		dojo.require("dijit.Dialog");
		dojo.require("dijit.Menu");
		/*dojo.require("dijit.form.FilteringSelect");*/
		dojo.require("dijit.form.CheckBox");
		dojo.require("dijit.form.Textarea");
		dojo.require("dojo.parser");

		dijit.Tooltip.defaultPosition=['above', 'below'];   //alt values: 'after', 'before' (default)
		var currLoc = window.location.toString().toLowerCase();
		var runLocal = currLoc.includes('file');
		var taskCheckedArray = [];
		var taskRemovedFromArr = [];

			
dojo.declare("com.trivedi.oPls.desktop", null, {

	prop: "prop1",
	removedFromArr: [],
        doxTagArr: {tagName : [], tagCount : []},

	constructor: function(){
		dP('UI constructor -> new desktopUI ob created');
	},
	
	dAlert: function(inp) {
		alert('alert triggered from com.trivedi.oPls.desktop ' + inp);
	},

	addDesktopPane: function(name, minBox) {
		var newBtn = new dijit.form.Button({
			label: "chkOpenPane"
		});

		alert('in desktop.addDesktopPane() for pane: ' + name + ' minBox.t: ' + minBox.t);
		if (name.indexOf('Task') > 0 ) {
			alert('taskClick');
			var pane = new com.trivedi.oPls.desktopPane({
				title: name,
				minimizedBox: minBox,
				content: "<div id='gridContainer'>gridContainer</div>"
			});
			//@12.16 window.desktopContainer.customAddChild(pane);
			window.desktopContainer.addChild(pane);
			window.desktopContainer.selectChild(pane, true);
			dijit.focus(pane.focusNode);
			paneOpen = true;
			var gridPane = new com.trivedi.oPls.gridPane();
			gridPane.placeAt(dojo.byId('gridContainer'), "last");
			window.tblPane = pane;
		} else {
			alert('adding pane');
			var pane = new com.trivedi.oPls.desktopPane({
				title: name,
				minimizedBox: minBox,
				content: "<div><h2>" + name + "</h2></div>"
			});
			//window.desktopContainer.customAddChild(pane);
			window.desktopContainer.selectChild(pane, true);
			dijit.focus(pane.focusNode);
			paneOpen = true;
			newBtn.placeAt(pane.id, "last");
			dojo.connect(newBtn, "onClick", function(){
				var currPane = window.desktopContainer.selectedChildWidget;
				alert("current Pane id val: " + currPane.id + ";  " + window.desktopContainer.id);
			});
			window.tblPane = pane;
		};
	},
	
	runMe: function() {
		var outerAcc = new com.trivedi.oPls.desktopContainer({style:"padding: 10px;  height: 500px;  width: 1100px;background-color: #00275E;"}, dojo.body());
		var oAID = outerAcc.id;
		
		dP("created outerAcc accContainer");
		var desktopLayout = new dijit.layout.LayoutContainer({
			title: "desktop Layout Pane",
			id: 'desktopLayoutPane'
		});
		outerAcc.addChild(desktopLayout);
		dP("added desktopContainer");
		outerAcc.startup();
		
		var innerLayout = new dijit.layout.LayoutContainer({
			style:"background-color: #E5F0FF;"
		});
		var topPane = new dijit.layout.ContentPane({
			layoutAlign: "top",
			style:"height: 50px;",
		});
		var centerPane = new dijit.layout.ContentPane({
			style:"height: 280px;",
			layoutAlign: "client"
		});
		var bottomPane = new dijit.layout.ContentPane({
			style:"height: 50px;",
			layoutAlign: "bottom",
			content: "<table><tr  class='footerPanel'><td>Copyright (c) 2016-2020 <span id=\"aboutDiv\">M. P. Trivedi</span>. All rights reserved.</td>"+
					"<td id='consoleBtn' align='right'><div class='oPlsConsoleIcon'>icon</div></td></tr></table>"
		});
		
		var mapNode = centerPane[centerPane.attributeMap["class"] || 'domNode'];
		dojo.addClass(mapNode, "oPlsTblIcon-container");
		
		innerLayout.addChild(topPane);
		innerLayout.addChild(centerPane);
		innerLayout.addChild(bottomPane);
		desktopLayout.addChild(innerLayout);

		var btn1 = new dijit.form.Button({
			id: "btn1",
			label: "chkPane id"
		});
		var btn2 = new dijit.form.Button({
			id: "btn2",
			iconClass: "oPlsFlameIcon",
			label: "HotFilter"
		});
		var btn3 = new dijit.form.Button({
			id: "btn3",
			class: "nnew",
			label: "log()"
		});
		btn2disabled = true;
		for (var key in initPayload){
			itm = initPayload[key];
			dP("Creating icon for: " + itm.id + " " + itm.name + " " + itm.desc);

			var icon = new com.trivedi.oPls.tblIcon({
				id: "icon_" + itm.id,
				tblName: itm.name,
				descTxt: itm.desc,
				imgUrl: itm.icon,
				accessLevel: itm.accLvl,
				dataViews: itm.dvs
			});
			dojo.place(icon.domNode, centerPane.id, "last");
			icon.startup();
		};

		dojo.place(btn1.domNode, topPane.id, "last");
		dojo.place(btn2.domNode, topPane.id, "last");
		dojo.place(btn3.domNode, topPane.id, "last");

		/*@mpt 01.14: monkeys changed the method signature (cld also be coz o' backporting)
		btn1.place(topPane.id, "last");
		btn2.place(topPane.id, "last");
		btn3.place(topPane.id, "last");*/
		dojo.connect(btn1, "onClick", function(){
			var currPane = window.desktopContainer.selectedChildWidget;
			alert("current Pane id val: " + currPane.id + ";;" + window.desktopContainer.id);
		});

/*		dojo.connect(window.desktopContainer.selectedChildWidget._buttonWidget, "onClick", function(){
			alert('click on desktopContainer title!');
		});*/

		dojo.connect(dojo.byId('consoleBtn'), "onclick", function(){
			alert('...user clicked on the consoleButton');
			var pane = new com.trivedi.oPls.desktopPane({
				title: 'Console',
				content: "<div>" + consTxt + "</div>"
			});
			//window.desktopContainer.customAddChild(pane);
			window.desktopContainer.addChild(pane);
			window.desktopContainer.selectChild(pane, true);
			dijit.focus(pane.focusNode);
			paneOpen = true;
			window.tblPane = pane;
		});	 

		dojo.connect(btn2, "onClick", function(){
			alert(dojo.byId(centerPane.id).innerHTML + " " + this.id);
		});
		dojo.connect(btn3, "onClick", function(){
			//window.desktop.mAlert('btn onclick');
			//addDesktopPane("added by btn3");
			//dojo.addClass(this.domNode, "nnew");
			var newC = dojo.hasClass(this.domNode, "nnew");
			var butC = dojo.hasClass(this.domNode, "dijitButtonNode");
			dP('button has new class? ' + newC + 
					'\r\n btn has domNode class? ' + butC);
				dP('\r\nbtn3 innerHTML->' + this.domNode.innerHTML);
				dP('\r\nbtn3 outerHTML->' + this.domNode.outerHTML);
				fakeAlert = window.prompt('btn3 outerHTML->', this.domNode.outerHTML);
		});
			window.desktopContainer = outerAcc;
	},
		
		mAlert: function(arg) {
			alert("mAlert -> " + arg);
		},
		
		testClose: function(pane,tab){
		  return confirm("Please confirm that you want tab "+tab.title+" closed");
		},

		taskSelect: function(Id, isChecked) {
	  	   /*<!--input id='Chkbox" + ... data-dojo-props='onClick:function(item,node,evt){ taskSelect(this.id, this.checked);}'-->*/
	  	   var selectedTasksList = "";
	  	   isChecked ? taskCheckedArray.push(Id) : "";
	  	   taskCheckedArray.forEach(function(val) {
	  	       selectedTasksList += ("\"" + val + "\"") + "," ;
	  	   });
	  	   document.getElementById("selTasks").innerHTML = selectedTasksList;
	  	   if (!isChecked){             
	  	   	var foundIndex = taskCheckedArray.lastIndexOf(Id);
		  	   var selectedTasksList = "";
		  	   taskRemovedFromArr = taskCheckedArray.splice(foundIndex, 1);
	  		   taskCheckedArray.forEach(function(val) {
			  	   selectedTasksList += ("\"" + val + "\"") + "," ;
		  	   });
	  	   	document.getElementById("selTasks").innerHTML = selectedTasksList;
	  	   };
		},

		tkResetSelections: function() {
		  	   taskCheckedArray.forEach(function(val) {
				dijit.byId(val).setAttribute('checked',false);  //setChecked(false);
			   });
			dojo.byId("selTasks").innerHTML = "";
		        taskCheckedArray = [];
		},
		
		editTask: function () {
			   if (taskCheckedArray.length !== 1) {
				alert('Please select a single task to edit...');
			   } else {
				var selTask = taskCheckedArray[0];
				var inTxt;
				if ( runLocal ) {
				    inTxt = "oPlus - System||mArticle||Task Name||Feature||1||Task Desc goes here";
				} else {
			          request("\\oPls\\tasks\\TaskFn\\markComplete||" + item + "||").then(function(text){
				        inTxt = text;
			          });
				}
				var frmData = inTxt.split("||");
				//dojo.byId('tkId').value=selTask;
				dojo.byId('tkProj').value=frmData[0];
				dojo.byId('tkMod').value=frmData[1];
				dojo.byId('tkName').value=frmData[2];
				dojo.byId('tkObj').value=frmData[3];
				dojo.byId('tkPrior').value=frmData[4];
				dojo.byId('tkDesc').value=frmData[5];
				dijit.byId('TaskFormDlg').show();
			   }
		},

		taskDlgOK: function() {
			dijit.byId('TaskFormDlg').hide();
			var frmData = dojo.byId('tkId').value + "||" +
				dojo.byId('tkProj').value +  "||" +
				dojo.byId('tkMod').value +  "||" +
				dojo.byId('tkName').value +  "||" +
				dojo.byId('tkObj').value +  "||" +
				dojo.byId('tkPrior').value +  "||" +
				dojo.byId('tkDesc').value + "||";
			dP("form data to submit: \n" +  frmData);
		},

		initDoxTagArray: function (){
		alert('in desktop.initDoxTagArray() ');
		     try{
		        var tempStr = "";
			panes = dijit.registry.filter(function(widget){ return widget.declaredClass=="com.trivedi.oPls.mPane";  });
			var doxTagArr = { tagName:[], tagCount:[] };

			panes.forEach(function(pane, i){
			  if ( pane.tags ) {
				var currTags = pane.tags.split(" ");

		        	  for (j = 0; j < currTags.length; j++){
			            var currTag = currTags[j];
				      if ( !doxTagArr['tagName'] ) {
					//no tags in var yet
			                doxTagArr['tagName'].push(currTag);
			                doxTagArr['tagCount'].push(1);
				      } else {
				              var idx = doxTagArr['tagName'].indexOf(currTag);
			        	      if (idx == -1){
				                doxTagArr['tagName'].push(currTag);
				                doxTagArr['tagCount'].push(1);
			        	      } else {
		        	        	doxTagArr['tagCount'][idx]++;
				              };
				      }; //if tagArray has tagName
			          };
			  }; //if pane.tags
			}, this);

			this.doxTagArr = doxTagArr;
			//alert( "JSON.stringified Array of Tags:" + dojo.toJson(this.doxTagArr, true, " "));
			this.bldTagCloud();
		  } catch(e){
			alert('error in desktop.initDoxTagArray() -> ' + e);
		  }

		},

		bldTagCloud: function(){
		  alert('in desktop.bldTagCloud()');
		     try{
		        var tagBtn = dijit.byId("hotFilterBtn");   
        
		        for (t = 0; t < this.doxTagArr['tagName'].length; t++){
		          var tagNm = this.doxTagArr['tagName'][t];
		          var tagC = this.doxTagArr['tagCount'][t];
		          var tagHtml = tagNm + "<span style='color:red;'><sup>" + tagC + "</sup></span>";
			  var dp = window.dp;
				var newTagBtn = new dijit.form.ToggleButton({
					id: "tagBtn_" + tagNm,
					innerHTML: tagHtml,
					iconClass: "dijitCheckBoxIcon",
					label: tagHtml,
					onChange: function(){dp.dAlert(this.checked + this.id);}
				});
			        	//onChange: function(){dp.mShowTag(this.checked,this.id);}
					//onChange: function(){dp.dAlert(this.checked + this.id);}
			      dojo.place(newTagBtn.domNode, dojo.byId("tagCloudHdr"), "last");
			};
			tagBtn.destroy();
		  } catch(e){
			alert('error in desktop.bldTagCloud() -> ' + e);
		  }
		}/*,

		mShowTag: function(isChkd, txtP) {
			alert('in mShowTag; isChkd = " + isChkd + " for tag: " + txtP);

		  try{
		          var fldOut = dojo.byId("clientPanel");
			  var tmpOut = {};
		          if (isChkd) {

				panes = dijit.registry.filter(function(widget){ 
					return ( (widget.declaredClass=="com.trivedi.oPls.mPane") && ( widget.tags.contains(txtP)) );
				});

				panes.forEach(function(pane, i){
					tmpOut.push(pane.id);
			        )};
				alert( "JSON.stringified Array of Tags:" + dojo.toJson(tmpOut, true, " "));
			  };
			// --ignore for now--- (this'll be done serverside anyway?)
		          //} else {
		          //    var strQry = "." + txtP;
		          //    var chosenTagArr = query( strQry, fldOut);
		          //      for (i = 0; i < chosenTagArr.length; i++){
		          //        chosenTagArr[i].outerHTML = "";
		          //      };
					

		  } catch(e){
			alert('error in desktop.mShowTag() -> ' + e);
		  }

	       }
*/
});

</script>

	<!--script>
	/*Desktop scriptlet*/

	if(typeof dojo == "undefined"){
		alert("oooops;  typeof dojo=undef;  the monkeys are getting too clever! p'haps time to kick some a**");
	}
		dojo.require("com.trivedi.oPls.desktop");
		dojo.require("com.trivedi.oPls.tblIcon");
		dojo.require("dojo.parser");

	dojo.addOnLoad(function(){

//	  try {

		hdrNode = dojo.doc.createElement("div");
		hdrNode.innerHTML = "<p><h1>Desktop Scriptlet</h1><p><hr><p>";
		hdrNode.normalize();
		dojo.place(hdrNode, dojo.body(), "first");


		alert('begin onLoad, creating desktop...');
	        window.desktop = new com.trivedi.oPls.desktop();
	        desktop.runMe();
		alert('exit onLoad');
//	  } catch(e){
//		alert('error in onLoad -> ' + e);
//	  }
	});
	</script-->


	<!--script>
	/*Grid scriptlet*/

	/*Append to dom: 
			<div id="gridContainer"></div>
	*/

	if(typeof dojo == "undefined"){
		alert("oooops;  typeof dojo=undef;  the monkeys are getting too clever! p'haps time to kick some a**");
	} else {
		alert('proc requires...');
	}
		dojo.require("com.trivedi.oPls.gridPane");
		dojo.require("dojo.parser");


	dojo.addOnLoad(function(){
	  try {
		hdrNode = dojo.doc.createElement("div");
		hdrNode.innerHTML = "<p><h1>Grid scriptlet</h1><p><hr><p>";
		hdrNode.normalize();
		dojo.place(hdrNode, dojo.body(), "first");

		dojo.connect(btn2, "onClick", function(){
			alert('testing ' + this.id);
		});

			//gridDiv = dojo.byId("gridContainer");
			alert('gridDiv set...');
			var grid = new dojox.Grid({
				 "id": "defGrid",
				 "get": this.get,
				 "onStyleRow": this.onStyleRow,
				"model": this.model,
				"structure": this.layout
			});
			alert('grid obj instantiated, appending domNode...')			
			dojo.byId("gridContainer").appendChild(grid.domNode);

			while(grid == "undefined"){
				alert('grid not defined yet...');
			}

			alert('gridPane constructor: before grid.render()...');
			grid.render();
			alert('after grid.render() before initMenu...');
			window["grid"] = grid;

			//alert("before initGridMenu()...");
			//initGridMenu();

		alert('--------exit onLoad' + dojo.byId("gridContainer").innerHTML);
	  } catch(e){
		alert('error in onLoad -> ' + e);
	  }
	});
	</script-->

	<script>

	/*Filter scriptLet*/

dojo.provide("com.trivedi.oPls.filter._ConditionExpr");

(function(){
	var fns = com.trivedi.oPls.filter;
	
dojo.declare("com.trivedi.oPls.filter._ConditionExpr",null,{
	// summary:
	//		The most abstract class for all condition expressions.
	//		A condition expression can be applied on a data row (e.g. an item in a store)
	//		and generate a result condition expression.
	// tags:
	//		abstract
	
	_name: "expr",
	applyRow: function(/* data item */datarow,/* function(row,colArg) */getter){
		// summary:
		//		*Unimplemented Interface*
		//		Apply this condition expression on the given datarow, return a result expression.
		// taqs:
		//		public extension
		// datarow: object
		//		A data item of a store.
		// getter: function(datarow, colArg)
		//		A user defined function that extract cell data from *datarow*.
		//		*colArg* is an argument that provides a kind of column information.
		//		It is defined by user in the constructor of a _DataExpr object.
		// returns:
		//		MUST return a _ConditionExpr object
		throw new Error("_ConditionExpr.applyRow: unimplemented interface");
	},
	toObject: function(){
		// summary:
		//		Convert this data expression to a simple object. Mainly used for serialization.
		// tags:
		//		public extension
		// returns:
		//		An object for serialization.
		return {};	//Object
	},
	getName: function(){
		// summary:
		//		Get the name of this kind of expression.
		// tags:
		//		public extension
		// returns:
		//		the name of this kind of expression
		return this._name;	//String
	}
});
dojo.declare("com.trivedi.oPls.filter._DataExpr", fns._ConditionExpr, {
	// summary:
	//		The most abstract class for all data expressions.
	//		A _DataExpr is a condition expression for a single data value.
	//		If the data value to be represent is a pure value (literal value, like string/number/Date/...)
	//		this _DataExpr is nothing more than a simple wrapper.
	//		If the data value to be represent is in a store, then _DataExpr is responsible to extract it
	//		from the store when this condition is applied to a data row.
	// private fields:
	//		_value: anything
	//		_colArg: anything
	_name: "data",
	constructor: function(/* anything */dataValue,/* bool */isColumn, /* object */convertArgs){
		// summary:
		//		If a _DataExpr is constructed with only one argument, this argument is regarded as a pure value.
		//		If the second argument is exactly a boolean true (no implict type transformation,
		//		so as to allow derived classes accept more arguments while retain *isColumn* to be optional),
		//		then this _DataExpr represents a column, and it's applyRow method is not a no-op.
		// dataValue: anything
		//		If *isColumn* is a boolean true, then it should be a kind of column information, like field name
		//		or column index. Otherwise, it is regarded as a pure value, and the getValue method will simply
		//		return it.
		// isColumn: boolean?
		//		Optional. To specify whether this _DataExpr represents a column or a pure value.
		this._convertArgs = convertArgs || {};
		if(dojo.isFunction(this._convertArgs.convert)){
			this._convertData = dojo.hitch(this._convertArgs.scope, this._convertArgs.convert);
		}
		if(isColumn){
			this._colArg = dataValue;
		}else{
			this._value = this._convertData(dataValue, this._convertArgs);
		}
	},
	getValue: function(){
		// summary:
		//		If this is a pure value wrapper, simply return the value.
		//		Otherwise (it's a column), return is undefined.
		// tags:
		//		public
		// returns:
		//		the value of this data expression.
		return this._value;	//String
	},
	applyRow: function(/* data item */datarow,/* function(row,colIdx) */getter){
		// summary:
		//		Implement _ConditionExpr.applyRow.
		//		If this is a pure value, simply return self.
		//		Otherwise, extract the cell data from datarow using the given getter function,
		//		and then convert this cell data to a _DataExpr and return the expression.
		return typeof this._colArg == "undefined" ? this :			//_ConditionExpr
			new (dojo.getObject(this.declaredClass))(
				this._convertData(getter(datarow, this._colArg), this._convertArgs)
			);
	},
	_convertData: function(/* anything */dataValue){
		// summary:
		//
		// tags:
		//		protected extension
		// dataValue: anything
		//		This argument should come from a store.
		// returns:
		return dataValue;
	},
	toObject: function(){
		// summary:
		//		Overrided from _ConditionExpr.toObject
		return {															//String
			op: this.getName(),
			data: this._colArg === undefined ? this._value : this._colArg,
			isCol: this._colArg !== undefined
		};
	}
});
dojo.declare("com.trivedi.oPls.filter._OperatorExpr", fns._ConditionExpr, {
	// summary:
	//		The most abstract class for all operator expressions.
	//		An operator expression is a _ConditionExpr that represents an operation.
	_name: "operator",
	constructor: function(/* Array | operand1,operand2,... */){
		// summary:
		//		The arguments are operands (or an array of operands, if the first argument
		//		is an Array) of this operator, ordering from left to right.
		//		Every operand should be a _ConditionExpr.
		if(dojo.isArray(arguments[0])){
			this._operands = arguments[0];
		}else{
			this._operands = [];
			for(var i = 0; i < arguments.length; ++i){
				this._operands.push(arguments[i]);
			}
		}
	},
	toObject: function(){
		// summary:
		//		Overrided from _ConditionExpr.toObject
		return {											//Object
			op: this.getName(),
			data: dojo.map(this._operands,function(operand){
				return operand.toObject();
			})
		};
	}
});
dojo.declare("com.trivedi.oPls.filter._UniOpExpr", fns._OperatorExpr, {
	// summary:
	//		The most abstract class for all uni-operator expressions.
	//		A uni-operator expression is an _OperatorExpr that only allow one operand.
	_name: "uniOperator",
	applyRow: function(/* data item */datarow,/* function(row,colArg) */getter){
		// summary:
		//		Implement _ConditionExpr.applyRow.
		//		Apply the restriction of "only one operand" and confirm the operand is a valid _ConditionExpr.
		//		Then do the calculation of this operator.
		if(!(this._operands[0] instanceof fns._ConditionExpr)){
			throw new Error("_UniOpExpr: operand is not expression.");
		}
		return this._calculate(this._operands[0],datarow,getter);	//_ConditionExpr
	},
	_calculate: function(/* _ConditionExpr */operand,/* data item*/datarow,/* function(row,colArg) */getter){
		// summary:
		//		*Unimplemented Interface*
		//		Do the actrual work of applyRow here.
		// tags:
		//		protected extension
		// operand: _ConditionExpr
		// datarow: object
		// getter: function(row,colArg)
		// returns:
		//		MUST return a _ConditionExpr object.
		throw new Error("_UniOpExpr._calculate: unimplemented interface");
	}
});
dojo.declare("com.trivedi.oPls.filter._BiOpExpr", fns._OperatorExpr, {
	// summary:
	//		The most abstract class for all bi-operator expressions.
	//		A bi-operator expression is an _OperatorExpr that allow and only allow two operands.
	_name: "biOperator",
	applyRow: function(/* data item */datarow,/* function(row,colArg) */getter){
		// summary:
		//		Implement _ConditionExpr.applyRow.
		//		Apply the restriction of "two operands" and confirm operands are valid _ConditionExpr's.
		if(!(this._operands[0] instanceof fns._ConditionExpr)){
			throw new Error("_BiOpExpr: left operand is not expression.");
		}else if(!(this._operands[1] instanceof fns._ConditionExpr)){
			throw new Error("_BiOpExpr: right operand is not expression.");
		}
		return this._calculate(this._operands[0],this._operands[1],datarow,getter);
	},
	_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,/* data item*/datarow,/* function(row,colArg) */getter){
		// summary:
		//		*Unimplemented Interface*
		//		Do the actrual work of applyRow here.
		// tags:
		//		protected extension
		// left_operand: _ConditionExpr
		// right_operand: _ConditionExpr
		// datarow: object
		// getter: function(row,colArg)
		// returns:
		//		MUST return a _ConditionExpr object.
		throw new Error("_BiOpExpr._calculate: unimplemented interface");
	}
});
})();

dojo.provide("com.trivedi.oPls.filter._DataExprs");

dojo.require("com.trivedi.oPls.filter._ConditionExpr");
dojo.require("dojo.date.locale");

(function(){
	var fns = com.trivedi.oPls.filter;

	dojo.declare("com.trivedi.oPls.filter.BooleanExpr", fns._DataExpr, {
		// summary:
		//		A condition expression wrapper for boolean values
		_name: "bool",
		_convertData: function(/* anything */dataValue){
			// summary:
			//		override from _DataExpr
			return !!dataValue;	//Boolean
		}
	});
	dojo.declare("com.trivedi.oPls.filter.StringExpr", fns._DataExpr, {
		// summary:
		//		A condition expression wrapper for string values
		_name: "string",
		_convertData: function(/* anything */dataValue){
			// summary:
			//		override from _DataExpr
			return String(dataValue);	//String
		}
	});
	dojo.declare("com.trivedi.oPls.filter.NumberExpr", fns._DataExpr, {
		// summary:
		//		A condition expression wrapper for number values
		_name: "number",
		_convertDataToExpr: function(/* anything */dataValue){
			// summary:
			//		override from _DataExpr
			return parseFloat(dataValue);	//Number
		}
	});
	dojo.declare("com.trivedi.oPls.filter.DateExpr", fns._DataExpr, {
		// summary:
		//		A condition expression wrapper for date values
		_name: "date",
		_convertData: function(/* anything */dataValue){
			// summary:
			//		override from _DataExpr
			if(dataValue instanceof Date){
				return dataValue;
			}else if(typeof dataValue == "number"){
				return new Date(dataValue);
			}else{
				var res = dojo.date.locale.parse(String(dataValue), dojo.mixin({selector: this._name}, this._convertArgs));
				if(!res){
					throw new Error("Datetime parse failed: " + dataValue);
				}
				return res;
			}
		},
		toObject: function(){
			// summary:
			//		Overrided from _DataExpr.toObject
			if(this._value instanceof Date){
				var tmp = this._value;
				this._value = this._value.valueOf();
				var res = this.inherited(arguments);
				this._value = tmp;
				return res;
			}else{
				return this.inherited(arguments);
			}
		}
	});
	dojo.declare("com.trivedi.oPls.filter.TimeExpr", fns.DateExpr, {
		// summary:
		//		A condition expression wrapper for time values
		_name: "time"
	});
})();


dojo.provide("com.trivedi.oPls.filter._FilterExpr");
//This is the main file that should be 'required' if filter expression facility is necessary.

dojo.require("com.trivedi.oPls.filter._DataExprs");
dojo.require("dojo.date");

(function(){
	var fns = com.trivedi.oPls.filter;
	/* Logic Operations */
	dojo.declare("com.trivedi.oPls.filter.LogicAND", fns._BiOpExpr, {
		// summary:
		//		A logic AND condition expression.
		_name: "and",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var res = left_operand.applyRow(datarow, getter).getValue() &&
				right_operand.applyRow(datarow, getter).getValue();
			return new fns.BooleanExpr(res);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.LogicOR", fns._BiOpExpr, {
		// summary:
		//		A logic OR condition expression.
		_name: "or",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var res = left_operand.applyRow(datarow, getter).getValue() ||
				right_operand.applyRow(datarow, getter).getValue();
			return new fns.BooleanExpr(res);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.LogicXOR", fns._BiOpExpr, {
		// summary:
		//		A logic XOR condition expression.
		_name: "xor",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var left_res = left_operand.applyRow(datarow, getter).getValue();
			var right_res = right_operand.applyRow(datarow, getter).getValue();
			return new fns.BooleanExpr((!!left_res) != (!!right_res));	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.LogicNOT", fns._UniOpExpr, {
		// summary:
		//		A logic NOT condition expression.
		_name: "not",
		_calculate: function(/* _ConditionExpr */operand,/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _UniOpExpr
			return new fns.BooleanExpr(!operand.applyRow(datarow, getter).getValue());	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.LogicALL", fns._OperatorExpr, {
		// summary:
		//		A logic ALL condition expression, equals a sequence of logic ANDs
		_name: "all",
		applyRow: function(/* data item */datarow,/* function(row,colIdx) */ getter){
			// summary:
			//		Override from _ConditionExpr
			for(var i = 0, res = true; res && (this._operands[i] instanceof fns._ConditionExpr); ++i){
				res = this._operands[i].applyRow(datarow,getter).getValue();
			}
			return new fns.BooleanExpr(res);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.LogicANY", fns._OperatorExpr, {
		// summary:
		//		A logic ANY condition expression, equals a sequence of logic ORs
		_name: "any",
		applyRow: function(/* data item */datarow,/* function(row,colIdx) */ getter){
			for(var i = 0,res = false; !res && (this._operands[i] instanceof fns._ConditionExpr); ++i){
				res = this._operands[i].applyRow(datarow,getter).getValue();
			}
			return new fns.BooleanExpr(res);	//_ConditionExpr
		}
	});
	
	/* Comparison Operations */
	function compareFunc(left,right,row,getter){
		left = left.applyRow(row, getter);
		right = right.applyRow(row, getter);
		var left_res = left.getValue();
		var right_res = right.getValue();
		if(left instanceof fns.TimeExpr){
			return dojo.date.compare(left_res,right_res,"time");
		}else if(left instanceof fns.DateExpr){
			return dojo.date.compare(left_res,right_res,"date");
		}else{
			if(left instanceof fns.StringExpr){
				left_res = left_res.toLowerCase();
				right_res = String(right_res).toLowerCase();
			}
			return left_res == right_res ? 0 : (left_res < right_res ? -1 : 1);
		}
	}
	dojo.declare("com.trivedi.oPls.filter.EqualTo", fns._BiOpExpr, {
		// summary:
		//		An "equal to" condition expression.
		_name: "equal",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var res = compareFunc(left_operand,right_operand,datarow,getter);
			return new fns.BooleanExpr(res === 0);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.LessThan", fns._BiOpExpr, {
		// summary:
		//		A "less than" condition expression.
		_name: "less",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var res = compareFunc(left_operand,right_operand,datarow,getter);
			return new fns.BooleanExpr(res < 0);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.LessThanOrEqualTo", fns._BiOpExpr, {
		// summary:
		//		A "less than or equal to" condition expression.
		_name: "lessEqual",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var res = compareFunc(left_operand,right_operand,datarow,getter);
			return new fns.BooleanExpr(res <= 0);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.LargerThan", fns._BiOpExpr, {
		// summary:
		//		A "larger than" condition expression.
		_name: "larger",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var res = compareFunc(left_operand,right_operand,datarow,getter);
			return new fns.BooleanExpr(res > 0);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.LargerThanOrEqualTo", fns._BiOpExpr, {
		// summary:
		//		A "larger than or equal to" condition expression.
		_name: "largerEqual",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var res = compareFunc(left_operand,right_operand,datarow,getter);
			return new fns.BooleanExpr(res >= 0);	//_ConditionExpr
		}
	});
	
	/* String Operations */
	dojo.declare("com.trivedi.oPls.filter.Contains", fns._BiOpExpr, {
		// summary:
		//		A "contains" condition expression.
		_name: "contains",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var left_res = String(left_operand.applyRow(datarow, getter).getValue()).toLowerCase();
			var right_res = String(right_operand.applyRow(datarow, getter).getValue()).toLowerCase();
			return new fns.BooleanExpr(left_res.indexOf(right_res) >= 0);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.StartsWith", fns._BiOpExpr, {
		// summary:
		//		A "starts with" condition expression.
		_name: "startsWith",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var left_res = String(left_operand.applyRow(datarow, getter).getValue()).toLowerCase();
			var right_res = String(right_operand.applyRow(datarow, getter).getValue()).toLowerCase();
			return new fns.BooleanExpr(left_res.substring(0, right_res.length) == right_res);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.EndsWith", fns._BiOpExpr, {
		// summary:
		//		An "ends with" condition expression.
		_name: "endsWith",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var left_res = String(left_operand.applyRow(datarow, getter).getValue()).toLowerCase();
			var right_res = String(right_operand.applyRow(datarow, getter).getValue()).toLowerCase();
			return new fns.BooleanExpr(left_res.substring(left_res.length - right_res.length) == right_res);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.Matches", fns._BiOpExpr, {
		// summary:
		//		A "regular expression match" condition expression.
		//		The second operand's value will be regarded as an regular expression string.
		_name: "matches",
		_calculate: function(/* _ConditionExpr */left_operand,/* _ConditionExpr */right_operand,
							/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var left_res = String(left_operand.applyRow(datarow, getter).getValue());
			var right_res = new RegExp(right_operand.applyRow(datarow, getter).getValue());
			return new fns.BooleanExpr(left_res.search(right_res) >= 0);	//_ConditionExpr
		}
	});
	dojo.declare("com.trivedi.oPls.filter.IsEmpty", fns._UniOpExpr, {
		// summary:
		//		Check empty
		_name: "isEmpty",
		_calculate: function(/* _ConditionExpr */operand,/* data item*/datarow,/* function(row,colIdx) */getter){
			// summary:
			//		Override from _BiOpExpr
			var res = operand.applyRow(datarow, getter).getValue();
			return new fns.BooleanExpr(res === "" || res == null);
		}
	});
})();

dojo.provide("com.trivedi.oPls.filter.FilterBuilder");
dojo.require("com.trivedi.oPls.filter._FilterExpr");

(function(){
var fns = com.trivedi.oPls.filter,
	bdr = function(opCls){
		return dojo.partial(function(cls,operands){
			return new fns[cls](operands);
		},opCls);
	},
	bdr_not = function(opCls){
		return dojo.partial(function(cls,operands){
			return new fns.LogicNOT(new fns[cls](operands));
		},opCls);
	};
dojo.declare("com.trivedi.oPls.filter.FilterBuilder", null, {
	// summary:
	//		Create filter expression from a JSON object.
	buildExpression: function(def){
		if("op" in def){
			return this.supportedOps[def.op.toLowerCase()](dojo.map(def.data, this.buildExpression, this));
		}else{
			var args = dojo.mixin(this.defaultArgs[def.datatype], def.args || {});
			return new this.supportedTypes[def.datatype](def.data, def.isColumn, args);
		}
	},
	supportedOps: {
	// summary:
	//		The builders of all supported operations
		"equalto": bdr("EqualTo"),
		"lessthan": bdr("LessThan"),
		"lessthanorequalto": bdr("LessThanOrEqualTo"),
		"largerthan": bdr("LargerThan"),
		"largerthanorequalto": bdr("LargerThanOrEqualTo"),
		"contains": bdr("Contains"),
		"startswith": bdr("StartsWith"),
		"endswith": bdr("EndsWith"),
		"notequalto": bdr_not("EqualTo"),
		"notcontains": bdr_not("Contains"),
		"notstartswith": bdr_not("StartsWith"),
		"notendswith": bdr_not("EndsWith"),
		"isempty": bdr("IsEmpty"),
		"range": function(operands){
			return new fns.LogicALL(
				new fns.LargerThanOrEqualTo(operands.slice(0,2)),
				new fns.LessThanOrEqualTo(operands[0], operands[2])
			);
		},
		"logicany": bdr("LogicANY"),
		"logicall": bdr("LogicALL")
	},
	supportedTypes: {
		"number": fns.NumberExpr,
		"string": fns.StringExpr,
		"boolean": fns.BooleanExpr,
		"date": fns.DateExpr,
		"time": fns.TimeExpr
	},
	defaultArgs: {
		"boolean": {
			"falseValue": "false",
			"convert": function(dataValue, args){
				var falseValue = args.falseValue;
				var trueValue = args.trueValue;
				if(dojo.isString(dataValue)){
					if(trueValue && dataValue.toLowerCase() == trueValue){
						return true;
					}
					if(falseValue && dataValue.toLowerCase() == falseValue){
						return false;
					}
				}
				return !!dataValue;
			}
		}
	}
});
})();

dojo.provide("com.trivedi.oPls.filter.FilterDefDialog");

dojo.require("dijit.dijit");
dojo.require("dijit.Tooltip");
dojo.require("dijit.Dialog");
dojo.require("dijit.form.ComboBox");
dojo.require("dijit.form.Select");
dojo.require("dijit.form.TextBox");
dojo.require("dijit.form.CheckBox");
dojo.require("dijit.form.NumberTextBox");
dojo.require("dijit.form.DateTextBox");
dojo.require("dijit.form.TimeTextBox");
dojo.require("dijit.form.Button");
dojo.require("dijit.layout.AccordionContainer");
dojo.require("dijit.layout.ContentPane");
dojo.require("dojo.date.locale");
dojo.require("dojo.string");
dojo.require("com.trivedi.oPls.filter.FilterBuilder");
dojo.require("dojox.grid.cells.dijit");
dojo.require("dojox.html.ellipsis");
dojo.require("dojox.html.metrics");
dojo.require("dojo.window");

(function(){
var fns = com.trivedi.oPls.filter,
	_tabIdxes = {
		// summary:
		//		Define tabindexes for elements in the filter definition dialog
		relSelect: 60,
		accordionTitle: 70,
		removeCBoxBtn: -1,
		colSelect: 90,
		condSelect: 95,
		valueBox: 10,
		addCBoxBtn: 20,
		filterBtn: 30,
		clearBtn: 40,
		cancelBtn: 50
	};
dojo.declare("com.trivedi.oPls.filter.FilterDefDialog", null, {
	// summary:
	//		Create the filter definition UI.
	curColIdx: -1,
	_relOpCls: "logicall",
	_savedCriterias: null,
	plugin: null,
	constructor: function(args){
		var plugin = this.plugin = args.plugin;
		this.builder = new fns.FilterBuilder();
		this._setupData();
		this._cboxes = [];
		this.defaultType = plugin.args.defaultType || "string";
		
		(this.filterDefPane = new fns.FilterDefPane({
			"dlg": this
		})).startup();
		(this._defPane = new com.trivedi.oPls.Dialog({
			"refNode": this.plugin.grid.domNode,
			"title": plugin.nls.filterDefDialogTitle,
			"class": "dojoxGridFDTitlePane",
			"iconClass": "dojoxGridFDPaneIcon",
			"content": this.filterDefPane
		})).startup();
		
		this._defPane.connect(plugin.grid.layer('filter'), "filterDef", dojo.hitch(this, "_onSetFilter"));
		plugin.grid.setFilter = dojo.hitch(this, "setFilter");
		plugin.grid.getFilter = dojo.hitch(this, "getFilter");
		plugin.grid.getFilterRelation = dojo.hitch(this, function(){
			return this._relOpCls;
		});
		
		plugin.connect(plugin.grid.layout, "moveColumn", dojo.hitch(this, "onMoveColumn"));
	},
	onMoveColumn: function(sourceViewIndex, destViewIndex, cellIndex, targetIndex, before){
		if(this._savedCriterias && cellIndex != targetIndex){
			if(before){ --targetIndex; }
			var min = cellIndex < targetIndex ? cellIndex : targetIndex;
			var max = cellIndex < targetIndex ? targetIndex : cellIndex;
			var dir = targetIndex > min ? 1 : -1;
			dojo.forEach(this._savedCriterias, function(sc){
				var idx = parseInt(sc.column, 10);
				if(!isNaN(idx) && idx >= min && idx <= max){
					sc.column = String(idx == cellIndex ? idx + (max - min) * dir : idx - dir);
				}
			});
		}
	},
	destroy: function(){
		this._defPane.destroyRecursive();
		this._defPane = null;
		this.filterDefPane = null;
		this.builder = null;
		this._dataTypeMap = null;
		this._cboxes = null;
		var g = this.plugin.grid;
		g.setFilter = null;
		g.getFilter = null;
		g.getFilterRelation = null;
		this.plugin = null;
	},
	_setupData: function(){
		var nls = this.plugin.nls;
		this._dataTypeMap = {
		// summary:
		//		All supported data types
			"number":{
				valueBoxCls: {
					dft: dijit.form.NumberTextBox
				},
				conditions:[
					{label: nls.conditionEqual, value: "equalto", selected: true},
					{label: nls.conditionNotEqual, value: "notequalto"},
					{label: nls.conditionLess, value: "lessthan"},
					{label: nls.conditionLessEqual, value: "lessthanorequalto"},
					{label: nls.conditionLarger, value: "largerthan"},
					{label: nls.conditionLargerEqual, value: "largerthanorequalto"},
					{label: nls.conditionIsEmpty, value: "isempty"}
				]
			},
			"string":{
				valueBoxCls: {
					dft: dijit.form.TextBox,
					ac: fns.UniqueComboBox		//For autoComplete
				},
				conditions:[
					{label: nls.conditionContains, value: "contains", selected: true},
					{label: nls.conditionIs, value: "equalto"},
					{label: nls.conditionStartsWith, value: "startswith"},
					{label: nls.conditionEndWith, value: "endswith"},
					{label: nls.conditionNotContain, value: "notcontains"},
					{label: nls.conditionIsNot, value: "notequalto"},
					{label: nls.conditionNotStartWith, value: "notstartswith"},
					{label: nls.conditionNotEndWith, value: "notendswith"},
					{label: nls.conditionIsEmpty, value: "isempty"}
				]
			},
			"date":{
				valueBoxCls: {
					dft: dijit.form.DateTextBox
				},
				conditions:[
					{label: nls.conditionIs, value: "equalto", selected: true},
					{label: nls.conditionBefore, value: "lessthan"},
					{label: nls.conditionAfter, value: "largerthan"},
					{label: nls.conditionRange, value: "range"},
					{label: nls.conditionIsEmpty, value: "isempty"}
				]
			},
			"time":{
				valueBoxCls: {
					dft: dijit.form.TimeTextBox
				},
				conditions:[
					{label: nls.conditionIs, value: "equalto", selected: true},
					{label: nls.conditionBefore, value: "lessthan"},
					{label: nls.conditionAfter, value: "largerthan"},
					{label: nls.conditionRange, value: "range"},
					{label: nls.conditionIsEmpty, value: "isempty"}
				]
			},
			"boolean": {
				valueBoxCls: {
					dft: fns.BooleanValueBox
				},
				conditions: [
					{label: nls.conditionIs, value: "equalto", selected: true},
					{label: nls.conditionIsEmpty, value: "isempty"}
				]
			}
		};
	},
	setFilter: function(rules, ruleRelation){
		rules = rules || [];
		if(!dojo.isArray(rules)){
			rules = [rules];
		}
		var func = function(){
			if(rules.length){
				this._savedCriterias = dojo.map(rules, function(rule){
					var type = rule.type || this.defaultType;
					return {
						"type": type,
						"column": String(rule.column),
						"condition": rule.condition,
						"value": rule.value,
						"colTxt": this.getColumnLabelByValue(String(rule.column)),
						"condTxt": this.getConditionLabelByValue(type, rule.condition),
						"formattedVal": rule.formattedVal || rule.value
					};
				}, this);
				this._criteriasChanged = true;
				if(ruleRelation === "logicall" || ruleRelation === "logicany"){
					this._relOpCls = ruleRelation;
				}
				var exprs = dojo.map(rules, this.getExprForCriteria, this);
				exprs = this.builder.buildExpression(exprs.length == 1 ? exprs[0] : {
					"op": this._relOpCls,
					"data": exprs
				});
				this.plugin.grid.layer("filter").filterDef(exprs);
				this.plugin.filterBar.toggleClearFilterBtn(false);
			}
			this._closeDlgAndUpdateGrid();
		};
		if(this._savedCriterias){
			this._clearWithoutRefresh = true;
			var handle = dojo.connect(this, "clearFilter", this, function(){
				dojo.disconnect(handle);
				this._clearWithoutRefresh = false;
				func.apply(this);
			});
			this.onClearFilter();
		}else{
			func.apply(this);
		}
	},
	getFilter: function(){
		return dojo.clone(this._savedCriterias) || [];
	},
	getColumnLabelByValue: function(v){
		var nls = this.plugin.nls;
		if(v.toLowerCase() == "anycolumn"){
			return nls["anyColumnOption"];
		}else{
			var cell = this.plugin.grid.layout.cells[parseInt(v, 10)];
			return cell ? (cell.name || cell.field) : "";
		}
	},
	getConditionLabelByValue: function(type, c){
		var conditions = this._dataTypeMap[type].conditions;
		for(var i = conditions.length - 1; i >= 0; --i){
			var cond = conditions[i];
			if(cond.value == c.toLowerCase()){
				return cond.label;
			}
		}
		return "";
	},
	addCriteriaBoxes: function(/* int */cnt){
		// summary:
		//		Add *cnt* criteria boxes to the filter definition pane.
		//		Check overflow if necessary.
		if(typeof cnt != "number" || cnt <= 0){
			return;
		}
		var cbs = this._cboxes,
			cc = this.filterDefPane.cboxContainer,
			total = this.plugin.args.ruleCount,
			len = cbs.length, cbox;
		//If overflow, add to max rule count.
		if(total > 0 && len + cnt > total){
			cnt = total - len;
		}
		for(; cnt > 0; --cnt){
			cbox = new fns.CriteriaBox({
				dlg: this
			});
			cbs.push(cbox);
			cc.addChild(cbox);
		}
		//If there's no content box in it , AccordionContainer can not startup
		cc.startup();
		this._updatePane();
		this._updateCBoxTitles();
		cc.selectChild(cbs[cbs.length-1]);
		//Asign an impossibly large scrollTop to scroll the criteria pane to the bottom.
		this.filterDefPane.criteriaPane.scrollTop = 1000000;
		if(cbs.length === 4){
			if(dojo.isIE <= 6 && !this.__alreadyResizedForIE6){
				var size = dojo.position(cc.domNode);
				size.w -= dojox.html.metrics.getScrollbar().w;
				cc.resize(size);
				this.__alreadyResizedForIE6 = true;
			}else{
				cc.resize();
			}
		}
	},
	removeCriteriaBoxes: function(/* int|CriteriaBox|int[] */cnt,/* bool? */isIdx){
		// summary:
		//		Remove criteria boxes from the filter definition pane.
		var cbs = this._cboxes, cc = this.filterDefPane.cboxContainer,
			len = cbs.length, start = len - cnt,
			end = len - 1, cbox,
			curIdx = dojo.indexOf(cbs, cc.selectedChildWidget.content);
		if(dojo.isArray(cnt)){
			var i, idxes = cnt;
			idxes.sort();
			cnt = idxes.length;
			//find a rule that's not deleted.
			//must find and focus the last one, or the hack will not work.
			for(i = len - 1; i >= 0 && dojo.indexOf(idxes, i) >= 0; --i){}
			if(i >= 0){
				//must select before remove
				if(i != curIdx){
					cc.selectChild(cbs[i]);
				}
				//idxes is sorted from small to large,
				//so travel reversely won't need change index after delete from array.
				for(i = cnt-1; i >= 0; --i){
					if(idxes[i] >= 0 && idxes[i] < len){
						cc.removeChild(cbs[idxes[i]]);
						cbs.splice(idxes[i],1);
					}
				}
			}
			start = cbs.length;
		}else{
			if(isIdx === true){
				if(cnt >= 0 && cnt < len){
					start = end = cnt;
					cnt = 1;
				}else{
					return;
				}
			}else{
				if(cnt instanceof fns.CriteriaBox){
					cbox = cnt;
					cnt = 1;
					start = end = dojo.indexOf(cbs, cbox);
				}else if(typeof cnt != "number" || cnt <= 0){
					return;
				}else if(cnt >= len){
					cnt = end;
					start = 1;
				}
			}
			if(end < start){
				return;
			}
			//must select before remove
			if(curIdx >= start && curIdx <= end){
				cc.selectChild(cbs[start ? start-1 : end+1]);
			}
			for(; end >= start; --end){
				cc.removeChild(cbs[end]);
			}
			cbs.splice(start, cnt);
		}
		this._updatePane();
		this._updateCBoxTitles();
		if(cbs.length === 3){
			//In ie6, resize back to the normal width will cause the title button look strange.
			cc.resize();
		}
	},
	getCriteria: function(/* int */idx){
		// summary:
		//		Get the *idx*-th criteria.
		if(typeof idx != "number"){
			return this._savedCriterias ? this._savedCriterias.length : 0;
		}
		if(this._savedCriterias && this._savedCriterias[idx]){
			return dojo.mixin({
				relation: this._relOpCls == "logicall" ? this.plugin.nls.and : this.plugin.nls.or
			},this._savedCriterias[idx]);
		}
		return null;
	},
	getExprForCriteria: function(rule){
		if(rule.column == "anycolumn"){
			var cells = dojo.filter(this.plugin.grid.layout.cells, function(cell){
				return !(cell.filterable === false || cell.hidden);
			});
			return {
				"op": "logicany",
				"data": dojo.map(cells, function(cell){
					return this.getExprForColumn(rule.value, cell.index, rule.type, rule.condition);
				}, this)
			};
		}else{
			return this.getExprForColumn(rule.value, rule.column, rule.type, rule.condition);
		}
	},
	getExprForColumn: function(value, colIdx, type, condition){
		colIdx = parseInt(colIdx, 10);
		var cell = this.plugin.grid.layout.cells[colIdx],
			colName = cell.field || cell.name,
			obj = {
				"datatype": type || this.getColumnType(colIdx),
				"args": cell.dataTypeArgs,
				"isColumn": true
			},
			operands = [dojo.mixin({"data": this.plugin.args.isServerSide ? colName : cell}, obj)];
		obj.isColumn = false;
		if(condition == "range"){
			operands.push(dojo.mixin({"data": value.start}, obj),
				dojo.mixin({"data": value.end}, obj));
		}else if(condition != "isempty"){
			operands.push(dojo.mixin({"data": value}, obj));
		}
		return {
			"op": condition,
			"data": operands
		};
	},
	getColumnType: function(/* int */colIndex){
		var cell = this.plugin.grid.layout.cells[parseInt(colIndex, 10)];
		if(!cell || !cell.datatype){
			return this.defaultType;
		}
		var type = String(cell.datatype).toLowerCase();
		return this._dataTypeMap[type] ? type : this.defaultType;
	},
	//////////////////////////////////////////////////////////////////////////////////////////////////////////
	clearFilter: function(noRefresh){
		// summary:
		//		Clear filter definition.
		if(!this._savedCriterias){
			return;
		}
		this._savedCriterias = null;
		this.plugin.grid.layer("filter").filterDef(null);
		try{
			this.plugin.filterBar.toggleClearFilterBtn(true);
			this.filterDefPane._clearFilterBtn.set("disabled", true);
			this.removeCriteriaBoxes(this._cboxes.length-1);
			this._cboxes[0].load({});
		}catch(e){
			//Any error means the filter is defined outside this plugin.
		}
		if(noRefresh){
			this.closeDialog();
		}else{
			this._closeDlgAndUpdateGrid();
		}
	},
	showDialog: function(/* int */colIndex){
		// summary:
		//		Show the filter defintion dialog.
		this._defPane.show();
		this.plugin.filterStatusTip.closeDialog();
		this._prepareDialog(colIndex);
	},
	closeDialog: function(){
		// summary:
		//		Close the filter definition dialog.
		this._defPane.hide();
	},
	onFilter: function(e){
		// summary:
		//		Triggered when the "Filter" button is clicked.
		if(this.canFilter()){
			this._defineFilter();
			this._closeDlgAndUpdateGrid();
			this.plugin.filterBar.toggleClearFilterBtn(false);
		}
	},
	onClearFilter: function(e){
		// summary:
		//		Triggered when the "Clear" button is clicked.
		if(this._savedCriterias){
			if(this._savedCriterias.length > 1){
				this.plugin.clearFilterDialog.show();
			}else{
				this.clearFilter(this._clearWithoutRefresh);
			}
		}
	},
	onCancel: function(e){
		// summary:
		//		Triggered when the "Cancel" buttton is clicked.
		var sc = this._savedCriterias;
		var cbs = this._cboxes;
		if(sc){
			this.addCriteriaBoxes(sc.length - cbs.length);
			this.removeCriteriaBoxes(cbs.length - sc.length);
			dojo.forEach(sc, function(c, i){
				cbs[i].load(c);
			});
		}else{
			this.removeCriteriaBoxes(cbs.length - 1);
			cbs[0].load({});
		}
		this.closeDialog();
	},
	onRendered: function(cbox){
		// summary:
		//		Triggered when the rendering of the filter definition dialog is completely finished.
		// cbox:
		//		Current visible criteria box
		if(!dojo.isFF){
			var elems = dijit._getTabNavigable(dojo.byId(cbox.domNode));
			dijit.focus(elems.lowest || elems.first);
		}else{
			var dp = this._defPane;
			dp._getFocusItems(dp.domNode);
			dijit.focus(dp._firstFocusItem);
		}
	},
	_onSetFilter: function(filterDef){
		// summary:
		//		If someone clear the filter def in the store directly, we must clear it in the UI.
		//		If someone defines a filter, don't know how to handle it!
		if(filterDef === null && this._savedCriterias){
			this.clearFilter();
		}
	},
	_prepareDialog: function(/* int */colIndex){
		var sc = this._savedCriterias,
			cbs = this._cboxes, i, cbox;
		this.curColIdx = colIndex;
		if(!sc){
			if(cbs.length === 0){
				this.addCriteriaBoxes(1);
			}else{
				//Re-populate columns anyway, because we don't know when the column is set to hidden.
				for(i = 0; (cbox = cbs[i]); ++i){
					cbox.changeCurrentColumn();
				}
			}
		}else if(this._criteriasChanged){
			this.filterDefPane._relSelect.set("value", this._relOpCls === "logicall" ? "0" : "1");
			this._criteriasChanged = false;
			var needNewCBox = sc.length > cbs.length;
			this.addCriteriaBoxes(sc.length - cbs.length);
			this.removeCriteriaBoxes(cbs.length - sc.length);
			this.filterDefPane._clearFilterBtn.set("disabled", false);
			if(needNewCBox){
				dojo.forEach(sc, function(c, i){
					var handle = dojo.connect(this, "onRendered", function(cbox){
						if(cbox == cbs[i]){
							dojo.disconnect(handle);
							cbox.load(c);
						}
					});
				}, this);
			}else{
				for(i = 0; i < sc.length; ++i){
					cbs[i].load(sc[i]);
				}
			}
		}
		//Since we're allowed to remove cboxes when the definition pane is not shown,
		//we have to resize the container to have a correct _verticalSpace.
		this.filterDefPane.cboxContainer.resize();
	},
	_defineFilter: function(){
		var cbs = this._cboxes,
			filterCboxes = function(method){
				return dojo.filter(dojo.map(cbs, function(cbox){
					return cbox[method]();
				}), function(result){
					return !!result;
				});
			},
			exprs = filterCboxes("getExpr");
		this._savedCriterias = filterCboxes("save");
		exprs = exprs.length == 1 ? exprs[0] : {
			"op": this._relOpCls,
			"data": exprs
		};
		exprs = this.builder.buildExpression(exprs);
		
		this.plugin.grid.layer("filter").filterDef(exprs);
		this.filterDefPane._clearFilterBtn.set("disabled", false);
	},
	_updateCBoxTitles: function(){
		for(var cbs = this._cboxes, i = cbs.length; i > 0; --i){
			cbs[i - 1].updateRuleIndex(i);
			cbs[i - 1].setAriaInfo(i);
		}
	},
	_updatePane: function(){
		var cbs = this._cboxes,
			defPane = this.filterDefPane;
		defPane._addCBoxBtn.set("disabled", cbs.length == this.plugin.args.ruleCount);
		defPane._filterBtn.set("disabled", !this.canFilter());
	},
	canFilter: function(){
		return dojo.filter(this._cboxes, function(cbox){
			return !cbox.isEmpty();
		}).length > 0;
	},
	_closeDlgAndUpdateGrid: function(){
		this.closeDialog();
		var g = this.plugin.grid;
		g.showMessage(g.loadingMessage);
		setTimeout(dojo.hitch(g, g._refresh), this._defPane.duration + 10);
	}
});
dojo.declare("com.trivedi.oPls.filter.FilterDefPane",[dijit._Widget,dijit._Templated],{
	templateString: "<div class='dojoxGridFDPane'>" +
		"<div class='dojoxGridFDPaneRelation'>${_relMsgFront}" +
		"<span class='dojoxGridFDPaneModes' dojoAttachPoint='criteriaModeNode'>" +
		"<select dojoAttachPoint='_relSelect' dojoType='dijit.form.Select' dojoAttachEvent='onChange: _onRelSelectChange'>" +
			"<option value='0'>${_relAll}</option>" +
			"<option value='1'>${_relAny}</option>" +
		"</select>" +
	"</span>${_relMsgTail}</div>" +
	"<div dojoAttachPoint='criteriaPane' class='dojoxGridFDPaneRulePane'></div>" +
	"<div dojoAttachPoint='_addCBoxBtn' dojoType='dijit.form.Button' " +
		"class='dojoxGridFDPaneAddCBoxBtn' iconClass='dojoxGridFDPaneAddCBoxBtnIcon'" +
		"dojoAttachEvent='onClick:_onAddCBox' label='${_addRuleBtnLabel}' showLabel='false'>" +
	"</div>" +
	"<div class='dojoxGridFDPaneBtns' dojoAttachPoint='buttonsPane'>" +
		"<span dojoAttachPoint='_cancelBtn' dojoType='dijit.form.Button' " +
			"dojoAttachEvent='onClick:_onCancel' label='${_cancelBtnLabel}'>" +
		"</span>" +
		"<span dojoAttachPoint='_clearFilterBtn' dojoType='dijit.form.Button' " +
			"dojoAttachEvent='onClick:_onClearFilter' label='${_clearBtnLabel}' disabled='true'>" +
		"</span>" +
		"<span dojoAttachPoint='_filterBtn' dojoType='dijit.form.Button' " +
			"dojoAttachEvent='onClick:_onFilter' label='${_filterBtnLabel}' disabled='true'>" +
		"</span></div></div>",
	widgetsInTemplate: true,
	dlg: null,
	postMixInProperties: function(){
		this.plugin = this.dlg.plugin;
		var nls = this.plugin.nls;
		this._addRuleBtnLabel = nls.addRuleButton;
		this._cancelBtnLabel = nls.cancelButton;
		this._clearBtnLabel = nls.clearButton;
		this._filterBtnLabel = nls.filterButton;
		this._relAll = nls.relationAll;
		this._relAny = nls.relationAny;
		this._relMsgFront = nls.relationMsgFront;
		this._relMsgTail = nls.relationMsgTail;
	},
	postCreate: function(){
		this.inherited(arguments);
		this.connect(this.domNode, "onkeypress", "_onKey");
		(this.cboxContainer = new fns.AccordionContainer({
			nls: this.plugin.nls
		})).placeAt(this.criteriaPane);
		
		this._relSelect.set("tabIndex", _tabIdxes.relSelect);
		this._addCBoxBtn.set("tabIndex", _tabIdxes.addCBoxBtn);
		this._cancelBtn.set("tabIndex", _tabIdxes.cancelBtn);
		this._clearFilterBtn.set("tabIndex", _tabIdxes.clearBtn);
		this._filterBtn.set("tabIndex", _tabIdxes.filterBtn);
		
		var nls = this.plugin.nls;
		dijit.setWaiState(this._relSelect.domNode, "label", nls.waiRelAll);
		dijit.setWaiState(this._addCBoxBtn.domNode, "label", nls.waiAddRuleButton);
		dijit.setWaiState(this._cancelBtn.domNode, "label", nls.waiCancelButton);
		dijit.setWaiState(this._clearFilterBtn.domNode, "label", nls.waiClearButton);
		dijit.setWaiState(this._filterBtn.domNode, "label", nls.waiFilterButton);
		
		this._relSelect.set("value", this.dlg._relOpCls === "logicall" ? "0" : "1");
	},
	uninitialize: function(){
		this.cboxContainer.destroyRecursive();
		this.plugin = null;
		this.dlg = null;
	},
	_onRelSelectChange: function(val){
		this.dlg._relOpCls = val == "0" ? "logicall" : "logicany";
		dijit.setWaiState(this._relSelect.domNode,"label", this.plugin.nls[val == "0" ? "waiRelAll" : "waiRelAny"]);
	},
	_onAddCBox: function(){
		this.dlg.addCriteriaBoxes(1);
	},
	_onCancel: function(){
		this.dlg.onCancel();
	},
	_onClearFilter: function(){
		this.dlg.onClearFilter();
	},
	_onFilter: function(){
		this.dlg.onFilter();
	},
	_onKey: function(e){
		if(e.keyCode == dojo.keys.ENTER){
			this.dlg.onFilter();
		}
	}
});
dojo.declare("com.trivedi.oPls.filter.CriteriaBox",[dijit._Widget,dijit._Templated],{
	templateString: "<div class='dojoxGridFCBox'>" +
		"<div class='dojoxGridFCBoxSelCol' dojoAttachPoint='selColNode'>" +
		"<span class='dojoxGridFCBoxField'>${_colSelectLabel}</span>" +
		"<select dojoAttachPoint='_colSelect' dojoType='dijit.form.Select' " +
			"class='dojoxGridFCBoxColSelect' " +
			"dojoAttachEvent='onChange:_onChangeColumn'>" +
		"</select>" +
	"</div>" +
	"<div class='dojoxGridFCBoxCondition' dojoAttachPoint='condNode'>" +
		"<span class='dojoxGridFCBoxField'>${_condSelectLabel}</span>" +
		"<select dojoAttachPoint='_condSelect' dojoType='dijit.form.Select' " +
			"class='dojoxGridFCBoxCondSelect'" +
			"dojoAttachEvent='onChange:_onChangeCondition'>" +
		"</select>" +
		"<div class='dojoxGridFCBoxCondSelectAlt' dojoAttachPoint='_condSelectAlt' style='display:none;'></div>" +
	"</div>" +
	"<div class='dojoxGridFCBoxValue' dojoAttachPoint='valueNode'>" +
		"<span class='dojoxGridFCBoxField'>${_valueBoxLabel}</span>" +
	"</div></div>",
	widgetsInTemplate: true,
	dlg: null,
	postMixInProperties: function(){
		this.plugin = this.dlg.plugin;
		this._curValueBox = null;
		
		var nls = this.plugin.nls;
		this._colSelectLabel = nls.columnSelectLabel;
		this._condSelectLabel = nls.conditionSelectLabel;
		this._valueBoxLabel = nls.valueBoxLabel;
		this._anyColumnOption = nls.anyColumnOption;
	},
	postCreate: function(){
		var dlg = this.dlg, g = this.plugin.grid;
		//Select Column
		this._colSelect.set("tabIndex", _tabIdxes.colSelect);
		this._colOptions = this._getColumnOptions();
		this._colSelect.addOption([
			{label: this.plugin.nls.anyColumnOption, value: "anycolumn", selected: dlg.curColIdx < 0},
			{value: ""}
		].concat(this._colOptions));
		//Select Condition
		this._condSelect.set("tabIndex", _tabIdxes.condSelect);
		this._condSelect.addOption(this._getUsableConditions(dlg.getColumnType(dlg.curColIdx)));
		this._showSelectOrLabel(this._condSelect, this._condSelectAlt);
		
		this.connect(g.layout, "moveColumn", "onMoveColumn");
	},
	_getColumnOptions: function(){
		var colIdx = this.dlg.curColIdx >= 0 ? String(this.dlg.curColIdx) : "anycolumn";
		return dojo.map(dojo.filter(this.plugin.grid.layout.cells, function(cell){
			return !(cell.filterable === false || cell.hidden);
		}), function(cell){
			return {
				label: cell.name || cell.field,
				value: String(cell.index),
				selected: colIdx == String(cell.index)
			};
		});
	},
	onMoveColumn: function(){
		var tmp = this._onChangeColumn;
		this._onChangeColumn = function(){};
		var option = this._colSelect.get("selectedOptions");
		this._colSelect.removeOption(this._colOptions);
		this._colOptions = this._getColumnOptions();
		this._colSelect.addOption(this._colOptions);
		var i = 0;
		for(; i < this._colOptions.length; ++i){
			if(this._colOptions[i].label == option.label){
				break;
			}
		}
		if(i < this._colOptions.length){
			this._colSelect.set("value", this._colOptions[i].value);
		}
		var _this = this;
		setTimeout(function(){
			_this._onChangeColumn = tmp;
		}, 0);
	},
	onRemove: function(){
		this.dlg.removeCriteriaBoxes(this);
	},
	uninitialize: function(){
		if(this._curValueBox){
			this._curValueBox.destroyRecursive();
			this._curValueBox = null;
		}
		this.plugin = null;
		this.dlg = null;
	},
	_showSelectOrLabel: function(sel, alt){
		var options = sel.getOptions();
		if(options.length == 1){
			alt.innerHTML = options[0].label;
			dojo.style(sel.domNode, "display", "none");
			dojo.style(alt, "display", "");
		}else{
			dojo.style(sel.domNode, "display", "");
			dojo.style(alt, "display", "none");
		}
	},
	_onChangeColumn: function(val){
		this._checkValidCriteria();
		var type = this.dlg.getColumnType(val);
		this._setConditionsByType(type);
		this._setValueBoxByType(type);
		this._updateValueBox();
	},
	_onChangeCondition: function(val){
		this._checkValidCriteria();
		var f = (val == "range");
		if(f ^ this._isRange){
			this._isRange = f;
			this._setValueBoxByType(this.dlg.getColumnType(this._colSelect.get("value")));
		}
		this._updateValueBox();
	},
	_updateValueBox: function(cond){
		this._curValueBox.set("disabled", this._condSelect.get("value") == "isempty");
	},
	_checkValidCriteria: function(){
		// summary:
		//		Check whether the given criteria box is completed. If it is, mark it.
		setTimeout(dojo.hitch(this, function(){
			this.updateRuleTitle();
			this.dlg._updatePane();
		}),0);
	},
	_createValueBox: function(/* widget constructor */cls,/* object */arg){
		// summary:
		//		Create a value input box with given class and arguments
		var func = dojo.hitch(arg.cbox, "_checkValidCriteria");
		return new cls(dojo.mixin(arg,{
			tabIndex: _tabIdxes.valueBox,
			onKeyPress: func,
			onChange: func,
			"class": "dojoxGridFCBoxValueBox"
		}));
	},
	_createRangeBox: function(/* widget constructor */cls,/* object */arg){
		// summary:
		//		Create a DIV containing 2 input widgets, which represents a range, with the given class and arguments
		var func = dojo.hitch(arg.cbox, "_checkValidCriteria");
		dojo.mixin(arg,{
			tabIndex: _tabIdxes.valueBox,
			onKeyPress: func,
			onChange: func
		});
		var div = dojo.create("div", {"class": "dojoxGridFCBoxValueBox"}),
			start = new cls(arg),
			txt = dojo.create("span", {"class": "dojoxGridFCBoxRangeValueTxt", "innerHTML": this.plugin.nls.rangeTo}),
			end = new cls(arg);
		dojo.addClass(start.domNode, "dojoxGridFCBoxStartValue");
		dojo.addClass(end.domNode, "dojoxGridFCBoxEndValue");
		div.appendChild(start.domNode);
		div.appendChild(txt);
		div.appendChild(end.domNode);
		div.domNode = div;
		//Mock functions for set and get (in place of the old attr function)
		div.set = function(dummy, args){
			if(dojo.isObject(args)){
				start.set("value", args.start);
				end.set("value", args.end);
			}
		};
		div.get = function(){
			var s = start.get("value"),
				e = end.get("value");
			return s && e ? {start: s, end: e} : "";
		};
		return div;
	},
	changeCurrentColumn: function(/* bool */selectCurCol){
		var colIdx = this.dlg.curColIdx;
		//Re-populate the columns in case some of them are set to hidden.
		this._colSelect.removeOption(this._colOptions);
		this._colOptions = this._getColumnOptions();
		this._colSelect.addOption(this._colOptions);
		this._colSelect.set('value', colIdx >= 0 ? String(colIdx) : "anycolumn");
		this.updateRuleTitle(true);
	},
	curColumn: function(){
		return this._colSelect.getOptions(this._colSelect.get("value")).label;
	},
	curCondition: function(){
		return this._condSelect.getOptions(this._condSelect.get("value")).label;
	},
	curValue: function(){
		var cond = this._condSelect.get("value");
		if(cond == "isempty"){return "";}
		return this._curValueBox ? this._curValueBox.get("value") : "";
	},
	save: function(){
		if(this.isEmpty()){
			return null;
		}
		var colIdx = this._colSelect.get("value"),
			type = this.dlg.getColumnType(colIdx),
			value = this.curValue(),
			cond = this._condSelect.get("value");
		return {
			"column": colIdx,
			"condition": cond,
			"value": value,
			"formattedVal": this.formatValue(type, cond, value),
			"type": type,
			"colTxt": this.curColumn(),
			"condTxt": this.curCondition()
		};
	},
	load: function(obj){
		var tmp = [
			this._onChangeColumn,
			this._onChangeCondition
		];
		this._onChangeColumn = this._onChangeCondition = function(){};
		if(obj.column){
			this._colSelect.set("value", obj.column);
		}
		if(obj.condition){
			this._condSelect.set("value", obj.condition);
		}
		if(obj.type){
			this._setValueBoxByType(obj.type);
		}else{
			obj.type = this.dlg.getColumnType(this._colSelect.get("value"));
		}
		var value = obj.value || "";
		if(value || (obj.type != "date" && obj.type != "time")){
			this._curValueBox.set("value", value);
		}
		this._updateValueBox();
		setTimeout(dojo.hitch(this, function(){
			this._onChangeColumn = tmp[0];
			this._onChangeCondition = tmp[1];
		}), 0);
	},
	getExpr: function(){
		if(this.isEmpty()){
			return null;
		}
		var colval = this._colSelect.get("value");
		return this.dlg.getExprForCriteria({
			"type": this.dlg.getColumnType(colval),
			"column": colval,
			"condition": this._condSelect.get("value"),
			"value": this.curValue()
		});
	},
	isEmpty: function(){
		var cond = this._condSelect.get("value");
		if(cond == "isempty"){return false;}
		var v = this.curValue();
		return v === "" || v === null || typeof v == "undefined" || (typeof v == "number" && isNaN(v));
	},
	updateRuleTitle: function(isEmpty){
		var node = this._pane._buttonWidget.titleTextNode;
		var title = [
			"<div class='dojoxEllipsis'>"
		];
		if(isEmpty || this.isEmpty()){
			node.title = dojo.string.substitute(this.plugin.nls.ruleTitleTemplate, [this._ruleIndex || 1]);
			title.push(node.title);
		}else{
			var type = this.dlg.getColumnType(this._colSelect.get("value"));
			var column = this.curColumn();
			var condition = this.curCondition();
			var value = this.formatValue(type, this._condSelect.get("value"), this.curValue());
			title.push(
				column,
				"&nbsp;<span class='dojoxGridRuleTitleCondition'>",
				condition,
				"</span>&nbsp;",
				value
			);
			node.title = [column, " ", condition, " ", value].join('');
		}
		node.innerHTML = title.join('');
		if(dojo.isMoz){
			var tt = dojo.create("div", {
				"style": "width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 9999;"
			}, node);
			tt.title = node.title;
		}
	},
	updateRuleIndex: function(index){
		if(this._ruleIndex != index){
			this._ruleIndex = index;
			if(this.isEmpty()){
				this.updateRuleTitle();
			}
		}
	},
	setAriaInfo: function(idx){
		var dss = dojo.string.substitute, nls = this.plugin.nls;
		dijit.setWaiState(this._colSelect.domNode,"label", dss(nls.waiColumnSelectTemplate, [idx]));
		dijit.setWaiState(this._condSelect.domNode,"label", dss(nls.waiConditionSelectTemplate, [idx]));
		dijit.setWaiState(this._pane._removeCBoxBtn.domNode,"label", dss(nls.waiRemoveRuleButtonTemplate, [idx]));
		this._index = idx;
	},
	_getUsableConditions: function(type){
		var conditions = this.dlg._dataTypeMap[type].conditions;
		var typeDisabledConds = (this.plugin.args.disabledConditions || {})[type];
		var colIdx = parseInt(this._colSelect.get("value"), 10);
		var colDisabledConds = isNaN(colIdx) ?
			(this.plugin.args.disabledConditions || {})["anycolumn"] :
			this.plugin.grid.layout.cells[colIdx].disabledConditions;
		if(!dojo.isArray(typeDisabledConds)){
			typeDisabledConds = [];
		}
		if(!dojo.isArray(colDisabledConds)){
			colDisabledConds = [];
		}
		var arr = typeDisabledConds.concat(colDisabledConds);
		if(arr.length){
			var disabledConds = {};
			dojo.forEach(arr, function(c){
				if(dojo.isString(c)){
					disabledConds[c.toLowerCase()] = true;
				}
			});
			return dojo.filter(conditions, function(condOption){
				return !(condOption.value in disabledConds);
			});
		}
		return conditions;
	},
	_setConditionsByType: function(/* string */type){
		var condSelect = this._condSelect;
		condSelect.removeOption(condSelect.options);
		condSelect.addOption(this._getUsableConditions(type));
		this._showSelectOrLabel(this._condSelect, this._condSelectAlt);
	},
	_setValueBoxByType: function(/* string */type){
		if(this._curValueBox){
			this.valueNode.removeChild(this._curValueBox.domNode);
			try{
				this._curValueBox.destroyRecursive();
			}catch(e){}
			delete this._curValueBox;
		}
		//value box class
		var vbcls = this.dlg._dataTypeMap[type].valueBoxCls[this._getValueBoxClsInfo(this._colSelect.get("value"), type)],
			vboxArg = this._getValueBoxArgByType(type);
		this._curValueBox = this[this._isRange ? "_createRangeBox" : "_createValueBox"](vbcls, vboxArg);
		this.valueNode.appendChild(this._curValueBox.domNode);
		
		//Can not move to setAriaInfo, 'cause the value box is created after the defpane is loaded.
		dijit.setWaiState(this._curValueBox.domNode, "label", dojo.string.substitute(this.plugin.nls.waiValueBoxTemplate,[this._index]));
		//Now our cbox is completely ready
		this.dlg.onRendered(this);
	},
	//--------------------------UI Configuration--------------------------------------
	_getValueBoxArgByType: function(/* string */type){
		// summary:
		//		Get the arguments for the value box construction.
		var g = this.plugin.grid,
			cell = g.layout.cells[parseInt(this._colSelect.get("value"), 10)],
			res = {
				cbox: this
			};
		if(type == "string"){
			if(cell && (cell.suggestion || cell.autoComplete)){
				dojo.mixin(res, {
					store: g.store,
					searchAttr: cell.field || cell.name,
					fetchProperties: {
						sort: [{"attribute": cell.field || cell.name}]
					}
				});
			}
		}else if(type == "boolean"){
			dojo.mixin(res, this.dlg.builder.defaultArgs["boolean"]);
		}
		if(cell && cell.dataTypeArgs){
			dojo.mixin(res, cell.dataTypeArgs);
		}
		return res;
	},
	formatValue: function(type, cond, v){
		// summary:
		//		Format the value to be shown in tooltip.
		if(cond == "isempty"){return "";}
		if(type == "date" || type == "time"){
			var opt = {selector: type},
				fmt = dojo.date.locale.format;
			if(cond == "range"){
				return dojo.string.substitute(this.plugin.nls.rangeTemplate, [fmt(v.start, opt), fmt(v.end, opt)]);
			}
			return fmt(v, opt);
		}else if(type == "boolean"){
			return v ? this._curValueBox._lblTrue : this._curValueBox._lblFalse;
		}
		return v;
	},
	_getValueBoxClsInfo: function(/* int|string */colIndex, /* string */type){
		// summary:
		//		Decide which value box to use given data type and column index.
		var cell = this.plugin.grid.layout.cells[parseInt(colIndex, 10)];
		//Now we only need to handle string. But maybe we need to handle more types here in the future.
		if(type == "string"){
			return (cell && (cell.suggestion || cell.autoComplete)) ? "ac" : "dft";
		}
		return "dft";
	}
});
dojo.declare("com.trivedi.oPls.filter.AccordionContainer", dijit.layout.AccordionContainer, {
	nls: null,
	addChild: function(/*dijit._Widget*/ child, /*Integer?*/ insertIndex){
		var pane = arguments[0] = child._pane = new dijit.layout.ContentPane({
			content: child
		});
		this.inherited(arguments);
		this._modifyChild(pane);
	},
	removeChild: function(child){
		var pane = child, isRemoveByUser = false;
		if(child._pane){
			isRemoveByUser = true;
			pane = arguments[0] = child._pane;
		}
		this.inherited(arguments);
		if(isRemoveByUser){
			this._hackHeight(false, this._titleHeight);
			var children = this.getChildren();
			if(children.length === 1){
				dojo.style(children[0]._removeCBoxBtn.domNode, "display", "none");
			}
		}
		pane.destroyRecursive();
	},
	selectChild: function(child){
		if(child._pane){
			arguments[0] = child._pane;
		}
		this.inherited(arguments);
	},
	resize: function(){
		this.inherited(arguments);
		dojo.forEach(this.getChildren(), this._setupTitleDom);
	},
	startup: function(){
		if(this._started){
			return;
		}
		this.inherited(arguments);
		if(parseInt(dojo.isIE, 10) == 7){
			//IE7 will fire a lot of "onresize" event during initialization.
			dojo.some(this._connects, function(cnnt){
				if(cnnt[0][1] == "onresize"){
					this.disconnect(cnnt);
					return true;
				}
			}, this);
		}
		dojo.forEach(this.getChildren(), function(child){
			this._modifyChild(child, true);
		}, this);
	},
	_onKeyPress: function(/*Event*/ e, /*dijit._Widget*/ fromTitle){
		// summary:
		//		Overrides base class method, make left/right button do other things.
		if(this.disabled || e.altKey || !(fromTitle || e.ctrlKey)){
			return;
		}
		var k = dojo.keys, c = e.charOrCode, ltr = dojo._isBodyLtr(), toNext = null;
		if((fromTitle && c == k.UP_ARROW) || (e.ctrlKey && c == k.PAGE_UP)){
			toNext = false;
		}else if((fromTitle && c == k.DOWN_ARROW) || (e.ctrlKey && (c == k.PAGE_DOWN || c == k.TAB))){
			toNext = true;
		}else if(c == (ltr ? k.LEFT_ARROW : k.RIGHT_ARROW)){
			toNext = this._focusOnRemoveBtn ? null : false;
			this._focusOnRemoveBtn = !this._focusOnRemoveBtn;
		}else if(c == (ltr ? k.RIGHT_ARROW : k.LEFT_ARROW)){
			toNext = this._focusOnRemoveBtn ? true : null;
			this._focusOnRemoveBtn = !this._focusOnRemoveBtn;
		}else{
			return;
		}
		if(toNext !== null){
			this._adjacent(toNext)._buttonWidget._onTitleClick();
		}
		dojo.stopEvent(e);
		dojo.window.scrollIntoView(this.selectedChildWidget._buttonWidget.domNode.parentNode);
		if(dojo.isIE){
			//IE will not show focus indicator if tabIndex is -1
			this.selectedChildWidget._removeCBoxBtn.focusNode.setAttribute("tabIndex", this._focusOnRemoveBtn ? _tabIdxes.accordionTitle : -1);
		}
		dijit.focus(this.selectedChildWidget[this._focusOnRemoveBtn ? "_removeCBoxBtn" : "_buttonWidget"].focusNode);
	},
	_modifyChild: function(child, isFirst){
		if(!child || !this._started){
			return;
		}
		dojo.style(child.domNode, "overflow", "hidden");
		child._buttonWidget.connect(child._buttonWidget, "_setSelectedAttr", function(){
			this.focusNode.setAttribute("tabIndex", this.selected ? _tabIdxes.accordionTitle : "-1");
		});
		var _this = this;
		child._buttonWidget.connect(child._buttonWidget.domNode, "onclick", function(){
			_this._focusOnRemoveBtn = false;
		});
		(child._removeCBoxBtn = new dijit.form.Button({
			label: this.nls.removeRuleButton,
			showLabel: false,
			iconClass: "dojoxGridFCBoxRemoveCBoxBtnIcon",
			tabIndex: _tabIdxes.removeCBoxBtn,
			onClick: dojo.hitch(child.content, "onRemove"),
			onKeyPress: function(e){
				_this._onKeyPress(e, child._buttonWidget.contentWidget);
			}
		})).placeAt(child._buttonWidget.domNode);
		var i, children = this.getChildren();
		if(children.length === 1){
			child._buttonWidget.set("selected", true);
			dojo.style(child._removeCBoxBtn.domNode, "display", "none");
		}else{
			for(i = 0; i < children.length; ++i){
				if(children[i]._removeCBoxBtn){
					dojo.style(children[i]._removeCBoxBtn.domNode, "display", "");
				}
			}
		}
		this._setupTitleDom(child);
		if(!this._titleHeight){
			for(i = 0; i < children.length; ++i){
				if(children[i] != this.selectedChildWidget){
					this._titleHeight = dojo.marginBox(children[i]._buttonWidget.domNode.parentNode).h;
					break;
				}
			}
		}
		if(!isFirst){
			this._hackHeight(true, this._titleHeight);
		}
	},
	_hackHeight: function(/* bool */toGrow,/* int */heightDif){
		var children = this.getChildren(),
			dn = this.domNode, h = dojo.style(dn, "height");
		if(!toGrow){
			dn.style.height = (h - heightDif) + 'px';
		}else if(children.length > 1){
			dn.style.height = (h + heightDif) + 'px';
		}else{
			//Only one rule, no need to do anything.
			return;
		}
		this.resize();
	},
	_setupTitleDom: function(child){
		var w = dojo.contentBox(child._buttonWidget.titleNode).w;
		if(dojo.isIE < 8){ w -= 8; }
		dojo.style(child._buttonWidget.titleTextNode, "width", w + "px");
	}
});
dojo.declare("com.trivedi.oPls.filter.UniqueComboBox", dijit.form.ComboBox, {
	_openResultList: function(results){
		var cache = {}, s = this.store, colName = this.searchAttr;
		arguments[0] = dojo.filter(results, function(item){
			var key = s.getValue(item, colName), existed = cache[key];
			cache[key] = true;
			return !existed;
		});
		this.inherited(arguments);
	},
	_onKey: function(evt){
		if(evt.charOrCode === dojo.keys.ENTER && this._opened){
			dojo.stopEvent(evt);
		}
		this.inherited(arguments);
	}
});
dojo.declare("com.trivedi.oPls.filter.BooleanValueBox", [dijit._Widget, dijit._Templated], {
	templateString: dojo.cache("dojox.grid","enhanced/templates/FilterBoolValueBox.html"),
	widgetsInTemplate: true,
	constructor: function(args){
		var nls = args.cbox.plugin.nls;
		this._baseId = args.cbox.id;
		this._lblTrue = args.trueLabel || nls.trueLabel || "true";
		this._lblFalse = args.falseLabel || nls.falseLabel || "false";
		this.args = args;
	},
	postCreate: function(){
		this.onChange();
	},
	onChange: function(){},
	
	get: function(prop){
		return this.rbTrue.get("checked");
	},
	set: function(prop, v){
		this.inherited(arguments);
		if(prop == "value"){
			this.rbTrue.set("checked", !!v);
			this.rbFalse.set("checked", !v);
		}
	}
});
})();

dojo.provide("com.trivedi.oPls.filter.FilterLayer");

dojo.require("com.trivedi.oPls.filter._FilterExpr");

/* //@mpt 02.09 dojo.require("com.trivedi.oPls._StoreLayer");  debug/remove ANY & ALL refs to this requirement; we don't need no store crap*/

(function(){
var ns = dojox.grid.enhanced.plugins,
	cmdSetFilter = "filter",
	cmdClearFilter = "clear",
	hitchIfCan = function(scope, func){
		return func ? dojo.hitch(scope || dojo.global, func) : function(){};
	},
	shallowClone = function(obj){
		var res = {};
		if(obj && dojo.isObject(obj)){
			for(var name in obj){
				res[name] = obj[name];
			}
		}
		return res;
	};
	dojo.declare("com.trivedi.oPls.filter._FilterLayerMixin", null, {
/*=====
		// _filter: _ConditionExpr
		//		The filter definition
		_filter: null,
		
		filterDef: function(filter){
			// summary:
			//		Get/set/clear the filter definition
			// tags:
			//		public
			// filter: (_ConditionExpr|null)?
			//		null: clear filter definition
			//		undefined: it's getter
			// returns:
			//		A filter definition if it's getter.
		},
=====*/
		tags: ["sizeChange"],
		name: function(){
			// summary:
			//		override from _StoreLayer.name
			return "filter";	//string
		},
		onFilterDefined: function(filter){},
		
		onFiltered: function(filteredSize, totalSize){
			// summary:
			//		Called when store data is filtered. This event is before *onComplete*, after *onBegin*.
			// tags:
			//		callback extension
			// filteredSize: Integer
			//		The number of remaining fetched items after filtering.
			// totalSize: Integer
			//		The number of original fetched items.
		}
	});
	dojo.declare("com.trivedi.oPls.filter.ServerSideFilterLayer", [ns._ServerSideLayer, ns.filter._FilterLayerMixin], {
		constructor: function(args){
			this._onUserCommandLoad = args.setupFilterQuery || this._onUserCommandLoad;
			this.filterDef(null);
		},
		filterDef: function(/* (_ConditionExpr|null)? */filter){
			// summary:
			//		See _FilterLayerMixin.filterDef
			if(filter){
				this._filter = filter;
				var obj = filter.toObject();
				//Stateless implementation will need to parse the filter object.
				this.command(cmdSetFilter, this._isStateful ? dojo.toJson(obj) : obj);
				this.command(cmdClearFilter, null);
				this.useCommands(true);
				this.onFilterDefined(filter);
			}else if(filter === null){
				this._filter = null;
				this.command(cmdSetFilter, null);
				this.command(cmdClearFilter, true);
				this.useCommands(true);
				this.onFilterDefined(null);
			}
			return this._filter;	//_ConditionExpr
		},
		onCommandLoad: function(/* (in)string */responce, /* (in|out)keywordArgs */ userRequest){
			// summary:
			//		override from _ServerSideLayer.onCommandLoad
			this.inherited(arguments);
			var oldOnBegin = userRequest.onBegin;
			if(this._isStateful){
				var filteredSize;
				if(responce){
					this.command(cmdSetFilter, null);
					this.command(cmdClearFilter, null);
					this.useCommands(false);
					var sizes = responce.split(',');
					if(sizes.length >= 2){
						filteredSize = this._filteredSize = parseInt(sizes[0], 10);
						this.onFiltered(filteredSize, parseInt(sizes[1], 10));
					}else{
						//Error here.
						return;
					}
				}else{
					filteredSize = this._filteredSize;
				}
				if(this.enabled()){
					userRequest.onBegin = function(size, req){
						hitchIfCan(userRequest.scope, oldOnBegin)(filteredSize, req);
					};
				}
			}else{
				var _this = this;
				userRequest.onBegin = function(size, req){
					if(!_this._filter){
						_this._storeSize = size;
					}
					_this.onFiltered(size, _this._storeSize || size);
					req.onBegin = oldOnBegin;
					hitchIfCan(userRequest.scope, oldOnBegin)(size, req);
				};
			}
		}
	});
	dojo.declare("com.trivedi.oPls.filter.ClientSideFilterLayer", [ns._StoreLayer, ns.filter._FilterLayerMixin], {
		// summary:
		//		Add a client side filter layer on top of the data store,
		//		so any filter expression can be applied to the store.
/*=====
		//_items: Array,
		//		Cached items (may contain holes)
		_items: [],
		
		//_result: Array,
		//		Current fetch result
		_result: [],
		
		//_resultStartIdx: Integer,
		//		The index in cache of the first result item
		_resultStartIdx: 0,
		
		//_indexMap: Array,
		//		A map from the row index of this._items to the row index of the original store.
		_indexMap: null,
		
		//_getter: function(datarow, colArg, rowIndex, store);
		//		A user defined way to get data from store
		_getter: null,
		
		// _nextUnfetchedIdx: Integer
		//		The index of the next item in the store that is never fetched.
		_nextUnfetchedIdx: 0,
=====*/
		// _storeSize: Integer
		//		The actual size of the original store
		_storeSize: -1,
		
		// _fetchAll
		//		If the store is small or store size must be correct when onBegin is called,
		//		we should fetch and filter all the items on the first query.
		_fetchAll: true,
		
		constructor: function(args){
			this.filterDef(null);
			args = dojo.isObject(args) ? args : {};
			this.fetchAllOnFirstFilter(args.fetchAll);
			this._getter = dojo.isFunction(args.getter) ? args.getter : this._defaultGetter;
		},
		_defaultGetter: function(datarow, colName, rowIndex, store){
			return store.getValue(datarow, colName);
		},
		filterDef: function(/* (_ConditionExpr|null)? */filter){
			// summary:
			//		See _FilterLayerMixin.filterDef
			if(filter !== undefined){
				this._filter = filter;
				this.invalidate();
				this.onFilterDefined(filter);
			}
			return this._filter;	//_ConditionExpr
		},
		setGetter: function(/* function */getter){
			// summary:
			//		Set the user defined way to retrieve data from store.
			// tags:
			//		public
			// getter: function(datarow, colArg, rowIndex, store);
			if(dojo.isFunction(getter)){
				this._getter = getter;
			}
		},
		fetchAllOnFirstFilter: function(/* bool? */toFetchAll){
			// summary:
			//		The get/set function for fetchAll.
			// tags:
			//		public
			// toFetchAll: boolean?
			//		If provided, it's a set function, otherwise it's a get function.
			// returns:
			//		Whether fetch all on first filter if this is a getter
			if(toFetchAll !== undefined){
				this._fetchAll = !!toFetchAll;
			}
			return this._fetchAll;	//Boolean
		},
		invalidate: function(){
			// summary:
			//		Clear all the status information of this layer
			// tags:
			//		private
			this._items = [];
			this._nextUnfetchedIdx = 0;
			this._result = [];
			this._indexMap = [];
			this._resultStartIdx = 0;
		},
		//----------------Private Functions-----------------------------
		_fetch: function(userRequest,filterRequest){
			// summary:
			//		Implement _StoreLayer._fetch
			// tags:
			//		private callback
			// filterRequest: dojo.data.api.Request
			//		The actual request used in store.fetch.
			//		This function is called recursively to fill the result store items
			//		until the user specified item count is reached. Only in recursive calls,
			//		this parameter is valid.
			if(!this._filter){
				//If we don't have any filter, use the original request and fetch.
				var old_onbegin = userRequest.onBegin, _this = this;
				userRequest.onBegin = function(size, r){
					hitchIfCan(userRequest.scope, old_onbegin)(size, r);
					_this.onFiltered(size, size);
				};
				this.originFetch(userRequest);
				return userRequest;
			}
			try{
				//If the fetch is at the beginning, user's start position is used;
				//If we are in a recursion, our own request is used.
				var start = filterRequest ? filterRequest._nextResultItemIdx : userRequest.start;
				start = start || 0;
				if(!filterRequest){
					//Initially, we have no results.
					this._result = [];
					this._resultStartIdx = start;
					var sortStr;
					if(dojo.isArray(userRequest.sort) && userRequest.sort.length > 0 &&
						//Sort info will stay here in every re-fetch, so remember it!
						(sortStr = dojo.toJson(userRequest.sort)) != this._lastSortInfo){
						//If we should sort data, all the old caches are no longer valid.
						this.invalidate();
						this._lastSortInfo = sortStr;
					}
				}
				//this._result contains the current fetch result (of every recursion).
				var end = typeof userRequest.count == "number" ?
					start + userRequest.count - this._result.length : this._items.length;
				//Try to retrieve all the items from our cache.
				//Only need items after userRequest.start, test it in case start is smaller.
				if(this._result.length){
					this._result = this._result.concat(this._items.slice(start, end));
				}else{
					this._result = this._items.slice(userRequest.start, typeof userRequest.count == "number" ?
						userRequest.start + userRequest.count : this._items.length);
				}
				if(this._result.length >= userRequest.count || this._hasReachedStoreEnd()){
					//We already have had enough items, or we have to stop fetching because there's nothing more to fetch.
					this._completeQuery(userRequest);
				}else{
					//User's request hasn't been finished yet. Fetch more.
					if(!filterRequest){
						//Initially, we've got to create a new request object.
						filterRequest = shallowClone(userRequest);
						//Use our own onBegin function to remember the total size of the original store.
						filterRequest.onBegin = dojo.hitch(this, this._onFetchBegin);
						filterRequest.onComplete = dojo.hitch(this, function(items, req){
							//We've fetched some more, so march ahead!
							this._nextUnfetchedIdx += items.length;
							//Actual filtering work goes here. Survived items are added to our cache.
							//req is our own request object.
							this._doFilter(items, req.start, userRequest);
							//Recursively call this function. Let's do this again!
							this._fetch(userRequest, req);
						});
					}
					//Fetch starts from the next unfetched item.
					filterRequest.start = this._nextUnfetchedIdx;
					//If store is small, we should only fetch once.
					if(this._fetchAll){
						delete filterRequest.count;
					}
					//Remember we've (maybe) already added something to our result array, so next time we should not start over again.
					filterRequest._nextResultItemIdx = end < this._items.length ? end : this._items.length;
					//Actual fetch work goes here.
					this.originFetch(filterRequest);
				}
			}catch(e){
				if(userRequest.onError){
					hitchIfCan(userRequest.scope, userRequest.onError)(e, userRequest);
				}else{
					throw e;
				}
			}
			return userRequest;
		},
		_hasReachedStoreEnd: function(){
			// summary:
			//		Check whether all the items in the original store have been fetched.
			// tags:
			//		private
			return this._storeSize >= 0 && this._nextUnfetchedIdx >= this._storeSize;	//Boolean
		},
		_applyFilter: function(/* data item */datarow,/* Integer */rowIndex){
			// summary:
			//		Apply the filter to a row of data
			// tags:
			//		private
			// returns:
			//		whether this row survived the filter.
			var g = this._getter, s = this._store;
			try{
				return !!(this._filter.applyRow(datarow, function(item, arg){
					return g(item, arg, rowIndex, s);
				}).getValue());
			}catch(e){
				console.warn("FilterLayer._applyFilter() error: ", e);
				return false;
			}
		},
		_doFilter: function(/* Array */items,/* Integer */startIdx,/* object */userRequest){
			// summary:
			//		Use the filter expression to filter items. Survived items are stored in this._items.
			//		The given items start from "startIdx" in the original store.
			// tags:
			//		private
			for(var i = 0, cnt = 0; i < items.length; ++i){
				if(this._applyFilter(items[i], startIdx + i)){
					hitchIfCan(userRequest.scope, userRequest.onItem)(items[i], userRequest);
					cnt += this._addCachedItems(items[i], this._items.length);
					this._indexMap.push(startIdx + i);
				}
			}
		},
		_onFetchBegin: function(/* Integer */size,/* request object */req){
			// summary:
			//		This function is used to replace the user's onFetchBegin in store.fetch
			// tags:
			//		private
			this._storeSize = size;
		},
		_completeQuery: function(/* request object */userRequest){
			// summary:
			//		Logically, the user's query is completed here, i.e., all the filtered results are ready.
			//		(or their index mappings are ready)
			// tags:
			//		private
			var size = this._items.length;
			if(this._nextUnfetchedIdx < this._storeSize){
				//FIXME: There's still some items in the original store that are not fetched & filtered.
				//So we have to estimate a little bigger size to allow scrolling to these unfetched items.
				//However, this behavior is ONLY correct in Grid! Any better way to do this?
				size++;
			}
			hitchIfCan(userRequest.scope, userRequest.onBegin)(size,userRequest);
			this.onFiltered(this._items.length, this._storeSize);
			hitchIfCan(userRequest.scope, userRequest.onComplete)(this._result, userRequest);
		},
		_addCachedItems: function(/* Array */items,/* Integer */filterStartIdx){
			// summary:
			//		Add data items to the cache. The insert point is at *filterStartIdx*
			// tags:
			//		private
			// items: Array
			//		Data items to add.
			// filterStartIdx: Integer
			//		The start point to insert in the cache.
			if(!dojo.isArray(items)){
				items = [items];
			}
			for(var k = 0; k < items.length; ++k){
				this._items[filterStartIdx + k] = items[k];
			}
			return items.length;
		},
		onRowMappingChange: function(mapping){
			//This function runs in FilterLayer scope!
			if(this._filter){
				var m = dojo.clone(mapping),
					alreadyUpdated = {};
				for(var r in m){
					r = parseInt(r, 10);
					mapping[this._indexMap[r]] = this._indexMap[m[r]];
					if(!alreadyUpdated[this._indexMap[r]]){
						alreadyUpdated[this._indexMap[r]] = true;
					}
					if(!alreadyUpdated[r]){
						alreadyUpdated[r] = true;
						delete mapping[r];
					}
				}
			}
		}
	});
})();


/*//@mpt 02.09 ONLY INCL FOR REDUNDANCY WE NEED TO DETACH FROM GRID*/

dojo.provide("com.trivedi.oPls.filter.FilterBar");

dojo.require("dijit.form.Button");
dojo.require("dojo.string");
dojo.require("dojo.fx");

(function(){
var _focusClass = "dojoxGridFBarHover",
	_filteredClass = "dojoxGridFBarFiltered",
	_stopEvent = function(evt){
		try{
			if(evt && evt.preventDefault){
				dojo.stopEvent(evt);
			}
		}catch(e){}
	};
	
dojo.declare("com.trivedi.oPls.filter.FilterBar",[dijit._Widget, dijit._Templated],{
	// summary:
	//		The filter bar UI.
	templateString: "<table class='dojoxGridFBar' border='0' cellspacing='0' dojoAttachEvent='onclick:_onClickFilterBar, onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave, onmousemove:_onMouseMove'" +
	"><tr><td class='dojoxGridFBarBtnTD'" +
		"><span dojoType='dijit.form.Button' class='dojoxGridFBarBtn' dojoAttachPoint='defineFilterButton' label='...' iconClass='dojoxGridFBarDefFilterBtnIcon' showLabel='true' dojoAttachEvent='onClick:_showFilterDefDialog, onMouseEnter:_onEnterButton, onMouseLeave:_onLeaveButton, onMouseMove:_onMoveButton'></span" +
	"></td><td class='dojoxGridFBarInfoTD'" +
		"><span class='dojoxGridFBarInner'" +
			"><span class='dojoxGridFBarStatus' dojoAttachPoint='statusBarNode'>${_noFilterMsg}</span" +
			"><span dojoType='dijit.form.Button' class='dojoxGridFBarClearFilterBtn' dojoAttachPoint='clearFilterButton' " +
				"label='${_filterBarClearBtnLabel}' iconClass='dojoxGridFBarClearFilterBtnIcon' showLabel='true' " +
				"dojoAttachEvent='onClick:_clearFilterDefDialog, onMouseEnter:_onEnterButton, onMouseLeave:_onLeaveButton, onMouseMove:_onMoveButton'></span" +
			"><span dojotype='dijit.form.Button' class='dojoxGridFBarCloseBtn' dojoAttachPoint='closeFilterBarButton' " +
				"label='${_closeFilterBarBtnLabel}' iconClass='dojoxGridFBarCloseBtnIcon' showLabel='false' " +
				"dojoAttachEvent='onClick:_closeFilterBar, onMouseEnter:_onEnterButton, onMouseLeave:_onLeaveButton, onMouseMove:_onMoveButton'></span" +
		"></span" +
	"></td></tr></table>",
	widgetsInTemplate: true,
	
	_timeout_statusTooltip: 300,
	_handle_statusTooltip: null,
	_curColIdx: -1,
	
	plugin: null,
	postMixInProperties: function(){
		var plugin = this.plugin;
		var nls = plugin.nls;
		this._filterBarDefBtnLabel = nls["filterBarDefButton"];
		this._filterBarClearBtnLabel = nls["filterBarClearButton"];
		this._closeFilterBarBtnLabel = nls["closeFilterBarBtn"];
		var itemsName = plugin.args.itemsName || nls["defaultItemsName"];
		this._noFilterMsg = dojo.string.substitute(nls["filterBarMsgNoFilterTemplate"], ["", itemsName]);
		
		var t = this.plugin.args.statusTipTimeout;
		if(typeof t == 'number'){
			this._timeout_statusTooltip = t;
		}
		
		var g = plugin.grid;
		g.showFilterBar = dojo.hitch(this, "showFilterBar");
		g.toggleFilterBar = dojo.hitch(this, "toggleFilterBar");
		g.isFilterBarShown = dojo.hitch(this, "isFilterBarShown");
	},
	postCreate: function(){
		this.inherited(arguments);
		if(!this.plugin.args.closeFilterbarButton){
			dojo.style(this.closeFilterBarButton.domNode, "display", "none");
		}
		var _this = this,
			g = this.plugin.grid,
			old_func = this.oldGetHeaderHeight = dojo.hitch(g,g._getHeaderHeight);
		
		this.placeAt(g.viewsHeaderNode, "after");
		this.connect(this.plugin.filterDefDialog, "showDialog", "_onShowFilterDefDialog");
		this.connect(this.plugin.filterDefDialog, "closeDialog", "_onCloseFilterDefDialog");
		this.connect(g.layer("filter"), "onFiltered", this._onFiltered);
		
		this.defineFilterButton.domNode.title = this.plugin.nls["filterBarDefButton"];
		if(dojo.hasClass(dojo.body(), "dijit_a11y")){
			this.defineFilterButton.set("label", this.plugin.nls["a11yFilterBarDefButton"]);
		}
		this.connect(this.defineFilterButton.domNode, "click", _stopEvent);
		this.connect(this.clearFilterButton.domNode, "click", _stopEvent);
		this.connect(this.closeFilterBarButton.domNode, "click", _stopEvent);
		
		this.toggleClearFilterBtn(true);
		this._initAriaInfo();
		
		//Hack the header height to include filter bar height;
		g._getHeaderHeight = function(){
			return old_func() + dojo.marginBox(_this.domNode).h;
		};
		//Define an area to make focusManager handle all the navigation stuff
		g.focus.addArea({
			name: "filterbar",
			onFocus: dojo.hitch(this, this._onFocusFilterBar, false),
			onBlur: dojo.hitch(this, this._onBlurFilterBar)
		});
		g.focus.placeArea("filterbar","after","header");
	},
	uninitialize: function(){
		var g = this.plugin.grid;
		g._getHeaderHeight = this.oldGetHeaderHeight;
		g.focus.removeArea("filterbar");
		this.plugin = null;
	},
	isFilterBarShown: function(){
		return dojo.style(this.domNode, "display") != "none";
	},
	showFilterBar: function(toShow, useAnim, animArgs){
		var g = this.plugin.grid;
		if(useAnim){
			if(Boolean(toShow) == this.isFilterBarShown()){ return; }
			animArgs = animArgs || {};
			var anims = [], defaultDuration = 500;
			anims.push(dojo.fx[toShow ? "wipeIn" : "wipeOut"](dojo.mixin({
				"node": this.domNode,
				"duration": defaultDuration
			}, animArgs)));
			var curHeight = g.views.views[0].domNode.offsetHeight;
			var prop = {
				"duration": defaultDuration,
				"properties": {
					"height": {
						"end": dojo.hitch(this, function(){
							var barHeight = this.domNode.scrollHeight;
							if(dojo.isFF){
								barHeight -= 2;
							}
							return toShow ? (curHeight - barHeight) : (curHeight + barHeight);
						})
					}
				}
			};
			dojo.forEach(g.views.views, function(view){
				anims.push(dojo.animateProperty(dojo.mixin({
					"node": view.domNode
				}, prop, animArgs)), dojo.animateProperty(dojo.mixin({
					"node": view.scrollboxNode
				}, prop, animArgs)));
			});
			anims.push(dojo.animateProperty(dojo.mixin({
				"node": g.viewsNode
			}, prop, animArgs)));
			dojo.fx.combine(anims).play();
		}else{
			dojo.style(this.domNode, "display", toShow ? "" : "none");
			g.update();
		}
	},
	toggleFilterBar: function(useAnim, animArgs){
		this.showFilterBar(!this.isFilterBarShown(), useAnim, animArgs);
	},
	getColumnIdx: function(/* int */coordX){
		var headers = dojo.query("[role='columnheader']", this.plugin.grid.viewsHeaderNode);
		var idx = -1;
		for(var i = headers.length - 1; i >= 0; --i){
			var coord = dojo.coords(headers[i]);
			if(coordX >= coord.x && coordX < coord.x + coord.w){
				idx = i;
				break;
			}
		}
		if(idx >= 0 && this.plugin.grid.layout.cells[idx].filterable !== false){
			return idx; //Integer
		}else{
			return -1; //Integer
		}
	},
	toggleClearFilterBtn: function(toHide){
		dojo.style(this.clearFilterButton.domNode, "display", toHide ? "none" : "");
	},
	_closeFilterBar: function(e){
		_stopEvent(e);
		var rulesCnt = this.plugin.filterDefDialog.getCriteria();
		if(rulesCnt){
			var handle = dojo.connect(this.plugin.filterDefDialog, "clearFilter", this, function(){
				this.showFilterBar(false, true);
				dojo.disconnect(handle);
			});
			this._clearFilterDefDialog(e);
		}else{
			this.showFilterBar(false, true);
		}
	},

	_showFilterDefDialog: function(e){
		_stopEvent(e);
		this.plugin.filterDefDialog.showDialog(this._curColIdx);
		this.plugin.grid.focus.focusArea("filterbar");
	},
	_clearFilterDefDialog: function(e){
		_stopEvent(e);
		this.plugin.filterDefDialog.onClearFilter();
		this.plugin.grid.focus.focusArea("filterbar");
	},
	_onEnterButton: function(e){
		//If mouse is hovering the btn, which means the user is about to click,
		//we should not show status tip on the btn!
		this._onBlurFilterBar();
		_stopEvent(e);
	},
	_onMoveButton: function(e){
		this._onBlurFilterBar();
	},
	_onLeaveButton: function(e){
		this._leavingBtn = true;
	},
	_onShowFilterDefDialog: function(/* Integer */colIdx){
		if(typeof colIdx == "number"){
			this._curColIdx = colIdx;
		}
		this._defPaneIsShown = true;
	},
	_onCloseFilterDefDialog: function(){
		this._defPaneIsShown = false;
		//Do not remember what column are we on, so clicking the btn will show 'any column'
		this._curColIdx = -1;
		dijit.focus(this.defineFilterButton.domNode);
	},
	_onClickFilterBar: function(/* event */e){
		_stopEvent(e);
		this._clearStatusTipTimeout();
		this.plugin.grid.focus.focusArea("filterbar");
		this.plugin.filterDefDialog.showDialog(this.getColumnIdx(e.clientX));
	},
	_onMouseEnter: function(/* event */e){
		this._onFocusFilterBar(true, null);
		this._updateTipPosition(e);
		this._setStatusTipTimeout();
	},
	_onMouseMove: function(/* event */e){
		if(this._leavingBtn){
			this._onFocusFilterBar(true, null);
			this._leavingBtn = false;
		}
		if(this._isFocused){
			this._setStatusTipTimeout();
			this._highlightHeader(this.getColumnIdx(e.clientX));
			if(this._handle_statusTooltip){
				this._updateTipPosition(e);
			}
		}
	},
	_onMouseLeave: function(e){
		this._onBlurFilterBar();
	},
	_updateTipPosition: function(evt){
		this._tippos = {
			x: evt.pageX,
			y: evt.pageY
		};
	},
	_onFocusFilterBar: function(highlightOnly, evt, step){
		if(!this.isFilterBarShown()){
			return false;
		}
		this._isFocused = true;
		dojo.addClass(this.domNode,_focusClass);
		if(!highlightOnly){
			var hasFilter = dojo.style(this.clearFilterButton.domNode, "display") !== "none";
			var hasCloseButton = dojo.style(this.closeFilterBarButton.domNode, "display") !== "none";
			if(typeof this._focusPos == "undefined"){
				if(step > 0){
					this._focusPos = 0;
				}else{
					if(hasCloseButton){
						this._focusPos = 1;
					}else{
						this._focusPos = 0;
					}
					if(hasFilter){
						++this._focusPos;
					}
				}
			}
			if(this._focusPos === 0){
				dijit.focus(this.defineFilterButton.focusNode);
			}else if(this._focusPos === 1 && hasFilter){
				dijit.focus(this.clearFilterButton.focusNode);
			}else{
				dijit.focus(this.closeFilterBarButton.focusNode);
			}
		}
		_stopEvent(evt);
		return true;
	},
	_onBlurFilterBar: function(evt, step){
		if(this._isFocused){
			this._isFocused = false;
			dojo.removeClass(this.domNode,_focusClass);
			this._clearStatusTipTimeout();
			this._clearHeaderHighlight();
		}
		var toBlur = true;
		if(step){
			var buttonCount = 3;
			if(dojo.style(this.closeFilterBarButton.domNode, "display") === "none"){
				--buttonCount;
			}
			if(dojo.style(this.clearFilterButton.domNode, "display") === "none"){
				--buttonCount;
			}
			if(buttonCount == 1){
				delete this._focusPos;
			}else{
				var current = this._focusPos;
				for(var next = current + step; next < 0; next += buttonCount){}
				next %= buttonCount;
				if((step > 0 && next < current) || (step < 0 && next > current)){
					delete this._focusPos;
				}else{
					this._focusPos = next;
					toBlur = false;
				}
			}
		}
		return toBlur;
	},
	_onFiltered: function(/* int */filteredSize,/* int */originSize){
		var p = this.plugin,
			itemsName = p.args.itemsName || p.nls["defaultItemsName"],
			msg = "", g = p.grid,
			filterLayer = g.layer("filter");
		if(filterLayer.filterDef()){
			msg = dojo.string.substitute(p.nls["filterBarMsgHasFilterTemplate"], [filteredSize, originSize, itemsName]);
			dojo.addClass(this.domNode, _filteredClass);
		}else{
			msg = dojo.string.substitute(p.nls["filterBarMsgNoFilterTemplate"], [originSize, itemsName]);
			dojo.removeClass(this.domNode, _filteredClass);
		}
		this.statusBarNode.innerHTML = msg;
		this._focusPos = 0;
	},
	_initAriaInfo: function(){
		dijit.setWaiState(this.defineFilterButton.domNode, "label", this.plugin.nls["waiFilterBarDefButton"]);
		dijit.setWaiState(this.clearFilterButton.domNode,"label", this.plugin.nls["waiFilterBarClearButton"]);
	},
	_isInColumn: function(/* int */mousePos_x, /* domNode */headerNode, /* int */colIndex){
		var coord = dojo.coords(headerNode);
		return mousePos_x >= coord.x && mousePos_x < coord.x + coord.w;
	},
	_setStatusTipTimeout: function(){
		this._clearStatusTipTimeout();
		if(!this._defPaneIsShown){
			this._handle_statusTooltip = setTimeout(dojo.hitch(this,this._showStatusTooltip),this._timeout_statusTooltip);
		}
	},
	_clearStatusTipTimeout: function(){
		clearTimeout(this._handle_statusTooltip);
		this._handle_statusTooltip = null;
	},
	_showStatusTooltip: function(){
		this._handle_statusTooltip = null;
		this.plugin.filterStatusTip.showDialog(this._tippos.x, this._tippos.y, this.getColumnIdx(this._tippos.x));
	},
	_highlightHeader: function(/* int */colIdx){
		if(colIdx != this._previousHeaderIdx){
			var g = this.plugin.grid,
			cell = g.getCell(this._previousHeaderIdx);
			if(cell){
				dojo.removeClass(cell.getHeaderNode(), "dojoxGridCellOver");
			}
			cell = g.getCell(colIdx);
			if(cell){
				dojo.addClass(cell.getHeaderNode(), "dojoxGridCellOver");
			}
			this._previousHeaderIdx = colIdx;
		}
	},
	_clearHeaderHighlight: function(){
		if(typeof this._previousHeaderIdx != "undefined"){
			var g = this.plugin.grid,
			cell = g.getCell(this._previousHeaderIdx);
			if(cell){
				g.onHeaderCellMouseOut({
					cellNode: cell.getHeaderNode()
				});
			}
			delete this._previousHeaderIdx;
		}
	}
});
})();

dojo.provide("com.trivedi.oPls.filter.FilterStatusTip");

dojo.requireLocalization("dojox.grid.enhanced", "Filter");
dojo.require("dijit.TooltipDialog");
dojo.require("dijit._base.popup");
dojo.require("dijit.form.Button");
dojo.require("dojo.string");
dojo.require("dojo.date.locale");

(function(){
var gridCssCls = "", headerCssCls = "", cellCssCls = "", rowCssCls = "",
	oddRowCssCls = "dojoxGridFStatusTipOddRow",
	handleHolderCssCls = "dojoxGridFStatusTipHandle",
	conditionCssCls = "dojoxGridFStatusTipCondition",
	_removeRuleIconCls = "dojoxGridFStatusTipDelRuleBtnIcon",
	_statusFooter = "</tbody></table>";
	
	dojo.declare("com.trivedi.oPls.filter.FilterStatusTip", null, {
		// summary:
		//		Create the status tip UI.
		constructor: function(args){
			var plugin = this.plugin = args.plugin;
			this._statusHeader = ["<table border='0' cellspacing='0' class='",
				gridCssCls, "'><thead><tr class='",
				headerCssCls, "'><th class='",
				cellCssCls, "'><div>", plugin.nls["statusTipHeaderColumn"], "</div></th><th class='",
				cellCssCls, " lastColumn'><div>", plugin.nls["statusTipHeaderCondition"], "</div></th></tr></thead><tbody>"
			].join('');
			this._removedCriterias = [];
			this._rules = [];
			this.statusPane = new com.trivedi.oPls.filter.FilterStatusPane();
			this._dlg = new dijit.TooltipDialog({
				"class": "dojoxGridFStatusTipDialog",
				content: this.statusPane,
				autofocus: false,
				onMouseLeave: dojo.hitch(this,function(){
					this.closeDialog();
				})
			});
			this._dlg.connect(this._dlg.domNode,"click", dojo.hitch(this, this._modifyFilter));
		},
		destroy: function(){
			this._dlg.destroyRecursive();
		},
		//-----------------Public Functions------------------------
		showDialog: function(/* int */pos_x,/* int */pos_y, columnIdx){
			this._pos = {x:pos_x,y:pos_y};
			dijit.popup.close(this._dlg);
			this._removedCriterias = [];
			this._rules = [];
			this._updateStatus(columnIdx);
			dijit.popup.open({
				popup: this._dlg,
				parent: this.plugin.filterBar,
				x:pos_x - 12,
				y:pos_y - 3
			});
		},
		closeDialog: function(){
			dijit.popup.close(this._dlg);
			if(this._removedCriterias.length){
				this.plugin.filterDefDialog.removeCriteriaBoxes(this._removedCriterias);
				this._removedCriterias = [];
				this.plugin.filterDefDialog.onFilter();
			}
		},
		//-----------------Private Functions---------------------------
		_updateStatus: function(columnIdx){
			var res, p = this.plugin,
				nls = p.nls,
				sp = this.statusPane,
				fdg = p.filterDefDialog;
			if(fdg.getCriteria() === 0){
				sp.statusTitle.innerHTML = nls["statusTipTitleNoFilter"];
				sp.statusRel.innerHTML = sp.statusRelPre.innerHTML = sp.statusRelPost.innerHTML = "";
				var cell = p.grid.layout.cells[columnIdx];
				var colName = cell ? "'" + (cell.name || cell.field) + "'" : nls["anycolumn"];
				res = dojo.string.substitute(nls["statusTipMsg"], [colName]);
			}else{
				sp.statusTitle.innerHTML = nls["statusTipTitleHasFilter"];
				sp.statusRelPre.innerHTML = nls["statusTipRelPre"] + "&nbsp;";
				sp.statusRelPost.innerHTML = "&nbsp;" + nls["statusTipRelPost"];
				sp.statusRel.innerHTML = fdg._relOpCls == "logicall" ? nls["all"] : nls["any"];
				
				this._rules = [];
				var i = 0, c = fdg.getCriteria(i++);
				while(c){
					c.index = i - 1;
					this._rules.push(c);
					c = fdg.getCriteria(i++);
				}
				res = this._createStatusDetail();
			}
			sp.statusDetailNode.innerHTML = res;
			this._addButtonForRules();
		},
		_createStatusDetail: function(){
			return this._statusHeader + dojo.map(this._rules, function(rule, i){
				return this._getCriteriaStr(rule, i);
			}, this).join('') + _statusFooter;
		},
		_addButtonForRules: function(){
			if(this._rules.length > 1){
				dojo.query("." + handleHolderCssCls, this.statusPane.statusDetailNode).forEach(dojo.hitch(this, function(nd, idx){
					(new dijit.form.Button({
						label: this.plugin.nls["removeRuleButton"],
						showLabel: false,
						iconClass: _removeRuleIconCls,
						onClick: dojo.hitch(this, function(e){
							e.stopPropagation();
							this._removedCriterias.push(this._rules[idx].index);
							this._rules.splice(idx,1);
							this.statusPane.statusDetailNode.innerHTML = this._createStatusDetail();
							this._addButtonForRules();
						})
					})).placeAt(nd, "last");
				}));
			}
		},
		_getCriteriaStr: function(/* object */c, /* int */rowIdx){
			var res = ["<tr class='", rowCssCls,
				" ", (rowIdx % 2 ? oddRowCssCls : ""),
				"'><td class='", cellCssCls, "'>", c.colTxt,
				"</td><td class='", cellCssCls,
				"'><div class='", handleHolderCssCls, "'><span class='", conditionCssCls,
				"'>", c.condTxt, "&nbsp;</span>",
				c.formattedVal, "</div></td></tr>"];
			return res.join('');
		},
		_modifyFilter: function(){
			this.closeDialog();
			var p = this.plugin;
			p.filterDefDialog.showDialog(p.filterBar.getColumnIdx(this._pos.x));
		}
	});
	dojo.declare("com.trivedi.oPls.filter.FilterStatusPane", [dijit._Widget, dijit._Templated], {
		templateString: dojo.cache("dojox.grid", "enhanced/templates/FilterStatusPane.html")
	});
})();

dojo.provide("com.trivedi.oPls.filter.ClearFilterConfirm");

dojo.require("dijit.form.Button");

dojo.declare("com.trivedi.oPls.filter.ClearFilterConfirm",[dijit._Widget,dijit._Templated],{
	// summary:
	//		The UI for user to confirm the operation of clearing filter.
	templateString: "<div class='dojoxGridClearFilterConfirm'>" +
	"<div class='dojoxGridClearFilterMsg'>${_clearFilterMsg}</div>" +
	"<div class='dojoxGridClearFilterBtns' dojoAttachPoint='btnsNode'>" +
		"<span dojoType='dijit.form.Button' label='${_cancelBtnLabel}' dojoAttachPoint='cancelBtn' dojoAttachEvent='onClick:_onCancel'></span>" +
		"<span dojoType='dijit.form.Button' label='${_clearBtnLabel}' dojoAttachPoint='clearBtn' dojoAttachEvent='onClick:_onClear'></span>" +
	"</div></div>",
	widgetsInTemplate: true,
	plugin: null,
	postMixInProperties: function(){
		var nls = this.plugin.nls;
		this._clearBtnLabel = nls["clearButton"];
		this._cancelBtnLabel = nls["cancelButton"];
		this._clearFilterMsg = nls["clearFilterMsg"];
	},
	postCreate: function(){
		this.inherited(arguments);
		dijit.setWaiState(this.cancelBtn.domNode, "label", this.plugin.nls["waiCancelButton"]);
		dijit.setWaiState(this.clearBtn.domNode, "label", this.plugin.nls["waiClearButton"]);
	},
	uninitialize: function(){
		this.plugin = null;
	},
	_onCancel: function(){
		this.plugin.clearFilterDialog.hide();
	},
	_onClear: function(){
		this.plugin.clearFilterDialog.hide();
		this.plugin.filterDefDialog.clearFilter(this.plugin.filterDefDialog._clearWithoutRefresh);
	}
});


dojo.provide("com.trivedi.oPls.Filter");

/*//@mpt 02.09 dojo.requireLocalization("dojox.grid.enhanced", "Filter");*/
/*//@mpt 02.09 dojo.require("dojox.grid.enhanced._Plugin");*/
/*//@mpt 02.09 dojo.require("com.trivedi.oPls.Dialog");*/
dojo.require("dijit.Dialog");
dojo.require("com.trivedi.oPls.filter.FilterLayer");
/*//@mpt 02.09 dojo.require("com.trivedi.oPls.filter.FilterBar"); */
dojo.require("com.trivedi.oPls.filter.FilterDefDialog");
dojo.require("com.trivedi.oPls.filter.FilterStatusTip");
dojo.require("com.trivedi.oPls.filter.ClearFilterConfirm");

(function(){
	var ns = com.trivedi.oPls,
		fns = ns.filter;
		
/* //@mpt 02.09	dojo.declare("com.trivedi.oPls.Filter", dojox.grid.enhanced._Plugin, {*/

	dojo.declare("com.trivedi.oPls.Filter", null,  {
		// summary:
		//		Provide filter functionality for grid.
		//
		//		Acceptable plugin parameters:
		//		1. itemsName: string
		//			the name shown on the filter bar.
		//		2. statusTipTimeout: number
		//			when does the status tip show.
		//		3. ruleCount: number
		//			default to 3, should not change to more. The Claro theme limits it.
		//		4. disabledConditions: object
		//			If you don't need all of the conditions provided for a data type,
		//			you can explicitly declare them here:
		//			e.g.: disabledConditions: {string: ["contains", "is"], number: ["equalto"], ...}
		//		5. isServerSide: boolean
		//			Whether to use server side filtering. Default to false.
		//		6. isStateful: boolean
		//			If isServerSide is true, set the server side filter to be stateful or not. default to false.
		//		7. url: string
		//			If using stateful, this is the url to send commands. default to store.url.
		//
		//		Acceptable cell parameters defined in layout:
		//		1. filterable: boolean
		//			The column is not filterable only when this is set to false explicitly.
		//		2. datatype: string
		//			The data type of this column. Can be "string", "number", "date", "time", "boolean".
		//			Default to "string".
		//		3. autoComplete: boolean
		//			If need auto-complete in the ComboBox for String type, set this to true.
		//		4. dataTypeArgs: object
		//			Some arguments helping convert store data to something the filter UI understands.
		//			Different data type arguments can be provided to different data types.
		//			For date/time, this is a dojo.date.locale.__FormatOptions, so the DataTimeBox can understand the store data.
		//			For boolean, this object contains:
		//				trueLabel: string
		//					A label to display in the filter definition dialog for true value. Default to "True".
		//				falseLable: string
		//					A label to display in the filter definition dialog for false value. Default to "False".
		//		5. disabledConditions: object
		//			If you don't need all of the conditions provided by the filter UI on this column, you can explicitly say it out here.
		//			e.g.: disabledConditions: ["contains", "is"]
		//			This will disable the "contains" condition for this column, if this column is of string type.
		//			For full set of conditions, please refer to com.trivedi.oPls.filter.FilterDefDialog._setupData.
		// example:
		//	|	<div dojoType="dojox.grid.EnhancedGrid" plugins="{GridFilter: true}" ...></div>
		//	|	or provide some parameters:
		//	|	<div dojoType="dojox.grid.EnhancedGrid" plugins="{GridFilter: {itemsName: 'songs'}}" ...></div>
		//	|	Customize columns for filter:
		//	|	var layout = [
		//	|		...
		//	|		//define a column to be un-filterable in layout/structure
		//	|		{field: "Genre", filterable: false, ...}
		//	|		//define a column of type string and supports autoComplete when you type in filter conditions.
		//	|		{field: "Writer", datatype: "string", autoCommplete: true, ...}
		//	|		//define a column of type date and the data in store has format: "yyyy/M/d"
		//	|		{field: "Publish Date", datatype: "date", dataTypeArgs: {datePattern: "yyyy/M/d"}, ...}
		//	|		//disable some conditions for a column
		//	|		{field: "Track", disabledConditions: ["equalto","notequalto"], ...}
		//	|		...
		//	|	];
		
		// name: String
		//		plugin name
		name: "filter",
		
		constructor: function(grid, args){
			// summary:
			//		See constructor of dojox.grid.enhanced._Plugin.

		try{

			this.grid = grid;
			this.nls = ({
	"clearFilterDialogTitle": "Clear Filter",
	"filterDefDialogTitle": "Filter",
	"ruleTitleTemplate": "Rule ${0}",
	
	"conditionEqual": "equal",
	"conditionNotEqual": "does not equal",
	"conditionLess": "is less than",
	"conditionLessEqual": "less than or equal",
	"conditionLarger": "is greater than",
	"conditionLargerEqual": "greater than or equal",
	"conditionContains": "contains",
	"conditionIs": "is",
	"conditionStartsWith": "starts with",
	"conditionEndWith": "ends with",
	"conditionNotContain": "does not contain",
	"conditionIsNot": "is not",
	"conditionNotStartWith": "does not start with",
	"conditionNotEndWith": "does not end with",
	"conditionBefore": "before",
	"conditionAfter": "after",
	"conditionRange": "range",
	"conditionIsEmpty": "is empty",
	
	"all": "all",
	"any": "any",
	"relationAll": "all rules",
	"waiRelAll": "Match all of the following rules:",
	"relationAny": "any rules",
	"waiRelAny": "Match any of the following rules:",
	"relationMsgFront": "Match",
	"relationMsgTail": "",
	"and": "and",
	"or": "or",
	
	"addRuleButton": "Add Rule",
	"waiAddRuleButton": "Add a new rule",
	"removeRuleButton": "Remove Rule",
	"waiRemoveRuleButtonTemplate": "Remove rule ${0}",
	
	"cancelButton": "Cancel",
	"waiCancelButton": "Cancel this dialog",
	"clearButton": "Clear",
	"waiClearButton": "Clear the filter",
	"filterButton": "Filter",
	"waiFilterButton": "Submit the filter",
	
	"columnSelectLabel": "Column",
	"waiColumnSelectTemplate": "Column for rule ${0}",
	"conditionSelectLabel": "Condition",
	"waiConditionSelectTemplate": "Condition for rule ${0}",
	"valueBoxLabel": "Value",
	"waiValueBoxTemplate": "Enter value to filter for rule ${0}",
	
	"rangeTo": "to",
	"rangeTemplate": "from ${0} to ${1}",
	
	"statusTipHeaderColumn": "Column",
	"statusTipHeaderCondition": "Rules",
	"statusTipTitle": "Filter Bar",
	"statusTipMsg": "Click the filter bar here to filter on values in ${0}.",
	"anycolumn": "any column",
	"statusTipTitleNoFilter": "Filter Bar",
	"statusTipTitleHasFilter": "Filter",
	"statusTipRelPre": "Match",
	"statusTipRelPost": "rules.",
	
	"defaultItemsName": "items",
	"filterBarMsgHasFilterTemplate": "${0} of ${1} ${2} shown.",
	"filterBarMsgNoFilterTemplate": "No filter applied",
	
	"filterBarDefButton": "Define filter",
	"waiFilterBarDefButton": "Filter the table",
	"a11yFilterBarDefButton": "Filter...",
	"filterBarClearButton": "Clear filter",
	"waiFilterBarClearButton": "Clear the filter",
	"closeFilterBarBtn": "Close filter bar",
	
	"clearFilterMsg": "This will remove the filter and show all available records.",
	"anyColumnOption": "Any Column",
	
	"trueLabel": "True",
	"falseLabel": "False"
});
			
			args = this.args = dojo.isObject(args) ? args : {};
			if(typeof args.ruleCount != 'number' || args.ruleCount < 0){
				args.ruleCount = 3;
			}
			
			//Install filter layer
			/*//@mpt 02.09 this._wrapStore();  */
			
			//Install UI components
			var obj = { "plugin": this };


			/*//@mpt 02.09 WE'LL HARD-CODE NODE REF FOR NOW

			this.clearFilterDialog = new com.trivedi.oPls.Dialog({
				refNode: this.grid.domNode,
				title: this.nls["clearFilterDialogTitle"],
				content: new fns.ClearFilterConfirm(obj)
			});
			*/

			this.clearFilterDialog = new com.trivedi.oPls.Dialog({
				refNode: dojo.byId("filterDiv"),
				title: this.nls["clearFilterDialogTitle"],
				content: new fns.ClearFilterConfirm(obj)
			});

			this.filterDefDialog = new fns.FilterDefDialog(obj);
			this.filterBar = new fns.FilterBar(obj);
			this.filterStatusTip = new fns.FilterStatusTip(obj);
			
			//Expose the layer event to grid.
			grid.onFilterDefined = function(){};
			this.connect(grid.layer("filter"), "onFilterDefined", function(filter){
				grid.onFilterDefined(grid.getFilter(), grid.getFilterRelation());
			});

		  } catch(e){
			alert('error in oPls.Filter() constructor -> ' + e);
		  }

		},
		destroy: function(){
			this.inherited(arguments);
			try{
				this.grid.unwrap("filter");
				this.filterBar.destroyRecursive();
				this.filterBar = null;
				this.clearFilterDialog.destroyRecursive();
				this.clearFilterDialog = null;
				this.filterStatusTip.destroy();
				this.filterStatusTip = null;
				this.filterDefDialog.destroy();
				this.filterDefDialog = null;
				this.grid = null;
				this.nls = null;
				this.args = null;
			}catch(e){
				console.warn("Filter.destroy() error:",e);
			}
		},
		_wrapStore: function(){
			alert("wrapStore called; we don't need no stinking store!")
			/*
			var g = this.grid;
			var args = this.args;
			var filterLayer = args.isServerSide ? new fns.ServerSideFilterLayer(args) :
				new fns.ClientSideFilterLayer({
					cacheSize: args.filterCacheSize,
					fetchAll: args.fetchAllOnFirstFilter,
					getter: this._clientFilterGetter
				});
			ns.wrap(g, "_storeLayerFetch", filterLayer);
			
			this.connect(g, "_onDelete", dojo.hitch(filterLayer, "invalidate"));
			*/
		},
		onSetStore: function(store){
			alert("onSetStore called; we don't need no stinking store!")
			/*this.filterDefDialog.clearFilter(true);*/
		},
		_clientFilterGetter: function(/* data item */ datarow,/* cell */cell, /* int */rowIndex){
			// summary:
			//		Define the grid-specific way to get data from a row.
			//		Argument "cell" is provided by FilterDefDialog when defining filter expressions.
			//		Argument "rowIndex" is provided by FilterLayer when checking a row.
			//		FilterLayer also provides a forth argument: "store", which is grid.store,
			//		but we don't need it here.
			alert("_clientFilterGetter called; we don't need no stinking client filter!")
			/*
			return cell.get(rowIndex, datarow);*/
		}
	});
})();

//@mpt 02.09 dojox.grid.EnhancedGrid.registerPlugin(com.trivedi.oPls.Filter/*name:'filter'*/);



	</script>


	<script>

	/*Splash Gateway scriptLet*/

	alert('splash scriptlet - before req');
	if(typeof dojo == "undefined"){
		alert("oooops; typeof dojo=undef; the monkeys are getting too clever! p'haps time to kick some a**");
	}

		dojo.require("dijit.dijit"); // optimize: load dijit layer
		dojo.require("dijit.layout.LayoutContainer");
		dojo.require("dijit.layout.AccordionContainer");
		dojo.require("dijit.layout.TabContainer");
		dojo.require("dijit.layout.SplitContainer");
		dojo.require("dijit.layout.ContentPane");
		dojo.require("dijit.Tooltip");
		dojo.require("dijit.Dialog");
		dojo.require("dijit.Menu");
		dojo.require("dijit.form.FilteringSelect");
		dojo.require("dijit.form.CheckBox");
		dojo.require("dijit.form.Textarea");
		dojo.require("dijit.form.Button");
		dojo.require("dijit.form.DropDownButton");
		dojo.require("com.trivedi.oPls.desktop");
		dojo.require("com.trivedi.oPls.tblIcon");
		dojo.require("com.trivedi.oPls.mPane");
		dojo.require("dojox.widget.Toaster");
		dojo.require("dojo.parser");

	if(typeof dojo == "undefined"){
		alert("oooops;  typeof dojo=undef;  the monkeys are getting too clever! p'haps time to kick some a**");
	}

        var dp = new com.trivedi.oPls.desktop();
	window.dp = dp;

	testToggle= function(vara) {
	  try {
			alert('testToggle -> ' + vara);
			dijit.byId(vara).iconClass = "";
			dijit.byId(vara).label = "newLabel";
			alert('label: '  + dijit.byId(vara).label);
			alert('iCl: '  + dijit.byId(vara).iconClass);
			dojo.parser.parse(dojo.byId(vara));
	  } catch(e){
		alert('error in testToggle() -> ' + e);
	  }
	};

	bldPanes = function() {
	  try {
		alert("bldPanes begin...");
		var clientP = dijit.byId("clientPanel");
		var clientPDiv = dojo.byId("clientPanel");
		clientPDiv.innerHTML = "";

		var hotFilterButton = new dijit.form.Button({
			id: "hotFilterBtn",
			iconClass: "oPlsFlameIcon",
			label: "HotFilter",
			onClick: function(){dp.initDoxTagArray();}
		});

		tagCloudNode = dojo.doc.createElement("div");
		tagCloudNode.id = "tagCloudHdr";
		tagCloudNode.normalize();
		dojo.place(hotFilterButton.domNode, clientPDiv, "first");
		dojo.place(tagCloudNode, clientPDiv, "last");
		dojo.byId("headerTxt").innerHTML = "Scratch Scriptlet";
	  } catch(e){
		alert('error in bldPanes() -> ' + e);
	  }
	};

	bldFilter = function() {
	  try {
		alert("bldFilter begin...");
	var grid = {};

	// some sample data
	var grid.data = {
		identifier: 'id',
		label: 'id',
		items: []
	};
//^(.*)\t(.*)\t(.*)\t(.*)\t(.*)\t(.*)\t(.*)\t(.*)\t(.*)\t(.*)$
//		{"Checked": "True", "Genre":"$1",	"Artist":"$2",	"Year":$3,	"Album":"$4",	"Name":"$5",	"Length":"$6",	"Track":$7,	"Composer":"$8",	"Download Date":"$9",	"Last Played":"$10"},
	var data_list = [
		{"Heard": true, "Checked": "True", "Genre":"Easy Listening",	"Artist":"Bette Midler",	"Year":2003,	"Album":"Bette Midler Sings the Rosemary Clooney Songbook",	"Name":"Hey There",	"Length":"03:31",	"Track":4,	"Composer":"Ross, Jerry 1926-1956 -w Adler, Richard 1921-",	"Download Date":"1923/4/9",	"Last Played":"04:32:49"},
		{"Heard": true, "Checked": "True", "Genre":"Classic Rock",	"Artist":"Jimi Hendrix",	"Year":1993,	"Album":"Are You Experienced",	"Name":"Love Or Confusion",	"Length":"03:15",	"Track":4,	"Composer":"Jimi Hendrix",	"Download Date":"1947/12/6",	"Last Played":"03:47:49"},
		{"Heard": true, "Checked": "True", "Genre":"Jazz",	"Artist":"Andy Narell",	"Year":1992,	"Album":"Down the Road",	"Name":"Sugar Street",	"Length":"07:00",	"Track":8,	"Composer":"Andy Narell",	"Download Date":"1906/3/22",	"Last Played":"21:56:15"},
		{"Heard": true, "Checked": "True", "Genre":"Progressive Rock",	"Artist":"Emerson, Lake & Palmer",	"Year":1992,	"Album":"The Atlantic Years",	"Name":"Tarkus",	"Length":"20:40",	"Track":5,	"Composer":"Greg Lake/Keith Emerson",	"Download Date":"1994/11/29",	"Last Played":"03:25:19"},
		{"Heard": true, "Checked": "True", "Genre":"Rock",	"Artist":"Blood, Sweat & Tears",	"Year":1968,	"Album":"Child Is Father To The Man",	"Name":"Somethin' Goin' On",	"Length":"08:00",	"Track":9,	"Composer":"",	"Download Date":"1973/9/11",	"Last Played":"19:49:41"},
		{"Heard": true, "Checked": "True", "Genre":"Jazz",	"Artist":"Andy Narell",	"Year":1989,	"Album":"Little Secrets",	"Name":"Don't Look Back",	"Length":"09:39",	"Track":6,	"Composer":"Andy Narell",	"Download Date":"1907/3/5",	"Last Played":"23:29:04"},
		{"Heard": true, "Checked": "True", "Genre":"Progressive Rock",	"Artist":"Dixie dregs",	"Year":1978,	"Album":"What if",	"Name":"What if",	"Length":"05:02",	"Track":3,	"Composer":"Steve Morse",	"Download Date":"1992/3/28",	"Last Played":"00:22:30"}
	];
	var len = data_list.length;
	var rounds = 1;
	for(var i=0; i < rounds * len ; ++i){
		grid.data.items.push(dojo.mixin({'id': i+1 }, data_list[i%len]));
	};

		var grid.layout = [{//--------------------------------------------------------------------------0
			defaultCell: {
				editable: true, sortDesc: true, type: dojox.grid.cells._Widget,
				//Use ComboBox instead of TextBox when setting filter for string columns
				autoComplete:true
			},
			cells:
			[
				//5 kinds of datatype: string, number, date, time, boolean
				{ field: "id", name:"Index", datatype:"number", width: 2.5, editable: false},
				{ field: "Genre", name:"Genre", datatype:"string", width: 10},
				{ field: "Artist", name:"Artist", datatype:"string", width: 10},
				{ field: "Year", name:"Year", datatype:"string", width: 2.5},
				{ field: "Album", name:"Album", datatype:"string", width: 10,
					dataTypeArgs: {
					//turn off autoComplete for the ComboBox, but still use the suggestions.
						autoComplete: false
					}
				},
				{ field: "Name", name:"Name", datatype:"string", width: 8,
					//Disable some filter conditions for this column 
					disabledConditions: [
						"contains", "notcontains"
					]
				},
				{ field: "Length", name:"Length", datatype:"string", width: 4},
				{ field: "Track", name:"Track", datatype:"number", width: 3},
				{ field: "Composer", name:"Composer", datatype:"string", width: 12},
				{ field: "Download Date", name:"Download Date", datatype:"date", width: 8, editable: false,
					dataTypeArgs: {
					//Tell the DateTextBox how to parse the store data
						datePattern: "yyyy/M/d"
					}
				},
				{ field: "Last Played", name:"Last Played", datatype:"time", width: 6, editable: false,
					dataTypeArgs: {
					//Tell the TimeTextBox how to parse the store data
						timePattern: "HH:mm:ss"
					}
				},
				{ field: "Heard", name: "Checked", datatype:"boolean", width: 6,
					type: dojox.grid.cells._Widget, 
					widgetClass: dijit.form.CheckBox
				},
				{ field: "Checked", name:"Checked (Customized Label)", 
					type: dojox.grid.cells._Widget, 
					widgetClass:dijit.form.CheckBox,
					datatype:"boolean", width: 15, 
					dataTypeArgs: {
					//Define what does true/false mean here
						trueLabel: "This sounds like a very old song.",
						falseLabel: "Never heard of this song."
					}
				}
			]
		}];
		//window.layout = layout;
		var grid.plugins = {
			filter: {
				itemsName: 'songs',
				closeFilterbarButton: true,
				ruleCount: 8
			}
		};
		var clientP = dijit.byId("clientPanel");
		var clientPDiv = dojo.byId("clientPanel");
		clientPDiv.innerHTML = "";

		var exprBldButton = new dijit.form.Button({
			id: "exprBuilderBtn",
			iconClass: "oPlsFlameIcon",
			label: "exprBuilder",
			onClick: function(){
				alert( "JSON.stringified view of grid:" + dojo.toJson(grid, true, " "));
				var filt = new com.trivedi.oPls.Filter(grid, args);
				//!!!!dp.initDoxTagArray();
			}
		});

		filterNode = dojo.doc.createElement("div");
		filterNode.id = "filterDiv";
		filterNode.normalize();
		dojo.place(FilterButton.domNode, clientPDiv, "first");
		dojo.place(filterNode, clientPDiv, "last");
		dojo.byId("headerTxt").innerHTML = "Filter Scriptlet";


	  } catch(e){
		alert('error in bldFilter() -> ' + e);
	  }
	};

	bldFormDesign = function() {
	  try {
		alert("bldFormDesign begin...");
		dijit.byId("oPlsFilterBuilder").show();
	  } catch(e){
		alert('error in bldFormDesign() -> ' + e);
	  }
	};


	bldIconPane = function() {
	  try {
		alert("bldIconPane begin...");
		var clientP = dijit.byId("clientPanel");
		var clientPDiv = dojo.byId("clientPanel");
		clientPDiv.innerHTML = "";

		var iconPane = new dijit.layout.ContentPane({
			id: "iconContent", 
			title: "Icons", 
			href: "https://gitee.com/miketriv/miketriv/raw/master/icons.html", 
			style: "background: aliceblue;"
		});

		alert("got " + iconPane.domNode.innerHTML);
		clientP.setContent(iconPane.domNode);
		//dojo.place(iconPane.domNode, clientPDiv, "last");
		//dojo.byId("headerTxt").innerHTML = "Icons";
	  } catch(e){
		alert('error in bldIconPane() -> ' + e);
	  }
	};


	dojo.addOnLoad(function(){

		alert('begin onLoad, after scripts loaded, parsing...');

	try {
		if (dojo.byId('aboutDiv')) {
			dojo.connect(dojo.byId('aboutDiv'), "onmouseover", null, function(){dijit.byId('myAboutDlg').show();});
		} else {
			alert('not fnd; monkeys');
		}

		var toastr = dijit.byId("toast");
			toastr.setContent('yaaaaaaaaaaaaaaaaaa', 'ERROR', 2000);
			toastr.show();

	} catch(e){
		alert('error in onLoad -> ' + e);
	}


	});

	

	</script>

</head>

<body>

<div id="appLayout" dojoType="dijit.layout.LayoutContainer" style="width: 820px; height: 370px;background-color:rgba(0, 39, 94, 1);">

	<div id="headerPanel" dojoType="dijit.layout.ContentPane" layoutAlign="top" splitter="true" style="height: 50px;background-color:rgba(0, 39, 94, 1);">
	  <div id="header" style="padding: 0px;">
		  <table id="hdrTitle" style="background-color: rgba(0, 39, 94, 1);border:0px;">
			<tr><td style="color:firebrick;vertical-align:bottom;border:0px;" align='left'><h2>Good Morning Mike!</h2></td>
			<td align="right">

		<div class="oPlsMenuButton" dojoType="dijit.form.DropDownButton" iconClass="oPlsMenuIcon" showLabel="false">
			<span>--Load--</span>
			<div dojoType="dijit.Menu">
				<div dojoType="dijit.MenuItem"  iconClass="oPlsCodeIcon"
					onClick="bldPanes();">bldPanes</div>
				<div dojoType="dijit.MenuItem"  iconClass="oPlsBuildIcon"
					onClick="alert('to be impl');">desktopBuilder</div>
				<div dojoType="dijit.MenuItem"  iconClass="oPlsFilterListIcon"
					onClick="bldFilter();');">filterBuilder</div>
				<div dojoType="dijit.MenuItem"  iconClass="oPlsviewListIcon2"
					onClick="alert('not actually copying anything, just a test!')">gridBuilder</div>
				<div dojoType="dijit.MenuItem"  iconClass="oPlsFileIcon3"
					onClick="bldFormDesign();">formDesigner</div>
				<div dojoType="dijit.MenuSeparator"></div>
				<div dojoType="dijit.PopupMenuItem">
					<span>Misc</span>
					<div dojoType="dijit.Menu" id="submenu2">
						<div dojoType="dijit.MenuItem"  iconClass="dijitEditorIcon dijitEditorIconCopy"
							onClick="bldIconPane();">iconRef</div>
						<div dojoType="dijit.MenuItem"  iconClass="oPlsExclamationTriangleIcon"
							onClick="dijit.byId('monkeyAgendaDlg').show();">monkaz</div>
						<div dojoType="dijit.PopupMenuItem">
							<span>Deeper Submenu</span>
							<div dojoType="dijit.Menu" id="submenu4"">
								<div dojoType="dijit.MenuItem" onClick="alert('Sub-submenu 1!')">Sub-sub-menu Item One</div>
								<div dojoType="dijit.MenuItem" onClick="alert('Sub-submenu 2!')">Sub-sub-menu Item Two</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


			<!--div dojoType='dijit.form.Button' iconClass='oPlsConsoleIcon' id='desktopBuilderBtn' label='desktopbuilder'></div-->
			<!--div dojoType="dijit.form.Button" onClick="dijit.byId('monkeyAgendaDlg').show();" iconClass='oPlsHackers'>monkaz</div-->
			</td></tr></table>
	  </div>
	</div>

	<div id="clientPanel" title="links & notes" dojoType="dijit.layout.ContentPane" layoutAlign="client" style="background-color: aliceblue;padding: 5px;">

<!--LINKS BEGIN-->

        <table id="linksTable" style="background-color: ivory;" class="separate">
          <caption>
            <center><span class='mTitle'>Quick links</span> (last updated 2020.02.02)</center>
          </caption>
          <tbody>
<tr>
    <td style="width: 30%;">
       <br>
      <ul>
        <li><span style="color: grey;">jdk13 <a href="https://gofile.io/?c=6Hn1pe">runImg</a></span></li>
        <li>ecj <a href="https://defuse.ca/checksums.htm">SHA512</a> 
	<span style="color: red;" id="ecj_sha512">checksum</span>
	<div class="TTip" dojoType="dijit.Tooltip" connectId='ecj_sha512',position:['above']">
        426ff497726773550f30d1a676a690daa862de1c1dc5a46b541613a6985999f82ecc31b978e3eb6830e47edd114339375804156790016f427c5d5fc067ce6b92
	</div></li>
        <li>dojo Repos: <a href="https://github.com/dojo/dojo/">Github</a> | <a href='https://cdnjs.com/libraries/dojo'>cdnjs</a> | </li>
        <li>JDK9 <a href='http://jdk9.java.net'>Download</a></li>
      <br>
      <li>Eclipse <a href='http://www.eclipse.org/downloads/'>downloads</a> 
      <br>
      <li><a href='http://stackoverflow.com'>Stack Overflow</a> 
      <br>
      <li><a href='089c82f382f4b38c12cbfa428ec2917a'>deco.java</a> </li>
     <br>
        <li>java 10 <a href="https://docs.oracle.com/javase/10/">API</a></li>
		<li>java 8 <a href="https://docs.oracle.com/javase/8/docs/api/index.html">java 8 API</a></li>
    <li><a href="http://hg.openjdk.java.net/openjfx/9-dev/rt/file/ce676c14b7d1/modules">OpenJDK</a></li>
        <li>Oracle <a href="https://docs.oracle.com/javase/tutorial/collections/intro/index.html">collections</a> tutorial</li>
        </ul>
	</td>
	
	<td>
    <ul>
		<li>RedHat <a href='https://www.openshift.com/products/online/'>OpenShift</a> | AWS <a href='https://aws.amazon.com/free/'>FreeTier</a> | RackSpace <a href='http://jclouds.apache.org/guides/rackspace/'>hosting</a>
		<li>List o' <a href='https://github.com/FancyGrid/awesome-grid'>grids</a> 
		<li>Unchecked Exceptions;  The <a href='http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html'>Controversy</a>
		<li>The diff betw java.lang.RuntimeException and java.lang.Exception (<a href='http://stackoverflow.com/questions/2190161/difference-between-java-lang-runtimeexception-and-java-lang-exception'>SO</a>)
		<li>article w/many good links on <a href="https://www.javacodegeeks.com/2018/07/http-2-server-push.html">HTTP/2 Server Push</a>
		<li>Docker Tutorial: Play with <a href='https://www.javacodegeeks.com/2018/07/docker-tutorial-containers.html'>Containers</a> (Simple Examples)
		<li>Building a REST service <a href='https://sysgears.com/articles/building-rest-service-with-scala/'>with scala</a>
		<li>Creating a DSL w/ <a href='https://dzone.com/articles/creating-dsl-with-antlr4-and-scala'>Antler & Scala</a>
	</ul>
	</td>
	
    <td style="width: 25%;">
	<h4>Utils</h4>
      <ul>
		  <li>Use regexp to <a href='http://www.molbiotools.com/textextractor.html'>extract txt</a></li>
		  <li>Online RegExp <a href='https://regexr.com/'>#1</a> <a href='http://www.regexplanet.com/advanced/java/index.html'>#2</a> <a href='http://www.regexe.com/'>#3</a></li>
		  <li><a href="http://plnkr.co/edit/">Plnkr</a></li>
		  <li><a href="http://www.mergely.com/editor">Diff #1</a></li>
		  <li><a href="http://www.diffnow.com/editor">Diff #2</a></li>
		  <li><a href="http://compilejava.net">java Compiler</a></li></li>
		  <li><a href='http://7-zip.com'>7zip</a></li>
      </ul>
	</td>
	</tr>
	
	<tr>
	<td>
		  <h4>Design Patterns</h4>
		  <li>awesome list o' <a href='https://github.com/DovAmir/awesome-design-patterns'>design patterns</a></li>
		  <li>Steve Yegge's <a href='http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html'>noun-verb post</a></li>
		  <li><a href='http://mishadoff.com/blog/clojure-design-patterns/'>functional patterns</a> in Closure</li>
		  <li>Patterns in <a href='https://patternsinfp.wordpress.com/welcome/'>Functional Programming</a></li>
		  <li>(SO) Does FP <a href='https://stackoverflow.com/questions/327955/does-functional-programming-replace-gof-design-patterns/328146#328146'>replace</a> gof design patterns?</li>
		  <li>A list of Design Patterns and a language feature that (largely) <a href='http://wiki.c2.com/?AreDesignPatternsMissingLanguageFeatures'>replaces them</a></li>
		  <li style='color: red'>Patterns to <a href='http://wiki.c2.com/?CategoryObjectFunctionalPatterns'>integrate FP style</a> w/an OO env.</li>
    </td>

    <td>
       <h4>Reading</h4>
      <ul>
      <li>Reddit's <a href='https://www.reddit.com/r/java/'>java</a> area</li>
	  <li>IBM <a href="http://www.ibm.com/developerworks/java/library/j-java-streams-1-brian-goetz/index.html">developerWorks</a></li>
	  <li style='color: red'>The mother of <a href="https://www.niceideas.ch/roller2/badtrash/entry/bytecode-manipulation-with-javassist-for">injection</a></li>
	  <li style='color: red'>The mother of <a href="http://coopsoft.com/ar/CalamityArticle.html">jdk fork-join</a></li>
	  <li><a href="https://www.niceideas.ch/roller2/badtrash/entry/devops-explained">devops</a>-explained</li>
	  <li><a href="https://www.niceideas.ch/roller2/badtrash/entry/comet-having-fun-with-the#sec21">comet article</a>: keeping server side connection alive and updating client through "bursts" PUSHED from server</li>
	  <li>Oracle: Migrating from Desktop to <a href='https://community.oracle.com/docs/DOC-1001176'>Cloud-Native Web Applications</a> (has javafx setMember ref)</li>
	  <li>Oracle <a href="https://docs.oracle.com/javase/tutorial/collections/intro/index.html">Collections</a> tutorial</li>
	  <li><a href='https://news.ycombinator.com/from?site=paralleluniverse.co'>HackerNews</a></li>
      </ul>
      </td>
	  
	<td>	
		<h4>Code as Guru</h4>
	  <ul>
		<li><a href='https://github.com/aol/cyclops-react'>cyclops React</a></li>
		<li><a href='https://developer.lightbend.com/start/?group=akka&project=akka-http-quickstart-java'>akka</a></li>
		<li>JOOQ/JOOL</li>
		<li>RxJava</li>
		<li>functionalJava</li>
		<li>JDK</li>
		<li>eclipse.org</li>
		<li>lombok / byteBuddy / aspectJ</li></ul>
    </td>
      </tr>
    </tbody>
</table>

<!--LINKS END-->


<p>
<details><summary>
<span class='mHG'>Some new stuff -></span></summary>
<br>
<a href="http://industryresearchreports.us/13820/global-nosql-databases-market-2019-strategic-assessments-key-players-include-accumulo-aerospike-amazon-simpledb-azure-table-cassandra/">2019 NoSQL Db Market Report</a><br>
<a href="https://stackoverflow.com/questions/58484512/logic-using-functional-style-exception-handling-with-java-and-vavr">SO: Functional Exception Handling Post</a><br>
<a href="https://dzone.com/articles/exception-free-code-using-functional-approach">Perhaps not usable directly but EXC eg of using Funcional Concepts (esp fold) in Java</a><br>
<a href="https://dzone.com/articles/search-in-big-files-via-mappedbytebuffer">Using nio.2 fileChannel.map to load file bit by bit</a><br>
<a href="https://dzone.com/articles/a-disk-backed-arraylist">A disk-backed ArrayList if memory insuff (links to map also)</a><br>
<span style='color: red;'>Question</span> re: above: why not use FileChannels instd? relative benefits? article dated?<br>
<a href="https://www.javaadvent.com/2019/12/a-beginners-guide-to-java-agents.html">on Agents by ByteBuddy author</a><br>
<p>
<hr>
<h3>Instantiation suppliers</h3>
<br>
Suppliers are useful for lazy initialization, and whenever a Supplier<Type> is expected, you can pass Type::new.
<br>
A constructor reference E::new is in fact a Supplier<E>. That means wherever you have suppliers you can use it. If you are using the stream API, you will inevitably find some use-cases, e.g. Stream#toArray(String[]::new) or Collectors#groupingBy() (or in general, collectors) to instantiate a collection or map of a specific type instead of relying on the type returned by default.
<br>
<hr>
<h3>AtomicReference</h3>
<br>
The compareAndSet method takes two parameters, the expected current value and the new value. The method atomically checks if the current value equals the expected value. If yes, then the method updates the value to the new value and returns true. If not, the method leaves the current value unchanged and returns false.
<br>
We atomically check if the current value is still the same <b>as when we started the computation</b>.
<br>
If yes, we can safely update the current value. Otherwise, we need to recalculate the new value with the changed current value.
<br>
<hr>
<a href='https://medium.com/@zakgof/type-safe-actor-model-for-java-7133857a9f72'>A Type-safe actor model for java</a>
Akka Typed Actors use JDK proxying to wrap an object and return a safe interface that converts normal Java method calls to asynchronous.
Jumi Actors have a similar approach
This article mentions how to do the same thing by wrapping the method call in a high-order function rather than proxying an interface
<br>
<code><pre>
safeSquarer.ask(squarer -> squarer.square(5),
    result -> System.out.println(result));            //async ask v1
CompletableFuture<Double> safeSquarer.ask(squarer ->
    squarer.square(5));                               //async ask v2
</pre></code>
<br>

<hr>
<h3>Dynamic Attach</h3>
The Java API for Dynamic Attach is available in the same tools.jar file. Note that this is a vendor-specific API applicable only to OpenJDK and Oracles JDK.
<br>
Attaching to a running Java process is straightforward; you need to know only the target process ID (pid) as shown in the following code. (Dynamic Attach requires no special VM options. It can connect to any local HotSpot JVM unless it is started with the -XX:+DisableAttachMechanism flag.)
<br>
<hr>
<h3>HotSpot Serviceability Agent</h3>
<br>
The HotSpot Serviceability Agent (SA) provides a low-level view of a Java process from a VM perspective.<br>
The SA provides the reflection-like API to inspect Java objects and to extract the required fields. Unlike the reflection, which works from within the same process, the SA reads memory of a different process or parses a core dump file. Tools based on this feature can do impressive tricks such as stealing private keys from a running web server.<br>

The SA needs no cooperation from the target JVM, and there is no way to protect against SA interactions. <br>This is not a reason to worry, though. The SA typically requires root privileges to attach to a running process. Also, keep in mind that the target JVM remains suspended while the SA is attached.<br>
<hr>

<h3>From javaMag / TextPad -></h3>
<br>
<code><pre>
// Don't close automatically, WindowCloser will exit when done.
		setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
		this.addWindowListener(new WindowAdapter() {
			public void windowClosing(WindowEvent e) {
				doWhenNoUnsavedChanges(() -> { 
					setVisible(false); 
					dispose(); 
					System.exit(0); });
			}
		});

	/**
	 *  Check for unsaved changes; if so, prompt.
	 *  When approved, perform the action passed in.
	 */
	public void doWhenNoUnsavedChanges(Runnable r) {
		if (mUnsavedChanges) {
			int ret = JOptionPane.showOptionDialog(TinyPad.this,
					"You have unsaved Changes!", "Warning",
					JOptionPane.YES_NO_CANCEL_OPTION, JOptionPane.WARNING_MESSAGE,
					null, unsavedOptions, unsavedOptions[0]);
			switch(ret) {
			case UNSAVED_OPTION_SAVE: // Save
				saveActionListener.actionPerformed(null);
				if (mUnsavedChanges) { // ie., save failed
					return;
				}
				break;
			case UNSAVED_OPTION_DISCARD: // Discard
				break;
				// NOTREACHED
			case JOptionPane.CANCEL_OPTION:
			case JOptionPane.CLOSED_OPTION:
				// Do nothing; in particular, do not exit.
				return;
			default:
				throw new IllegalStateException("Unexpected: " + ret);
			}
		}
		// We got here, so run the Runnable.
		r.run();
	}
</pre></code>
<br>
<hr>

</details>
<p>

<p>
<details><summary>
<span class='mHG'>new Functional stuff -></span></summary>
<br>
<a href='https://medium.com/zyseme-technology/functional-references-lens-and-other-optics-in-scala-e5f7e2fdafe'>Functional References - optics</a><br>
Debasish Ghosh, in in the book Functional And Reactive Domain Modeling, defined a compose function that allows us to put together Lenses and reuse code:
<p>
<code><pre>
def compose[Outer, Inner, Value](
    outer: Lens[Outer, Inner],
    inner: Lens[Inner, Value]
) = Lens[Outer, Value](
  get = outer.get andThen inner.get,
  set = (obj, value) => outer.set(obj, inner.set(outer.get(obj), value))
)
</pre></code>
<br>
<a href='https://github.com/martincooper/java-datatable'>Java DataTable</a><br>
Java DataTable is a lightweight, in-memory table structure written in Java. The implementation is entirely immutable. Modifying any part of the table, adding or removing columns, rows, or individual field values will create and return a new structure, leaving the old one completely untouched. This is quite efficient due to structural sharing.
<br><a href='http://www.lambda-land.com/posts/2015-12-27-diffing-refactoring'>Refactoring Java code to FP, a case study</a>
<br><a href='https://developer.atlassian.com/blog/2015/08/optional-broken/'>Why java.util.Optional is broken</a>
<br><a href='http://programming-digressions.blogspot.com/2017/08/when-object-orientation-met-functional.html'>Blending FP with OOP.</a>
<br><a href='https://www.reddit.com/r/functionalprogramming/comments/6taw60/converting_oo_to_fp/'>Converting OO to FP? (link to domain-driven-design in F#)</a>
<br><a href='https://www.reddit.com/r/functionalprogramming/comments/1rjb3s/practical_rules_for_controlling_program_effects/'>Practical rules for controlling program effects in an imperative / OOP environment.</a>
<br><a href='https://www.reddit.com/r/functionalprogramming/search/?q=refactoring%20java&restrict_sr=1'>reddir r/functionalprog & java (only checked topmost stuff so far)</a>

<br><a href='https://www.ibm.com/developerworks/views/java/libraryview.jsp?search_by=functional+thinking:'>DevWorks functional (Lots)**</a>

<details>
<summary>Using Either & foldEither, 2 egs</summary
<br><a href='https://jiahao.codes/blog/writing-java-with-a-dash-of-functional-programming/'>Using EITHER in Java</a>
<br><a href='https://www.lucidchart.com/techblog/2016/11/23/tracking-data-in-complex-java-code-a-functional-programming-approach-part-ii/'>Composite(); forBoth() in Java</a>


<p>ConversionResult<Composite> c = new ConversionResult<>(new Composite(), warning1);<br>
ConversionResult<Piece> p = new ConversionResult<>(new Piece(), warning2);</p>

<p>c.forBoth(p, (_c, _p) -> _c.piece = _p);<br>
//the value contained in c has been composed with the value contained in p<br>
//c now contai</p>

<p>ConversionResult<Composite> c = new ConversionResult<>(new Composite(), warning1);<br>
 //Note that c.generatePiece return an object of type ConversionResult<Piece>. <br>
 We will assume it returns with warning2.<br>
ConversionResult<Param> a = new ConversionResult<>(new Param(), warning3);</p>

<p>We did, however, create a convenience function which we call mapBoth, <br>
which simplifies a common but complex pattern:</p>

<p>ConversionResult<Piece> p1 = c.flatMap( _c -> a.map( _a -> _c.generatePiece(_a) ) );</p>

<p>//p1 contains the result of the generatePiece function call, <br>
 and also contains all three warnings</p>

<p>ConversionResult<Piece> p2 = c.mapBoth(a, (_c, _a) -> _c.generatePiece(_a) ) ;</p>

<p>//p2 is identical to p1, but doesn't need nested function calls</p>

<p>
<h3>FOLD</h3><br>
Of interest to us is the API of Either.fold which I will illustrate<br>
 with a simple example. fold takes two parameters, a leftMapper <br>
function to transform the left value, if the value is a left type, <br>
and a rightMapper function to transform the right value, should it <br>
be a right type. In the example below, we transform an <br>
Either<String, Integer> type to another Either<Integer, String> <br>
by using the fold method and lambda functions as parameters.</p>

<p>Either<String, Integer> <span style='color: red;'>doSomething()</span> {<br>
 // dummy method stub<br>
}</p>

<p>Either<Integer, String> foldResult = doSomething()<span style='color: red;'>.fold</span>((someString) -> {<br>
 // what to return when the result of doSomething() is a string (on the left)<br>
 return Either.left(someString.length());<br>
}, (someInteger) -> {<br>
 // what to return when the result of doSomething() is a integer (on the right)<br>
 return Either.right(Integer.toString(someInteger));<br>
});</p>

<p><h3>from vavr API</h3><br>
io.vavr.control<br>
<span style='color: red;'>Interface Either<L,R></span></p>

<p>superInterfaces -> Iterable<R>, Serializable, Value<R><br>
<hr></p>

<p>Either represents a value of two possible types. An Either is either a Either.Left or a Either.Right.<br>
If the given Either is a Right and projected to a Left, the Left operations have no effect on the Right value.<br>
If the given Either is a Left and projected to a Right, the Right operations have no effect on the Left value.<br>
If a Left is projected to a Left or a Right is projected to a Right, the operations have an effect.</p>

<p>Example: A compute() function, which results either in an Integer value <br>
(in the case of success) or in an error message of type String (in the case of failure). <br>
By convention the success case is Right and the failure is Left.</p>

<p>
 Either<String,Integer> value = compute().right().map(i -> i * 2).toEither();<br>
<hr></p>

<p>default R getOrElseGet(Function<? super L,? extends R> other)<br>
Gets the Right value or an alternate value, if the projected Either is a Left.<br>
<hr><br>
default <X,Y> Either<X,Y> bimap(Function<? super L,? extends X> leftMapper,<br>
 Function<? super R,? extends Y> rightMapper)<br>
Maps either the left or the right side of this disjunction.<br>
<hr><br>
default R getOrElseGet(Function<? super L,? extends R> other)<br>
Gets the Right value or an alternate value, if the projected Either is a Left.<br>
<hr></p>

<p>default <U> U fold(Function<? super L,? extends U> leftMapper,<br>
Function<? super R,? extends U> rightMapper)</p>

<p>Folds either the left or the right side of this disjunction.</p>

<p>Type Parameters:<br>
U - type of the folded value</p>

<p>Parameters:<br>
leftMapper - maps the left value if this is a Left<br>
rightMapper - maps the right value if this is a Right</p>

<p>Returns:<br>
A value of type U<br>
<hr></p>

<br>
<p>
Neal Ford's EITHER (as a tree for pattern matching) ->
Either trees and pattern matching
https://www.ibm.com/developerworks/java/library/j-ft14/index.html
...<p>
consider the declaration Either<Empty, Either<Leaf, Node>>, which creates a three-part data structure


<p>
Neal Ford's ex using a memoized cache
(https://www.ibm.com/developerworks/java/library/j-ft17/index.html)
<p>
"...Here, I create a class-wide cache to hold previously calculated values
....requires a little dubious class design, forcing it to be stateful 
so that the instance can act as the owner of the cache. This could 
be improved, but the improvement is trivial in subsequent examples, 
so I won't bother here...."
<p>
<code><pre>
import fj.F;
import fj.data.List;
import java.util.HashMap;
import java.util.Map;
import static fj.data.List.range;
import static fj.function.Integers.add;
import static java.lang.Math.round;
 
import static java.lang.Math.sqrt;
 
public class FjPrimeNumber {
    private int candidate;
    private Map<Integer, Integer> cache;
 
    public FjPrimeNumber setCandidate(int value) {
        this.candidate = value;
        return this;
    }
 
    public FjPrimeNumber(int candidate) {
        this.candidate = candidate;
        cache = new HashMap<Integer, Integer>();
    }
 
    public boolean isFactor(int potential) {
        return candidate % potential == 0;
    }
 
    public List<Integer> getFactors() {
        final List<Integer> lowerFactors = range(1, (int) round(sqrt(candidate) + 1))
                .filter(new F<Integer, Boolean>() {
                    public Boolean f(final Integer i) {
                        return isFactor(i);
                    }
                });
        return lowerFactors.append(lowerFactors.map(new F<Integer, Integer>() {
            public Integer f(final Integer i) {
                return candidate / i;
            }
        }))
        .nub();
    }
 
    public int sumFactors() {
 
        if (cache.containsKey(candidate))
            return cache.get(candidate);
        else {
            int sum = getFactors().foldLeft(add, 0);
            cache.put(candidate, sum);
            return sum;
        }
    }
 
    public boolean isPrime() {
        return candidate == 2 || sumFactors() == candidate + 1;
    }
}
</pre></code>
<hr>
</details>
<br><a href='https://www.curry-on.org/2019/sessions/the-future-of-dsls-functions-and-formal-methods.html'>Talk 'Future of DSL', creating dsl compiler **</a>
<br><a href='https://www.curry-on.org/2019/sessions/walking-in-the-garden-of-forking-paths.html'>Talk 'Garden of forking paths'</a>


</details>
<p>

<details><summary>
<span class='mHG'>NIO.2, AIO, ProtoBuf...</span></summary>

<br>https://github.com/IBM/java-async-util 
<br>https://www.zoftino.com/java-asynchronous-io-nio2 
<br>https://www.tutorialspoint.com/java_nio/java_nio_quick_guide.htm 
<br>https://www.developer.com/java/data/understanding-asynchronous-socket-channels-in-java.html 
<br>https://medium.com/coderscorner/tale-of-client-server-and-socket-a6ef54a74763 
<br>https://kodejava.org/how-do-i-create-a-client-server-socket-communication/ 
<br>https://programming.vip/docs/java-non-blocking-io-and-asynchronous-io.html 
<br>https://examples.javacodegeeks.com/core-java/nio/java-nio-asynchronous-channels-tutorial/ 
<br>https://www.codeproject.com/search.aspx?doctypeid=1%3b2%3b3%3b13%3b11&q=java+nio+async&licenseid=a1 
<br>https://crunchify.com/java-nio-non-blocking-io-with-server-client-example-java-nio-bytebuffer-and-channels-selector-java-nio-vs-io/ 
<br>https://laurentcurau.com/java-testing-multiple-threads 
<br>https://www.geeksforgeeks.org/introducing-threads-socket-programming-java/ 
<br>https://blog.couchbase.com/inside-the-java-sdk-connection-management/ (netty) 
<br>https://www.javaworld.com/article/2853780/socket-programming-for-scalable-systems.html (io & nio2) 
<br>https://www.freecodecamp.org/news/java-async-io-async-request-processing-in-
<br>http-request-1a04f395d8c7/ 

<p><h1>google Protobuf </h1>
<a href='https://programming.vip/docs/netty-coding-and-decoding-technology.html'>Using netty's Marshaller (JBoss equiv of Protobuf/thrift)</a>
<br>https://dzone.com/articles/using-googles-protocol-buffers-with-java 
<br>https://putridparrot.com/blog/using-protocol-buffers/ 
<br>https://www.normansoven.com/post/been-working-on-a-high-performance-async-low-latency-rpc-library 
<br>https://programmaticponderings.com/tag/protobuf/ 
<br>https://dev.to/idanarye/are-there-any-api-specification-formats-for-websockets-2mkk 
<br>https://beej.us/guide/bgnet/pdf/bgnet_a4_c_1.pdf 
<br>https://www.javatips.net/api/com.google.protobuf.message 
<br>https://raw.githubusercontent.com/protocolbuffers/protobuf/master/examples/addressbook.proto 
<br>https://github.com/protocolbuffers/protobuf/tree/master/examples 
<br>https://github.com/protocolbuffers/protobuf/tree/master/examples 
<br>https://github.com/protocolbuffers/protobuf 
<br>https://en.wikipedia.org/wiki/Protocol_Buffers


<p><h1>rPC / nio</h1>
<br><a href='https://medium.com/@oliver_hu/understanding-grpc-60d66d3a56a2'>Understanding gRPC</a>
<br><a href='https://sites.google.com/a/athaydes.com/renato-athaydes/posts/thereturnofrpc-orhowrestisnolongertheonlyrespectablesolutionforapis'>The return of RPC - or how REST is no longer the only respectable solution for APIs</a>
<br><a href='https://vlkan.com/blog/post/2018/02/09/netty-in-action/'>Notes on "Netty in Action"</a>
<br><a href='https://developer.okta.com/blog/2019/11/25/java-netty-webflux'>A Quick Guide to Java on Netty</a>
<br><a href='Java Writes Netty-based RPC Framework'>>https://programmer.help/blogs/java-writes-netty-based-rpc-framework.html</a>
<br>

<p><h2>some more</h2>
<a href='https://cr.openjdk.java.net/~briangoetz/amber/serialization.html'>Towards Better Serialization, Brian Goetz</a><br>
<a href='https://snede.net/heres-why-you-should-use-grpc-for-everything/'>Heres why you should use gRPC for everything</a><br>
<a href='https://dzone.com/articles/serialization-schema-compositionality-and-apache-a'>Java Object Serialization, Schema Compositionality, and Apache Avro</a><br>
<a href='https://news.ycombinator.com/item?id=20021759'>Why Were Switching to gRPC (ycombinator)</a><br>
<a href='https://kalilinuxtutorials.com/pbtk-toolset-reverse-engineering-fuzzing-protobuf-based/'>PBTK : A Toolset For Reverse Engineering & Fuzzing Protobuf-Based Apps</a><br>
<a href='https://www.infoq.com/articles/overcoming-restlessness/'>Overcoming RESTlessness - infoQ</a><br>

</details>
<p>


<details><summary>
<span class='mHG'>IBM DeveloperWorks Java articles -></span></summary>
<br>
<div id = "ibm_sched">
<a href="https://developer.ibm.com/articles/j-schedule/">
Scheduling recurring tasks in Java applications
</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_sched',position:['above']">
<ul>
<li>Scheduling a one-shot task</li>
<li>Scheduling a recurring task</li>
<li>Implementing the scheduling framework</li>
<li>Canceling tasks</li>
<li>Extending the cron facility</li>
<li>Real-time guarantees</li>
<li>When was I scheduled</li>
</ul>
</div>


<div id = "ibm_ruleEng">
<a href="https://developer.ibm.com/articles/os-rulesengines/">
Requirements for rule engines:</a>
</div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_ruleEng',position:['above']">
Capture and communication of complex business rules
</div>

<div id = "ibm_venkt2">
<a href="https://developer.ibm.com/articles/j-java8idioms2/">
Function composition and the Collection Pipeline pattern (Venkat Subramaniam)
</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_venkt2',position:['above']">
Functional patterns for iterating collections in Java<br><ul>
<li>Statements and expressions</li>
<li>Iterating and sorting with statements</li>
<li>Iterating and sorting with a collection pipeline</li>
</ul>
</div>


<div id = "ibm_5things15">
<a href="https://developer.ibm.com/articles/j-5things15/">
Multithreaded Java programming</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_5things15',position:['above']">
On the subtleties of high-performance threading<br><ul>
<li>1. Synchronized method or synchronized block</li>
<li>2. ThreadLocal variables</li>
<li>3. Volatile variables</li>
<li>4. Volatile versus synchronized</li>
<li>5. Atomic field updaters</li>
<li>Using atomic updates</li>
<li>AtomicReferenceFieldUpdater</li>
</ul>
</div>


<div id = "ibm_14">
<a href="https://developer.ibm.com/articles/j-5things14/">
Enhancing Swing
</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_14',position:['above']">
Yes, you can (still) build beautiful user interfaces with Swing!<br><ul>
<li>1. Substance</li>
<li>2. SwingX</li>
<li>Building a SwingX TreeTable</li>
<li>3. RSyntaxTextArea</li>
<li>Adding syntax highlighting to Swing apps</li>
<li>4. The Java Look-and-Feel Graphics Repository</li>
<li>Using Java Look-And-Feel Graphics Repository icons</li>
<li>5. Swing threading</li>

</ul>
</div>

<div id = "ibm_tools">
<a href="https://developer.ibm.com/articles/j-5things12/">
Everyday Java tools</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_tools',position:['above']">
Java tools for everyday things, like parsing, timing, and sound<br><ul>
<li>1. StAX</li>
<li>2. ServiceLoader</li>
<li>3. Scanner</li>
<li>4. Timer</li>
<li>5. JavaSound</li>
</ul>
</div>


<div id = "ibm_11">
<a href="https://developer.ibm.com/articles/j-5things11/">
Command-line flags for the JVM
</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_11',position:['above']">
Fine-tune JVM performance and the Java runtime<br><ul>
<li>1. DisableExplicitGC</li>
<li>2. HeapDumpOnOutOfMemoryError</li>
<li>3. bootclasspath</li>
<li>4. verbose</li>
<li>5. Command-line -X</li>
</ul>
</div>


<div id = "ibm_typ">
<a href="https://developer.ibm.com/articles/j-java8idioms8/">
Java knows your type</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_typ',position:['above']">
Learn how to use type inference in lambda expressions, and get tips for improving parameter naming<br><ul>
<li>Explicit types and redundancy</li>
<li>Type inference in Java 8</li>
<li>Trust the compiler</li>
<li>Benefits of type inference</li>
<li>Type inference and readability</li>
<li>Naming parameters</li>
<li>Limits of type inference</li>
<li>Expanding type inference</li>
<li>Limits of inference</li>
<li>Method references to the rescue</li>
</ul>
</div>


<div id = "ibm_casc">
<a href="https://developer.ibm.com/articles/j-java8idioms9/">
Cascading lambdas (Venkat Subramaniam)
</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_casc',position:['above']">
Reusable functions help make your code highly concise, but does conciseness ever go too far?<br><ul>
<li>Mysterious syntax</li>
<li>Higher-order functions</li>
<li>Example 1: A function that receives a function</li>
<li>Example 2: A Function that returns a function</li>
<li>Creating reusable functions</li>
<li>Creating and reusing lambda expressions</li>
<li>A recipe for conciseness</li>
<li>Understanding cascading lambdas</li>
</ul>
</div>


<div id = "ibm_clos">
<a href="https://developer.ibm.com/articles/j-java8idioms10/">
Using closures to capture state (Venkat Subramaniam)
</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_clos',position:['above']">

Lambdas are stateless, but your programs don''t have to be<br><ul>
<li>The stateless life</li>
<li>Why we need state</li>
<li>Lexical scoping</li>
<li>Lexical scoping in a lambda expression</li>
<li>How closures carry state</li>
<li>Closure lunch break</li>
<li>Using closures</li>
</ul>
</div>


<div id = "ibm_pur">
<a href="https://developer.ibm.com/articles/j-schedule/">
Functional purity (Venkat Subramaniam)
</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_pur',position:['above']">
Understanding streams and mutables in the functional pipeline<br><ul>
<li>Functional pipelines and the Stream API</li>
<li>Lazy evaluation</li>
<li>Stream processing</li>
<li>Parallelization</li>
<li>The rules of functional purity</li>
<li>Why functional purity matters</li>
<li>Avoid shared mutability</li>
</ul>
</div>


<div id = "ibm_api">
<a href="https://developer.ibm.com/articles/api-design-practices-for-java/">
API design practices for Java
</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_api',position:['above']">
Make your API usable in both modular and non-modular Java environments<br><ul>
<li>Java packages must be a cohesive, stable unit</li>
<li>Minimize package coupling</li>
<li>Interfaces preferred over classes</li>
<li>Avoid statics</li>
<li>Singletons</li>
<li>Avoid class loader assumptions</li>
<li>Don't assume permanence</li>
<li>Clearly document type roles for API consumers and API providers</li>
</ul>
</div>


<div id = "ibm_ms">
<a href="https://developer.ibm.com/technologies/java/articles/cl-evolution-microservices-patterns">
Beyond buzzwords: A brief history of microservices patterns</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_ms',position:['above']">
Explore the impact of past software design patterns on the creation of microservices<br><ul>
<li>Starting at the beginning</li>
<li>Where does this leave us</li>
<li>Living in the corporate world</li>
<li>Putting the ops back in DevOps</li>
<li>What's next</li>
</ul>
</div>


<div id = "ibm_mems">
<a href="https://developer.ibm.com/articles/j-leaks/">
Handling memory leaks in Java programs</a></div>
<div class="TTip" dojoType="dijit.Tooltip" connectId='ibm_mems',position:['above']">
Find out when memory leaks are a concern and how to prevent them<br><ul>
<li>How memory leaks manifest themselves in Java programs</li>
<li>When are memory leaks a concern?</li>
<li>Determining if an application has memory leaks</li>
<li>A memory leak example</li>
<li>Finding the cause</li>
<li>Applying a fix</li>
<li>Preventing memory leaks</li>
</ul>
</div>
<p></details><p>
<br>

<details><summary>
<span class='mHG'>SO Java 'interop' Qns -></span></summary>
<p>
<a href="https://stackoverflow.com/questions/2794242">static-nested-class-visibility-issue-with-scala-java-interop</a><br>
<a href="https://stackoverflow.com/questions/1452568">what-parts-of-a-java-application-should-be-written-in-scala</a><br>
<a href="https://stackoverflow.com/questions/1519838">java-scala-interop-transparent-list-and-map-conversion</a><br>
<a href="https://stackoverflow.com/questions/3282653">how-do-you-call-a-scala-singleton-method-from-java</a><br>
<a href="https://stackoverflow.com/questions/43980110">using-kotlin-class-in-java-cannot-find-symbol</a><br>
<a href="https://stackoverflow.com/questions/3688730">how-to-pass-a-typed-collection-from-clojure-to-java</a><br>
<a href="https://stackoverflow.com/questions/7788363">accessing-scala-object-fields-from-java</a><br>
<a href="https://stackoverflow.com/questions/4460542">are-sealed-classes-enforced-in-java-and-if-yes-how</a><br>
<a href="https://stackoverflow.com/questions/9638492">conversion-of-scala-map-containing-boolean-to-java-map-containing-java-lang-bool</a><br>
<a href="https://stackoverflow.com/questions/22380486">how-to-convert-a-scala-arraybyte-to-java-byte</a><br>
<a href="https://stackoverflow.com/questions/12907475">noclassdeffounderror-using-scala-class-from-java</a><br>
<a href="https://stackoverflow.com/questions/21238104">what-are-the-possible-approaches-to-common-lisp-java-interoperability</a><br>
<a href="https://stackoverflow.com/questions/10414075">how-to-call-a-clojure-variadic-function-from-java</a><br>
<a href="https://stackoverflow.com/questions/3845737">how-can-i-pass-a-scala-object-reference-around-in-java</a><br>
<a href="https://stackoverflow.com/questions/9488367">clojure-macro-for-calling-java-setters-based-on-a-map</a><br>
<a href="https://stackoverflow.com/questions/994416">how-to-pass-a-class-object-from-scala-to-java</a><br>
<a href="https://stackoverflow.com/questions/3022865">calling-java-vararg-method-from-scala-with-primitives</a><br>
<a href="https://stackoverflow.com/questions/3093881">how-to-declare-scala-method-so-that-it-can-be-called-from-java-using-varargs-sty</a><br>
<a href="https://stackoverflow.com/questions/402408">usefulness-of-jni</a><br>
<a href="https://stackoverflow.com/questions/14027636">in-scala-how-to-override-a-method-that-takes-a-java-util-map</a><br>
<a href="https://stackoverflow.com/questions/11276706">what-do-user-defined-value-classes-look-like-from-java</a><br>
<a href="https://stackoverflow.com/questions/3293318">what-is-scala-trying-to-tell-me-and-how-do-i-fix-this-required-java-util-lis</a><br>
<a href="https://stackoverflow.com/questions/32525255">passing-a-clojure-function-as-java-util-function</a><br>
<a href="https://stackoverflow.com/questions/32525255">passing-a-clojure-function-as-java-util-function</a><br>
<a href="https://stackoverflow.com/questions/7533389">how-can-i-implement-a-java-interface-with-variadic-methods-in-scala</a><br>
<p>
</details>
<p>
<details><summary>
<span class='mHG'>SO Java 'tricks' Qns -></span></summary>
<p>
<a href="https://stackoverflow.com/questions/182278/is-there-a-way-to-simulate-the-c-friend-concept-in-java/18634125#18634125">is-there-a-way-to-simulate-the-c-friend-concept-in-java</a>(good res.)<br>
<a href="https://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream/22269778#22269778">custom-thread-pool-in-java-8-parallel-stream</a><br>
<a href="https://stackoverflow.com/questions/295224/what-are-major-differences-between-c-sharp-and-java/295248#295248">what-are-major-differences-between-c-sharp-and-java</a><br>
<a href="https://stackoverflow.com/questions/453610/javas-virtual-machine-and-clr/480362#480362">javas-virtual-machine-and-clr</a><br>
<a href="https://stackoverflow.com/questions/2163411/is-java-really-slow/2163570#2163570">is-java-really-slow</a><br>
<a href="https://stackoverflow.com/questions/16106260/thread-safe-singleton-class/16106598#16106598">thread-safe-singleton-class</a><br>
<a href="https://stackoverflow.com/questions/22581163/hidden-performance-cost-in-scala/22604185#22604185">hidden-performance-cost-in-scala</a><br>
<a href="https://stackoverflow.com/questions/19557829/faster-alternatives-to-javas-reflection/19563000#19563000">faster-alternatives-to-javas-reflection</a><br>
<a href="https://stackoverflow.com/questions/40119/how-to-find-a-java-memory-leak/40285#40285">how-to-find-a-java-memory-leak</a><br>
<a href="https://stackoverflow.com/questions/2308979/exception-handling-question/2308988#2308988">exception-handling-question</a><br>
<a href="https://stackoverflow.com/questions/2261947/are-there-alternatives-to-cglib/9823788#9823788">are-there-alternatives-to-cglib</a><span style='color: red'>(**good resource)</span><br>
<a href="https://stackoverflow.com/questions/610458/why-isnt-calling-a-static-method-by-way-of-an-instance-an-error-for-the-java-co/610674#610674">why-isnt-calling-a-static-method-by-way-of-an-instance-an-error-for-the-java-co</a><br>
<a href="https://stackoverflow.com/questions/4521983/java-executorservice-that-blocks-on-submission-after-a-certain-queue-size/4522411#4522411">java-executorservice-that-blocks-on-submission-after-a-certain-queue-size</a><br>
<a href="https://stackoverflow.com/questions/1069528/method-chaining-inheritance-don-t-play-well-together/1070556#1070556">method-chaining-inheritance-don-t-play-well-together</a><br>
<a style="color: red;" href="https://stackoverflow.com/questions/15496/hidden-features-of-java/101659#101659">hidden-features-of-java</a><br>
<a style="color: red;" href="https://stackoverflow.com/questions/5773853/asynchronous-programming-best-practices/5778058#5778058">asynchronous-programming-best-practices</a><br>
<a href="https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class/4732586#4732586">why-are-only-final-variables-accessible-in-anonymous-class</a><br>
<a href="https://stackoverflow.com/questions/249009/do-you-use-curly-braces-for-additional-scoping/249013#249013">do-you-use-curly-braces-for-additional-scoping</a><br>
<a href="https://stackoverflow.com/questions/48033944/how-are-coroutines-implemented-in-jvm-langs-without-jvm-support/48034412#48034412">how-are-coroutines-implemented-in-jvm-langs-without-jvm-support</a><br>
<a href="https://stackoverflow.com/questions/148681/unloading-classes-in-java/148762#148762">unloading-classes-in-java</a><br>
<a href="https://stackoverflow.com/questions/4519557/is-there-a-way-to-throw-an-exception-without-adding-the-throws-declaration/18408831#18408831">is-there-a-way-to-throw-an-exception-without-adding-the-throws-declaration</a><br>
<a href="https://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream/27752931#27752931">custom-thread-pool-in-java-8-parallel-stream</a><br>
<a href="https://stackoverflow.com/questions/920386/how-to-allow-running-only-one-instance-of-a-java-program-at-a-time/920403#920403">how-to-allow-running-only-one-instance-of-a-java-program-at-a-time</a><br>
<a href="https://stackoverflow.com/questions/12357136/reference-jars-inside-a-jar/12357544#12357544">reference-jars-inside-a-jar</a><br>
<a style="color: red;" href="https://stackoverflow.com/questions/533102/what-strategy-do-you-use-for-package-naming-in-java-projects-and-why/534501#534501">what-strategy-do-you-use-for-package-naming-in-java-projects-and-why</a><br>
<a href="https://stackoverflow.com/questions/3502674/why-is-reflection-slow/3502710#3502710">why-is-reflection-slow</a><br>
<a href="https://stackoverflow.com/questions/7603400/how-to-make-a-rounded-corner-image-in-java/7603815#7603815">how-to-make-a-rounded-corner-image-in-java</a><br>
<a href="https://stackoverflow.com/questions/534648">how-to-daemonize-a-java-program</a><br>
<a href="https://stackoverflow.com/questions/12028925">private-constructor-to-avoid-race-condition</a><br>
<a href="https://stackoverflow.com/questions/4692076">speed-up-application-start-by-adding-own-application-classes-to-classes-jsa</a><br>
<p>
</details>
<p>


<details><summary>
<span class='mHG'>Scala lnks -></span></summary>
<p>
<a href="https://alvinalexander.com/scala/how-to-create-multiline-strings-heredoc-in-scala-cookbook">Alvin Alexander (cookbook author)</a><br>
<a href="https://www.scala-lang.org/old/node/104.html">old 'Tour of Scala' @ scala-lang</a><br>
<a href="http://allaboutscala.com/">Scala tutorials (offers online book) </a><br>
<a href="https://www.journaldev.com/7830/scala-pattern-matching-with-case-statement">Some articles (well written)</a><br>
<a href="https://medium.com/@thejasbabu/scala-pattern-matching-9c9e73ba9a8a">Medium article (links to others)</a><br>
</details>
<p>
<hr>
<center><h4>misc:</h4></center>
<p>

<a href="wrox.com/go/javaprog24hr2e">WROX Bk</a> (24 hr) <br>
 		Ch 22 - JTable for grid UI  (22-3 streams data into map/reduce/JTable model)<br>
 		Ch 20 - Streaming APIs<br><br>
FX Grid code example with <a id="treePop" href="http://stackoverflow.com/questions/24042136/java-fx8-treeview-in-a-table-cell">treeView popup</a> (stackoverflow)<br>
<!--div data-dojo-type="dijit/Tooltip" data-dojo-props="connectId:'treePop'"-->
<div dojoType="dijit.Tooltip" data-dojo-props="connectId:'treePop'">
	when a table cell is clicked you get a popup with a treeview</a> loaded in it</div>
<br>
The Java Language Specification, <a href='http://docs.oracle.com/javase/specs/jls/se8/html/index.html'>Java SE 8</a> (James Gosling et al.)
<br>
The Java <a href='http://docs.oracle.com/javase/tutorial'>Tutorials</a>
<br>
Site with some useful code examples like logging & File Encryption (uses <a href='http://www.codejava.net/coding/file-encryption-and-decryption-simple-example'>Java Crypto</a> Extension (JCE) framework)
<br>
https://www.reddit.com/r/javaexamples/
<br>
Oracle's java8 <a href='http://www.oracle.com/technetwork/java/newtojava/java8book-2172125.pdf'>newtojava</a> book free chapters (many gd examples incl fx)
<br>
Introduction to Programming Using Java, 7th ed., August 2014 - dated but lots of <a href='http://math.hws.edu/javanotes/'>gd chapters</a>
(free online) incl threads, networking, generic proramming etc.
<br>Kode Java - website w/code examples like <a href='https://kodejava.org/category/java-se-api/base-libraries/java-zip-and-gzip/'>Using zip</a>
<br>https://medium.com/codefx-weekly/jsr-376-java-9-optional-multi-release-artifacts-git-fixup-and-jenv-c37d0d69c536
<br>http://jdeferred.org/
<br>https://blog.jevsejev.io/2017/02/19/java-libraries-you-cannot-miss-in-2017/
<br>https://www.javacodegeeks.com/
<br>https://www.mkyong.com/
<br>https://www.infoq.com/
<br>"Java EE is obsolete and even Sprint is bloated. <a href='https://networknt.github.io/light-java/architecture/jee-is-dead/'>Microservices in docker</a> will be the future."
<br>https://github.com/networknt/light-java-example/tree/master/performance
<hr>
<br>Java web <a href="http://zeroturnaround.com/rebellabs/the-curious-coders-java-web-frameworks-comparison-spring-mvc-grails-vaadin-gwt-wicket-play-struts-and-jsf/">frameworks comparison</a>: spring mvc | grails | vaadin | gwt | wicket | play | struts | jsf
<br>http://blog.paralleluniverse.co/2015/05/21/quasar-vs-akka/
<br>https://news.ycombinator.com/from?site=paralleluniverse.co
<br>https://hn.algolia.com/?query=functional%20java&sort=byPopularity&prefix=false&page=0&dateRange=pastYear&type=story
<br>

<hr>

<details><summary><span class='mHG'>Hashing Implementation Using java.util.Objects</span></summary>
<source>DZone</source>
<tags>Java</tags>

by Arun Pandey | Dec. 29, 16 Java Zone<br>
Just released, a free O'Reilly book on Reactive Microsystems: The Evolution of Microservices at Scale.<br>
Brought to you in partnership with Lightbend.<br>
<hr>
<p>
Most applications require an extensive hashing implementation, and writing a good hashing algorithm is
always a tedious job. To get rid of this ugly and tedious hashCode and equals implementation, Java
introduced an API called java.util.Objects in Java 7, which contains a set of utility methods and is useful
in combination with Object instances.
<p>
Now let's see an example to understand this cool feature.
Here, Person is a class that needs hashCode() and equals() method implementation.

<h2>Prior to Java 7</h2>

Using Java 6, we generate the equals() and hashCode() methods using the Eclipse IDE.

<h3>Person.java</h3>
<code><pre>
/**
4 * @author arun.pandey
5 */
6 public class Person {
7 String ssn;
8 String name;
9
10 public Person(){}
11
12 public Person(String ssn, String name){
13 this.ssn = ssn;
14 this.name = name;
15 }
16
17 public String getId() {
18 return ssn;
19 }
20
21 public void setId(String id) {
22 this.ssn = id;
23 }
24
25 public String getName() {
26 return name;
27 }
28
29 public void setName(String name) {
30 this.name = name;
31 }
32
33 /* (non-Javadoc)
34 * @see java.lang.Object#hashCode()
35 */
36 @Override
37 public int hashCode() {
38 final int prime = 31;
39 int result = 1;
40
41 result = prime * result + ((name == null) ? 0 : name.hashCode());
42 result = prime * result + ((ssn == null) ? 0 : ssn.hashCode());
43 return result;
44 }
45
46 /* (non-Javadoc)
47 * @see java.lang.Object#equals(java.lang.Object)
48 */
49 @Override
50 public boolean equals(Object obj) {
51 if (this == obj)
52 return true;
53
54 if (obj == null)
55 return false;
56
57 if (getClass() != obj.getClass())
58 return false;
59
60 Person other = (Person) obj;
61
62 if (name == null) {
63 if (other.name != null)
64 return false;
65 } else if (!name.equals(other.name))
66 return false;
67
68 if (ssn == null) {
69 if (other.ssn != null)
70 return false;
71 } else if (!ssn.equals(other.ssn))
72 return false;
73
74 return true;
75 }
76 }
</pre></code>

<h2>Java 7 Implementation</h2>
<p>
Now let's see the same implementation using Java 7 (java.util.Objects) as below.

<h3>Person.java</h3>
<code><pre>
1 package hashingDemo;
2
3 import java.util.Objects;
4
5 /**
6 * @author arun.pandey
7 */
8 public class Person {
9 String ssn;
10 String name;
11
12 public Person(){}
13
14 public Person(String ssn, String name){
15 this.ssn = ssn;
16 this.name = name;
17 }
18
19 public String getId() {
20 return ssn;
21 }
22 public void setId(String id) {
23 this.ssn = id;
24 }
25 public String getName() {
26 return name;
27 }
28 public void setName(String name) {
29 this.name = name;
30 }
31
32 @Override
33 public int hashCode() {
34 return java.util.Objects.hash(getId(), getName());
35 }
36
37 @Override
38 public boolean equals(Object obj){
39 if (obj == this) {
40 return true;
41 }
42
43 if (obj instanceof Person) {
44 Person other = (Person) obj;
45 return Objects.equals(ssn, other.ssn) && Objects.equals(name, other.name);
46 }
47 return false;
48 }
49 }
</pre></code>

Test the code to evaluate the above implementation.
<p>

<h2>HashingTest.java</h2>
<code><pre>
1 package hashingDemo;
2
3 import org.apache.commons.logging.Log;
4 import org.apache.commons.logging.LogFactory;
5 import org.junit.Test;
6 import junit.framework.Assert;
7
8 /**
9 * @author arun.pandey
10 */
11 public class HashingTest {
12 public static final Log LOG = LogFactory.getLog(HashingTest.class);
13
14 @Test
15 public void testHashing() {
16
17 Person person1 = new Person("xxxx123", "Person1");
18 Person person2 = new Person("xxxx234", "Person2");
19
20 LOG.info("person1 HashCode ==>> " +person1.hashCode());
21 LOG.info("person2 HashCode ==>> " +person2.hashCode());
22
23 Assert.assertFalse(person1.hashCode() == person2.hashCode());
24 Assert.assertFalse("Both are same employee...", person1.equals(person2));
25
26 Person person3 = new Person("xxxx567", "Person3");
27 Person person4 = new Person("xxxx567", "Person4");
28
29 LOG.info("person3 HashCode ==>> " +person3.hashCode());
30 LOG.info("person4 HashCode ==>> " +person4.hashCode());
31
32 Assert.assertEquals(person3.hashCode(), person4.hashCode());
33 Assert.assertTrue("Both are not same employee...",person3.equals(person4));
34 }
35 }
</pre></code>

And test passed as expected. Try it in your next hashing and equals implementation to have better and
cleaner code.<p>
I hope this will add a nice feature to your coding. Happy learning!<p>
<hr>
</details>

<p>


<details><summary><span class='mHG'>
How and Why to Serialialize Lambdas</span></summary>
<source>vanillajava.blogspot.com</source>
<tags>Java</tags>

<h2>Overview</h2>
Serializing lambdas can be useful in a number of use cases such as persisting
configuration, or as a visitor pattern [https://en.wikipedia.org/wiki/Visitor_pattern] to remote
resources.

For example, so I want to access a resource on a remote Map, I can use get/put, but
say I just want to return a field from the value of a Map, I can pass a lambda as a
visitor to extract the information I want.


<code><pre>

MapView userMap =
	Chassis.acquireMap("users", String.class, UserInfo.class);
	userMap.put("userid", new UserInfo("User's Name"));

// print out changes
userInfo.registerSubscriber(System.out::println);

// obtain just the fullName without downloading the whole object
String name= userMap.applyToKey("userid", u -> u.fullName);

// increment a counter atomically and trigger
// an updated event printed with the subscriber.
userMap.asyncUpdateKey("userid", ui -> {
	ui.usageCounter++;
	return ui;
	});

	// increment a counter and return the userid
	int count = userMap.syncUpdateKey("userid",
	ui -> { ui.usageCounter++; return ui;},
	ui -> ui.usageCounter);
</pre></code>


As you can see, it is easy to add various simple functions, or call a method to perform
the action you need. The only problem is that lambdas by default are not serializable.

<h2>Serializable Lambdas</h2>

A simple way to make a lambda serializable is to add a cast of & Serializable to
a variable referring to an implementation of the lambda.

<code><pre>
Function<UserInfo, String> fullNameFunc = (Function<UserInfo,String> & Serializable) ui -> ui.fullNa

String fullName = userInfo.applyToKey("userid", fullNameFunc);
</pre></code>


As you can see this introduces a lot of boiler plate. A key reason to use lambdas is to
avoid boiler plate code so what is the alternative?

<h2>Making lambdas serializable in your API.</h2>

Unfortunately the standard APIs cannot be changed or sub-classes to add this but if
you have your own API, you can use a Serializable interface.

<code><pre>
@FunctionalInterface
public interface SerializableFunction<I, O> extends Function<I, O>, Serializable {
}
</pre></code>

	This interface can be used as a parameter type.

<code><pre>
default <R> R applyToKey(K key, @NotNull SerializableFunction<E, R> function) {
	return function.apply(get(key));
}
</pre></code>

The user of your API doesn't have to explicitly say that the lambda is serializable.

<code><pre>
// obtain just the fullName without downloading the whole object

String name= userMap.applyToKey("userid", u -> u.fullName);
</pre></code>
The remote implementation serializes the lambda, executes it on the server and returns the result.


Similarly, there is methods for applying a lambda to the map as a whole.

To support queries, you can't use the built in stream() API if you want to implictly add
Serializable. However, you can create one which is as similar as possible.

<code><pre>
Map> collect = userMap.entrySet().query()
.filter(e -> e.getKey().matches("u*d"))
.map(e -> e.getValue())
.collect(Collectors.groupingBy(u -> u.usageCounter));
</pre></code>

or as a filtered subscription.

<code><pre>
// print userid which have a usageCounter > 10 each time it is incremented. userMap.entrySet().q
.filter(e -> e.getValue().usageCounter > 10)
.map(e -> e.getKey())
.subscribe(System.out::println);
</pre></code>

What makes this different from the regular stream API, is the data could be
distributed across many servers and you get a call back when that changes on any
server. Only the data you are interested in is sent across the network as the filter and
map is being applied on the server.

<h2>Java Serialization</h2>

Java Serialization is a good generalised, backwardly compatible serialization library.
Two of the most common problems that alternatives try to solve is performance and
cross platform serialization.

In the example above, fullNameFunc serializes to over 700 bytes and there is very
limited options to optimise this to either reduce the size of the message or the amount
of garbage it produces. By comparison, a straight forward binary YAML serialization
uses 348, with more options to optimise the serialization.


This raises the problem of how to serialize a lambda using an alternative, or cross
platform or faster serialization format.


<h2>Alternative Serialization</h2>


You can hook into the current serialization mechanism. This is not supported, and it
could change at any time but there is not other supported way to do this.

Never the less you can do this

<code><pre>

	Method writeReplace = lambda.getClass()
	.getDeclaredMethod("writeReplace");

	writeReplace.setAccessible(true);
	SerializedLambda sl = (SerializedLambda) 
	writeReplace.invoke(lambda);

</pre></code>


This gives you an object you can inspect to extract the contents of the lambda.
Either to see what method it calls, or to serialize it. On the deserialization side, you
can recreate this object and can <b>readResolve</b> on that object.

<h2>Standard API</h2>

Currently, there is no standard API for introspection of a lambda. This is done
deliberately so that in future the implementation can be changed, although there is no
public JEP to do so. However, like Unsafe which is internal API, I look forward to the
day when we can use a standard API rather than having to dig into the internals of
the JVM to implement solutions.

<h2>Conclusions</h2>

With some changes to your API you can make serializing lambdas largely transparent
to the developer. This makes implementing simple distributed systems easier to use
while giving you options to optimise how this is done.

Posted 22nd July 2015 by Peter Lawrey

</details>

<p>

  <details>
    <summary><span class='mHG'>Square's Retrofit & Netflix's Feign (decode JSON to/from java)</span></summary>

from http://blog.paralleluniverse.co/2014/05/15/modern-java-pt3/ ->
<br><br>
An interesting HTTP client API is Retrofit by Square. As you've seen, JAX-RS Client can 
automatically serialize and deserialize Java objects to JSON objects (or XML). 
<br><br>
Retrofit takes this automatic Java/REST translation (which, BTW, is not always a good thing; 
domain translations are often particularly leaky abstractions, but they're helpful if you keep 
yourself constrained to simple protocols) a step further, and translates the service target 
URL - not just the payload - to Java interfaces. 
<br><br>

Unfortunately, Retrofit uses the same annotation 
names as JAX-RS (server), only defined in a different package, which would make our example 
a bit ugly. Luckily, Retrofit has a clone/derivatice called Feign, by Netflix. 
<br><br>
The differences between Feign and Retrofit are not entirely clear to me. 
Although it seems that Retrofit is more widely adopted (it is older), while 
Feign is more easily customizable. In any case, the two are extremely similar, 
and can be used pretty much interchangeably
<br><br>
(jackson to decode JSON to/from java)
<br><br>

<code><pre>
Feign.Builder feignBuilder = Feign.builder()
        .contract(new JAXRSModule.JAXRSContract()) // we want JAX-RS annotations
        .encoder(new JacksonEncoder()) // we want Jackson because that's what Dropwizard uses already
        .decoder(new JacksonDecoder());
env.jersey().register(new ConsumerResource(feignBuilder));
	</pre></code><br>

Our consumer service will now look like this:
<br>
<code><pre>
@Path("/consumer")
@Produces(MediaType.TEXT_PLAIN)
public static class ConsumerResource {
    private final HelloWorldAPI hellowWorld;

    public ConsumerResource(Feign.Builder feignBuilder) {
        this.hellowWorld = feignBuilder.target(HelloWorldAPI.class, "http://localhost:8080");
    }

    @Timed
    @GET
    public String consume() {
        Saying saying = hellowWorld.hi("consumer");
        return String.format("The service is saying: %s (id: %d)",  saying.getContent(), saying.getId());
    }
}
	</pre></code>
<br>
<span class='mHG' style="color: red;">mpt: we shd look for current eq using Protocol Buffers/non-JSON/perhaps native binary fmt</span>

</details>


<p>

<details><summary><span class='mHG'>Creating / Using RuntimeExceptions</span></summary>

	Exceptions
 If the client cannot do anything to recover from the exception, make it an unchecked exception. <br>
To create a custom unchecked exception, extend java.lang.RuntimeException

<code><pre>

public class ListTooLargeException extends RuntimeException{
    public ListTooLargeException(String message) {
        super(message);
    }
}
</pre></code>

	For unchecked exception, try and catch the exception is optional.
<code><pre>
public class CustomerService {
    public void analyze(List<String> data) {
        if (data.size() > 50) {
            throw new ListTooLargeException("List can't exceed 50 items!");            //runtime exception
        }    }
</pre></code>

</details>

<p>

<details><summary><span class='mHG'>USING Optional.empty()</span></summary>

<code><pre>

	Optional<String> findName(String name){
*		return name !=null ? Optional.of(nameList.get(nameList.indexOf(name.toLowerCase()))) : Optional.empty();
	}
	searchedNameOptional.ifPresent(System.out::println);
</pre></code>

<br>-> * can be repl w/
<br>
<code><pre>
	return Optional.ofNullable(name).map(val->nameList.get(nameList.indexOf(val.toLowerCase()))).orElse("NA");
</pre></code>
   note-> THIS RETURNS A STRING (since we cover both eventualities of the optional)

<br>-> using an (anon here) Supplier in above->
<br>
<code><pre>
	.orElseGet(()->"NA");
</pre></code>

<br>-> using a filter w/Optional:
<br>
<code><pre>
	searchedNameOptional.filter(val->val.contains("am")).ifPresent(
</pre></code>
<br>
</details>

<p>
<details><summary><span class='mHG'>sun.misc.unsafe snippet/link</span></summary>
<p>
sun.misc.unsafe <a href='http://hg.openjdk.java.net/jdk/jdk/raw-file/51a7629b68cf/jdk/src/jdk.unsupported/share/classes/sun/misc/Unsafe.java'>.java</a> file
<p>

<code><pre>
the Unsafe 
     * @throws  SecurityException  if a security manager exists and its
     *          {@code checkPropertiesAccess} method doesn't allow
     *          access to the system properties.
     */
...import jdk.internal.misc.VM;...

    @CallerSensitive
    public static Unsafe getUnsafe() {
        Class<?> caller = Reflection.getCallerClass();
        if (!VM.isSystemDomainLoader(caller.getClassLoader()))
            throw new SecurityException("Unsafe");
        return theUnsafe;
    }    }
</pre></code>

</details>

<p>

<details>
  <summary><span class='mHG'>HTML / CSS Stuff</span></summary>
<br>

https://css-tricks.com/guides/<br>
https://codepen.io/<br>
https://developer.mozilla.org<br><br>

<span class='mHG'>Using the &lt;abbr&gt; tag </span>
<p>
The following text uses the abbr tag; which shows a tooltip automatically : <br>
<abbr>
   <a href="http://www.Acronyms.net/terms/t/Three-Letter-Acronym/"
      title="Three Letter Acronym
The title attribute may be coded with the expanded meaning of the acronym or abbreviation in the content of the <abbr> tag. However, browsers tend to ignore the title attribute of the <abbr> tag. To have the browser pop up tool tips with the meaning of acronyms or abbreviations, wrap the <abbr> tags inside <a> tags with title attributes instead, as described by Acronyms .net. Line breaks in the title attribute are preserved. Therefo
Humpty Dumpty sat on a wall.
   Humpty Dumpty had a great fall.
">TLA</a>
</abbr>
<p><p>

<span class='mHG'>Using the &lt;dl&gt;, &lt;dt&gt; and &lt;dd&gt; tags</span>
<dl>
   <dt>Term: <dfn>&lt;dl&gt; tag</dfn></dt>
   <dd>Definition: The &lt;dl&gt; tag is used to code a description list consisting
   of description terms alternating with groups of one or more detail descriptions.</dd>
   <dt>Term: <dfn>&lt;dt&gt; tag</dfn></dt>
   <dd>Definition: The &lt;dt&gt; tag is used to code a description term
   in a description list, leading into one or more detail description elements.</dd>
   <dt>Term:  <dfn>&lt;dd&gt; tag</dfn></dt>
   <dd>Definition: The &lt;dd&gt; detail description tag is used to code the
   description of an item inside a <b>dl</b> element for a description list.</dd>
</dl>


<span class='mHG'>Using the &lt;mark&gt; tag</span>
<p>You searched for "<mark>url link</mark>"</p>
<p>1 result:</p>
<p>&lt;a&gt; tag example:
<code>&lt;a href="<i>target </i><mark><i>url</i>"&gt;<i>link</i></mark><i> text</i>&lt;/a&gt;</code></p>



<span class='mHG'>CSS Simple Tooltip</span>

<div class="demo">
  <p><a href="#" data-tooltip="I'm the tooltip text.">I'm a link with a tooltip.</a></p>

  <p><button data-tooltip="I'm the tooltip text.">I'm a button with a tooltip (doesn't work in IE)</button></p>
</div>

<hr>

    <table class='CSS3_Ex'>
      <tr class='CSS3_Ex'>
        <th>Item</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Total</th>
      </tr>
      <tr>
        <td>Coffee mug</td>
        <td>$10.00</td>
        <td>5</td>
        <td>$50.00</td>
      </tr>
      <tr>
        <td>Polo shirt</td>
        <td>$20.00</td>
        <td>5</td>
        <td>$100.00</td>
      </tr>
      <tr>
        <td>Red stapler</td>
        <td>$9.00</td>
        <td>4</td>
        <td>$36.00</td>
      </tr>
      <tr>
        <td colspan="3">Subtotal</td>
        <td>$186.00</td>
      </tr>
      <tr id='CSS3_ExG'>
        <td colspan="3">Shipping</td>
        <td>$12.00</td>
      </tr>
      <tr>
        <td colspan="3">Total Due</td>
        <td>$198.00</td>
      </tr>
    </table>


</details>


<hr>

<br>on the lighter side...
<br>
Startup <a href='https://playbook.samaltman.com/'>Playbook</a>
<br>
Startup <a href='http://www.paulgraham.com/articles.html'>Reading/Links</a>
<br>
[/r/bestof] /u/divbase explains a lot of <a href='https://np.reddit.com/r/bestof/comments/57e9hd/udivbase_explains_a_lot_of_things_he_did_wrong/'>things he did wrong with his failed startup<br>

<a href='http://businessofsoftware.org/2013/02/gail-goodman-constant-contact-how-to-negotiate-the-long-slow-saas-ramp-of-death/'>Bootstraping</a> a SAAS
<br>
<a href='http://startuppulse.net/'>Startup Pulse</a>
<br>

  
<p>

<br>
Public <a href="www.programmableweb.com/apis/directory">Web Services</a> Offering REST data<br>
    Herbal Fruit Jams http://salliesgreatest.com <br>
    Fairy Tale Brownies (brownies.com) [[
    Has a good-looking coll of blondies too.]]<br>
    Blue Martini Companies -> Taubman Centers, Michigan CEO Mark Vasu (another link to someone Mitsu calls "Stinker Pinker")<br><br>

<p>

<hr><br>
<center><h1>rec</h1></center>
<p>

<a href='https://gbt.org/text/sayers.html'>The Lost Tools Of Learning</a> By Dorothy Sayers

<p>
<details>
  <summary><span class='mHG'>The new stuff to watch</span></summary>

<h2>Brokenwood Mysteries: Series 4</h2><br>
Neill Rea (Actor)<br>
Filmed amid the beautiful landscape of New Zealand's North Island, <br>
these four feature-length mysteries show that murder can haunt even the most idyllic locations.<br>
<hr> <br>
from an AMZN review:<br>
<br>
The last three years have taken a dreadful toll on my favorite British policemen:<br>
nbsp;nbsp; "Foyle's War" ended in 2015 after eight seasons.<br>
nbsp;nbsp; "New Tricks" ended in 2015 after twelve seasons.<br>
nbsp;nbsp; "Inspector Lewis" ended in 2016 after nine seasons.<br>
nbsp;nbsp; "DCI Banks" ended in 2017 after five seasons.<br>
nbsp;nbsp; "George Gently" will end in 2017 after eight seasons.<br>
(we may come to look back on the last ten years as the Golden Age of British Police on Television.)<br>
<br>
The one bright spot is "Endeavour".<br>
This prequel to "Inspector Morse" is still going strong in it's fourth season.<br>
A fifth season has been announced for 2018.<br>
"Endeavour" debuted in 2013, but was set in 1965, when Constable Endeavour Morse joined the Oxford City Police.<br>
Promoted to Sergeant Morse in 1969.<br>
If it's still on the air ten years from now, we will see the return of "Inspector Morse".<br>
If it's still on the air eighteen years from now, we will see the return of Sergeant Robbie Lewis.<br>
<br>
WHY YOU SHOULD WATCH ENDEAVOUR ON BLU-RAY OR DVD, NOT PBS:<br>
I always knew Masterpiece Mystery broadcasts on PBS were edited, but was I was surprised to learn exactly how much was cut.<br>
<hr> <br>
<h2>Wallander</h2><br>
<br>
Kenneth Branagh returns to his remarkable Emmy and Golden Globe-nominated role <br>
as the soul-searching Swedish cop in Wallander III, with three gripping new Kurt Wallander <br>
cases based on the character created by bestselling novelist and father of the <br>
Nordic noir craze, Henning Mankell.<br>
<hr> <br>
<h2>Worricker</h2><br>
<br>
2013<br>
Page Eight, Turks & Caicos, and Salting the Battlefield form The Worricker Trilogy<br>
three gripping films that follow the exploits of Worricker<br>
from MI5 headquarters in London to exile on a Caribbean island to life on the run <br>
with his former lover and fellow agent Margot Tyrrell.<br>
The all-star cast includes Oscar winner Christopher Walken.<br>
<hr> <br>
<h2>Arthur & George</h2><br>
<br>
2015<br>
Martin Clunes (Doc Martin) stars as Sir Arthur Conan Doyle, the creator of <br>
Sherlock Holmes, in a real-life case that inspired the great author to put <br>
down his pen and turn detective.<br>
Co-starring  Art Malik<br>
Inspired by a true case, Arthur & George is adapted from Julian Barness <br>
acclaimed novel of the same name<br>
<hr> <br>
List of Masterpiece Mystery! <a href="https://en.wikipedia.org/wiki/List_of_Masterpiece_Mystery!_episodes">episodes</a><br>
List of Masterpiece Contemporary <a href="https://en.wikipedia.org/wiki/List_of_Masterpiece_Contemporary_episodes">episodes</a><br>
List of Masterpiece Theatre <a href="https://en.wikipedia.org/wiki/List_of_Masterpiece_Theatre_episodes">episodes</a><br>
nbsp;nbsp;nbsp;nbsp;Season 32 (2002-03)<br>
nbsp;nbsp;nbsp;nbsp;Almost a Woman<br>
nbsp;nbsp;nbsp;nbsp;Daniel Deronda<br>
nbsp;nbsp;nbsp;nbsp;The Forsyte Saga<br>
nbsp;nbsp;nbsp;nbsp;Foyle's War<br>
nbsp;nbsp;nbsp;nbsp;The Hound of the Baskervilles<br>
nbsp;nbsp;nbsp;nbsp;The Jury<br>
nbsp;nbsp;nbsp;nbsp;Me & Mrs. Jones<br>
nbsp;nbsp;nbsp;nbsp;My Uncle Silas II<br>
nbsp;nbsp;nbsp;nbsp;White Teeth<br>
List of Masterpiece Classic <a href="https://en.wikipedia.org/wiki/List_of_Masterpiece_Classic_episodes">episodes</a><br>
(2008 onwards)<br>

</details>

<hr> <br>
<br>

<b>test mpane -></b><br>
<div dojoType='com.trivedi.oPls.mPane' tags='java functional bookmark' title='Currying in Java'><br>https://stackoverflow.com/questions/tagged/java+currying<br></div>

	<!--div class="mBox film desi arthouse">
                              <a href="http://www.imdb.com/title/tt0246456/?ref_=wl_li_i">
		<img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNjEwOTIyMDI0OV5BMl5BanBnXkFtZTgwMTk3ODM3NDE@._V1_UY209_CR8,0,140,209_AL_.jpg"></a>
                          <div class="caption">
                               Bazaar (1982)
                          </div>
        </div-->
<p>

<br>    </tr></td></tbody></table>

	</div>
<!--LINKS END-->
	</div>


        <div id="monkeyAgendaDlg" dojoType="dijit.Dialog" title="A couple of notes about the monkeys' agenda..." style="width: 480px; height: 200px;">
			<div id="scrollable" dojoType="dijit.layout.ContentPane" style="padding: 5px;">
				<table class="innerTable">
					<tr>
						<td class="oPlsHackers"></td><td>
						<ul><li>Publish/subscribe (they're pushing this)</li>
						<li>dojo/Query (they're pushing this VERY heavily.  Why?  ask jeeves...)</li>
						<li>Watch for changed signatures (e.g. dojoConnect) they're trying to push their 'updated' ecmaCrap and say they're helping.  monkeys.</li>
						<li>ALMOST EVERYTHING IS BROKEN (works in older versions, the new stuff is broken) and now the effers are replacing the OLD (working ) code with their crap.  IF THE OLD STUFF IS NOT ACCESSIBLE we might have to abandon using dojo altogether (that effing AJ, I'll kick his a**)</li>
						</ul>
						<span style='color:firebrick;'>Caveat Emptor re: the links -> They're subject to revision.<br>  These are sites the monkeys are pushing/advocating.  The real good stuff they block.  Most of these are also outdated. <br>However, some seem okay. <br>The monkey agenda includes: anti-MSFT, pro-Python, pro-Gartner, pro-PHP... whatever.  monkeys.</span>
						</td>
					</tr>
					<tr>
						<td></td><td class="innerTable" align="center"><p>
							<button id="monkeyAgendaDlgOKbtn" dojoType="dijit.form.Button" onClick="dijit.byId('monkeyAgendaDlg').hide()">OK</button>
						</td>
					</tr>
				</table>
			</div>
        </div>

        <div id="myAboutDlg" dojoType="dijit.Dialog" title="About me...">
			<table class="innerTable"><tr>
				<img id='runRptBtn' height="300px" src="https://upload.wikimedia.org/wikipedia/commons/archive/0/09/20150318141725%21Rabindranath_with_Einstein.jpg">
					<p></tr><tr>
				<td align="center"><p>
					<button id="aboutDlgOKbtn" dojoType="dijit.form.Button" onClick="dijit.byId('myAboutDlg').hide()">OK</button>
				</td>
				</tr></table>
        </div>


        <div id="oPlsFormDesigner" dojoType="dijit.Dialog" title="oPls Form Designer" style="width: 90%; height: 90%;overflow:scroll;">
			<table style="table-layout: fixed" class="dijitReset innerTable"><tr>
<!--
Q: How to allow user to add logic to forms?

	1st, setup basic template allowing customizeable static HTML forms (dlgDisplay)
	Once that's operational, introduce flds drop-in capab & test
	Once that's operational, allow addition of logic to flds. (using a widget if necc)
	Needs to generate some kind of an instruction which shld be translateable to & fro both ways.
-->

  <button onClick="alert('ya');">Insert...</button> <button>Preview</button> <button>Save</button>

  <div style="font-family: sans-serif;background-color: antiquelace;" contentEditable=true>
      <br><center><h4>Welcome to the oPls Form Designer</h4></center><br>
      You can use custom styles to design the User Form by styling the individual html elements within this HTML webpage.
      Form elements (fields) are best inserted into Tables, as below.<br>
      To insert a field or to place a calculated value into the form, insert the pointer in the cell and click on the "Insert" button above.
      <br>
      You can create/save as many Form elements as you need.  To choose a "Default Form" (which is used when users view the data you will have to specify it in the Table Design (Admin View).
      <p>
      <center><table style="display: block;border: 1px solid black;width: 90%;">
        <tr>
          <td style="text-align:right;width: 30%;">CustomerNumber:</td><td style="width: 50%;">intFieldTwo</td>
        </tr>
        <tr>
          <td style="text-align:right;">CustomerDetails:</td><td style="width: 50%;">strFieldOne</td>
        </tr>
        <tr>
          <td style="text-align:right;">lastOrderAmt:</td><td style="width: 50%;">fld1</td>
        </tr>
        <tr>
          <td style="text-align:right;">If you place an order today, you qualify for a discount of <span style="color: red;">22%</span> on a total purchase of upto -> </td><td style="width: 50%;"><span style="color: red;">(fld1 * 50%)</span></td>
        </tr>
        <tr>
          <td style="text-align:right;">customerSince:</td><td style="width: 50%;">ldtFieldThree</td>
        </tr>
        
      </table></center>
				</tr>
				<tr><center><button id="oPlsFormDesignerOKbtn" dojoType="dijit.form.Button" onClick="dijit.byId('oPlsFormDesigner').hide()">OK</button>
				</center></tr>
			</table>
  </div><!--contentEditable-->

        </div>


	</div><!--center ContentPane-->

	  <div id="footerPanel"  dojoType="dijit.layout.ContentPane" layoutAlign="bottom" splitter="true" style="height: auto;background-color: rgba(0, 39, 94, 1); color: white;">
		<div ><small>Copyright (c) 2016-2020 <span id="aboutDiv">M. P. Trivedi</span>. All rights reserved.</small></div>
	  </div>



</div><!--BorderContainer-->



<!--mPane div-->
<div id="mPaneDiv" style="display:none;">

<div dojoType="dijit.form.Button" iconClass="oPlsDoneIcon" onClick="alert('testToggle')" label="testToggle"></div>

<p>
<div dojoType='com.trivedi.oPls.tblIcon' id='testIconItm' tblName='SysTable.opl' descTxt='itm.desc' imgUrl='oPlsSysTblIcon' accessLevel='READER' dataViews='dv1, dv2'>

</div>

<p>
<hr>

<div class='mPane-container'><div dojoType='com.trivedi.oPls.mPane' tags='java functional snippet' title='Lazy sequences implementation for Java 8'>                <br>                <br>by Tomasz Nurkiewicz (of Functors/Monad fame) -> <a href='https://www.nurkiewicz.com/2013/05/lazy-sequences-implementation-for-java-8.html'>article link</a> (a lib)                <br>                <br>                <br>(also see: https://www.nurkiewicz.com/2013/05/lazy-sequences-in-scala-and-clojure.html)                <br>                <br>                <br>Can be used for loading batches (pages) of data from database. Using ResultSet or Iterator is cumbersome but loading whole data set into memory often not feasible. An alternative involves loading first batch of data eagerly and then providing                a function to load next batches. Data is loaded only when it's really needed and we don't suffer performance or scalability issues.                <br>                <br>                <br>                <br><code><br> First let's define abstract API for loading batches of data from database:<br>public List<Record>loadPage(int offset, int max) {<br>    //load records from offset to offset + max<br>}<br><br>I abstract from the technology entirely, but you get the point. Imagine that we now define LazySeq<Record>that starts from row 0 and loads next pages only when needed:<br><br>public static final int PAGE_SIZE = 5;<br><br>private LazySeq<Record>records(int from) {<br>    return LazySeq.concat(<br>        loadPage(from, PAGE_SIZE), <br>        () -> records(from + PAGE_SIZE)<br>    );<br>}<br>                </code><br></div><div dojoType='com.trivedi.oPls.mPane' tags='javaScript functional bookmark' title='Lazy sequences implementation for Java 8'>                <br><p><br><br><br>Functional Programming <a href='https://marmelab.com/blog/2018/09/26/functional-programming-3-functor-redone.html'>in JavaScript</a>, Part 3: Introduction to Functors and Monads<br><br><p><br><br><br><br>            </div>            <br>            <br>            <div dojoType='com.trivedi.oPls.mPane' tags='java functional snippet' title='Using Map/FlatMap: Unfolding multiple Optional variables in Java 8'>                <br>                <br>                <br>\t                <code><br>I have the following problem. Let's say you have 2 Optional variables<br>Optional<Contact>c1 = ...<br>Optional<Contact>c2 = ...<br>and a method which needs 2 variables of type Contact<br>void match(Contact c1, Contact c2) {...}<br>and you need to unwrap both c1 and c2 Optional vars and pass them into the match() method. <br><br>\"Is this the most elegant way to do that in Java 8?\"<br>if (c1.isPresent() && c2.isPresent()) {<br>    match(c1.get(), c2.get());<br>}<br><br>A:  Solution you provided in scala is just syntax sugar for using flatMaps internally. You can use flatmaps in Java 8 too (but there are no syntax sugar for it). <br>c1.flatMap(contact1 -> c2.flatMap(contact2 -> match(c1,c2)))<br><br>A: It has to be ifPresent since match has return type void, and if match will return f.e. boolean it could be Optional<Boolean>result = c1.flatMap(contact1 -> c2.map(contact2 -> match(contact1 ,contact2))) klappvisor Apr 6 '16 at 11:35 <br>A:  Actually, a better way to do it in scala (and without syntax sugar) is something like c1.zip(c2).map { case (a,b) => match(a,b) }. Does java have zip? Dima Apr 6 '16 at 13:56 <br><br>A:  If you consider the arguments not having values as an exception then you could handle them like:<br>try {<br>    match(c1.orElseThrow(NoVal::new), c2.orElseThrow(NoVal::new));<br>} catch (NoVal ex) {<br>    ...<br>}<br>If they aren't an exceptional case then I would go with your first option as being more explicit about your intent. In my view it's pretty clear and readable, and easy to change to use orElse if you wish to switch to using defaults if the optionals are empty.<br>answered Apr 6 '16 at 11:53 <br>sprinter <br>\t                </code><br>                <br>            </div>            <br>            <br>            <div dojoType='com.trivedi.oPls.mPane' tags='java functional snippet' title='Using Map/FlatMap: The difference between map and flatMap methods in Java 8'>                <br>                <br>                <br>\t                <code><br>A: The type signature kinda tells the whole story. <br>map :: Stream T -> (T -> R) -> Stream R, <br>flatMap :: Stream T -> (T -> Stream R) -> Stream R.  Chris Martin Oct 31 '14 at 22:56 <br><br>A: @michael That type signature looks like Haskell, not Java. But it's not clear whether the actual Java signature is any more readable: <br><R>Stream<R>flatMap(Function<? super T,? extends Stream<? extends R>> mapper).  Stuart Marks Jul 20 '17 at 1:34 <br><br>A:  Both map and flatMap can be applied to a Stream<T>and they both return a Stream<R>. The difference is that the map operation produces one output value for each input value, whereas the flatMap operation produces an arbitrary number (zero or more) values for each input value.<br>This is reflected in the arguments to each operation.<br>The map operation takes a Function, which is called for each value in the input stream and produces one result value, which is sent to the output stream.<br>The flatMap operation takes a function that conceptually wants to consume one value and produce an arbitrary number of values. However, in Java, it's cumbersome for a method to return an arbitrary number of values, since methods can return only zero or one value. One could imagine an API where the mapper function for flatMap takes a value and returns an array or a List of values, which are then sent to the output. Given that this is the streams library, a particularly apt way to represent an arbitrary number of return values is for the mapper function itself to return a stream! The values from the stream returned by the mapper are drained from the stream and are passed to the output stream. The \"clumps\" of values returned by each call to the mapper function are not distinguished at all in the output stream, thus the output is said to have been \"flattened.\"<br>Typical use is for the mapper function of flatMap to return Stream.empty() if it wants to send zero values, or something like Stream.of(a, b, c) if it wants to return several values. But of course any stream can be returned.<br><br>A:  Try viewing it from a different perspective: it's not a transparent case where you can see the inner workings through, but the whole function itself is transparent, i.e. invisible, to you - while still doing their work and letting you see what you're working with. In this case, \"flat\" refers to the opposite of \"nested\", flatmap removes one nesting level by flattening.  Zefiro<br><br>A: Flattening comes from turning 2-level structure into single level structure, see Dici's answer for an example stackoverflow.com/a/26684582/6012102  andrzej.szmukala Jan 16 at 11:42 <br><br>A: \tStream.flatMap, as it can be guessed by its name, is the combination of a map and a flat operation. That means that you first apply a function to your elements, and then flatten it. Stream.map only applies a function to the stream without flattening the stream.<br>To understand what flattening a stream consists in, consider a structure like [ [1,2,3],[4,5,6],[7,8,9] ] which has \"two levels\". Flattening this means transforming it in a \"one level\" structure : [ 1,2,3,4,5,6,7,8,9 ].<br>edited May 17 '16 at 21:43  asgs <br><br>A:  I would like to give 2 examples to get a more practical point of view: <br>1st example making usage of map:<br>@Test<br>public void convertStringToUpperCaseStreams() {<br>    List<String>collected = Stream.of(\"a\", \"b\", \"hello\") // Stream of String <br>            .map(String::toUpperCase) // Returns a stream consisting of the results of applying the given function to the elements of this stream.<br>            .collect(Collectors.toList());<br>    assertEquals(asList(\"A\", \"B\", \"HELLO\"), collected);<br>}   <br>Nothing special in the first example, a Function is applied to return the String in uppercase.<br>Second example making usage of flatMap:<br>@Test<br>public void testflatMap() throws Exception {<br>    List<Integer>together = Stream.of(asList(1, 2), asList(3, 4)) // Stream of List<Integer><br>            .flatMap(List::stream)<br>            .map(integer -> integer + 1)<br>            .collect(Collectors.toList());<br>    assertEquals(asList(2, 3, 4, 5), together);<br>}<br>In the second example, a Stream of List is passed. It is NOT a Stream of Integer! <br>If a transformation Function has to be used (through map), then first the Stream has to be flattened to something else (a Stream of Integer). <br>If flatMap is removed then the following error is returned: The operator + is undefined for the argument type(s) List, int. <br>It is NOT possible to apply + 1 on a List of Integers!<br>edited Jan 12 at 22:42   Jan Nielsen <br><br>A:  The function you pass to stream.map has to return one object. That means each object in the input stream results in exactly one object in the output stream.<br>The function you pass to stream.flatMap returns a stream for each object. That means the function can return any number of objects for each input object (including none). The resulting streams are then concatenated to one output stream.<br>answered Oct 31 '14 at 22:58 Philipp <br><br>A:  for a Map we have a list of elements and a (function,action) f so :<br>[a,b,c] f(x) => [f(a),f(b),f(c)]<br>and for the flat map we have a list of elements list and we have a (function,action) f and we want the result to be flattened :<br>[[a,b],[c,d,e]] f(x) =>[f(a),f(b),f(c),f(d),f(e)]<br>answered Oct 8 '17 at 3:19 Bachiri Taoufiq Abderrahman <br><br>A:  One line answer: flatMap helps to flatten a Collection<Collection<T>> into a Collection<T>. In the same way, it will also flatten an Optional<Optional<T>> into Optional<T>.  <br><br>A:  I have a feeling that most answers here overcomplicate the simple problem. If you already understand how the map works that should be fairly easy to grasp.<br>There are cases where we can end up with unwanted nested structures when using map(), the flatMap() method is designed to overcome this by avoiding wrapping.<br><br>Examples:<br>1<br>List<List<Integer>> result = Stream.of(Arrays.asList(1), Arrays.asList(2, 3))<br>  .collect(Collectors.toList());<br>We can avoid having nested lists by using flatMap:<br>List<Integer>result = Stream.of(Arrays.asList(1), Arrays.asList(2, 3))<br>  .flatMap(i -> i.stream())<br>  .collect(Collectors.toList());<br>2<br>Optional<Optional<String>> result = Optional.of(42)<br>      .map(id -> findById(id));<br><br>Optional<String>result = Optional.of(42)<br>      .flatMap(id -> findById(id));<br>where:<br>private Optional<String>findById(Integer id)<br>edited Apr 15 at 20:08 <br>answered Jul 25 '17 at 17:41 Grzegorz Piwowarek <br><br>A:  Oracle's article on Optional highlights this difference between map and flatmap: <br>String version = computer.map(Computer::getSoundcard)<br>                  .map(Soundcard::getUSB)<br>                  .map(USB::getVersion)<br>                  .orElse(\"UNKNOWN\");<br>Unfortunately, this code doesn't compile. Why? The variable computer is of type Optional<Computer>, so it is perfectly correct to call the map method. However, getSoundcard() returns an object of type Optional. This means the result of the map operation is an object of type Optional<Optional<Soundcard>>. As a result, the call to getUSB() is invalid because the outermost Optional contains as its value another Optional, which of course doesn't support the getUSB() method.<br>With streams, the flatMap method takes a function as an argument, which returns another stream. This function is applied to each element of a stream, which would result in a stream of streams. However, flatMap has the effect of replacing each generated stream by the contents of that stream. In other words, all the separate streams that are generated by the function get amalgamated or \"flattened\" into one single stream. What we want here is something similar, but we want to \"flatten\" a two-level Optional into one.<br>Optional also supports a flatMap method. Its purpose is to apply the transformation function on the value of an Optional (just like the map operation does) and then flatten the resulting two-level Optional into a single one.<br>So, to make our code correct, we need to rewrite it as follows using flatMap:<br>String version = computer.flatMap(Computer::getSoundcard)<br>                   .flatMap(Soundcard::getUSB)<br>                   .map(USB::getVersion)<br>                   .orElse(\"UNKNOWN\");<br>The first flatMap ensures that an Optional<Soundcard>is returned instead of an Optional<Optional<Soundcard>>, and the second flatMap achieves the same purpose to return an Optional<USB>. Note that the third call just needs to be a map() because getVersion() returns a String rather than an Optional object.<br>http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html<br>answered Feb 24 '17 at 19:54 <br>Rusty Core <br><br>\t                </code><br>                <br>            </div>            <br>            <br>            <div dojoType='com.trivedi.oPls.mPane' tags='java functional snippet' title='Using Map/FlatMap: Using Flatmap/Filter'>                <br>                <br>\t                <code><br>Q: I have a Stream of Integer and I would like to find the two numbers whose sum is equals to another number. So I came up with the following solution:<br>BiPredicate<Integer, Integer> p = (price1, price2) -> price1.intValue() + price2.intValue() == moneyQty;<br>flavoursPrices.filter(p);<br>But the filter method does not receive a BiPredicate. Why not? What is an alternative for that?<br><br>A: You can still work with Bipredicate. The argument that the filter-method needs is a Predicate, so here is an example of how to use this BiPredicate:<br> BiPredicate<Integer, Integer> p = (price1, price2) -> price1.intValue() + price2.intValue() == moneyQty;<br><br>flavoursPrices.stream().filter(el->p.test(el.price1,el.price2));<br>In this example flavoursPrices must be a List. <br>The lambda that we are using:<br>el->p.test(el.price1,el.price2)<br>Is replacing the anonymous inner class declaration for creating a new Predicate out of the BiPredicate:<br> Predicate<Integer>arg =new Predicate<Integer>() {<br>        @Override<br>        public boolean test(Element el) {<br>            return p.test(el.price1,el.price2);<br>        }<br>    };<br>So to filter the stream, we are creating a new Predicate for every element coming from the stream and than we use this Predicate as argument to use it's test-method. The big advantage of this is, that we don't have to create enormous amounts of Predicates in advance, but we can pass every element in the lambda function and get it's attributes.<br>answered Dec 24 '16 at 9:46  Matt <br><br>*********** A:  Because filter does not work that way, it only filters one collection at a time. For your task, you need something like Python's itertools.product; this can be implemented using flatMap. In Scala, this looks as short as:<br>prices.flatMap(p1 => <br>  prices.flatMap(p2 => <br>    if (p1 + p2 == 5) List((p1, p2)) else List()))<br>If you want to do it in (native) Java, something like this comes out:<br>import java.util.*;<br>import java.util.stream.*;<br><br>public class Main {<br><br>    public static void main(String[] args) {<br><br>        List<Integer>prices =  Arrays.asList(1,2,3,4,5,6,7,8,9);<br><br>        List<List<Integer>> result = prices.stream().flatMap(p1 -><br>            prices.stream().flatMap(p2 -><br>                p1 + p2 == 5 ? Stream.of(Arrays.asList(p1, p2)) : Stream.empty()<br>            )<br>        ).collect(Collectors.toList());<br><br>        System.out.println(result);<br><br>    }<br>}<br>... which prints [[1, 4], [2, 3], [3, 2], [4, 1]]. But I wouldn't use that in reality ;) At least, a tuple class would be nice to have.<br>It is worth noting that flatMap one of the most powerful functions there is; almost all stream transformations (filter, map, cartesian product, flatten) can be implemented using it. And rest (like zip) is almost always a fold/reduce (or, rarely, an unfold).<br>answered Mar 15 '16 at 21:16  phg <br><br>\t                </code><br>                <br>            </div>            <br>            <br>            <div dojoType='com.trivedi.oPls.mPane' tags='java functional snippet' title='Using Map/FlatMap: Using Reduce'>                <br>                <br>                <br>Q: Given a value foo and a Stream of Consumer &lt;Foo&gt; void functions, what's the most concise way to apply each function to the value?                <br>Right now I have                <br><code><br>consumers.forEach(c -> c.accept(foo));<br>\t</code><br>which isn't terrible, but I suspect there might be some way to turn this inside out and do it with just method references (no explicit lambda). Possibly something with a singleton list and zip()?                <br>                <br>A: You could reduce your consumers by means of the Consumer.andThen method and then apply the resulting consumer to the foo argument:                <br>\t<code><br>consumers.reduce(Consumer::andThen).ifPresent(c -> c.accept(foo));<br>\t</code><br>But there's no difference between this approach and yours, and yours' is shorter.                <br>answered Nov 28 '17 at 22:07 Federico Peralta Schaffner                <br>                <br>            </div>            <br>            <br>            <div dojoType='com.trivedi.oPls.mPane' tags='java functional bookmark' title='Currying in Java'>                <br>https://stackoverflow.com/questions/tagged/java+currying                <br>            </div>            <br>            <br>            <div dojoType='com.trivedi.oPls.mPane' tags='java functional DSL snippet' title="Venkat Subramaniam's FLUENT DSL java8 Functional stuff">                <br><p><br>A neat example of Venkat Subramaniam's 'higher-order' or composed fns + DSL + functional style -><br><br>from Akka <a href="https://developer.lightbend.com/start/?group=akka&project=akka-http-quickstart-java">Http Quickstart</a> Java<br><br><br><br><code><br>@Override<br>  public Receive createReceive(){<br>    return receiveBuilder()<br>            .match(UserRegistryMessages.GetUsers.class, getUsers -> getSender().tell(new Users(users),getSelf()))<br>            .match(UserRegistryMessages.CreateUser.class, createUser -> {<br>              users.add(createUser.getUser());<br>              getSender().tell(new UserRegistryMessages.ActionPerformed(<br>  String.format(\"User %s created.\", createUser.getUser().getName())),getSelf());<br>            })<br>            .match(UserRegistryMessages.GetUser.class, getUser -> {<br>              getSender().tell(users.stream()<br>  .filter(user -> user.getName().equals(getUser.getName()))<br>  .findFirst(), getSelf());<br>            })<br>            .match(UserRegistryMessages.DeleteUser.class, deleteUser -> {<br>              users.removeIf(user -> user.getName().equals(deleteUser.getName()));<br>              getSender().tell(new UserRegistryMessages.ActionPerformed(String.format(\"User %s deleted.\", deleteUser.getName())),<br>  getSelf());<br><br>            }).matchAny(o -> log.info(\"received unknown message\"))<br>            .build();<br>  }<br>}<br></code><br><p><br><br><br><br>\t// <span class='mHG'>Functions</span><br><br> Function&lt;String, Integer&gt; toInteger = Integer::valueOf;<br> Function&lt;String, String&gt; backToString = toInteger.andThen(String::valueOf);<br><br> backToString.apply(\"123\"); // \"123\"<br><br><br> // <span class='mHG'>Suppliers</span><br><br> Supplier&lt;Person&gt; personSupplier = Person::new;<br> personSupplier.get(); // new Person<br><br><br> // <span class='mHG'>Consumers</span><br><br> Consumer&lt;Person&gt; greeter = (p) -&gt; System.out.println(\"Hello, \" + p.firstName);<br> greeter.accept(new Person(\"Luke\", \"Skywalker\"));<br><br>                <hr>                <br>                <br>LocalTime comes with various factory methods to simplify the creation of new instances, including parsing of time strings.                <br>                <br>LocalTime late = LocalTime.of(23, 59, 59);                <br>System.out.println(late); // 23:59:59                <br>                <br>DateTimeFormatter germanFormatter =                <br> DateTimeFormatter                <br> .ofLocalizedTime(FormatStyle.SHORT)                <br> .withLocale(Locale.GERMAN);                <br>                <br>LocalTime leetTime = <b>LocalTime.parse</b>(\"13:37\", germanFormatter);                <br>System.out.println(leetTime); // 13:37                <br>                <hr>                <br>Good java resources (w/ src examples)                <br>\thttps://github.com/google/guava/wiki                <br>\thttps://github.com/winterbe/java8-tutorial                <br>\thttps://github.com/cxxr/better-java                <br>                <hr>                <br>/***                <br> * Excerpted from \"Functional Programming in Java\",                <br> * published by The Pragmatic Bookshelf.                <br> * Copyrights apply to this code. It may not be used to create training material,                <br> * courses, books, articles, and the like. Contact us if you are in doubt.                <br> * We make no guarantees that this code is fit for any purpose.                <br> * Visit http://www.pragmaticprogrammer.com/titles/vsjava8 for more book information.                <br>***/                <br>                <br>package fpij;                <br>                <br>public class <b>DefaultMethods</b> {                <br> public interface Fly {                <br> default void takeOff() { System.out.println(\"Fly::takeOff\"); }                <br> default void land() { System.out.println(\"Fly::land\"); }                <br> default void turn() { System.out.println(\"Fly::turn\"); }                <br> default void cruise() { System.out.println(\"Fly::cruise\"); }                <br> }                <br>                <br> public <b>interface</b> FastFly <b>extends</b> Fly {                <br> default void takeOff() { System.out.println(\"FastFly::takeOff\"); }                <br> }                <br>                <br> public interface Sail {                <br> default void cruise() { System.out.println(\"Sail::cruise\"); }                <br> default void turn() { System.out.println(\"Sail::turn\"); }                <br> }                <br>                <br> public class Vehicle {                <br> public void turn() { System.out.println(\"Vehicle::turn\"); }                <br> }                <br>                <br> public class SeaPlane extends Vehicle implements FastFly, Sail {                <br> private int altitude;                <br> //...                <br> public void cruise() {                <br> System.out.print(\"SeaPlane::cruise currently cruise like: \");                <br> if(altitude &gt; 0)                <br> FastFly.super.cruise();                <br> else                <br> Sail.super.cruise();                <br> }                <br> }                <br>                <br> public void useClasses() {                <br> SeaPlane seaPlane = new SeaPlane();                <br> seaPlane.takeOff();                <br> seaPlane.turn();                <br> seaPlane.cruise();                <br> seaPlane.land();                <br> }                <br>                <br> public static void main(final String[] args) {                <br> new DefaultMethods().useClasses();                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>FastFly::takeOff                <br>Vehicle::turn                <br>SeaPlane::cruise currently cruise like: Sail::cruise                <br>Fly::land                <br>                <hr>                <br>import java.util.List;                <br>import java.util.stream.Stream;                <br>import java.io.File;                <br>import java.io.IOException;                <br>                <br>public class HandleException {                <br> public static void main(String[] args) throws IOException {                <br> <b>Stream.of</b>(\"/usr\", \"/tmp\")                <br> .map(path -&gt; {                <br> try {                <br> return new File(path).getCanonicalPath();                <br> } catch(IOException ex) {                <br> return ex.getMessage();                <br> }                <br> })                <br> .forEach(System.out::println);                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>/usr                <br>/private/tmp                <br>                <hr>                <br>package fpij;                <br>                <br>public class Mailer {                <br> public void from(final String address) { /*... */ }                <br> public void to(final String address) { /*... */ }                <br> public void subject(final String line) { /*... */ }                <br> public void body(final String message) { /*... */ }                <br> public void send() { System.out.println(\"sending...\"); }                <br>                <br> //...                <br> public static void main(final String[] args) {                <br> Mailer mailer = new Mailer();                <br> mailer.from(\"build@agiledeveloper.com\");                <br> mailer.to(\"venkats@agiledeveloper.com\");                <br> mailer.subject(\"build notification\");                <br> mailer.body(\"...your code sucks...\");                <br> mailer.send();                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>sending...                <br>                <hr>                <br>package fpij;                <br>                <br>public class MailBuilder {                <br> public MailBuilder from(final String address) { /*... */; return this; }                <br> public MailBuilder to(final String address) { /*... */; return this; }                <br> public MailBuilder subject(final String line) { /*... */; return this; }                <br> public MailBuilder body(final String message) { /*... */; return this; }                <br> public void send() { System.out.println(\"sending...\"); }                <br>                <br> //...                <br> public static void main(final String[] args) {                <br> new MailBuilder()                <br> .from(\"build@agiledeveloper.com\")                <br> .to(\"venkats@agiledeveloper.com\")                <br> .subject(\"build notification\")                <br> .body(\"...it sucks less...\")                <br> .send();                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>sending...                <br>                <hr>                <br>package fpij;                <br>                <br>import java.util.function.<b>Consumer</b>;                <br>                <br>public class FluentMailer {                <br> private FluentMailer() {}                <br>                <br> public FluentMailer from(final String address) { /*... */; return this; }                <br> public FluentMailer to(final String address) { /*... */; return this; }                <br> public FluentMailer subject(final String line) { /*... */; return this; }                <br> public FluentMailer body(final String message) { /*... */; return this; }                <br>                <br> public static void send(final Consumer&lt;FluentMailer&gt; block) {                <br> final FluentMailer mailer = new FluentMailer();                <br> <b>block.accept</b>(mailer);                <br> System.out.println(\"sending...\");                <br> }                <br>                <br> //...                <br> public static void main(final String[] args) {                <br> FluentMailer.send(mailer -&gt;                <br> mailer<b>.from</b>(\"build@agiledeveloper.com\")                <br> <b>.to</b>(\"venkats@agiledeveloper.com\")                <br> <b>.subject</b>(\"build notification\")                <br> <b>.body</b>(\"...much better...\"));                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>sending...                <br>                <hr>                <br>package fpij;                <br>                <br>import java.util.stream.Stream;                <br>import java.util.function.Function;                <br>import java.awt.Color;                <br>import java.util.function.Consumer;                <br>                <br>@SuppressWarnings(\"unchecked\")                <br>public class Camera {                <br> private Function&lt;Color, Color&gt; filter;                <br>                <br> public Color capture(final Color inputColor) {                <br> final Color processedColor = filter.apply(inputColor);                <br> //... more processing of color...                <br> return processedColor;                <br> }                <br>                <br> //... other functions that use the filter ...                <br>                <br> public void setFilters(final Function&lt;Color, Color&gt;... filters) {                <br> filter =                <br> <b>Stream.of(filters)<br>            .reduce((filter, next) -&gt; filter.compose(next))<br>            .orElse(color -&gt; color)</b>;                <br> }                <br> public Camera() { setFilters(); }                <br>                <br> public static void main(final String[] args) {                <br> final Camera camera = new Camera();                <br> <b>final Consumer&lt;String&gt; printCaptured = (filterInfo) -&gt;</b>                <br> System.out.println(String.format(\"with %s: %s\", filterInfo,                <br> camera.capture(new Color(200, 100, 200))));                <br>                <br> System.out.println(\"//\" + \"START:NOFILTER_OUTPUT\");                <br> printCaptured.accept(\"no filter\");                <br> System.out.println(\"//\" + \"END:NOFILTER_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:BRIGHT_OUTPUT\");                <br> camera.setFilters(Color::brighter);                <br> printCaptured.accept(\"brighter filter\");                <br> System.out.println(\"//\" + \"END:BRIGHT_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:DARK_OUTPUT\");                <br> camera.setFilters(Color::darker);                <br> printCaptured.accept(\"darker filter\");                <br> System.out.println(\"//\" + \"END:DARK_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:BOTH_OUTPUT\");                <br> camera.setFilters(Color::brighter, Color::darker);                <br> printCaptured.accept(\"brighter & darker filter\");                <br> System.out.println(\"//\" + \"END:BOTH_OUTPUT\");                <br> }                <br>                <br>}                <br>----------------OUTPUT-------------------                <br>with no filter: java.awt.Color[r=200,g=100,b=200]                <br>with brighter filter: java.awt.Color[r=255,g=142,b=255]                <br>with darker filter: java.awt.Color[r=140,g=70,b=140]                <br>with brighter & darker filter: java.awt.Color[r=200,g=100,b=200]                <br>                <hr>                <br>package fpij;                <br>                <br>import java.util.stream.Stream;                <br>import java.util.function.Function;                <br>import java.awt.Color;                <br>import java.util.function.Consumer;                <br>                <br>@SuppressWarnings(\"unchecked\")                <br>public class Camera2 {                <br> private Function&lt;Color, Color&gt; filter;                <br>                <br> public Color capture(final Color inputColor) {                <br> final Color processedColor = filter.apply(inputColor);                <br> //... more processing of color...                <br> return processedColor;                <br> }                <br>                <br> //... other functions that use the filter ...                <br>                <br> public void setFilters(final Function&lt;Color, Color&gt;... filters) {                <br> filter =                <br> <b>Stream.of(filters)<br>            .reduce((filter, next) -&gt; filter.compose(next))<br>            .orElseGet(Function::identity)</b>;                <br> }                <br>                <br> public Camera2() { setFilters(); }                <br>                <br> public static void main(final String[] args) {                <br> final Camera2 camera = new Camera2();                <br> final Consumer&lt;String&gt; printCaptured = (filterInfo) -&gt;                <br> System.out.println(String.format(\"with %s: %s\", filterInfo,                <br> camera.capture(new Color(200, 100, 200))));                <br>                <br> System.out.println(\"//\" + \"START:NOFILTER_OUTPUT\");                <br> printCaptured.accept(\"no filter\");                <br> System.out.println(\"//\" + \"END:NOFILTER_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:BRIGHT_OUTPUT\");                <br> camera.setFilters(Color::brighter);                <br> printCaptured.accept(\"brighter filter\");                <br> System.out.println(\"//\" + \"END:BRIGHT_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:DARK_OUTPUT\");                <br> camera.setFilters(Color::darker);                <br> printCaptured.accept(\"darker filter\");                <br> System.out.println(\"//\" + \"END:DARK_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:BOTH_OUTPUT\");                <br> camera.setFilters(Color::brighter, Color::darker);                <br> printCaptured.accept(\"brighter & darker filter\");                <br> System.out.println(\"//\" + \"END:BOTH_OUTPUT\");                <br> }                <br>                <br>}                <br>----------------OUTPUT-------------------                <br>with no filter: java.awt.Color[r=200,g=100,b=200]                <br>with brighter filter: java.awt.Color[r=255,g=142,b=255]                <br>with darker filter: java.awt.Color[r=140,g=70,b=140]                <br>with brighter & darker filter: java.awt.Color[r=200,g=100,b=200]                <br>                <hr>                <br>package fpij;                <br>                <br>import java.io.File;                <br>import java.nio.file.Files;                <br>import java.nio.file.Paths;                <br>import java.io.IOException;                <br>                <br>public class ListSelectFiles {                <br> public static void main(String[] args) throws IOException {                <br>                <br>{                <br> final String[] files =                <br> new File(\"fpij\").list(new java.io.FilenameFilter() {                <br> public boolean <b>accept</b>(final File dir, final String name) {                <br> return name.endsWith(\".java\");                <br> }                <br> });                <br> /*                <br> System.out.println(files);                <br> */                <br>}                <br>                <br> Files.newDirectoryStream(                <br> Paths.get(\"fpij\"), path -&gt; path.toString().endsWith(\".java\"))                <br> .forEach(System.out::println);                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>                <hr>                <br>import java.io.File;                <br>import java.util.List;                <br>import java.util.ArrayList;                <br>import java.util.Arrays;                <br>import java.util.stream.Stream;                <br>import java.util.function.Function;                <br>import static java.util.stream.Collectors.toList;                <br>                <br>public class ListSubDirs {                <br> public static void listTheHardWay() {                <br> List&lt;File&gt; files = new ArrayList&lt;&gt;();                <br>                <br> File[] filesInCurrentDir = new File(\".\").listFiles();                <br> for(File file : filesInCurrentDir) {                <br> File[] filesInSubDir = file.listFiles();                <br> if(filesInSubDir != null) {                <br> files.addAll(Arrays.asList(filesInSubDir));                <br> } else {                <br> files.add(file);                <br> }                <br> }                <br>                <br> System.out.println(\"Count: \" + files.size());                <br> }                <br>                <br> public static void <b>betterWay()</b> {                <br> List&lt;File&gt; files =                <br> Stream.of(new File(\".\").listFiles())                <br> .flatMap(file -&gt; file.listFiles() == null ?                <br> Stream.of(file) : Stream.of(file.listFiles()))                <br> .collect(toList());                <br> System.out.println(\"Count: \" + files.size());                <br> }                <br>                <br> public static void main(String[] args) {                <br> System.out.println(\"START:HARDWAY_OUTPUT\");                <br> listTheHardWay();                <br> System.out.println(\"END:HARDWAY_OUTPUT\");                <br> betterWay();                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>START:HARDWAY_OUTPUT                <br>Count: 32                <br>END:HARDWAY_OUTPUT                <br>Count: 32                <br>                <hr>                <br>import java.util.Arrays;                <br>import java.util.Comparator;                <br>import java.util.List;                <br>import java.util.ArrayList;                <br>import java.util.stream.Collectors;                <br>import java.util.Map;                <br>import java.util.Optional;                <br>import java.util.function.BinaryOperator;                <br>import static java.util.stream.Collectors.*;                <br>                <br>public class OlderThan20 {                <br> public static void main(String[] args) {                <br> final List&lt;Person&gt; people = Arrays.asList(                <br> new Person(\"John\", 20),                <br> new Person(\"Sara\", 21),                <br> new Person(\"Jane\", 21),                <br> new Person(\"Greg\", 35));                <br>                <br>{                <br> System.out.println(\"//\" + \"START:MUTABLE_OUTPUT\");                <br> List&lt;Person&gt; olderThan20 = new ArrayList&lt;&gt;();                <br> people.stream()                <br> .filter(person -&gt; person.getAge() &gt; 20)                <br> .forEach(person -&gt; olderThan20.add(person));                <br> System.out.println(\"People older than 20: \" + olderThan20);                <br> System.out.println(\"//\" + \"END:MUTABLE_OUTPUT\");                <br>}                <br>                <br>{                <br> System.out.println(\"//\" + \"START:COLLECT_OUTPUT\");                <br> List&lt;Person&gt; olderThan20 =                <br> people.stream()                <br> .filter(person -&gt; person.getAge() &gt; 20)                <br> .collect(ArrayList::new, ArrayList::add, ArrayList::addAll);                <br> System.out.println(\"People older than 20: \" + olderThan20);                <br> System.out.println(\"//\" + \"END:COLLECT_OUTPUT\");                <br>}                <br>                <br>{                <br> System.out.println(\"//\" + \"START:COLLECT_TO_LIST_OUTPUT\");                <br> List&lt;Person&gt; olderThan20 =                <br> people.stream()                <br> .filter(person -&gt; person.getAge() &gt; 20)                <br> .collect(Collectors.toList());                <br> System.out.println(\"People older than 20: \" + olderThan20);                <br> System.out.println(\"//\" + \"END:COLLECT_TO_LIST_OUTPUT\");                <br>}                <br>                <br>{                <br> System.out.println(\"//\" + \"START:GROUP_BY_OUTPUT\");                <br> Map&lt;Integer, List&lt;Person&gt;&gt; peopleByAge =                <br> people.stream()                <br> .collect(Collectors.groupingBy(Person::getAge));                <br> System.out.println(\"Grouped by age: \" + peopleByAge);                <br> System.out.println(\"//\" + \"END:GROUP_BY_OUTPUT\");                <br>}                <br>                <br>{                <br> System.out.println(\"//\" + \"START:GROUP_BY_AGE_NAME_OUTPUT\");                <br> Map&lt;Integer, List&lt;String&gt;&gt; nameOfPeopleByAge =                <br> people.stream()                <br> .collect(                <br> groupingBy(Person::getAge, mapping(Person::getName, toList())));                <br> System.out.println(\"People grouped by age: \" + nameOfPeopleByAge);                <br> System.out.println(\"//\" + \"END:GROUP_BY_AGE_NAME_OUTPUT\");                <br>}                <br>                <br>{                <br> System.out.println(\"//\" + \"START:OLDEST_IN_EACH_LETTER_OUTPUT\");                <br> Comparator&lt;Person&gt; byAge = Comparator.comparing(Person::getAge);                <br> Map&lt;Character, Optional&lt;Person&gt;&gt; oldestPersonOfEachLetter =                <br> people.stream()                <br> .collect(groupingBy(person -&gt; person.getName().charAt(0),                <br> reducing(BinaryOperator.maxBy(byAge))));                <br> System.out.println(\"Oldest person of each letter:\");                <br> System.out.println(oldestPersonOfEachLetter);                <br> System.out.println(\"//\" + \"END:OLDEST_IN_EACH_LETTER_OUTPUT\");                <br>}                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>People older than 20: [Sara - 21, Jane - 21, Greg - 35]                <br>People older than 20: [Sara - 21, Jane - 21, Greg - 35]                <br>People older than 20: [Sara - 21, Jane - 21, Greg - 35]                <br>Grouped by age: {35=[Greg - 35], 20=[John - 20], 21=[Sara - 21, Jane - 21]}                <br>People grouped by age: {35=[Greg], 20=[John], 21=[Sara, Jane]}                <br>Oldest person of each letter:                <br>{S=Optional[Sara - 21], G=Optional[Greg - 35], J=Optional[Jane - 21]}                <br>                <hr>                <br>import java.io.File;                <br>import java.util.Arrays;                <br>                <br>public class ListHiddenFiles {                <br> public static void main(String[] args) {                <br>                <br> final File[] files = new File(\".\").listFiles(file -&gt; file.isHidden());                <br>                <br> new File(\".\").listFiles(File::isHidden);                <br>                <br> Arrays.stream(files).forEach(System.out::println);                <br> }                <br>}                <br>                <hr>                <br>import java.util.List;                <br>import java.util.Arrays;                <br>import java.util.stream.Stream;                <br>                <br>public class <b>LazyStreams</b> {                <br> private static int length(final String name) {                <br> System.out.println(\"getting length for \" + name);                <br> return name.length();                <br> }                <br> private static String toUpper(final String name ) {                <br> System.out.println(\"converting to uppercase: \" + name);                <br> return name.toUpperCase();                <br> }                <br> //...                <br>                <br> public static void main(final String[] args) {                <br> List&lt;String&gt; names = Arrays.asList(\"Brad\", \"Kate\", \"Kim\", \"Jack\", \"Joe\",                <br> \"Mike\", \"Susan\", \"George\", \"Robert\", \"Julia\", \"Parker\", \"Benson\");                <br> System.out.println(\"//\" + \"START:CHAIN_OUTPUT\");                <br> {                <br>                <br> final String firstNameWith3Letters =                <br> names.stream()                <br> .filter(name -&gt; length(name) == 3)                <br> .map(name -&gt; toUpper(name))                <br> .findFirst()                <br> .get();                <br>                <br> System.out.println(firstNameWith3Letters);                <br> }                <br> System.out.println(\"//\" + \"END:CHAIN_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:SPLIT_OUTPUT\");                <br> {                <br> <b>Stream&lt;String&gt; namesWith3Letters</b> =                <br> names.stream()                <br> .filter(name -&gt; length(name) == 3)                <br> .map(name -&gt; toUpper(name));                <br>                <br> System.out.println(\"Stream created, filtered, mapped...\");                <br> System.out.println(\"<b>ready to call findFirst</b>...\");                <br>                <br> final String firstNameWith3Letters =                <br> namesWith3Letters.findFirst()                <br> .get();                <br>                <br> System.out.println(firstNameWith3Letters);                <br> }                <br> System.out.println(\"//\" + \"END:SPLIT_OUTPUT\");                <br>                <br>                <br> }                <br>                <br>}                <br>----------------OUTPUT-------------------                <br>getting length for Brad                <br>getting length for Kate                <br>getting length for Kim                <br>converting to uppercase: Kim                <br>KIM                <br>Stream created, filtered, mapped...                <br>ready to call findFirst...                <br>getting length for Brad                <br>getting length for Kate                <br>getting length for Kim                <br>converting to uppercase: Kim                <br>KIM                <br>                <hr>                <br>package fpij;                <br>                <br>public class Heavy {                <br> public Heavy() { System.out.println(\"Heavy created\"); }                <br>                <br> public String toString() { return \"quite heavy\"; }                <br>}                <br>                <br>public class HolderNaive {                <br> private Heavy heavy;                <br>                <br> public HolderNaive() {                <br> System.out.println(\"Holder created\");                <br> }                <br>                <br> public Heavy getHeavy() {                <br> if(heavy == null) {                <br> heavy = new Heavy();                <br> }                <br>                <br> return heavy;                <br> }                <br>                <br>//...                <br>                <br> public static void main(final String[] args) {                <br> final HolderNaive holder = new HolderNaive();                <br> System.out.println(\"deferring heavy creation...\");                <br> System.out.println(holder.getHeavy());                <br> System.out.println(holder.getHeavy());                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>Holder created                <br>deferring heavy creation...                <br>Heavy created                <br>quite heavy                <br>quite heavy                <br>                <hr>                <br>package fpij;                <br>                <br>import java.util.function.Supplier;                <br>                <br>public class Holder {                <br> private <b>Supplier&lt;Heavy&gt; heavy</b> = () -&gt; createAndCacheHeavy();                <br>                <br> public Holder() {                <br> System.out.println(\"Holder created\");                <br> }                <br>                <br> public Heavy getHeavy() {                <br> return heavy.get();                <br> }                <br> //...                <br>                <br> private <b>synchronized</b> Heavy <b>createAndCacheHeavy()</b> {                <br> <b>class HeavyFactory implements Supplier&lt;Heavy&gt;</b> {                <br> private final Heavy heavyInstance = new Heavy();                <br>                <br> public Heavy get() { return heavyInstance; }                <br> }                <br>                <br> if(!HeavyFactory.class.isInstance(heavy)) {                <br> heavy = new HeavyFactory();                <br> }                <br>                <br> return heavy.get();                <br> }                <br>                <br> public static void main(final String[] args) {                <br> final Holder holder = new Holder();                <br> System.out.println(\"deferring heavy creation...\");                <br> System.out.println(holder.getHeavy());                <br> System.out.println(holder.getHeavy());                <br> }                <br>}                <br>                <br>----------------OUTPUT-------------------                <br>Holder created                <br>deferring heavy creation...                <br>Heavy created                <br>quite heavy                <br>quite heavy                <br>                <br>                <hr>                <br>package fpij;                <br>                <br>import java.util.function.Supplier;                <br>                <br>public class Evaluation {                <br> public static boolean evaluate(final int value) {                <br> System.out.println(\"evaluating ...\" + value);                <br> simulateTimeConsumingOp(2000);                <br> return value &gt; 100;                <br> }                <br> //...                <br>                <br> public static void simulateTimeConsumingOp(final int millseconds) {                <br> try {                <br> Thread.sleep(2000);                <br> } catch(Exception ex) { throw new RuntimeException(ex); }                <br> }                <br>                <br> public static void <b>eagerEvaluato</b>r(                <br> final boolean input1, final boolean input2) {                <br> System.out.println(\"eagerEvaluator called...\");                <br> System.out.println(\"accept?: \" + (input1 && input2));                <br> }                <br>                <br> public static void <b>lazyEvaluator</b>(                <br> final Supplier&lt;Boolean&gt; input1, final Supplier&lt;Boolean&gt; input2) {                <br> System.out.println(\"lazyEvaluator called...\");                <br> System.out.println(\"accept?: \" + (input1.get() && input2.get()));                <br> }                <br>                <br> public static void main(final String[] args) {                <br>                <br> System.out.println(\"//\" + \"START:EAGER_OUTPUT\");                <br> eagerEvaluator(evaluate(1), evaluate(2));                <br> System.out.println(\"//\" + \"END:EAGER_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:LAZY_OUTPUT\");                <br> lazyEvaluator(() -&gt; evaluate(1), () -&gt; evaluate(2));                <br> System.out.println(\"//\" + \"END:LAZY_OUTPUT\");                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>evaluating ...1                <br>evaluating ...2                <br>eagerEvaluator called...                <br>accept?: false                <br>lazyEvaluator called...                <br>evaluating ...1                <br>accept?: false                <br>                <hr>                <br>import java.util.List;                <br>import java.util.Arrays;                <br>import java.util.function.Function;                <br>import static <b>fpij.Memoizer.callMemoized</b>;                <br>                <br>public <b>class RodCutterBasic</b> {                <br> final List&lt;Integer&gt; prices;                <br> public RodCutterBasic(final List&lt;Integer&gt; pricesForLength) {                <br> prices = pricesForLength;                <br> }                <br>                <br> //...                <br>                <br> public int maxProfit(final int length) {                <br> int profit = (length &lt;= prices.size()) ? prices.get(length - 1) : 0;                <br> for(int i = 1; i &lt; length; i++) {                <br> int priceWhenCut = maxProfit(i) + maxProfit(length - i);                <br> if(profit &lt; priceWhenCut) profit = priceWhenCut;                <br> }                <br>                <br> return profit;                <br> }                <br>                <br> static                <br> final List&lt;Integer&gt; priceValues =                <br> Arrays.asList(2, 1, 1, 2, 2, 2, 1, 8, 9, 15);                <br>                <br>                <br> public static void run(final RodCutterBasic rodCutter) {                <br>                <br> System.out.println(rodCutter.maxProfit(5));                <br> System.out.println(rodCutter.maxProfit(22));                <br> }                <br>                <br> public static void main(final String[] args) {                <br> final RodCutterBasic rodCutter = new RodCutterBasic(priceValues);                <br> run(rodCutter);                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>10                <br>44                <br>                <hr>                <br>package fpij;                <br>                <br>import java.util.List;                <br>import java.util.Arrays;                <br>import java.util.<b>function.BiFunction</b>;                <br>import java.util.function.Function;                <br>import static fpij.Memoizer.callMemoized;                <br>                <br>public class <b>RodCutterMemoized</b> extends RodCutterBasic {                <br> public RodCutterMemoized(final List&lt;Integer&gt; pricesForLength) {                <br> super(pricesForLength);                <br> }                <br>                <br> public int maxProfit(final int rodLength) {                <br> BiFunction&lt;Function&lt;Integer, Integer&gt;, Integer, Integer&gt; compute =                <br> (func, length) -&gt; {                <br> int profit = (length &lt;= prices.size()) ? prices.get(length - 1) : 0;                <br> for(int i = 1; i &lt; length; i++) {                <br> int priceWhenCut = func.apply(i) + func.apply(length - i);                <br> if(profit &lt; priceWhenCut) profit = priceWhenCut;                <br> }                <br> return profit;                <br> };                <br> return callMemoized(compute, rodLength);                <br> }                <br>                <br> public static void main(final String[] args) {                <br> final RodCutterMemoized rodCutterMomoized                <br> = new RodCutterMemoized(RodCutterBasic.priceValues);                <br> //run(foo);                <br>                <br> System.out.println(rodCutterMomoized.maxProfit(5));                <br> System.out.println(rodCutterMomoized.maxProfit(22));                <br> }                <br>}                <br>public <b>class Memoizer</b> {                <br> public static &lt;T, R&gt; R callMemoized(                <br> final BiFunction&lt;Function&gt;T,R &lt;, T, R&lt; function, final T input) {                <br> <b>Function&lt;T, R&gt; memoized = new Function&lt;T, R&gt;() {<br>      private final Map&lt;T, R&gt; store = new HashMap&lt;&gt;();<br>      public R apply(final T input) {<br>        return store.computeIfAbsent(input, key -&gt; function.apply(this, key));<br>      }<br>    };<br>    return memoized.apply(input);</b>                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>10                <br>44                <br>                <hr>                <br>                <br>import java.util.stream.Stream;                <br>                <br>@FunctionalInterface                <br>public <b>interface TailCall&lt;T&gt;</b> {                <br>                <br> TailCall&lt;T&gt; apply();                <br>                <br> default boolean isComplete() { return false; }                <br> //...                <br>                <br> default T result() { throw new Error(\"not implemented\"); }                <br>                <br> default T invoke() {                <br> return Stream.iterate(this, TailCall::apply)                <br> .filter(TailCall::isComplete)                <br> .findFirst()                <br> .get()                <br> .result();                <br> }                <br>}                <br>public class TailCalls {                <br> public static &lt;T&gt; TailCall&lt;T&gt; call(final TailCall&lt;T&gt; nextCall) {                <br> return nextCall;                <br> }                <br> public static &lt;T&gt; TailCall&lt;T&gt; done(final T value) {                <br> return new TailCall&lt;T&gt;() {                <br> @Override public boolean isComplete() { return true; }                <br> @Override public T result() { return value; }                <br> @Override public TailCall&lt;T&gt; apply() {                <br> throw new Error(\"not implemented\");                <br> }                <br> };                <br> }                <br>}                <br>                <br>                <hr>                <br><b>import java.util.function.Function;<br>import static fpij.TailCalls.done;<br>import static fpij.TailCalls.call</b>;                <br>                <br>public class Factorial {                <br> public static int factorialRec(final int number) {                <br> if(number == 1)                <br> return number;                <br> else                <br> return number * factorialRec(number - 1);                <br> }                <br>                <br> public static <b>TailCall&lt;Integer&gt; factorialTailRec</b>(                <br> final int factorial, final int number) {                <br> if (number == 1)                <br> return done(factorial);                <br> else                <br> return call(() -&gt; factorialTailRec(factorial * number, number - 1));                <br> }                <br>                <br> public static int factorial(final int number) {                <br> return factorialTailRec(1, number).invoke();                <br> }                <br>                <br> public static void main(final String[] args) {                <br> System.out.println(\"//\" + \"START:FACTREC_DISPLAY_5_OUTPUT\");                <br> System.out.println(factorialRec(5));                <br> System.out.println(\"//\" + \"END:FACTREC_DISPLAY_5_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:FACTREC_DISPLAY_LARGE_OUTPUT\");                <br> try {                <br> System.out.println(factorialRec(20000));                <br> } catch(StackOverflowError ex) {                <br> System.out.println(ex);                <br> }                <br> System.out.println(\"//\" + \"END:FACTREC_DISPLAY_LARGE_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:FACTTAILREC_DISPLAY_5_OUTPUT\");                <br> System.out.println(factorialTailRec(1, 5).invoke());                <br> System.out.println(\"//\" + \"END:FACTTAILREC_DISPLAY_5_OUTPUT\");                <br>                <br> System.out.println(\"//\" + \"START:FACTTAILREC_DISPLAY_LARGE_OUTPUT\");                <br> System.out.println(factorialTailRec(1, 20000).invoke());                <br> System.out.println(\"//\" + \"END:FACTTAILREC_DISPLAY_LARGE_OUTPUT\");                <br>                <br>                <br> System.out.println(\"//\" + \"START:FACTORIAL_DISPLAY_OUTPUT\");                <br> System.out.println(factorial(5));                <br> System.out.println(factorial(20000));                <br> System.out.println(\"//\" + \"END:FACTORIAL_DISPLAY_OUTPUT\");                <br>                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>120                <br>java.lang.StackOverflowError                <br>120                <br>0                <br>120                <br>0                <br>                <hr>                <br>                <br>import java.math.BigInteger;                <br>import java.util.function.Function;                <br>import static fpij.TailCalls.call;                <br>import static fpij.TailCalls.done;                <br>                <br>public class BigFactorial {                <br> public static BigInteger decrement(final BigInteger number) {                <br> return number.subtract(BigInteger.ONE);                <br> }                <br>                <br> public static BigInteger multiply(                <br> final BigInteger first, final BigInteger second) {                <br> return first.multiply(second);                <br> }                <br>                <br> final static BigInteger ONE = BigInteger.ONE;                <br> final static BigInteger FIVE = new BigInteger(\"5\");                <br> final static BigInteger TWENTYK = new BigInteger(\"20000\");                <br>                <br> //...                <br>                <br> private static TailCall&lt;BigInteger&gt; factorialTailRec(                <br> final BigInteger factorial, final BigInteger number) {                <br> if(number.equals(BigInteger.ONE))                <br> return done(factorial);                <br> else                <br> return call(() -&gt;                <br> factorialTailRec(multiply(factorial, number), decrement(number)));                <br> }                <br>                <br> public static BigInteger factorial(final BigInteger number) {                <br> return factorialTailRec(BigInteger.ONE, number).invoke();                <br> }                <br>                <br> public static void main(final String[] args) {                <br> System.out.println(factorial(FIVE));                <br> System.out.println(String.format(\"%.10s...\", factorial(TWENTYK)));                <br> }                <br>}                <br>----------------OUTPUT-------------------                <br>120                <br>1819206320...                <br>                <hr>                <br>import java.util.concurrent.locks.Lock;                <br>                <br>public class Locker {                <br> public static <b>void runLocked(Lock lock, Runnable block)</b> {                <br> lock.lock();                <br>\t                <br> try {                <br> block.run();                <br> } finally {                <br> lock.unlock();                <br> }                <br> }                <br>}                <br>------------                <br>import java.util.concurrent.locks.Lock;                <br>import java.util.concurrent.locks.ReentrantLock;                <br>import static fpij.Locker.runLocked;                <br>                <br>public class Locking {                <br> Lock lock = new ReentrantLock(); //or mock                <br>                <br> protected void setLock(final Lock mock) {                <br> lock = mock;                <br> }                <br>                <br> public void doOp1() {                <br> lock.lock();                <br> try {                <br> //...critical code...                <br> } finally {                <br> lock.unlock();                <br> }                <br> }                <br> //...                <br>                <br> <b>public void doOp2() {<br>    runLocked(lock, () -&gt; {/*...critical code ... */});<br>  }</b>                <br>                <br> public void doOp3() {                <br> runLocked(lock, () -&gt; {/*...critical code ... */});                <br> }                <br>                <br> public void doOp4() {                <br> runLocked(lock, () -&gt; {/*...critical code ... */});                <br> }                <br>                <br>}                <br>                <hr>                <br>                <br>                <br>                <br>                <br>                <br>            </div><div dojoType='com.trivedi.oPls.mPane' tags='java functional DSL article' title="ibm devWorks: Neal Ford's Fluent interfaces">    <br>    <br>    <h2><br>Evolutionary architecture and emergent design: Fluent interfaces<br><br>Build internal DSLs to capture idiomatic domain patterns</h2>    <br>    <br>Neal Ford    <br>    <br>July 13, 2010    <br>    <br>This installment of Evolutionary architecture and emergent design continues the discussion ofharvesting techniques for idiomatic patterns in emergent design. When you identify a reusablepattern, you should capture it in a way to sets it apart from    the rest of your code. Domain-specific languages (DSLs) offer many techniques for concisely capturing data and functionality.This month, Neal Ford shows you three ways to build internal DSLs that capture idiomaticdomain patterns.    <br>    <br>    <br>The preceding installment of this series introduced the subject of using domain-specificlanguages (DSLs) to capture domain idiomatic patterns. This installment continues with that topic,demonstrating various DSL construction techniques.    <br>In his upcoming book Domain Specific Languages, Martin Fowler differentiates between two typesof DSLs (see Related topics). External DSLs build a new language grammar, requiring tools likelexx and yacc or Antlr. An internal DSL builds new languages    atop a base language, whose syntaxit borrows and stylizes. The examples in this installment build internal DSLs using Java as the base language, constructing new mini-languages on top of its syntax.    <br>    <br>About this series    <br>    <br>This series aims to provide a fresh perspective on the often-discussed but elusive conceptsof software architecture and design. Through concrete examples, Neal Ford gives you asolid grounding in the agile practices of evolutionary architecture and    emergent design. Bydeferring important architectural and design decisions until the last responsible moment, youcan prevent unnecessary complexity from undermining your software projects.    <br>Underlying all the following techniques for constructing DSLs is the notion of implicit context.DSLs (especially internal ones) try to eliminate noisy syntax by creating contextual wrappersaround related elements. A good example of this concept appears    in XML in the form of parentand child elements, which provide a wrapper around related items. You'll notice many of theseDSL techniques achieve that same effect using language syntactic tricks.    <br>    <br>    <br>Readability is one of the benefits of using a DSL. If you write code that nondevelopers can read,you shorten the feedback loop between your team and the people who are requesting features.A common DSL pattern identified in Fowler's book is called    fluent interface, which he defines asbehavior capable of relaying or maintaining the instruction context for a series of method calls. I'llshow you several types of fluent interfaces, starting with method chaining.    <br>    <h2>Method chaining</h2>    <br>    <br>Method chaining uses return values from methods to relay instruction context, which in this case isthe object instance making the first method invocation. This sounds much more complex than it is,so I'll show an example to clarify this concept.    <br>    <br>When working with DSLs, it is common to start with your goal syntax and reverse engineerbackwards to figure out how to implement it. Starting at the end makes sense because readabilityis highly valued in DSLs. The example I'll use is a small application    that tracks calendar entries.The application illustrates the DSL's syntax, as shown in Listing 1:    <br>    <br>Listing 1. Goal syntax for a calendar DSL    <br>    <br><code><br><br>public class CalendarDemoChained { <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public static void main(String[] args) { <br>&nbsp;&nbsp;&nbsp;&nbsp;new CalendarDemoChained(); <br>&nbsp;&nbsp;&nbsp;&nbsp;  } <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public CalendarDemoChained() { <br>&nbsp;&nbsp;&nbsp;&nbsp;Calendar fourPM = Calendar.getInstance(); <br>&nbsp;&nbsp;&nbsp;&nbsp;fourPM.set(Calendar.HOUR_OF_DAY, 16); <br>&nbsp;&nbsp;&nbsp;&nbsp;Calendar fivePM = Calendar.getInstance(); <br>&nbsp;&nbsp;&nbsp;&nbsp;fivePM.set(Calendar.HOUR_OF_DAY, 17); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;AppointmentCalendarChained calendar = new AppointmentCalendarChained(); <br>&nbsp;&nbsp;&nbsp;&nbsp;calendar.add(\"dentist\"). <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from(fourPM). <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to(fivePM). <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at(\"123 main street\"); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;calendar.add(\"birthday party\").<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at(fourPM); <br>&nbsp;&nbsp;&nbsp;&nbsp;displayAppointments(calendar); <br>&nbsp;&nbsp;&nbsp;&nbsp;  } <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  private void displayAppointments(AppointmentCalendarChained calendar) { <br>&nbsp;&nbsp;&nbsp;&nbsp;for (Appointment a : calendar.getAppointments()) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(a.toString()); <br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;  }<br><br></code>    <br>    <br>After the necessary cruft at the top dealing with Java calendars, you can see the method-chainingfluent interface in action as I add values to the two calendar entries. Notice that I'm using whitespace to separate the parts of what is (from a Java    syntax standpoint) a single line of code. It iscommon in internal DSLs to stylize the use of the base language to make the DSL more readable.    <br>    <br>The Appointment class containing most of the fluent-interface methods appears in Listing 2:    <br>    <br>    <br>Listing 2. Appointment class    <br>    <br><code><br>public class Appointment { <br>&nbsp;&nbsp;&nbsp;&nbsp;  private String _name; <br>&nbsp;&nbsp;&nbsp;&nbsp;  private String _location; <br>&nbsp;&nbsp;&nbsp;&nbsp;  private Calendar _startTime; <br>&nbsp;&nbsp;&nbsp;&nbsp;  private Calendar _endTime; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public Appointment(String name) { <br>&nbsp;&nbsp;&nbsp;&nbsp;    this._name = name; <br>&nbsp;&nbsp;&nbsp;&nbsp;  } <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public Appointment() { } <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public Appointment name(String name) { <br>&nbsp;&nbsp;&nbsp;&nbsp;_name = name; <br>&nbsp;&nbsp;&nbsp;&nbsp;return this; <br>&nbsp;&nbsp;&nbsp;&nbsp;  } <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public Appointment at(String location) { <br>&nbsp;&nbsp;&nbsp;&nbsp;_location = location; <br>&nbsp;&nbsp;&nbsp;&nbsp;return this;<br>&nbsp;&nbsp;&nbsp;&nbsp;  } <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public Appointment at(Calendar startTime) { <br>&nbsp;&nbsp;&nbsp;&nbsp;_startTime = startTime; <br>&nbsp;&nbsp;&nbsp;&nbsp;return this;<br>&nbsp;&nbsp;&nbsp;&nbsp;  } <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public Appointment from(Calendar startTime) { <br>&nbsp;&nbsp;&nbsp;&nbsp;_startTime = startTime; <br>&nbsp;&nbsp;&nbsp;&nbsp;return this;<br>&nbsp;&nbsp;&nbsp;&nbsp;  } <br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public Appointment to(Calendar endTime) { <br>&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;&nbsp;&nbsp;&nbsp;_endTime = endTime; <br>&nbsp;&nbsp;&nbsp;&nbsp;return this;<br>&nbsp;&nbsp;&nbsp;&nbsp;  }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;  public String toString() { <br>&nbsp;&nbsp;&nbsp;&nbsp;return \"Appointment:\"+ _name + <br>&nbsp;&nbsp;&nbsp;&nbsp;((_location != null && _location.length() > 0) ? \", location:\" + <br>&nbsp;&nbsp;&nbsp;&nbsp;_location : \"\") + \", Start time:\" + _startTime.get(Calendar.HOUR_OF_DAY) + <br>&nbsp;&nbsp;&nbsp;&nbsp;(_endTime != null? \", End time: \" + _endTime.get(Calendar.HOUR_OF_DAY) : \"\");<br>&nbsp;&nbsp;&nbsp;&nbsp;  }<br>}<br></code>    <br>    <br>    <br>As you can see, building fluent interfaces is straightforward. For each of the mutator methods, youdiverge from standard JavaBean syntax by writing your setter methods to return the host object(this) and by replacing the set naming convention with    something more readable. The generaldefinition at the start of this section should now be clear. The context being relayed via the methodchaining is this, meaning that you can make a series of method calls concisely.    <br>    <br>In the article <a href='https://www.ibm.com/developerworks/java/library/j-eaed12/index.html'>\"Leveraging reusable code, Part 2,\"</a> I showed an API definition for a train car, asshown in Listing 3:    <br>    <br>Listing 3. An API for a train car    <br>    <br><code><br>&nbsp;&nbsp;&nbsp;&nbsp;Car2 car = new CarImpl();<br>&nbsp;&nbsp;&nbsp;&nbsp;MarketingDescription desc = new MarketingDescriptionImpl();<br>&nbsp;&nbsp;&nbsp;&nbsp;desc.setType(\"Box\");<br>&nbsp;&nbsp;&nbsp;&nbsp;desc.setSubType(\"Insulated\");<br>&nbsp;&nbsp;&nbsp;&nbsp;desc.setAttribute(\"length\", \"50.5\");<br>&nbsp;&nbsp;&nbsp;&nbsp;desc.setAttribute(\"ladder\", \"yes\");<br>&nbsp;&nbsp;&nbsp;&nbsp;desc.setAttribute(\"lining type\", \"cork\");<br>&nbsp;&nbsp;&nbsp;&nbsp;car.setDescription(desc);<br></code>    <br>    <br>The problem domain for train cars is complex because of regulatory rules about contents andhistory. On the project that yielded this example, we had lots of complicated testing scenarios thatrequired dozens of lines of set calls like the ones in Listing    3. We tried to get our business analyststo verify that we had the right magical combination of attributes, but they pushed back becausethey viewed it as Java code, which they had no interest in reading. The ultimate impact of thisproblem was the requirement    that a developer verbally translate the details, which is of courseerror-prone and time-consuming.    <br>    <br>To resolve this problem, we converted our Car class into a fluent interface, so that the code fromListing 3 became the fluent interface shown in Listing 4:    <br>    <br>Listing 4. Fluent interface for train cars    <br><code><br>&nbsp;&nbsp;&nbsp;&nbsp;Car car = Car.describedAs() <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.box() <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.length(50.5) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.type(Type.INSULATED) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.includes(Equipment.LADDER) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.lining(Lining.CORK);<br></code>    <br>    <br>This code was declarative enough and removed sufficient noise from the Java API version that ourbusiness analysts were happy to verify it for us.    <br>    <br>Returning to the calendar example, the last bit of the implementation is the AppointmentCalendarclass, which appears in Listing 5:    <br>    <br>Listing 5. AppointmentCalendar    <br>    <br><code><br>public class AppointmentCalendarChained { <br><br>&nbsp;&nbsp;&nbsp;&nbsp;private List&lt;Appointment&gt; appointments; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public AppointmentCalendarChained() { <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appointments = new ArrayList&lt;Appointment&gt;(); <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public List&lt;Appointment&gt; getAppointments() { <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return appointments;<br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public Appointment add(String name) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Appointment appt = new Appointment(name); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appointments.add(appt); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return appt; <br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code>    <br>    <br>    <br>The add() method:    <br>&nbsp;&nbsp;&nbsp;&nbsp;1. Starts the method chain by creating a new Appointment instance    <br>&nbsp;&nbsp;&nbsp;&nbsp;2. Adds the new instance to the list of appointments    <br>&nbsp;&nbsp;&nbsp;&nbsp;3. Ultimately returns the new appointment instance, meaning that subsequent method calls areinvoked on the new appointment    <br>    <br>When you run the application, you see the details of your configured appointments, as shown inFigure 1:    <br>    <br>Figure 1. Results of running the calendar application    <br>    <br>&nbsp;&nbsp;&nbsp;&nbsp;Appointment:dentist, location:123 ~~~~, STart time: ~~    <br>&nbsp;&nbsp;&nbsp;&nbsp;Appointment:birthday party, Start time: 123    <br>    <br>So far, method chaining looks like a simple way to clean up overly verbose syntax, especiallymethod calls that are mostly declarative. This works well for idiomatic patterns in emergent designbecause domain patterns are frequently declarative.    <br>    <br>Note that using method chaining necessitates violating the syntactic rules for JavaBeans, whichinsist that mutator methods must start with set and return void. Building fluent interfaces is anexample of knowing when it makes sense to break some of    the rules. The JavaBeans specificationisn't doing you any favors if it forces you to write obfuscated code! But nothing in the creation oruse of fluent interfaces precludes supporting both the fluent interface and a JavaBeans interface.The fluent    interface methods can turn around and call the standard set methods, allowing you touse fluent interfaces even when frameworks insist that it interact with your classes as JavaBeans.    <br>    <br>    <h2>Solving the finishing problem</h2>    <br>    <br>One pitfall that's inherent in fluent interfaces under certain circumstances is known as the finishingproblem. I'll illustrate this issue by making a change to the AppointmentCalendar class fromListing 5. Presumably, you'd like to do more than just    display the appointments, such as put themin a database or some other persistence mechanism. Where do you add the code to save thecompleted appointment to storage? You can try to do it in AppointmentCalendar's add() methodjust before you return the    appointment. Listing 6 shows an attempt to access the appointment herefor something as simple as printing it:    <br>    <br>Listing 6. Adding printing    <br>    <br><code><br>&nbsp;&nbsp;&nbsp;&nbsp;public Appointment add(String name) { <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Appointment appt = new Appointment(name); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appointments.add(appt); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(appt.toString()); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return appt;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></code>    <br>    <br>When you run the code in Listing 6, the unhappy results illustrated in Figure 2 show up:    <br>    <br>    <br>Figure 2. Error output after the addition to AppointmentCalendar    <br>&nbsp;&nbsp;&nbsp;&nbsp;(nullpointerExc)    <br>    <br>    <br>The error displayed is a NullPointerException occurring in the toString() method on theAppointment class. Why it complains here, even though the method worked correctly, is theessence of the finishing problem.    <br>    <br>The error occurs because I'm trying to call the toString() method on the appointment instancebefore the rest of the fluent-interface setter methods are called. The code to try printing theappointment appears in the method that creates the appointment    instance and starts the chain. Icould create a save() or finished() method that must be called as the last method in the chain,but I'd rather not impose an easy-to-forget rule on my DSL's users. In fact, I'd rather not imposeany order semantics on    the methods in my fluent interface.    <br>    <br>The real problem is that I'm being too aggressive with the method-chaining technique. Methodchaining works best for the creation of simple data objects, yet here I'm using it both for the settermethods on Appointment and in AppointmentCalendar to    start the method chain.    <br>    <br>I can fix the finishing problem by wrapping the creation of the appointment entirely with theparentheses of the appointment calendar's add() method, as shown Listing 7:    <br>    <br>Listing 7. Wrapping via parameter    <br>    <br><code><br>&nbsp;&nbsp;&nbsp;&nbsp;AppointmentCalendar calendar = new AppointmentCalendar();<br>&nbsp;&nbsp;&nbsp;&nbsp;calendar.add( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new Appointment(\"Dentist\").<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at(fourPM));<br>&nbsp;&nbsp;&nbsp;&nbsp;calendar.add( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new Appointment(\"Conference Call\").<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from(fourPM). <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to(fivePM). <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at(\"555-123-4321\"));<br>&nbsp;&nbsp;&nbsp;&nbsp;calendar.add( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new Appointment(\"birthday party\"). <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from(fourPM). <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to(fivePM)). <br>&nbsp;&nbsp;&nbsp;&nbsp;add( new Appointment(\"Doctor\"). <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at(\"123 Main St\"));<br>&nbsp;&nbsp;&nbsp;&nbsp;calendar.add( new Appointment(\"No Fluff, Just Stuff\"). <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at(fourPM));<br>&nbsp;&nbsp;&nbsp;&nbsp;displayAppointments(calendar);<br></code>    <br>    <br>In Listing 7, the add() method's parentheses encapsulate the entire use of the Appointmentfluent interface, allowing the add() method to handle whatever additional behavior that it wants(printing, persistence, and so on). In fact, I couldn't resist    adding a bit of a fluent interface toAppointmentCalendar itself: you can now chain together the add() methods, as shown in Listing 7and implemented in Listing 8:    <br>    <br>Listing 8. The parameter-wrapping AppointmentCalendar    <br><code><br>public class AppointmentCalendar { <br>&nbsp;&nbsp;&nbsp;&nbsp;private List&lt;Appointment&gt; appointments; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public AppointmentCalendar() { <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appointments = new ArrayList&lt;Appointment&gt;();<br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public AppointmentCalendar add(Appointment appt) { <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appointments.add(appt); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this; <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public List&lt;Appointment&gt; getAppointments() { <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return appointments; <br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code>    <br>    <br>The finishing problem can arise any time you mix fluent-interface classes. It popped up inthis example because I used the appointment calendar to start the method chain, mixingthe construction and wrapping behaviors. By deferring construction and    initialization tothe Appointment class, I make it easier to separate additional wrapping behavior (such aspersistence).    <br>    <br>    <h2>Wrapping via functional sequence</h2>    <br>    <br>Thus far, I've shown two of the three context-passing techniques for fluent-interface DSLs. The third functional sequence uses inheritance and anonymous inner classes to create a contextwrapper. The calendar application rewritten using functional    sequence appears in Listing 9:    <br>    <br>Listing 9. Wrapping via functional sequence    <br><code><br>&nbsp;&nbsp;&nbsp;&nbsp;calendar.add(new Appointment() {{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name(\"dentist\"); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from(fourPM); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to(fivePM); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at(\"123 main street\");<br>&nbsp;&nbsp;&nbsp;&nbsp;}});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;calendar.add(new Appointment() {{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name(\"birthday party\"); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at(fourPM);<br>&nbsp;&nbsp;&nbsp;&nbsp;}});<br></code>    <br>    <br>Listing 9 shows a pattern that I introduced in \"Leveraging reusable code, Part 2\" under the guiseof removing structural duplication. The syntax looks odd because of the double {{ braces. The firstset of enclosing braces delineates the construction    of an anonymous inner class, and the secondset delineates the instance initializer for the anonymous inner class. (If this sounds a bit confusing,you can refer back to \"Leveraging Reusable Code, Part 2\" for a lengthy explanation of this Javaidiom.)    <br>    <br>The main advantage of this style of fluent interface lies in its adaptability. The only thing a classneeds to be used this way is a default constructor (which allows you to create an anonymous innerclass instance inheriting from your class). That    means that you can easily add fluent-interface    <br>methods to existing Java APIs without changing any of the current calling semantics. This allowsyou to \"fluentize\" existing APIs gradually.    <br>    <br>    <h2>Conclusion</h2>    <br>    <br>DSLs capture idiomatic domain patterns concisely and effectively. Fluent interfaces provide asimple way to change the way you write code so that you can more readily see the idiomaticpatterns you've fought to identify. They also force you to change    your perspective on code just abit: it should be not merely functional but readable as well, especially if nondevelopers need toconsume any aspect of it. Fluent interfaces remove unnecessary noise from your syntax, allowingfor more readable code.    For declarative structures, you can express ideas more clearly with lesseffort.    <br>In the next installment, I'll continue discussing DSL techniques as a mechanism for harvestingidiomatic patterns in emergent design.    <br>    <br>    <br>    <br> </div>  <br><div dojoType='com.trivedi.oPls.mPane' tags='java hotswap bookmark notes' title='Hotswap Options: Discussion / notes / options'>                <br>                <br><p><br>Q. Is there a Java development workflow - either using IDE, command line build tool or anything of sorts - that allows for hot code redeploying multiple pieces of code without paying the heavy price of bundling?<br><p><br>(ans 1: <span class='mTitle'>jRebel<span>; commercial<br>http://zeroturnaround.com/jrebel/faq/)<br><br>A. There is a tool called <a href='http://ssw.jku.at/dcevm/' class='mTitle'>DCEVM (Dynamic Code Evolution VM)</a> (which I've never used) that acts as <br>a patch for the JVM to allow repeated class reloading DURING RUNTIME.<br>(used by https://github.com/HotswapProjects/HotswapAgent)<br><br>A.  DCEVM supports enhanced class redefinitions and is available for current JDK7 and JDK8.<p>here's a <a href='http://ssw.jku.at/dcevm/testsuite/?show=at/ssw/hotswap/test/methods/SingleClassTest.java'>test</p>                running on a single class<br><br>This seems to be the 'mother' of all the hotswap options (used by jdk)<br><br>Here are the <a href='https://github.com/TravaOpenJDK/trava-jdk-11-dcevm'>jdk11 binaries</a><br><br><a href='http://hotswapagent.org/' class='mTitle'>HotswapAgent</a> is an free JRebel alternative and supports DCEVM in various Frameworks.<br><br><p><br>A. I believe your options are to patch the JVM with DCEVM or similar (if similar exists), use the jdb (or an abstraction of it such as what IDEs do) to reload classes from the command line debugger tool, or write up a secondary class loader with a hook that you as the developer/user can access during execution to let it know when to dump it's definitions and grab new ones. The last option giving you the most flexibility, but is not an lighthearted engineering task to do well.<br><br>A.  <a href='https://github.com/spring-projects/spring-loaded' class='mTitle'>Spring Loaded</a> is a JVM AGENT for reloading class file changes whilst a JVM IS RUNNING. It transforms classes at loadtime to make them amenable to later reloading. Unlike 'hot code replace' which only allows simple changes once a JVM is running (e.g. changes to method bodies), Spring Loaded allows you to add/modify/delete methods/fields/constructors. The annotations on types/methods/fields/constructors can also be modified and it is possible to add/remove/change values in enum types.<br><p><br>Spring Loaded is usable on any bytecode that may run on a JVM, and <span  class='mHG'>>is actually the reloading system used in Grails 2</span>.<br><p><br>Once up and running what effectively happens is that any classes loaded from jar files (dependencies) are not treated as reloadable, whilst anything loaded from .class files on disk is made reloadable. Once loaded the .class file willbe watched (once a second) and should a new version appear SpringLoaded will pick it up. Any live instances of that class will immediately see the new form of the object, the instances do not need to be discarded and recreated.<br><p><br><br><p><br>A. jdk11 possibly has this covered under <span class='mTitle'>JVMTI</span> (a Hotspot update)<br><p><br>see:<br> http://hg.openjdk.java.net/jdk/jdk11/file/1ddf9a99e4ad/src/java.instrument/share/classes/java/lang/instrument/Instrumentation.java<br><br><p><br>http://ssw.jku.at/dcevm/<br><p><br>many openJDK tests are @<p><br>http://hg.openjdk.java.net/jdk/jdk11/file/6d6611346837/test/hotspot/jtreg/serviceability/jvmti/<br><p><br>Post from last yr by someone from jRebel also mentions --<br><span class='mHG'>Fakereplace<br></span> (mpt: updated 2018; relproxy '15) is also an instrumenting agent, like JRebel but it has a lot less support for Java code changes (I assume) and the number of supported frameworksisn't as impressive.<br><p><br>FakeReplace also works w/WildFly (ie appl server repl); see <a href='https://github.com/fakereplace/fakereplace/blob/master/testsuite/wildfly/src/test/java/a/org/fakereplace/integration/wildfly/hibernate5/basic/addcolumn/Hibernate5AddColumnTestCase.java'>this test</a><br><p><br>            </div><div dojoType='com.trivedi.oPls.mPane' tags='java hotswap snippet' title='JavaWorldarticle&quot;Anin-memorycompilerfromopenJdk&quot;'><br><p> <br>    <code>        <br>/*<br> * Copyright (c) 2013, 2017, Oracle and/or its affiliates. All rights reserved.<br> * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.<br> *<br> * This code is free software; you can redistribute it and/or modify it<br> * under the terms of the GNU General Public License version 2 only, as<br> * published by the Free Software Foundation.<br> *<br> * This code is distributed in the hope that it will be useful, but WITHOUT<br> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or<br> * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License<br> * version 2 for more details (a copy is included in the LICENSE file that<br> * accompanied this code).<br> *<br> * You should have received a copy of the GNU General Public License version<br> * 2 along with this work; if not, write to the Free Software Foundation,<br> * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.<br> *<br> * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA<br> * or visit www.oracle.com if you need additional information or have any<br> * questions.<br> */<br><br>package jdk.test.lib.compiler;<br><br>import java.io.ByteArrayOutputStream;<br>import java.io.IOException;<br>import java.io.OutputStream;<br><br>import java.net.URI;<br>import java.util.ArrayList;<br>import java.util.Arrays;<br>import java.util.List;<br><br>import javax.tools.ForwardingJavaFileManager;<br>import javax.tools.FileObject;<br>import javax.tools.JavaCompiler;<br>import javax.tools.JavaCompiler.CompilationTask;<br>import javax.tools.JavaFileObject;<br>import javax.tools.JavaFileObject.Kind;<br>import javax.tools.SimpleJavaFileObject;<br>import javax.tools.StandardLocation;<br>import javax.tools.ToolProvider;<br><br>/**<br> * {@code InMemoryJavaCompiler} can be used for compiling a {@link<br> * CharSequence} to a {@code byte[]}.<br> *<br> * The compiler will not use the file system at all, instead using a {@link<br> * ByteArrayOutputStream} for storing the byte code. For the source code, any<br> * kind of {@link CharSequence} can be used, e.g. {@link String}, {@link<br> * StringBuffer} or {@link StringBuilder}.<br> *<br> * The {@code InMemoryCompiler} can easily be used together with a {@code<br> * ByteClassLoader} to easily compile and load source code in a {@link String}:<br> *<br> * <br> * {@code<br> * import jdk.test.lib.compiler.InMemoryJavaCompiler;<br> * import jdk.test.lib.ByteClassLoader;<br> *<br> * class Example {<br> *     public static void main(String[] args) {<br> *         String className = "Foo";<br> *         String sourceCode = "public class " + className + " {" +<br> *     "    public void bar() {" +<br> *     "        System.out.println("Hello from bar!");" +<br> *     "    }" +<br> *     "}";<br> *         byte[] byteCode = InMemoryJavaCompiler.compile(className, sourceCode);<br> *         Class fooClass = ByteClassLoader.load(className, byteCode);<br> *     }<br> * }<br> * }<br> * <br> */<br>public class InMemoryJavaCompiler {<br>    private static class MemoryJavaFileObject extends SimpleJavaFileObject {<br>        private final String className;<br>        private final CharSequence sourceCode;<br>        private final ByteArrayOutputStream byteCode;<br><br>        public MemoryJavaFileObject(String className, CharSequence sourceCode) {<br>            super(URI.create("string:///" + className.replace('.','/') + Kind.SOURCE.extension), Kind.SOURCE);<br>            this.className = className;<br>            this.sourceCode = sourceCode;<br>            this.byteCode = new ByteArrayOutputStream();<br>        }<br><br>        @Override<br>        public CharSequence getCharContent(boolean ignoreEncodingErrors) {<br>            return sourceCode;<br>        }<br><br>        @Override<br>        public OutputStream openOutputStream() throws IOException {<br>            return byteCode;<br>        }<br><br>        public byte[] getByteCode() {<br>            return byteCode.toByteArray();<br>        }<br><br>        public String getClassName() {<br>            return className;<br>        }<br>    }<br><br>    private static class FileManagerWrapper extends ForwardingJavaFileManager {<br>        private static final Location PATCH_LOCATION = new Location() {<br>            @Override<br>            public String getName() {<br>                return "patch module location";<br>            }<br><br>            @Override<br>            public boolean isOutputLocation() {<br>                return false;<br>            }<br>        };<br>        private final MemoryJavaFileObject file;<br>        private final String moduleOverride;<br><br>        public FileManagerWrapper(MemoryJavaFileObject file, String moduleOverride) {<br>            super(getCompiler().getStandardFileManager(null, null, null));<br>            this.file = file;<br>            this.moduleOverride = moduleOverride;<br>        }<br><br>        @Override<br>        public JavaFileObject getJavaFileForOutput(Location location, String className,<br>   Kind kind, FileObject sibling)<br>            throws IOException {<br>            if (!file.getClassName().equals(className)) {<br>                throw new IOException("Expected class with name " + file.getClassName() +<br>              ", but got " + className);<br>            }<br>            return file;<br>        }<br><br>        @Override<br>        public Location getLocationForModule(Location location, JavaFileObject fo) throws IOException {<br>            if (fo == file && moduleOverride != null) {<br>                return PATCH_LOCATION;<br>            }<br>            return super.getLocationForModule(location, fo);<br>        }<br><br>        @Override<br>        public String inferModuleName(Location location) throws IOException {<br>            if (location == PATCH_LOCATION) {<br>                return moduleOverride;<br>            }<br>            return super.inferModuleName(location);<br>        }<br><br>        @Override<br>        public boolean hasLocation(Location location) {<br>            return super.hasLocation(location) || location == StandardLocation.PATCH_MODULE_PATH;<br>        }<br><br>    }<br><br>    /**<br>     * Compiles the class with the given name and source code.<br>     *<br>     * @param className The name of the class<br>     * @param sourceCode The source code for the class with name {@code className}<br>     * @param options additional command line options<br>     * @throws RuntimeException if the compilation did not succeed<br>     * @return The resulting byte code from the compilation<br>     */<br>    public static byte[] compile(String className, CharSequence sourceCode, String... options) {<br>        MemoryJavaFileObject file = new MemoryJavaFileObject(className, sourceCode);<br>        CompilationTask task = getCompilationTask(file, options);<br><br>        if(!task.call()) {<br>            throw new RuntimeException("Could not compile " + className + " with source code " + sourceCode);<br>        }<br><br>        return file.getByteCode();<br>    }<br><br>    private static JavaCompiler getCompiler() {<br>        return ToolProvider.getSystemJavaCompiler();<br>    }<br><br>    private static CompilationTask getCompilationTask(MemoryJavaFileObject file, String... options) {<br>        List        <String>        opts = new ArrayList<>();<br>        String moduleOverride = null;<br>        for (String opt : options) {<br>            if (opt.startsWith("--patch-module=")) {<br>                moduleOverride = opt.substring("--patch-module=".length());<br>            } else {<br>                opts.add(opt);<br>            }<br>        }<br>        return getCompiler().getTask(null, new FileManagerWrapper(file, moduleOverride), null, opts, null, Arrays.asList(file));<br>    }<br>}<br>    </code>    <br></div><br><br><br><divdojoType='com.trivedi.oPls.mPane'tags='java NLP bookmark notes'title='MachineLearning/AI/NLPOptions:Discussion/notes/options'><br><h2><a href='https://deeplearning4j.org/'>Eclipse Deep Learning</a> for Java</h2><br><br>Deeplearning4jisthefirstcommercial-grade,open-source,distributeddeep-learninglibrarywrittenfor<br>JavaandScala.IntegratedwithHadoopandSpark,DL4Jisdesignedtobeusedinbusinessenvironmentson<br>distributedGPUsandCPUs.Skymindisitscommercialsupportarm.<br><br><br><br>Deeplearning4jaimstobecutting-edgeplugandplay,moreconventionthanconfiguration,whichallowsfor<br>fastprototypingfornon-researchers.DL4Jiscustomizableatscale.ReleasedundertheApache2.0license,<br>allderivativesofDL4Jbelongtotheirauthors.DL4Jcanimportneuralnetmodelsfrommostmajorframeworks<br>viaKeras,includingTensorFlow,CaffeandTheano,bridgingthegapbetweenthePythonecosystemandthe<br>JVMwithacross-teamtoolkitfordatascientists,dataengineersandDevOps.Kerasisemployedas<br>Deeplearning4j'sPythonAPI.MachinelearningmodelsareservedinproductionwithSkymind'smodelserver.<br><br><br><hr><br><h2>Apache Open NLP vs NLTK</h2><p> <br>Qn:    We    have    a    spring    boot    application    integrated    with    Node.js    and    socket.io    chat    application    ,    to    which    <br>we    want    to    integrate    Natural    language    processing.    Not    getting    any    direction    on    which    of    these    two    Apache-OpenNlp    <br>or    NLTK    would    be    a    better    choice    for    us    as    both    of    the    frameworks    offer    the    kind    of    processing    we    need.    <br>    <br>Wrt    to    the    features    provided    by    the    frameworks    ,    they    both    are    good.    Both    have    features    that    we    are    looking    for.    <br>              More    than    how    to    choose    between    features    ,    what    would    suit    our    architecture    better    is    a    perspective    I    would    like..    <br>    <br>Any    suggestions    ?    <br><p> <br>Ans:    <br>    <br>It    is    tough    to    answer    a    question    about    which    product    will    meet    your    needs    better    without    know    what    your    needs    are.    <br>OpenNLP    can    perform    Tokenization,    Sentence    Detection,    POS    tagging,    Named    entity    detection,    language    detection,    <br>Document    classification,    Chunking,    and    Sentence    Parsing.    It    also    has    lower-level    access    to    maximum    entropy    and    <br>Naive-bayes    classifiers.    I    use    OpenNLP    often.    NLTK    appears    to    do    the    same    stuff    (I    don't    really    use    it,    <br>so    I    can't    tell    you    all    its    benefits).    A    small    difference    is    that    OpenNLP    is    java    whereas    NLTK    is    python.    <br>So    your    preference    can    come    into    play.    Another    difference    is    that    NLTK    has    build    in    methods    for    downloading    corpora.    <br>    <br>If    you    were    a    little    more    specific    about    what    you    wanted,    people    could    give    you    better    advice.    <br>    <br>answered    2    days    ago    <br>HowYaDoing<p> <br>    <br>Ans:    I    think    I    have..    I    know    the    features    provided    for    both    frameworks..    but    which    would    suit    an    architecture    <br>with    the    above    mentioned    technologies    is    the    guidance    I    would    like    <br><p> <br>Personally,    I    really    like    OpenNLP,    and    because    you    just    need    to    add    the    OpenNLP    dependencies    to    maven    +    <br>download    models.    I    think    it    will    integrate    easily    with    a    spring    boot    app.    --    I    do    this    very    thing,    and    it    is    easy.    <br>I    am    sure    that    the    NLTK    community    would    argue    that    even    though    they    are    python-based,    you    can    integrate    it    <br>into    a    java    app.    Long    story    short,    I    suggest    openNLP.    But    keep    in    mind,    I    work    with    AND    ON    openNLP,    <br>so    I    have    a    pro-OpenNLP    bias.    <br><p> <br>What    do    you    think    about    using    DKPro    Core?    This    framework    provide    a    generic    API    for    many    NLP    frameworks    and    <br>comes    as    Maven    dependency.    This    means    you    can    exchange    any    of    the    frameworks.    If    you    also    use    domain    specific    <br>NLP    models    by    building    your    own    corpus,    you    can    use    this    project    to    determine    your    best-performing    <br>NLP    pipeline    for    your    domain.    Let    me    know    if    you    have    any    questions.    <br>@Schrieveslaach    I    am    not    familiar    with    DKPro    Core,    but    it    appears    that    wraps    many    different    NLP    projects    for    UIMA.    <br>This    is    very    useful    if    you    are    creating    a    UIMA-based    solution.    But    I    am    not    sure    that    Sharanya    is    considering    UIMA,    <br>which    brings    it's    own    issues.    <br><p> <br>@HowYaDoing,    it    is    true    that    UIMA    adds    another    architectural    layer    but    DKPro    Core    unifies    all    NLP    tools    through    <br>their    wrappers.    This    means    Sharanya    can    exchange    any    of    these    tools.    I'm    don't    know    the    application    domain    but    <br>if    the    application    domain    is    different    to    news    papers    (NLP    models    won't    work    well),    the    models    and    tools    can    <br>easily    be    exchanged    with    a    better    working    version.    Therefore,    Sharanya    can    use    the    second    project    to    find    the    <br>best    NLP    tools    for    the    application    domain.    <br><p> <br>    <br><hr><br><p> <br><div    class="post-text"    itemprop="text">    <br>    <p>Java        vs        Python        for        NLP        is        very        much        a        preference        or        necessity.        Depending        on        the        company/projects        you'll        <br>need        to        use        one        or        the        other        and        often        there        isn't        much        of        a        choice        unless        you're        heading        a        project.    <p>    <p>Other        than        <strong><code>NLTK</code></strong>        (www.nltk.org),        there        are        actually        other        libraries        for        text        <br>processing        in        <strong><code>python</code></strong>:    <p>    <ul>        <br>        <li><strong>TextBlob</strong>:            <a                href="http://textblob.readthedocs.org/en/dev/"                rel="noreferrer">http://textblob.readthedocs.org/en/dev/</a>        </li>        <br>        <li><strong>Gensim</strong>:            <a                href="http://radimrehurek.com/gensim/"                rel="noreferrer">http://radimrehurek.com/gensim/</a>        </li>        <br>        <li><strong>Pattern</strong>:            <a                href="http://www.clips.ua.ac.be/pattern"                rel="noreferrer">http://www.clips.ua.ac.be/pattern</a>        </li>        <br>        <li><strong>Spacy</strong>::            <a                href="http://spacy.io"                rel="noreferrer">http://spacy.io</a>        </li>        <br>        <li><strong>Orange</strong>:            <a                href="http://orange.biolab.si/features/"                rel="noreferrer">http://orange.biolab.si/features/</a>        </li>        <br>        <li><strong>Pineapple</strong>:            <a                href="https://github.com/proycon/pynlpl"                rel="noreferrer">https://github.com/proycon/pynlpl</a>        </li>        <br>    </ul>    <br>    <br>    <p>(for        more,        see        <a            href="https://pypi.python.org/pypi?%3Aaction=search&amp;term=natural+language+processing&amp;submit=search"            rel="noreferrer">https://pypi.python.org/pypi?%3Aaction=search&amp;term=natural+language+processing&amp;submit=search</a>)    <p>    <p>For        <strong><code>Java</code></strong>,        there're        tonnes        of        others        but        here's        another        list:    <p>    <ul>        <br>        <li><strong>Freeling</strong>:            <a                href="http://nlp.lsi.upc.edu/freeling/"                rel="noreferrer">http://nlp.lsi.upc.edu/freeling/</a>        </li>        <br>        <li><strong>OpenNLP</strong>:            <a                href="http://opennlp.apache.org/"                rel="noreferrer">http://opennlp.apache.org/</a>        </li>        <br>        <li><strong>LingPipe</strong>:            <a                href="http://alias-i.com/lingpipe/"                rel="noreferrer">http://alias-i.com/lingpipe/</a>        </li>        <br>        <li><strong>Stanford CoreNLP</strong>:            <a                href="http://stanfordnlp.github.io/CoreNLP/"                rel="noreferrer">http://stanfordnlp.github.io/CoreNLP/</a>            (comes            with            wrappers            for            other            languages,            python            included)        </li>        <br>        <li><strong>CogComp NLP</strong>:            <a                href="https://github.com/CogComp/cogcomp-nlp"                rel="noreferrer">https://github.com/CogComp/cogcomp-nlp</a>        </li>        <br>    </ul>    <br>    <br>    <p>This        is        a        nice        comparison        for        basic        string        processing,        see        <a            href="http://nltk.googlecode.com/svn/trunk/doc/howto/nlp-python.html"            rel="noreferrer">http://nltk.googlecode.com/svn/trunk/doc/howto/nlp-python.html</a>    <p>    <p>A        useful        comparison        of        GATE        vs        UIMA        vs        OpenNLP,        see        <a            href="https://www.assembla.com/spaces/extraction-of-cost-data/wiki/Gate-vs-UIMA-vs-OpenNLP?version=4"            rel="noreferrer">https://www.assembla.com/spaces/extraction-of-cost-data/wiki/Gate-vs-UIMA-vs-OpenNLP?version=4</a>    <p>    <p>If        you're        uncertain,        which        is        the        language        to        go        for        NLP,        personally        i        say,        "any        language        that        will        give        you        the        desired        analysis/output",        see        <a            href="https://stackoverflow.com/questions/18558665/which-language-or-tools-to-learn-for-natural-language-processing?rq=1">Which        language        or        tools        to        learn        for        natural        language        processing?</a>    <p>    <p>Here's        a        pretty        recent        (2017)        of        NLP        tools:        <a            href="https://github.com/alvations/awesome-community-curated-nlp"            rel="noreferrer">https://github.com/alvations/awesome-community-curated-nlp</a>    <p>    <p>An        older        list        of        NLP        tools        (2013):        <a            href="http://web.archive.org/web/20130703190201/http://yauhenklimovich.wordpress.com/2013/05/20/tools-nlp"            rel="noreferrer">http://web.archive.org/web/20130703190201/http://yauhenklimovich.wordpress.com/2013/05/20/tools-nlp</a>    <p>    <hr>    <br>    <br>    <p>Other        than        language        processing        tools,        you        would        very        much        need        <strong><code>machine learning</code></strong>        tools        to        incorporate        into        <code>NLP</code>        pipelines.    <p>    <p>There's        a        whole        range        in        <code>Python</code>        and        <code>Java</code>,        and        once        again        it's        up        to        preference        and        whether        the        libraries        are        user-friendly        enough:    <p>    <p>Machine        Learning        libraries        in        python:    <p>    <ul>        <br>        <li><strong>Sklearn</strong>          (Scikit-learn):            <a                href="http://scikit-learn.org/stable/"                rel="noreferrer">http://scikit-learn.org/stable/</a>        </li>        <br>        <li><strong>Milk</strong>:            <a                href="http://luispedro.org/software/milk"                rel="noreferrer">http://luispedro.org/software/milk</a>        </li>        <br>        <li><strong>Scipy</strong>:            <a                href="http://www.scipy.org/"                rel="noreferrer">http://www.scipy.org/</a>        </li>        <br>        <li><strong>Theano</strong>:            <a                href="http://deeplearning.net/software/theano/"                rel="noreferrer">http://deeplearning.net/software/theano/</a>        </li>        <br>        <li><strong>PyML</strong>:            <a                href="http://pyml.sourceforge.net/"                rel="noreferrer">http://pyml.sourceforge.net/</a>        </li>        <br>        <li><strong>pyBrain</strong>:            <a                href="http://pybrain.org/"                rel="noreferrer">http://pybrain.org/</a>        </li>        <br>        <li><strong>Graphlab Create</strong>          (Commerical            tool            but            free            academic            license            for            1            year):            <a                href="https://dato.com/products/create/"                rel="noreferrer">https://dato.com/products/create/</a>        </li>        <br>    </ul>    <br>    <br>    <p>(for        more,        see        <a            href="https://pypi.python.org/pypi?%3Aaction=search&amp;term=machine+learning&amp;submit=search"            rel="noreferrer">https://pypi.python.org/pypi?%3Aaction=search&amp;term=machine+learning&amp;submit=search</a>)    <p>    <ul>        <br>        <li><strong>Weka</strong>:            <a                href="http://www.cs.waikato.ac.nz/ml/weka/index.html"                rel="noreferrer">http://www.cs.waikato.ac.nz/ml/weka/index.html</a>        </li>        <br>        <li><strong>Mallet</strong>:            <a                href="http://mallet.cs.umass.edu/"                rel="noreferrer">http://mallet.cs.umass.edu/</a>        </li>        <br>        <li><strong>Mahout</strong>:            <a                href="https://mahout.apache.org/"                rel="noreferrer">https://mahout.apache.org/</a>        </li>        <br>    </ul>    <br>    <br>    <hr>    <br>    <br>    <p>With        the        recent        (2015)        <a            href="http://www.mitpressjournals.org/doi/pdf/10.1162/COLI_a_00239"            rel="noreferrer">deep        learning        tsunami        in        NLP</a>,        possibly        you        could        consider:        <a            href="https://en.wikipedia.org/wiki/Comparison_of_deep_learning_software"            rel="noreferrer">https://en.wikipedia.org/wiki/Comparison_of_deep_learning_software</a>    <p>    <p>I'll        avoid        listing        deep        learning        tools        out        of        non-favoritism        /        neutrality.    <p>    <hr>    <br>    <br>    <p>Other        Stackoverflow        questions        that        also        asked        for        NLP/ML        tools:    <p>    <ul>        <br>        <li>            <a                href="https://stackoverflow.com/questions/2233435/machine-learning-and-natural-language-processing">Machine            Learning            and            Natural            Language            Processing</a>        </li>        <br>        <li>            <a                href="https://stackoverflow.com/questions/212219/what-are-good-starting-points-for-someone-interested-in-natural-language-process">What            are            good            starting            points            for            someone            interested            in            natural            language            processing?</a>        </li>        <br>        <li>            <a                href="https://stackoverflow.com/questions/4115526/natural-language-processing">Natural            language            processing</a>        </li>        <br>        <li>            <a                href="https://stackoverflow.com/questions/11116390/natural-language-processing-in-java-nlp">Natural            Language            Processing            in            Java            (NLP)</a>        </li>        <br>        <li>            <a                href="https://stackoverflow.com/questions/870460/is-there-a-good-natural-language-processing-library">Is            there            a            good            natural            language            processing            library</a>        </li>        <br>        <li>            <a                href="https://stackoverflow.com/questions/5833030/simple-natural-language-processing-startup-for-java">Simple            Natural            Language            Processing            Startup            for            Java</a>        </li>        <br>        <li>            <a                href="https://stackoverflow.com/questions/11849134/what-libraries-offer-basic-or-advanced-nlp-methods">What            libraries            offer            basic            or            advanced            NLP            methods?</a>        </li>        <br>        <li>            <a                href="https://stackoverflow.com/questions/3886913/latest-good-languages-and-books-for-natural-language-processing-the-basics?rq=1">Latest            good            languages            and            books            for            Natural            Language            Processing,            the            basics</a>        </li>        <br>        <li>(For            NER)            <a                href="https://stackoverflow.com/questions/7455188/entity-extraction-recognition-with-free-tools-while-feeding-lucene-index">Entity            Extraction/Recognition            with            free            tools            while            feeding            Lucene            Index</a>        </li>        <br>        <li>(With            PHP)            <a                href="https://stackoverflow.com/questions/4457830/nlp-programming-tools-using-php">NLP            programming            tools            using            PHP?</a>        </li>        <br>        <li>(With            Ruby)            <a                href="https://stackoverflow.com/questions/3776361/ruby-nlp-libraries">https://stackoverflow.com/questions/3776361/ruby-nlp-libraries</a>        </li>        <br>    </ul>    <br>      </div><br><p> <br>    <br><p><strong>Java</strong></p><br><br><p>The first place to look would be Stanford's <a href="http://nlp.stanford.edu/software/index.shtml">Natural Language Processing Group</a>. All of software that is distributed there is written in Java. All recent distributions require Oracle    Java 6+ or OpenJDK 7+. Distribution packages include components for command-line invocation, jar files, a Java API, and source code.</p><br><br><p>Another great option that you see in a lot of machine learning environments here (general option), is <a href="http://www.cs.waikato.ac.nz/ml/weka/">Weka</a>. Weka is a collection of machine learning algorithms for data mining tasks. The algorithms    can either be applied directly to a dataset or called from your own Java code. Weka contains tools for data pre-processing, classification, regression, clustering, association rules, and visualization. It is also well-suited for developing    new machine learning schemes.</p><br><hr><br>In terms of Java based libraries and tools, another great one that you might look at is LingPipe. alias-i.com/lingpipe<br><br><p> <br><hr><br>Generally you'd do these two tasks in the other order:<br><br><br>Do part-of-speech tagging<br><br>Run a parser using the POS tags as input<br><br>OpenNLP's documentation isn't that thorough and some of it's gotten hard to find due to the switch to apache. Some (potentially slightly out-of-date) tutorials are available in the old SF wiki.<br><br><br>You might want to take a look at the Stanford NLP tools, in particular the Stanford POS Tagger and the Stanford Parser. Both have downloads that include pre-trained model files and they also have demo files in the top-level directory thatshow how to get started with the API and short shell scripts that show how to use the tools from the command-line.<br><br><br>LingPipe might be another good toolkit to check out. A quick search here will lead you to a number of similar questions with links to other alternatives, too!<br><p> <br>Which one should i use? Stanford CoreNLP or The Stanford Parser or The Stanford POS Tagger    <br>    <br>    <br>It depends on what you want/need to do. CoreNLP includes the other two tools plus other annotators, so if you're just experimenting with different kinds of annotation, CoreNLP would be a good place to start. From this question and your    related questions, it sounds like you might benefit from reading more about computational linguistics before you get started with your task. I'd suggest Speech and Language Processing by Jurafsky and Martin: cs.colorado.edu/~martin/slp.html    <br>    <br>    <br>    <br><hr><br><br>Stanford-nlp's Bootstrapped Entity Learning:<br><br><br> https://nlp.stanford.edu/software/patternslearning.html<br><br><br>Input: seed sets (that is, dictionaries) of entities for some classes and unlabeled text.<br><br>Ouput: More entities belonging to the classes extracted from the text.<br><br>Algorithm: bootstrapped pattern-based learning.<br><br><br><hr><br><br><br><br><br>learning based java (lbjava)<br><br>[[mpt: GOOD FOR LEARNING BUT RESTRICTIVE LICENSE; CAN'T USE]]<br><br> * Developed by: The Cognitive Computations Group University of Illinois at Urbana-Champaign<br><br> * http://cogcomp.cs.illinois.edu/<br><br> * http://cogcomp.org/page/software_view/LBJava<br><br><br>Learning Based Java is a modeling language for the rapid development of software systems with one or more learned functions, designed for use with the JavaTM programming language. LBJava offers a convenient, declarative syntax for classifierand constraint definition directly in terms of the objects in the programmer's application. With LBJava, the details of feature extraction, learning, model evaluation, and inference are all abstracted away from the programmer, leavinghim to reason more directly about his application.<br><br><br>Allows training; defining custom classifiers.<br><br><br>Lots of sample java code @ http://cogcomp.org/page/software_view/LBJava<br><br><br><hr><br></div><br><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java NLP article' title='Takipi: How to Get Started with Java Machine Learning'><br><br><br><br>By Henn Idan (http://blog.takipi.com/author/henn/) - July 7, 2016<br><br><br>? 5 min read<br><br>? 3 comments (http://blog.takipi.com/how-to-get-started-with-javamachine-learning/#disqus_thread)<br><br><br><br>What are the best tools to get started with Java machine learning?<br><br><br>They've been around for a while, but these days it feels like everyone is talking<br>about artificial intelligence and machine learning. Its no longer a secret<br>reserved to scientists and researchers, with implementations in nearly any new<br>emerging technology.<br><br><br>TAKIPI BLOG (HTTP://BLOG.TAKIPI.COM/)<br><br><br><br><br>10/26/2017 How to Get Started with Java Machine Learning | Takipi Blog<br><br><br>http://blog.takipi.com/how-to-get-started-with-java-machine-learning/ 2/7<br><br><br>In the following post we'll do a quick overview of the main Java machine<br>learning frameworks, and show how easy it is to get started without<br>reinventing the wheel and creating your own algorithms from scratch.<br>New Post: How to Get Started with Java Machine Learning<br><br><br>https://t.co/ohD3zCCA6j (https://t.co/ohD3zCCA6j)<br><br><br>pic.twitter.com/MU9kwhIKJM (https://t.co/MU9kwhIKJM)<br> Takipi (@takipid) July 7, 2016<br><br><br>(https://twitter.com/takipid/status/751082272326086657)<br><br><br><h3>AI for the people</h3><br><br><br>AI is a wide and cool ??eld that has been around for a while, but always felt a<br>little bit out of reach and made especially for scientists. If you wanted to create<br>an AI system, you had to implement the core algorithms on your own and train<br>them to identify patterns, understand images and process natural language.<br>The recent buzz and evolvement around this ??eld made it more accessible for<br>non-researchers. Now you have easy access to the relevant algorithms and<br>tools. You do have to know what you're doing, but it's a lot easier to enhance<br>your applications with machine learning capabilities.<br><br><br><h3>Getting the machine going</h3><br><br><br>To make things simpler, we decided to highlight 3 projects to help get you started:<br><br><br>1. Deeplearning4J (DL4J) (http://deeplearning4j.org/) Open<br>source, distributed and commercial-grade deep-learning library for JVM<br><br><br>2. BID Data Project (http://bid2.berkeley.edu/bid-data-project/) A<br>collection of patterns that enable fast, large-scale machine learning<br>and data mining<br><br><br>3. Neuroph (http://neuroph.sourceforge.net/index.html) Objectoriented neural network<br><br><br><br>By the way, we recently published another list of interesting open source<br>GitHub libraries that caught our attention. Check it out<br><br><br>(http://blog.takipi.com/the-hitchhikers-guide-to-github-13-java-projectsyou-should-try/).<br><br><br><h3>1. DL4J Deep Learning</h3><br><br><br>DL4J is a tool made to assist you in the process of con??guring deep neural<br>networks which are made of multiple layers. It brings deep learning to the JVM<br>along with fast prototyping and customization at scale, while focusing on more<br>convention than con??guration.<br><br><br>This is the tool for those who already have the theory needed to create and use<br>deep neural networks, but don't want to actualize the algorithms themselves.<br>You can use it to solve speci??c problems involving massive amounts of data<br>and customize the neural net properties.<br><br><br>DL4J is written in Java, which makes it compatible with any JVM language such<br>as Clojure, Scala or Kotlin, and it integrates with Hadoop and Spark.<br>Possible use cases include rating or recommendation systems (CRM, adtech,<br>churn prevention), predictive analytics or even fraud detection. If you're<br>looking for a real-world example, you can check out Rapidminer<br>(https://rapidminer.com/). It's an open-source data platform that uses DL4J to<br>streamline predictive analytics processes for their users.<br><br><br>Setting up a new neural network is as easy as creating a new object:<br><br><br><br>Deeplearning4j.java (https://gist.github.com/HennTakipi/b932b32633d81c967f34d0fd769ef302#file-deeplearning4j-java)<br><br><br><code><br>MultiLayerConfiguration conf = new NeuralNetConfiguration.Builder()<br>.iterations(1)<br>.weightInit(WeightInit.XAVIER)<br>.activation("relu")<br>.optimizationAlgo(OptimizationAlgorithm.STOCHASTIC_GRADIENT_DESCENT)<br>.learningRate(0.05)<br>// ... other hyperparameters<br>.backprop(true)<br>.build();<br></code><br><br><br><br><br>The BID Data Project is made for those of you who deal with a great amount of<br>data, and are performance sensitive. This UC Berkeley project is a collection of<br>hardware, software and design patterns that enable fast and large-scale data mining.<br><br><br>The ??rst library is BIDMach, that holds the records for many common machine<br>learning problems, on single nodes or clusters. You can use it to manage data<br>sources, optimize and distribute data over CPUs or GPUs.<br>It includes many popular machine learning algorithms, and the team is working<br>on developing distributed Deep Learning networks, graph algorithms and<br>other models.<br><br><br>The other 2 libraries are BIDMat, a fast matrix algebra library that focuses on<br>data mining and BIDParse, GPU-accelerated natural language parser. Other<br>libraries in this project include visualization tools, along with libraries that will<br>let you run on Spark or even on Android.<br><br><br>BIDMach benchmarks repeatedly show better results than other solutions,<br>even with a single machine compared to alternatives running on larger<br>clusters. A full list of benchmarks can be found right here<br>(https://github.com/BIDData/BIDMach/wiki/Benchmarks).<br><br><br><br><h3>3. Neuroph</h3><br><br><br>Neuroph is a lightweight Java framework used to develop common neural<br>network architectures. The framework provides a Java library along with a GUI<br>tool (called easyNeurons), and you can use it in order to create and train your<br>very own neural networks in Java programs.<br><br><br>It contains an open source Java library, with a small number of basic classes<br>which correspond to essential neural network concepts. It's a great stepping<br>stone if you're just getting started with neural networks, or if you want to know<br>how they work.<br><br><br>You can try out Neuroph online demo (http://neuroph.sourceforge.net/online_demo.html)<br>and see how it actually<br>works. Spoiler alert: the interface looks old and outdated, but you can create<br>nice things with it. Also, it received the Duke's Choice Award for 2013<br><br><br>(http://neuroph.sourceforge.net/dukes_choice_award_2013.html).<br><br><br>(http://384uqqh5pka2ma24ild282mv.wpengine.netdna-cdn.com/wpcontent/uploads/2016/07/network.png)<br><br>Network graph view<br><br><br><br>What About the Others?<br><br><br>In case these 3 projects are not your cup of tea and you're looking for something a little different for your project, don't worry. If you search GitHub for Machine learning (https://github.com/search?l=Java&q=machine+learning&type=Repositories&utf8=%E2%9C%93)ll find 1,506 Java repositories that might give you the right tool.<br><br>For example, an interesting project from Airbnb is aerosolve (https://github.com/airbnb/aerosolve); A machine learning library designed to be human friendly.<br><br><br>Getting started with a new technology is always a source for trouble. If you will<br>need some help with your exceptions, be sure to check out the OverOps error<br>analysis tool (https://www.overops.com/).<br><br><h2>Final Thoughts</h2><br><br>Every few years there's a new buzz around AI. This time around, it came with<br>reinforcement in the form of machine learning, data mining, neural networks<br>and so on and we're all for it. The fact that these libraries are open sourced<br>means that information and abilities are up for grabs, and all you have to do is<br>think what can be done with this<br><br></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java NLP snippets notes' title='Qn on Supervised tag suggestion for documents (&quot;multiclass labelling&quot;)'><br><br><p> <br>    <br>I have thousands of documents with associated tag information. However i also have many documents without tags.    <br>    <br>    <br>I want to train a model on the documents WITH tags and then apply the trained classifier to the UNTAGGED documents; the classifier will then suggest the most appropriate tags for each UNTAGGED document.    <br>    <br>    <br>I have done quite a lot of research and there doesn't seem to be a SUPERVISED implementation to document tag classification.    <br>    <br>    <br>I know NLTK, gensim, word2vec and other libraries will be useful for this problem.    <br>    <br>    <br>I will be coding the project in Python.    <br>    <br>    <br>Any help would be greatly appreciated.    <br>    <br>    <br>python machine-learning nlp text-classification    <br>    <br>shareimprove this question    <br>    <br>asked Jun 26 at 15:55    <br>    <br>    <br>pwhc    <br>    <br><hr><br><br><br>Supervised document tagging isn't particularly uncommon, though it's usually called "multiclass labelling".<br><br><br>For many methods it's the same as single labelling but you pick the N-best results.<br><br><br>See here for a scikit example on made-up data:<br>scikit-learn.org/stable/auto_examples/plot_multilabel.html<br>polm23 Jun 27 at 4:07<br><hr><br><br>Depending on your actual use-case you might opt for more complex method but for minimum working model do:<br><br><br>1) Prepocessing of documents: tokenize, build vocabulary (NLTK has tools for this)<br><br><br>2) Do <a href='https://en.wikipedia.org/wiki/Bag-of-words_model#Application'>bag-of-words</a> encoding per document<br><br><br>3) Train a machine learning model with onehot encoding for outputs. Start from sklearn random forest, logistic regression, SVM.<br><br><br><br>answered Jun 26 at 17:46<br><br><br>Joonatan Samuel<br><br><hr><br><br>thanks, i have a minimum working model; bow representation of document text with an SVM learning model.<br><br><br>Any advice on taking it further? more pre-processing (stemming ect...). I was thinking of using WMD<br>to cluster tagged documents, then apply the model to untagged documents that would then find the most<br>similar kind of tag documents, therefore giving you your tag.<br><br><br><hr><br><br>From here it will begin to depend on your actual use case. But basically my answer is in three parts.<br><br><br>1) preprocessing<br>2) encoding<br>3) training model.<br><br><br>Depending on your actual use-case and data the prioritization will differ.<br><br><br>E.g. if you have 100mln documents but at test time don't need to worry about computation work<br>with neural networks to get model better. If you have little data you might want to look into<br>better preprocessing / encoding much more.<br><br><br><br>'m currently working on something similar, besides what @Joonatan Samuel suggested I would<br>encourage you to do careful preprocessing and considerations.<br><br><br>If you want two or more tags for documents you could train several model : one model per tag.<br><br><br>You need to consider if there will be enough cases for each model (tag)<br><br><br>If you have a lot of tags, you could run into a problem with document-tag cases like above.<br><br><br>Stick to most common tag prediction don't try to predict all tags.<br><br><br>answered Jun 26 at 18:01<br><br><br>Diego Agher<br><hr><br><br>in .NET, I'll usually do what was alluded to by samxli. I load all keywords into a hashtable.<br><br><br>I've done it with up to 120,000 keywords and it works pretty fast.<br><br><br>The .NET hashtable object has a contains([key]) method. So for each word in the article I'll just call:<br><br><br>theHashTable.contains(theWord)<br><br><br>If it does contain the word, I'll index it. Has worked pretty well for me without having to use other frameworks.<br><br><br>I don't know how hashtables work in PHP. You'd have to google that. I think their normal arrays work like hashtables?<br><br><br>The key to using a hashtable is that the keys are indexed for fast searching -- I think they use bTrees,<br>but someone may correct me on that. If you're not familiar with the btree concept, you might want to look that up.<br><br><br>edited Jun 6 '11 at 14:10 | answered Jun 6 '11 at 12:37<br>Trevor<br><hr><br><br><span class='mHG'>Given *A FIXED SET OF TAGS* one poss approach seems to be to:</span><br><ul><li>expand the tagList into a Map by getting ALL poss associated words (from, for example, the datamuse API)</li><li>get freq. keywords from target</li><li>lookup ea keyword; find best 'fit'</li><li>"MANUALLY TRAIN" the corpus by adding custom tags to the list which will aid disambiguation</li><ul><br><br>[[note: this is the type of method used by https://www.uclassify.com/; who then picks the result if match > 90%]]</div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java NLP snippets notes' title='General NLP Qns'><br><pre><br>Qn: I want a machine to learn to categorize short texts<br><br>I have a ton of short stories about 500 words long and I want to categorize them into one of, let's say, 20 categories:<br><br>Entertainment<br>Food<br>Music<br>etc<br>I can hand-classify a bunch of them, but I want to implement machine learning to guess the categories eventually. What's the best way to approach this? Is there a standard approach to machine learning I should be using? I don't think a decision tree would work well since it's text data...I'm completely new in this field.<br><br>Any help would be appreciated, thanks!<br><br>Ans:<br><br>A naive Bayes will most probably work for you. The method is like this:<br><br>Fix a number of categories and get a training data set of (document, category) pairs.<br>A data vector of your document will be sth like a bag of words. e.g. Take the 100 most common words except words like <br>"the", "and" and such. Each word gets a fixed component of your data vector (e.g. "food" is position 5). <br>A feature vector is then an array of booleans, each indicating whether that word came up in the corresponding document.<br>Training:<br><br>For your training set, calculate the probability of every feature and every class: <br>	p(C) = number documents of class C / total number of documents.<br>Calculate the probability of a feature in a class: <br>	p(F|C) = number of documents of class with given feature (= word "food" is in the text) / number of documents in given class.<br><br>Decision:<br><br>Given an unclassified document, the probability of it belonging to class C is proportional to <br>	P(C|F1, ..., F500) = P(C) * P(F1|C) * P(F2|C) * ... * P(F500|C). <br>Pick the C that maximizes this term.<br>Since multiplication is numerically difficult, you can use the sum of the logs instead, <br>which is maximized at the same C: <br>	log P(C|F1, ..., F500) = log P(C) + log P(F1|C) + log P(F2|C) + ... + log P(F500|C).<br><hr><br><br>Am I right in that the categories of a training set can not be altered? Probably I am a little <br>bit to lazy to do extended research. <br>  	 	<br>No, they can't. But as soon as you do, you can train a new classifier anyway.<br><hr><br>I've classified tens of thousands of short texts. What I did intially was to use a <br>tf-idf vector space model and then did k-means clustering on those vectors. <br>This is a very good initial step of exploratory data analysis to get a nice handle on your dataset. <br>The package I used to cluster was cluto: http://glaros.dtc.umn.edu/gkhome/views/cluto/<br><br>To do tf-idf, I just wrote a quick script in perl to tokenize on non-alphanumerics. Then, every <br>document consists of a bag of words. Every document is represented as a vector of the words it <br>contains. The value of each index of the vector is the term frequency (tf) * inverse document <br>frequency (idf). It's just the product of the count of that word/term in the document multiplied <br>by the reciprocal of the fraction of the documents that contain that word. <br>(because a word like "the" is very uninformative.)<br><br>This method will quickly get you about 80%-90% accuracy. You can then manually label the ones <br>that are right (or more importantly: wrong) and then do supervised learning if you so choose.<br><br><br>answered Apr 25 '10 at 19:42<br><br>user325523<br><hr><br>I think the paper "Machine learning in automated text categorization" (you can Google and <br>download the PDF file) is worth reading. The paper discussed two crucial part:one for feature selection<br>(translate text to feature space), the other for building a classifier on feature space. <br>there is a lot of feature selection methods, and several classification methods<br>(decision tree, naive Bayes, kNN, SVM, etc). you can try some combination to see if <br>it was working on your data set.<br>I did something similar before, I use Python for text manipulation, feature selection, <br>and feature weighting. and Orange for classifier. Orange and Weka already included <br>naive Bayes, kNN... , but nowadays I might write the classifier with Python script <br>directly, it shouldn't be very hard too.<br>Hope this helps.<br><br><br>answered Apr 23 '10 at 7:16<br><br>sunqiang<br><hr><br>Most people will say that statistical text analysis (like a naive Bayes approach) is <br>the standard approach: "Foundations of Statistical Natural Language Processing", <br>Manning and Schuetze and "Speech and Language Processing", Jurafsky and Martin are <br>the standard references. Statistical text analysis became the standard approach <br>during the late 90's because they easily outperformed symbolic systems. However <br>some symbolic systems incorporate statistical elements and you can also actually use <br>a connectionist approach (there are a few papers demonstrating this). You can also use <br>cosine similarity (a form of k-Nearest Neighbor) although naive Bayes is usually the <br>top performer.<br><br>Here's a good overview: http://www.cs.utexas.edu/users/hyukcho/classificationAlgorithm.html <br>I used rainbow mentioned on that page for text classification on a search engine prototype <br>I wrote on a dot com project.<br><br><br>answered Jan 15 '11 at 16:14<br><br>Kirt Undercoffer<br><hr><br>Unless there is a chance that you want to do another 500 classifications in the future I <br>am not sure I would go for a machine learning approach.<br><br>Unless the categories are very similar ("food" and "italian food" to take an example) I <br>think a quite naive heuristic could work very well.<br><br>For each category build a table of common words <br>(for food : "potato", "food", "cook", "tomato", "restaurant",...) and for each text count <br>which category got the most word matches. Instead of building the dictionary by hand <br>you could take a sample (say a 100) of the texts, categorize them by hand and then let an <br>algorithm pick out the words and then make sure to remove words that are common between <br>all sets (since they provide no information). This is, in essence, a very simple "learning" system.<br><br>If you really want a machine learning system there are a number of methods for classification. <br>The downside is that although most methods are quite simple to implement, the hard part is to <br>chose a good method, the right features, and good parameters.<br><br>answered Apr 23 '10 at 6:12<br><br>Hannes Ovr<br>11.2k34058<br>  	 	<br>This is a good point. Machine learning might not be the best approach for this. Regexps all the way!  ash Apr 23 '10 at 9:37<br><hr><br><br>Try Weka... it's a free data mining tool that implements a lot of machine learning algorithms. It has a GUI and an API, so you can use it directly to on your data set or you can program against it.<br><br>If you like the results from the various machine learning algorithms and you're still interested in implementing your own algorithms, then you can implement the one(s) that you like the most. This will also help you remove some of the "will it actually work" feeling that you normally get before you build an ML/AI algorithm.<br><br><br>answered Apr 23 '10 at 6:24<br><br>Kiril<br><hr><br>We can use NLP here. Following would be the steps as I implemented to classify emails in different categories here: 1. Lemmatization: This would remove unnecessary details and would convert all the words into their basic forms or root forms. Like, it will convert working into work, running into run, horses into horse etc. We can Stanford Lemmatizer for this purpose. http://stanfordnlp.github.io/CoreNLP/<br><br>Wordnet filtering: We can use only those words which are present in Wordnet. I used Java Wordnet Interface for this purpose. Just filter out the words that are not found in wordnet and take rest of the words. http://projects.csail.mit.edu/jwi/<br>Find synonyms and further synonyms: For each of the above 5 or 6 categories mentioned above, form separate sets containing synonyms of synonyms of these categories. For e.g., form a set that would contain synonyms of Entertainment and then further synonyms of the synonyms of entertainment found. We can increase this set using web crawling as well.<br>Feed the data: Take all the words after Lemmatization and Wordnet filtering of a particular story and check how many words matches in each category sets. For e.g., if a story contains 100 words, and it matches with 35 words in entertainment category, 40 words with food, 30 words with travel, then it is highly likely to fall under the category of food and hence it would be a food story. I got good results for my email classification using above approach.<br><br>answered Nov 30 '16 at 0:44<br><br>Ashish Kumar<br><br><hr><br>Qn: Beginner's resources/introductions to classification?<br><br>I'd recommend first starting with Support Vector Machines (SVM) for general applied classification tasks. They'll give you state-of-the-art performance, and you don't really need to understand all of the theory behind them to just use the implementation provided by a package like WEKA.<br><br>If you have a larger data-set, you might want to try using Random Forests. There's also an implementation of this algorithm in WEKA, and they train much faster on large data. While they're less broadly used than SVMs, their accuracy tends to match or nearly match the accuracy you could get from one.<br><br><hr><br>Q: Difference between classification and clustering in data mining?<br>A:<br>In general, in classification you have a set of predefined classes and want to know which class a new object belongs to.<br><br>Clustering tries to group a set of objects and find whether there is some relationship between the objects.<br><br>In the context of machine learning, classification is supervised learning and clustering is unsupervised learning.<br><hr><br>Classification -><br>Use Case: 	Classify known sample into known classes\<br>Algorithms:	Decision Trees, Bayesian classifiers<br>Data needs:	Labelled samples from a set of classes<br><hr><br><br><br><br>  <br></pre><br><br></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java NLP Naive-Bayes Classification notes' title='Naive-Bayes Text Classification Theory Explained'><br><br><br><br>Qn:<br><br>I am finding it hard to understand the process of Naive Bayes, and I was wondering if someone could explain it with a simple step by step process in English. I understand it takes comparisons by times occurred as a probability, but I have no idea how the training data is related to the actual dataset.<br><br>Please give me an explanation of what role the training set plays. I am giving a very simple example for fruits here, like banana for example<br><br>training set---<br>round-red<br>round-orange<br>oblong-yellow<br>round-red<br><br>dataset----<br>round-red<br>round-orange<br>round-red<br>round-orange<br>oblong-yellow<br>round-red<br>round-orange<br>oblong-yellow<br>oblong-yellow<br>round-red<br><br><hr><br>Ans:<br><br>I realize that this is an old question, with an established answer. The reason I'm posting is that is the accepted answer has many elements of k-NN (k-nearest neighbors), a different algorithm.<br><br>Both k-NN and NaiveBayes are classification algorithms. Conceptually, k-NN uses the idea of "nearness" to classify new entities. In k-NN 'nearness' is modeled with ideas such as Euclidean Distance or Cosine Distance. By contrast, in NaiveBayes, the concept of 'probability' is used to classify new entities.<br><br>Since the question is about Naive Bayes, here's how I'd describe the ideas and steps to someone. I'll try to do it with as few equations and in plain English as much as possible.<br><br>First, Conditional Probability & Bayes' Rule<br><br>Before someone can understand and appreciate the nuances of Naive Bayes', they need to know a couple of related concepts first, namely, the idea of Conditional Probability, and Bayes' Rule. (If you are familiar with these concepts, skip to the section titled Getting to Naive Bayes')<br><br>Conditional Probability in plain English: What is the probability that something will happen, given that something else has already happened.<br><br>Let's say that there is some Outcome O. And some Evidence E. From the way these probabilities are defined: The Probability of having both the Outcome O and Evidence E is: (Probability of O occurring) multiplied by the (Prob of E given that O happened)<br><br>One Example to understand Conditional Probability:<br><br>Let say we have a collection of US Senators. Senators could be Democrats or Republicans. They are also either male or female.<br><br>If we select one senator completely randomly, what is the probability that this person is a female Democrat? Conditional Probability can help us answer that.<br><br>Probability of (Democrat and Female Senator)= Prob(Senator is Democrat) multiplied by Conditional Probability of Being Female given that they are a Democrat.<br><br>  P(Democrat & Female) = P(Democrat) * P(Female | Democrat) <br>We could compute the exact same thing, the reverse way:<br><br>  P(Democrat & Female) = P(Female) * P(Democrat | Female) <br>Understanding Bayes Rule<br><br>Conceptually, this is a way to go from P(Evidence| Known Outcome) to P(Outcome|Known Evidence). Often, we know how frequently some particular evidence is observed, given a known outcome. We have to use this known fact to compute the reverse, to compute the chance of that outcome happening, given the evidence.<br><br>P(Outcome given that we know some Evidence) = P(Evidence given that we know the Outcome) times Prob(Outcome), scaled by the P(Evidence)<br><br>The classic example to understand Bayes' Rule:<br><br>Probability of Disease D given Test-positive = <br><br>               Prob(Test is positive|Disease) * P(Disease)<br>     _______________________________________________________________<br>     (scaled by) Prob(Testing Positive, with or without the disease)<br>Now, all this was just preamble, to get to Naive Bayes.<br><br>Getting to Naive Bayes'<br><br>So far, we have talked only about one piece of evidence. In reality, we have to predict an outcome given multiple evidence. In that case, the math gets very complicated. To get around that complication, one approach is to 'uncouple' multiple pieces of evidence, and to treat each of piece of evidence as independent. This approach is why this is called naive Bayes.<br><br>P(Outcome|Multiple Evidence) = <br>P(Evidence1|Outcome) * P(Evidence2|outcome) * ... * P(EvidenceN|outcome) * P(Outcome)<br>scaled by P(Multiple Evidence)<br>Many people choose to remember this as:<br><br>  P(Likelihood of Evidence) * Prior prob of outcome<br>P(outcome|evidence) = _________________________________________________<br>                 P(Evidence)<br>Notice a few things about this equation:<br><br>If the Prob(evidence|outcome) is 1, then we are just multiplying by 1.<br>If the Prob(some particular evidence|outcome) is 0, then the whole prob. becomes 0. If you see contradicting evidence, we can rule out that outcome.<br>Since we divide everything by P(Evidence), we can even get away without calculating it.<br>The intuition behind multiplying by the prior is so that we give high probability to more common outcomes, and low probabilities to unlikely outcomes. These are also called base rates and they are a way to scale our predicted probabilities.<br>How to Apply NaiveBayes to Predict an Outcome?<br><br>Just run the formula above for each possible outcome. Since we are trying to classify, each outcome is called a class and it has a class label. Our job is to look at the evidence, to consider how likely it is to be this class or that class, and assign a label to each entity. Again, we take a very simple approach: The class that has the highest probability is declared the "winner" and that class label gets assigned to that combination of evidences.<br><br>Fruit Example<br><br>Let's try it out on an example to increase our understanding: The OP asked for a 'fruit' identification example.<br><br>Let's say that we have data on 1000 pieces of fruit. They happen to be Banana, Orange or some Other Fruit. We know 3 characteristics about each fruit:<br><br>Whether it is Long<br>Whether it is Sweet and<br>If its color is Yellow.<br>This is our 'training set.' We will use this to predict the type of any new fruit we encounter.<br><br>Type           Long | Not Long || Sweet | Not Sweet || Yellow |Not Yellow|Total<br>             ___________________________________________________________________<br>Banana      |  400  |    100   || 350   |    150    ||  450   |  50      |  500<br>Orange      |    0  |    300   || 150   |    150    ||  300   |   0      |  300<br>Other Fruit |  100  |    100   || 150   |     50    ||   50   | 150      |  200<br>            ____________________________________________________________________<br>Total       |  500  |    500   || 650   |    350    ||  800   | 200      | 1000<br>             ___________________________________________________________________<br>We can pre-compute a lot of things about our fruit collection.<br><br>The so-called "Prior" probabilities. (If we didn't know any of the fruit attributes, this would be our guess.) These are our base rates.<br><br> P(Banana)      = 0.5 (500/1000)<br> P(Orange)      = 0.3<br> P(Other Fruit) = 0.2<br>Probability of "Evidence"<br><br>p(Long)   = 0.5<br>P(Sweet)  = 0.65<br>P(Yellow) = 0.8<br>Probability of "Likelihood"<br><br>P(Long|Banana) = 0.8<br>P(Long|Orange) = 0  [Oranges are never long in all the fruit we have seen.]<br> ....<br><br>P(Yellow|Other Fruit)     =  50/200 = 0.25<br>P(Not Yellow|Other Fruit) = 0.75<br>Given a Fruit, how to classify it?<br><br>Let's say that we are given the properties of an unknown fruit, and asked to classify it. We are told that the fruit is Long, Sweet and Yellow. Is it a Banana? Is it an Orange? Or Is it some Other Fruit?<br><br>We can simply run the numbers for each of the 3 outcomes, one by one. Then we choose the highest probability and 'classify' our unknown fruit as belonging to the class that had the highest probability based on our prior evidence (our 1000 fruit training set):<br><br>P(Banana|Long, Sweet and Yellow) <br>      P(Long|Banana) * P(Sweet|Banana) * P(Yellow|Banana) * P(banana)<br>    = _______________________________________________________________<br>  P(Long) * P(Sweet) * P(Yellow)<br><br>    = 0.8 * 0.7 * 0.9 * 0.5 / P(evidence)<br><br>    = 0.252 / P(evidence)<br><br><br>P(Orange|Long, Sweet and Yellow) = 0<br><br><br>P(Other Fruit|Long, Sweet and Yellow)<br>      P(Long|Other fruit) * P(Sweet|Other fruit) * P(Yellow|Other fruit) * P(Other Fruit)<br>    = ____________________________________________________________________________________<br>                  P(evidence)<br><br>    = (100/200 * 150/200 * 50/200 * 200/1000) / P(evidence)<br><br>    = 0.01875 / P(evidence)<br>By an overwhelming margin (0.252 >> 0.01875), we classify this Sweet/Long/Yellow fruit as likely to be a Banana.<br><br>Why is Bayes Classifier so popular?<br><br>Look at what it eventually comes down to. Just some counting and multiplication. We can pre-compute all these terms, and so classifying becomes easy, quick and efficient.<br><br>Let z = 1 / P(evidence). Now we quickly compute the following three quantities.<br><br>P(Banana|evidence) = z * Prob(Banana) * Prob(Evidence1|Banana) * Prob(Evidence2|Banana) ...<br>P(Orange|Evidence) = z * Prob(Orange) * Prob(Evidence1|Orange) * Prob(Evidence2|Orange) ...<br>P(Other|Evidence)  = z * Prob(Other)  * Prob(Evidence1|Other)  * Prob(Evidence2|Other)  ...<br>Assign the class label of whichever is the highest number, and you are done.<br><br>Despite the name, Naive Bayes turns out to be excellent in certain applications. Text classification is one area where it really shines.<br><br>Hope that helps in understanding the concepts behind the Naive Bayes algorithm.<br><br><br>edited Dec 25 '16 at 10:53<br><br>JulienD<br>3,02921743<br>answered Dec 12 '13 at 23:54<br><br>Ram Narasimhan<br><hr><br>Thanks for the very clear explanation! Easily one of the better ones floating around the web. Question: since each P(outcome/evidence) is multiplied by 1 / z=p(evidence) (which in the fruit case, means each is essentially the probability based solely on previous evidence), would it be correct to say that z doesn't matter at all for Naive Bayes? Which would thus mean that if, say, one ran into a long/sweet/yellow fruit that wasn't a banana, it'd be classified incorrectly.  covariance Dec 21 '13 at 2:30<br><hr><br>@E.Chow Yes, you are correct in that computing z doesn't matter for Naive Bayes. (It is a way to scale the probabilities to be between 0 and 1.) Note that z is product of the probabilities of all the evidence at hand. (It is different from the priors which is the base rate of the classes.) You are correct: If you did find a Long/Sweet/Yellow fruit that is not a banana, NB will classify it incorrectly as a banana, based on this training set. The algorithm is a 'best probabilistic guess based on evidence' and so it will mis-classify on occasion. Ram Narasimhan Dec 21 '13 at 6:35 <br><hr><br>Ram Narasimhan explained the concept very nicely here below is an alternative explanation through the code example of Naive Bayes in action<br>It uses an example problem from <a href='https://www.google.co.in/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=data%20mining%20concepts%20and%20techniques'>this book</a> on page 351<br>This is the data set that we will be using<br><br>In the above dataset if we give the hypothesis = {"Age":'<=30', "Income":"medium", "Student":'yes' , "Creadit_Rating":'fair'} then what is the probability that he will buy or will not buy a computer.<br>The code below exactly answers that question.<br>Just create a file called named new_dataset.csv and paste the following content.<br><br>Age,Income,Student,Creadit_Rating,Buys_Computer<br><=30,high,no,fair,no<br><=30,high,no,excellent,no<br>31-40,high,no,fair,yes<br>>40,medium,no,fair,yes<br>>40,low,yes,fair,yes<br>>40,low,yes,excellent,no<br>31-40,low,yes,excellent,yes<br><=30,medium,no,fair,no<br><=30,low,yes,fair,yes<br>>40,medium,yes,fair,yes<br><=30,medium,yes,excellent,yes<br>31-40,medium,no,excellent,yes<br>31-40,high,yes,fair,yes<br>>40,medium,no,excellent,no<br>Here is the code the comments explains everything we are doing here! [python]<br><br>import pandas as pd <br>import pprint <br><br>class Classifier():<br>    data = None<br>    class_attr = None<br>    priori = {}<br>    cp = {}<br>    hypothesis = None<br><br><br>    def __init__(self,filename=None, class_attr=None ):<br>        self.data = pd.read_csv(filename, sep=',', header =(0))<br>        self.class_attr = class_attr<br><br>    '''<br>        probability(class) =    How many  times it appears in cloumn<br>     __________________________________________<br>          count of all class attribute<br>    '''<br>    def calculate_priori(self):<br>        class_values = list(set(self.data[self.class_attr]))<br>        class_data =  list(self.data[self.class_attr])<br>        for i in class_values:<br>            self.priori[i]  = class_data.count(i)/float(len(class_data))<br>        print "Priori Values: ", self.priori<br><br>    '''<br>        Here we calculate the individual probabilites <br>        P(outcome|evidence) =   P(Likelihood of Evidence) x Prior prob of outcome<br>       ___________________________________________<br>    P(Evidence)<br>    '''<br>    def get_cp(self, attr, attr_type, class_value):<br>        data_attr = list(self.data[attr])<br>        class_data = list(self.data[self.class_attr])<br>        total =1<br>        for i in range(0, len(data_attr)):<br>            if class_data[i] == class_value and data_attr[i] == attr_type:<br>                total+=1<br>        return total/float(class_data.count(class_value))<br><br>    '''<br>        Here we calculate Likelihood of Evidence and multiple all individual probabilities with priori<br>        (Outcome|Multiple Evidence) = P(Evidence1|Outcome) x P(Evidence2|outcome) x ... x P(EvidenceN|outcome) x P(Outcome)<br>        scaled by P(Multiple Evidence)<br>    '''<br>    def calculate_conditional_probabilities(self, hypothesis):<br>        for i in self.priori:<br>            self.cp[i] = {}<br>            for j in hypothesis:<br>                self.cp[i].update({ hypothesis[j]: self.get_cp(j, hypothesis[j], i)})<br>        print "\nCalculated Conditional Probabilities: \n"<br>        pprint.pprint(self.cp)<br><br>    def classify(self):<br>        print "Result: "<br>        for i in self.cp:<br>            print i, " ==> ", reduce(lambda x, y: x*y, self.cp[i].values())*self.priori[i]<br><br>if __name__ == "__main__":<br>    c = Classifier(filename="new_dataset.csv", class_attr="Buys_Computer" )<br>    c.calculate_priori()<br>    c.hypothesis = {"Age":'<=30', "Income":"medium", "Student":'yes' , "Creadit_Rating":'fair'}<br><br>    c.calculate_conditional_probabilities(c.hypothesis)<br>    c.classify()<br>output:<br><br>Priori Values:  {'yes': 0.6428571428571429, 'no': 0.35714285714285715}<br><br>Calculated Conditional Probabilities: <br><br>{<br> 'no': {<br>        '<=30': 0.8,<br>        'fair': 0.6, <br>        'medium': 0.6, <br>        'yes': 0.4<br>        },<br>'yes': {<br>        '<=30': 0.3333333333333333,<br>        'fair': 0.7777777777777778,<br>        'medium': 0.5555555555555556,<br>        'yes': 0.7777777777777778<br>      }<br>}<br><br>Result: <br>yes  ==>  0.0720164609053<br>no  ==>  0.0411428571429<br>Hope it helps in better understanding the problem<br><br>peace<br><br><br>edited Mar 29 '16 at 12:00<br>answered Mar 29 '16 at 11:15<br><br>Sayed Zainul Abideen<br>437411<br>add a comment<br><hr><br><br>8<br>down vote<br>I try to explain the Bayes rule with an example.<br><br>Suppose that you know that 10% of people are smokers. You also know that 90% of smokers are men and 80% of them are above 20 years old.<br><br>Now you see someone who is a man and 15 years old. You want to know the chance that he be a smoker:<br><br> X = smoker | he is a man and under 20<br>As you know 10% of people are smokers your initial guess is 10% (prior probability, without knowing anything about the person) but the other evidences (that he is a man and he is 15) can contribute to this probability.<br><br>Each evidence may increase or decrease this chance. For example the fact that he is a man may increase the chance that he is a smoker, providing that this percentage (being a man) among non-smokers is lower, for example, 40%. In other words being a man must be a good indicator of being a smoker rather than a non-smoker.<br><br>We can show this contribution in another way. For each feature, you need to compare the commonness (probability) of that feature (f) independently against its probability under the given condition. (P(f) vs. P(f | x). For example, if we know that the probability of being a man is 90% in a society and 90% of smokers are also men, then knowing that someone is a man doesn't change anything (10% * (90% / 90%) = 10%). But if men contribute to 40% of the society, but 90% of the smokers, then being a man increases the chance of being an smoker (10% * (90% / 40%) = 22.5% ). In the same way, if the probability of being a man was 95% in a population, then regardless of the fact that the percentage of men among smokers is high (90%)!, the evidence of being a man decreases the chance of being an smoker! (10% * (90% / 95%) = 9.5%).<br><br>So we have:<br><br>P(X) = <br>P(smoker)* <br>(P(being a man | smoker)/P(being a man))*<br>(P(under 20 | smoker)/ P(under 20))<br>Notice in this formula we assumed that being a man and being under 20 are independent features so we multiplied them, it means that knowing that someone is under 20 has no effect on guessing that he is man or woman. But it may not be true, for example maybe most adolescence in a society are men...<br><br>To use this formula in a classifier<br><br>The classifier is given some features (man and under 20) and it must decide if he is an smoker or not. It uses the above formula to find that. To gain the needed probabilities (90%, 10%, 80%...) it uses training set. for example it counts the people in the training set that are smokers and find they contribute 10% of the sample. Then for smokers checks how many of them are men or women .... how many are above 20 or under 20....<br><br><br>edited Nov 11 '16 at 17:04<br>answered Mar 12 '16 at 16:13<br><br>Ahmad<br><hr><br><br>Qn: What is naive about Naive Bayes?<br><br>Ans: There's actually a very good example on Wikipedia:<br><br>In simple terms, a naive Bayes classifier assumes that the presence (or absence) of a particular feature of a class is unrelated to the presence (or absence) of any other feature, given the class variable. For example, a fruit may be considered to be an apple if it is red, round, and about 4" in diameter. Even if these features depend on each other or upon the existence of the other features, a naive Bayes classifier considers all of these properties to independently contribute to the probability that this fruit is an apple.<br>Basically, it's "naive" because it makes assumptions that may or may not turn out to be correct.<br><br>answered May 16 '12 at 8:35<br><br>this.lau_<br><hr><br>The wikipedia article explains it correctly, but I disagree that "it makes assumptions that may or may not turn out to be correct". With right amount of training data it does a good job of filtering out the irrelevant parameters. The "naive" part is that is does not consider dependence between the parameters.. and hence may have to look at redundant data. Chip May 16 '12 at 8:50 <br><hr><br>If your data is composed of a feature vector X = {x1, x2, ... x10} and your class labels Y = {y1, y2, .. y5}. Thus, a Bayes classifier identifies the correct class label as the one that maximizes the following formula :<br><br>P(y/X) = P(X/y) * P(y) = P(x1,x2, ... x10/ y) * P(y)<br><br>So for, it is still not Naive. However, it is hard to calculate P(x1,x2, ... x10/ Y), so we assume the features to be independent, this is what we call the Naive assumption, hence, we end up with the following formula instead<br><br>P(y/X) = P(x1/y) * P(x2/y) * ... P(x10/y) * P(y)<br><br>answered Aug 28 '13 at 19:44<br><br>gr33ndata<br><hr><br>It's called naive because it makes the assumption that all attributes are independent of each other. This assumption is why it's called naive as in lots of real world situations this does not fit. Despite this the classifier works extremely well in lots of real world situations and has comparable performance to neutral networks and SVM's in certain cases (though not all).<br><br>answered May 22 '14 at 11:09<br><br>user3664740<br><hr><br><br><br></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java NLP Naive-Bayes Classification notes' title='using Naive Bayes in real life'><br>(A seemingly brilliant) Writer mentions <a href='http://logicaltypes.blogspot.com/2014/04/b-is-for-bayesian-classifiers.html'>using Naive Bayes in real life</a> (football pool)...<br><br><br>...The beauty of a Bayesian classifier is that it's simplicity itself to implement.<br>The probabilities run away from you on a computer, because multiplying small<br>probabilities will get you into the IEEE math error zone so quickly your head<br>will spin, and your system gets all weirded out, but instead of multiplying<br>probabilities, just use a little bit of seventh grade math (in my day) and<br>simply sum their logarithms:<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp; p(x | X) = p(a | x) * p(b | x) * p(c | x) ...<br><br><br> can be re-represented as:<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp; log p(x | X) = log p(a | x) + log p(b | x) + log p(c | x) ...<br><br><br> And this way we (greatly) reduce going off into la-la land for your ALU.<br><br><br></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java NLP Naive-Bayes Classification notes' title='WEKA related'><br><br>note: these seem to be all outdated; but anyway:<br><br>WEKA FAQ: http://weka.wikispaces.com/Frequently+Asked+Questions<br>IBM DevWorks Intro (Data mining with WEKA): https://www.ibm.com/developerworks/opensource/library/os-weka1/index.html<br>Another Intro to WEKA: http://ortho.clmed.ncku.edu.tw/~emba/2006EMBA_MIS/3_16_2006/WekaIntro.pdf<br><br><hr><br>Qn: Learning Weka on the Command Line<br><br>I am fairly new to Weka and even more new to Weka on the command line. I find documentation is poor and I am struggling to figure out a few things to do. For example, want to take two .arff files, one for training, one for testing and get an output of predictions for the missing labels in the test data.<br><br>How can I do this?<br><br>I have this code as a starting block<br><br>java -classpath weka.jar weka.classifiers.meta.FilteredClassifier<br>-t "training_file_with_missing_values.arff"<br>-T "test_file_with_missing_values.arff"<br>-F weka.filters.unsupervised.attribute.ReplaceMissingValues -- -c last<br>-W weka.classifiers.functions.MultilayerPerceptron -- -L 0.3 -M 0.2 -H a<br>Running that code gives me "Illegal option -c last" and I am not sure why. I am also not going to be using MLP as NN tend to be too slow when I have a few thousand features from the text data. I know how to change it to another classifier though (like NB or libSVM so that is good).<br><br>But I am not sure how to add multiple filters in one call as I also need to add the StringToWordVector filter (and possibly the Reorder filter to make the class the last, instead of first attribute).<br><br>And then how do I get it actually output me the prediction labels of each class? And then store so those in an arff with the initial data.<br><br>machine-learning classification weka<br><br>asked Mar 15 '13 at 20:21<br><br>Reily Bourne<br><hr><br>Weka is not really the shining example of documentation, but you can still find valuable information about it on their sites. You should start with the Primer. I understand that you want to classify text files, so you should also have a look at Text categorization with WEKA.<br><br>The command line you posted in your question contains an error. I know, you copied it from my answer to another question, but I also just noticed it. You have to omit the -- -c last, because the ReplaceMissingValue filter doesn't like it.<br><br>In the Primer it says:<br><br>weka.filters.supervised<br><br>Classes below weka.filters.supervised in the class hierarchy are for supervised filtering, i.e. taking advantage of the class information. A class must be assigned via -c, for WEKA default behaviour use -c last.<br>but ReplaceMissingValue is an unsupervised filter, as is StringToWordVector.<br><br>Multiple filters<br><br>Adding multiple filter is also no problem, that is what the MultiFilter is for. The command line can get a bit messy, though: (I chose RandomForest here, because it is a lot faster than NN).<br><br>java -classpath weka.jar weka.classifiers.meta.FilteredClassifier \<br>  -t ~/weka-3-7-9/data/ReutersCorn-train.arff \<br>  -T ~/weka-3-7-9/data/ReutersCorn-test.arff \<br> -F "weka.filters.MultiFilter \<br>     -F weka.filters.unsupervised.attribute.StringToWordVector \<br>     -F weka.filters.unsupervised.attribute.Standardize" \<br> -W weka.classifiers.trees.RandomForest -- -I 100 \<br>Making predictions<br><br>Here is what the Primer says about getting the prediction:<br><br>However, if more detailed information about the classifier's predictions are necessary, -p # outputs just the predictions for each test instance, along with a range of one-based attribute ids (0 for none).<br>It is a good convention to put those general options like -p 0 directly after the class you're calling, so the command line would be<br><br>java -classpath weka.jar weka.classifiers.meta.FilteredClassifier \<br>  -t ~/weka-3-7-9/data/ReutersCorn-train.arff \<br>  -T ~/weka-3-7-9/data/ReutersCorn-test.arff \<br>  -p 0 \<br> -F "weka.filters.MultiFilter \<br>     -F weka.filters.unsupervised.attribute.StringToWordVector \<br>     -F weka.filters.unsupervised.attribute.Standardize" \<br> -W weka.classifiers.trees.RandomForest -- -I 100 \<br>Structure of WEKA classifiers/filters<br><br>But as you can see, WEKA can get very complicated when calling it from the command line. This is due to the tree structure of WEKA classifiers and filters. Though you can run only one classifier/filter per command line, it can be structured as complex as you like. For the above command, the structure looks like this:<br><br>The FilteredClassifier will initialize a filter on the training data set, filter both training and test data, then train a model on the training data and classify the given test data.<br><br>FilteredClassifier<br> |<br> + Filter<br> |<br> + Classifier<br>If we want multiple filters, we use the MultiFilter, which is only one filter, but it calls multiple others in the order they were given.<br><br>FilteredClassifier<br> |<br> + MultiFilter<br> |  |<br> |  + StringToWordVector<br> |  |<br> |  + Standardize<br> |<br> + RandomForest<br>The hard part of running something like this from the command line is assigning the desired options to the right classes, because often the option names are the same. For example, the -F option is used for the FilteredClassifier and the MultiFilter as well, so I had to use quotes to make it clear which -F belongs to what filter.<br><br>In the last line, you see that the option -I 100, which belongs to the RandomForest, can't be appended directly, because then it would be assigned to FilteredClassifier and you will get Illegal options: -I 100. Hence, you have to add -- before it.<br><br>Adding predictions to the data files<br><br>Adding the predicted class label is also possible, but even more complicated. AFAIK this can't be done in one step, but you have to train and save a model first, then use this one for predicting and assigning new class labels.<br><br>Training and saving the model:<br><br>java -classpath weka.jar weka.classifiers.meta.FilteredClassifier \<br>  -t ~/weka-3-7-9/data/ReutersCorn-train.arff \<br>  -d rf.model \<br>  -F "weka.filters.MultiFilter \<br>      -F weka.filters.unsupervised.attribute.StringToWordVector \<br>      -F weka.filters.unsupervised.attribute.Standardize" \<br>  -W weka.classifiers.trees.RandomForest -- -I 100 \<br>This will serialize the model of the trained FilteredClassifier to the file rf.model. The important thing here is that the initialized filter will also be serialized, otherwise the test set wouldn't be compatible after filtering.<br><br>Loading the model, making predictions and saving it:<br><br>java -classpath weka.jar weka.filters.supervised.attribute.AddClassification \<br>  -serialized rf.model \<br>  -classification \<br>  -remove-old-class \<br>  -i ~/weka-3-7-9/data/ReutersCorn-test.arff \<br>  -o pred.arff \<br>  -c last<br>Note:<br><br>I want to add that before writing this answer here, I had no knowledge about making predictions from the command line whatsoever. I googled your problems and then came to this answer by trial and error ;)<br><br><br>edited Nov 12 '13 at 12:58<br>answered Mar 16 '13 at 10:43<br><br>Sentry<br>3,30721832<br>1	 	<br>This is one of the most helpful 'guides' to get started using WEKA for prediction purposes - Thanks!  SPi Nov 11 '13 at 23:37<br>2	 	<br>You are an absolute saint. Is there any way to give you more credit than marking up? You deserve 1k points for this. Gthoma2 Apr 26 '14 at 0:58<br><hr><br>A better way to do all that you want to use the GUI Explorer. Here is how to do all that you want:<br><br>1) Take two separate files for training and testing.<br><br>Use 'Open File' under the Preprocess tab to choose your training file. Use 'Supplied Test Set' radio under the Classify tab to choose your test file.<br><br>2) Output the predictions for the missing labels.<br><br>Use 'More Options' and choose 'Output Predictions' under the Classify tab to see predictions.<br><br>3) Use more than one filters<br><br>Use 'Filter' under the Preprocess tab to apply as many filters as you want before classifying.<br><br>4) Make class the last attribute<br><br>This is actually unnecessary. You can choose any attribute to be your class. A class is any attribute that you want the classifier to predict. Use the Nom(Class) dropdown on the Classify tab to choose which attribute is your class.<br><br><br>answered Mar 15 '13 at 20:33<br><br>srrvnn<br>373618<br>  	 	<br>The problem with your answer for (1) is that when I do that I get the error that they are not compatible. This is because they have different features and will not allow me to test them. That's why I believe I need to use the command line to get them to have the same features. Reily Bourne Mar 15 '13 at 22:26<br>  	 	<br>@JoshWeissbock That's the problem, they must have the same features. Or you must filter them in a way that they have the same features. Sentry Mar 16 '13 at 0:23<br><hr><br><hr><br>Qn: Precision/recall for multiclass-multilabel classification<br><br>I'm wondering how to calculate precision and recall measures for multiclass multilabel classification, i.e. classification where there are more than two labels, and where each instance can have multiple labels?<br><br>machine-learning classification precision-recall<br><br>edited Mar 12 '16 at 13:31<br><br>user2314737<br><br><hr><br>Well, false would be if you didn't classified correctly, and true where it was correctly classified. Why do you worry about multiple labels? Thomas Jungblut Jan 25 '12 at 17:10 <br><br>I found a similar question, this might be a duplicate: stackoverflow.com/questions/3856013/ mehaase May 13 '12 at 23:43<br><br>The answer is that you have to compute precision and recall for each class, then average them together. E.g. if you classes A, B, and C, then your precision is:<br><br>(precision(A) + precision(B) + precision(C)) / 3<br>Same for recall.<br><br>I'm no expert, but this is what I have determined based on the following sources:<br><br>https://list.scms.waikato.ac.nz/pipermail/wekalist/2011-March/051575.html http://stats.stackexchange.com/questions/21551/how-to-compute-precision-recall-for-multiclass-multilabel-classification<br><br><br>answered May 13 '12 at 23:46<br><br>mehaase<br>15.3k44257<br>3	 	<br>If your data has unbalanced number of labels, this averaging may not reflect the real performance.  tashuhka Aug 13 '14 at 14:25<br><br><hr><br><br>For multi-label classification you have two ways to go First consider the following.<br><br>$n$ is the number of examples.<br>$Y_i$ is the ground truth label assignment of the $i^{th}$ example..<br>$x_i$ is the $i^{th}$ example.<br>$h(x_i)$ is the predicted labels for the $i^{th}$ example.<br>Example based<br><br>The metrics are computed in a per datapoint manner. For each predicted label its only its score is computed, and then these scores are aggregated over all the datapoints.<br><br>Precision = $\frac{1}{n}\sum_{i=1}^{n}\frac{|Y_{i}\cap h(x_{i})|}{|h(x_{i})|}$ , The ratio of how much of the predicted is correct. The numerator finds how many labels in the predicted vector has common with the ground truth, and the ratio computes, how many of the predicted true labels are actually in the ground truth.<br>Recall = $\frac{1}{n}\sum_{i=1}^{n}\frac{|Y_{i}\cap h(x_{i})|}{|Y_{i}|}$ , The ratio of how many of the actual labels were predicted. The numerator finds how many labels in the predicted vector has common with the ground truth (as above), then finds the ratio to the number of actual labels, therefore getting what fraction of the actual labels were predicted.<br>There are other metrics as well.<br><br>Label based<br><br>Here the things are done labels-wise. For each label the metrics (eg. precision, recall) are computed and then these label-wise metrics are aggregated. Hence, in this case you end up computing the precision/recall for each label over the entire dataset, as you do for a binary classification (as each label has a binary assignment), then aggregate it.<br><br>The easy way is to present the general form.<br><br>This is just an extension of the standard multi-class equivalent.<br><br>Macro averaged $\frac{1}{q}\sum_{j=1}^{q}B(TP_{j},FP_{j},TN_{j},FN_{j})$<br>Micro averaged $B(\sum_{j=1}^{q}TP_{j},\sum_{j=1}^{q}FP_{j},\sum_{j=1}^{q}TN_{j},\sum_{j=1}^{q}FN_{j})$<br>Here the $TP_{j},FP_{j},TN_{j},FN_{j}$ are the true positive, false positive, true negative and false negative counts respectively for only the $j^{th}$ label.<br><br>Here $B$ stands for any of the confusion-matrix based metric. In your case you would plug in the standard precision and recall formulas. For macro average you pass in the per label count and then sum, for micro average you average the counts first, then apply your metric function.<br><br>You might be interested to have a look into the code for the mult-label metrics here , which a part of the package mldr in R. Also you might be interested to look into the Java multi-label library MULAN.<br><br>This is a nice paper to get into the different metrics: A Review on Multi-Label Learning Algorithms<br><br><br>edited Sep 9 '16 at 21:42<br>answered Sep 9 '16 at 21:33<br><br>phoxis<br><hr><br>Let us assume that we have a 3-class multi classification problem with labels A, B and C.<br>The first thing to do is to generate a confusion matrix. Note that the values in the diagonal are always the true positives (TP).<br>Now, to compute recall for label A you can read off the values from the confusion matrix and compute:<br>= TP_A/(TP_A+FN_A)<br>= TP_A/(Total gold labels for A)<br>Now, let us compute precision for label A, you can read off the values from the confusion matrix and compute:<br>= TP_A/(TP_A+FP_A)<br>= TP_A/(Total predicted as A)<br>You just need to do the same for the remaining labels B and C. This applies to any multi-class classification problem.<br>Here is the full article that talks about how to compute precision and recall for any multi-class classification problem, including examples.<br><br><br>edited Oct 23 '14 at 20:55<br><br>honk<br><hr><br>Simple averaging will do if the classes are balanced.<br><br>Otherwise, recall for each real class needs to be weighted by prevalence of the class, and precision for each predicted label needs to be weighted by the bias (probability) for each label. Either way you get Rand Accuracy.<br><br>A more direct way is to make a normalized contingency table (divide by N so table adds up to 1 for each combination of label and class) and add the diagonal to get Rand Accuracy.<br><br>But if classes aren't balanced, the bias remains and a chance corrected method such as kappa is more appropriate, or better still ROC analysis or a chance correct measure such as informedness (height above the chance line in ROC).<br><br><br>answered Mar 20 '15 at 7:18<br><br>David M W Powers<br><hr><br><hr><br>Qn: How to interpret weka classification?<br><br>How can we interpret the classification result in weka using naive bayes?<br><br>How is mean, std deviation, weight sum and precision calculated?<br><br>How is kappa statistic, mean absolute error, root mean squared error etc calculated?<br><br>What is the interpretation of the confusion matrix?<br><br>computer-vision classification weka<br>shareimprove this question<br>edited May 10 '12 at 20:54<br><br>Atilla Ozgur<br><br>Ans:<br><br>Below is some sample output for a naive Bayes classifier, using 10-fold cross-validation. There's a lot of information there, and what you should focus on depends on your application. I'll explain some of the results below, to get you started.<br><br>=== Stratified cross-validation ===<br>=== Summary ===<br><br>Correctly Classified Instances          71               71      %<br>Incorrectly Classified Instances        29               29      %<br>Kappa statistic  0.3108<br>Mean absolute error  0.3333<br>Root mean squared error                  0.4662<br>Relative absolute error                 69.9453 %<br>Root relative squared error             95.5466 %<br>Total Number of Instances              100     <br><br>=== Detailed Accuracy By Class ===<br><br>               TP Rate   FP Rate   Precision   Recall  F-Measure   ROC Area  Class<br>                 0.967     0.692      0.686     0.967     0.803      0.709    0<br>                 0.308     0.033      0.857     0.308     0.453      0.708    1<br>Weighted Avg.    0.71      0.435      0.753     0.71      0.666      0.709<br><br>=== Confusion Matrix ===<br><br>  a  b   &lt;-- classified as<br> 59  2 |  a = 0<br> 27 12 |  b = 1<br>The correctly and incorrectly classified instances show the percentage of test instances that were correctly and incorrectly classified. The raw numbers are shown in the confusion matrix, with a and b representing the class labels. Here there were 100 instances, so the percentages and raw numbers add up, aa + bb = 59 + 12 = 71, ab + ba = 27 + 2 = 29.<br><br>The percentage of correctly classified instances is often called accuracy or sample accuracy. It has some disadvantages as a performance estimate (not chance corrected, not sensitive to class distribution), so you'll probably want to look at some of the other numbers. ROC Area, or area under the ROC curve, is my preferred measure.<br><br>Kappa is a chance-corrected measure of agreement between the classifications and the true classes. It's calculated by taking the agreement expected by chance away from the observed agreement and dividing by the maximum possible agreement. A value greater than 0 means that your classifier is doing better than chance (it really should be!).<br><br>The error rates are used for numeric prediction rather than classification. In numeric prediction, predictions aren't just right or wrong, the error has a magnitude, and these measures reflect that.<br><br>Hopefully that will get you started.<br><br><br>edited Nov 18 '11 at 12:45<br>answered Aug 16 '10 at 0:33<br><br>michaeltwofish<br><br>--------------------------------------<br><br>To elaborate on michaeltwofish's answer, some notes on the remaining values:<br><br>TP Rate: rate of true positives (instances correctly classified as a given class)<br>FP Rate: rate of false positives (instances falsely classified as a given class)<br>Precision: proportion of instances that are truly of a class divided by the total instances classified as that class<br>Recall: proportion of instances classified as a given class divided by the actual total in that class (equivalent to TP rate)<br>F-Measure: A combined measure for precision and recall calculated as 2 * Precision * Recall / (Precision + Recall)<br>As for the ROC area measurement, I agree with michaeltwofish that this is one of the most important values output by Weka. An "optimal" classifier will have ROC area values approaching 1, with 0.5 being comparable to "random guessing" (similar to a Kappa statistic of 0).<br><br>It should be noted that the "balance" of the data set needs to be taken into account when interpreting results. Unbalanced data sets in which a disproportionately large amount of instances belong to a certain class may lead to high accuracy rates even though the classifier may not necessarily be particularly good.<br><br>Further reading:<br><br>https://www.cs.auckland.ac.nz/courses/compsci367s1c/tutorials/IntroductionToWeka.pdf<br>http://en.wikipedia.org/wiki/Receiver_operating_characteristic#Basic_concept<br>http://en.wikipedia.org/wiki/Information_retrieval#Performance_and_correctness_measures<br><br>edited Mar 19 '14 at 16:30<br><br>projekt-fisch<br>6411<br>answered Feb 4 '14 at 11:31<br><br>Hybrid System<br><hr><hr><br>Qn: How to read the classifier confusion matrix in WEKA<br><br>Sorry, I am new to WEKA and just learning.<br><br>In my decision tree (J48) classifier output, there is a confusion Matrix:<br><br>a    b   &lt;----- classified as<br>130  8     a = functional<br>15   150   b = non-functional<br>How do I read this matrix? What's the difference between a & b?<br>Also, can anyone explain to me what domain values are?<br>classification weka decision-tree<br>shareimprove this question<br>edited Dec 12 '13 at 17:01<br><br>Sam Rad<br><br>Ans:<br><br>Have you read the wikipedia page on confusion matrices? The text around the matrix is arranged slightly differently in their example (row labels on the left instead of on the right), but you read it just the same.<br><br>The row indicates the true class, the column indicates the classifier output. Each entry, then, gives the number of instances of <row>that were classified as <column>. In your example, 15 Bs were (incorrectly) classified as As, 150 Bs were correctly classified as Bs, etc.<br><br>As a result, all correct classifications are on the top-left to bottom-right diagonal. Everything off that diagonal is an incorrect classification of some sort.<br><br><br>edited Oct 23 '13 at 16:19<br>answered Mar 5 '13 at 1:28<br><br>Junuxx<br><hr><br>I'd put it this way:<br><br>The confusion matrix is Weka reporting on how good this J48 model is in terms of what it gets right, and what it gets wrong.<br><br>In your data, the target variable was either "functional" or "non-functional;" the right side of the matrix tells you that column "a" is functional, and "b" is non-functional.<br><br>The columns tell you how your model classified your samples - it's what the model predicted:<br><br>The first column contains all the samples which your model thinks are "a" - 145 of them, total<br>The second column contains all the samples which your model thinks are "b" - 158 of them<br>The rows, on the other hand, represent reality:<br><br>The first row contains all the samples which really are "a" - 138 of them, total<br>The second row contains all the samples which really are "b" - 165 of them<br>Knowing the columns and rows, you can dig into the details:<br><br>Top left, 130, are things your model thinks are "a" which really are "a" &lt;- these were correct<br>Bottom left, 15, are things your model thinks are "a" but which are really "b" &lt;- one kind of error<br>Top right, 8, are things your model thinks are "b" but which really are "a" &lt;- another kind of error<br>Bottom right, 150 are things your model thinks are "b" which really are "b"<br>So top-left and bottom-right of the matrix are showing things your model gets right.<br><br>Bottom-left and top-right of the matrix are are showing where your model is confused.<br><br><br>answered Oct 28 '14 at 19:14<br><br>Mental Nomad<br><hr></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java NLP bookmark' title='NLP links'><h2>NLP Links</h2><br><pre><br>https://www.uclassify.com/<br>uClassify is a free machine learning web service where you can easily create and use text classifiers.<br>We offer generous licenses, you can make 500 free calls per day!<br>Join 41022 developers and bring machine learning into your project! We provide simple and powerful JSON and XML APIs that allows you to use, create, train private and public classifiers<br>We love machine learning and so does our community who have created 3824 classifiers! Sentiment, Topics, Language detection, IAB, Mood, Gender, Age and Myers Briggs are some of our most popular and many are available in multiple languages!<br><hr><br>http://text-processing.com/<br>Natural Language Processing APIs and Python NLTK Demos:<br>Natural Language Text Processing APIs<br><br>The Text Processing API supports the following functionality:<br>	Stemming & Lemmatization<br>	Sentiment Analysis<br>	Tagging and Chunk Extraction<br>	Phrase Extraction & Named Entity Recognition<br>	The APIs are currently open & free, but limited. If you'd like higher limits, then signup for the Mashape Text-Processing API. If you have any questions, please checkout the FAQ or the StreamHacker blog.<br><br>Python NLTK Demos<br><br>You can also see demos of all the API functionality:<br><br>	Stemming Demo<br>	Sentiment Analysis Demo<br>	Tagging and Chunk Extraction Demo<br>	Tokenization Demo<br></pre><hr></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java NLP bookmark notes' title='Mallet: Link / notes'><br>Quick Start				http://mallet.cs.umass.edu/quick-start.php<br>Document Classification Quck Start	http://mallet.cs.umass.edu/classification.php<br><br>MALLET is a Java toolkit for machine learning applied to natural language. It provides facilities for document classification, information extraction, part-of-speech tagging, noun phrase segmentation, general finite state transducers and classification, and much more---all desgined to be extremely efficient for large data and feature sets. Although quite mature in functionality, documentation is still sparse.<br><br>The toolkit is Open Source Software, and is released under the Common Public License.<br><br>From the dev guide:<br><br>Document Classification Developer's Guide<br><br>MALLET provides a simple interface to a large collection of classification algorithms. The examples provided here include some of the common tasks required to add classification techniques to your software.<br><br>All classifiers (MaxEnt, NaiveBayes, DecisionTree, etc.) extend the Classifier object. Each type of classifier has its own trainer class, all of which extend the ClassifierTrainer class. In this example, we train a MaxEnt classifier using a list of training instances (for information on creating instance lists, see the data import developer's guide).<br><br>Allows saving trained Classifiers; allows using multiple algorythms (Naive B. default, also<br>has options incl Max Entropy/C45/DecisionTree/others) see http://mallet.cs.umass.edu/classification.php<br><br>In addition, MALLET provides tools for evaluating classifiers.<br><br>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <br><br>Prof. Andrew McCallum<br>Computer Science Department<br>University of Massachusetts Amherst<br><br>(guy behind MALLET)<br><br><a href='http://www.cs.cmu.edu/~mccallum/bow/'>Bow</a>: A Toolkit for Statistical Language Modeling, Text Retrieval, Classification and Clustering<br><br>Bow (or libbow) is a library of C code useful for writing statistical text analysis, language modeling and information retrieval programs. The current distribution includes the library, as well as front-ends for document classification (rainbow), document retrieval (arrow) and document clustering (crossbow).<br><br>Bow Library Front-Ends<br><br>Provided in the library source distribution, there are currently three executable programs based on the library.<br>Rainbow is an executable program that does document classification. While mostly designed for classification by naive Bayes, it also provides TFIDF/Rocchio, Probabilistic Indexing and K-nearest neighbor.<br>Arrow is an executable program that does document retrieval. It currently only performs simple TFIDF-based retrieval.<br>Crossbow is a an executable program that does document clustering (and also classification).<br><br>Src code: http://www.cs.cmu.edu/~mccallum/bow/src<br>The code conforms to the GNU coding standards. It is released under the Library GNU Public License (LGPL).<br><br><br></div><br><div dojoType='com.trivedi.oPls.mPane' tags='java NLP snippets' title='Snippets of some Mallet classes to @Override'><br>As the process moves thro the pipe; the instance data can change type from 1 data type to another.<br>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <br>/**Alphabet.java<br> *  A mapping between integers and objects where the mapping in each<br> * direction is efficient.  Integers are assigned consecutively, starting<br> * at zero, as objects are added to the Alphabet.  Objects can not be<br> * deleted from the Alphabet and thus the integers are never reused.<br> * <br> * The most common use of an alphabet is as a dictionary of feature names<br> * associated with a {@link cc.mallet.types.FeatureVector} in an<br> * {@link cc.mallet.types.Instance}. In a simple doc classification usage,<br> * each unique word in a document would be a unique entry in the Alphabet<br> * with a unique integer associated with it.   FeatureVectors rely on<br> * the integer part of the mapping to efficiently represent the subset of<br> * the Alphabet present in the FeatureVector.<br> *<br> * @see FeatureVector<br> * @see Instance<br> * @see cc.mallet.pipe.Pipe<br> */<br>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <br>Text2Classify.java:<br>	while (iterator.hasNext()) {<br>			Instance instance = iterator.next();<br>			<br>			Labeling labeling = classifier.classify(instance).getLabeling();<br><br>			[StringBuilder] output.append(instance.getName());<br><br>			for (int location = 0; location < labeling.numLocations(); location++) {<br>				output.append("\t" + labeling.labelAtLocation(location));<br>				output.append("\t" + labeling.valueAtLocation(location));<br>			}<br>			out.println(output);<br><br><br>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <br>Text2Vectors.java:<br>/**<br> * Convert document files into vectors (a persistent instance list).<br><br>		ArrayList<Pipe>pipeList = new ArrayList<Pipe>();<br><br>			// Convert the "target" object into a numeric index<br>			//  into a LabelAlphabet.<br>			pipeList.add(new Target2Label());<br><br>			// Set "data" to the file's contents. "data" is now a String.<br>			pipeList.add( new Input2CharSequence(encoding.value) );<br><br>		// Tokenize the input: first compile the tokenization pattern<br>		tokenPattern = Pattern.compile(tokenRegex.value);<br><br>			// Add the tokenizer<br>			pipeList.add(new CharSequence2TokenSequence(tokenPattern));<br><br><br>		// So far we have a sequence of Token objects that contain <br>		//  String values. Look these up in an alphabet and store integer IDs<br>		//  ("features") instead of Strings.<br>			pipeList.add( new TokenSequence2FeatureSequenceWithBigrams() );<br><br>	// write vector file	ObjectOutputStream oos;......<br>	oos.writeObject(instances);<br>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <br>public class Instance{<br>	protected Object data;		// The input data in digested form, e.g. a FeatureVector<br>	protected Object target;	// Output data; often a label associated with the instance<br>	protected Object name;		// A readable name of the source, e.g. filename<br>	protected Object source;	/* The input in a reproducable form, e.g. enabling re-print of<br>					 string w/ POS tags, usually without target information,<br>					 e.g. human-readable sourceinformation, such as the original text */<br>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <br><br>package cc.mallet.util;<br><br>import cc.mallet.types.*;<br>import java.io.*;<br><br>public class InstanceListPrinter {<br><br>	public static void main(String[] args) throws Exception {<br>		InstanceList instances = InstanceList.load(new File(Paths.get(System.getProperty("user.dir"), "")));<br><br>		for (Instance instance: instances) {<br>			System.out.println("Name: " + instance.getName());<br>			System.out.println("Target: " + instance.getTarget());<br>			System.out.println("Data: " + instance.getData());<br>		}<br>	}<br><br>}<br><br></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java oPls bookmark backups' title='Git links'><br><br><br><br> 2017-11-03 All <a href='8efbb2dc3640cbc7a2822c63cbff70f1'>java PDFs</a> upto 11.03 (9mb zipped, ~12 mb .64)<br><br> 2017-10-26 Earlier <a href='df0570a17637d99c1598a80679ae10f3'>archive</a> (Java articles: 3 files ~10Mb, 1 4 mb)<br><br> Gist w/ <a href="85389fb428532a19ef416a6ecc4265d3#file-dzone-articles">PDF file</a> of DZone java articles<br><hr><br><br><br><a href="6cc10a7b4d38286d822d77678da99611">ecj</a><br><br><a href="c74b6cd119cfb9d44c65e97167dc6e7e">deco</a><br><br><br>FT news srch critera: ANOTHER GOOD POSSIBILITY: search for FT "Stories" e.g. -> http://infoweb.newsbank.com/resources/doc/nb/news/137A82918C6C5FC8?p=AWNB<br><hr><br><br>&emsp;<br><br>02.18 &emsp;<a href=""></a>More LRB articles (we're now upto, not inc, - https://www.lrb.co.uk/v37/n04/contents Feb 2015)<br> 7f9b4e7b7595d9d8b8b3a8f62a2fba4c<br><br><br>02.16 &emsp;<a href=""></a>FT.exe & sys.exe 2692af74e654dc31552b9e7d81950fbc<br><br>02.16 &emsp;<a href=""></a>FT+other arts|430k words|11/16 upto today Note: Desi arts don't have "Please do not..." etc., so best to split on "Copyright:"<br> 6f9295453cc79f8f410fe6ef73e79ccd<br><br><br>02.15 &emsp;<a href="750f3aa64d8bad54394754c22e499124">ANSI_to_UTF8.txt notes</a><br><br>02.15 &emsp;<a href="7567a060ad769e84a256890eb41736db">today.nyt</a><br><br>02.15 &emsp;<a href="caadf39a8d6ba65e20e614df320646ee">LRB art</a> imports (incl earlier link)<br><br>02.14 &emsp; <a href="a01c56cd3a0ce4b6d0b0afc9f77e6117">SYS.bin</a> eod<br><br>02.14 &emsp;<a href="67d7f03a82a372d1e64d5cd889fdd1dd">FT</a> eod redux w/sel arts<br><br>02.13 &emsp;<a href="e5c95d95614a79bbb6299f25297edb2f">updates</a> ~100K (src updated; added new shell; blt StopWords & wordlist)<br><br><br>02.10 &emsp;crypto work <a href="9b992afedf238af78f219b8db8cd38c2">pbe</a> & <a href="fb1663cfab479ed340ed7b8f2cc295d5">also</a><br><br>02.07 &emsp;FT <a href="d62c1a7d20173d8f42e5b2768359994d">runtime</a> & <a href="d988311d06740243f5f3f631373d5f20">update</a><br><br>02.05 &emsp;Feb sys contains <a href="1e436ff4c9186d09209f0ac6613c091f">FT db</a><br><br>02.04 &emsp;All <a href="1eb3ec4794203655654835472cff6fcb">unproc FT arts</a><br><br>02.04 &emsp;All <a href="2bb54f1d121ee1d56ba40c8cc714866b">art leads</a> (excludes FT coz we won't be tagging these)<br><br>01.27pm &emsp;<a href="9a7b2e8638fb4940aa2ec1bdf362fec9">added pubDates/titles</a><br><br>01.27pm &emsp;raw <a href="704829f3def1623187fd2769439e7f11">FT imports</a><br><br>01.25 &emsp;<a href="fc0d231c1edee4269e4df6fd935284eb">old tagger</a> to update the tags / reset before rebuilding the incremental Classifier<br><br>01.19 - 01.24 &emsp;<a href="7e5518bb522eb55430d53ecb9b692e64">mallet work</a> begins<br><br>01.17pm &emsp;<a href="9b4256e35578ec3009562ed687b0bc25">sys w miniTag db</a>, admin etc.<br><br>01.06 db &emsp;<a href="9fa31f7f5df3cc4269aef0357a4d32df">reconciled</a>; poss impDat on 07<br><br>01.04 &emsp;<a href="2ffc81db7736b10736c9fce07f48a874">earliest dat</a> for yr<br><br>11.19 &emsp;<a href="0c5d963a4b96ab192cd2f1457ba130c3">links to imps</a><br><br><a href="b9dccfc258a126cc520c4117da073c8a">shellv3</a><br><br>art <a href="bc56b37390da5780f5ff4901e7811258">archives</a><br><br>src <a href="fc3ab5b8a3e33028b524707b26dfe512">11.17</a><br><br><a href="170bc8043ff368cd73bc6e5f9ab41746">shell v5</a><br><br>11.15 &emsp;<a href="0409edbfc6a3de69217042c657bc8635">refactored</a> sys<br><br>11.05 &emsp;has <a href="bfb2599b61d669a3f5980408f3d40b91">reduced</a> arts<br><br>To read: https://www.nytimes.com/2017/11/17/realestate/peek-inside-new-york-citys-glamorous-apartments.html<br><br>Selected Newspapers (FT/Times/Guard/Obs) 2016 > 2k<br><br>Covered first 1500 results; remaining: Showing 1,501-1,550 of 3,827 Results<br><br>Sort: Oldest matches first Page Options<br><br><a href="http://infoweb.newsbank.com/resources/search/nb?page=30&p=AWNB&b=results&t=pubname%3AFIN2%7CEGLL%7CEOLL%7CLSTB%7CLTIB%21Multiple%2BPublications&maxresults=50&fld0=alltext&val0=%28NOT%20goal%29%20AND%20%28Not%20score%29%20AND%20%28NOT%20wicket%29&bln1=AND&fld1=YMD_date&val1=2016&bln2=AND&fld2=lexs&val2=&bln3=AND&fld3=wct&val3=2000-999999&sort=YMD_date%3AA">srch criteria</a><br><p> <br><hr><br><br>20171009&emsp; <a href="6b20768e83e2a19d0325dc49df0611d7">only src & batch files</a><br><br>20171009&emsp; <a href='5d1e7b8cff20cfbeb3ddcce7c170db53'>dat file</a><br><br>20170922&emsp; <a href='8f1e7e1256d756d3ae5f3c1a74fd0ec7'>processed</a> articles (w/headers) incl jan-may and some others; also all reading links within links.html<br><br>20170925 &emsp;<a href='0a897656415eab565b0f405798dac28e'>links</a> to all imps<br><br>20170131 &emsp;<a href='3c592cef946a878b743811dda8538876'>animation tests</a><br><br>20170503 &emsp;<a href='ae86e888f599405baba106743838d9be'>archive</a> - 9mb, but contains evertything, incl Platform src; jface stuff; java openJFX src<br><br>20170225mpt&emsp; <a href=" ed8110e936097e6c3e42e771259269b4 ">testShell.java</a> incl. mDialog & mAlert classes<br><br>20161227mpt &emsp;<a class='mHK' href="/8fb48f6b3964e7625cce00e3336a8afe">mData.txt</a><br><br>20161207 &emsp;last <a class='mHK' href=" 20161207mpt">bookmarks</a> (12/07)<br><br>20170223mpt&emsp; <a href="164f83ae9df3d2143d9e78d4673ae642/raw/a59f4362f089f6c1c7c3aa5755735e82fbe81e8f/gistfile1.txt">testFx.java</a> 2:30pm test to instantiate a non-imported class (controlsFx)<br><br>20170222mpt&emsp;<a href="9c12c3e4c5ce2a2f949f4afe857ac592">mikeT.java</a> w/ new internal classes<br><br>20170312mpt&emsp; <a href="96cfeaa8975c88e888fbb88e6a21ae37">mM, mD, mT 64</a><br><br><hr><br>reading (<a href="561681487d5f6581d535bb78dff99d4e">Jan-May 2017</a>):<br><br><br>reading: (<a href="1f0121d2cbdab78f1965ae830e08d25d">nabokov/stoic</a>) needs to be tagged<br><br><br>9/21 oplus <a href="0239529b520968ba97cd41f39ba8ea0c">3p</a><br></div><br><br><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java oPls bookmark backups' title='backApes etc.'><br>on PostImage -><p> <br><a href="https://i.postimg.cc/FH426pZV/image.jpg">904?</a><a href="https://i.postimg.cc/pLJgMjcb/image.jpg">904?</a>    <br><p> <br>    <br><a href="https://i.postimg.cc/RFC9Hk8Z/0917dat1.jpg">0917dat1</a>&nbsp;    <br><a href="https://i.postimg.cc/1X2Zbfz8/0917dat2.jpg">0917dat2</a>&nbsp;    <br><a href="https://i.postimg.cc/1RjP8YKy/0917dat3.jpg">0917dat3</a> &nbsp;    <br><a href="https://i.postimg.cc/26HYFHRF/0917dat4.jpg">0917dat4</a>&nbsp;    <br><p> <br><a href="https://i.postimg.cc/vDF83C9V/aug_fin.jpg">aug2018 sys backups</a>&nbsp;    <br><a href="https://i.postimg.cc/jdPytbMB/junjul_fin.jpg">junjul2018 sys backups</a>&nbsp;    <br><hr><p> <br>on imgur -><p> <br>    <br><a href="https://i.imgur.com/qaGiQTI.jpg">0904 dat backups</a>&nbsp;    <br><a href="https://i.imgur.com/XwMBdiSg.jpg">0904 dat backups</a>&nbsp;    <br><a href="https://i.imgur.com/63ScsV6g.jpg">??</a>&nbsp;    <br><a href="https://i.imgur.com/BxWaxC0g.jpg">??</a>&nbsp;    <br><p> <br>0904 dat backups:    <br><a href="https://i.imgur.com/UNnzygY.jpg">1</a>&nbsp;    <br><a href="https://i.imgur.com/FFid2IJ.jpg">2</a>&nbsp;    <br><a href="https://i.imgur.com/jKK689V.jpg">3</a>&nbsp;    <br><a href="https://i.imgur.com/ljlsatN.jpg">4</a>&nbsp;    <br><hr><br> backups from 2018.11.05 -><br> https://ibb.co/fpNFq0<br> https://www.turboimagehost.com/p/39619698/angry2018.11.05.jpg.html<br> https://i.postimg.cc/fk43wMR1/angry2018-11-05.jpg<br> https://www.mediafire.com/view/h8hh7b1sd998t51/angry2018.11.05.jpg/file<br><br> 1106 -> https://postimg.cc/K4CBpnh6<br> 1113 -> https://postimg.cc/qtVXSDk7 (sys)<br> 1127 -> https://postimg.cc/62Gq37gG (sys)<br> jdk11 runT => https://postimg.cc/gallery/2ru9gqoqw/<br> 1205sys-> https://postimg.cc/GHBpmqc1<br> 1209sys-> https://postimg.cc/kRv6Q1vc<br><br>EOY sys:<br>https://www.turboimagehost.com/p/39948779/angryEOY.jpg.html<br>https://ibb.co/1vk2FFg<br>http://www.mediafire.com/view/hzrid4xffvy33vd/angryEOY.jpg<br>https://postimg.cc/D48JMt9f<br></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java article' title='DZone: A Hashing Implementation Using java.util.Objects'><br><br>by Arun Pandey | Dec. 29, 16 Java Zone<br><br>Just released, a free O'Reilly book on Reactive Microsystems: The Evolution of Microservices at Scale.<br><br>Brought to you in partnership with Lightbend.<br><br><hr><br><p> <br>Most applications require an extensive hashing implementation, and writing a good hashing algorithm is    <br>always a tedious job. To get rid of this ugly and tedious hashCode and equals implementation, Java    <br>introduced an API called java.util.Objects in Java 7, which contains a set of utility methods and is useful    <br>in combination with Object instances.    <br><p> <br>Now let's see an example to understand this cool feature.    <br>Here, Person is a class that needs hashCode() and equals() method implementation.    <br>    <br><h2>Prior to Java 7</h2><br><br>Using Java 6, we generate the equals() and hashCode() methods using the Eclipse IDE.<br><br><h3>Person.java</h3><br><code><br>/**<br>4 * @author arun.pandey<br>5 */<br>6 public class Person {<br>7 String ssn;<br>8 String name;<br>9<br>10 public Person(){}<br>11<br>12 public Person(String ssn, String name){<br>13 this.ssn = ssn;<br>14 this.name = name;<br>15 }<br>16<br>17 public String getId() {<br>18 return ssn;<br>19 }<br>20<br>21 public void setId(String id) {<br>22 this.ssn = id;<br>23 }<br>24<br>25 public String getName() {<br>26 return name;<br>27 }<br>28<br>29 public void setName(String name) {<br>30 this.name = name;<br>31 }<br>32<br>33 /* (non-Javadoc)<br>34 * @see java.lang.Object#hashCode()<br>35 */<br>36 @Override<br>37 public int hashCode() {<br>38 final int prime = 31;<br>39 int result = 1;<br>40<br>41 result = prime * result + ((name == null) ? 0 : name.hashCode());<br>42 result = prime * result + ((ssn == null) ? 0 : ssn.hashCode());<br>43 return result;<br>44 }<br>45<br>46 /* (non-Javadoc)<br>47 * @see java.lang.Object#equals(java.lang.Object)<br>48 */<br>49 @Override<br>50 public boolean equals(Object obj) {<br>51 if (this == obj)<br>52 return true;<br>53<br>54 if (obj == null)<br>55 return false;<br>56<br>57 if (getClass() != obj.getClass())<br>58 return false;<br>59<br>60 Person other = (Person) obj;<br>61<br>62 if (name == null) {<br>63 if (other.name != null)<br>64 return false;<br>65 } else if (!name.equals(other.name))<br>66 return false;<br>67<br>68 if (ssn == null) {<br>69 if (other.ssn != null)<br>70 return false;<br>71 } else if (!ssn.equals(other.ssn))<br>72 return false;<br>73<br>74 return true;<br>75 }<br>76 }<br></code><br><br><h2>Java 7 Implementation</h2><br><p> <br>Now let's see the same implementation using Java 7 (java.util.Objects) as below.    <br>    <br><h3>Person.java</h3><br><code><br>1 package hashingDemo;<br>2<br>3 import java.util.Objects;<br>4<br>5 /**<br>6 * @author arun.pandey<br>7 */<br>8 public class Person {<br>9 String ssn;<br>10 String name;<br>11<br>12 public Person(){}<br>13<br>14 public Person(String ssn, String name){<br>15 this.ssn = ssn;<br>16 this.name = name;<br>17 }<br>18<br>19 public String getId() {<br>20 return ssn;<br>21 }<br>22 public void setId(String id) {<br>23 this.ssn = id;<br>24 }<br>25 public String getName() {<br>26 return name;<br>27 }<br>28 public void setName(String name) {<br>29 this.name = name;<br>30 }<br>31<br>32 @Override<br>33 public int hashCode() {<br>34 return java.util.Objects.hash(getId(), getName());<br>35 }<br>36<br>37 @Override<br>38 public boolean equals(Object obj){<br>39 if (obj == this) {<br>40 return true;<br>41 }<br>42<br>43 if (obj instanceof Person) {<br>44 Person other = (Person) obj;<br>45 return Objects.equals(ssn, other.ssn) && Objects.equals(name, other.name);<br>46 }<br>47 return false;<br>48 }<br>49 }<br></code><br><br>Test the code to evaluate the above implementation.<br><p> <br>    <br><h2>HashingTest.java</h2><br><code><br>1 package hashingDemo;<br>2<br>3 import org.apache.commons.logging.Log;<br>4 import org.apache.commons.logging.LogFactory;<br>5 import org.junit.Test;<br>6 import junit.framework.Assert;<br>7<br>8 /**<br>9 * @author arun.pandey<br>10 */<br>11 public class HashingTest {<br>12 public static final Log LOG = LogFactory.getLog(HashingTest.class);<br>13<br>14 @Test<br>15 public void testHashing() {<br>16<br>17 Person person1 = new Person("xxxx123", "Person1");<br>18 Person person2 = new Person("xxxx234", "Person2");<br>19<br>20 LOG.info("person1 HashCode ==>> " +person1.hashCode());<br>21 LOG.info("person2 HashCode ==>> " +person2.hashCode());<br>22<br>23 Assert.assertFalse(person1.hashCode() == person2.hashCode());<br>24 Assert.assertFalse("Both are same employee...", person1.equals(person2));<br>25<br>26 Person person3 = new Person("xxxx567", "Person3");<br>27 Person person4 = new Person("xxxx567", "Person4");<br>28<br>29 LOG.info("person3 HashCode ==>> " +person3.hashCode());<br>30 LOG.info("person4 HashCode ==>> " +person4.hashCode());<br>31<br>32 Assert.assertEquals(person3.hashCode(), person4.hashCode());<br>33 Assert.assertTrue("Both are not same employee...",person3.equals(person4));<br>34 }<br>35 }<br></code><br><br>And test passed as expected. Try it in your next hashing and equals implementation to have better and<br>cleaner code.<p> <br>I hope this will add a nice feature to your coding. Happy learning!<p> <br><hr><br></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java article' title='How to Create an Immutable Class in Java'><br><br>Here, we'll define the typical steps for creating an immutable class in Java and shed light on some common mistakes made while creating immutable classes.<br><p> <br> by Hussein Terek Dec. 12, 17 Java Zone Analysis    <br><p> <br>    <br>An object is immutable if its state cannot change after construction. Immutable objects don't expose any way for other objects to modify their state; the object's fields are initialized only once inside the constructor and never change again.    <br><p> <br>In this article, we'll define the typical steps for creating an immutable class in Java and also shed light on the common mistakes which are made by developers while creating immutable classes.    <br><p> <br>    <br><h2>1. Usage of Immutable Classes</h2><br><br>Nowadays, the must-have specification for every software application is to be distributed and multi-threaded applications always cause headaches for developers since developers are required to protect the state of their objects fromconcurrent modifications of several threads at the same time, for this purpose, developers normally use the Synchronized blocks whenever they modify the state of an object.<br><p> <br>With immutable classes, states are never modified; every modification of a state results in a new instance, hence each thread would use a different instance and developers wouldn't worry about concurrent modifications.    <br><p> <br>    <br>    <br><h2>2. Some Popular Immutable Classes</h2><br>String is the most popular immutable class in Java. Once initialized its value cannot be modified. Operations like trim(), substring(), replace() always return a new instance and don't affect the current instance, that's why we usuallycall trim() as the following:<br><p> <br><code><br>String alex = "Alex";<br>alex = alex.trim();<br></code>    <br><p> <br>Another example from JDK is the wrapper classes like: Integer, Float, Boolean     these classes don't modify their state, however they create a new instance each time you try to modify them.    <br><p> <br><code><br>Integer a =3;<br>a += 3;<br></code>    <br><p> <br>After calling a += 3, a new instance is created holding the value: 6 and the first instance is lost.    <br>    <br>    <br><h2>3. How Do We Create an Immutable Class</h2><br>In order to create an immutable class, you should follow the below steps:<br><p> <br>Make your class final, so that no other classes can extend it.    <br><p> <br>Make all your fields final, so that they're initialized only once inside the constructor and never modified afterward.    <br><p> <br>Don't expose setter methods.    <br><p> <br>When exposing methods which modify the state of the class, you must always return a new instance of the class.    <br><p> <br>If the class holds a mutable object:    <br>    <br>Inside the constructor, make sure to use a clone copy of the passed argument and never set your mutable field to the real instance passed through constructor, this is to prevent the clients who pass the object from    modifying it afterwards.    <br>    <br>Make sure to always return a clone copy of the field and never return the real object instance.    <br>    <br><p> <br><h2>3.1. Simple Immutable Class</h2><br><p> <br>Let's follow the above steps and create our own immutable class (ImmutableStudent.java).    <br><p> <br><code><br><br>package com.programmer.gate.beans;<br>public final class ImmutableStudent {<br>    private final int id;<br>    private final String name;<br>    public ImmutableStudent(int id, String name) {<br>        this.name = name;<br>        this.id = id;<br>    }<br>    public int getId() {<br>        return id;<br>    }<br>    public String getName() {<br>        return name;<br>    }<br>}<br></code>    <br><p> <br>The above class is a very simple immutable class which doesn't hold any mutable object and never expose its fields in any way; these type of classes are normally used for caching purposes.    <br><p> <br>    <br>    <br><h2>3.2. Passing Mutable Objects to Immutable Class</h2><br><br><p> <br>Now, let's complicate our example a bit, we create a mutable class called Age and add it as a field to ImmutableStudent:    <br>    <br><p> <br><code><br>package com.programmer.gate.beans;<br>public class Age {<br>    private int day;<br>    private int month;<br>    private int year;<br>    public int getDay() {<br>        return day;<br>    }<br>    public void setDay(int day) {<br>    this.day = day;<br>    }<br>    public int getMonth() {<br>    return month;<br>    }<br>    public void setMonth(int month) {<br>    this.month = month;<br>    }<br>    public int getYear() {<br>    return year;<br>    }<br>    public void setYear(int year) {<br>    this.year = year;<br>    }<br>}<br><br>package com.programmer.gate.beans;<br>public final class ImmutableStudent {<br>    private final int id;<br>    private final String name;<br>    private final Age age;<br>    public ImmutableStudent(int id, String name, Age age) {<br>    this.name = name;<br>    this.id = id;<br>    this.age = age;<br>    }<br>    public int getId() {<br>    return id;<br>    }<br>    public String getName() {<br>    return name;<br>    }<br>    public Age getAge() {<br>    return age;<br>    }<br>}<br><br></code>    <br><p> <br>    <br>So, we added a new mutable field of type Age to our immutable class and assign it as normal inside the constructor.    <br><p> <br>Let's create a simple test class and verify that ImmutableStudent is no more immutable:    <br><p> <br>    <br><code><br>public static void main(String[] args) {<br>    Age age = new Age();<br>    age.setDay(1);<br>    age.setMonth(1);<br>    age.setYear(1992);<br>    ImmutableStudent student = new ImmutableStudent(1, "Alex", age);<br>    System.out.println("Alex age year before modification = " + student.getAge().getYear());<br>    age.setYear(1993);<br>    System.out.println("Alex age year after modification = " + student.getAge().getYear());<br>}<br></code>    <br><p> <br>    <br>After running the above test, we get the following output:    <br><p> <br><code><br>Alex age year before modification = 1992<br>Alex age year after modification = 1993<br></code>    <br><p> <br>    <br>We claim that ImmutableStudent is an immutable class whose state is never modified after construction, however in the above example we are able to modify the age of Alex even after constructing    Alex object. If we go back to the implementation of ImmutableStudent constructor, we find that age field is being assigned to the instance of the Age argument, so whenever the referenced    Age is modified outside the class, the change is reflected directly on the state of Alex. Check out my Pass by value OR pass by reference article to more deeply understand this concept.    <br><p> <br>In order to fix this and make our class again immutable, we follow step #5 from the steps that we mention above for creating an immutable class. So we modify the constructor in order    to clone the passed argument of Age and use a clone instance of it.    <br><p> <br><code><br>public ImmutableStudent(int id, String name, Age age) {<br>    this.name = name;<br>    this.id = id;<br>    Age cloneAge = new Age();<br>    cloneAge.setDay(age.getDay());<br>    cloneAge.setMonth(age.getMonth());<br>    cloneAge.setYear(age.getYear());<br>    this.age = cloneAge;<br>}<br></code>    <br><p> <br>Now, if we run our test, we get the following output:    <br><p> <br><code><br>Alex age year before modification = 1992<br>Alex age year after modification = 1992<br></code>    <br><p> <br>    <br>As you see now, the age of Alex is never affected after construction and our class is back to immutable.    <br>    <br><p> <br><h2>3.3. Returning Mutable Objects From Immutable Class</h2><br><p> <br>However, our class still has a leak and is not fully immutable, let's take the following test scenario:    <br><code><br>public static void main(String[] args) {<br>    Age age = new Age();<br>    age.setDay(1);<br>    age.setMonth(1);<br>    age.setYear(1992);<br>    ImmutableStudent student = new ImmutableStudent(1, "Alex", age);<br>    System.out.println("Alex age year before modification = " + student.getAge().getYear());<br>    student.getAge().setYear(1993);<br>    System.out.println("Alex age year after modification = " + student.getAge().getYear());<br>}<br></code>    <br><p> <br>Output:<p> <br><code><br>Alex age year before modification = 1992<br>Alex age year after modification = 1993<br></code>    <br><p> <br>Again according to step #4, when returning mutable fields from immutable object, you should return a clone instance of them and not the real instance of the field.    <br><p> <br>So we modify getAge() in order to return a clone of the object's age:    <br><p> <br><code><br>public Age getAge() {<br>    Age cloneAge = new Age();<br>    cloneAge.setDay(this.age.getDay());<br>    cloneAge.setMonth(this.age.getMonth());<br>    cloneAge.setYear(this.age.getYear());<br>    return cloneAge;<br>}<br></code>    <br><p> <br>Now the class becomes fully immutable and provides no way or method for other objects to modify its state.    <br><p> <br>    <br><code><br>Alex age year before modification = 1992<br>Alex age year after modification = 1992<br></code>    <br>    <br><h2>4. Conclusion</h2><br><p> <br>    <br>Immutable classes provide a lot of advantages especially when used correctly in a multi-threaded environment. The only disadvantage is that they consume more    memory than the traditional class since upon each modification of them a new object is created in the memory... but, a developer should not overestimate the    memory consumption as its negligible compared to the advantages provided by these type of classes.    <br><p> <br>Finally, an object is immutable if it can present only one state to the other objects, no matter how and when they call its methods. If so it's thread safe    by any definition of thread-safe.    <br><p> <br>    <br></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java article' title='vanillajava.blogspot.com: How and Why to Serialialize Lambdas'><br><br><h2>Overview</h2><br>Serializing lambdas can be useful in a number of use cases such as persisting<br>configuration, or as a visitor pattern [https://en.wikipedia.org/wiki/Visitor_pattern] to remote<br>resources.<br><br>For example, so I want to access a resource on a remote Map, I can use get/put, but<br>say I just want to return a field from the value of a Map, I can pass a lambda as a<br>visitor to extract the information I want.<br><br><br><code><br><br>MapView userMap =<br>	Chassis.acquireMap("users", String.class, UserInfo.class);<br>	userMap.put("userid", new UserInfo("User's Name"));<br><br>// print out changes<br>userInfo.registerSubscriber(System.out::println);<br><br>// obtain just the fullName without downloading the whole object<br>String name= userMap.applyToKey("userid", u -> u.fullName);<br><br>// increment a counter atomically and trigger<br>// an updated event printed with the subscriber.<br>userMap.asyncUpdateKey("userid", ui -> {<br>	ui.usageCounter++;<br>	return ui;<br>	});<br><br>	// increment a counter and return the userid<br>	int count = userMap.syncUpdateKey("userid",<br>	ui -> { ui.usageCounter++; return ui;},<br>	ui -> ui.usageCounter);<br></code><br><br><br>As you can see, it is easy to add various simple functions, or call a method to perform<br>the action you need. The only problem is that lambdas by default are not serializable.<br><br><h2>Serializable Lambdas</h2><br><br>A simple way to make a lambda serializable is to add a cast of & Serializable to<br>a variable referring to an implementation of the lambda.<br><code><br>Function&lt;UserInfo, String&gt; fullNameFunc = (Function&lt;UserInfo, String&gt; & Serializable) ui -> ui.fullNa<br><br>String fullName = userInfo.applyToKey("userid", fullNameFunc);<br></code><br><br><br>As you can see this introduces a lot of boiler plate. A key reason to use lambdas is to<br>avoid boiler plate code so what is the alternative?<br><br><h2>Making lambdas serializable in your API.</h2><br><br>Unfortunately the standard APIs cannot be changed or sub-classes to add this but if<br>you have your own API, you can use a Serializable interface.<br><code><br>@FunctionalInterface<br>public interface SerializableFunction&lt;I, O&gt; extends Function&lt;I, O&gt;, Serializable {<br>}<br></code><br><br> This interface can be used as a parameter type.<br><code><br>default &lt;R&gt; R applyToKey(K key, @NotNull SerializableFunction&lt;E, R&gt; function) {<br>	return function.apply(get(key));<br>}<br></code><br><br>The user of your API doesn't have to explicitly say that the lambda is serializable.<br><code><br>// obtain just the fullName without downloading the whole object<br><br>String name= userMap.applyToKey("userid", u -> u.fullName);<br></code><br>The remote implementation serializes the lambda, executes it on the server and returns the result.<br><br><br>Similarly, there is methods for applying a lambda to the map as a whole.<br><br>To support queries, you can't use the built in stream() API if you want to implictly add<br>Serializable. However, you can create one which is as similar as possible.<br><code><br>Map> collect = userMap.entrySet().query()<br>.filter(e -> e.getKey().matches("u*d"))<br>.map(e -> e.getValue())<br>.collect(Collectors.groupingBy(u -> u.usageCounter));<br></code><br><br>or as a filtered subscription.<br><code><br>// print userid which have a usageCounter > 10 each time it is incremented. userMap.entrySet().q<br>.filter(e -> e.getValue().usageCounter > 10)<br>.map(e -> e.getKey())<br>.subscribe(System.out::println);<br></code><br><br>What makes this different from the regular stream API, is the data could be<br>distributed across many servers and you get a call back when that changes on any<br>server. Only the data you are interested in is sent across the network as the filter and<br>map is being applied on the server.<br><br><h2>Java Serialization</h2><br><br>Java Serialization is a good generalised, backwardly compatible serialization library.<br>Two of the most common problems that alternatives try to solve is performance and<br>cross platform serialization.<br><br>In the example above, fullNameFunc serializes to over 700 bytes and there is very<br>limited options to optimise this to either reduce the size of the message or the amount<br>of garbage it produces. By comparison, a straight forward binary YAML serialization<br>uses 348, with more options to optimise the serialization.<br><br><br>This raises the problem of how to serialize a lambda using an alternative, or cross<br>platform or faster serialization format.<br><br><br><h2>Alternative Serialization</h2><br><br><br>You can hook into the current serialization mechanism. This is not supported, and it<br>could change at any time but there is not other supported way to do this.<br><br>Never the less you can do this<br><br><code><br><br>	Method writeReplace = lambda.getClass()<br>	.getDeclaredMethod("writeReplace");<br><br>	writeReplace.setAccessible(true);<br>	SerializedLambda sl = (SerializedLambda) <br>	writeReplace.invoke(lambda);<br><br></code><br><br><br>This gives you an object you can inspect to extract the contents of the lambda.<br>Either to see what method it calls, or to serialize it. On the deserialization side, you<br>can recreate this object and can <b>readResolve</b> on that object.<br><br><h2>Standard API</h2><br><br>Currently, there is no standard API for introspection of a lambda. This is done<br>deliberately so that in future the implementation can be changed, although there is no<br>public JEP to do so. However, like Unsafe which is internal API, I look forward to the<br>day when we can use a standard API rather than having to dig into the internals of<br>the JVM to implement solutions.<br><br><h2>Conclusions</h2><br><br>With some changes to your API you can make serializing lambdas largely transparent<br>to the developer. This makes implementing simple distributed systems easier to use<br>while giving you options to optimise how this is done.<br><br>Posted 22nd July 2015 by Peter Lawrey<br></div><br><br><div dojoType='com.trivedi.oPls.mPane' tags='java note bookmark' title='Square's Retrofit & Netflix's Feign (decode JSON to/from java)'><br>from http://blog.paralleluniverse.co/2014/05/15/modern-java-pt3/ -><br><br><br><br>An interesting HTTP client API is Retrofit by Square. As you've seen, JAX-RS Client can<br>automatically serialize and deserialize Java objects to JSON objects (or XML).<br><br><br><br>Retrofit takes this automatic Java/REST translation (which, BTW, is not always a good thing;<br>domain translations are often particularly leaky abstractions, but they're helpful if you keep<br>yourself constrained to simple protocols) a step further, and translates the service target<br>URL - not just the payload - to Java interfaces.<br><br><br><br><br>Unfortunately, Retrofit uses the same annotation<br>names as JAX-RS (server), only defined in a different package, which would make our example<br>a bit ugly. Luckily, Retrofit has a clone/derivatice called Feign, by Netflix.<br><br><br><br>The differences between Feign and Retrofit are not entirely clear to me.<br>Although it seems that Retrofit is more widely adopted (it is older), while<br>Feign is more easily customizable. In any case, the two are extremely similar,<br>and can be used pretty much interchangeably<br><br><br><br>(jackson to decode JSON to/from java)<br><br><br><br><br><code><br>Feign.Builder feignBuilder = Feign.builder()<br>        .contract(new JAXRSModule.JAXRSContract()) // we want JAX-RS annotations<br>        .encoder(new JacksonEncoder()) // we want Jackson because that's what Dropwizard uses already<br>        .decoder(new JacksonDecoder());<br>env.jersey().register(new ConsumerResource(feignBuilder));<br>	</code><br><br><br>Our consumer service will now look like this:<br><br><br><code><br>@Path("/consumer")<br>@Produces(MediaType.TEXT_PLAIN)<br>public static class ConsumerResource {<br>    private final HelloWorldAPI hellowWorld;<br><br>    public ConsumerResource(Feign.Builder feignBuilder) {<br>        this.hellowWorld = feignBuilder.target(HelloWorldAPI.class, "http://localhost:8080");<br>    }<br><br>    @Timed<br>    @GET<br>    public String consume() {<br>        Saying saying = hellowWorld.hi("consumer");<br>        return String.format("The service is saying: %s (id: %d)",  saying.getContent(), saying.getId());<br>    }<br>}<br>	</code><br><br><br><span class='mHG' style="color:firebrick;">mpt: we shd look for current eq using Protocol Buffers/non-JSON/perhaps native binary fmt</span><br>                </div>                <br>                <br>                <br>                <div dojoType='com.trivedi.oPls.mPane' tags='java note snippet' title='Creating / Using RuntimeExceptions'><br><br><br> Exceptions<br> If the client cannot do anything to recover from the exception, make it an unchecked exception.<br><br>To create a custom unchecked exception, extend java.lang.RuntimeException<br><br><code><br><br>public class ListTooLargeException extends RuntimeException{<br>    public ListTooLargeException(String message) {<br>        super(message);<br>    }<br>}<br></code><br><br> For unchecked exception, try and catch the exception is optional.<code><br>public class CustomerService {<br>    public void analyze(List&lt;String&gt; data) {<br>        if (data.size() > 50) {<br>            throw new ListTooLargeException("List can't exceed 50 items!");            //runtime exception<br>        }    }<br></code><br>                </div>                <br>                <br>                <div dojoType='com.trivedi.oPls.mPane' tags='java note snippet' title='USING Optional.empty()'><br><code><br><br>	Optional<String>findName(String name){<br>*		return name !=null ? Optional.of(nameList.get(nameList.indexOf(name.toLowerCase()))) : Optional.empty();<br>	}<br>	searchedNameOptional.ifPresent(System.out::println);<br></code><br><br><br>-> * can be repl w/<br><br><br><code><br>	return Optional.ofNullable(name).map(val->nameList.get(nameList.indexOf(val.toLowerCase()))).orElse("NA");<br></code><br> note-> THIS RETURNS A STRING (since we cover both eventualities of the optional)<br><br><br>-> using an (anon here) Supplier in above-><br><br><br><code><br>	.orElseGet(()->"NA");<br></code><br><br><br>-> using a filter w/Optional:<br><br><br><code><br>	searchedNameOptional.filter(val->val.contains("am")).ifPresent(<br></code><br><br><br>                </div>                <br>                <br>                <div dojoType='com.trivedi.oPls.mPane' tags='java note bookmark snippet' title='sun.misc.unsafe snippet/link'><br><p><br>sun.misc.unsafe <a href='http://hg.openjdk.java.net/jdk/jdk/raw-file/51a7629b68cf/jdk/src/jdk.unsupported/share/classes/sun/misc/Unsafe.java'>.java</a> file<br><p><br><code><br>the Unsafe <br>     * @throws  SecurityException  if a security manager exists and its<br>     *          {@code checkPropertiesAccess} method doesn't allow<br>     *          access to the system properties.<br>     */<br>...import jdk.internal.misc.VM;...<br><br>    @CallerSensitive<br>    public static Unsafe getUnsafe() {<br>        Class&lt;?&gt; caller = Reflection.getCallerClass();<br>        if (!VM.isSystemDomainLoader(caller.getClassLoader()))<br>            throw new SecurityException("Unsafe");<br>        return theUnsafe;<br>    }    }<br></code><br>                </div><br><div dojoType='com.trivedi.oPls.mPane' title='Creating a static website on gitee (requires multi-sec/phone submit)' source="gitee.com" tags="bookmark notes"><br>https://help.github.com/categories/github-pages-basics/<br><br>Code Cloud Pages<br><br>Pages<br>Code Cloud Pages is a free static web hosting service. You can use the Code Cloud Pages host static web pages such as <br><br>blogs and project websites. If you've used Github Pages then you'll quickly get started with Code Cloud's Pages service. <br><br>Currently, Code Cloud Pages supports Jekyll, Hugo, and Hexo to compile static resources.<br>Jekyll, Hugo, Hexo compilation judgment basis<br>Compiling Hugo: When config.toml|json|yaml file and content directory exist in the repository compilation directory, hugo <br><br>will be used to generate static files.<br>Compiling Hexo According to: The package.json , _config.yml file and scaffolds directory exist in the repository <br><br>compilation directory, and the static file will be hexo generate using hexo generate . Since each deployment compilation <br><br>needs to be re-clone and npm install , the time of using Hexo is relative. Hugo and Jekyll will be a little longer.<br>When the conditions 1 and 2 above are not met, Jekyll is compiled by default.<br><br>common problem<br>How do I create a page with a home page address that does not have a secondary directory, such as ipvb.gitee.io?<br><br>A: If you want your pages home access address without a secondary directory, such as ipvb.gitee.io, you need to create a <br><br>warehouse with the same name as your own personal address , such as https://gitee.com/ipvb this user, think To create a <br><br>site of your own, but don't want to access it as a subdirectory, and you want to access it directly with ipvb.oschina.io <br><br>, then you can create a repository named ipvb https://gitee.com/ipvb/ipvb After that, you can access it at <br><br>https://ipvb.gitee.io .<br><br>When the project to be deployed is inconsistent with its own personal address, after the deployment is completed, there <br><br>are some resources access 404?<br><br>A: When the warehouse that needs to be deployed is inconsistent with its own personal address, such as: <br><br>https://gitee.com/ipvb/blog , the generated pages url is https://ipvb.gitee.io/blog , and the resources accessed. 404, <br><br>such as https://ipvb.gitee.io/style.css . This is caused by a problem with the relative path of the corresponding <br><br>configuration file. The generated resource url should be https://ipvb.gitee.io/blog/style.css . For different static <br><br>resource generators, the configuration is as follows:<br><br>The baseURL of the Hugo configuration file config.toml is modified as follows<br>  baseURL = &quot;https://ipvb.gitee.io/blog&quot; <br>The url and root Hexo configuration file _config.yml are modified as follows:<br>  Url: https://ipvb.gitee.io/blog<br> Root: /blog <br>The baseurl Jekyll configuration file _config.yml is modified as follows:<br>  Baseurl: &quot;/blog&quot; # the subpath of your site, eg /blog <br>Folders or files with underscores in Jekyll cannot be accessed, for example: _layouts <br>A: You need to create a new _config.yml in the root directory of the repository, and write: include: [_layouts].<br><br>How to customize 404? <br>A: You can create a new 404.html file in the repository root directory.<br><br>How to not trigger using Jekyll to compile.<br><br>A: Create a new .nojekyll file in the repository root directory.<br><br>1. Before using<br>1, the warehouse must have index.html to be able to access normally<br><br>2, the static web page style can be written by yourself, or you can use some static templates to modify, Pages service <br><br>itself does not provide any form of template, but we will continue to add examples for your reference.<br><br>2. A little white Pages building tour<br>A. New warehouse test_pages<br><br><br>Click Create to complete the creation of the warehouse<br><br>B. Add the file index.html (note the name is index.html!)<br>Click New File<br><br><br><br>Enter the file name in index.html and the content is simple html<br><br><br><br>Click Submit to submit the file to the warehouse<br><br>C. Select the pages service<br><br><br>D. Select the branch that needs to be deployed. Here, select Master to start the service.<br><br><br>E. Visit the generated website address, you can view the static page you deployed!<br><br><br><br>3. There are already Pages repositories deployed to the page of the code cloud<br>Take the jQuery-File-Upload repository as an example. The warehouse address is: https://github.com/blueimp/jQuery-File-<br><br>Upload<br><br>Its Pages address on Github is: https://blueimp.github.io/jQuery-File-Upload/<br><br>If you want to transfer it to the Code Cloud Pages , just log in to your code cloud account, click the + sign in the <br><br>upper right corner and select New Warehouse.<br><br><br><br><br><br><br><br>Then click Create, the warehouse will be automatically imported in the background. After the import is successful, click <br><br>the service in the menu bar to drop down Gitee Pages<br><br><br><br><br><br>Here our default Pages service branch is the default branch of the repository, but you have also selected the branch <br><br>where your static page is located. Here the static page branch of the jQuery-File-Upload repository is gh-pages , select <br><br>gh-pages and click Start Service.<br><br><br>At this point, the static web page has been successfully deployed. You can view the static official website of the <br><br>jQuery-File-Upload repository by visiting the provided address: https://frech.gitee.io/jquery-file-upload/ .<br><br><br><br>4. Pages advanced, use Jekyll, Hugo, Hexo to generate your own static web page<br>What exactly is Jekyll, Hugo, Hexo?<br><br>Jekyll, Hugo, Hexo are simple site-based static site production machines. It has a template directory that contains <br><br>documents in raw text format, converted to a complete, publishable static website via Markdown and Liquid, which you can <br><br>post on any of your favorite servers. Jekyll, Hugo, and Hexo can also run on the code cloud (Gitee.com) Pages, which <br><br>means you can use the code cloud service to build your warehouse page, blog or website, and it's completely free.<br><br>Jekyll uses the documentation: https://www.jekyll.com.cn/docs/home/ <br>Hugo uses the documentation: https://gohugo.io/documentation/ <br>Hexo uses the documentation: https://hexo.io/docs/<br></div><br><br><div dojoType='com.trivedi.oPls.mPane' title='REST Security CheatSheet' source="owasp.org" tags="bookmark notes">Some security snippets from &lt;a href='https://www.owasp.org/index.php/REST_Security_Cheat_Sheet'&gt;The REST Security CheatSheet&lt;/a&gt;<br><br><hr><br><br>X-Content-Type-Options: nosniff<br>X-Frame-Options: deny<br><br><hr><br>http code<br>501	Not Implemented<br>404	Not Found	When a non-existent resource is requested<br><br><hr><br><br>Sandboxing iframes -&gt;<br><br>Given an iframe with an empty sandbox attribute (&lt;iframe sandbox src=&quot;...&quot;&gt; &lt;/iframe&gt;), the framed document will be fully sandboxed, subjecting it to the following restrictions:<br><br>JavaScript will not execute in the framed document. This not only includes JavaScript explicitly loaded via script tags, but also inline event handlers and javascript: URLs. This also means that content contained in noscript tags will be displayed, exactly as though the user had disabled script herself.<br>The framed document is loaded into a unique origin, which means that all same-origin checks will fail; unique origins match no other origins ever, not even themselves. Among other impacts, this means that the document has no access to data stored in any origin&rsquo;s cookies or any other storage mechanisms (DOM storage, Indexed DB, etc.).<br>The framed document cannot create new windows or dialogs (via window.open or target=&quot;_blank&quot;, for instance).<br>Forms cannot be submitted.<br>Plugins will not load.<br>The framed document can only navigate itself, not its top-level parent. Setting window.top.location will throw an exception, and clicking on link with target=&quot;_top&quot; will have no effect.<br>Features that trigger automatically (autofocused form elements, autoplaying videos, etc.) are blocked.<br>Pointer lock cannot be obtained.<br>The seamless attribute is ignored on iframes the framed document contains.<br><br>With the exception of plugins, each of these restrictions can be lifted by adding a flag to the sandbox attribute&rsquo;s value. Sandboxed documents can never run plugins, as plugins are unsandboxed native code, but everything else is fair game:<br><br>allow-forms allows form submission.<br>allow-popups allows popups (window.open(), showModalDialog(), target=&rdquo;_blank&rdquo;, etc.).<br>allow-pointer-lock allows (surprise!) pointer lock.<br>allow-same-origin allows the document to maintain its origin; pages loaded from https://example.com/ will retain access to that origin&rsquo;s data.<br>allow-scripts allows JavaScript execution, and also allows features to trigger automatically (as they&rsquo;d be trivial to implement via JavaScript).<br>allow-top-navigation allows the document to break out of the frame by navigating the top-level window.<br>With these in mind, we can evaluate exactly why we ended up with the specific set of sandboxing flags in the Twitter example above:<br><br>allow-scripts is required, as the page loaded into the frame runs some JavaScript to deal with user interaction.<br>allow-popups is required, as the button pops up a tweeting form in a new window.<br>allow-forms is required, as the tweeting form should be submittable.<br>allow-same-origin is necessary, as twitter.com&rsquo;s cookies would otherwise be inaccessible, and the user couldn&rsquo;t log in to post the form.<br>One important thing to note is that the sandboxing flags applied to a frame also apply to any windows or frames created in the sandbox. This means that we have to add allow-forms to the frame&rsquo;s sandbox, even though the form only exists in the window that the frame pops up.<br><br>With the sandbox attribute in place, the widget gets only the permissions it requires, and capabilities like plugins, top navigation, and pointer lock remain blocked. We&rsquo;ve reduced the risk of embedding the widget, with no ill-effects. It&rsquo;s a win for everyone concerned.<br><br><hr><br>
</div><div dojoType='com.trivedi.oPls.mPane' tags='java bookmark pattern article' title="Software Design Patterns by Type"><br>https://en.wikipedia.org/wiki/Design_Patterns<br><h3>Creational</h3><br><br>Creational patterns are ones that create objects for you, rather than having you instantiate objects directly. This gives your program more flexibility in deciding which objects need to be created for a given case.<br><br>Abstract factory pattern groups object factories that have a common theme.<br>Builder pattern constructs complex objects by separating construction and representation.<br>Factory method pattern creates objects without specifying the exact class to create.<br>Prototype pattern creates objects by cloning an existing object.<br>Singleton pattern restricts object creation for a class to only one instance.<br><br><br><h3>Structural</h3><br>These concern class and object composition. They use inheritance to compose interfaces and define ways to compose objects to obtain new functionality.<br><br>Adapter allows classes with incompatible interfaces to work together by wrapping its own interface around that of an already existing class.<br>Bridge decouples an abstraction from its implementation so that the two can vary independently.<br>Composite composes zero-or-more similar objects so that they can be manipulated as one object.<br>Decorator dynamically adds/overrides behaviour in an existing method of an object.<br>Facade provides a simplified interface to a large body of code.<br>Flyweight reduces the cost of creating and manipulating a large number of similar objects.<br>Proxy provides a placeholder for another object to control access, reduce cost, and reduce complexity.<br><br><br><h3>Behavioral</h3><br>Most of these design patterns are specifically concerned with communication between objects.<br><br>Chain of responsibility delegates commands to a chain of processing objects.<br>Command creates objects which encapsulate actions and parameters.<br>Interpreter implements a specialized language.<br>Iterator accesses the elements of an object sequentially without exposing its underlying representation.<br>Mediator allows loose coupling between classes by being the only class that has detailed knowledge of their methods.<br>Memento provides the ability to restore an object to its previous state (undo).<br>Observer is a publish/subscribe pattern which allows a number of observer objects to see an event.<br>State allows an object to alter its behavior when its internal state changes.<br>Strategy allows one of a family of algorithms to be selected on-the-fly at runtime.<br>Template method defines the skeleton of an algorithm as an abstract class, allowing its subclasses to provide concrete behavior.<br>Visitor separates an algorithm from an object structure by moving the hierarchy of methods into one object.<br></div><div dojoType='com.trivedi.oPls.mPane' tags='java bookmark pattern article' title="Software Design: The Flyweight Pattern"><br>https://en.wikipedia.org/wiki/Flyweight_pattern<br>The flyweight pattern was first coined and extensively explored by Paul Calder and Mark Linton in 1990 to efficiently handle glyph information in a WYSIWYG document editor.<br><br><h3>What problems can the Flyweight design pattern solve? </h3><br><br>Large numbers of objects should be supported efficiently.<br>Creating large numbers of objects should be avoided.<br><br><h3>Immutability and equality</h3><br><br>To enable safe sharing, between clients and threads, Flyweight objects must be immutable. Flyweight objects are by definition value objects. The identity of the object instance is of no consequence therefore two Flyweight instances of the same value are considered equal.<br><br>Flyweight allows you to share bulky data that are common to each object. In other words, if you think that same data is repeating for every object, you can use this pattern to point to the single object and hence can easily save space.<br><code>import&nbsp;java.util.ArrayList;<br>import&nbsp;java.util.WeakHashMap;<br><br>class&nbsp;CoffeeFlavour&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;String&nbsp;name;<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;WeakHashMap<String,&nbsp;CoffeeFlavour>&nbsp;CACHE&nbsp;=&nbsp;new&nbsp;WeakHashMap<>();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;only&nbsp;intern()&nbsp;can&nbsp;call&nbsp;this&nbsp;constructor<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;CoffeeFlavour(String&nbsp;name)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.name&nbsp;=&nbsp;name;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;name;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;CoffeeFlavour&nbsp;intern(String&nbsp;name)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synchronized&nbsp;(CACHE)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;CACHE.computeIfAbsent(name,&nbsp;CoffeeFlavour::new);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;int&nbsp;flavoursInCache()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synchronized&nbsp;(CACHE)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;CACHE.size();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br>@FunctionalInterface<br>interface&nbsp;Order&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;serve();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;Order&nbsp;of(String&nbsp;flavourName,&nbsp;int&nbsp;tableNumber)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;flavour&nbsp;=&nbsp;CoffeeFlavour.intern(flavourName);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;()&nbsp;->&nbsp;System.out.println("Serving&nbsp;"&nbsp;+&nbsp;flavour&nbsp;+&nbsp;"&nbsp;to&nbsp;table&nbsp;"&nbsp;+&nbsp;tableNumber);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br>class&nbsp;CoffeeShop&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;ArrayList<Order>&nbsp;orders&nbsp;=&nbsp;new&nbsp;ArrayList<>();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;takeOrder(String&nbsp;flavour,&nbsp;int&nbsp;tableNumber)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orders.add(Order.of(flavour,&nbsp;tableNumber));<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;service()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orders.forEach(Order::serve);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br>public&nbsp;class&nbsp;FlyweightExample&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;shop&nbsp;=&nbsp;new&nbsp;CoffeeShop();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Cappuccino",&nbsp;2);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Frappe",&nbsp;1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Espresso",&nbsp;1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Frappe",&nbsp;897);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Cappuccino",&nbsp;97);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Frappe",&nbsp;3);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Espresso",&nbsp;3);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Cappuccino",&nbsp;3);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Espresso",&nbsp;96);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Frappe",&nbsp;552);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Cappuccino",&nbsp;121);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.takeOrder("Espresso",&nbsp;121);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shop.service();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("CoffeeFlavor&nbsp;objects&nbsp;in&nbsp;cache:&nbsp;"&nbsp;+&nbsp;CoffeeFlavour.flavoursInCache());<br>&nbsp;&nbsp;}<br>}<br>
</code></div><div dojoType='com.trivedi.oPls.mPane' tags='java bookmark pattern article' title="Software Design: The Proxy Pattern"><h3>Using the Proxy Pattern for Access Control</h3><br>With Protection Proxy, the proxy controls access to an object based on access rights. For instance, if we had an employee object, a Protection Proxy might allow the employee to call certain methods on the object, a manager to call additional methods (like makeBonus()), and a HR employee to call any method on the object.<br><br><h3>Motivation</h3><br>Sometimes we need the ability to control the access to an object. For example if we need to use only a few methods of some costly objects we'll initialize those objects when we need them entirely. Until that point we can use some light objects exposing the same interface as the heavy objects. These light objects are called proxies and they will instantiate those heavy objects when they are really need and by then we'll use some light objects instead.<br><br>This ability to control the access to an object can be required for a variety of reasons: controlling when a costly object needs to be instantiated and initialized, giving different access rights to an object, as well as providing a sophisticated means of accessing and referencing objects running in other processes, on other machines.<br><br>Consider for example an image viewer program. An image viewer program must be able to list and display high resolution photo objects that are in a folder, but how often do someone open a folder and view all the images inside. Sometimes you will be looking for a particular photo, sometimes you will only want to see an image name. The image viewer must be able to list all photo objects, but the photo objects must not be loaded into memory until they are required to be rendered.<br><br><br><h3>Intent</h3><br>The intent of this pattern is to provide a Placeholder for an object to control references to it.<br><br><h3>Implementation</h3><br><br>The figure below shows a UML class diagram for the Proxy Pattern:<br>[Proxy Pattern Implementation - UML Class Diagram ]<br>The participants classes in the proxy pattern are:<br>Subject - Interface implemented by the RealSubject and representing its services. The interface must be implemented by the proxy as well so that the proxy can be used in any location where the RealSubject can be used.<br>Proxy<br>Maintains a reference that allows the Proxy to access the RealSubject.<br>Implements the same interface implemented by the RealSubject so that the Proxy can be substituted for the RealSubject.<br>Controls access to the RealSubject and may be responsible for its creation and deletion.<br>Other responsibilities depend on the kind of proxy.<br>RealSubject - the real object that the proxy represents.<br><br><h3>Description</h3><br>A client obtains a reference to a Proxy, the client then handles the proxy in the same way it handles RealSubject and thus invoking the method doSomething(). At that point the proxy can do different things prior to invoking RealSubjects doSomething() method. The client might create a RealSubject object at that point, perform initialization, check permissions of the client to invoke the method, and then invoke the method on the object. The client can also do additional tasks after invoking the doSomething() method, such as incrementing the number of references to the object.<br><br><br><h3>Applicability & Examples</h3><br>The Proxy design pattern is applicable when there is a need to control access to an Object, as well as when there is a need for a sophisticated reference to an Object. Common Situations where the proxy pattern is applicable are:<br>Virtual Proxies: delaying the creation and initialization of expensive objects until needed, where the objects are created on demand (For example creating the RealSubject object only when the doSomething method is invoked).<br>Remote Proxies: providing a local representation for an object that is in a different address space. A common example is Java RMI stub objects. The stub object acts as a proxy where invoking methods on the stub would cause the stub to communicate and invoke methods on a remote object (called skeleton) found on a different machine.<br>Protection Proxies: where a proxy controls access to RealSubject methods, by giving access to some objects while denying access to others.<br>Smart References: providing a sophisticated access to certain objects such as tracking the number of references to an object and denying access if a certain number is reached, as well as loading an object from database into memory on demand.<br><br><h3>Interesting points:</h3><br><br>There are few differences between the related patterns. Like Adapter pattern gives a different interface to its subject, while Proxy patterns provides the same interface from the original object but the decorator provides an enhanced interface. Decorator pattern adds additional behaviour at runtime.<br>Proxy is used in java.rmi.*;<br><br>This short example uses a virtual proxy to handle images -><br><code>public&nbsp;interface&nbsp;Graphic&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;a&nbsp;method&nbsp;used&nbsp;to&nbsp;draw&nbsp;the&nbsp;image<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;draw();<br>}<br><br>public&nbsp;class&nbsp;Image&nbsp;implements&nbsp;Graphic&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;byte[]&nbsp;data;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Image(String&nbsp;filename)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Load&nbsp;the&nbsp;image<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;loadImage(filename);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;draw()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Draw&nbsp;the&nbsp;image<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawToScreen(data);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br>public&nbsp;class&nbsp;ImageProxy&nbsp;implements&nbsp;Graphic&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Variables&nbsp;to&nbsp;hold&nbsp;the&nbsp;concrete&nbsp;image<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;filename;<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Image&nbsp;content;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ImageProxy(String&nbsp;filename)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.filename&nbsp;=&nbsp;filename;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;=&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;on&nbsp;a&nbsp;draw-request,&nbsp;load&nbsp;the&nbsp;concrete&nbsp;image<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;if&nbsp;we&nbsp;haven't&nbsp;done&nbsp;it&nbsp;until&nbsp;yet.<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;draw()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(content&nbsp;==&nbsp;null)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;=&nbsp;new&nbsp;Image(filename);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Forward&nbsp;to&nbsp;the&nbsp;Concrete&nbsp;image.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content.draw();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br>
</code></div>

<div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british mystery">  <a href="https://images-na.ssl-images-amazon.com/images/M/MV5BOTkzMjgyMTkwNF5BMl5BanBnXkFtZTcwMjg5ODgxMQ@@._V1_UY268_CR4,0,182,268_AL_.jpg"></a>  <div class="caption">TV Mini-Series (7275) | ~10 episodes | Ian Carmichael  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british mystery">  <a href="https://images-na.ssl-images-amazon.com/images/M/MV5BYWFiYTZkNzAtZjFhOC00ZjNkLTgyM2MtNmIxNmZhN2I0YmZmXkEyXkFqcGdeQXVyMjExMjk0ODk@._V1_UY268_CR4,0,182,268_AL_.jpg"></a>  <div class="caption">TV Mini-Series (7275) | ~10 episodes | Edward Petherbridge...more calm, solemn and had a stiff upper lip, subtly downplaying many of the character's eccentricities.  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british mystery">  <a href="https://images-na.ssl-images-amazon.com/images/M/MV5BMTQ0MjgxMTgxNF5BMl5BanBnXkFtZTcwMTg5NTMyMQ@@._V1_UY268_CR4,0,182,268_AL_.jpg"></a>  <div class="caption">(1977) John Cleese | The grandson of the world's first and foremost consulting detective and his bumbling, bionic sidekick attempt to catch the only living descendant of Professor Moriarty.  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV mystery">  <a href="https://images-na.ssl-images-amazon.com/images/M/MV5BMTc5MTM5NzQ2M15BMl5BanBnXkFtZTcwODEwMDYyMQ@@._V1_UY268_CR4,0,182,268_AL_.jpg"></a>  <div class="caption">(2001-2) 27 episodes | Highly rated A&E Series  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film mystery">  <a href="https://images-na.ssl-images-amazon.com/images/M/MV5BMTIxODYwMzM0Ml5BMl5BanBnXkFtZTcwMTM0NzUxMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a>  <div class="caption">Ed McBain's 87th Precinct: 3 movies | Lightning, Ice, Heatwave (1995-7)  </div></div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/Who%27s_Got_the_Action%3F"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/8/8a/Whosgottheaction.jpg/250px-Whosgottheaction.jpg"></a><div class="caption">(1962) Matthau is a syndicate mobster angry @ streak winner Dean Martin who's being set up.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/Island_of_Love_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/1/16/Island_of_Love_poster.jpg/220px-Island_of_Love_poster.jpg"></a><div class="caption">(1963) Gangster Matthau is mad when movie w/his stripper girlfriend bombs; producer/writer run away to "island of love".</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/Charade_(1963_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/e/ec/Charade_movieposter.jpg/220px-Charade_movieposter.jpg"></a><div class="caption">(1963) Paris | Hepburn, Cary Grant | Mathhau is a cop | film is in pub. dom; can watch it @ wikipedia</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau noir"><a href="https://en.wikipedia.org/wiki/Mirage_(1965_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/b/bb/Mirage1965.jpg/220px-Mirage1965.jpg"></a><div class="caption">(1965) A biochemist suffers memory lapses, finds bad guys after him, and has no idea why. Gregory Peck, Matthau as investigator.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau lemmon comedy"><a href="https://en.wikipedia.org/wiki/The_Fortune_Cookie"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/0/09/The_Fortune_Cookie_%281966%29_poster.jpg/225px-The_Fortune_Cookie_%281966%29_poster.jpg"></a><div class="caption">(1966) Matthau plays shyster lawyer | Dir. Bill Wilder (Irma la D)</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/Candy_(1968_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/2/2c/Candy_movieposter.jpg"></a><div class="caption">(1968) farce abt the adventures of its naive heroine. Brando, Richard Burton, Coburn, Matthau, Ringo Starr Many cameos incl. Sugar Ray Robinson.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy musical"><a href="https://en.wikipedia.org/wiki/Hello,_Dolly!_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/3/30/HelloDollyFilmPoster.jpg"></a><div class="caption">(1969) a strong-willed matchmaker(Streisand) travels to Yonkers, to find a match for "well-known unmarried half-a-millionaire".</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/Cactus_Flower_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/f/ff/Cactus_Flower_1969.jpg"></a><div class="caption">(1969) Matthau breaks relationship lying that he is married.  Also has Ingrid Bergman, Goldie Hawn</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/A_New_Leaf_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/2/2c/A_New_Leaf.jpg"></a><div class="caption">unsuccessful, now considered cult classic.  (1971) playboy Matthau has 6 wks to find a rich bride & repay loan, or forfeit all property to uncle</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/Pete_%27n%27_Tillie"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/d/df/PeteTilliePoster.jpg/330px-PeteTilliePoster.jpg"></a><div class="caption">(1972) Matthau plays a confirmed bachelor w/ eccentric habits. *s Carol Burnett,</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau crime"><a href="https://en.wikipedia.org/wiki/The_Laughing_Policeman_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/c/c1/Laughing-policeman-poster.jpg"></a><div class="caption">(1973) In San Fran, Matthau investigates when a busload of passengers are gunned down & killed.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau crime"><a href="https://en.wikipedia.org/wiki/Charley_Varrick"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/a/a3/Charley_Varrick.jpg"></a><div class="caption">(1973) Matthau, a former stunt pilot, holds up bank in sleepy NM town.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau crime"><a href="https://en.wikipedia.org/wiki/The_Taking_of_Pelham_One_Two_Three_(1974_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/4/41/Taking_of_Pelham_One_Two_Three_%281974_film%29.jpg"></a><div class="caption">(1974) group of criminals takes passengers hostage inside a NYC Subway car for ransom.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau lemmon comedy"><a href="https://en.wikipedia.org/wiki/The_Front_Page_(1974_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/4/4c/Front_page_movie_poster.jpg/330px-Front_page_movie_poster.jpg"></a><div class="caption">(1974) Lemmon is reporter @ Chicago paper & Matthau is ruthless editor | dir by Billy Wilder (Irm la d)</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/California_Suite_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/f/fb/CaliforniaSuitePoster.jpg"></a><div class="caption">(1978) Similar to 'Plaza Suite', based on play by Neil Simon.  Visitors from London/Philly/Chicago.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/Hopscotch_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/c/c3/Hopscotchposter.jpg"></a><div class="caption">(1980) Matthau is a renegade CIA agent abt to expose the cia/kgb</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau lemmon comedy"><a href="https://en.wikipedia.org/wiki/Buddy_Buddy"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/5/5e/Buddy_buddy.jpg/330px-Buddy_buddy.jpg"></a><div class="caption">(1981) Matthau is hitman stuck in hotel w/Lemmon who wants to kill himself.| dir by Billy Wilder (Irm la d)</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy"><a href="https://en.wikipedia.org/wiki/The_Survivors_(1983_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/9/9f/The_Survivors.jpg"></a><div class="caption">(1983) in NY, Matthau's gas station is accidentally blown up by Robin WIlliams "unconventional humour" people thot the two didn't gel tog.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau comedy theater"><a href="https://en.wikipedia.org/wiki/I%27m_Not_Rappaport_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/2/2f/I%27m_Not_Rappaport_%28film%29.jpg/330px-I%27m_Not_Rappaport_%28film%29.jpg"></a><div class="caption">(1996) 2 old fogies meet in NYC Central Park.  Film adaptation based on tony-awd winning play </div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau lemmon comedy"><a href="https://en.wikipedia.org/wiki/Out_to_Sea"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/5/54/Out_to_sea_poster.jpg"></a><div class="caption">(1997) the pair are dance hosts on a cruise ship trying to seduce heiresses.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film matthau lemmon comedy"><a href="https://en.wikipedia.org/wiki/The_Odd_Couple_II"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/a/af/Neil_simons_the_odd_couple_ii.jpg"></a><div class="caption">(1998) a sequel, d'you believe it?</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film lemmon comedy"><a href="https://en.wikipedia.org/wiki/Some_Like_It_Hot"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/b/b4/Some_Like_It_Hot_poster.jpg"></a><div class="caption">(1959) 2 musicians who dress in drag in order to escape from mafia gangsters | dir. Billy Wilder (Irma la D)</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film lemmon comedy"><a href="https://en.wikipedia.org/wiki/The_Apartment"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/b/bb/Apartment_60.jpg"></a><div class="caption">(1960) Lemmon's Upper WestSide apt is used by 4 mngrs for trysts | dir. Billy Wilder (Irma la D)</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film lemmon comedy"><a href="https://en.wikipedia.org/wiki/Avanti!"><img alt="film" src="https://en.wikipedia.org/wiki/File:Avanti!Poster.jpg"></a><div class="caption">(1972) Lemmon's dad dies in Naples but not alone (w/mistress) bodies disappear, etc. | dir. Billy Wilder (Irma la D)</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film lemmon comedy"><a href="https://en.wikipedia.org/wiki/How_to_Murder_Your_Wife"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/6/6c/How_to_Murder_Your_Wife_film_poster.jpg"></a><div class="caption">(1965) Has to be a FREAKING good movie (plus, look at the date) | Basil Fawlty claims to have seen it six times,</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/Ocean%27s_11"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/a/ae/Ocean%27sEleven%281960%29Poster.jpeg"></a><div class="caption">(1960) Ocean's 11 is a heist film centered on a series of Vegas casino robberies</div>  </div><div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/Sergeants_3"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/6/62/Poster_of_the_movie_Sergeants_3.jpg"></a><div class="caption">(1962) remake of Gunga Din set in the American West. Last film to feature all 5 due to Sinatra's falling out with Lawford.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/Robin_and_the_7_Hoods"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/7/7f/Robin_and_the_7_Hoods_Poster.jpg"></a><div class="caption">(1964 ) the film transplants the Robin Hood legend to a 1930s Chicago gangster setting</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/It_Happened_in_Brooklyn"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/7/76/It_Happened_in_Brooklyn_FilmPoster.jpeg"></a><div class="caption">(1947) (Frank Sinatra and Peter Lawford)</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/Meet_Me_in_Las_Vegas"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/4/47/Meet_Me_in_Las_Vegas.jpg"></a><div class="caption">(1956) a gambling rancher (Dailey) discovers that all he has to do to win at roulette is take hold of ballerina Charisse's hand</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/Some_Came_Running_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/a/a5/Poster_of_the_movie_Some_Came_Running.jpg"></a><div class="caption">(1958) a troubled Army veteran and author who returns to his Ill. town after 16 yr, to the chagrin of his wealthy, social-climbing brother.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack WWII"><a href="https://en.wikipedia.org/wiki/Never_So_Few"><img alt="film" src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Never_So_Few_poster.jpg/440px-Never_So_Few_poster.jpg"></a><div class="caption">(1959) Charles Bronson, Steve McQueen, Sinatra/Lawford fighting the Japanese in Burma in World War II despite a lack of support from their commanders</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/Come_Blow_Your_Horn_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/d/d3/Come_Blow_Your_Horn_VideoCover.jpeg"></a><div class="caption">(1963) based on the play of the same name by Neil Simon.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/Johnny_Cool"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/2/2b/Johnny_Cool_FilmPoster.jpeg"></a><div class="caption">(1963) exiled American in Rome, rescues a young Sicilian outlaw, from the police & turns him into Johnny Cool.| Telly Savalas, Sammy Davis, Jr.</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack comedy"><a href="https://en.wikipedia.org/wiki/4_for_Texas"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/e/e6/4_for_Texas_film_poster.jpg"></a><div class="caption">(1963) thug Charles Bronson & a cameo by the Three Stooges</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/Marriage_on_the_Rocks"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTU2MDIyODgwNF5BMl5BanBnXkFtZTYwODQ4Nzg5._V1_.jpg"></a><div class="caption">(1965) a businessman's wife who ends up divorced by mistake and then married to his best friend by an even bigger mistake</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/A_Man_Called_Adam_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/d/dc/A_Man_Called_Adam_film_poster.jpg"></a><div class="caption">(1966) story of a self-destructive jazz musician (Sammy Davis) Also features Louis Armstrong, Mel Torm & Frank Sinatra</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack comedy"><a href="https://en.wikipedia.org/wiki/Texas_Across_the_River"><img alt="film" src="https://en.wikipedia.org/wiki/File:Texas_Across_the_River.jpg"></a><div class="caption">(1966) comedy/satire abt a love-triangle made more complex by an Indian maiden & a Comanche raiding party</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/Salt_and_Pepper_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/1/14/Saltpeppos.jpg/440px-Saltpeppos.jpg"></a><div class="caption">(1968) At a nightclub in Swinging London, a dying Asian girl sets off plot to overthrow the British govt</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film ratpack"><a href="https://en.wikipedia.org/wiki/One_More_Time_(1970_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/f/f1/One_More_Time_%281970_movie_poster%29.jpg"></a><div class="caption">(1970) Salt & Peppar redux</div>  </div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice Western"><a href="https://en.wikipedia.org/wiki/Django_Unchained"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/8/8b/Django_Unchained_Poster.jpg"></a><div class="caption">(2012) Western dir Quentin Tarantino, </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice noir scifi"><a href="https://en.wikipedia.org/wiki/Looper_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/0/0a/Looper_poster.jpg"></a><div class="caption">(2012) criminal syndicates use contracted killers called "loopers" to kill victims sent through time travel.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie"><a href="https://en.wikipedia.org/wiki/Bernie_(2011_film)#Plot"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/0/04/Bernie_film_poster.jpg"></a><div class="caption">(2012) based on 96 murder of 80yr-old millionaire in TX by her 39yr-old companion.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie"><a href="https://en.wikipedia.org/wiki/End_of_Watch"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/6/64/End_of_Watch_Poster.jpg"></a><div class="caption">(2012) cops & bloods in LA police procedural</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie"><a href="https://en.wikipedia.org/wiki/Little_Birds_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/c/c4/Little_Birds_Theatrical_Poster_2011.jpg"></a><div class="caption">(2012) skateboarding subculture movie in LA</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice scifi"><a href="https://en.wikipedia.org/wiki/Gravity_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/f/f6/Gravity_Poster.jpg"></a><div class="caption">(2013) Sandra Bullock % George Clooney are stranded in space</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice"><a href="https://en.wikipedia.org/wiki/Lone_Survivor_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/b/bd/Lone_Survivor_poster.jpg"></a><div class="caption">(2013) American war film (Afghanistan) based on true-life act.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice crime"><a href="https://en.wikipedia.org/wiki/Prisoners_(2013_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/6/63/Prisoners2013Poster.jpg"></a><div class="caption">(2013) crime drama Hugh Jackman</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice"><a href="https://en.wikipedia.org/wiki/Saving_Mr._Banks"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/0/0d/Saving_Mr._Banks_Theatrical_Poster.jpg"></a><div class="caption">(2013) Emma Thompson as author (Mary Poppins) and Tom Hanks as Walt Disney </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice comedy"><a href="https://en.wikipedia.org/wiki/The_Secret_Life_of_Walter_Mitty_(2013_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/c/cd/The_Secret_Life_of_Walter_Mitty_poster.jpg"></a><div class="caption">(2013) Ben Stiller / life at Life magazine </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice"><a href="https://en.wikipedia.org/wiki/The_Wolf_of_Wall_Street_(2013_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/1/1f/WallStreet2013poster.jpg"></a><div class="caption">(2013) biographical black comedy crime film directed by Martin Scorsese</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice martialArts"><a href="https://en.wikipedia.org/wiki/The_Grandmaster_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/2/23/The_Grandmaster_poster.jpg"></a><div class="caption">(2013) based on the life story of the Wing Chun grandmaster Ip Man</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie"><a href="https://en.wikipedia.org/wiki/Ain%27t_Them_Bodies_Saints"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/c/cf/Ain%27t_Them_Bodies_Saints_poster.jpg"></a><div class="caption">(2013) crime prison drama</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice"><a href="https://en.wikipedia.org/wiki/The_Place_Beyond_the_Pines"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/0/04/The_Place_Beyond_the_Pines_Poster.jpg"></a><div class="caption">(2013) crime drama  NY motorcycle stuntman working in a traveling act for state fairs.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice"><a href="https://en.wikipedia.org/wiki/A_Most_Violent_Year"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/0/09/A_Most_Violent_Year_poster.png"></a><div class="caption">(2014) mob movie based in 1981 New York</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice"><a href="https://en.wikipedia.org/wiki/Birdman_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/6/63/Birdman_poster.png"></a><div class="caption">(2014) satirical black comedy-drama film dir by Alejandro G. Irritu.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice wwii"><a href="https://en.wikipedia.org/wiki/Fury_(2014_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/1/17/Fury_2014_poster.jpg"></a><div class="caption">(2014) tank crews in Nazi Germany</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice"><a href="https://en.wikipedia.org/wiki/Gone_Girl_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/0/05/Gone_Girl_Poster.jpg"></a><div class="caption">(2014) psychological thriller Ben Afflek's wife is missing</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice wwii"><a href="https://en.wikipedia.org/wiki/The_Imitation_Game"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/5/5e/The_Imitation_Game_poster.jpg"></a><div class="caption">(2014) Alan Turing, who decrypted German intelligence codes during World War II.  Cumberbatch</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice crime"><a href="https://en.wikipedia.org/wiki/Nightcrawler_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/d/d4/Nightcrawlerfilm.jpg"></a><div class="caption">(2014) thief shoots live footage of accidents/crimes in LA, selling content to news channel</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl comedy"><a href="https://en.wikipedia.org/wiki/Force_Majeure_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/8/89/Force_Majeure_poster.jpg"></a><div class="caption">(2014) husband is believed to have prioritized his own escape frm avalanche over safety of family.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice Intl"><a href="https://en.wikipedia.org/wiki/Leviathan_(2014_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/3/39/Leviathan_2014_poster.jpg"></a><div class="caption">(2014) current life in small-town N. Russia nr Finland</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie british"><a href="https://en.wikipedia.org/wiki/Starred_Up"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/c/cf/StarredUp2013.png"></a><div class="caption">(2013) British prison with some of the countrys most violent criminals</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie"><a href="https://en.wikipedia.org/wiki/Blue_Ruin"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/9/9f/Blue_Ruin_film_poster.jpg"></a><div class="caption">2013 thriller film funded via crowdfunding</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice british"><a href="https://en.wikipedia.org/wiki/A_Most_Wanted_Man_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/3/3e/A_Most_Wanted_Man_Poster.jpg"></a><div class="caption">2014 spy thriller - chechnya, germany, le carre</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice british"><a href="https://en.wikipedia.org/wiki/Mr._Turner"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/6/64/Mr_Turner_poster.jpg"></a><div class="caption">(2014) BioPic won a few awards</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie scifi"><a href="https://en.wikipedia.org/wiki/Snowpiercer"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/b/b4/Snowpiercer_poster.jpg"></a><div class="caption">(2013) S Korean-Czech science fiction thriller film based on French graphic novel.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt4513674/fullcredits"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNjk1NjY4NjE5N15BMl5BanBnXkFtZTgwMTU0NDg0OTE@._V1_UX67_CR0,0,67,98_AL_.jpg"></a><div class="caption">Caf Society (2016)Bronx native moves to Hollywood, where he falls in love with the secretary of his powerful uncle, an agent to the stars. After returning to New York, he is swept up in the vibrant world of high society nightclub life.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy mystery"><a href="http://www.imdb.com/title/tt3715320/?ref_=nm_flmg_wr_4"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjE2NTM0Mzk5Ml5BMl5BanBnXkFtZTgwMzQ3Njc3NTE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Irrational Man (2015) tormented philosophy professor finds a will to live when he commits an existential act.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt2870756/?ref_=nm_flmg_wr_5"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTQ3NDY5NjIwN15BMl5BanBnXkFtZTgwNjQ2ODkxMjE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Magic in the Moonlight (2014)A romantic comedy about an Englishman brought in to help unmask a possible swindle. Personal and professional complications ensue.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt1605783/?ref_=nm_flmg_wr_8"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTM4NjY1MDQwMl5BMl5BanBnXkFtZTcwNTI3Njg3NA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Midnight in Paris (2011)While on a trip to Paris with his fiance's family, a nostalgic screenwriter finds himself mysteriously going back to the 1920s everyday at midnight.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy mystery"><a href="http://www.imdb.com/title/tt0256524/?ref_=nm_flmg_wr_20"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMzU5Y2ZjYzYtYjI0YS00MTc1LWFlYmItYWY5YWNlMmUwNjE2XkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">The Curse of the Jade Scorpion (2001)An insurance investigator and an efficency expert who hate each other are both hypnotized by a crooked hypnotist with a jade scorpion into stealing jewels.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy crime"><a href="http://www.imdb.com/title/tt0196216/?ref_=nm_flmg_wr_21"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNTA2NTBiMzEtMDA2My00YWNhLWJjMjAtYTUyMzMwNjM0Mjk2XkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Small Time Crooks (2000)A loser of a crook and his wife strike it rich when a botched bank job's cover business becomes a spectacular success.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy music"><a href="http://www.imdb.com/title/tt0158371/?ref_=nm_flmg_wr_22"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjE2MzA5MDQ4NV5BMl5BanBnXkFtZTgwNjI4ODQxMDE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Sweet and Lowdown (1999) 1930s, jazz guitarist idolizes Django Reinhardt, faces gangsters, falls in love w/a mute woman.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt0113819/?ref_=nm_flmg_wr_27"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTUzMzE3Nzg5Ml5BMl5BanBnXkFtZTcwNTIxNDEyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Mighty Aphrodite (1995) When he discovers his adopted son is a genius, a New York sportswriter seeks out the boy's birth mother: a ditzy porn star and prostitute.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy crime"><a href="http://www.imdb.com/title/tt0109348/?ref_=nm_flmg_wr_30"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BM2M4MWU5NzItYTBkOC00ZjYxLTljZWEtYWMzODY3YmExMWY4XkEyXkFqcGdeQXVyMTAwMzUyOTc@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Bullets Over Broadway (1994) In New York in 1928, a struggling playwright is forced to cast a mobster's talentless girlfriend in his latest drama in order to get it produced.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy mystery"><a href="http://www.imdb.com/title/tt0107507/?ref_=nm_flmg_wr_31"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMWM5MGZiZDAtMWE0Ny00MjY3LWJlOWItNjY4MmI4NDAyM2NhXkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Manhattan Murder Mystery (1993) Woody Allen, Diane Keaton</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy mystery"><a href="http://www.imdb.com/title/tt0105378/?ref_=nm_flmg_wr_33"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTc2NzIwNzE4OV5BMl5BanBnXkFtZTcwNDM0NzI5NA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Shadows and Fog (1991) Woody Allen, Mia Farrow With a serial strangler on the loose, a bookkeeper wanders around town searching for the vigilante group intent on catching the killer.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt0097123/?ref_=nm_flmg_wr_36"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTgxMDE3NDMwOV5BMl5BanBnXkFtZTcwMDQwODQ2NA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Crimes and Misdemeanors (1989) An ophthalmologist's mistress threatens to reveal their affair to his wife, while a married documentary filmmaker is infatuated by another woman.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt0089853/?ref_=nm_flmg_wr_42"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTUyODM2ODI0OF5BMl5BanBnXkFtZTcwOTIwMzg4NA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">The Purple Rose of Cairo (1985) In New Jersey in 1935, a movie character walks off the screen and into the real world.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt0087003/?ref_=nm_flmg_wr_43"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTkwMDQ4MjMwNF5BMl5BanBnXkFtZTcwNTM4OTYwNA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Broadway Danny Rose (1984) In his attempts to reconcile a lounge singer with his mistress, a hapless talent agent is mistaken as her lover by a jealous gangster.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt0079522/?ref_=nm_flmg_wr_48"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMzdmY2I3MmEtOGFiZi00MTg1LWIxY2QtNWUwM2NmNWNlY2U5XkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Manhattan (1979) life of a divorced television writer dating a teenage girl is further complicated when he falls in love with his best friend's mistress.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt0073312/?ref_=nm_flmg_wr_51"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTYxMDk1NTA5NF5BMl5BanBnXkFtZTcwNDkzNzA2NA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Love and Death (1975)In czarist Russia, a neurotic soldier and his distant cousin formulate a plot to assassinate Napoleon.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt0066808/?ref_=nm_flmg_wr_56"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTc2MTE3MzI3MF5BMl5BanBnXkFtZTcwODg3OTYwNA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Bananas (1971) When a bumbling New Yorker is dumped by his activist girlfriend, he travels to a tiny Latin American nation and becomes involved in its latest rebellion.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt0066260/?ref_=nm_flmg_wr_57"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjg0MzU2ODM4NF5BMl5BanBnXkFtZTcwMzIwMzg4NA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Pussycat, Pussycat, I Love You (1970)An American playwright living in Rome consults a quack psychiatrist to combat his fears of balding and save his failing marriage.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy crime"><a href="http://www.imdb.com/title/tt0065063/?ref_=nm_flmg_wr_60"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjE2Mjc5NDg3OV5BMl5BanBnXkFtZTgwMzUxMjMyMTE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Take the Money and Run (1969)The life and times of Virgil Starkwell, inept bank robber.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film woodyAllen comedy"><a href="http://www.imdb.com/title/tt0059903/?ref_=nm_flmg_wr_66"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTUzMzI4MDg1OV5BMl5BanBnXkFtZTcwNTQ2Mzg3NA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">What's New Pussycat (1965) Peter Sellers, Peter O'TooleA playboy who refuses to give up his hedonistic lifestyle to settle down and marry his true love seeks help from a demented psychoanalyst who is having romantic problems of his own.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi hist ghazals"><a href="http://www.imdb.com/title/tt3826186/?ref_=nm_flmg_dr_1"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTY5NDkyNDY5OV5BMl5BanBnXkFtZTgwMDAyNjUyNjE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Jaanisaar (2015)(from Muzaffar Ali, dir of Umrao Jaan) courtesan from Avadh, and a prince brought up in England, set in 1877...introduces Janaab Nazeer Akbarabadi, known Urdu poems for both Ali/Krishna</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy"><a href="http://www.imdb.com/title/tt0157917/?ref_=nm_flmg_act_52"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjlmMGFjYmUtODE4Mi00ODYxLTg3YmItMTg4MTk4MDE5MDI5XkEyXkFqcGdeQXVyMzU0NzkwMDg@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Lakhon Ki Baat (1984) Sanjeev Kumar, Farooq Shaikh.  Photographer & pals decide to sue.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy"><a href="http://www.imdb.com/title/tt0178211/?ref_=nm_flmg_act_50"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMGJmOWFlYTItMGI2YS00OTM1LWI4MjQtYWFhMjliZTU2YThhXkEyXkFqcGdeQXVyMzU0NzkwMDg@._V1_UY268_CR4,0,182,268_AL_.jpg"></a><div class="caption">Ab Ayega Mazaa (1984) Farooq Shaikh.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt2693796/?ref_=nm_flmg_act_43"><img alt="film" src=""></a><div class="caption">Uddhar (1986) Farooq Shaikh, Supriya Pathak</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi ghazals"><a href="https://en.wikipedia.org/wiki/Anjuman_(1986_film)"><img alt="film" src=""></a><div class="caption">Anjuman (1986) music by Khayyam, dir Muzaffar Ali |Shabana Azmi, Farooq Shaikh, R Hattangadi Set in Lucknow, it deals with exploitation of women and problems of local "chikan" embroidery workers.  three songs by Shabana Azmi.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt0233635/?ref_=nm_flmg_act_42"><img alt="film" src=""></a><div class="caption">Ek Pal (1986) Farooq Shaikh, Shabana Azmi, Naseeruddin Shah, </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi ghazals"><a href="http://www.imdb.com/title/tt0150683/?ref_=fn_al_tt_1"><img alt="film" src=""></a><div class="caption">Dir Muzaffar Ali. Farooq Shaikh, Smita Patil.  Lucknowite re-locates to Bombay.  Has 	"Seene Mein Jalan...Toofaan"</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy"><a href="http://www.imdb.com/title/tt1570417/?ref_=nm_flmg_act_8"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BZjI3NDQ1YzMtNzg3Ni00Njk0LThiZDgtNDAwMWY3YjFiNDUzXkEyXkFqcGdeQXVyNjQ2MjQ5NzM@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">(2010) Farooq Shaikh. thriller based on a real-life incident of a woman who hit a man, drove home & parked the car w/the man wedged halfway thro' the windshield.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy mystery"><a href="http://www.imdb.com/title/tt3447364/?ref_=nm_knf_i3"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjMyNzQ0MTAxNl5BMl5BanBnXkFtZTgwMDY2NjM4MzE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Detective Byomkesh Bakshy! (2015)Dir Dibakar Banerjee The origin story of famous Bengali sleuth created by Saradindu Bandopadhyay.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy"><a href="http://www.imdb.com/title/tt0466460/?ref_=nm_flmg_dr_6"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BZTg2YWFkOGMtYWExMy00YmFiLTk2YjctNTAzZDk5MjdhMzdlXkEyXkFqcGdeQXVyNjQ2MjQ5NzM@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">Khosla Ka Ghosla! (2006)Dir Dibakar Banerjee Delhi based retired man tries to get his land back from a swindler.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi crime"><a href="http://www.imdb.com/title/tt3019620/?ref_=nm_flmg_prd_2"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNDE1OTA0OTE3NV5BMl5BanBnXkFtZTgwMzgyNTE4MTE@._V1_UY268_CR9,0,182,268_AL_.jpg"></a><div class="caption">Titli (2014) a violent car-jacking brotherhood in Delhi</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi crime mystery"><a href="http://www.imdb.com/title/tt4934950/?ref_=tt_rec_tti"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTYzODg0Mjc4M15BMl5BanBnXkFtZTgwNzY4Mzc3NjE@._V1_UY268_CR8,0,182,268_AL_.jpg"></a><div class="caption">Talvar (2015) An experienced investigator confronts several conflicting theories about the perpetrators of a violent double homicide.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi ghazals"><a href="http://www.imdb.com/title/tt0158827/?ref_=_3"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTIwODY1MTM2OV5BMl5BanBnXkFtZTYwMTczMjY5._V1_UY268_CR0,0,182,268_AL_.jpg"></a><div class="caption">Nikaah (1982) Salma Agha </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi france comedy"><a href="http://www.imdb.com/title/tt2980648/?ref_=nm_knf_i2"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTQ3Mjg2MTE4M15BMl5BanBnXkFtZTgwMzcyNDMwMjE@._V1_UY268_CR1,0,182,268_AL_.jpg"></a><div class="caption">(2014)Helen Mirren, Om Puri. The Kadam family leaves India for France where they open a restaurant across from a Michelin-starred eatery.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi crime"><a href="http://www.imdb.com/title/tt0071307/?ref_=_13"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMGE5ZTgzNzktNzdhOC00OGFlLTlkZjYtMWM1OTRlYjNjZDM3XkEyXkFqcGdeQXVyNjc1NzIxMDc@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">36 Ghante (1974) Raaj Kumar, Sunil Dutt Three jailed convicts break out of prison and take over the household of Editor Ashok Rai.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi hist gurudutt"><a href="http://www.imdb.com/title/tt0045529/?ref_=nm_flmg_act_15"><img alt="film" src=""></a><div class="caption">Baaz (1953) Guru Dutt, Johnny Walker2 desi girls fight back in Portuguese-ruled Malabar region in India</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy gurudutt"><a href="http://www.imdb.com/title/tt0048392/?ref_=nm_flmg_act_12"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTQ0ODQwNDgwOV5BMl5BanBnXkFtZTcwOTM5ODEyMQ@@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">Mr. & Mrs. '55 (1955) Guru Dutt, Madhubala naive heiress forced into 'marriage of convenience' w/unemployed cartoonist</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi noir gurudutt"><a href="http://www.imdb.com/title/tt0051335/?ref_=nm_flmg_act_10"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjE4NzUxODcwN15BMl5BanBnXkFtZTgwOTc3Nzk1MDE@._V1_UY268_CR225,0,182,268_AL_.jpg"></a><div class="caption">12 O'Clock (1958) Guru Dutt, Waheeda Rehman (!) Maya is found dead in the first class compartment at a railway terminus in Bombay</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi ghazals gurudutt"><a href="http://www.imdb.com/title/tt0053706/?ref_=nm_flmg_act_8"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTM5OTEzNzEwM15BMl5BanBnXkFtZTcwOTQwNTEzMQ@@._V1_UY268_CR7,0,182,268_AL_.jpg"></a><div class="caption">Chaudvin Ka chand (1961) Guru Dutt, Waheeda Rehman (!) love triangle in Lucknow</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi ghazals gurudutt"><a href="http://www.imdb.com/title/tt0056436/?ref_=nm_flmg_act_6"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjA2NDQxOTE4M15BMl5BanBnXkFtZTcwOTAyNzEzMQ@@._V1_UY268_CR6,0,182,268_AL_.jpg"></a><div class="caption">Sahib Bibi Aur Ghulam (1962) Guru Dutt, Waheeda Rehman (!)servant Bhootnath gets close to the wife of his employer, and narrates her story.Has "Bhanwara Bada Naadaan".</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy gurudutt"><a href="http://www.imdb.com/title/tt0056866/?ref_=nm_flmg_act_5"><img alt="film" src=""></a><div class="caption">Bharosa (1963) Guru Dutt, Mehmood</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy gurudutt"><a href="http://www.imdb.com/title/tt0215219/?ref_=nm_flmg_act_3"><img alt="film" src=""></a><div class="caption">Suhagan (1964) Guru Dutt, affair between a professor and a student</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy gurudutt"><a href="http://www.imdb.com/title/tt0139584/?ref_=nm_flmg_act_2"><img alt="film" src=""></a><div class="caption">Sanjh Aur Savera (1964) Guru Dutt, Dir. Hr Mukherjee</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film maigret french mystery"><a href="http://www.imdb.com/title/tt0050669/?ref_=fn_al_tt_8"><img alt="film" src="http://www.imdb.com/title/tt0050669/mediaviewer/rm1368038400?ref_=tt_ov_i"></a><div class="caption">Maigret tend un pige (1958) Gabin</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film maigret french mystery"><a href="http://www.imdb.com/title/tt0053033/?ref_=nm_flmg_act_28"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTc3NjQ2NTcxOV5BMl5BanBnXkFtZTgwNTIyNzk1MjE@._V1_UY268_CR9,0,182,268_AL_.jpg"></a><div class="caption">Maigret et l'affaire Saint-Fiacre (1959) Gabin</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film maigret french mystery"><a href="http://www.imdb.com/title/tt0057278/?ref_=nm_flmg_act_19"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjExNTYwNTMzNV5BMl5BanBnXkFtZTgwMTIyNzk1MjE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Maigret voit rouge (1963) Gabin</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV maigret french mystery"><a href="http://www.imdb.com/title/tt0167644/?ref_=fn_al_tt_2"><img alt="film" src="http://www.imdb.com/title/tt0167644/mediaviewer/rm2932315904?ref_=tt_ov_i"></a><div class="caption">Maigret(TV series|54 episodes|91-05)...Certes, le grain de limage a vieilli, les lumires ou la musique ne sont pas toujours extraordinaires, mais cette ambiance est unique.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film maigret french mystery"><a href="http://www.imdb.com/title/tt5012394/?ref_=fn_al_tt_4"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BYmExY2I1NzEtZThkMi00N2RjLWIwOTktZDFlZmY5NThlMzAwXkEyXkFqcGdeQXVyMjExMjk0ODk@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Maigret Sets a Trap (2016) TV Movie Rowan Atkinson (reviewer) ...The scenery, photography, costumes, props and direction were beautiful and the movie was 100% traditional 'Noir' in every popular sense of the film world. The shadows and lighting, cars, streets, the brown... (lots of brown!), even the smoking and the hats... all Film Noir!(another rev) ...Atkinson's calm and soft-speaking portrayal is the first proper portrayal of Maigret I've ever seen (all the others were a bit too flashy for my taste).</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film maigret french mystery"><a href="http://www.imdb.com/title/tt5017060/mediaviewer/rm3584499456?ref_=tt_ov_i"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNjJhMWMyMzAtNGRiZi00NGQ5LTgzZmYtMDExMTY4OGQwNzI0XkEyXkFqcGdeQXVyMjExMjk0ODk@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Maigret's Dead Man (2016) TV Movie Rowan Atkinson</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV maigret french mystery"><a href="http://www.imdb.com/title/tt0159178/?ref_=fn_tt_tt_3"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BZjk2MDIyYTMtZjRmZS00NTc0LTliMDAtNmVlNjc1NjYyZTgwXkEyXkFqcGdeQXVyMjE5MjEyNjM@._V1_UY268_CR93,0,182,268_AL_.jpg"></a><div class="caption">Maigret(TV series|53 episodes|59-63) Rupert Davies(review)...captured mood and style of Simenon's books...captured the atmosphere of Simenon's Paris perfectly with its Citroen Tractions, cobbled streets and bistros....Half the UK population flocked home to see it each week.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV maigret french mystery"><a href="http://www.imdb.com/title/tt0167585/?ref_=fn_tt_tt_10a"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BYWFjZWQwMTgtMjY4Yi00MWJkLTk3NGUtZGQ3MDI4ZjEyODIyXkEyXkFqcGdeQXVyMjEyNzc5ODI@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Les enqutes du commissaire Maigret (TV Series|88 episodes|6790) ...has to be good; prod. while Simenon was alive.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film maigret french mystery"><a href="http://www.imdb.com/title/tt0095566/?ref_=fn_al_tt_5"><img alt="film" src=""></a><div class="caption">Maigret (1988) Richard Harris's version; if likeable they made a TV series w/him too</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism Intl"><a href="http://www.imdb.com/title/tt0097195/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTM5MzIwNzU2M15BMl5BanBnXkFtZTcwOTA5NzcxMQ@@._V1_UY268_CR7,0,182,268_AL_.jpg"></a><div class="caption">S Korean, (1989)The title itself is a koan.  "... better than any previous film of this type."</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism docum Intl"><a href="http://www.imdb.com/title/tt1156470/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNzg5ZTg5YjgtYjc1MS00MzgzLThjZGYtYmJiNjQ1NDgyMGMxXkEyXkFqcGdeQXVyMjAzMjcxNTE@._V1_UY268_CR4,0,182,268_AL_.jpg"></a><div class="caption">2009 (Japan) Dogen Zenji</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism Intl"><a href="http://www.imdb.com/title/tt0374546/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTI0ODMwOTIxOV5BMl5BanBnXkFtZTcwMzE2NDUyMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">S Korean, Spring, Summer, Fall, Winter... and Spring (2003)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism Intl"><a href="http://www.imdb.com/title/tt0196069/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTY2NTY0OTQzOV5BMl5BanBnXkFtZTcwNTQxNDMzMQ@@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">set in Ladakh, Himalayas</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism Intl"><a href="http://www.imdb.com/title/tt0499238/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BOTk4Njk0NjQ5NF5BMl5BanBnXkFtZTcwNzU0MTg3Mg@@._V1_UY268_CR12,0,182,268_AL_.jpg"></a><div class="caption">Milarepa (2006) Photographed in the stunning Lahaul-Spiti region of Northern India</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism docum Intl"><a href="http://www.imdb.com/title/tt1270080/?ref_=tt_rec_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTUwOTE4OTMyMl5BMl5BanBnXkFtZTcwMjU3OTY2Mw@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">(2005) Document. A journey exploring the practices of Chinese hermits living in the Zhongnan Mountains.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism"><a href="http://www.imdb.com/title/tt0407337/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTIwNjY3MDg0NV5BMl5BanBnXkFtZTcwNjY2MzUzMQ@@._V1_UY209_CR1,0,140,209_AL_.jpg"></a><div class="caption">"...a clever little Indie about the American zen experience" (Comedy)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism"><a href="http://www.imdb.com/title/tt0261277/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNDM4ZjBkMmMtMTkwZC00ODVjLWI5MTUtNThlMmYzM2UyZTExXkEyXkFqcGdeQXVyMTgwOTE5NDk@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">The Sea That Thinks (2000) comme "The Mind's Eye"</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism docum"><a href="http://www.imdb.com/title/tt1172047/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BODVjNjRmZjYtZWViYy00OTI2LWJiNzQtMTkwNjM1ZTUyYmZkXkEyXkFqcGdeQXVyNjI5OTgyMjA@._V1_UY268_CR9,0,182,268_AL_.jpg"></a><div class="caption">Documentary: Rinpoche (2011) stars Ginsberg</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism docum"><a href="http://www.imdb.com/title/tt0155149/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BZTI0Njg1ZjgtNjkxNC00YTMzLWJjODYtYjgwMTllNTRlY2Q0XkEyXkFqcGdeQXVyMTIxMjI1MzA@._V1_UY268_CR8,0,182,268_AL_.jpg"></a><div class="caption">Document.: 1998 (Switzerland) Steps of mindfulness</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism docum Intl"><a href="http://www.imdb.com/title/tt2301090/?ref_=kw_li_tt"><img alt="film" src=""></a><div class="caption">Cave in the Snow (2002) 52min | Documentary | Australia</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film buddhism Intl"><a href="http://www.imdb.com/title/tt1452647/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMmQ0ZWFjYWYtMzRkMy00ZDM3LThkMTAtMDQ1NTc5ZjI4YjAwXkEyXkFqcGdeQXVyNDY0NDM0NzI@._V1_UY268_CR0,0,182,268_AL_.jpg"></a><div class="caption">Around the World in 80 Gardens: China and Japan | Documentary 2008</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0051361/?ref_=nm_flmg_dr_48"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTMzNTAxODg4Ml5BMl5BanBnXkFtZTcwNTc3NDQyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">(1958) Released from prison, a gangster (Michitaro Mizushima) retrieves diamonds sought by fellow yakuza.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0054325/?ref_=nm_flmg_dr_41"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BZjc2OTY4MDktZTFjOS00ZmRkLThhM2MtNDBjZjAzNTc4NGJiXkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_UY268_CR4,0,182,268_AL_.jpg"></a><div class="caption">(1960) A prison truck is assaulted and the two convicts inside are murdered.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0053720/?ref_=nm_flmg_dr_39"><img alt="film" src=""></a><div class="caption">(1960)Two reporters of divergent morals investigate a drug ring, delving deeper into the underworld in the process.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0054350/?ref_=nm_flmg_dr_38"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNmNmYTkzNDMtMGVhMi00Y2Y3LTk0OTMtY2NjYzU2OWQzOTMyXkEyXkFqcGdeQXVyNjUwMTQ4NjE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">(1960)young rebel Juro has to deal with an environment of crime and prostitution</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0054967/?ref_=nm_flmg_dr_35"><img alt="film" src=""></a><div class="caption">(1961)A Hell of a Guy | Muteppo-daisho (original title)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0055404/?ref_=nm_flmg_dr_34"><img alt="film" src=""></a><div class="caption">(1961) The Man with the Hollow-Tip Bullets |Sandanju no otoko (original title)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0056989/?ref_=nm_flmg_dr_28"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTgwNDQzMDYwNV5BMl5BanBnXkFtZTgwNjY5Nzk1MDE@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Detective Bureau 2-3: Go to Hell Bastards (1963)Kutabare akut-domo - Tantei jimusho 23 (original title)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0057697/?ref_=nm_flmg_dr_27"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTU5Nzg4OTk2OF5BMl5BanBnXkFtZTcwMjcyNTcyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Youth of the Beast (1963) Yaj no seishun (original title)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0181956/?ref_=nm_flmg_dr_26"><img alt="film" src=""></a><div class="caption">Akutaro (1963) The Bastard </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0058409/?ref_=nm_flmg_dr_23"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTkyOTgyNTM1OV5BMl5BanBnXkFtZTcwMzg0OTkyMQ@@._V1_UY268_CR7,0,182,268_AL_.jpg"></a><div class="caption">Nikutai no mon (1964)Gate of Flesh </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0059320/?ref_=nm_flmg_dr_19"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjAxMjM2ODgxOF5BMl5BanBnXkFtZTcwNjE4NDQyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Irezumi ichidai (1965) Tattooed Life </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0061101/?ref_=nm_flmg_dr_17"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjEwODg1Mzk5Nl5BMl5BanBnXkFtZTcwMDIwODAwMQ@@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">Tky nagaremono (1966) Tokyo Drifter </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0061882/?ref_=nm_flmg_dr_15"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTY2ODA1NDcyMV5BMl5BanBnXkFtZTcwNjk3MDYxMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">J Shishido,(1967)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0285906/?ref_=nm_flmg_dr_2"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjEzOTE2MjQ2N15BMl5BanBnXkFtZTcwMjUxOTAyMQ@@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">(2001) Pisutoru opera (original title)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0089404/?ref_=nm_flmg_dr_6"><img alt="film" src="http://criticsroundup.com/wp-content/uploads/2015/11/capone-cries-a-lot-still-526x284.jpg"></a><div class="caption">(1985)... possibly the ne plus ultra of Seijun Suzuki provocations, and must be seen to be believed... Made entirely in Japan, and with dodgy English-language acting by both the Japanese and American performers, its an explosion of color and anachronistic costumes and hairstyles, with Kimuras set design repurposing a Japanese amusement park to approximate the West Coast of the United States.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film japan seijunSuzuki yakuza"><a href="http://www.imdb.com/title/tt0057219/?ref_=fn_al_tt_1"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjEzNDYxMjc0NV5BMl5BanBnXkFtZTcwNzc3NDQyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Kant mushuku (1963)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Indie"><a href="https://en.wikipedia.org/wiki/Water_(2005_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/8/86/Water_%282005_film%29_cover_art.jpg" /></a><div class="caption">Water (2005),  India in 1938, movie follows Fire(1996) &amp; Earth(1998). Deepa Mehta/Anurag Kashyap</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad Indie"><a href="https://en.wikipedia.org/wiki/The_Namesake_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/8/8b/The_Namesake.jpg" /></a><div class="caption">(2006) based upon J. Lahiri's bk / Mira Nair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Indie"><a href="https://en.wikipedia.org/wiki/Slumdog_Millionaire"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/9/92/Slumdog_Millionaire_poster.png/250px-Slumdog_Millionaire_poster.png" /></a><div class="caption">2008 British drama film</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie Intl scifi"><a href="https://en.wikipedia.org/wiki/District_9"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d7/District_nine_ver2.jpg/220px-District_nine_ver2.jpg" /></a><div class="caption">2009 science fiction thriller aliens in '82 Jo'burg</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie comedy"><a href="https://www.criterion.com/films/594-bottle-rocket"><img alt="film" src="h" /></a><div class="caption">1996 Wes Anderson | Owen & Luke Wilson</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie comedy"><a href="https://www.criterion.com/films/333-rushmore"><img alt="film" src="h" /></a><div class="caption">1998 Wes Anderson | Bill Murray</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie comedy"><a href="https://www.criterion.com/films/230-the-royal-tenenbaums"><img alt="film" src="h" /></a><div class="caption">2001 Wes Anderson | Gene Hackman Ben Stiller</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie comedy"><a href="https://www.criterion.com/films/741-the-life-aquatic-with-steve-zissou"><img alt="film" src="h" /></a><div class="caption">2004 Wes Anderson | Owen Wilson  hunt for shark</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Indie comedy"><a href="https://www.criterion.com/films/27520-the-darjeeling-limited"><img alt="film" src="h" /></a><div class="caption">2007 Wes Anderson | Owen Wilson  train voyage across India</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0244409/?ref_=fn_al_tt_1"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNzkzMjVjOTQtYzgyOC00ZmM0LTk1YjUtNDU4ZTcyNzVlZWQ4XkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR10,0,182,268_AL_.jpg"></a><div class="caption">(1962)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0060444/?ref_=nm_flmg_dr_38"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BZDM0ODljZjgtZGQwZS00YTY3LWJjNDAtN2FlNTA5MTFmYTEzXkEyXkFqcGdeQXVyNjczMDYzNDI@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">(1966) Believing himself to be a suspect for embezzlement in British India, a man must testify against non-violent freedom-fighters.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0244430/?ref_=nm_flmg_dr_37"><img alt="film" src=""></a><div class="caption">Biwi Aur Makan (1966) 4 guys come to Bombay & 2 of 'em dress in drag to get accomodation</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0244443/?ref_=nm_flmg_dr_29"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNTcyYzI5Y2MtNWY4NS00OGFhLWFkYWItYTVlNGU0NTgzNTllXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">(1971) Bombay, Hanging gardens etc.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0068257/?ref_=nm_flmg_dr_28"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTg5NDIyNzAwOV5BMl5BanBnXkFtZTgwMjk3ODM3NDE@._V1_UY268_CR9,0,182,268_AL_.jpg"></a><div class="caption">(1972)family has a reputation of not having any cook last long</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0069204/?ref_=nm_flmg_dr_27"><img alt="film" src=""></a><div class="caption">Sabse Bada Sukh (1972) Village born Lalloo re-locates to Bombay</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0070434/?ref_=nm_flmg_dr_25"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjE3NDMyMzM4NF5BMl5BanBnXkFtZTgwODAyMDU4MzE@._V1_UY268_CR9,0,182,268_AL_.jpg"></a><div class="caption">(1973) Delhi, Calcutta</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0072783/?ref_=nm_flmg_dr_23"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjAzMjMzMzU2N15BMl5BanBnXkFtZTgwMDkxOTE3NDE@._V1_UY268_CR9,0,182,268_AL_.jpg"></a><div class="caption">(1975)new husband plays a practical joke on wife's family</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="https://en.wikipedia.org/wiki/Alaap"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/3/31/Alaap.jpg/220px-Alaap.jpg"></a><div class="caption">Alaap (1977)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="https://en.wikipedia.org/wiki/Chaitali_(film)"><img alt="film" src=""></a><div class="caption">Chaitali (1975) Dharmendra, based on novel of the same name by famed Bengali writer Ashapoorna Devi</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="https://en.wikipedia.org/wiki/Arjun_Pandit"><img alt="film" src="https://en.wikipedia.org/wiki/File:Arjun_Pandit.jpg"></a><div class="caption">1976 - Keshto</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0244585/?ref_=nm_flmg_dr_14"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTk0MTk4NjAwOV5BMl5BanBnXkFtZTgwNDM1NDk5NTE@._V1_UY268_CR9,0,182,268_AL_.jpg"></a><div class="caption">(1980) </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0244674/?ref_=nm_flmg_dr_17"><img alt="film" src=""></a><div class="caption">Naukri (1978)A.K. Hangal Rajesh Khanna Raj Kapoor</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0079382/?ref_=nm_flmg_dr_15"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BZTRiYWZmMjktMWQxMS00MjkxLTg5ZDQtNDc5OWI1NTM1MzhkXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR147,0,182,268_AL_.jpg"></a><div class="caption">(1979) Hangal, Keshto, bachchan</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0082796/?ref_=nm_flmg_dr_13"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjM2YjQyOGMtMzU0Zi00OGUwLWE0MDEtMjExN2RmYWNlNjcyXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR5,0,182,268_AL_.jpg"></a><div class="caption">(1981) Amol Palekar, Swaroop Sampat, Utpal Dutt |</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0244380/?ref_=nm_flmg_dr_10"><img alt="film" src=""></a><div class="caption">Achha Bura (1983) Amjad Khan, Ranjeet, Raj Babbar</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0244590/?ref_=nm_flmg_dr_9"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNGE0Njc0M2EtYjdhYi00ODM0LWI4MGEtODAxZTNlOWRkZmIzXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR1,0,182,268_AL_.jpg"></a><div class="caption">(1983) Farooq Shaikh, Deepti Naval, Utpal Dutt |</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Hrishikesh comedy"><a href="http://www.imdb.com/title/tt0262527/?ref_=nm_flmg_dr_1"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BN2MyMTk5N2YtZDQ3Yi00NzI4LTgyOTItOTNiMzZiMDU1NjkxXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">(1998)</div></div>  <div dojoType='com.trivedi.oPls.mPane' tags="film Intl action"><a href="https://en.wikipedia.org/wiki/The_Counterfeiters_(2007_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/0/08/Counterfeiters_ver3.jpg" /></a><div class="caption">(2007) flooding the Reich w/fake notes</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film french bio"><a href="https://en.wikipedia.org/wiki/La_Vie_en_rose_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/c/cb/La_Vie_en_Rose_poster.jpg/220px-La_Vie_en_Rose_poster.jpg" /></a><div class="caption">(2007) bio-Piaf</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl hist"><a href="https://en.wikipedia.org/wiki/4_Months,_3_Weeks_and_2_Days"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/4/41/4months3weeks%262days_poster.jpg/220px-4months3weeks%262days_poster.jpg" /></a><div class="caption">set in Communist Romania ~ final yrs of Ceau?escu era</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl spy"><a href="https://en.wikipedia.org/wiki/Lust,_Caution"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/3/32/Lust_caution.jpg/220px-Lust_caution.jpg" /></a><div class="caption">Spy movie set in Hong Kong in 1938 and in Shanghai in 1942</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl action"><a href="https://en.wikipedia.org/wiki/The_Edge_of_Heaven_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/f/f5/Auf_der_anderen_Seite.jpg/215px-Auf_der_anderen_Seite.jpg" /></a><div class="caption">2007 Turkish-German drama</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film french literary"><a href="https://en.wikipedia.org/wiki/Roman_de_Gare"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/8/82/Romandegare.jpg/220px-Romandegare.jpg" /></a><div class="caption">2007 French film French slang for "trashy novel fr. train station" </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl action"><a href="https://en.wikipedia.org/wiki/Revanche_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/a/a4/Revanchefilmposter.jpg/220px-Revanchefilmposter.jpg" /></a><div class="caption">Viennese ex-con & Ukrainian prostitute - bank robbery.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl"><a href="https://en.wikipedia.org/wiki/The_Song_of_Sparrows"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/66/The_Song_of_Sparrows%2C_2008_film.jpg/220px-The_Song_of_Sparrows%2C_2008_film.jpg" /></a><div class="caption">a 2008 Iranian movie man works @ ostrich farm; fired when an ostrich escapes</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl"><a href="https://en.wikipedia.org/wiki/Three_Monkeys"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/b/bf/Three_Monkeys_VideoCover.png/220px-Three_Monkeys_VideoCover.png" /></a><div class="caption">2008 Turkish film Istanbul</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl"><a href="https://en.wikipedia.org/wiki/The_White_Ribbon"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d6/White_ribbon.jpg/220px-White_ribbon.jpg" /></a><div class="caption">2009 black-and-white German-language drama the roots of evil</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film french"><a href="https://en.wikipedia.org/wiki/A_Prophet"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d1/A_Prophet.jpg/220px-A_Prophet.jpg" /></a><div class="caption">2009 French prison drama-crime film: the Corsicans vs the Muslims.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl comedy"><a href="https://en.wikipedia.org/wiki/Soul_Kitchen_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/a/a0/SoulKitchenFilmPoster.jpg"></a><div class="caption">2009 German comedy film re: Greek tavern in Hamburg</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl"><a href="https://en.wikipedia.org/wiki/Animal_Kingdom_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/4/40/Animal_kingdom_poster.jpg" /></a><div class="caption">cop-shooters in '88 Melbourne, Austr.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film british"><a href="https://en.wikipedia.org/wiki/Fish_Tank_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d7/Fish_tank_poster.jpg/330px-Fish_tank_poster.jpg" /></a><div class="caption">2009 British drama film / 15yr old in an East London council estate</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice Intl"><a href="https://en.wikipedia.org/wiki/The_Ghost_Writer_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/1/1a/The_Ghost_Writer_poster.png" /></a><div class="caption">2010 pol thriller film directed by Roman Polanski.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film arthouse literary"><a href="https://en.wikipedia.org/wiki/Somewhere_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/a/a0/Somewhere_Poster.jpeg" /></a><div class="caption">explores ennui among Hollywood stars / Chateau Marmont / S. coppola</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl"><a href="https://en.wikipedia.org/wiki/Yi_Yi"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/5/5c/Yiyiposter.jpg" /></a><div class="caption">3 generations of middle-class Taiwanese family in Taipei.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl"><a href="https://en.wikipedia.org/wiki/In_the_Mood_for_Love#Critical_reception"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/4/45/In_the_Mood_for_Love_movie.jpg" /></a><div class="caption">Hong Kong in 1962, v. highly rated movie</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film Intl"><a href="http://www.imdb.com/title/tt0462684/?ref_=fn_al_tt_1"><img alt="food" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTc0NDQ3ODI1Ml5BMl5BanBnXkFtZTgwMjI2OTE3MjE@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Hyeol-eui-noo (2005) Blood Rain | Dae-seung Kim</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0072064/?ref_=nm_flmg_act_53"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNjdmMmM2MWItMTFkNy00ZTIzLTg0MTMtOTUxODdhODY2ZGY2XkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR6,0,182,268_AL_.jpg" /></a><div class="caption">(1974) A Delhi-based woman in a steady relationship gets an old Mumbai flame back in her life.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0072777/?ref_=nm_flmg_act_51"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTU5MTc0ODE3MF5BMl5BanBnXkFtZTcwMjM5MzIyMQ@@._V1_UY268_CR4,0,182,268_AL_.jpg" /></a><div class="caption">(1975) "established Amol Palekar as having an uncommon comic talent for playing mousy characters..."</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0157460/?ref_=nm_flmg_act_50"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjEzNDU4NzUwNV5BMl5BanBnXkFtZTgwODYwOTk1MDE@._V1_UY268_CR9,0,182,268_AL_.jpg" /></a><div class="caption">(1976) Bombay Zarina Wahab</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0075747/?ref_=nm_flmg_act_47"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BYzk2Y2JmMTYtMDQ4MS00YTIxLWI0MzgtNTVhNGRmNDJkNjRlXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR10,0,182,268_AL_.jpg" /></a><div class="caption">(1977) Smita Patil, Dina Pathak, Naseeruddin Shah |Girish Karnad (screenplay) </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0316733/?ref_=nm_flmg_act_46"><img alt="film" src="h" /></a><div class="caption">(1977) taxi-driver Tun Tun, Mehmood Jr.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0150718/?ref_=nm_flmg_act_44"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNWExNWQ5ZGMtNzBlMi00MjhmLTlmODEtZjVkNjY1OTdlZjJiXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR2,0,182,268_AL_.jpg" /></a><div class="caption">(1977) Bombay</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0158179/plotsummary?ref_=tt_ov_pl"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png" /></a><div class="caption">(1978) Panchgani Keshto Mukherjee, Asrani, Iftekhar</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0079364/?ref_=nm_flmg_act_34"><img alt="film" src="" /></a><div class="caption">Jeena Yahan (1979) Shabana Azmi, Dina Pathak</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0157320/?ref_=nm_flmg_act_33"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMWYxZWNkNDgtZjQ5ZS00ZjJkLWI0NWQtZGYxOGMwYzdjMTA2XkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR5,0,182,268_AL_.jpg" /></a><div class="caption">(1980) Utpal Dutt, Shabana Azmi, Girish Karnad</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0178185/?ref_=nm_flmg_act_32"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BM2JlNDgxMmEtNmY0Ni00Y2YyLTliZmUtMjY0MWQ4OTM0ZDg0XkEyXkFqcGdeQXVyMjU4NDY1ODA@._V1_UY268_CR43,0,182,268_AL_.jpg" /></a><div class="caption">(1980) Rajesh Khanna, Rakhee Gulzar, Rekha |</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt1142320/?ref_=nm_flmg_act_31"><img alt="film" src="" /></a><div class="caption">(1981)Plot No. 5</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0082796/?ref_=nm_flmg_act_30"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMjM2YjQyOGMtMzU0Zi00OGUwLWE0MDEtMjExN2RmYWNlNjcyXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR5,0,182,268_AL_.jpg" /></a><div class="caption">(1981) Director: Hrishikesh Mukherjee | Swaroop Sampat, Utpal Dutt |</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/year/1982/?ref_=tt_ov_inf"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNTU2NWUyZmEtMDgwOC00ZjhkLTgyMGMtOWQyNzQ3MGI5OWQ5XkEyXkFqcGdeQXVyMzU0NzkwMDg@._V1_UY268_CR5,0,182,268_AL_.jpg" /></a><div class="caption">(1982) Sanjeev Kumar, A.K. Hangal, Deepti Naval|</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href=""><img alt="film" src="" /></a><div class="caption">(1983)  |</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0086170/?ref_=nm_flmg_act_18"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNzA5NTM5MDktOTU0NS00YTNhLTk1NWItY2EwODQwYTJkZDI3XkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY268_CR3,0,182,268_AL_.jpg" /></a><div class="caption">(1982) Hrishikesh Mukherjee | Amol Palekar, Parveen Babi, Farooq Shaikh |</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0305993/?ref_=nm_flmg_act_17"><img alt="film" src="" /></a><div class="caption">Pyaasi Aankhen (1983) | Shabana Azmi, Amol Palekar, Waheeda Rehman </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0088227/?ref_=nm_flmg_act_14"><img alt="film" src="" /></a><div class="caption">Tarang (1984) |Smita Patil, Shreeram Lagoo, Girish Karnad, Om Puri</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0244567/?ref_=nm_flmg_act_11"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMDhkN2M4ZTctOTY1ZC00MjEwLWEzNTctZDBkM2FiYmY1NTcwXkEyXkFqcGdeQXVyMzU0NzkwMDg@._V1_UY268_CR1,0,182,268_AL_.jpg" /></a><div class="caption">(1984) |Director: Hrishikesh Mukherjee</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0089413/?ref_=nm_flmg_act_10"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTkwNzE3NTM3NV5BMl5BanBnXkFtZTcwNzUyNDE0MQ@@._V1_UY268_CR3,0,182,268_AL_.jpg" /></a><div class="caption">(1985) | murder mystery on set</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0249358/?ref_=nm_flmg_act_9"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BZDU2MzFkYmItZTllNC00OGFiLWI5ZWMtOWQ2OTFlYTY1ZWM1XkEyXkFqcGdeQXVyMzU0NzkwMDg@._V1_UY268_CR1,0,182,268_AL_.jpg" /></a><div class="caption">(1985) | astrologer </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt0270219/?ref_=nm_flmg_act_7"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMzg0Yzg0M2YtOTAzYy00Y2Q2LWFjNzQtNjE4MGE1MGQzNDIwXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UX182_CR0,0,182,268_AL_.jpg" /></a><div class="caption">(1986) | 10th Road, Juhu, Bombay Utpal Dutt</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi AmolPalekar"><a href="http://www.imdb.com/title/tt2624346/?ref_=nm_flmg_act_6"><img alt="film" src="" /></a><div class="caption">Mr. X (1987) | Tom Alter, Shabana Azmi, Amjad Khan</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Galate_Samsara"><img alt="film" src=""></a><div class="caption">Galate Samsara (1977) Kannada comedy of a married man who develops an affair with a cabaret dancer</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Bairavi"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/a/a8/Bairavi_poster.jpg"></a><div class="caption">Bairavi (1978) Tamil when he "became a superstar" (35 ft cut-out poster etc.)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Mullum_Malarum"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/7/76/Mullum_Malarum_Poster.jpg"></a><div class="caption">Thorn and flower (1978) Tamil widely considered best perf. of his career</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Ninaithale_Inikkum_(1979_film)"><img alt="film" src="https://en.wikipedia.org/wiki/File:Ninaithale_Inikkum_Poster.jpg"></a><div class="caption">Ninaithale Inikkum (1979) Sweet Memories - Kamalahassan; Singapore, young love</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Moondru_Mugam"><img alt="film" src="https://en.wikipedia.org/wiki/File:Moondru_Mugam.jpg"></a><div class="caption">Moondru Mugam - Three Faces (1982) Tamil triple roles Alex, Arun and John</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Thalapathi"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/b/b3/Thalapathi_poster.jpg"></a><div class="caption">Thalapathi (Commander) 1991 Tamil Mani Ratnam/ Mammootty/ based on the friendship betw Karna/Duryodhana</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Baashha"><img alt="film" src="https://en.wikipedia.org/wiki/File:Baasha_Poster.jpg"></a><div class="caption">Baashha 1995 Tamil - R is rickshaw-driver w/gangster past</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Thenmavin_Kombath"><img alt="film" src="https://en.wikipedia.org/wiki/File:Thenmavin_Kombath.jpg"></a><div class="caption">Thenmavin Kombath (At the top of Sweet Mango Tree) 1994 Malayalam madly successful in Japan(dubbed into Japanese, as Mutu: Odoru Maharaja in 98)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Sivaji_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/c/ce/Sivaji_The_Boss.jpg"></a><div class="caption">Sivaji 2007 - programmer returns to India</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi Rajini"><a href="https://en.wikipedia.org/wiki/Kabali_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/9/9e/Rajinikanth_in_Kabali.jpg"></a><div class="caption">Kabali 2016 Tamil gang war uuuuge!!</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice british comedy"><a href="http://www.imdb.com/title/tt0059399/?ref_=kw_li_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTg4MTQ0NTA3MF5BMl5BanBnXkFtZTcwMDcwODYyMQ@@._V1_UY268_CR0,0,182,268_AL_.jpg" /></a><div class="caption">Lord Jim (1965) O'Toole</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film french nv comedy"><a href="https://www.criterion.com/films/937-elena-and-her-men"><img alt="film" src=""></a><div class="caption">Elena et les hommes 1956 fin-de-siecle France Jean Renoir| Comedy</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film british comedy"><a href="https://www.criterion.com/films/660-how-to-get-ahead-in-advertising"><img alt="film" src=""></a><div class="caption">1988 man spouts talking boil| cult-hit Comedy</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film british literary comedy"><a href="https://www.criterion.com/films/28156-blithe-spirit"><img alt="film" src=""></a><div class="caption">1945 Rex Harrison as a novelist | film ver of Cowards theater hit | Comedy</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice comedy"><a href="https://www.criterion.com/films/658-withnail-and-i"><img alt="film" src=""></a><div class="caption">1986 semi-autobiographical cult favorite Two unemployed actors | Comedy</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film comedy french"><a href="https://www.criterion.com/films/28114-jour-de-fete"><img alt="film" src=""></a><div class="caption">1949 Jacques Tati </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film comedy french"><a href="https://www.criterion.com/films/650-mon-oncle"><img alt="film" src=""></a><div class="caption">1958 Jacques Tati</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film comedy french"><a href="https://www.criterion.com/films/651-playtime"><img alt="film" src=""></a><div class="caption">1967 Jacques Tati</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film comedy french"><a href="https://www.criterion.com/films/859-trafic"><img alt="film" src=""></a><div class="caption">1971 Jacques Tati</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice comedy"><a href="http://www.imdb.com/title/tt0289848/?ref_=nv_sr_2"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTc0OTYwMzQ5OF5BMl5BanBnXkFtZTYwMzQyMDg5._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Analyze That (2002)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice comedy"><a href="http://www.imdb.com/title/tt0290002/?ref_=nv_sr_1"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BYjRjYWE0YjktMGU5OS00YTdkLThlMjUtZjY0ZWM2ODRmN2Q5XkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Meet the Fockers (2004)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film BoxOffice comedy"><a href="http://www.imdb.com/title/tt0970866/?ref_=tt_rec_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTkwNjE3NjQwOV5BMl5BanBnXkFtZTcwNzAyNTMwNA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Little Fockers (2010)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="http://www.imdb.com/title/tt2567712/board/nest/244640072?ref_=tt_bd_1"><img alt="film" src="http://www.imdb.com/title/tt2567712/mediaviewer/rm2679292416"></a><div class="caption">Starred Up</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Last_King_of_Scotland_(film)#Plot"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d9/Last_king_of_scotland_uk.jpg/220px-Last_king_of_scotland_uk.jpg" /></a><div class="caption">The Last King of Scotland (2006) re:Idi Amin</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Departed"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/5/50/Departed234.jpg/220px-Departed234.jpg" /></a><div class="caption">The Departed (2006) directed by Martin Scorsese</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Letters_from_Iwo_Jima"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/8/87/Letters_from_Iwo_Jima.jpg" /></a><div class="caption">Letters from Iwo Jima (2006) directed by Clint Eastwood</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_History_Boys_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/3/3f/The_History_Boys_%28film%29.JPG" /></a><div class="caption">The History Boys (2006),  adapted from play which won 05 Olivier/ 06 Tony Awards</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Sweeney_Todd:_The_Demon_Barber_of_Fleet_Street_(2007_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/4/4b/Sweeneylarge.jpg" /></a><div class="caption">Sweeney Todd (2007), Johnny Depp as The Demon Barber of Fleet Street </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Into_the_Wild_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/8/8a/Into-the-wild.jpg" /></a><div class="caption">Into the Wild (2007) drama survival film-Sean Penn(dir) - 1996 non-fiction bk of same name.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Bourne_Ultimatum_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/f/fe/The_Bourne_Ultimatum_%282007_film_poster%29.jpg" /></a><div class="caption">The Bourne Ultimatum (2007) Matt Damon</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Assassination_of_Jesse_James_by_the_Coward_Robert_Ford"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/a/ab/Assassination_poster.jpg" /></a><div class="caption">The Assassination of Jesse James... 2007 revisionist Western film </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Starting_Out_in_the_Evening"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/6/6a/SOITE_poster.jpg" /></a><div class="caption">Starting Out in the Evening(2007)aging author approached by Brown U grad student.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="http://www.imdb.com/title/tt2567712/board/nest/244640072?ref_=tt_bd_1"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTczOTY4MTg2OF5BMl5BanBnXkFtZTgwNTM2NzcxMjE@._V1_SY1000_CR0,0,674,1000_AL_.jpg" /></a><div class="caption">Starred Up (buzz abt. impossible-to-decipher accents in this movie)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Dark_Knight_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/8/8a/Dark_Knight.jpg/220px-Dark_Knight.jpg" /></a><div class="caption">2008 </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Gran_Torino"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c6/Gran_Torino_poster.jpg/220px-Gran_Torino_poster.jpg" /></a><div class="caption">2008 </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Wrestler_(2008_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/3/3e/The_Wrestler_poster.jpg/220px-The_Wrestler_poster.jpg" /></a><div class="caption">aging professional wrestler befriends stripper etc.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Frozen_River"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/2/2e/Frozen-river-movie-poster.jpg/215px-Frozen-river-movie-poster.jpg" /></a><div class="caption">2008 crime drama film abt 2 working-class women who smuggle immigrants frm Canada to US</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Mongol_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/8/81/Mongol_poster.jpg/220px-Mongol_poster.jpg" /></a><div class="caption">The Rise of Genghis Khan</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/An_Education"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/7/74/Education_ver3.jpg/220px-Education_ver3.jpg" /></a><div class="caption">2009 60s london</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Hurt_Locker"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6c/HLposterUSA2.jpg/220px-HLposterUSA2.jpg" /></a><div class="caption">2008 war film about an Iraq War Explosive Ordinance Disposal team</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Inglourious_Basterds"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c3/Inglourious_Basterds_poster.jpg/220px-Inglourious_Basterds_poster.jpg" /></a><div class="caption">2009 German-American war film written/dir by Quentin Tarantino</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/500_Days_of_Summer"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d1/Five_hundred_days_of_summer.jpg/220px-Five_hundred_days_of_summer.jpg" /></a><div class="caption">2009 highly rated rom-com (@ end he meets 'Autumn') :-(</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Invictus_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/0/05/Invictus-poster.png" /></a><div class="caption">2009 Mandela, rugby - Eastwood</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Star_Trek_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/2/29/Startrekposter.jpg/220px-Startrekposter.jpg" /></a><div class="caption">2009 film</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_King%27s_Speech"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/a/a0/Kings_speech_ver3.jpg" /></a><div class="caption">2010</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Social_Network"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/7/7a/Social_network_film_poster.jpg" /></a><div class="caption">2010  the founding of Facebook</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Fighter"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/9/93/The_Fighter_Poster.jpg" /></a><div class="caption">2010 boxing film</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Inception"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/2/2e/Inception_%282010%29_theatrical_poster.jpg" /></a><div class="caption">2010 science fiction heist thriller film</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Shutter_Island_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/7/76/Shutterislandposter.jpg" /></a><div class="caption">2010 'neo-noir' thriller dir Scorsese</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Burn_After_Reading"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/thumb/4/42/Burn_After_Reading.png/220px-Burn_After_Reading.png" /></a><div class="caption">2008 black comedy (Coen bros, O brother...)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/True_Grit_(2010_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/c/ce/True_Grit_Poster.jpg" /></a><div class="caption">2010 Revisionist Western (Coen bros /Spielberg)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Hail,_Caesar!"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/0/01/Hail%2C_Caesar%21_Teaser_poster.jpg" /></a><div class="caption">'50s Hollywood (Coen bros)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Drive_(2011_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/1/13/Drive2011Poster.jpg" /></a><div class="caption">2011 neo-noir crime thriller</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Girl_with_the_Dragon_Tattoo_(2011_film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/8/80/The_Girl_with_the_Dragon_Tattoo_Poster.jpg" /></a><div class="caption">2011 Swedish-American psychological thriller</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/The_Tree_of_Life_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/4/4e/Thetreeoflifeposter.jpg" /></a><div class="caption">50s Texas; v. highly rated</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice"><a href="https://en.wikipedia.org/wiki/Margin_Call_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/6/62/Margin_Call.jpg" /></a><div class="caption">initial stages of the financial crisis of 200708, "easily the best Wall Street movie ever made"</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice">  <a href="http://www.imdb.com/title/tt1320253/?ref_=nv_sr_2">  <img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNTUwODQyNjM0NF5BMl5BanBnXkFtZTcwNDMwMTU1Mw@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a>  <div class="caption">The Expendables (2010)  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice">  <a href="http://www.imdb.com/title/tt2333784/?ref_=tt_rec_tt">  <img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BODU5ODMyMzg2MV5BMl5BanBnXkFtZTgwMTA2MTcxMjE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a>  <div class="caption">The Expendables 3 (2014)  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice">  <a href="http://www.imdb.com/title/tt1764651/?ref_=tt_rec_tt">  <img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTQzODkwNDQxNV5BMl5BanBnXkFtZTcwNTQ1ODAxOA@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a>  <div class="caption">The Expendables 2 (2012)  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice">  <a href="http://www.imdb.com/title/tt0299977/?ref_=fn_al_tt_1">  <img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTk5NjQyMzIwM15BMl5BanBnXkFtZTcwODQyNjYyMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a>  <div class="caption">Hero (2002)  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice">  <a href="http://www.imdb.com/title/tt0385004/?ref_=nv_sr_1">  <img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMzg4MDE0NzIwNl5BMl5BanBnXkFtZTcwMDI2NDcyMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a>  <div class="caption">House of Flying Daggers (2005)  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film boxOffice">  <a href="http://www.imdb.com/title/tt0446059/?ref_=tt_rec_tti">  <img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTI5MjA2Mzk2M15BMl5BanBnXkFtZTcwODY1MDUzMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a>  <div class="caption">Fearless (2006)  </div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0114106/?ref_=nm_flmg_act_22"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">The Peacock Spring (1996)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0349249/mediaviewer/rm1166053888?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNjYzNDY5MjQ5NV5BMl5BanBnXkFtZTcwNTk5MTQzMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Cosmopolitan (2003)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0480904/?ref_=nm_flmg_act_10"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">Hiding Divya (2006)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0826772/?ref_=nm_flmg_act_9"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">The Papdits (2006)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0213985/mediaviewer/rm4264399360?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTIxNDQ4NDI2M15BMl5BanBnXkFtZTcwMTI1MjU0MQ@@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">Partition (2007)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt2180423/?ref_=nm_flmg_act_1"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTU2NDYwNjg1NV5BMl5BanBnXkFtZTgwNzYzNjcwMDE@._V1_UY268_CR110,0,182,268_AL_.jpg">&lt;/a&gt;</a><div class="caption">Jadoo (2013)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt1934231/mediaviewer/rm1062387456?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNTI3ODQwNDAzN15BMl5BanBnXkFtZTcwMDg5NDExNg@@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">Delhi Belly (2011)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0166175/mediaviewer/rm911318016?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTI0MDk3ODQ4M15BMl5BanBnXkFtZTcwMDQ1NDkyMQ@@._V1_UY268_CR0,0,182,268_AL_.jpg"></a><div class="caption">East Is East (1999)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0168529/mediaviewer/rm2443714304?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNWY0Yjc5OTItMDNkYy00ZDdmLTlkYTgtYjlhMTdmZmZiMWNhXkEyXkFqcGdeQXVyNjYwOTkwNzQ@._V1_UY268_CR28,0,182,26%208_AL_.jpg"></a><div class="caption">Bombay Boys (1998)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt2204540/mediaviewer/rm4059363328?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTkyMDU3NjM5NV5BMl5BanBnXkFtZTgwNTYzODczMzE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Brahmin Bulls (2013)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0073341/mediaviewer/rm929810176?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNDQ1NjQ0Mjk4N15BMl5BanBnXkFtZTgwODUwNzU2MjE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">The Man Who Would Be King (1975)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0095584/?ref_=nm_flmg_act_32"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">Manika, une vie plus tard (1989)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0425326/mediaviewer/rm571380480?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTI0MzU5NTEwNF5BMl5BanBnXkFtZTcwNzIxMDU1MQ@@._V1_UY268_CR7,0,182,268_AL_.jpg"></a><div class="caption">Outsourced (2006)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt1012757/mediaviewer/rm3531002368?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTc2MDY5NjIxNV5BMl5BanBnXkFtZTgwNjU4MTA2MDE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Loins of Punjab Presents (2007)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt2356180/mediaviewer/rm3825968896?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTY1Nzg4MjcwN15BMl5BanBnXkFtZTcwOTc1NTk1OQ@@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">Bhaag Milkha Bhaag (2013)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi desiAbroad"><a href="http://www.imdb.com/title/tt0435706/mediaviewer/rm2605159424?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjI0MzgwNjI1NV5BMl5BanBnXkFtZTcwNDAzNzc5MQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Nina's Heavenly Delights (2006)</div></div>    <div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0159373/mediaviewer/rm2913967872?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTYxMTQwMDkwNF5BMl5BanBnXkFtZTYwMzk3MTk5._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Cotton Mary (1999) Directors: Ismail Merchant, Madhur Jaffrey</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0322530/mediaviewer/rm1676645120?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjE0NDc1Njc4NF5BMl5BanBnXkFtZTcwNDU2OTQ1MQ@@._V1_UY268_CR1,0,182,268_AL_.jpg"></a><div class="caption">Bombay Talkie</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0059709/mediaviewer/rm2397019392?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNTE1NzIyNzU5OF5BMl5BanBnXkFtZTcwMTUwMzUyMQ@@._V1_UY268_CR4,0,182,268_AL_.jpg"></a><div class="caption">Shakespeare-Wallah (1965)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0064396/mediaviewer/rm1299829248?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTU3NDIyMzk5Nl5BMl5BanBnXkFtZTgwMTQxODk1MDE@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">The Guru (1969)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0073903/mediaviewer/rm3050478848?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTY5OTc1Mzk4MV5BMl5BanBnXkFtZTcwOTQxNDUyMQ@@._V1_UY268_CR7,0,182,268_AL_.jpg"></a><div class="caption">The Wild Party (1975)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0072674/mediaviewer/rm1335072256?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTkzODQxNTgzMF5BMl5BanBnXkFtZTcwNTc5MTI2MQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Autobiography of a Princess (1975)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0076639/mediaviewer/rm210279680?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTg3MTUyNDUzNF5BMl5BanBnXkFtZTcwNzcxODYyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Roseland (1977)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0079316/mediaviewer/rm784243968?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTUxMTE2MTgxOV5BMl5BanBnXkFtZTcwNDE0NDYyMQ@@._V1_UY268_CR10,0,182,268_AL_.jpg">&lt;/a&gt;</a><div class="caption">Hullabaloo Over Georgie and Bonnie's Pictures (1978)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0079123/mediaviewer/rm4211706112?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTQ2ODE5NzQ2OF5BMl5BanBnXkFtZTcwMzExOTk4Mg@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">The Europeans (1979)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0082964/mediaviewer/rm600743168?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTUxODA1OTYzOF5BMl5BanBnXkFtZTcwMzY4NjQyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Quartet (1981)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0086992/mediaviewer/rm2459868928?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTM2NjIzMzI1M15BMl5BanBnXkFtZTcwNjk0MzAwMQ@@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">The Bostonians (1984)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0176016/mediaviewer/rm3566902528?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTQzNjk1NjM0OV5BMl5BanBnXkFtZTcwMzc1NTcyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">The Perfect Murder (1988)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0100200/mediaviewer/rm491691776?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTY3NTA1NTc4NF5BMl5BanBnXkFtZTcwOTM5OTAyMQ@@._V1_UY268_CR1,0,182,268_AL_.jpg"></a><div class="caption">Mr. & Mrs. Bridge (1990)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0101404/mediaviewer/rm3516570880?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjE1NTIxMjMzOV5BMl5BanBnXkFtZTcwNjc1NTcyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">The Ballad of the Sad Cafe (1991)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0113463/mediaviewer/rm1943379200?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTI1MjA3MDQ3Nl5BMl5BanBnXkFtZTcwNTkyNTUyMQ@@._V1_UY268_CR1,0,182,268_AL_.jpg"></a><div class="caption">Jefferson in Paris (1995)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0117791/mediaviewer/rm1834654720?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTk2NTI4MTMwMV5BMl5BanBnXkFtZTcwMjE4ODcyMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Surviving Picasso (1996)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0120127/mediaviewer/rm1664850944?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTQ1MjQ5ODc1OF5BMl5BanBnXkFtZTcwMjQyMjMyMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Side Streets (1998)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0200669/mediaviewer/rm520068352?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTQyNTI0OTY3M15BMl5BanBnXkFtZTcwMDI1MTQyMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">The Golden Bowl (2000)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0338249/mediaviewer/rm359111936?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTQ3NzE0NzY0NF5BMl5BanBnXkFtZTcwNzYyNjgyMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Merci Dr Rey! (2002)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film merchant literary british"><a href="http://www.imdb.com/title/tt0384686/mediaviewer/rm3504378368?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMzMzMDgxNzQ4MV5BMl5BanBnXkFtZTcwMTczNjEzMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">The White Countess (2005)</div></div>    <div dojoType='com.trivedi.oPls.mPane' tags="film china"><a href="http://www.imdb.com/title/tt0109424/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjA5MTc3NDE2MV5BMl5BanBnXkFtZTcwMDM5MTk5MQ@@._V1_UY209_CR14,0,140,209_AL_.jpg">&lt;/a&gt;</a><div class="caption">Chungking Express (1994)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film japan"><a href="http://www.imdb.com/title/tt0053390/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTc3MDc0OTE4OF5BMl5BanBnXkFtZTcwNDg2NTUyMQ@@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Floating Weeds (1959)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film arthouse"><a href="http://www.imdb.com/title/tt0060827/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTc1OTgxNjYyNF5BMl5BanBnXkFtZTcwNjM2MjM2NQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"></a><div class="caption">Persona (1966) | Bergman</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film comedy"><a href="http://www.imdb.com/title/tt0056923/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNTIwODUwMjU1N15BMl5BanBnXkFtZTgwMzg4ODQwMjE@._V1_UY209_CR2,0,140,209_AL_.jpg"></a><div class="caption">Charade (1963) Cary Grant/Hepburn <a href="https://www.criterion.com/films/603-charade">review</a></div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film arthouse german"><a href="http://www.imdb.com/title/tt0063759/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTcwNTkxOTcxMV5BMl5BanBnXkFtZTgwNjI4Nzc1MzE@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Hour of the Wolf (1968)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film nv french"><a href="http://www.imdb.com/title/tt0056732/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMzczNjE3OTY4MV5BMl5BanBnXkFtZTgwOTk5NTg0MTE@._V1._CR218,227,1124,1555_UY209_CR5,0,140,209_AL_.jpg"></a><div class="caption">The Exterminating Angel (1962) Bunuel</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film japan mifune"><a href="http://www.imdb.com/title/tt0055267/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTA4Nzg3MTk2ODdeQTJeQWpwZ15BbWU4MDAyNzY5MTEx._V1_UY209_CR8,0,140,209_AL_.jpg"></a><div class="caption">Daredevil in the Castle (1961) Mifune</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film japan mifune"><a href="http://www.imdb.com/title/tt0054150/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">Man Against Man (1960)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film japan mifune"><a href="http://www.imdb.com/title/tt0054006/?ref_=wl_li_i"><img alt="film" src="http://www.imdb.com/title/tt0054006/?ref_=wl_li_i"></a><div class="caption">The Gambling Samurai (1960)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film japan mifune"><a href="http://www.imdb.com/title/tt0051808/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTUzMzI1OTU2OV5BMl5BanBnXkFtZTgwNjAwOTQyNjE@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">The Hidden Fortress (1958)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film japan yakuza"><a href="http://www.imdb.com/title/tt0052567/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">Ankokugai no kaoyaku (1959)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film japan arthouse"><a href="http://www.imdb.com/title/tt0050330/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjA2ODExOTEwMF5BMl5BanBnXkFtZTgwMDQ5NTQ5MTE@._V1_UY209_CR3,0,140,209_AL_.jpg"></a><div class="caption">The Lower Depths (1957) Gorky (play), Kurosawa</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film dietrich"><a href="http://www.imdb.com/title/tt0020697/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNDkyMjgzMDU2Ml5BMl5BanBnXkFtZTgwMzg0MTE1MjE@._V1_UY209_CR1,0,140,209_AL_.jpg"></a><div class="caption">The Blue Angel (1930) Dietrich</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film dietrich"><a href="http://www.imdb.com/title/tt0023458/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjE4OTY2NjYwNl5BMl5BanBnXkFtZTgwOTEyOTYyMjE@._V1_UY209_CR0,0,140,209_AL_.jpg"></a><div class="caption">Shanghai Express (1932)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film dietrich"><a href="http://www.imdb.com/title/tt0026276/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjUyNTM5MTA1OV5BMl5BanBnXkFtZTgwODk1NTAwMjE@._V1_UX140_CR0,0,140,209_AL_.jpg"></a><div class="caption">The Devil Is a Woman (1935)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film arthouse british murder"><a href="http://ia.media-imdb.com/images/M/MV5BMTYwNDA3NDY2M15BMl5BanBnXkFtZTYwMDE4NTQ5._V1_UX140_CR0,0,140,209_AL_.jpg"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTYwNDA3NDY2M15BMl5BanBnXkFtZTYwMDE4NTQ5._V1_UX140_CR0,0,140,209_AL_.jpg"></a><div class="caption">Gosford Park (2001)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film literary"><a href="http://www.imdb.com/title/tt0105130/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjIxODM3MTI4M15BMl5BanBnXkFtZTcwNTIzNzU2NA@@._V1_UX140_CR0,0,140,209_AL_.jpg"></a><div class="caption">Peter's Friends (1992)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british"><a href="http://www.imdb.com/title/tt0101049/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjAyODI4MTc0Nl5BMl5BanBnXkFtZTYwOTUzNTI5._V1._CR1,1,267,434_UX140_CR0,0,140,209_AL_.jpg"></a><div class="caption">A Bit of Fry and Laurie (1987- 1995) many episodes remain to be seen</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british"><a href="http://www.imdb.com/title/tt0131158/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BOTNlM2FhODUtMzdmYy00MmE5LThiYmQtNTlkNTQxNjEyMGM0XkEyXkFqcGdeQXVyMDYxMTUwNg@@._V1_UY209_CR4,0,140,209%20_AL_.jpg"></a><div class="caption">Alfresco (1983-1984)</div>  </div>    <div dojoType='com.trivedi.oPls.mPane' tags="film arthouse merchant literary"><a href="http://www.imdb.com/title/tt0117400/?ref_=tt_mv"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjA4NDQ5NjE1NV5BMl5BanBnXkFtZTcwMzk0MTcxMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">The Proprietor (1996)</div>  </div>  <div dojoType='com.trivedi.oPls.mPane' tags="film nv french"><a href="http://www.imdb.com/title/tt0027336/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTcyOTU1OTU1Nl5BMl5BanBnXkFtZTgwMjQ5NTQ5MTE@._V1_UY209_CR12,0,140,209_AL_.jpg"></a><div class="caption">The Lower Depths (1936) Gabin | Renoir</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film nv french"><a href="http://www.imdb.com/title/tt0025898/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTUzOTI0MTI2NV5BMl5BanBnXkFtZTcwMDg4MDMzMQ@@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Toni (1935) | Renoir</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film nv french"><a href="http://www.imdb.com/title/tt0023284/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">Night at the Crossroads (1932)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film noir french"><a href="http://www.imdb.com/title/tt0080610/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjM2MzMzNjY0NF5BMl5BanBnXkFtZTgwNTk1OTk3MTE@._V1._CR28.1875,48.622161865234375,1471.1817932128906,19%2048.6362609863281_UY209_CR9,0,140%20,209_AL_.jpg"></a><div class="caption">The Last Metro (1980)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film noir french"><a href="http://www.imdb.com/title/tt0054389/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTU3MjUxNTM0NF5BMl5BanBnXkFtZTcwNTY4MTYzMQ@@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Shoot the Pianist (1960)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film nv french"><a href="http://www.imdb.com/title/tt0056917/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjA5NjczMzA0NV5BMl5BanBnXkFtZTcwMjE5Nzg5Mg@@._V1_UY209_CR2,0,140,209_AL_.jpg"></a><div class="caption">Greed in the Sun (1964)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film french"><a href="http://www.imdb.com/title/tt0059592/?ref_=wl_li_i"><img alt="film&quot;" src="http://ia.media-imdb.com/images/M/MV5BMTQ0OTc4MDcxMl5BMl5BanBnXkFtZTgwNjIzMjA0NzE@._V1_UY209_CR7,0,140,209_AL_.jpg"></a><div class="caption">Pierrot le Fou (1965)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film noir desi"><a href="https://en.wikipedia.org/wiki/Andha_Naal"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMDEyMGM5ODgtMzRkYy00NDBjLWE5NzEtNmM1ZDdhNzU0NTcyXkEyXkFqcGdeQXVyMzg4Mjc1NDQ@._V1_UY268_CR8,0,182,268_AL_.jpg"></a><div class="caption">Andha Naal (1954) first film noir in Tamil, no songs/dance/stunts</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film nv french"><a href="http://www.imdb.com/title/tt0062480/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTcyNDQ2MzY0MF5BMl5BanBnXkFtZTcwMTYxNDM0OA@@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Weekend (1967) | Godard</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film arthouse french"><a href="http://www.imdb.com/title/tt0108394/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BZDc4NzY5NjAtY2FmNy00NzRmLTk0MzMtMTkyMjEwYjY2MzQ5XkEyXkFqcGdeQXVyMTAwMzUyOTc@._V1_UY209_CR0,0,140,209%20_AL_.jpg"></a><div class="caption">Three Colors: Blue (1993)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film arthouse french"><a href="http://www.imdb.com/title/tt0111495/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BM2VkNTVhOWItNmVhYi00ZmJjLWIxNDYtOTk3OTZkZTVkNWFiXkEyXkFqcGdeQXVyMTAwMzUyOTc@._V1_UY209_CR1,0,140,209%20_AL_.jpg"></a><div class="caption">Three Colors: Red (1994)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film arthouse french"><a href="http://www.imdb.com/title/tt0111507/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNTliYTI1YTctMTE0Mi00NDM0LThjZDgtYmY3NGNiODBjZjAwXkEyXkFqcGdeQXVyMTAwMzUyOTc@._V1_UX140_CR0,0,140,209%20_AL_.jpg"></a><div class="caption">Three Colors: White (1994)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film noir french"><a href="http://www.imdb.com/title/tt0062728/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTk4ODExMDYwOF5BMl5BanBnXkFtZTcwNjgzNDcxMQ@@._V1_UY209_CR7,0,140,209_AL_.jpg"></a><div class="caption">Les Biches (1968)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film noir french"><a href="http://www.imdb.com/title/tt0052708/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTc3MTk3NjI4Ml5BMl5BanBnXkFtZTcwNzM2MDEyMQ@@._V1_UX140_CR0,0,140,209_AL_.jpg"></a><div class="caption">Les Cousins (1959)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film arthouse french"><a href="http://www.imdb.com/title/tt0053473/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTgyNzQ1MTYzMV5BMl5BanBnXkFtZTcwMzE1NDYzMQ@@._V1_UY209_CR3,0,140,209_AL_.jpg"></a><div class="caption">Leda (1959) Director: Claude Chabrol</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film noir"><a href="http://www.imdb.com/title/tt0073221/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTMxMTgyOTQxMl5BMl5BanBnXkFtZTcwNTM3OTk3MQ@@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Just Before Nightfall (1971)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film noir french"><a href="http://www.imdb.com/title/tt0054632/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BOTIzODQ3NzgwNV5BMl5BanBnXkFtZTcwNTAwMjE0Mg@@._V1._CR80,86,458,699_UX140_CR0,0,140,209_AL_.jpg"></a><div class="caption">Last Year at Marienbad (1961)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0083248/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTU0OTQyODQzN15BMl5BanBnXkFtZTcwNTg3ODQyMQ@@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Umrao Jaan (1981)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0085913/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BYzcxNDM3ODAtOWI3ZS00YTViLTllZDgtYzczN2E3N2Q0ODU5XkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY209_CR2,0,140,209_AL_.jpg"></a><div class="caption">Masoom (1983)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0091256/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BZDlhNTc2N2QtZGM2OS00YmY2LWI2NWMtYTU0MDg5MTY2NmVmXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UY209_CR3,0,140,209_AL_.jpg"></a><div class="caption">Permission (1987)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0142431/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">Khamoshi (1970)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0080343/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">Albert Pinto Ko Gussa Kyon Ata Hai (1980)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0246456/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNjEwOTIyMDI0OV5BMl5BanBnXkFtZTgwMTk3ODM3NDE@._V1_UY209_CR8,0,140,209_AL_.jpg"></a><div class="caption">Bazaar (1982)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0241753/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">The Morning Breeze (1995)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0087736/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">Mohan Joshi Hazir Ho! (1984)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0150683/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB271193464_.png"></a><div class="caption">Gaman (1978)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt2140039/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjI0NzU5NjM2OF5BMl5BanBnXkFtZTcwMDY5MTk1OA@@._V1_UX140_CR0,0,140,209_AL_.jpg"></a><div class="caption">Josh (2013)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi arthouse"><a href="http://www.imdb.com/title/tt0107199/mediaviewer/rm1365744896?ref_=tt_ov_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTU5MTM2Njc5N15BMl5BanBnXkFtZTcwMzUzNjgyMQ@@._V1_UY268_CR3,0,182,268_AL_.jpg"></a><div class="caption">Riyaasat Mein (1994)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british"><a href="http://www.imdb.com/title/tt0310455/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BOTEyYWRhYTQtMGMxOC00YzY1LWFkOGItMWJlMDI4MjQ2ZGUwXkEyXkFqcGdeQXVyMjExMjk0ODk@._V1_UY209_CR5,0,140,209_AL_.jpg"></a><div class="caption">Foyle's War (2002- 2015)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british"><a href="http://www.imdb.com/title/tt0094525/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNjIxZDMwY2QtYjZmNy00ZWQwLWJhYjAtNDIxNzJkYjEzYjk0XkEyXkFqcGdeQXVyMjExMjk0ODk@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Agatha Christie: Poirot (Many episodes remain to be seen)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british"><a href="http://www.imdb.com/title/tt0092379/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjRkNWFjNWEtNzhhNS00OTgzLWJhMmUtZWFiMTQxMmFlMDYzXkEyXkFqcGdeQXVyMjExMjk0ODk@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Inspector Morse (Many episodes remain to be seen)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british"><a href="http://www.imdb.com/title/tt0092379/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNWU5ZTMyZDAtMDc1Yy00OTNiLWI4OWQtYzMzYWE0ZmEzMmNjXkEyXkFqcGdeQXVyMjExMjk0ODk@._V1_UY209_CR3,0,140,209_AL_.jpg"></a><div class="caption">Inspector Lewis (2006 TV Series)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british"><a href="http://www.imdb.com/title/tt1988386/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTU2Njk1NTYxNV5BMl5BanBnXkFtZTgwMTc3NzAxMzE@._V1_UY209_CR69,0,140,209_AL_.jpg"></a><div class="caption">Miss Fisher's Murder Mysteries (2012 TV Series)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV"><a href="http://www.imdb.com/title/tt3574152/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTU5NDA5MTkzMV5BMl5BanBnXkFtZTgwNDM4MDc0NjE@._V1_UY209_CR3,0,140,209_AL_.jpg"></a><div class="caption">Partners in Crime(1992)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV british"><a href="http://www.imdb.com/title/tt5012394/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BYmExY2I1NzEtZThkMi00N2RjLWIwOTktZDFlZmY5NThlMzAwXkEyXkFqcGdeQXVyMjExMjk0ODk@._V1_UX140_CR0,0,140,209%20_AL_.jpg"></a><div class="caption">Maigret Sets a Trap (2016 TV Movie)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV japan"><a href="http://www.imdb.com/title/tt0066603/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTcxNTU5NzM0OF5BMl5BanBnXkFtZTgwMDEyODIyMTE@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Zatoichi Meets Yojimbo (1970)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV japan"><a href="http://www.imdb.com/title/tt0066602/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTcwMjY3NjIzOV5BMl5BanBnXkFtZTgwOTkxODIyMTE@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Zatoichi Meets the One-Armed Swordsman (1971)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV japan"><a href="http://www.imdb.com/title/tt0201922/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BNjc0MDgzOTE4Nl5BMl5BanBnXkFtZTgwNTAyODIyMTE@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Zatoichi in Desperation (1972)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV japan"><a href="http://www.imdb.com/title/tt0164983/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTU5MTcyOTEwN15BMl5BanBnXkFtZTgwNzEyODIyMTE@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Samaritan Zatoichi (1968)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film filmTV japan"><a href="http://www.imdb.com/title/tt0186725/?ref_=wl_li_i"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTk5NzY3MzUzOF5BMl5BanBnXkFtZTgwNTEyODIyMTE@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Zatoichi's Cane-sword (1967)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt0382383/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTcxMDU0MTgwN15BMl5BanBnXkFtZTgwMTEzMDI4MzE@._V1_UY209_CR1,0,140,209_AL_.jpg"></a><div class="caption">2005 Filmfare_Critics_Award_for_Best_Film- Yuva - Mani Ratnam</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt0364303/?ref_=fn_al_tt_1"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTQ1Nzg1OTgxNl5BMl5BanBnXkFtZTcwOTI3ODgzMQ@@._V1_UY209_CR4,0,140,209_AL_.jpg"></a><div class="caption">Dev (2004)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt2301155/?ref_=nv_sr_1"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BZGM0ZTI0MTEtMGUwNS00NGIyLWEzZjYtNDQ4OWQwZDMwZDQ4XkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Shootout at Wadala (2013) The first-ever registered encounter by the Mumbai Police, which took place on November 1, 1982. Based on a true story.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt1954470/?ref_=fn_al_tt_1"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTc5NjY4MjUwNF5BMl5BanBnXkFtZTgwODM3NzM5MzE@._V1_UY209_CR0,0,140,209_AL_.jpg"></a><div class="caption">2013 Filmfare_Critics_Award_for_Best_Film - Gangs of Wasseypur - Anurag Kashyap</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt1395054/?ref_=fn_al_tt_1"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTAwMTg1NzY3NDReQTJeQWpwZ15BbWU3MDQ2NzQxNzM@._V1_UX182_CR0,0,182,268_AL_.jpg"></a><div class="caption">Once Upon a Time in Mumbai (2010) A smuggler rises to power in in 1970s Mumbai, a younger gangster seeks to overthrow him, and a police officer is caught in the middle.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt1891884/?ref_=fn_al_tt_2"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMTc2NzMyNDAyNl5BMl5BanBnXkFtZTcwNjg5OTc5OQ@@._V1_UY268_CR1,0,182,268_AL_.jpg"></a><div class="caption">Once Upon a Time in Mumbai Dobaara! (2013)</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt1833673/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjI3NjY4OTU3Ml5BMl5BanBnXkFtZTgwODI5MzM1MDE@._V1_UX140_CR0,0,140,209_AL_.jpg"></a><div class="caption">Dhoom 3- 2013</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt2112124/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMjE2OTEyOTA3OV5BMl5BanBnXkFtZTcwNjI4MDk3OQ@@._V1_UY209_CR2,0,140,209_AL_.jpg"></a><div class="caption">Chennai Express - 2013 about a man's journey from Mumbai to Rameswaram, and what happens along the way after he falls in love with the daughter of a local don.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt3735246/?ref_=wl_li_tt"><img alt="film" src="http://ia.media-imdb.com/images/M/MV5BMWI3YTA1MDktYWNjOS00MTE5LTkzMTQtOWNiODY2MjIzYTQwXkEyXkFqcGdeQXVyMTExNDQ2MTI@._V1_UY209_CR2,0,140,209%20_AL_.jpg"></a><div class="caption">Bajirao Mastani 2015 Indian epic historical romance film directed by Sanjay Leela Bhansali</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi comedy"><a href="http://www.imdb.com/title/tt0101279/?ref_=ttpl_pl_tt"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BYzliMzVhZWMtZTFkNy00YmNlLWJkMGYtZWEyZmM2ZTVhMWQwXkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_UY268_CR4,0,182,268_AL_.jpg"></a><div class="caption">Agantuk (1991) The Stranger(Saty. Ray, Utpal Dutt) Comedy</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt0065417/?ref_=tt_rec_tti"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BMTQ2ODM0MjgwOV5BMl5BanBnXkFtZTgwMzU1NTE2MTE@._V1_UY268_CR1,0,182,268_AL_.jpg"></a><div class="caption">Aranyer Din Ratri - Days/Nights in the Forest (1970) S. Ray | Calcutta city slickers head out into wilderness</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="https://en.wikipedia.org/wiki/Xagoroloi_Bohudoor"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNjY4N2M4NmEtMGVjNC00ZDUxLWFlODYtYjJmMDdmMTc2YjIwXkEyXkFqcGdeQXVyNzg5OTk2OA@@._V1_UY268_CR2,0,182,268_AL_.jpg"></a><div class="caption">Xagoroloi Bohudoor (Sea v. far) 1995 award winning Assamese boatman loses biz when govt builds bridge</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="https://en.wikipedia.org/wiki/Shyamchi_Aai_(film)"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/2/20/Shyamchi_Aai.gif"></a><div class="caption">(1953) Marathi</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="http://www.imdb.com/title/tt0116749/?ref_=fn_al_tt_1"><img alt="film" src="https://images-na.ssl-images-amazon.com/images/M/MV5BNzY0ZmMwYTAtZmE4My00NjJjLTg0MmItMWI3ODdhMjM4YjQ0XkEyXkFqcGdeQXVyMjkxNzQ1NDI@._V1_UY268_CR4,0,182,268_AL_.jpg"></a><div class="caption">Kathapurushan (1996) awd-winning film abt char initially a Gandhian eventually a Marxist</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="https://en.wikipedia.org/wiki/Lal_Darja"><img alt="film" src="https://en.wikipedia.org/wiki/File:Lal_Darja.jpg"></a><div class="caption">(The Red Door) 1997 Bengali Kolkotta dentist reflects on his life vs his drivers, lal door's from his childhood a ala Orwell.</div></div><div dojoType='com.trivedi.oPls.mPane' tags="film desi"><a href="https://en.wikipedia.org/wiki/Vanaprastham"><img alt="film" src="https://upload.wikimedia.org/wikipedia/en/2/26/Vanaprastham.jpg"></a><div class="caption">1999 Malayalee award-winning film re: Kathak dancer plays Arjun upp-class audience girl falls for him & they have child but he finds she loved the stage Arjun not the real person.</div></div><!--rec/Planning content--><div id="planning"><div dojoType='com.trivedi.oPls.mPane' tags="planning"><a href="http://www.levenger.com/Bomber-Jacket-Tyler-Folio-6134.aspx"><img alt="Folio" src="http://www.levimage.com/image/web/product/personal_accessor/folio_padholders/al7455.jpg" width=150px></a><div class="caption">Bomber Jacket Tyler Folio</div></div><div dojoType='com.trivedi.oPls.mPane' tags="planning"><a href="http://www.levenger.com/Note-Cards-16/Custom-Note-Cards-915/3-x-5-Cards-%20937/250-Personalized-3-%20x-5-%20Cards---Vertical-13683.aspx"><img alt="Jotting Index cards" src="http://www.levenger.com/Catalog/CardImages/ZOOMS/ADS80_A1.JPG" width=150px></a><div class="caption">Custom Index NoteCards</div></div><div dojoType='com.trivedi.oPls.mPane' tags="planning"><a href="http://www.crane.com/product/lincoln-vintage-metalsmith-tornado-rollerball-pen/VRR1331"><img alt="pen" src="http://www.crane.com/crnImages/VRR1331/zoom-v1-VRR1331.jpg" width=150px></a><div class="caption">Lincoln Vintage Metalsmith Tornado Rollerball Pen</div></div><div dojoType='com.trivedi.oPls.mPane' tags="planning"><a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/AURORA-39/Aurora-Gemstone-Rollerball-13675.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap16255_aurora-gemstone-rollerball_csw_aqm.jpg" width=150px></a><div class="caption">Aurora Gemstone Rollerball Pen</div></div><div dojoType='com.trivedi.oPls.mPane' tags="planning"><a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/WATERFORD-1068/Waterford-Pallas-%20Rollerball-13643.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap16295_waterford-pallas-rollerball_csw.jpg" width=150px></a><div class="caption">Waterford Pallas Rollerball Pen</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/PARKER-1070/Parker-Sonnet-Contort-Purple-Cisele-Rollerball-13551.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap14065_parker-sonnet-contort-purple-cisele-rollerball_csw.jpg" width=150px></a><div class="caption">Parker Sonnet Cisele Rollerball Pen</div></div><div dojoType='com.trivedi.oPls.mPane' tags="planning"><a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/FABER-CASTELL-41/Faber-Castell-e-Motion-Pure-Black-Rollerball-13487.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap16125_faber-castell-e-motion-pure-black-rollerball_csw.jpg" width=150px></a><div class="caption">Faber-Castell e-Motion Pure Black Rollerball Pen</div></div><div dojoType='com.trivedi.oPls.mPane' tags="planning"><a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/ACME-1066/ACME-Rhapsody-Rollerball-13457.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap12755_acme-rhapsody-rollerball_csw.jpg" width=150px></a><div class="caption">ACME Rhapsody Rollerball Pen</div></div><div dojoType='com.trivedi.oPls.mPane' tags="planning"><a href="http://www.levenger.com/Pair-Of-Levenger-Single-Sheet-Cutters-421.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/desk_accessories/clips_cutters_tools/ad260_csw_rd.jpg" width=150px></a><div class="caption">Single-Sheet Cutters</div></div></div><!--rec/Planning content--><!--rec/furniture content--><div id="furniture"><b>(site below has WishList saved under email id)</b><br>http://www.furniturelandsouth.com/<br>http://www.hickoryfurniture.com/Furniture-Jonathan-Charles-Tables/ItemBrowser.aspx?action=attributes&ItemType=Furniture&Brand=Jonathan%20Charles&Type=Tables&TrailIndex=1<br>http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/513/images/217%20jessicamcclintock%20cover.pdf<!--A SECTION with cols for thumbnails-->																		<div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Reflections-Furniture-%20Outlet-Leather-Barrel-Chair/02Chair-P67/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/p67/image384/02chair.jpg" width=150px></a><div class="caption">Leather- Barrel-Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Miles-Talbott-Chair/THO-LX-9521-TC-1227/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/1227/image1024/3074-1-lg-tho-lx-9521-tc.jpg" width=150px></a><div class="caption">Miles Talbott Living Room Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Whittemore-Sherrill-Leather-Gallery-by-Reflections-%20Classics-Tufted-%20Leather-Chair-by/1610-01-P67/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/p67/image1024/1610-01.jpg" width=150px></a><div class="caption">Tufted Leather Chair by Reflections</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Lexington-Cardiff-Chair/7531-11-8/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/8/image384/7531-11.jpg" width=150px></a><div class="caption">Lexington Living Room Cardiff Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Thomasville-Vienna-Chair/HS331%20013-%20976/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/976/image384/hs331013002_91206s.jpg" width=150px></a><div class="caption">Thomasville Vienna Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Hancock-and-Moore-%20Lincoln-Tufted-Chair/1777-%20965/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/965/image384/1777_lincoln_oc_hr.jpg" width=150px></a><div class="caption">Lincoln- Tufted-Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Hancock-and-%20Moore-%20Kenneth-Chair/5060-%20965/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/965/image384/5060_kenneth_st_hr.jpg" width=150px></a><div class="caption">Kenneth Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Hancock-and-Moore-George-%20III-Wing-Chair/9752-%20965/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/965/image384/9752_george_wc_hr.jpg" width=150px></a><div class="caption">George III Wing Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Hancock-and-Moore-George-%20III-Tufted-Wing-Chair/9751-%20965/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/965/image384/9751_george_wc_hr.jpg" width=150px></a><div class="caption">George III Tufted Wing Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Marge-Carson-Chandler-Chair/CHD41A-%201155/ItemInformation.aspx"><img alt="chair" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/1155/image384/chd41a-p1.jpg" width=150px></a><div class="caption">Chandler Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/michael-amini-knightsbridge-charterhse-leather-chair-fs-knght35-gll-43"><img alt="chair" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/AICO11107.jpg" width=150px></a><div class="caption">Michael Amini Knightsbridge Charterhse Leather Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/michael-%20amini-chair-and-a-half-54838-chpgn-04"><img alt="chair" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/AICO10401.jpg" width=150px></a><div class="caption">Michael Amini Chair and a Half</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/francesco-molon-leather-wing-chair-p82"><img alt="chair" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/FRANC10486.jpg" width=150px></a><div class="caption">Francesco Molon Leather Wing Chair</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Habersham-Plantation-Corporation-Small-Marcelle-Chest/17-2601-%20605/ItemInformation.aspx"><img alt="chest" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/605/image384/500_17-%202601.jpg" width=150px></a><div class="caption">Small Marcelle Chest</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Jonathan-Charles-Tall-Floral-Painted-Chest-On-Sta/493513-993/ItemInformation.aspx"><img alt="chest" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/993/image384/493513.jpg" width=150px></a><div class="caption">Floral painted chest</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Chaddock-Petite-Camille-Small-Chest/MM1489-06-1375/ItemInformation.aspx"><img alt="sm chest" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/1375/image1024/mm1489-06.jpg" width=150px></a><div class="caption">Chaddock- Petite-Camille-Small-Chest</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Hooker-Furniture-Chatelet-Floor-Mirror-wJewelry-/5351-50003-5/ItemInformation.aspx"><img alt="mirror" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/5/image384/5351-50003silo.jpg" width=150px></a><div class="caption">Chatelet Floor Mirror</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Hooker-Furniture-Rhapsody-Floor-Mirror-wJewelry-/5073-50001-5/ItemInformation.aspx"><img alt="mirror" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/5/image384/5073-50001.jpg" width=150px></a><div class="caption">Furniture Rhapsody Floor</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Jonathan-Charles-Black-Gold-Drinks-Cabinet/492356-993/ItemInformation.aspx"><img alt="Cabinet" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/993/image384/492356.jpg" width=150px></a><div class="caption">Black Gold Drinks Cabinet</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Jonathan-Charles-Black-Chinoiserie-Drinks-Cabinet/492705-993/ItemInformation.aspx"><img alt="Cabinet" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/993/image384/492705.jpg" width=150px></a><div class="caption">Black Chinoiserie Drinks Cabinet</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Chaddock-Prince-Bar-TV-Cabinet/1285-49-1375/ItemInformation.aspx"><img alt="bar/cabinet" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/1375/image1024/1285-49.jpg" width=150px></a><div class="caption">Chaddock- Prince-Bar-TV-Cabinet</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/guildmaster-provence-drink-cabinet-718532"><img alt="bar/cabinet" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/GUILD10877.jpg" width=150px></a><div class="caption">Guildmaster Provence Drink Cabinet</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Jonathan-Charles-Mahogany-Drum-Table-Green/492611-993/ItemInformation.aspx"><img alt="Table" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/993/image384/492611.jpg" width=150px></a><div class="caption">Mahogany Drum Table</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Jonathan-Charles-Walnut-Eglomise-Side-Table/492071-993/ItemInformation.aspx"><img alt="sm table" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/993/image384/492071.jpg" width=150px></a><div class="caption">Walnut Eglomise Side Table</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Jonathan-Charles-Rope-Twist-Round-Side-Table/492512-993/ItemInformation.aspx"><img alt="side table" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/993/image384/492512.jpg" width=150px></a><div class="caption">Rope Twist Round side table</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Jonathan-Charles-Lapis-Blue-Eglomise-With-Mahogan/492454-993/ItemInformation.aspx"><img alt="eglomise" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/993/image384/492454.jpg" width=150px></a><div class="caption">Lapis Blue Eglomise With Mahogan</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.hickoryfurniture.com/Furniture-Jonathan-Charles-Tables/ItemBrowser.aspx?action=attributes&ItemType=Furniture&Brand=Jonathan%20Charles&Type=Tables&TrailIndex=1"><img alt="tables" src="http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/993/image200/492145.jpg" width=150px></a><div class="caption">Jonathan Charles Tables</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/artitalia-group-armoire-dc367"><img alt="armoire" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/ARTIT10099.jpg" width=150px></a><div class="caption">Artitalia Group Armoire</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/francesco-molon-armoire-with-two-doors-i6l"><img alt="armoire" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/FRANC10250.jpg" width=150px></a><div class="caption">Francesco Molon 2 dr armoire</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/artitalia-group-credenza-cot-176-bp"><img alt="credenza" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/ARTIT10075.jpg" width=150px></a><div class="caption">Artitalia Group Credenza</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/artitalia-group-credenza-in-oak-cot-160"><img alt="credenza" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/ARTIT10061.jpg" width=150px></a><div class="caption"></div>Artitalia Group Credenza in Oak</div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/hooker-furniture-true-vintage-king-upholstered-%20poster-bed-5701-90666c"><img alt="bed" src="https://s3.amazonaws.com/flswordpressmedia/media/product-%20catalog/base/HOOKE13342.jpg" width=150px></a><div class="caption">Hooker furniture vintage king poster bed</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/guildmaster-heritage-caned-bench-652502"><img alt="bench" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/GUILD10540.jpg" width=150px></a><div class="caption">Guildmaster Heritage Caned Bench</div><br>Note: This design can also be used for a bench swing (custom)</div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/karges-%20furniture-georgian-chest-0703"><img alt="chest" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/KARGS10164.jpg" width=150px></a><div class="caption">Karges Furniture Georgian Chest</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/four-%20hands-large-desk-vlls-01-11-fh"><img alt="desk" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/FOURH11268.jpg" width=150px></a><div class="caption">Four Hands Large desk</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/hooker-%20furniture-kendrick-junior-executive-desk-1060-10562"><img alt="desk" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/HOOKE12450.jpg" width=150px></a><div class="caption">Hooker Furniture Kendrick jr exec desk</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/hooker-%20furniture-la-maison-writing-desk-5437-10458"><img alt="desk" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/HOOKE13256.jpg" width=150px></a><div class="caption">Hooker Furniture la maison Writing desk</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/hooker-%20furniture-sanctuary-60-writing-desk-dune-beach-3002-10458"><img alt="desk" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/HOOKE11028.jpg" width=150px></a><div class="caption">Hooker Furniture Sanctuary 60" Writing Desk</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/lorts-%20three-drawer-writing-desk-1223"><img alt="desk" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/LORTS10106.jpg" width=150px></a><div class="caption">Lorts Three Drawer Writing Desk</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href="http://www.furniturelandsouth.com/shop-furniture/theodore-alexander-chippendales-signature-writing-desk-7105-213"><img alt="desk" src="https://s3.amazonaws.com/flswordpressmedia/media/product-catalog/base/THALX12206.jpg" width=150px></a><div class="caption">Theodore Alexander Chippendale's Signature Writing Desk</div></div><div dojoType='com.trivedi.oPls.mPane' tags="furniture"><a href=""><img alt="chest" src="" width=150px></a><div class="caption"></div></div></div>	<!--rec/furniture content--><!--contentDivsBegin--><div dojoType='com.trivedi.oPls.mPane' tags="film TV notes bookmark" title="Leftover notes/addenda from mBoxes"><p><pre><br>http://www.imdb.com/chart/top (checked upto #70)<br><br><br>http://www.imdb.com/title/tt0301357/?ref_=nv_sr_1<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMTI0MTg4NzI3M15BMl5BanBnXkFtZTcwOTE0MTUyMQ@@._V1_UY268_CR1,0,182,268_AL_.jpg<br>Good Bye Lenin! (2003)<br>(https://en.wikipedia.org/wiki/Ostalgie)  nostalgia for aspects of life in East Germany.<br>Woman goes into coma just before the wall fall; when she wakes up her kids keep up a facade that the Soviet era still reigns.<br><br><p>[[NEED TO READ REVIEWS OF THESE BEFORE INCL. THEM]]<p>crime , mystery<br>http://www.imdb.com/title/tt0051201/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMTc0MjgyNTUyNF5BMl5BanBnXkFtZTcwNDQzMDg0Nw@@._V1_UX182_CR0,0,182,268_AL_.jpg<br>(1957) | Agatha Christie | Marlene Dietrich | A veteran British barrister must defend his client in a murder trial that has surprise after surprise.<br><br><p>http://www.imdb.com/title/tt0364569/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMTI3NTQyMzU5M15BMl5BanBnXkFtZTcwMTM2MjgyMQ@@._V1_UX182_CR0,0,182,268_AL_.jpg<br>2003 s. Korean | After being kidnapped and imprisoned for fifteen years, Oh Dae-Su is released, only to find that he must find his captor in five days.<p><br><br>http://www.imdb.com/title/tt0405094/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BNDUzNjYwNDYyNl5BMl5BanBnXkFtZTcwNjU3ODQ0MQ@@._V1_UX182_CR0,0,182,268_AL_.jpg<br>The Lives of Others (2006) In 1984 East Berlin, an agent of the secret police, conducting surveillance on a writer and his lover, finds himself becoming increasingly absorbed by their lives.<br><br><br>http://www.imdb.com/title/tt0317248/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMjA4ODQ3ODkzNV5BMl5BanBnXkFtZTYwOTc4NDI3._V1_UX182_CR0,0,182,268_AL_.jpg<br>(2002)Two boys growing up in a violent neighborhood of Rio de Janeiro take different paths: one becomes a photographer, the other a drug dealer.<br><br><br>http://www.imdb.com/title/tt0114369/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMTQwNTU3MTE4NF5BMl5BanBnXkFtZTcwOTgxNDM2Mg@@._V1_UX182_CR0,0,182,268_AL_.jpg<br>Se7en (1995) Two detectives, a rookie and a veteran, hunt a serial killer who uses the seven deadly sins as his modus operandi.<br><br><p>crime , mystery<br>http://www.imdb.com/title/tt0114814/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMzI1MjI5MDQyOV5BMl5BanBnXkFtZTcwNzE4Mjg3NA@@._V1_UX182_CR0,0,182,268_AL_.jpg<br>A sole survivor tells of the twisty events leading up to a horrific gun battle on a boat, which begin when five criminals meet at a seemingly random police lineup.<p>Sci -Fi<br>http://www.imdb.com/title/tt0816692/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMjIxNTU4MzY4MF5BMl5BanBnXkFtZTgwMzM4ODI3MjE@._V1_UX182_CR0,0,182,268_AL_.jpg<br>Interstellar (2014) |Matthew McConaughey, Anne Hathaway, Jessica Chastain  |A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival.<p>pOSS ALREADY IN DB.:<br>http://www.imdb.com/title/tt0407887/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMTI1MTY2OTIxNV5BMl5BanBnXkFtZTYwNjQ4NjY3._V1_UX182_CR0,0,182,268_AL_.jpg<br>An undercover cop and a mole in the police attempt to identify each other while infiltrating an Irish gang in South Boston.<br>Scorsese  DiCaprio, Matt Damon, Jack Nicholson<p>http://www.imdb.com/title/tt2582802/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMTU4OTQ3MDUyMV5BMl5BanBnXkFtZTgwOTA2MjU0MjE@._V1_SX214_AL_.jpg<br>2014 (Philippines) A promising young drummer enrolls at a cut-throat music conservatory where his dreams of greatness are mentored by an instructor who will stop at nothing to realize a student's potential.<p>http://www.imdb.com/title/tt0043014/<br>https://images-na.ssl-images-amazon.com/images/M/MV5BMTc3NDYzODAwNV5BMl5BanBnXkFtZTgwODg1MTczMTE@._V1_UX182_CR0,0,182,268_AL_.jpg<br>(1950) A hack screenwriter writes a screenplay for a former silent-film star who has faded into Hollywood obscurity. dIR: Billy Wilder<br></pre><p>&nbsp;&nbsp;&nbsp;&nbsp;</div><p><div data-dojo-id="noteLinksTitlePane1" data-dojo-type="dijit/TitlePane" data-dojo-props='title:"Git Links", open:true, toggleable:true'><p>
<table class="separate"><br><tbody><br>&nbsp;&nbsp;&nbsp;&nbsp;<tr><br><td><br>20161206mpt <a href='https://gist.github.com/anonymous/2ac07736257d401dbb37239e460dad7e'>bookmarks</a> update 2pm<br><br><p><a href="https://gist.github.com/anonymous/a164fec7c2b370547a6e9068dbc80c8c">Shell w/treeGrid & Layout</a><br><br><p><a id='gistObservable' href='https://gist.github.com/anonymous/f007c8fc0548894943971b0c4babc081'>dojo.Observable</a><br><div data-dojo-type="dijit/Tooltip" data-dojo-props="connectId:'gistObservable'"><br>20161206mpt test tree Shell 8pm (Using dojo.tree to represent store data; with put/etc.,<br>dynamically updating dojo.tree widget using <b>dojo.Observable (ObjectStoreModel)</b><br></div>
<p><br><br>20161204mpt <a href='https://gist.github.com/anonymous/2e2f2b31b04230056cdc89f78fa0eec5'>dojox.grid.TreeGrid</a> Model-based test<br><br><br>Shell w/code for Iterating thro an <a href='https://gist.github.com/anonymous/b8f9e620a6c96f4f225c606b6a1d72f9'>Object Store</a><br><br><p><br><a href="https://gist.github.com/anonymous/9265645982316dc209494ec5dff1dec1">Le Monde Editorial (w comments)</a><br><br><p><a href="https://gist.github.com/anonymous/d00e42b65b16dfb09de37f7bbd1a4c33">20161110mpt shell w/dataStore stuff</a><br><br><p><a href="https://gist.github.com/anonymous/0ce6f4ec2eb3de8837f97c513fca7343">20161109mpt error chk fn</a><br><br><br></td><br><td><p>20161010mpt validation <a href="https://gist.github.com/anonymous/7d65350185eaae3768b45a77c8b2705d/raw/40da9ee1100a368383b53edeb49cefb8e604d4a5/index.html">testing shell</a><p><br><br><a id='gistdomConstr' href="https://gist.githubusercontent.com/anonymous/028e4239c62049688a6afba4a39b62b7/raw/b3917166460bd27e79ced18065690835f8fd0669/index.html">Tab Builder</a><br><div data-dojo-type="dijit/Tooltip" data-dojo-props="connectId:'gistdomConstr'"><br>20161007mpt 2pm dojo testing shell w/layout & *working* <b>UI domConstruct</b> for tags<br></div><p><br><br><a id='gistGist' href="https://gist.github.com/anonymous/b9eb3ad625d78f8c27b7760f5349d23b">WORKING GIST</a><br><div data-dojo-type="dijit/Tooltip" data-dojo-props="connectId:'gistGist'"><br>20160924mpt final update <b>WORKING GIST</b> need to fix timestamp (instd of 9 we're getting 8), fixed elsewhere<br></div><p><br /><br>Dojo <a href="https://gist.github.com/anonymous/5a215ed8d94b7a3d56fd3c76ea8c0bce/raw/d9c34948005f26b8b563bfa12a325c700d396ba2/PageBuilder.html">PageBuilder.html SHELL</a> for URLRdr 9/12<br><br />//--URLRdr_v<a href="https://gist.githubusercontent.com/anonymous/21faef9db34e3e4373fd64e1cf7872ba/raw/d2849f643b1c028116a4fd9604d3c0195fee64ca/URLRdr.java">1.092</a>--upd 9/12/2016--------------------  -&gt;<br><br /><p><br></td><br>&nbsp;&nbsp;&nbsp;&nbsp;</tr><p></tbody><br></table>
<p></div><p><hr /><p><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr /><br>&nbsp;&nbsp;&nbsp;&nbsp;Not as <a href="http://www.gutenberg.org/files/52770/52770-h/52770-h.htm">Spaniards</a>, but as traitors, thieves, and murderers...a NewYorker visits St.Augustine, FL<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.gutenberg.org/files/52790/52790-h/52790-h.htm">Travels</a> through Switz... pursuing, like the swallow, the inconstant summer of delight and beauty which invests this visible world (the Shelleys)<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;Last stable bootcrap <a href="https://htmlpreview.github.io/?https://gist.githubusercontent.com/anonymous/966f78786fc3109ddfe3303b91dee507/raw/5f2445e3ea382f7962a6dfbc29517049f203d2c3/launcher.html">Launcher</a> (8/15/16 or thereabouts)<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><p><p>&nbsp;&nbsp;&nbsp;&nbsp;<hr /><br>&nbsp;&nbsp;&nbsp;&nbsp;<b>(for later?)</b><br /><br>&nbsp;&nbsp;&nbsp;&nbsp;(srch results for idler) http://tinyurl.com/jy5vb79<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;* insert col-sm &amp; col-md tags<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;* preview/test in handheld brosers online<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;lookup public todo app w/export data fmt outlk<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;Left to add:<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;Blogs: Man~ AND -anglophile =epicurean -single malt avail =alfresco sm frndly opts<br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;Fan pgs for: -Wharton -rafa/tgr -astaire -chilpprs -jB/crnrShp - sufi/bulleh/rumi -suchet -fry/laurie<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;wadala/gangsterCulture -mann/spa<br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;TI trading rms -eco -re/au<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;-Green rm, bw/off -FOB/AB blogroll -Lit/Iowa Wrkshp -LP availabil in BOM -AmazonLists -rsch chp compl Vinyl setup<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;How to find tlr, pique/tech/den<p><p><br><br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>&nbsp;&nbsp;&nbsp;&nbsp;
</div><!-- NotesDiv --><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--main Notes content--><p>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/Sartorial content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="sartorial" dojoType="com.trivedi.oPls.mPane" tags="sartorial personal gear bookmark" title="sartorial"><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://en.wikipedia.org/wiki/Frette#Select_hotels">Frette</a> is supposedly a good choice for linens and <a href="https://www.amazon.com/Frette-Solid-Shawl-Collar-Bathrobe/">robes</a>.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;- Tom Ford has belts with a "T" for a buckle Men's<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href='http://www.mohancustomtailors.com/'>Mohan</a>'s custom tailoring<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.gentlemansgazette.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://putthison.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://dappered.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://offthecuffdc.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Seward Trunk Co. Embossed Steel 31" Oversize wheeled locker<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.distributorcentral.com/websites/MercuryLuggage/item_information.cfm? SupplierItemGUID=71851D65 -5A6C-43FD-834E- C62D9FB6B482&<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Rhino Trunk & Case<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.rhinotrunkandcase.com/products-capabilities/rhino-travel-wardrobe-trunks/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://amishhandcrafted.com/content/maple-steamer-trunk<br>&nbsp;&nbsp;&nbsp;&nbsp;<p></p><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Men 's Nike Free RN Distance<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Men 's SAUCONY KINVARA 7<br>&nbsp;&nbsp;&nbsp;&nbsp;<p></p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/Sartorial content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/film content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;
<div dojoType="com.trivedi.oPls.mPane" title="film Liner Notes" tags="film notes" id="filmLinerNotes" class="mHidden"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div><br><h2>"Beat" Takeshi liner notes:</h2><br><br><br><h4>* Brother FilmFour, 18, 109 mins, 2000; Pounds 19.99 (DVD) ***</h4><br><br><br>The first American co-production for the cult Japanese auteur "Beat" Takeshi Kitano. Brother, shot mostly in the States and delivered mainly in English, could be the biggest launchpad yet for a director and actor who remains almost unknown in Britain, despite being a megastar at home. This is a gangster film like no other, in which the violence never seems gratuitous or glamorised because of the dreamlike surrealism of the camerawork, and the wit and creativity of writing and performance. As a performer, Kitano manages to convey total menace with an acting style so minimal that by the end you almost forget that he's barely finished a sentence. Includes a 48-minute documentary on the film-maker, and cast and crew interviews.<br><br><br><hr><br><p>More wondrous sights are on display in Hana-Bi, the most thoughtful film yet from the Japanese cult director Takeshi Kitano. The title means Fireworks, though the hyphen pointedly splits up the title into the Japanese words for flower and fire. Flower and fire, beauty and violence: key ingredients in Kitano's world, where gangster bloodshed is regularly interrupted by lyrical interludes, often set by the sea (as in Sonatine). The current film refines his style to the nth degree; dialogue is so sparse that you might almost be watching a silent film, and the elliptical editing whisks us, at times disconcertingly, between different points in time.<br><br><br>Kitano 's characters have never been chatterboxes, but detective Nisi (Kitano himself, under his acting name Beat Takeshi) scales a new peak of silence. His wife is diagnosed with a terminal illness. His colleague Horibe is shot during a stakeout, and becomes confined to a wheelchair. Feelings hidden under dark glasses and tight lips, Nisi leaves the force and robs a bank to finance, among other things, a last trip with his wife and the supply of art materials to Horibe, who has taken up painting. But a blunt rehearsal of the plot can give no indication of the film's visual power.<br><br><br>This is Kitano's most personal work. He himself escaped death four years ago in a bike accident, and he is the painter of Horibe's artwork, bizarre amalgams of flowers and animals. The director's oblique manner needs an audience on the ball; but Kitano can make the most taciturn gaze speak volumes, and as the jigsaw builds there is never a doubt about the emotional force of this meditative tale of flowers and fire, of life and beauty in the face of death.<br><br><br><hr><br><br><br>To anyone unfamiliar with the Japanese director and media star Takeshi Kitano, his film Sonatine may be something of a mystery. One minute, bullets fly and bodies fall with sudden, icy brutality, as bands of gangsters fight for supremacy in Okinawa. The next, those persons still left alive lark around with guns, seaweed and a soft-drink can on a beautiful beach, under a piercing blue sky.<br><br><br>Whatever the mood, the leading character Murakawa, played by the director under his acting nickname ''Beat" Takeshi, adopts a frozen face that suggests a huge existential death wish. Is this a yakuza thriller, an art movie divertissement, or what?<br><br><br>Essentially, what Takeshi has done is to yoke together two separate styles pursued in the three previous films since this extraordinary character actor, stand-up comic and television personality took up directing in 1989. The idyll by the beach recalls the tender, poetic simplicity of the mesmerising A Scene at the Sea. The quirky brand of bloodshed harks back to Violent Cop and Boiling Point, films whose casual violence can churn even an experienced stomach.<br><br><br>The result is a bizarre and awkward hybrid; for Western tastes, sensitivity and violence make strange bedfellows. But Takeshi's strong visual eye and elliptical manner (he serves, importantly, as his own editor) always keep our eyes glued to the screen. Sonatine takes you by surprise sometimes pleasantly, sometimes not: a valuable asset in a world dominated by Identikit films.<br><hr><br><br><br><h4>(2005 London Film Festival)</h4><br><br>BLOOD AND BONES Beat Takeshi gives one of his most powerful performances in this portrait of a brutal businessman and his family.<br><br><br><hr><br><br><br>Meanwhile, non-animation Japanese directors are breathing new life into tired Hollywood genres. Violent Cop was shown in Britain on limited release last month to much excitement. Its handsome director and star, ''Beat" Takeshi, was seen by reviewers as ''the next international cult figure" and as ''Japan's answer to Clint Eastwood". The film is certainly as violent as its title suggests, but, unlike the recent Hollywood police movies, you are kept in suspense rather than in a state of deja vu.<p><hr><br>From 2011 The Daily Beast:<p>In 2009, Tadamasa Goto, the former Yamaguchi-gumi (Japans largest<br>crime group) gang boss, wrote extensively in his autobiography,<br>Habakarinagara, of his connections to Japans entertainment<br>industry, and justifies the attack his members made on a<br>famous Japanese film director, Juzo Itami, who dared to depict<br>the yakuza unfavorably in his dark comedy<br>The Gentle Art of Japanese Extortion.<p>Kitanos last film, Outrage is the most accurate portrayal<br>of the modern Yakuza ever. The film is a diatribe against<br>them, showing how the traditional yakuza that upheld some<br>primitive code of honor end up being betrayed or killed.<br>The ones that survive are those who are ruthless,<br>backstabbing businessmenGoldman Sachs with guns.<br>If you want to understand the modern yakuza, Outrage<br>is a fantastic introductory course...<br><hr><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br></div><br></section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/film content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/Planning content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="planning"><br>&nbsp;&nbsp;&nbsp;&nbsp;<section class="mBox-container"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="mBox planning"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.levenger.com/Bomber-Jacket-Tyler-Folio-6134.aspx"><img alt="Folio" src="http://www.levimage.com/image/web/product/personal_accessor/folio_padholders/al7455.jpg" width=150px></a><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="caption"><br>&nbsp;&nbsp;&nbsp;&nbsp;Bomber Jacket Tyler Folio<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="mBox planning"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.levenger.com/Note-Cards-16/Custom-Note-Cards-915/3-x-5-Cards-%20937/250-Personalized-3-%20x-5-%20Cards---Vertical-13683.aspx"><img alt="Jotting Index cards" src="http://www.levenger.com/Catalog/CardImages/ZOOMS/ADS80_A1.JPG" width=150px></a><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="caption"><br>&nbsp;&nbsp;&nbsp;&nbsp;Custom Index NoteCards<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="mBox planning"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.crane.com/product/lincoln-vintage-metalsmith-tornado-rollerball-pen/VRR1331"><img alt="pen" src="http://www.crane.com/crnImages/VRR1331/zoom-v1-VRR1331.jpg" width=150px></a><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="caption"><br>&nbsp;&nbsp;&nbsp;&nbsp;Lincoln Vintage Metalsmith Tornado Rollerball Pen<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="mBox planning"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/AURORA-39/Aurora-Gemstone-Rollerball-13675.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap16255_aurora-gemstone-rollerball_csw_aqm.jpg" width=150px></a><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="caption"><br>&nbsp;&nbsp;&nbsp;&nbsp;Aurora Gemstone Rollerball Pen<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="mBox planning"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/WATERFORD-1068/Waterford-Pallas-%20Rollerball-13643.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap16295_waterford-pallas-rollerball_csw.jpg" width=150px></a><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="caption"><br>&nbsp;&nbsp;&nbsp;&nbsp;Waterford Pallas Rollerball Pen<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;<div class="mBox"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/PARKER-1070/Parker-Sonnet-Contort-Purple-Cisele-Rollerball-13551.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap14065_parker-sonnet-contort-purple-cisele-rollerball_csw.jpg" width=150px></a><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="caption"><br>&nbsp;&nbsp;&nbsp;&nbsp;Parker Sonnet Cisele Rollerball Pen<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;<div class="mBox planning"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/FABER-CASTELL-41/Faber-Castell-e-Motion-Pure-Black-Rollerball-13487.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap16125_faber-castell-e-motion-pure-black-rollerball_csw.jpg" width=150px></a><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="caption"><br>&nbsp;&nbsp;&nbsp;&nbsp;Faber-Castell e-Motion Pure Black Rollerball Pen<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;<div class="mBox"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.levenger.com/PENS---REFILLS-8/SHOP-BY-BRAND-34/ACME-1066/ACME-Rhapsody-Rollerball-13457.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/pen_ink/pens/ap12755_acme-rhapsody-rollerball_csw.jpg" width=150px></a><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="caption"><br>&nbsp;&nbsp;&nbsp;&nbsp;ACME Rhapsody Rollerball Pen<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;<div class="mBox planning"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.levenger.com/Pair-Of-Levenger-Single-Sheet-Cutters-421.aspx"><img alt="pen" src="http://www.levimage.com/image/web/product/desk_accessories/clips_cutters_tools/ad260_csw_rd.jpg" width=150px></a><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="caption"><br>&nbsp;&nbsp;&nbsp;&nbsp;Single-Sheet Cutters<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/Planning content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/Audio content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="audio" dojoType="com.trivedi.oPls.mPane" tags="audio_Ht gear bookmarks" title="audio"><br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br /><i>Article</i>: Some words about <a href="#Khayyal">Khayaal</a><br /><a href="tinyurl.com\201609150500mpt"><br />some</a> Indian classical music on EP/LP<br /><br />LP+EP+Ghulam+Ali+ghazal+<a href="tinyurl.com\201609150505mpt">Akhtar</a><br />https://pediaview.com/openpedia/Indian_classical_music <br /><br />201608140319mpt Yahoo <a href="https://gist.github.com/anonymous/56f7867c06165e6904b32465367c364c/raw/d1c64c4c25af50cf3479d2fd84ab7881c57bc521/mike.html" target="_blank">Search result</a> for urdu+ghazal+ghulam+ali+ghalib <br />  <br /><br />http://www.avsforum.com/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.klipsch.com/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.polkaudio.com/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://definitivetechnology.com/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.martinlogan.com/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.cambridgeaudio.com/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.bang- olufsen.com/da/collection/speakers/beolab-20<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.jbl.com/loudspeakers/STUDIO +L890.html?dwvar_STUDIO%20L890_color=Black#start=1<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.paradigm.com/products- current/type=tower/model=prestige-95f/page=overview<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://kef.com/html/us/index.html<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.bowers- wilkins.com/Speakers/Home_Audio/600_Series/683.html<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.bostonacoustics.com/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;Sony Home Cinema Projector - VPL- HW40ES<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.amazon.com/Koss-PortaPro- Headphones-with-Case/dp/B00001P4ZH/ref=sr_1_1?s=electronics&amp;ie=UTF8&amp;qid=1464305449&amp;sr=1-1&amp;keywords=Koss+PortaPro+Headphones+with+Case<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.stereophile.com/search/node/tube%20amp%20vinyl%20entry-level%20setup%20type%3Aforum">Stereophile</a><br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.theabsolutesound.com/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.soundandvision.com/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.bestbuy.com/site/searchpage.jsp?st=AMD+Radeon%20+R9&amp;id=pcat17071">Radeon</a><br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.bestbuy.com/site/sennheiser-rs-175-over-the-ear-wireless-%20headphone-system-black/2822013.p?id=1219561396856&amp;skuId=2822013">Sennheiser over-the-ear wireless Headphones</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.tomshardware.com/s/pc+4k/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;ASUS Sound Card Essence STX II<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;Srch for &quot;Essence ASUS headphone movie 2016&quot; tinyurl.com/zrtpnn2<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.dansdata.com/spkvshead.htm<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;(forum) http://www.head-fi.org/<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.headphone.com/collections/top-10-headphones/audiophile<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;(srch results for headphones) http://tinyurl.com/mpt-headphones<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="Khayyal" class="article"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<h2 style="font-family: &quot;Times New Roman&quot;;">Some words about Khyal</h2><p style="font-family: &quot;Times New Roman&quot;; font-size: medium;">Perhaps the most popular of contemporary Hindustani vocal styles is the idiom known as &quot;khyal.&quot; The word literally means &quot;imagination,&quot; and the khyal form demands improvisational flexibility as well as careful attention to nuances of intonation, phrasing and rhythm. Paradoxically, it is less known to audiences in the West, who have learned to enjoy Indian instrumental music unhesitatingly -- and have even begun to absorb the intricacies of Dhrupad vocals. Music stores in India offer a wide selection of Khyal recordings, and performances are well attended.</p><p style="font-family: &quot;Times New Roman&quot;; font-size: medium;">Khyal is several hundred years old. Originating in the courts of the Moghul emperors as a less rigid alternative to the Dhrupad style, it has evolved into a remarkably flexible form that allows an artist's i<br>ndividuality considerable rein -- while remaining within the steady, inexorable flow of Indian tradition. Even within the past five decades the form has undergone metamorphoses, and the tradition of innovation continues. An artist is expected to develop an individual style (albeit one that is demonstrably connected to the tradition), and those performers who restrict themselves to mere imitation of their preceptors or of other famous musical personalities are firmly criticized for a lack of imagination.</p><p style="font-family: &quot;Times New Roman&quot;; font-size: medium;">Khyal texts draw freely from Hindu and Muslim poetic traditions, and are usually romantic or devotional -- or a combination of the two. Generally composed in the archaic Hindi dialect known as Brij Bhasha, khyal songs are also found in languages like Bhojpuri, Punjabi, Urdu, Rajasthani, Marathi and (occasionally) Sanskrit. Many songs have unclear wordings, and in some cases the texts have become completely garbled through multiple gene<br>rations of oral transmission. However, the primary focus in a khyal performance is less on the textual or lyrical content of a song than on abstract musical values. Audiences respond with delight to nuances of ornamentation, to complex rhythmic improvisation, to intricate melodic patterns or to a vocalist's superb intonation.</p><p style="font-family: &quot;Times New Roman&quot;; font-size: medium;">Performances of khyal often start with a song in a very slow rhythmic cycle, perhaps of 10, 12, 14 or 16 beats; often the pulse is so slow that each beat is further subdivided -- for instance, a 12-beat cycle becoming one of 48. Each beat of the rhythm is marked by a specific stroke or combination of strokes on the tabla drums; by listening to their sound a singer can keep his or her place in improvisation. The tonal material of the raga gradually moves from a restricted melodic range to an extensive gamut; from a slow and relaxed pace to a quicker one. Improvisation is punctuated by the first few words of the so<br>ng, which become a familiar melody leading up to the first beat of the rhythmic cycle. All extemporized melodic or rhythmic variations aim for this beat, and the gradual building of tension as it approaches is one of Hindustani music's great delights. Eventually the singer switches to a faster song in the same raga, displaying his or her virtuosity and command over the material. Some of the time a &quot;tarana&quot; is used to conclude -- these pieces are rhythmic in focus, and make use of nonsense syllables; they are thus in a sense analogous to scat singing in Jazz.</p><p style="font-family: &quot;Times New Roman&quot;; font-size: medium;">Fortunately, the music of great khyal singers (the proper generic noun is &quot;khyaliya&quot;) is widely available on cassette, CD and lp. The following are some of the most highly regarded singers of this century; most are dead, but their music is easily obtainable, and their voices ring out with extraordinary conviction and passion. Other artists, like Bhimsen Joshi a<br>nd Kishori Amonkar, are still performing and recording actively.</p><ul style="font-family: &quot;Times New Roman&quot;; font-size: medium;"><li>Kesarbai Kerkar</li><li>Hirabai Barodekar</li><li>Faiyaaz Khan</li><li>Bade Ghulam Ali Khan</li><li>Mallikarjan Mansur</li><li>Abdul Karim Khan</li><li>Amir Khan</li><li>Mogubai Kurdikar</li><li>Nazakat and Salamat Ali</li><li>Bhimsen Joshi</li><li>Kishori Amonkar</li></ul><p style="font-family: &quot;Times New Roman&quot;; font-size: medium;">Contemporary performers include many musicians of great skill; some are regarded as &quot;up-and-coming,&quot; while others are relatively senior performers who have only recently begun to attract critical attention. These include:</p><ul style="font-family: &quot;Times New Roman&quot;; font-size: medium;"><li>Rashid Khan</li><li>Padma Talwalkar</li><li>Malini Rajurkar</li><li>Ulhas Kashalkar</li><li>Dinkar Kaikini</li><li>Rajan and Sajan Mishra</li><li>Ashwini Bhide Deshpande</li><li>Arati Ankalikar-Tikekar</li><li>Veena Saha<br>srabuddhe</li></ul><address style="font-family: &quot;Times New Roman&quot;; font-size: medium;">Warren Senders &lt;WARVIJ@AOL.COM&gt;</address><hr style="font-family: &quot;Times New Roman&quot;; font-size: medium;" /><span style="font-family: &quot;Times New Roman&quot;; font-size: medium;">To Todd McComb's</span><span style="font-family: &quot;Times New Roman&quot;; font-size: medium;"> </span><a href="http://www.medieval.org/music/world/india.html" style="font-family: &quot;Times New Roman&quot;; font-size: medium;">Indian Music menu</a><span style="font-family: &quot;Times New Roman&quot;; font-size: medium;">.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp; </section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/Audio content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/fin content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="fin" dojoType="com.trivedi.oPls.mPane" tags="Finance career bookmark" title="fin"><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;blcked srch res: http://www.tinyurl.com/hvvf5lr http://www.ft.com/global-economy<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.economist.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.bloomberg.com<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://tulipsandbears.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.itulip.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.shadowstats.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.gold-eagle.com<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.kitco.com<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--rec/Fin content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--nyc/re content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="re" dojoType="com.trivedi.oPls.mPane" tags="realEstate gear bookmark" title="re"><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.mansionglobal.com/newyork<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Rental <a href="http://streeteasy.com/for-rent/manhattan/status:open%7Cprice:-2000%7Csqft%20%3E=500%7Cbeds%3C1?view=map#pos=12/40.77547,-73.97747">studios</a> under 2k<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Studios for about $200/day - http://manhattan.marmaranyc.com/studio/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.bhsusa.com/for-sale/new-york-city">Brown harris</a> (also has rentals)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.zillow.com/homes/for_sale/hdfc_att/globalrelevanceex_sort/40.808547,-%2073.873014,40.7416,-%2074.019442_rect/12_zm/a752f575ecX1-CR187zxt422kzhp_17gt2i_crid/">HDFC</a> income-restr. apts on zillow.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.trulia.com/for_rent/New_York,NY/13_zm/40.73048088865914,40.82056720511156,-%2074.04242212280275,-73.88569528564454_xy/0-2000_price/map_v">trulia</a> has both for sale & for rent<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.brickunderground.com/">Decent real-est site w/lots of articles</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.curbed.com/">Curbed: nyc real estate</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.apartmenttherapy.com/">Tips and things for living better in small spaces</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--nyc/re content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;

<div dojoType='com.trivedi.oPls.mPane' tags="furniture notes bookmark" title="General notes & bookmarks"><b>(site below has WishList saved under email id)</b><br>                            http://www.furniturelandsouth.com/<br>                            http://www.hickoryfurniture.com/Furniture-Jonathan-Charles-Tables/ItemBrowser.aspx?action=attributes&ItemType=Furniture&Brand=Jonathan%20Charles&Type=Tables&TrailIndex=1<br>                            http://s3.amazonaws.com/images2.eprevue.net/p4dbimg/513/images/217%20jessicamcclintock%20cover.pdf                        <!--A SECTION with cols for thumbnails-->              </div>

<!--nyc/storage content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="NYCStorage" dojoType="com.trivedi.oPls.mPane" tags="storage gear bookmark" title="NYCStorage"><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>Manhattan Mini Storage www.manhattanministorage.com<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Makespace https://makespace.com/nyc/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Box Butler http://www.yelp.com/biz/box-butler- new-york<br><br>&nbsp;&nbsp;&nbsp;&nbsp;OR dump stuff in Edison/Philly (cheaper + less crowded + less hassles)</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>NOTE: MOST MANHATTAN SITES DON'T HAVE TRUE 24X7 ACCESS, ONLY DAYTIME ACCESS. ALSO, IF THEY DELIVER THERE MIGHT BE DELAYS etc.</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>JAN. 22, 2013 Gotham Mini Storage</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>Prices range from $39 a month for a 64- cubic-foot locker reached by a stepladder, to $2,000 for a garage- size space. In contrast, a similar 64-cubic-foot space at Manhattan Mini Storage this week was $57 a month, with a year lease, at most locations. Prices started at $70 a month, for a slightly larger space, at Tuck-It-Away, which is based in Upper Manhattan.</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>2016:Gotham Mini Storage Locker Promotion Rent a storage locker for $79/month at Gotham Mini Storage and save 50% for the first three months.</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>There are about 30 self-storage facilities in Manhattan. Manhattan Mini Storage, which has been in business since the 1970s, owns 17 of those properties. (NYT 08:) A 10-by-10-by-8-foot space runs about $300 a month. manhattanministorage.com. Spaces start at 4 by 4 by 5 feet, and one of the most popular is a closet that size with a hanging rod and shelves, "so people can store out-of-season clothing,"" he said. The monthly cost is $45. The company provides a key card for access to the building and elevator, and the customer provides a lock.</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>CubeSmart ... enjoy a range of new services, like a courier that can shuttle boxes to tenants' homes its employees can sign for packages, which is important for tenants who run their businesses out of their storage areas and who make up about 30 percent of CubeSmart's tenants</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>Tuck-It-Away, one of the oldest operators in the city, owns 14 facilities with a total of about one million square feet of space.</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>''Most people rent twice as much space as they really need,'' said Edward Troianello, the president of the Self-Service Storage Association of New York. So calculate carefully and conservatively. According to Mr, Troianello, a three-piece bedroom set, plus the boxed contents of a bedroom closet, can fit into a 5-by-5-by-8-foot storage room</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>(NYT 14:)start-ups like MakeSpace charge roughly $220 a month for 36 square feet of space at an offsite warehouse.</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.publicstorage.com/storage-search- landing.aspx?location=edison+nj<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Storage Units Off Old Post Road in Edison, NJ --<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Small 5 ' x 5'<br><br>&nbsp;&nbsp;&nbsp;&nbsp;*Climate Controlled<br><br>&nbsp;&nbsp;&nbsp;&nbsp;*Inside unit/1st Floor 1 Left $69/mo.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Online Special* $74 In-store<br></p><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--nyc/storage content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--nyc/desi content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="NYCdesi" dojoType="com.trivedi.oPls.mPane" tags="DesiStuff social amuse mind bookmark" title="NYCdesi"><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="NYCdesiStuff"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;(Note: These work in lib browser)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Some girl who moved from Minn to NYC - http://101baddesidates.blogspot.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Amardeep Singh (dated site but lotsa links) = http://www.lehigh.edu/~amsp/2005/04/desi-weekend-indian-bloggers-bob- nyc.html<br><br>&nbsp;&nbsp;&nbsp;&nbsp;SruTHI 's decorating website - http://theeastcoastdesi.blogspot.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;SAJA Form desi spotting - http://www.sajaforum.org/desi_spotting/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.garamchai.com/desiassc.htm">Professional Indian Associations (net-ip, tie, etc.)</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://siliconeer.com">Valley desi site</a><br><br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Bhel, chaat, etc @ Murrah Hill & Village http://www.desi-galli.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Nisha 's Desi Street Food Site LOTS of info - http://indianstreetfoodie.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;punjabi forum (chk out jokes)- http://www.desicomments.com/desi/janmashtami/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Daandiyaa TOO! host events all over, website only works in IE -&gt; www.desiparty.com<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>502 error?! "http://nycpunjabigal.blog.com/"<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/j2upuzn">Desi Blog srch Multipg results:</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--nyc/desi content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>&nbsp;&nbsp;&nbsp;&nbsp;<!--cabaret content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="cabaret" dojoType="com.trivedi.oPls.mPane" tags="cabaret amuse mind bookmark" title="cabaret"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.songlyrics.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://en.wikipedia.org/wiki/Great_American_Songbook">Great American Songbook</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br>&nbsp;&nbsp;&nbsp;&nbsp;Stephen Holden writes for the NYT covering the Cabaret/Standards Scene (Gershwin/Berlin/Porter/Broadway)<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Show Calendars @ some NYC venues:http://metropolitanroom.com/enhancedCalendar.cfm  <br>https://54below.com/calendar/?month=December+2016  <br>https://www.rosewoodhotels.com/en/the-carlyle-new-york/location/things-to-do/events-at-the-carlyle  <br>http://www.birdlandjazz.com/calendar/  <br>http://www.jazz.org/calendar-full.php  <br>http://americansongbook.org/  <br>"NYC's 3 major cabaret supper clubs - Cafe Carlyle, the Oak Room (Algonquin) & Feinstein's @ Loews Regency - are attached to hotels.  <br>Other downtown Cabaret venues listed in a NYT "Cabaret for a steal" article by Erik Piepenburg:  <br>the 70-seat cabaret theater @ the Duplex in the West Village cover is $20 w 2 drink min.  <br>100-seat place @ Laurie Beechman Theater in Clinton  <br>Don't Tell Mama, W 46th St.  <br>the Metropolitan Rm  <br>Le Poisson RougeJoe's PubCast Party @ Birdland  <br>Kazuo Ishiguro "writes fanciful, mildly surreal lyrics to (Jim) Tomlinson's (saxophonist) music..."  <br>...latter-day answer to Gilber<br>to & Stan Getz (!!)  <br><p>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--cabaret content--><p>&nbsp;&nbsp;&nbsp;&nbsp;<!--buddhism content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="buddhism" dojoType="com.trivedi.oPls.mPane" tags="buddhism elevate mind bookmark" title="buddhism"><p><span class='mTitle'>Buddhism</span><br><br><p>Ten Bulls or Ten Ox Herding Pictures:<br><br>https://en.wikipedia.org/wiki/Ten_Bulls<br><br>http://philosophy.lander.edu/oriental/reader/reader/x5038.html<br><br><br><br><a href='https://en.wikipedia.org/wiki/Shikantaza'>Shikantaza</a><br><br><a href='https://en.wikipedia.org/wiki/Five_Ranks'>Five Ranks</a><br><br><a href='https://en.wikipedia.org/wiki/Subitism'>Subitism</a><br><br><a href='https://en.wikipedia.org/wiki/Kensh%C5%8D'>Kensh</a><br><br><a href='https://en.wikipedia.org/wiki/Satori'>Satori</a><br><br><a href='https://en.wikipedia.org/wiki/Linji_Yixuan#Three_Mysterious_Gates'>Three Mysterious Gates</a><br><br><a href='https://en.wikipedia.org/wiki/Hakuin_Ekaku#Four_ways_of_knowing'>Four ways of knowing</a><br><br><a href='https://en.wikipedia.org/wiki/Sesshin'>Sesshin</a><br><br><a href='https://en.wikipedia.org/wiki/Zazenkai'>Zazenkai</a><br><br><a href='https://en.wikipedia.org/wiki/Ango'>Ango</a><br><br><a href='https://en.wikipedia.org/wiki/Rinzai_school'>Rinzai</a> school<br><br><br><br><br><hr><p>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--buddhism content--><p>&nbsp;&nbsp;&nbsp;&nbsp;<!--travelNYC content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="travelNYC" dojoType="com.trivedi.oPls.mPane" tags="nyc travel amuse mind bookmark" title="travelNYC"><br>&nbsp;&nbsp;&nbsp;&nbsp;https://blogs.baruch.cuny.edu/asianamericanhistorynyc/<br><p>&nbsp;&nbsp;&nbsp;&nbsp;somewhat interesting:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://batteryrooftopgarden.org<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.bikeblognyc.com/ & page/2/ etc.<br>&nbsp;&nbsp;&nbsp;&nbsp;<p></p><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://nypost.com/">NY Post</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.vice.com/read/dumpster-diving-on-the-upper-west-side-511">VICE</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="www.nydailynews.com">NY Daily News</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.thedailybeast.com/articles/2015/06/19/why-we-love-to-loathe-manhattan-s-upper-east-side-from-f-scott-fitzgerald-to-odd-mom-out.html">Why We Love to Loathe Manhattan's UES...</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.amny.com/real-estate/city-living/manhattan/upper-west-side-1.7059835?image=2">AM NY</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://abc7ny.com/">ABC7 NY</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://newyork.cbslocal.com">CBS NY</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.rottentomatoes.com/m/those_people_2016/">Those People (2016) - Rotten Tomatoes</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://westsidewords.com/">westsidewords</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.airbnb.com/locations/new-york/upper-west-side">Airbnb but lotsa gd photos</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://untappedcities.com/">http://untappedcities.com/</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.humansofnewyork.com/">(blocked)humansofnewyork</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.westsiderag.com/">(blocked)WestSideRag (seems gd)</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://therumpus.net/2016/07/the-upper-far-east/">(blocked)The Upper Far East - The Rumpus.net</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.lifeintheapple.com/uptown.html">life in the apple (blocked)</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://gothamist.com<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.timeout.com/newyork/things-to-do/the-anglophiles-guide-to-nyc">Anglophile's guide to New York</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.gothamgazette.com/localbeats/manhattan.php">Gotham Gazette Manhattan blogs, lists</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.terryteachout.com/">Terry Teachout</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://cityroom.blogs.nytimes.com/">NYT CITY ROOM rdr's stories</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://newyork.craigslist.org/search/roo">NY rooms to let stories</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;<br></p><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><p><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--nyc/eatingOut content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="NYCeat" dojoType="com.trivedi.oPls.mPane" tags="NYC_Eating_Out food body bookmark" title="NYCeat"><p>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.yelp.com/biz/europan-cafe-new-york-9">Europan Cafe - 1 Reviews - Cafes - Upper West Side - New ...</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.toochicformeat.com/nyctour/">Vegan NYC Tour</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://ny.eater.com/">ny.eater</a><br><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.yelp.com/biz/one-riverside-park-new-york">Yelp rev</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><br><br>&nbsp;&nbsp;&nbsp;&nbsp;srch results for manhattan veggie places: http://tinyurl.com/z9bh8qq<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;- 252 Manhattan veggie restaurants at http://www.vegguide.org/region/5<br><br>&nbsp;&nbsp;&nbsp;&nbsp;(but v. few rated well, lots of cafes & raw/vegan stuff) top choices have been listed below.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Hummus Kitchen - 768 9th Avenue 212-333- 3009<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Gd rev from NYT, also has falafel<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Soy and Sake Village<br><br>&nbsp;&nbsp;&nbsp;&nbsp;47 7th Avenue South 212-255-2848 http://www.soyandsake.com<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Japanese Vegetarian cafe West Village specializing in Japanese food, but also carrying Chinese, Malaysian, and American soul food. owned by the same people as Red Bamboo / VP2, so the menu includes many well-known Red Bamboo items like chicken Parmesan, soy chops, and other soul food dishes utilizing soy meats. Other menu items include: numerous mockmeat sandwiches, curries, salads, noodle dishes, bento boxes and sushi. Lunch specials are about $7-9 include both sushi and soul food options.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Hangawi 12 E 32nd Street<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Vegan Korean dining in a tranquil space "posh". Zagat rated as top Korean and top vegetarian.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Lunch specials are WAY cheaper than dinner ($10 vs. $25),<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Beyond Sushi 229 E 14th St betw 2nd & 3rd Ave Union Square vegetarian sushi shop<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Executive Chef Guy Vaknin is a Hell's Kitchen finalist. He serves all vegetarian sushi made from fruits and vegetables topped with customized sauces. Spicy Mango Roll - black rice, avocado, mango, cucumber and spicy veggie topping with toasted cayenne sauce.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Kyotofu Upper West Side 705 Ninth Avenue<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Upscale, modern Japanese food with an emphasis on tofu<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Souen Organic Ramen East Village Betw 1st & 2nd Ave 326 E 6th St Small organic ramen noodle shop<br><br>&nbsp;&nbsp;&nbsp;&nbsp;From the owners of Souen comes this tiny organic ramen noodle shop. The seitan dumplings are vegan but make sure to ask questions about the ingredients of the different broths available.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Maoz Vegetarian Restaurant 38 Union Sq E International Falafel Chain<br><br>&nbsp;&nbsp;&nbsp;&nbsp;falafel sandwiches, salads, and fries. After you get your sandwich, there's a large selection of self-serve toppings - pickles, cucumber salad, roasted cauliflower, dairy and vegan coleslaws, carrots, baby eggplants dyed in beet juice (really), olives, several fresh hot sauces, and much more. The trick is they don't leave very much spare room in your sandwich, so you can't really load up on the condiments. The first Maoz branch was opened in 1991 in Amsterdam, Holland<br><br>&nbsp;&nbsp;&nbsp;&nbsp;KAJITSU it 's Michelin-starred Midtown E 125 E39th St betw Park & Lex Aves<br><br>&nbsp;&nbsp;&nbsp;&nbsp;A tasting menu here runs $95, with the option of an additional $59 sake pairing;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;you can also opt for the less extravagant $55 menu, with a $45 sake pairing.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Shojin cuisine refers to a type of vegetarian cooking that originates in Zen Buddhism.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Even though it does not use meat or fish, shojin is regarded as the foundation of all Japanese cuisine, especially kaiseki, the Japanese version of haute cuisine. In its present form kaiseki is a multi-course meal in which fresh, seasonal ingredients are prepared in ways that enhance the flavor of each component, with the finished dishes beautifully arranged on plates. All of these characteristics come from shojin cuisine, which is still prepared in Buddhist temples throughout Japan.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Peacefood Cafe 460 Amsterdam Ave betw82nd and 83rd Streets on UWside<br><br>&nbsp;&nbsp;&nbsp;&nbsp;The roasted Japanese pumpkin sandwiches ($9.75) are served on spelt bread and come stuffed with pumpkin pulp, cashew cheese, walnuts and onions; the Shangai-style dumplings ($8.50) are packed with chives, mushrooms, marinated tofu and vegetarian protein, and the chickpea fries ($8.50) are thick mashed legume slices fired up with piquant Indian spicethere are also vegan cheeseburgers on tap at Peacefood's downtown spot. Don't skip out on dessert here, since the raw key lime pie ($7.50) will blow your mind, almond brazil nut crust and all. (limes shortage coming up).<br><br>&nbsp;&nbsp;&nbsp;&nbsp; In addition to expanding service to anyone and everyone (in Midtown East) Jul2016, David Changs delivery-only Momofuku restaurant Ando also introduced a new vegetarian sandwich and a meat-less side: Veg Banh Mi s/w ($10), Kimchi salad $4<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Charrua 131 Essex Street, New York, NY 10002 (212) 677-5838 (S of Houston)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;the vegetarian chivito, called the el cheto, a "signature Uruguayan sandwich" filled with portobello mushrooms and mozzarella, plus carrots, caramelized onions, and chimichurri, and served with a handful of thick, hot fries.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Renovations are now complete at Tribeca stalwart Pakistan Tea House. The inexpensive restaurant was purchased by the owners of Baluchi's last year, who decided to close the shop for some renovations in January. The space now has a few new details  including large wooden tables, and chrome panelling on part of the wall  but the overall layout remains the same. Tribeca Citizen notes that the restaurant is now serving a limited menu, which includes vegetarian and meat combo plates for $8 to $10. According to the specials board, samosas are two-for-a-dollar.<br><p>&nbsp;&nbsp;&nbsp;&nbsp;Cinnamon Snail at The Pennsy<br><br>&nbsp;&nbsp;&nbsp;&nbsp;World famous vegan food truck turned permanent vendor in this spacious food hall above Penn Station. Every vegan's dream<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Founded by renowned Chef, Guy Vaknin, and his wife, Tali, Beyond Sushi offers an assortment of distinctive sushi rolls and other nutritional staples at their three outposts in Manhattan.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Chef Guy and his culinary team fuses unconventional pairings of fruit and vegetables with whole grains to create sushi rolls. Hand pressed juices; reason. prices, online ordering/deliv.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;UNION SQUARE 646-861-2889 229 E. 14th St. (Between 2nd & 3rd Ave)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;MIDTOWN WEST 646-964-5097 62 W 56th St. (Between 5th & 6th Ave)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;CHELSEA MARKET 212-929-2889 75 9th Avenue (Between 15th & 16th St)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Cinnamon Snail Penn Plaza, Southwest corner of 33rd St. and 7th Ave<br><br>&nbsp;&nbsp;&nbsp;&nbsp;"voted the top food truck in America", four- time Vendy Award winner the Cinnamon Snail finally shares the recipes for its beloved street-side meals. Here youll find Fresh Fig Pancakes for breakfast, Chimichurri Tempeh Empanadas for a snack, Thai Barbecue Seitan Ribs for a meal, and, of course, Snail classics like Vanilla-Bourbon Crme Brule Donuts for dessert.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Blossom du Jour (212) 229-2595  Vegan, Juice Bars & Smoothies 5 locations:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;CHELSEA 259 West 23rd Street (between 7th & 8th Ave.)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;HELL 'S KITCHEN 617 9th Avenue (between 43rd & 44th St.)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;UNION SQUARE 15 East 13th Street (between 5th & University)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;UWS 81ST 449 Amsterdam Avenue (between 81st & 82nd St.)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;COLUMBUS CIRCLE in the subway statione 1000S 8th Ave, #21<br><br>&nbsp;&nbsp;&nbsp;&nbsp;For over a decade, Terrys Gourmet Deli on Chelseas 6th Avenue has dispensed some of the citys best Trinidadian rotis. The vegetarian (potatoes and chickpeas only) weighed in at a whopping 1 pound, 10 ounces; was 6 inches long, and cost $8. Im not sure how one person could finish it. You can ask the roti maker for any amount of pepper sauce to be put inside, and I usually go for three plastic teaspoonfuls. 575 6th Ave, (212) 206-0170.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Nix (Michelin-starred chef John Fraser)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Vegetables are finally getting their due in New York, as evidenced by new all-vegetarian restaurant Nix. The food is complemented by a strong drinks program at this NYU-area restaurant in a modern space.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;(Brdway & 11th, just north of the Village) 72 University Pl New York, NY 10003 (212) 498-9393<br><br>&nbsp;&nbsp;&nbsp;&nbsp;presently open for dinner only. http://www.nixny.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;"When my vegetarian friends ask for dining advice I send them to American spots like Hearth, for hen of the woods mushrooms and gnocchi, or to to nouveau-Indian spots like Babu Ji for their bright yellow Punjabi curries. I send them to creative pizza spots like Roberta's and Pasquale Jones, to Semilla for vegetable-heavy tastings, to Del Posto for their vegan tasting menu. Some of the most celebrated vegetable dishes right now are served at "regular" restaurants: the grain bowls, the avocado toasts, the brown butter and squash carpaccios.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Superiority Burger made the veggie burger just as much an object of desire among the city's culinary cognoscenti as a trendy lamb burger. Now, the menus at Momofuku restaurants read "vegetarian options available on request."<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;famed Avenue B deli Sunny and Annie's - vegetarian sandwich - had not just pesto, grilled mozzarella, fresh goat cheese, spinach, seaweed, and avocado, but also ~three~ pieces of bread, making it the first non-meat double decker I've ever seen.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;new fast-casual Asian restaurant @ 122 Ludlow Street Zings Awesome Rice: menu will include six types of "seared rice," Yes, the fried rice is awesome, and it comes attractively plated with two domed scoops on either end of a long plate, with sriracha squirted in the middle in the shape of a heart or a leaf. But is it worth $11.99 to $13.99 for a modest serving, so that a full meal with app and beverage will run you $20 or $25? Thats for you to decide. The rice is loaded with umami, has diced vegetables in it, and offers as a main ingredient a choice of tofu. For an extra dollar or two you can pick a more exotic form of rice, including a black rice with a particularly nutty flavor. Beverages run to beer and infused sake.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;(5/16) Philadelphia-based chef Michael Solmonov and restaurateur Steve Cook officially kicked open the doors to the Chelsea Market outpost of their hit hummus restaurant, Dizengoff, this morning. A key member of the Dizengoff Philly team moved to New York for the opening of this new counter: executive chef Emily Seaman. Dizengoff will always serve fresh hummus, and pita baked in a taboon, but the toppings and combinations will change often. Solomonov tells Eater: "Emily really changes the menu all the time. She gets everything from the market, basically, and transforms it into Israeli-esque dishes." Solomonov notes that the avocado with peanut harissa on the opening menu is "not something that you'd ever find in Israel, but it really tastes fantastic." The hummus meals are $10 to $13, and the salatim are $3 each. for the moment, Dizengoff NYC is serving salads, hummus, pita, and drinks.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;resp to above, a reviewer sez:&gt;&gt;I thought that the hummus at Dizengoff was excellent  probably the best in Manhattan along with Baraca on 38th Street, and amongst the best in the entire City in league with places like Olympic Pita and Mabat in Brooklyn, or Grill Point in Queens. (they dont have falafel for some reason)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Freud<br><br>&nbsp;&nbsp;&nbsp;&nbsp;The brunch menu at chef Eduard Frauneder's new Greenwich Village Austrian restaurant has a vegetarian breakfast sandwich with cauliflower, egg, Tumbleweed cheese, and onions on a roll. Baked eggs are also on the menu. For sweet options, Frauneder is offering pancakes with rhubarb, and French toast served with walnuts and smoked maple syrup.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;506 Laguardia Pl New York, NY 10012 (212) 777- 0327 (just N of Houston below the Village)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Stuff to eat @ the Columbus Circles Turnstyle Food Court (access via an outdoor elevator at 59th Street and 8th Ave)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;2. Tex-Mex Slice at The Pizza  Uber-cheesy, with a slightly thicker than usual crust dotted with serious jalapeos and black-olive slices, and irrationally finished with squiggle of honey, the Tex-Mex slice verges on wonderful. But they should hand out wet-naps due to stickiness. $3.50<br><br>&nbsp;&nbsp;&nbsp;&nbsp;3. Key Lime Tart at Georgia & Alious  Topped with a fresh raspberry and a few slivers of lemon zest, the yellow pastry looks like a beach scene if you squint your eyes. Its every bit as tart and rich as you hoped, made for nibbling rather than biting. $5.50<br><br>&nbsp;&nbsp;&nbsp;&nbsp;5. Smoked Egg Salad Sandwich at Ellarys Greens  Vegetarians take note: The smoked egg salad sandwich at Ellarys Greens delivers much the same barbecue power as a slice of smoked brisket, with chopped kale adding to the textural terrain. $8<br><br>&nbsp;&nbsp;&nbsp;&nbsp;6. Avellino Focaccia Sandwich at Casa Toscana  The house-baked focaccia (sometimes known as pizza bianca) is thin and slightly crisp, and on it is piled mozzarella, cherry tomatoes, and fresh basil, making for a simple and delicious sandwich, the way they do it in Italy. $9<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Agern<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Agern is the new restaurant from Noma co- founder Claus Meyer and chef Gunnar Gslason. It is located within Grand Central Station, right next to the Nordic food court that Meyer recently opened. The focus is primarily on Nordic cooking using local American ingredients. There are two tasting menus available  the vegetarian "Field and Forest" ($120) and the meat and fish heavy "Land and Sea" ($145)  as well as a la carte options. Both tasting menus span seven courses, along with a selection of amuse-bouches. (Prices are inclusive of service.)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;89 E 42nd St New York, NY 10017 (646) 568- 4018<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Salvation Burger - rustic joint in the Pod 51 hotel<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Chefs across New York are fostering a vegetarian burger renaissance, and the version April Bloomfield serves at Salvation Burger, her newest restaurant, ranks near the top of the citywide hierarchy. Her kitchen mashes together golden beets, carrots, carrot juice, French lentils, mushrooms, sticky rice, and sweet potato vermicelli. This is all laced with enough warming garam masala to power a geothermal turbine, grilled over wood, and then anointed with cooling yogurt, shredded lettuce, and sweet tomato confit.&lt;&lt;writer goes on to pan this place bigtime, also v. exp (~30 burger) <strong>Desi spots:</strong><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Founded in 1975 with a name certain to popularize the cuisine to a wider audience, Curry in a Hurry was one of the original anchors of Curry Hill. The international food store Kalustyan's was another. 119 Lexington Ave, (212) 683-0900.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Dating to 1996, the amazing Vatan still offers a single enormous vegetarian meal, reflecting an era when the westernmost state of Gujarat provided many of the city's Indian immigrants. The price of the meal is fixed at $32, and includes approximately 25 dishes organized into four courses. It's also all-you-can-eat. 409 3rd Ave, (212) 689-5666.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;just a reg. thaali, avoid&gt;&gt;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Bombay Masala (148 W 49th St #2, 212-302-8150) this Times Square standard, successor to Ceylon India Inn, which occupied the space as late as 1968, has a $12.95 lunch buffet considered a good deal.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Vegetarian Ham Banh Mi  Vietnamese baguette sandwiches present such a chorus of powerful flavors (pickled veggies, cilantro, jalapeos, doctored mayo) that its hard to imagine that lack of real meat would make much of a difference. But theres something wonderful about the fake ham used in this banh mi  greasy, salty, and gelatinous that actually boosts the flavor of this excellent sandwich. Find it at: Banh Mi Place, 824 Washington Ave, Brooklyn,</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<br></p><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--nyc/eatingOut content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/domino content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devDomino" dojoType="com.trivedi.oPls.mPane" tags="Domino dev career bookmark" title="devDomino"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.dominoguru.com/page.xsp? id=index.html<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;LinkedIn - <a href="https://www.linkedin.com/topic/xpages-development">Xpages</a> stuff (incl presentations) & <a href="https://www.linkedin.com/topic/lotus-notes">Notes</a> stuff<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://xpages.info/XPagesHome.nsf/Home.xsp<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://xomino.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://xpages.tv/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://xpagescheatsheet.com/cheatsheet.nsf/home.xsp">XPages CheatSheet</a> Demo App(Tips & Tricks)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;XPages <a href="https://www.teamstudio.com/blog/topic/xpages">mobile development</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://notesin9.com/">notesin9</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.lotusguru.com/lotusguru/LGBlog.nsf/d6plinks/Is-There-Really-a-Shortage-of-Lotus-Notes-Developers">LACK of notes developers</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.slideshare.net/sbasegmez/bp207-download">IBM Connect13 - Meet the Java Application Server You Already Own</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.intec.co.uk/ibm-connect-2016-review/">ibm Connect 2016 review</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;IBM <a href="http://www.ibm.com/blogs/zz/en/">Syndicated feeds</a> (Tons o'links)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;IBM Connect Sessions & Lotusphere Slides<br><br>&nbsp;&nbsp;&nbsp;&nbsp;(esp check earlier xpages stuff, eg::<br><br>&nbsp;&nbsp;&nbsp;&nbsp;BP308 The Journey to Becoming a Social Application Developer (2014)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.idonotes.com/IdoNotes/IdoConnect2013.nsf/archive?openview&title=Domino&type=cat&cat=null&tag=Domino<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://developer.ibm.com/connect2cloud/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://heidloff.net/article/04122011020116AMNHE93V.htm">How to create your own Domino XPages Server in the IBM SmartCloud</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www-10.lotus.com/ldd/ddwiki.nsf">IBM Notes and Domino Application Development wiki</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://greenhouse.lotus.com/catalog/">IBM Domino biz partner solutions</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;XPages links:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;JSF <a href="http://www.jsftutorials.net/">Tutorials</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;JSF Tuts from <a href="http://www.coreservlets.com/JSF-Tutorial/">Core Servlets</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://openntf.org/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://dojotoolkit.org/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Whats_New_in_852_for_XPages">Whats_New in 8.52 for XPages</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Client_Side_JavaScript_Libraries_in_XPages.htm">Client Side</a> JS Libraries in XPages<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www- 10.lotus.com/ldd/ddwiki.nsf/dx/Master_Table_of_Contents_for_XPages_Extensibility_APIs_Developer_Guide <b>IBM <a href="http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.api.doc/r_wpdr_intro_c.html">XSP & js</a> API ref<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www-10.lotus.com/ldd/ddwiki.nsf/xsp/.ibmmodres/domino/OpenAttachment/ldd/ddwiki.nsf/01C426ED3170B96A8525776C00278CDC/attach/BP207%20Make%20your%20XPage%20Apps%20%27Pop%27%20with%20CSS%20and%20Themes.pdf">CSS & Themes</a> for XPgs<br><br>&nbsp;&nbsp;&nbsp;&nbsp;IBM <a href="http://www-12.lotus.com/ldd/doc/oneuidoc/docpublic/index.htm">OneUI</a> Theme<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://dojotoolkit.org<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://openntf.org/XSnippets.nsf/snippetsByLanguage.xsp?cat=Java">OpenNTF java Xpages snippets</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/edm00se/AnAppOfIceAndFire">A demo application, implemented in the XPages runtime, with a Domino NoSQL database, for Java HttpServlets and front-end development practices</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/MWLUG/2014-Build-a-bean-workshop">build & deploy a simple, Java-based XPages appl on yr own laptop</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/naveenmaurya/JavaCharts">Some dude (Medhu?) copied mChart!</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/naholyr/json-server-gui">Create a local JSON Server for testing (v.gd!)</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Notes/Domino blogs/personal sites:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Mat <a href="http://www.matnewman.com/webs/personal/matblog.nsf/dx/ibm-connect-2016-summary-conference-agenda-published">Newman</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Notes <a href="http://notesspeak.blogspot.com/2016/06/new-directions.html">Speak</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Cool 1-pg Notes <a href="https://quintessens.files.wordpress.com/2011/09/20111003-curriculum-vitae-petrus-kwinten.pdf">resume</a> from <a href="https://quintessens.wordpress.com/">this</a> guy.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Domino <a href="http://dominogavin.blogspot.com/search/label/Domino">Gavin</a><br></b><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><b></b><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/domino content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/Java content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<b></b><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devJava" dojoType="com.trivedi.oPls.mPane" tags="Java dev career bookmark" title="devJava"><br>&nbsp;&nbsp;&nbsp;&nbsp;<b></b><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devJavaLinks" dojoType="com.trivedi.oPls.mPane" tags="Java dev career bookmark" title="devJavaLinks"><br>&nbsp;&nbsp;&nbsp;&nbsp;Java Platform, Standard Edition (Java SE) 8 - <a href='http://docs.oracle.com/javase/8/javase-books.htm'>Books</a><br><br><br>The Java EE <a href='https://docs.oracle.com/javaee/7/tutorial/'>Tutorial</a><br><br><p><h2>The Java Trove: </h2><br>useful examples of libraries and tools that make working in the Java space a much better experience.<br><br><br>Bld an applic to query a REST-based API and present the results in a JavaFX application.<br><br><br><a href='https://community.oracle.com/docs/DOC-1005785'>Part I</a><br><br><br><a href='https://community.oracle.com/docs/DOC-1007145'>Part II</a><br>Links contained/prods used in Trove-><br><br><br><h2>@Inject</h2> Google <a href='https://github.com/google/guice'>Guice</a> alleviates the need for factories and the use of new in your Java code.<br><br><br><a href='https://github.com/FasterXML/jackson'>Jackson</a>, one of the most well-known JSON parsing libraries out there<br><br><br><a href='https://github.com/FasterXML/jackson-jr'>jackson-jr</a>, a light-weight (and -featured) alternative to 'jackson-databind': will only deal with "Maps, Lists, Strings, wrappers and Java Beans" (jr-objects), or simple read-only trees (jr-stree)<br><br><br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://docs.oracle.com/javase/specs/jls/se8/html/index.html">The Java Language Specification</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://docs.oracle.com/javase/tutorial/index.html">The Java Tutorials</a><a href="https://docs.oracle.com/javaee/7/tutorial/">The Java EE Tutorial</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://docs.oracle.com/javaee/7/index.html">Java EE Main site</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://docs.oracle.com/javase/8/javafx/api/toc.htm">Java FX API dox</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Java Platform, Standard Edition (Java SE) 8 - <a href='http://docs.oracle.com/javase/8/javase-books.htm'>Books</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;The Java 7 EE <a href='https://docs.oracle.com/javaee/7/tutorial/'>Tutorial</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='mTitle'>The 'Java Trove'</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;useful examples of libraries and tools that make working in the Java space a much better experience.<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Bld an applic to query a REST-based API and present the results in a JavaFX application.<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href='https://community.oracle.com/docs/DOC-1005785'>Part I</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href='https://community.oracle.com/docs/DOC-1007145'>Part II</a><br>&nbsp;&nbsp;&nbsp;&nbsp;Links contained/prods used in Trove-><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<h2>@Inject</h2> Google <a href='https://github.com/google/guice'>Guice</a> alleviates the need for factories and the use of new in your Java code.<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href='https://github.com/FasterXML/jackson'>Jackson</a>, one of the most well-known JSON parsing libraries out there<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href='https://github.com/FasterXML/jackson-jr'>jackson-jr</a>, a light-weight (and -featured) alternative to 'jackson-databind': will only deal with "Maps, Lists, Strings, wrappers and Java Beans" (jr-objects), or simple read-only trees (jr-stree)<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='mTitle'>RegEx</span><br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;Visual <a href="http://www.ocpsoft.org/tutorials/regular-expressions/java-visual-regex-tester/">Regex Tester</a> (is for Java BUT working exp on this site still has chars which'll need to be escaped</b></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><b><br>&nbsp;&nbsp;&nbsp;&nbsp;Online Java regex <a href="http://www.ocpsoft.org/opensource/guide-to-regular-expressions-in-java-part-1/">guide<br></a></b></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><b><br>&nbsp;&nbsp;&nbsp;&nbsp;Some notes on regex in <a href="http://www.regular-expressions.info/java.html">Java</a></b></blockquote></blockquote><b><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://htmlpreview.github.io/?https://gist.githubusercontent.com/anonymous/b3080f8c7310dc7b0c628f7286e9f246/raw/102bf9fa22c5ae31fbbe104e4099fb0853c11649/mike.html">Gist with Google's Java API</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/zrwgy9c">Yahoo multipg srch "online java IDE compile run"</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/hax2brg">Yahoo Dev Net page:</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/hx8m3yw">Yahoo BOSS srch API (prob'ly discontd) &amp; google search api page:</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/jx86lys">Yahoo REST api srch calls (prob'ly discontd)</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/jjju79c">**Google API Client Libraries Java</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/j993r5b">Search result for javascript+framework+popularity+Bootstrap +2016<br><br><br></a></b>developerWorks Top&nbsp;<a href="http://www.ibm.com/developerworks/java/library/j-topjava15-trs/index.html">Java</a>&nbsp;tutorials from 2015<br>developerWorks An introduction to the java.util.<a href="http://www.ibm.com/developerworks/java/library/j-java-streams-1-brian-goetz/index.html">stream</a>&nbsp;library<br>&nbsp;<br>Top five&nbsp;<a href="http://www.ibm.com/developerworks/websphere/library/techarticles/1605_servais-trs/1605_servais.html">WebSphere</a>&nbsp;Liberty tutorials<br><br>&nbsp;&nbsp;<br>your Java EE app with IBM&nbsp;<a href="http://www.ibm.com/developerworks/cloud/library/cl-cloudtrader-app/index.html">Bluemix</a><br>(Sept'16)Deploy Java applications to the&nbsp;<a href="http://www.ibm.com/developerworks/java/library/j-perry-java-in-the-cloud/index.html">IBM Bluemix PaaS</a><br><br><br><a href="https://vaadin.com/framework">vaadi<br>n</a>&nbsp;(Java Web UI Framework for Business Applications)<br><br>JavaEE-<a href="http://spring.io/guides">Spring</a>&nbsp;guides<b><a href="http://www.tinyurl.com/j993r5b">&nbsp;</a></b><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devJavaIDE" dojoType="com.trivedi.oPls.mPane" tags="IDE Java dev career bookmark" title="devJavaIDE"><br>&nbsp;&nbsp;&nbsp;&nbsp;<b></b><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><b><b>Java Cloud IDEs:</b><br></b></p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>http://www.koding.com/features<br><br>&nbsp;&nbsp;&nbsp;&nbsp;... once you've finalized your app, you'll want to deploy it on a cloud-based service that lets you host apps long term, preferably one with a free hosting option like <a href="https://devcenter.heroku.com/articles/getting-started-with-java#introduction">Heroku</a>.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;(looks ok)Free java cloud IDE : https://codetasty.com<br><br>&nbsp;&nbsp;&nbsp;&nbsp;also seems good -&gt; https://codeanywhere.com/signup <button class="btn btn-default" data-="" data-content="codeanywhere -- A couple of the standout features are the really nice Revisions capability which allows you to easily see all changes you have made to any file. This means you can easily roll back to a previous version if you make a mistake. Also the editor has a nice Minimap that is very reminiscent of the one in Sublime Text 3. Another useful features is the great integrations with Git, SSH, SFTP, FTP, Google Drive, DropBox and S3 containers." data-toggle="popover" type="button">codeanywhere info</button><br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.koding.com/ <button class="btn btn-default" data-="" data-content="very focused and clutter-free, which ensures you only see what you need, and nothing more. Also there is no browser tab, but you can see your site live by going to your assigned URL or custom domain. Setting up instructions for a sample app are on - https://getgrav.org/blog/cloud-ide-zero-to-code?o=600605&l=dir&qsrc=990" data-placement="right" type="button">Koding info</button><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tutorialspoint.com/compile_java_online.php">Compile & exec Java (Hydr.)</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.codechef.com/ide">CodeChef</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.jdoodle.com/online-java-compiler">jDoodle</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.codebunk.com/">Bunk</a> from the SauceLabs people<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.compilejava.net/">compile.net</a> v gd except for http permissions<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://ideone.com/">ideOne</a> nice but complains on long output<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://browxy.com/">Browxy</a> nice but complains on long output<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.innovation.ch/java/java_compile.html">Chinese</a> compiler only, no IDE<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://codenvy.com/">CodEnvy</a> supposedly gd but requires sign-in & reg</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p></p><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devJavaServlets" dojoType="com.trivedi.oPls.mPane" tags="Servlets Java dev career bookmark" title="devJavaServlets"><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://courses.coreservlets.com/Course-Materials/">Free Java EE, JSF 2.0, Ajax, Android, jQuery, & GWT Tutorials</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>Servlet Hosting (outdated?!):</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><a href="http://www.gwtproject.org/">gwtproject</a></p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><br><br>&nbsp;&nbsp;&nbsp;&nbsp;ISPs<br><br>&nbsp;&nbsp;&nbsp;&nbsp;These days it seems there are servlet engines for nearly every web server, and now we're seeing servlets commonly offered as core value-add for Internet Service Providers (ISPs) and Web Hosting companies.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;The megacorp ISPs and Hosting companies still don't offer servlets, though, probably because it's not something Joe Consumer cares about. Also because to host servlets effectively and efficiently requires a bit of expertise. That makes finding a good servlet provider somewhat challenging.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;On this page we try to help you on that endeavor by keeping track of all the ISPs that are known to host servlets. For each ISP we provide location and contact information, a short summary, and user reviews. The reviews should help you find out how the ISP you're looking at compares to others in terms of features, reliability, support, and overall score. Feel free to add one of your own.</p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<button class="btn btn-default" data-content=" URL: http://java.isavvix.com&lt;br&gt; Location: Herndon, Virginia&lt;br&gt; Contact: ijc@isavvix.com&lt;br&gt; Phone: 866-isavvix&lt;br&gt; Average Review: No reviews yet&lt;/p&gt; &lt;p&gt; Looks like a portal site, and as a service to their freely registered members 10 Megs of space to run JSPs, including tag libraries. Your site will have a URL like http://member.isavvix.com//. They use Tomcat and other Apache software. One user reports, 'You CANNOT USE your OWN CLASSES, only the classes that they provide!'&lt;/p&gt;" data-placement="right" data-toggle="popover" type="button">isavvix (Free!)</button><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<button class="btn btn-default" data-content=" URL: http://www.mycgiserver.com&lt;br&gt; Location: Austria&lt;br&gt; Contact: general@mycgiserver.com&lt;br&gt; Phone: N/A&lt;br&gt; Average Review: 4.0 out of 5.0&lt;br&gt; &lt;p&gt;&lt;br&gt; Service (including servlets) is FREE. Comes with 5 Megs of space (the concept is that other files are stored somewhere else). Powered by Resin on an Alpha server running Linux.&lt;/p&gt;" data-placement="right" data-toggle="popover" type="button">mycgiserver (Free!)</button><br></p><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devJavaOther1"><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://gist.github.com/anonymous/9379000b071864e728ca5c5b463b6856/raw/5a2421da47cdcd12322dd50a303fdce1c39238e2/URLRdr_v1.09.java">URLRdr v1_9</a> updated 9/10/2016 & <a href="https://tinyurl.com/201609100427mpt">some</a> srch results generated.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://gist.githubusercontent.com/anonymous/925d247782fabb5007e7b82ca08e1681/raw/97b740585726d9d662d65edf8609cf7725365cb7/URLRdr_v1.082.java">URLRdr v1_82</a> updated 08/16/2016 & <a href="https://tinyurl.com/201608140319mpt">some</a> & <a href="https://tinyurl.com/201608140320mpt">some</a> srch results generated by it.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://gist.github.com/anonymous/b73aac46b0bb9f7288a6d51ffe43d9b1">URLRdr v1_7</a> (w/timeStamp module) updated 08/08/2016 & lotsa <a href="https://tinyurl.com/2016080802mpt">srch results</a> generated by it.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://gist.github.com/anonymous/da3f444a9a905c649b8218853c4f47e8">URLRdr v1_6</a> (working GistLink & TinyLink) updated 07/18/2016<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://gist.github.com/anonymous/a67bf6a887643b60141bcaeb71499785">URLRdr v1_5</a> (no soup, no apache includes)<br><br>&nbsp;&nbsp;&nbsp;&nbsp; Code for jSoup + escaped JSON string version of URLRdr <a href="#" onclick="URLRdr1_4Dlg.show()">v1_4.java</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-id="URLRdr1_3NotesDlg" data-dojo-type="dijit/TitlePane" data-dojo-props='title:"Notes for jSoup version of URLRdrv1_3", width:600, toggleable:true'><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-props="style: {overflow: 'auto', padding: 0, height: '500px', width: '400px'}"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//---------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;FOR TUT POINT SHELL:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.tutorialspoint.com/unix/unix-environment.htm<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;To set the value of PS1 (PROMPT)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;so that it shows the USERNAME & working directory, issue the command -<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<kbd>PS1="[\u@\h \w]\$"</kbd><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;The prompt will show username, machine's name (hostname), and the working directory.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<kbd>echo $PATH</kbd> (to see path env)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<kbd>echo $TERM</kbd> (to see path terminal)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<kbd>mvn --version</kbd> (shows maven version, which IS installed on tutpoint)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;*SOLVED!<br><br>&nbsp;&nbsp;&nbsp;&nbsp;first :<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<kbd>find / -name "jsoup*.*"</kbd><br><br>&nbsp;&nbsp;&nbsp;&nbsp;that listed 2 locations for the jars; incl<br><br>&nbsp;&nbsp;&nbsp;&nbsp;/usr/share/java/jsoup/jsoup.jar<br><br>&nbsp;&nbsp;&nbsp;&nbsp;/usr/share/maven/lib/jsoup_jsoup.jar<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;to update env var syntax is:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<kbd>export CLASSPATH= $CLASSPATH:/usr/share/java/jsoup/jsoup.jar</kbd><br><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-id="URLRdr3Dlg" data-dojo-type="dijit/TitlePane" open=false title="Code for jSoup version of URLRdr v1_3"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-props="style: {overflow: 'auto', padding: 0, height: '500px', width: '400px'}, toggleable:true"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//Before running, will have to compile with jsoup jar:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//export CLASSPATH= $CLASSPATH:/usr/share/java/jsoup/jsoup.jar<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//------------------------------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import java.net.*;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import java.io.*;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import org.jsoup.Jsoup;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import org.jsoup.nodes.Document;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import org.jsoup.nodes.Element;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import org.jsoup.select.Elements;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public class URLRdr {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public static String getText(String url) throws IOException {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;URL website = new URL(url);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String strBody = "";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Document doc = Jsoup.connect (url).get();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Elements bodyTxt = doc.select("body");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;for (Element el : bodyTxt){<br><br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("bodyTxt: "+el);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;strBody = strBody + el.toString();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return strBody;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public static void main( String[] args ) throws IOException{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String[] thisIsAStringArray = {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;"http://www.bing.com/search? q=aesthete+or+flaneur&go=Search&qs=ds&form=QBRE" , "http://www.bing.com/search?q=aesthete+or+flaneur&go=Search&qs=ds&first=11&FORM=PERE" , "http://www.bing.com/search?q=aesthete+or+flaneur&go=Search&qs=ds&first=21&FORM=PERE1" , "http://www.bing.com/search?q=aesthete+or +flaneur&go=Search&qs=ds&first=31&FORM=PERE2" };<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String content = "";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;for( int i = 0; i &lt; thisIsAStringArray.length; i++) {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;content=content + URLRdr.getText(thisIsAStringArray[i]);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println( content );<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;Code for String Array version of <a href="#" onclick="URLRdr2Dlg.show()">URLRdr v1_2</a>.java<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-id="URLRdr2Dlg" data-dojo-type="dijit/TitlePane" open=false  title="URLRdrv1_2" toggleable=true><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-props="style: {overflow: 'auto', padding: 0, height: '500px', width: '400px'}"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//---------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//URLRdr.java<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import java.net.*;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import java.io.*;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public class URLRdr {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public static String getText(String url) throws Exception {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;URL website = new URL(url);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;URLConnection connection = website.openConnection();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;BufferedReader in = new BufferedReader( new InputStreamReader( connection.getInputStream()));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;StringBuilder response = new StringBuilder();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String inputLine;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;while ((inputLine = in.readLine()) != null) response.append(inputLine);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;in.close();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return response.toString();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;} public static void main(String[] args) throws Exception { //String content = URLRdr.getText(args [0]);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//System.out.println(content);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//String[] thisIsAStringArray = {"Apple", "Banana", "Orange"};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String[] thisIsAStringArray = { "http://www.bing.com/search?q=aesthete+or +flaneur&go=Search&qs=ds&form=QBRE" , "http://www.bing.com/search?q=aesthete+or +flaneur&go=Search&qs=ds&first=11&FORM=PERE" , "http://www.bing.com/search?q=aesthete+or +flaneur&go=Search&qs=ds&first=21&FORM=PERE1" , "http://www.bing.com/search?q=aesthete+or +flaneur&go=Search&qs=ds&first=31&FORM=PERE2" };<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String content = "";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;for( int i = 0;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;i &lt; thisIsAStringArray.length;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;i++) { content=content + URLRdr.getText(thisIsAStringArray[i]);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;} System.out.println( content );<br><br>&nbsp;&nbsp;&nbsp;&nbsp;} }<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/zaszudu">Sample output from GitHub</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-id="URLRdr1Dlg" data-dojo-type="dijit/TitlePane" open=false toggleable=true title="Code for URLRdr v1_0.java"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-props="style: {overflow: 'auto', padding: 0, height: '500px', width: '400px'}"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//---------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//URLRdr.java (for tutorialspoint.com)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import java.net.*;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import java.io.*;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public class URLRdr {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public static String getText(String url) throws Exception {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;URL website = new URL(url);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;URLConnection connection = website.openConnection();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;BufferedReader in = new BufferedReader( new InputStreamReader( connection.getInputStream()));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;StringBuilder response = new StringBuilder(); String inputLine; while ((inputLine = in.readLine()) != null) response.append(inputLine);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;in.close();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return response.toString();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public static void main(String[] args) throws Exception {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String content = URLRdr.getText(args [0]);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(content);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//---------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//java URLRdr "https://www.yahoo.com/? p=dnr" &gt;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;HelloWorld.java<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//then refresh the project to see HelloWorld.java which's auto added to Project<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>Search param. notes: To get 30 result on single page, pass below parameter:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;For bing use count=30 - http://www.bing.com/search?q=test&count=30<br><br>&nbsp;&nbsp;&nbsp;&nbsp;For yahoo use n=30 - https://search.yahoo.com/search? p=test&n=30<br><br>&nbsp;&nbsp;&nbsp;&nbsp;For google use num=30<br><br>&nbsp;&nbsp;&nbsp;&nbsp;- https://www.google.com/search?q=test&num=30<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br></p><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-id="srchStrTitlePane1" data-dojo-type="dijit/TitlePane" data-dojo-props='title:"Search String", width:600, toggleable:true'><br>&nbsp;&nbsp;&nbsp;&nbsp;<pre> String[]<p>srchUrlArray = {<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=11&pstart=2",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=21&pstart=3",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=31&pstart=4",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=41&pstart=5",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=51&pstart=6",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=61&pstart=7",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=71&pstart=8",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=81&pstart=9",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=91&pstart=10",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=101&pstart=11",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=111&pstart=12",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=121&pstart=13",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=131&pstart=14",<br>"https://search.yahoo.com/search?p=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016%26n%3D100%26sort%3Dnew&xargs=0&psqn=2&b=141&pstart=15",<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=11&FORM=PERE" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=21&FORM=PERE1" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=31&FORM=PERE2" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=41&FORM=PERE3" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=51&FORM=PERE4" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=61&FORM=PERE5" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=71&FORM=PERE6" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=81&FORM=PERE7" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=91&FORM=PERE8" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=101&FORM=PERE9" ,<br>"http://www.bing.com/search?q=domino+xpages+java+jobs+contract+-pizza+-delivery+-driver<p>+2016&go=Search&qs=ds&first=111&FORM=PERE10"<br>};</pre><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devJavaOther2" dojoType="com.trivedi.oPls.mPane" tags="Other Java dev career bookmark" title="devJavaOther2"></div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><!--dev-Java--><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/Java content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/Other content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devOther" dojoType="com.trivedi.oPls.mPane" tags="Other dev career bookmark" title="devOther"><p><span class='mTitle'>Outlook taskitem members/methods</span><br><br>https://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._taskitem_members.aspx<br><br><br><hr><br><span class='mTitle'>JSON</span><br><br><br>http://www.json.org/<br><br>http://www.jsoneditoronline.org/<br><br>http://jsonlint.com/<br><hr><br><span class='mTitle'>CouchDB</span><br><br><br>http://couchdb.apache.org/<br><br>Apache CouchDB is open source database software that focuses on ease of use<br>and having an architecture that "completely embraces the Web".[2] It has a<br>document-oriented NoSQL database architecture and is implemented in the<br>concurrency-oriented language Erlang; it uses JSON to store data, JavaScript<br>as its query language using MapReduce, and HTTP for an API.[2]<br><br><br>http://couchdb.apache.org/fauxton-visual-guide/index.html<br><hr><br><span class='mTitle'>PDF</span><br><p><br>Java <a href='https://github.com/mitoma/github2pdf/blob/master/src/main/java/in/tombo/github2pdf/PDFGenerator.java'>github 2 pdf</a> using <a href='http://developers.itextpdf.com/content/itext-7-jump-start-tutorial/examples/chapter-1'>itextpdf</a> Lib<br><br><br><a href='https://github.com/GitbookIO/gitbook-pdf/blob/master/bin/gitbook-pdf.js'>JavaScript</a> PDF gen lib uses PhantomJS<br><hr><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<b>VBA code snippet</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Selection.Find.Execute FindText:="http:", _Forward:=True, Wrap:=wdFindStop Selection.MoveLeft Unit:=wdCharacter, Count:=1 Selection.TypeParagraph Selection.TypeText Text:="<br><br>&nbsp;&nbsp;&nbsp;&nbsp;" Selection.MoveRight Unit:=wdCharacter, Count:=15<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='mTitle'>Office365</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><b>Working/manipulating MSO Files via REST: (3 links)</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>https://xomino.com/2016/08/01/reading-an-excel-file-from-onedrive-using-the-microsoft-graph- api/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>MSDN <a href="https://msdn.microsoft.com/en-us/office/office365/api/api-catalog">Office365 API</a> Ref<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>Accessing MS Files using the <a href="https://graph.microsoft.io/en-us/graph-explorer">Graph API</a><br></p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p></p><br><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/Other content--><p>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/NoSQL content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devNoSQL" dojoType="com.trivedi.oPls.mPane" tags="NoSQL dev career bookmark" title="devNoSQL"><p>&nbsp;&nbsp;&nbsp;&nbsp;<span class='mTitle'>Notes</span><br><br><br><br>How Map and Reduce operations are <a href='https://wiki.apache.org/hadoop/HadoopMapReduce'>actually carried out</a><br><br><br>An Apache Hadoop map/reduce application, <a href='http://svn.us.apache.org/viewvc/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-examples/src/main/java/org/apache/hadoop/examples/pi/package.html?revision=1512420'>DistBbp</a>, which computes exact binary digits of the mathematical constant p. distbbp is designed for computing the nth bit of p, for large n, say n > 100,000,000.<br><br><br><a href='http://svn.us.apache.org/viewvc/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-examples/src/main/java/org/apache/hadoop/examples/pi/DistBbp.java?revision=1203941'>The Code for DistBbp</a><br><br><hr><br><div><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='mTitle'><a href="http://blog.nahurst.com/visual-guide-to-nosql-systems">Visual Guide to NoSQL Systems</a></span><br><p>&nbsp;&nbsp;&nbsp;&nbsp;<div><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>There are so many NoSQL systems these days that it's hard to get a quick overview of the major trade-offs involved when evaluating relational and non-relational systems in non-single-server environments. I've developed this visual primer with quite a lot of help (see credits at the end), and it's still a work in progress, so let me know if you see anything misplaced or missing, and I'll fix it.</p><p></p> Without further ado, here's what you came here for (and further explanation after the visual).<br><p>Note: RDBMSs (MySQL, Postgres, etc) are only featured here for comparison purposes. Also, some of these systems can vary their features by configuration (I use the default configuration here, but will try to delve into others later).</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;<div class="posthaven-gallery" id="posthaven_gallery[338542]"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="posthaven-gallery-car"><br>&nbsp;&nbsp;&nbsp;&nbsp;<p class="posthaven-file posthaven-file-image posthaven-file-state-processed"><br>&nbsp;&nbsp;&nbsp;&nbsp;<img class="posthaven-gallery-image" src="https://phaven-prod.s3.amazonaws.com/files/image_part/asset/607361/CausfGVcU2tskB-TR5b8CMm8Keg/medium_media_httpfarm5static_mevIk.png" data-posthaven-state='processed'<br>data-medium-src='https://phaven-prod.s3.amazonaws.com/files/image_part/asset/607361/CausfGVcU2tskB-TR5b8CMm8Keg/medium_media_httpfarm5static_mevIk.png'<br>data-medium-width='800'<br>data-medium-height='600'<br>data-large-src='https://phaven-prod.s3.amazonaws.com/files/image_part/asset/607361/CausfGVcU2tskB-TR5b8CMm8Keg/large_media_httpfarm5static_mevIk.png'<br>data-large-width='1024'<br>data-large-height='768'<br>data-thumb-src='https://phaven-prod.s3.amazonaws.com/files/image_part/asset/607361/CausfGVcU2tskB-TR5b8CMm8Keg/thumb_media_httpfarm5static_mevIk.png'<br>data-thumb-width='200'<br>data-thumb-height='200'<br>data-xlarge-src='https://phaven-prod.s3.amazonaws.com/files/image_part/asset/607361/CausfGVcU2tskB-TR5b8CMm8Keg/xlarge_media_httpfarm5static_mevIk.png'<br>data-xlarge-width=''<br>data-xlarge-height=''<br>data-orig-src='https://phaven-prod.s3.amazonaws.com/files/image_part/asset/607361/CausfGVcU2tskB-TR5b8CMm8Keg/media_httpfarm5static_mevIk.png'<br>data-orig-width='1024'<br>data-orig-height='768'<br>data-posthaven-id='607361'/><br>&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="posthaven-gallery-cdr"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br></p><p></p>As you can see, there are three primary concerns you must balance when choosing a data management system: consistency, availability, and partition tolerance.<br><ul><br><li><br><strong>Consistency</strong> means that each client always has the same view of the data. </li><br><li><br><strong>Availability</strong> means that all clients can always read and write.</li><br><li><br><strong>Partition tolerance</strong> means that the system works well across physical network partitions.</li><br></ul><p>According to the <a href="http://www.julianbrowne.com/article/viewer/brewers-cap-theorem" target="_blank">CAP Theorem</a>, you can only pick two. So how does this all relate to NoSQL systems?</p><p></p>One of the primary goals of NoSQL systems is to bolster horizontal scalability. To scale horizontally, you need strong network partition tolerance which requires giving up either consistency or availability. NoSQL systems typically accomplish this by relaxing relational abilities and/or loosening transactional semantics.<p></p> In addition to CAP configurations, another significant way data management systems vary is by the data model they use: relational, key-value, column-oriented, or document-oriented (there are <a href="http://nosql-database.org/" target="_blank">others</a>, but these are the main ones).<br><ul><br><li><br><strong>Relational</strong> systems are the databases we've been using for a while now. RDBMSs and systems that support ACIDity and joins are considered relational.</li><br><li> <strong>Key-value</strong> systems basically support get, put, and delete operations based on a primary key.</li><br><li> <strong>Column-oriented</strong> systems still use tables but have no joins (joins must be handled within your application). Obviously, they store data by column as opposed to traditional row-oriented databases. This makes aggregations much easier.</li><br><li><br><strong>Document-oriented</strong> systems store structured "documents" such as JSON or XML but have no joins (joins must be handled within your application). It's very easy to map data from object-oriented software to these systems.</li><br></ul><p>Now for the particulars of each CAP configuration and the systems that use each configuration:</p><p></p><strong>Consistent, Available </strong><strong>(CA) </strong><strong>Systems</strong> have trouble with partitions and typically deal with it with replication. Examples of CA systems include:<br><ul><br><li>Traditional RDBMSs like Postgres, MySQL, etc (relational)</li><br><li>Vertica (column-oriented)</li><br><li>Aster Data (relational)</li><br><li> Greenplum (relational)</li><br></ul><p><strong>Consistent, Partition-Tolerant </strong><strong>(CP) </strong><strong>Systems</strong> have trouble with availability while keeping data consistent across partitioned nodes. Examples of CP systems include:</p><br><ul><br><li><br><a href="http://labs.google.com/papers/bigtable.html" target="_blank">BigTable</a> (column-oriented/tabular)</li><br><li> <a href="http://hypertable.org/" target="_blank">Hypertable</a> (column-oriented/tabular)</li><br><li><br><a href="http://hadoop.apache.org/hbase/" target="_blank">HBase</a> (column-oriented/tabular)</li><br><li><br><a href="http://www.mongodb.org/display/DOCS/Home" target="_blank">MongoDB</a> (document-oriented)</li><br><li><br><a href="http://code.google.com/p/terrastore/" target="_blank">Terrastore</a> (document-oriented)</li><br><li><br><a href="http://code.google.com/p/redis/" target="_blank">Redis</a> (key-value)</li><br><li><br><a href="http://code.google.com/p/scalaris/" target="_blank">Scalaris</a> (key-value)</li><br><li><br><a href="http://memcachedb.org/" target="_blank">MemcacheDB</a> (key-value)</li><br><li><br><a href="http://en.wikipedia.org/wiki/Berkeley_DB" target="_blank">Berkeley DB</a> (key-value)</li><br></ul><p><strong> Available, Partition-Tolerant </strong><strong>(AP) </strong><strong>Systems</strong> achieve "eventual consistency" through replication and verification. Examples of AP systems include:</p><br><ul><br><li><br><a href="http://s3.amazonaws.com/AllThingsDistributed/sosp/amazon-dynamo-sosp2007.pdf" target="_blank">Dynamo</a> (key-value)</li><br><li><br><a href="http://project-voldemort.com/" target="_blank">Voldemort</a> (key-value)</li><br><li><br><a href="http://1978th.net/" target="_blank">Tokyo Cabinet</a> (key-value)</li><br><li><br><a href="http://sourceforge.net/projects/kai/" target="_blank">KAI</a> (key-value)</li><br><li><br><a href="http://incubator.apache.org/cassandra/" target="_blank">Cassandra</a> (column-oriented/tabular)</li><br><li><br><a href="http://couchdb.apache.org/" target="_blank">CouchDB</a> (document-oriented)</li><br><li><br><a href="http://aws.amazon.com/simpledb/" target="_blank">SimpleDB</a> (document-oriented)</li><br><li><br><a href="http://riak.basho.com/" target="_blank">Riak</a> (document-oriented)</li><br></ul><p><strong>Self promotion and Credits</strong></p><br><ul><br><li>If you're a developer and looking for a job or if you're hiring developers and these data systems are important to you, consider coming to <a href="http://hirelite.com" target="_blank">Hirelite: Speed Dating for the Hiring Process</a> on Tuesday.</li><br><li>This guide draws heavily from a recent <a href="http://www.meetup.com/nycruby/calendar/12780042/" target="_blank">Ruby</a> meetup (by Matthew Jording and Michael Bryzek) and a recent <a href="http://www.leadit.us/hands-on-tech/MongoDB-High-Performance-SQL-Free-Database" target="_blank">MongoDB</a> presentation (given by Dwight Merriman).</li><br><li>Thanks to <a href="http://twitter.com/DBNess" target="_blank">DBNess</a> and <a href="http://twitter.com/ansonism" target="_blank">ansonism</a> for their help with validating system categorizations.</li><br><li>Thanks to those who helped shape the post after it was written: <a href="http://posterous.com/people/biCDj0Hd8">Stan</a>, <a href="http://twitter.com/dmerr">Dwight</a>, and others who commented here and on this <a href="http://news.ycombinator.com/item?id=1190772">Hacker News thread</a>.</li><br></ul><br></div><p><hr><p>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br>&nbsp;&nbsp;&nbsp;&nbsp;<br> <div style="text-align: center;"><br>&nbsp;&nbsp;&nbsp;&nbsp;<center><font style="font-style: italic;" color="#000080"><font<br>&nbsp;&nbsp;&nbsp;&nbsp;size="+2">Scalable Datastores<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font></font><small><font color="#000080"><font size="+2"><small></small></font></font></small><u><font<br>&nbsp;&nbsp;&nbsp;&nbsp;color="#000080"><font size="+2"><small><a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="../rick/index.html">Rick Cattell</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;</small></font></font></u><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<small><font color="#000080"><font size="+2"><small><small>Last<br>&nbsp;&nbsp;&nbsp;&nbsp;revised 8/20/2013<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</small></small></font></font></small></center><br></div><br><p><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-style: italic;"><span style="font-weight: bold;"></span></span>In<br>recent<br>years,<br>a<br>Number<br>of<br>data<br>storage<br>systems<br>have<br>been<br>developed<br>with<br>excellent<br>Horizontal<br>Scaling<br>properties.&nbsp;<br>Most<br>are<p><p>&nbsp;&nbsp;&nbsp;&nbsp;commonly called "NoSQL" systems.&nbsp; Horizontal scaling allows<br>&nbsp;&nbsp;&nbsp;&nbsp;dozens or hundreds of machines to operate as a single database<br>&nbsp;&nbsp;&nbsp;&nbsp;system, with performance improving approximately linearly with the<br>&nbsp;&nbsp;&nbsp;&nbsp;number of machines. This is interesting because traditional<br>&nbsp;&nbsp;&nbsp;&nbsp;relational database systems failed to scale well when their data<br>&nbsp;&nbsp;&nbsp;&nbsp;is distributed over many servers (with the exception of<br>&nbsp;&nbsp;&nbsp;&nbsp;read-mostly data warehousing).&nbsp; <br><br></p><br><p>Scalable data stores can be categorized into four groups:<br><br></p><br><ul><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><span style="font-style: italic;">Key-value stores</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;including <span style="text-decoration: underline;"><span<br>&nbsp;&nbsp;&nbsp;&nbsp;style="text-decoration: underline;"></span></span><a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://riak.basho.com">Riak</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://cattell.net/datastores/code.google.com/p/redis">Redis</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://project-voldemort.com">Voldemort</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://www.couchbase.com/products-and-services/membase-server">Membase</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;and <a href="http://portal.acm.org/citation.cfm?id=1294281">Dynamo</a>.</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><span style="font-style: italic;">Document stores</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;including <span style="text-decoration: underline;"></span><a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://couchdb.apache.org">CouchDB</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://mongodb.org">MongoDB</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://cattell.net/datastores/code.google.com/terrastore">Terrastore</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;and <a href="http://aws.amazon.com/simpledb/">SimpleDB</a>.</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><span style="font-style: italic;">Extensible record stores</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;including <span style="text-decoration: underline;"></span><a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://labs.google.com/papers/bigtable.html">BigTable</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://hbase.apache.org">HBase</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://hypertable.org">HyperTable</a>, and <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://cassandra.apache.org">Cassandra</a>.</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><span style="font-style: italic;">Scalable RDBMSs</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;including <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href = "http://www.mysql.com/products/database/cluster/" > MySQL<br>&nbsp;&nbsp;&nbsp;&nbsp;Cluster</a>, <a href="http://voltdb.com/">VoltDB</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://www.clustrix.com/">Clustrix</a>, and <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://scaledb.com">ScaleDB</a>.</li><br></ul><br><p>Here is a paper I wrote comparing these systems:<br><br></p><br><p>&nbsp;&nbsp;&nbsp; <a href="Datastores.pdf">Datastore Comparison</a><br><br></p><br><p> This paper was published in <a<br>href = "http://www.sigmod.org/publications/sigmod-record/1012/index.html/?searchterm=cattell" > ACM<p>&nbsp;&nbsp;&nbsp;&nbsp;SIGMOD Record</a> in 2010.&nbsp; Some of the system descriptions<br>&nbsp;&nbsp;&nbsp;&nbsp;are now out of date, so you should check the sources above or <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://cattell.net/consulting/">talk to me</a> to learn<br>&nbsp;&nbsp;&nbsp;&nbsp;what has changed.&nbsp; I also wrote a paper on the 8 most<br>&nbsp;&nbsp;&nbsp;&nbsp;important elements of scalable database systems.&nbsp; This paper<br>&nbsp;&nbsp;&nbsp;&nbsp;is unpublished, but can be viewed here:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp; <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href = "http://cattell.net/datastores/ScalabilityRequirements.html" > requirements<p><p>&nbsp;&nbsp;&nbsp;&nbsp;for Scalability</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;And finally, I wrote a paper with Mike Stonebraker, weighing the<br>&nbsp;&nbsp;&nbsp;&nbsp;important factors in making a datastore scalable:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp; <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://cattell.net/datastores/CACM-Paper.pdf">CACM paper</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;This paper has some discussion of SQL vs NoSQL scalability.&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;It was published in <a href="http://cacm.acm.org/">Communications<br>&nbsp;&nbsp;&nbsp;&nbsp;of the ACM</a> (June 2011).<br><br></p><br><p>Any input on these papers or suggestions on this web page are<br>&nbsp;&nbsp;&nbsp;&nbsp;welcomed.&nbsp; You can contact me at rick(at)cattell.net.&nbsp; <br><br></p><br>If you'd like further reading on scalable SQL and NoSQL datastores,<br>you can click on the links at the top of this page to learn more<br>about specific systems, or the links below for some other general<br>references that I like: <span style="text-decoration: underline;"><br><br></span><br><ul><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><a href="http://www.odbms.org/downloads.aspx#nosql">ODBMS.org</a><br>&nbsp;&nbsp;&nbsp;&nbsp;has various papers and links on NoSQL systems as well as other<br>&nbsp;&nbsp;&nbsp;&nbsp;object stores.</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><a href="http://nosql.mypopescu.com/">NoSQL.mypopescu.com</a><br>&nbsp;&nbsp;&nbsp;&nbsp;is frequently updated with posts, videos, and articles on NoSQL<br>&nbsp;&nbsp;&nbsp;&nbsp;topics and systems.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><a href="http://nosql-database.org/">NoSQL-Database.org</a><br>&nbsp;&nbsp;&nbsp;&nbsp;has lots of good articles, upcoming events, and a complete list<br>&nbsp;&nbsp;&nbsp;&nbsp;of all the systems.</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><a href="http://www.nosqldatabases.com/">NoSQLDatabases.com</a><br>&nbsp;&nbsp;&nbsp;&nbsp;has regular postings, jobs, upcoming events, and links.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><a href="http://highscalability.com/">HighScalability.com</a><br>&nbsp;&nbsp;&nbsp;&nbsp;has good articles on scalability of databases and applications.</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><a<br>href = "http://www.linkedin.com/news?viewArticle=&amp;articleID=323780843&amp;gid=2085042&amp;type=news&amp;item=323780843&amp;articleURL=http://www.nosqldatabases.com/main/2011/1/11/nosql-tapes-now-available.html&amp;urlhash=O4Xp" > Tim<p><p>&nbsp;&nbsp;&nbsp;&nbsp;Anglade 's NoSQL Tapes</a> include great interviews of leading<br>&nbsp;&nbsp;&nbsp;&nbsp;NoSQL players.</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><a href="http://nosqlweekly.com/">NoSQLWeekly.com</a> offers<br>&nbsp;&nbsp;&nbsp;&nbsp;weekly newsletters on NoSQL systems from Rahul Chaudhary.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><a<br>&nbsp;&nbsp;&nbsp;&nbsp;href = "http://doubleclix.wordpress.com/2010/05/29/nosql-bookmarks/" > Krishna<p><p>&nbsp;&nbsp;&nbsp;&nbsp;Sankar 's blog</a> had lots of good NoSQL and cloud computing<br>&nbsp;&nbsp;&nbsp;&nbsp;posts, along with web references.</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><a<br>&nbsp;&nbsp;&nbsp;&nbsp;href = "http://www.rackspacecloud.com/blog/2009/11/09/nosql-ecosystem/" > Jonathan<p><p>&nbsp;&nbsp;&nbsp;&nbsp;Ellis</a> has broad knowledge in NoSQL systems and has good<br>&nbsp;&nbsp;&nbsp;&nbsp;posts on his blog.&nbsp; There are some interesting discussions<br>&nbsp;&nbsp;&nbsp;&nbsp;in the responses as well.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br></ul><br>You will find lots of claims about the performance and scalability<br>of systems out there, but few apples-to-apples comparisons.&nbsp; In<br>my opinion, the best scalability benchmark today is the <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href = "http://labs.yahoo.com/news/yahoo-cloud-serving-benchmark/" > Yahoo<br>&nbsp;&nbsp;&nbsp;&nbsp;Cloud Serving Benchmark</a>.&nbsp;&nbsp; With Roberto Zicari, I<br>interviewed two authors of the Yahoo benchmark paper:<br><br><br><br>&nbsp; <a<br>href = "http://www.odbms.org/blog/2011/05/measuring-the-scalability-of-sql-and-nosql-systems/" > YCSB<p><p>&nbsp;&nbsp;&nbsp;&nbsp;Interview</a><br><br><br><br>i 'm trying to encourage others to run the Yahoo (YCSB) benchmark as<br>well.&nbsp; This will hopefully reduce some of the scalability<br>hype&nbsp; and confusion out there.<br><br><br><p><br><hr><p><div class="third"><br><img href='http://nosql-databases.org/' src='http://nosql-database.org/Resources/Public/Img/nosql-logo.gif'><br>&nbsp;&nbsp;&nbsp;&nbsp;Your Ultimate Guide to the <br/><br>&nbsp;&nbsp;&nbsp;&nbsp;Non-Relational Universe!<br/><br></div><br><div class="third"><br>&nbsp;&nbsp;&nbsp;&nbsp;[including a <strong>historic</strong> <a href="links.html">Archive</a> 2009-2011]<br/><br>&nbsp;&nbsp;&nbsp;&nbsp;<small><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>News Feed </strong>covering some changes<br>&nbsp;&nbsp;&nbsp;&nbsp;</small><br>&nbsp;&nbsp;&nbsp;&nbsp;<small><a href="http://nosql-databases.blogspot.com/">here</a></small><br>&nbsp;&nbsp;&nbsp;&nbsp;<small><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>!</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;</small><br></div><p><br><section><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<dl><br>&nbsp;&nbsp;&nbsp;&nbsp;<dt>NoSQL DEFINITION: </dt><br>&nbsp;&nbsp;&nbsp;&nbsp;Next Generation Databases mostly addressing <u>some of the points</u>: being <strong>non-relational,<br>&nbsp;&nbsp;&nbsp;&nbsp;distributed, open-source</strong> and <strong>horizontally scalable</strong>.<br>&nbsp;&nbsp;&nbsp;&nbsp;</dl><br>&nbsp;&nbsp;&nbsp;&nbsp;The original intention has been <strong>modern web-scale databases</strong>.<br>&nbsp;&nbsp;&nbsp;&nbsp;The movement began early 2009 and<br>&nbsp;&nbsp;&nbsp;&nbsp;is growing rapidly. Often more characteristics apply such as: <strong>schema-free,<br>&nbsp;&nbsp;&nbsp;&nbsp;easy replication support, simple API, eventually consistent</strong> / <strong>BASE</strong> (not ACID), a<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>huge amount of data</strong> and more. So the misleading term <em>"nosql</em>" (the community now<br>&nbsp;&nbsp;&nbsp;&nbsp;translates it mostly with "<strong>not only sql</strong>") should be seen as an alias to something like the<br>&nbsp;&nbsp;&nbsp;&nbsp;definition above.<br>&nbsp;&nbsp;&nbsp;&nbsp;<small> [based on 7 sources, 15 constructive feedback emails (thanks!) and 1 disliking comment<br>&nbsp;&nbsp;&nbsp;&nbsp;. Agree / Disagree? <a href="mailto:edlich@gmail.com">Tell</a> me so! By the<br>&nbsp;&nbsp;&nbsp;&nbsp;way: this is a strong definition and it is out there here since 2009!]</small><br></article><br></section><p><h1>List Of NoSQL Databases <span class="grey">[currently >225]</span></h1><p><p> Core NoSQL Systems: [Mostly originated out of a Web 2.0 need]</p><p><section><br><h2>Wide Column Store / Column Families</h2><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://hadoop.apache.org/">Hadoop / HBase</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java / any writer</strong>, Protocol: <strong>any write call</strong>, Query Method: <strong>MapReduce<br>&nbsp;&nbsp;&nbsp;&nbsp;Java / any exec</strong>, Replication: <strong>HDFS Replication</strong>, Written in: <strong>Java</strong>,<br>Concurrency:&nbsp;&nbsp;&nbsp;&nbsp;Print , Misc:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Links</strong>: 3 Books [<a href="http://www.amazon.com/Hadoop-Action-Chuck-Lam/dp/1935182196/">1</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.amazon.com/Pro-Hadoop-Jason-Venner/dp/1430219424/">2</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.amazon.com/Hadoop-Definitive-Guide-Tom-White/dp/0596521979/">3</a>]<br></article><p>  <article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.mapr.com">MapR</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.hortonworks.com">Hortonworks</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cloudera.com/">Cloudera</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Hadoop Distribution and professional services .<br></article><p><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://cassandra.apache.org/">Cassandra</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;massively scalable, partitioned row store, masterless architecture, linear scale performance, no single points of failure, read/write support across multiple data centers & cloud availability zones. API / Query Method: <strong>CQL and Thrift</strong>, replication: <strong>peer-to-peer</strong>, written in: <strong>Java</strong>, Concurrency: <strong>tunable consistency</strong>, Misc: built-in data compression, MapReduce support, primary/secondary indexes, security features. Links: <a href="http://www.datastax.com/docs">Documentation</a>, <a href="http://planetcassandra.org/">PlanetC*</a>, <a href="http://www.datastax.com/">Company</a>.<br></article><p>  <article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.scylladb.com/">Scylla</a></h3><br>  Cassandra-compatible column store, with consistent low latency and more transactions per second.<br>  Designed with a thread-per-core model to maximize performance on modern multicore hardware.<br>  Predictable scaling. No garbage collection pauses, and faster compaction.<br>  </article><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://hypertable.org/">Hypertable</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Thrift</strong> (Java, PHP, Perl, Python, Ruby, etc.), Protocol: <strong>Thrift</strong>, Query<br>&nbsp;&nbsp;&nbsp;&nbsp;Method: <strong>HQL, native Thrift API</strong>, Replication: <strong>HDFS Replication</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: <strong>MVCC</strong>, Consistency Model: <strong>Fully consistent </strong>Misc: High performance<br>&nbsp;&nbsp;&nbsp;&nbsp;C++ implementation of Google's Bigtable. <a href="http://www.hypertable.com/">&raquo; Commercial support</a><br><br></article><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://accumulo.apache.org/">Accumulo</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Accumulo is based on <strong>BigTable</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;and is built on top of <a href="http://hadoop.apache.org/"><strong>Hadoop</strong></a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://zookeeper.apache.org/"><strong>Zookeeper</strong></a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;and <a href="http://thrift.apache.org/"><strong>Thrift</strong></a>.<br>&nbsp;&nbsp;&nbsp;&nbsp;It features improvements on the BigTable design in the form of <strong>cell-based access control</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;improved <strong>compression</strong>, and a server-side programming mechanism that can modify key/value pairs<br>&nbsp;&nbsp;&nbsp;&nbsp;at various points in the data management process.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://aws.amazon.com/simpledb/">Amazon SimpleDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Misc</strong>: not open source / part of AWS, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://www.apress.com/book/view/1430225335">Book</a> (will be<br>&nbsp;&nbsp;&nbsp;&nbsp;outperformed by DynamoDB!)<br><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.cloudata.org/">Cloudata</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Google 's Big table clone like HBase. <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href = "http://www.readwriteweb.com/hack/2011/02/open-source-bigtable-cloudata.php"<br>&nbsp;&nbsp;&nbsp;&nbsp;>&raquo; Article</a><br></article><p><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://www.monetdb.org/">MonetDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Column Store pioneer since 2002.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.hpccsystems.com/">HPCC</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;from <a href="http://www.lexisnexis.com">LexisNexis</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://www.lexisnexis.com/government/solutions/literature/hpcc-das.pdf">info</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://wikibon.org/blog/lexisnexis-hpcc-takes-on-hadoop-as-battle-for-big-data-supremacy-heats-up/">article</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://flink.apache.org/">Apache Flink</a></h3> (formerly known as <a href="http://stratosphere.eu/">Stratosphere</a>)<br>&nbsp;&nbsp;&nbsp;&nbsp;massively parallel &amp; flexible data analytics platform,<br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java, Scala</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Query Method: <strong>expressive data flows (extended M/R, rich UDFs, iteration support)</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Data Store: <strong>independent</strong> (e.g., HDFS, S3, MongoDB),<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: Java,<br>&nbsp;&nbsp;&nbsp;&nbsp;License: Apache License V2.0,<br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: <strong>good integration with Hadoop stack</strong> (HDFS, YARN), source code on <a href="https://github.com/apache/flink">Github</a><br></article><p><article><br><h3><a href="http://www-01.ibm.com/software/data/informix/">IBM Informix</a></h3><br>horizontally and vertically scalable, relational, partitioned row store, document store API / Query Method: <strong>SQL (native, DRDA, JDBC, ODBC), MongoDB wire listener, mixed mode</strong>,<br>replication: <strong>master / slave, peer-to-peer, sharding, grid operations</strong>,<br>written in: <strong>C</strong>,<br>Concurrency: <strong>row, page, table, db locking</strong>,<br>Misc: ACID, built-in data compression, scheduler, automatic cyclic storage management, extensible, in memory acceleration, native ports from ARM v6 up Links: <a href="http://www-01.ibm.com/support/knowledgecenter/SSGU8G_12.1.0/com.ibm.welcome.doc/welcome.htm">Documentation</a>, <a href="http://www.iiug.com/">IIUG</a>, <a href="http://www.ibm.com/">Company</a>.<br>&nbsp;&nbsp;&nbsp;&nbsp;</article><p><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.splicemachine.com/">Splice Machine</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Splice Machine is an RDBMS built on <a href="http://hadoop.apache.org/">Hadoop</a>, <a href="http://hbase.apache.org/">HBase</a> and <a href="http://db.apache.org/derby/">Derby</a>. Scale real-time applications using commodity hardware without application rewrites,<br>Features: <strong>ACID transactions, ANSI SQL support, ODBC/JDBC, distributed computing</strong><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://financial.mcobject.com/">eXtremeDB Financial Edition</a></h3><br>massively scalable in-memory and persistent storage DBMS for analytics on market data<br>(and other time series data).<br>APIs: <strong>C/C++, Java Native Interface (JNI), C#/.NET), Python, SQL (native, ODBC, JDBC)</strong>,<br>Data layout: <strong>row, columnar, hybrid,</strong><br>Written in: <strong>C, Replication: master/slave, cluster, sharding, </strong><br>Concurrency: <strong>Optimistic (MVCC) and pessimistic (locking)</strong><br></article><p><article><br>  <h3><a href="http://concoursedb.com/">ConcourseDB</a></h3> a distributed self-tuning database with<br>  <a href="http://concoursedb.com/blog/index-all-the-things/">automatic indexing</a>, version control and ACID transactions.<br>  Written In: <strong>Java</strong>. API/Protocol: <strong>Thrift (many languages)</strong>. Concurrency: <strong> serializable<br>  transactions with <a href="http://concoursedb.com/blog/just-in-time-locking/">just-in-time locking</a>.</strong><br>  Misc: uses a <a href="http://concoursedb.com/guide/storage-model/">buffered storage system</a> to commit all data to disk<br>  immediately while perform rich indexing in the background.<br></article><p><article><br><h3><a href="http://druid.io">Druid</a></h3><br>open-source analytics data store for business intelligence (OLAP) queries on event data.<br>Low latency (real-time) data ingestion, flexible data exploration, fast data aggregation.<br>Scaled to trillions of events & petabytes.<br>Most commonly used to power user-facing analytic applications.<br>API: <strong>JSON over HTTP</strong>, APIs: <strong>Python, R, Javascript, Node, Clojure, Ruby, Typescript + support SQL queries</strong><br>Written in: <strong>Java</strong><br>License: <strong>Apache 2.0</strong><br>Replication: <strong>Master/Slave</strong><br></article><p><article><br><h3><a href="http://getkudu.io/">KUDU</a></h3><br>Apache Kudu (incubating) completes Hadoop's storage layer to enable fast analytics on fast data.<br></article><p><article><br><h3><a href="https://github.com/vroyer/elassandra">Elassandra</a></h3><br>Elassandra is a fork of Elasticsearch modified to run on top of Apache Cassandra in a scalable and resilient peer-to-peer architecture. Elasticsearch code is embedded in Cassanda nodes providing advanced search features on Cassandra tables and Cassandra serve as an Elasticsearch data and configuration store.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="grey">[OpenNeptune, Qbase, KDI]</span><br></article><br></section><p><section><br><h2>Document Store</h2><p><article><br><h3><a href="http://www.elasticsearch.org/">Elastic</a></h3><br>API: <strong>REST and many languages</strong>, Protocol: <strong>REST</strong>, Query Method: <strong>via JSON</strong>, Replication + Sharding: <strong>automatic and configurable</strong>, written in: <strong>Java</strong>,<br>Misc: schema mapping, multi tenancy with arbitrary indexes, <a href="http://www.elasticsearch.com/">&raquo; Company and Support</a>, <a href="https://www.found.no/foundation/elasticsearch-as-nosql/">&raquo; Article</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.arangoDB.com/">ArangoDB</a>, <a href="http://orientdb.com">OrientDB</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://gunDB.io">gunDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(<strong>Doc Store</strong> & GraphDB & Key-Value. More details in Category <a href="#multimodel">Multimodel Databases</a>)<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.mongodb.org/">MongoDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>BSON</strong>, Protocol: C, Query Method: <strong>dynamic object-based language &amp;<br>&nbsp;&nbsp;&nbsp;&nbsp;MapReduce</strong>, Replication: <strong>Master Slave &amp;<br>&nbsp;&nbsp;&nbsp;&nbsp;Auto-Sharding</strong>, Written in: <strong>C++</strong>,Concurrency: <strong>Update in Place</strong>. Misc:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Indexing, GridFS, Freeware + Commercial License</strong> Links:<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.leadit.us/hands-on-tech/MongoDB-High-Performance-SQL-Free-Database">&raquo; Talk</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://www.paperplanes.de/2010/2/25/notes_on_mongodb.html">&raquo; Notes</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.10gen.com/">&raquo; Company</a><br></article><p><article><br><h3><a href="http://cloud.google.com/datastore">Cloud Datastore</a></h3><br>A fully managed Document store with multi-master replication across data centers.<br>Originally part of Google App Engine, it also has REST and gRPC APIs.<br></article><p><article><br><h3><a href="https://azure.microsoft.com/services/documentdb/">Azure DocumentDB</a></h3><br>is a fully managed, globally distributed NoSQL database perfect for the massive scale and low latency<br>needs of modern applications. Guarantees: 99.99% availability, 99% of reads at &lt;10ms and 99% of writes<br>at &lt;15ms. Scale to handle 10s-100s of millions of requests/sec and replicate globally with the click of a button. APIs:<br>.NET, .NET Core, Java, Node.js, Python, REST. Query: SQL. Links:<br><a href="https://azure.microsoft.com/services/documentdb/">&raquo; Service</a>,<br><a href="https://azure.microsoft.com/pricing/details/documentdb/">&raquo; Pricing</a>,<br><a href="https://www.documentdb.com/sql/demo">&raquo; Playground</a>,<br><a href="https://docs.microsoft.com/azure/documentdb/">&raquo; Documentation</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.rethinkdb.com/">RethinkDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>protobuf-based</strong>, Query Method: <strong>unified chainable query language<br>&nbsp;&nbsp;&nbsp;&nbsp;(incl. JOINs, sub-queries, MapReduce, GroupedMapReduce)</strong>; Replication:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Sync and Async Master Slave with per-table acknowledgements</strong>, Sharding:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>guided range-based</strong>, Written in: <strong>C++</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: <strong>MVCC</strong>. Misc: log-structured storage engine with concurrent incremental garbage compactor<br></article><p><article><br><h3><a href="http://www.couchbase.com/">Couchbase Server</a></h3><br><strong>API: Memcached API+protocol </strong>(binary and ASCII) , <strong>most languages</strong>, Protocol:<br><strong>Memcached REST interface for cluster conf + management</strong>,<br>Written in: <strong>C/C++</strong> + <strong>Erlang</strong> (clustering), Replication: <strong>Peer to Peer, fully<br>consistent</strong>, Misc: <strong>Transparent topology changes during operation, provides memcached-compatible<br>caching buckets, commercially supported version available</strong>,<br>Links: <a href="http://wiki.membase.org">&raquo; Wiki</a>,<br><a href="http://www.infoq.com/news/2010/10/membase">&raquo;<br>&nbsp;&nbsp;&nbsp;&nbsp;Article</a><br></article><br><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://couchdb.apache.org/">CouchDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>JSON</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Protocol: <strong>REST</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Query Method: <strong>MapReduceR of JavaScript Funcs</strong>, Replication: <strong>Master Master</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Erlang</strong>, Concurrency: <strong>MVCC</strong>, <strong>Misc</strong>: <br><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Links</strong>:<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://couchdb.apache.org/docs/books.html">&raquo; 3 CouchDB books </a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://tilgovi.github.com/couchdb-lounge/">&raquo; Couch Lounge</a><br>&nbsp;&nbsp;&nbsp;&nbsp;(partitioning / clusering), <a href="http://www.drdobbs.com/java/223100116">&raquo; Dr. Dobbs</a><br></article><p><article><br>  <h3><a href="http://www.torodb.com">ToroDB</a></h3><br>  API: <strong>MongoDB API</strong> and <strong>SQL</strong>,<br>  Protocol: MongoDB Wire Protocol / MongoDB compatible,<br>  Query Method: <strong>dynamic object-based language &amp; SQL</strong>,<br>  Replication: <strong>RDBMS Backends' Replication System &amp;<br>  Support for replication from MongoDB's Replica Set</strong>,<br>  Written in: <strong>Java</strong>,<br>  Concurrency: <strong>MVCC</strong>.<br>  Misc: <strong>Open Source NoSQL and SQL database</strong>.<br>  The agileness of a doc DB with the reliability and the native SQL capabilities of PostgreSQL. Links:<br> <a href="https://www.8kdata.com" target="_blank">&raquo; Company</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.sequoiadb.com/en/index.php?p=index&j=2">SequoiaDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>BSON</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Protocol: <strong>C</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Query Method: <strong>dynamic object-based language</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>Master Slave & Auto-Sharding</strong>,<br>Written in: <strong>C++</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: Indexing, Large Object Store, Transaction, Free + Commercial License,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.bankmark.de/wp-content/uploads/2014/12/bankmark-20141201-WP-NoSQLBenchmark.pdf">Benchmark</a>, <a href="https://github.com/SequoiaDB/SequoiaDB">Code</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.alachisoft.com/nosdb/" target="_blank">NosDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;a 100% native <strong>.NET</strong> Open Source <strong>NoSQL Document Database</strong> (Apache 2.0 License). It also supports <strong>SQL</strong> querying over JSON Documents. Data can also be accessed through <strong>LINQ & ADO.NET</strong>. NosDB also provides strong <strong>server-side and client-side caching</strong> features by integrating NCache.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://github.com/ravendb/ravendb">RavenDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;.Net solution. Provides <strong>HTTP/JSON</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;access. <strong>LINQ</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;queries &amp; <strong>Sharding</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;supported. <a href="http://www.codeproject.com/KB/cs/RavenDBIntro.aspx">&raquo; Misc</a><br></article><p><article><br><h3><a href="http://www.marklogic.com/">MarkLogic Server</a></h3><br>(developer+commercial)<br>API: <strong>JSON, XML, Java</strong><br>Protocols: <strong>HTTP, REST</strong><br>Query Method: <strong>Full Text Search and Structured Query, XPath, XQuery, Range, Geospatial,<br>Bitemporal</strong><br>  Written in: <strong>C++</strong><br>Concurrency: <strong>Shared-nothing cluster, MVCC</strong><br>Misc: Petabyte-scalable and elastic (on premise in the cloud), ACID + XA transactions,<br>auto-sharding, failover, master slave replication (clusters), replication (within cluster), high<br>availablity, disaster recovery, full and incremental backups,<br>government grade security at the doc level, developer community <a href="http://developer.marklogic.com/">&raquo;</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.clusterpoint.com/">Clusterpoint Server</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(freeware+commercial) API: <strong>XML, PHP, Java, .NET</strong> Protocols: <strong>HTTP, REST, native<br>&nbsp;&nbsp;&nbsp;&nbsp;TCP/IP</strong> Query Method: <strong>full text search, XML, range and Xpath queries</strong>; Written in<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>C++</strong> Concurrency: <strong>ACID-compliant, transactional, multi-master cluster</strong> Misc:<br>&nbsp;&nbsp;&nbsp;&nbsp;Petabyte-scalable document store and full text search engine. Information ranking. Replication. Cloudable.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://github.com/konsultaner/jsonOdm">JSON ODM</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Object Document Mapper for JSON-Documents written in pure <strong>JavaScript</strong>.<br>&nbsp;&nbsp;&nbsp;&nbsp;It queries the collections with a <strong>gremlin</strong>-like DSL that uses <strong>MongoDB's API</strong> methods, but also provides joining.<br>&nbsp;&nbsp;&nbsp;&nbsp;The collections extend the native array objects, which gives the overall ODM a good performance. Queries 500.000 elements in less then a second.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://github.com/louischatriot/nedb">NeDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;NoSQL database for Node.js in pure <strong>javascript</strong>. It implements the most commonly used subset of <strong>MongoDB's API</strong> and is quite <strong>fast</strong> (about 25,000 reads/s on a 10,000 documents collection with indexing).<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://code.google.com/p/terrastore/">Terrastore</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java &amp; http</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Protocol: <strong>http</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Language: <strong>Java</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Querying: <strong>Range queries, Predicates</strong>, Replication: <strong>Partitioned with consistent<br>&nbsp;&nbsp;&nbsp;&nbsp;hashing</strong>, Consistency: <strong>Per-record<br>&nbsp;&nbsp;&nbsp;&nbsp;strict consistency</strong>, Misc: Based on Terracotta<br></article><p><article><br><h3><a href="http://www.amisalabs.com/">AmisaDB:</a></h3><br>Architected to unify the best of search engine, NoSQL and NewSQL DB technologies. API: REST and many languages. Query method: <strong>SQL</strong>. Written in <strong>C++</strong>. Concurrency: <strong>MVCC</strong>. Misc: <strong>ACID</strong> transactions, data distribution via <strong>consistent hashing</strong>, <strong>static and dynamic schema</strong> support, <strong>in-memory</strong> processing. Freeware + Commercial License<br></article><p><article><br><h3><a href="http://www.oberasoftware.com/">JasDB</a></h3><br>Lightweight open source document database written in Java for high performance, runs in-memory, supports Android.<br>API: <strong>JSON, Java</strong><br>Query Method: <strong>REST OData Style Query language, Java fluent Query API</strong><br>Concurrency: <strong>Atomic document writes</strong><br>Indexes: <strong>eventually consistent indexes</strong><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.codeproject.com/Articles/375413/RaptorDB-the-Document-Store">RaptorDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;JSON based, Document store database with compiled <strong>.net map functions</strong> and automatic hybrid<br>&nbsp;&nbsp;&nbsp;&nbsp;bitmap indexing and <strong>LINQ query filters</strong><br></article><p><article><br><h3><a href="http://djondb.com">djondb</a></h3><br>djonDB API: <strong>BSON</strong>, Protocol: <strong>C++</strong>,<br>Query Method: <strong>dynamic queries and map/reduce</strong>, Drivers:<br><strong>Java, C++, PHP</strong> Misc: ACID compliant, Full shell console over google v8 engine, djondb<br>&nbsp;&nbsp;&nbsp;&nbsp;requirements are submited by users, not market. License: GPL and commercial<br></article><p><article><br>  <h3><a href="http://ejdb.org/">EJDB</a></h3><br>  Embedded JSON database engine based on tokyocabinet.<br>  API: <strong>C/C++, C# (.Net, Mono), Lua, Ruby, Python, Node.js binding</strong>,<br>  Protocol: <strong>Native</strong>,<br>  Written in: <strong>C</strong>,<br>  Query language: <strong>mongodb-like dynamic queries</strong>,<br>  Concurrency: <strong>RW locking, transactional</strong> ,<br>  Misc: <strong>Indexing, collection level rw locking, collection level transactions, collection joins.</strong>,<br>  License: <strong>LGPL</strong><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.densodb.net/">densodb</a></h3><br>DensoDB is a new NoSQL document database. Written for .Net environment in c# language.<br>Its simple, fast and reliable. <a href="https://github.com/teamdev/densodb">Source</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.sisodb.com/">SisoDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;A Document Store on top of SQL-Server.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://pagenotes.com/wordpress/2011/12/08/sdb/">SDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;For small online databases, PHP / JSON interface, implemented in PHP.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://github.com/petersirka/nosql">NoSQL embedded db</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Node.js asynchronous NoSQL embedded  database for small websites or projects. Database supports: insert, update, remove, drop and supports views (create, drop, read). Written in JavaScript, no dependencies, implements small concurrency model.<br></article><p><article class="grey"><br>&nbsp;&nbsp;&nbsp;&nbsp;[CloudKit, Perservere,<a href="http://jackrabbit.apache.org/">Jackrabbit</a>]<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://code.google.com/p/thrudb/">ThruDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(please help provide more facts!) Uses Apache <a href="http://incubator.apache.org/thrift/">Thrift</a><br>&nbsp;&nbsp;&nbsp;&nbsp;to integrate multiple backend databases as BerkeleyDB, Disk, MySQL, S3.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.iboxdb.com">iBoxDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Transactional embedded database, it can embed into mobile, desktop and web applications,<br>&nbsp;&nbsp;&nbsp;&nbsp;supports on-disk and in-memory storages. API: <strong>Java,C# (Android, Mono, Xamarin, Unity3D)</strong>.<br>&nbsp;&nbsp;&nbsp;&nbsp;Query Method: <strong>SQL-like</strong> and <strong>KeyValue</strong>. Written In: <strong>Java, C#</strong>. Replication: <strong>MasterSlave, MasterMaster</strong>.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.bergDB.com">BergDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java/.NET</strong>.<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Java</strong>. Replication: <strong>Master/Slave</strong>.<br>&nbsp;&nbsp;&nbsp;&nbsp;License: <strong>AGLP</strong>. Historical queries. ACID. Schemaless.<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: <strong>STM and persistent data structure</strong>.<br>Append-only storage. Encrypted storage. Flexible durability control.<br>Secondary & composite indexes. Transparently serializes Java/.NET objects.<br></article><p>  <article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://github.com/anywhichway/reasondb">ReasonDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;100% JavaScript automatically synchronizing multi-model database with a SQL like syntax (JOQULAR) and swapable persistence stores. It supports joins, nested matches, projections or live object result sets, asynchronous cursors, streaming analytics, 18 built-in predicates, in-line predicates, predicate extensibility, indexable computed values, fully indexed Dates and Arrays, built in statistical sampling. Persistence engines include files, Redis, LocalStorage, block storage, and more.<br>  </article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://cloudant.com">IBM Cloudant</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Cloud based, open-source, zero-config. Based on CouchDB and BigCouch.<br></article><p></section><p><section><br><h2>Key Value / Tuple Store</h2><br><article><br><h3><a href="http://aws.amazon.com/dynamodb/" target="_blank">DynamoDB</a></h3><br>  Automatic ultra scalable NoSQL DB based on fast SSDs. Multiple Availability Zones. Elastic MapReduce Integration. Backup to S3 and much more...<br></article><p><article><br><h3><a href="http://msdn.microsoft.com/en-us/library/dd179423.aspx" target="_blank">Azure Table Storage</a></h3><br>Collections of free form entities (row key, partition key, timestamp). Blob and Queue Storage available, 3 times<br>redundant. Accessible via REST or ATOM.<br></article><p><article><br><h3><a href="http://basho.com/products/#riak" target="_blank">Riak</a></h3><br>API: <strong>tons of languaes, JSON</strong>,<br>Protocol: <strong>REST</strong>,<br>Query Method: <strong>MapReduce term matching</strong> , Scaling: <strong>Multiple Masters</strong>; Written in:<br><strong>Erlang</strong>,<br>Concurrency: <strong>eventually consistent</strong> (stronger then MVCC via Vector Clocks)<br></article><p><article><br><h3><a href="http://redis.io" target="_blank">Redis</a></h3><br>API:<br><strong>Tons of languages</strong>,<br>Written in: <strong>C</strong>,<br>Concurrency: <strong>in memory</strong><br>and saves asynchronous disk after a defined time. Append only mode<br>available. Different kinds of fsync policies. Replication: <strong>Master / Slave</strong>,<br>Misc: <strong>also lists, sets, sorted sets, hashes, queues</strong>. Cheat-Sheet:<br><a href="http://masonoise.files.wordpress.com/2010/03/redis-cheatsheet-v1.pdf">&raquo;</a>, great slides<br><a href="http://blog.simonwillison.net/post/57956858672/redis">&raquo;</a> Admin UI<br><a href="http://www.servicestack.net/mythz_blog/?p=381">&raquo;</a> From the Ground up<br><a href="http://blog.mjrusso.com/2010/10/17/redis-from-the-ground-up.html">&raquo;</a><br></article><p><article><br><h3><a href="http://www.aerospike.com/" target="_blank">Aerospike</a></h3><br>Fast and web-scale database. RAM or SSD. Predictable performance; achieves 2.5 M TPS (reads and<br>writes), 99% under 1 ms. Tunable consistency. Replicated, zero configuration, zero downtime,<br>auto-clustering, rolling upgrades, Cross Datacenter Replication (XDR). Written in: C. APIs: C, C#,<br>Erlang , Go, java, Libevent, node, Perl, PHP, Python, Ruby.Links:<br><a href="http://www.aerospike.com/community" target="_blank">Community</a>,<br><a href="http://www.aerospike.com/develop" target="_blank">Development</a>,<br><a href="http://www.slideshare.net/AerospikeDB/flash-economics-and-lessons-learned-from-operating-low-latency-platforms-at-high-throughput-with-aerospike-nosql" target="_blank">Slides</a>,<br><a href="http://www.intel.com/content/dam/www/public/us/en/documents/solution-briefs/xeon-e5-v3-ssd-aerospike-nosql-brief.pdf" target="_blank">2.5M TPS on 1 node at Intel</a>,<br><a href="http://highscalability.com/blog/2014/8/18/1-aerospike-server-x-1-amazon-ec2-instance-1-million-tps-for.html" target="_blank">1M TPS on AmazonWS</a>,<br><a href="https://communities.intel.com/community/itpeernetwork/blog/2015/02/17/reaching-one-million-database-transactions-per-second-aerospike-intel-ssd" target="_blank">1M TPS w/ SSDs on 1 Server</a>,<br><a href="http://highscalability.com/blog/2015/3/17/in-memory-computing-at-aerospike-scale-when-to-choose-and-ho.html" target="_blank">Combating Memory Fragmentation</a><br></article><p><p><article><br><h3><a href="http://code.google.com/p/leveldb/" target="_blank">LevelDB</a></h3><br><strong>Fast</strong><br>&amp; Batch updates. DB from <strong>Google</strong>.<br>Written in C++.<br>Blog <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://google-opensource.blogspot.com/2011/07/leveldb-fast-persistent-key-value-store.html">&raquo;</a>,<br>hot Benchmark <a href="http://leveldb.googlecode.com/svn/trunk/doc/benchmark.html">&raquo;</a>, Article <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://www.golem.de/1107/85298.html">&raquo;</a><br>(in German). Java <a href="https://github.com/fusesource/leveldbjni">access</a>. C# (for Universal Windows Platform) <a href="https://github.com/maxpert/LevelDBWinRT">access</a>.<br></article><p><article><br><h3><a href="http://rocksdb.org" target="_blank">RocksDB</a></h3><br>API: <strong>C++</strong>. Written in C++.<br>Facebook's improvements to Google's LevelDB to speed throughput<br>for datasets larger than RAM. Embedded solution.<br></article><p><article><br><h3><a href="http://www.oracle.com/technetwork/database/database-technologies/berkeleydb/overview/index.html" target="_blank">Berkeley DB</a></h3><br>API: <strong>Many languages</strong>, Written in: <strong>C</strong>, Replication: <strong>Master / Slave</strong>,<br>Concurrency: <strong>MVCC</strong>,<br>License: <strong>Sleepycat</strong>,<br><a href="http://www.oracle.com/technetwork/database/berkeleydb/overview/index-093405.html">Berkeley DB Java<br>&nbsp;&nbsp;&nbsp;&nbsp;Edition</a>: API: <strong>Java</strong>, Written in: <strong>Java</strong>,<br>Replication: <strong>Master / Slave</strong>,<br>Concurrency: <strong>serializable transaction isolation</strong>, License: <strong>Sleepycat</strong><br></article><p><article><br><h3><a href="http://www.oracle.com/technetwork/database/database-technologies/nosqldb/overview/index.html" target="_blank">Oracle NOSQL Database</a></h3><br>Oracle NoSQL Database is a distributed key-value database. It is designed to provide highly reliable, scalable and available data storage across a configurable set of systems that function as storage nodes.<br>NoSQL and the Enterprise Data is stored as key-value pairs, which are written to particular storage node(s), based on the hashed value of the primary key. Storage nodes are replicated to ensure high availability, rapid failover in the event of  a node failure and optimal load balancing of queries. API: Java/C.<br></article><p><article><br><h3><a href="http://www.geniedb.com/" target="_blank">GenieDB</a></h3><br>Immediate consistency sharded KV store with an eventually consistent AP<br>store bringing eventual consistency issues down to the<br>theoretical minimum. It features efficient record coalescing.<br>GenieDB speaks SQL and co-exists / do intertable<br>joins with<br>SQL RDBMs.<br></article><p><br><article><br><h3><a href="http://www.iqlect.com/" target="_blank">BangDB</a></h3><br>API: <strong>Get,Put,Delete</strong>,<br>Protocol: <strong>Native, HTTP,</strong><br>Flavor: <strong>Embedded, Network, Elastic Cache</strong>, Replication: <strong>P2P based Network Overlay</strong>,<br>Written in: <strong>C++</strong>, Concurrency:<br>Print ,<br>Misc: <span<br>&nbsp;&nbsp;&nbsp;&nbsp;style="font-weight: bold;">robust, crash proof, Elastic, throw machines to scale linearly, Btree/Ehash</span><br></article><p><article><br><h3><a href="http://sourceforge.net/projects/chordless/" target="_blank">Chordless</a></h3><br>API: <strong>Java &amp; simple RPC to vals</strong>, Protocol: <strong>internal</strong>, Query Method: <strong>M/R<br>inside value objects</strong>, Scaling: <strong>every node is master for its slice of namespace</strong>, Written<br>in: <strong>Java</strong>, Concurrency: <strong>serializable transaction isolation</strong>,<br></article><p><article><br><h3><a href="http://code.google.com/p/scalaris/" target="_blank"> Scalaris</a></h3><br>(please help provide more facts!) Written in: <strong>Erlang</strong>, Replication: <strong>Strong consistency over<br>replicas</strong>, Concurrency: <strong>non blocking Paxos</strong>.<br></article><p><article><br><h3><a href="http://fallabs.com/tokyocabinet/" target="_blank">Tokyo Cabinet / Tyrant</a></h3><br><strong>Links</strong>: nice talk<br><a href="http://www.infoq.com/presentations/grigorik-tokyo-cabinet-recipes">&raquo;</a>, slides<br><a href="http://www.scribd.com/doc/12016121/Tokyo-Cabinet-and-Tokyo-Tyrant-Presentation">&raquo;</a>, Misc:<br><strong>Kyoto</strong> Cabinet <a href="http://fallabs.com/kyotocabinet/">&raquo;</a><br></article><p><article><br><h3><a href="http://scalien.com/" target="_blank">Scalien</a></h3><br>API / Protocol: <strong>http</strong><br>(text, html, JSON)<strong>, C, C++, Python</strong>, Java, Ruby, PHP,Perl. Concurrency:<br><strong>Paxos</strong>.<br></article><p><article><br><h3><a href="http://project-voldemort.com/" target="_blank">Voldemort</a></h3><br>Open-Source implementation of Amazons Dynamo Key-Value Store.<br></article><p><article><br><h3><a href="http://wiki.github.com/cliffmoon/dynomite/dynomite-framework" target="_blank">Dynomite</a></h3><br>Open-Source<br>implementation of Amazons Dynamo Key-Value Store. written in Erlang.<br>With "data partitioning, versioning, and read repair, and user-provided"<br>storage engines provide persistence and query processing".<br></article><p><article><br><h3><a href="http://sourceforge.net/projects/kai/" target="_blank">KAI</a></h3><br>Open Source Amazon Dnamo implementation, Misc: <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://www.slideshare.net/takemaru/kai-an-open-source-implementation-of-amazons-dynamo-472179">slides</a><p></article><br><article><br><h3><a href="http://memcachedb.org/" target="_blank">MemcacheDB</a></h3><br>API: <strong>Memcache protocol</strong><br>(get, set, add, replace, etc.), Written in: <strong>C</strong>, Data<br>Model: <strong>Blob</strong>,<br>Misc: Is Memcached writing to BerkleyDB.<br></article><p><article><br><h3><a href="http://www.faircom.com/nosql" target="_blank">Faircom C-Tree</a></h3><br>API: <strong>C, C++, C#, Java, PHP, Perl</strong>, Written in: <strong>C,C++</strong>. Misc:<br><strong>Transaction logging. Client/server. Embedded. SQL wrapper</strong> (not core). Been<br>around since 1979.<br><br></article><p><article><br><h3><a href="http://www.sqlite.org/src4/artifact/41b08c1d31c156d3916558aad89b7e7ae8a381c5" target="_blank">LSM</a></h3><br>Key-Value database that was written as part of SQLite4, They claim it is faster then LevelDB.  Instead of supporting custom comparators, they have a recommended data encoding for keys that allows various data types to be sorted.<br></article><p><article><br><h3><a href="http://www.kitarodb.com/" target="_blank">KitaroDB</a></h3>:<br>A fast, efficient on-disk data store for <strong>Windows Phone 8, Windows RT, Win32 (x86 & x64)</strong> and <strong>.NET</strong>. Provides for key-value and multiple segmented key access. APIs for <strong>C#, VB, C++, C</strong> and <strong>HTML5/JavaScript</strong>. Written in <strong>pure C</strong> for high performance and low footprint. Supports async and synchronous operations with 2GB max record size.<br></article><p><article><h3><a href="http://upscaledb.com/" target="_blank">upscaledb</a></h3>:<br>(embedded solution) API: <strong>C, C++, .NET, Java, Erlang.</strong><br>Written in <strong>C,C++</strong>. Fast key/value store with a<br>parameterized B+-tree. Keys are "typed" (i.e. 32bit integers, floats,<br>variable length or fixed length binary data). Has built-in analytical<br>functions like SUM, AVERAGE etc.<br></article><p><article><h3><a href="http://stsdb.com/" target="_blank">STSdb</a></h3><br>API: <strong>C#</strong>, Written in <strong>C#</strong>, embedded solution, generic XTable&lt;TKey,TRecord&gt;<br>implementation,<br>ACID transactions, snapshots, table versions, shared records, vertical data compression, custom compression,<br>composite &amp; custom primary<br>keys, available backend file system layer, works over multiple volumes, petabyte scalability, LINQ.<br></article><p><article><h3><a href="https://github.com/mailru/tarantool" target="_blank">Tarantool/Box</a></h3><br>API: <strong>C, Perl, PHP, Python, Java and Ruby</strong>. Written in: <strong>Objective<br>&nbsp;&nbsp;&nbsp;&nbsp;C</strong><br>,Protocol: <strong>asynchronous binary, memcached, text (Lua console)</strong>. Data model:<br><strong>collections of dimensionless tuples, indexed using primary + secondary keys</strong>.<br>Concurrency: <strong>lock-free in memory, consistent with disk (write ahead log).</strong><br>Replication: <strong>master/slave, configurable</strong>.<br>Other: <strong>call Lua stored procedures.</strong><br></article><p><article><h3><a href="https://github.com/OpenHFT/Chronicle-Map" target="_blank">Chronicle Map</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;In-memory (opt. persistence via mmap), highly concurrent, low-latency key-value store.<br>API: <strong>Java</strong>.<br>Written in: <strong>Java</strong>.<br>Protocol: in-process Java, remote via<br><a href="http://chronicle.software/products/chronicle-engine/" target="_blank">Chronicle Engine</a> + Wire:<br>binary, text, Java, C# bindnings.<br>Concurrency: in-memory lock striping, read-write locks.<br>Replication: <strong>multi-master, eventually consistent</strong>.<br></article><p><article><h3><a href="http://code.google.com/p/maxtable/" target="_blank">Maxtable</a></h3><br>API: <strong>C</strong>, Query Method: <strong>MQL, native API</strong>, Replication:<br><strong>DFS Replication</strong>, Consistency: <strong>strict consistency</strong> Written<br>in: <strong>C</strong>.<br></article><p><article><br><h3><a href="https://www.quasardb.net/" target="_blank">quasardb</a></h3><br> very high-performance associative database. Highly scalable. API: <strong>C, C++, Java, Python and (limited) RESTful</strong> Protocol: <strong>binary</strong> Query method: <strong>key-value, iteration,</strong> Replication: <strong>Distributed</strong>, Written in: <strong>C++ 11/Assembly</strong>, Concurrency: <strong>ACID</strong>,  Misc: <strong>built-in data compression, native support for FreeBSD, Linux and Windows</strong>. License: <strong>Commercial</strong>.<br></article><p><article><h3><a href="http://github.com/jedisct1/Pincaster" target="_blank">Pincaster</a></h3><br>For geolocalized apps. Concurrency: <strong>in-memory with asynchronous disk writes</strong>.<br>API: <strong>HTTP/JSON</strong>. Written in: <strong>C</strong>.<br>License: <strong>BSD</strong>.<br></article><p><article><h3><a href="http://www.codeproject.com/KB/database/RaptorDB.aspx" target="_blank">RaptorDB</a></h3><br>A pure key value store with optimized b+tree and murmur<br>hashing. (In the near future it will be a JSON document database much like<br>mongodb and couchdb.)<br></article><p><article><h3><a href="https://ssl.tibcommunity.com/blogs/activespaces" target="_blank">TIBCO Active Spaces</a></h3><br>peer-to-peer distributed in-memory (with persistence) datagrid that<br>implements and expands on the concept of the Tuple Space. Has SQL<br>Queries and ACID (=&gt; NewSQL).<br></article><p><article><h3><a href="http://www.allegro-c.de/" target="_blank">allegro-C</a></h3><br>Key-Value concept. Variable number of keys per record. Multiple key<br>values, Hierarchic records. Relationships. Diff. record types in same<br>DB. Indexing: B*-Tree. All aspects configurable. Full scripting<br>language. Multi-user ACID. Web interfaces (PHP, Perl, ActionScript)<br>plus Windows client.<br></article><p><article><h3><a href="https://github.com/shuttler/nessDB" target="_blank">nessDB</a></h3><br>A fast key-value Database (using LSM-Tree storage engine), API: <strong>Redis protocol</strong><br>(SET,MSET,GET,MGET,DEL etc.), Written in: <strong>ANSI C</strong><br></article><p><article><h3><a href="http://hyperdex.org/" target="_blank">HyperDex</a></h3><br>Distributed searchable key-value store. Fast (latency &amp;<br>throughput), scalable, consistent, fault tolerance, using hyperscpace<br>hashing. APIs for C, C++ and Python.<br></article><p><article><h3><a href="https://github.com/simonhf/sharedhashfile" target="_blank">SharedHashFile</a></h3><br>Fast, open source, shared memory (using memory mapped files e.g. in /dev/shm or on SSD), multi process, hash table, e.g. on an 8 core i7-3720QM CPU @ 2.60GHz using /dev/shm, 8 processes combined have a 12.2 million / 2.5 to 5.9 million TPS read/write using small binary keys to a hash filecontaining 50 million keys. Uses sharding internally to mitigate lock contention. Written in <strong>C</strong>.<br></article><p><article><br><h3><a href="http://symas.com/mdb/" target="_blank">Symas LMDB</a></h3><br>Ultra-fast, ultra-compact key-value embedded data store developed by Symas for the OpenLDAP Project.<br>It uses memory-mapped files, so it has the read performance of a pure in-memory database while still offering the persistence of standard disk-based databases, and is only limited to the size of the virtual address space, (it is not limited to the size of physical RAM)<br></article><p><article><br><h3><a href="http://sphia.org" target="_blank">Sophia</a></h3><br>Sophia is a modern embeddable key-value database designed for a high load environment. It has unique architecture that was created as a result of research and rethinking of primary algorithmical constraints, associated with a getting popular Log-file based data structures, such as LSM-tree. Implemented as a small C-written, BSD-licensed library.<br></article><p><article><br><h3><a href="http://www.alachisoft.com/ncache/" target="_blank">NCache</a></h3><br>.NET Open Source Distributed Cache. Written in C#. API .NET & Java. Query Parallel SQL Query, LINQ & Tags. Misc: Linear Scalability, High Availability, WAN Replication, GUI based Administration & Monitoring Tools, Messaging, Runtime Data Sharing, Cache & Item Level Events, Continuous Query & Custom Events, DB Dependencies & Expirations<br></article><p><article><br><h3><a href="http://www.alachisoft.com/tayzgrid/" target="_blank">TayzGrid</a></h3><br>Open Source In-Memory JCache compliant Data Grid. Written in Java. API Java, JCache JSR 107 & .NET. Query SQL & DB Synchronization. Misc: Linear Scalability, High Availability, WAN Replication, GUI based Administration & Monitoring Tools, Distributed Messaging, MapReduce, Entry Processor and Aggregator<br></article><p><article><br><h3><a href="http://pythonhosted.org/pickleDB/" target="_blank">PickleDB</a></h3><br>Redis inspired K/V store for Python object serialization.<br></article><p><article><h3><a href="http://www.erlang.org/doc/apps/mnesia/index.html" target="_blank">Mnesia</a></h3><br>(ErlangDB <a href="http://www.infoq.com/news/2007/08/mnesia">&raquo;</a>)<br></article><p><article><h3><a href="http://opensource.plurk.com/LightCloud/" target="_blank">LightCloud</a></h3><br>(based on Tokyo Tyrant)<br></article><p><article><h3><a href="http://hibari.sourceforge.net/" target="_blank">Hibari</a></h3><br>Hibari is a highly available, strongly consistent, durable, distributed<br>key-value data store<br></article><p><article><br><h3><a href="http://highlandsun.com/hyc/mdb/" target="_blank">OpenLDAP</a></h3><br>Key-value store, B+tree. Lightning fast reads+fast bulk loads.<br>Memory-mapped files for persistent storage with all the speed of an in-memory<br>database. No tuning conf required. Full ACID support.<br>MVCC, readers run lockless. Tiny code, written in C, compiles to under 32KB of<br>x86-64 object code. Modeled after the BerkeleyDB API for easy migration from<br>Berkeley-based code. Benchmarks against LevelDB, Kyoto Cabinet, SQLite3, and<br>BerkeleyDB are available, plus full paper and presentation slides.<br></article><p><article><br><h3><a href="http://genomu.com/" target="_blank">Genomu</a></h3><br>High availability, concurrency-oriented event-based K/V database with transactions and<br>causal consistency. Protocol: <strong>MsgPack</strong>, API: <strong>Erlang, Elixir, Node.js</strong>.<br>Written in: <a href="http://elixir-lang.org">Elixir</a>, <a href="https://github.com/genomu/genomu">Github-Repo</a>.<br></article><p><article><br><h3><a href="https://github.com/mchidk/BinaryRage" target="_blank">BinaryRage</a></h3><br> BinaryRage is designed to be a lightweight ultra fast key/value store for .NET with no dependencies. Tested with more than 200,000 complex objects written to disk per second on a crappy laptop :-) No configuration, no strange driver/connector, no server, no setup - simply reference the dll and start using it in less than a minute.<br></article><p><article><br><h3><a href="http://www.ioremap.net/projects/elliptics/" target="_blank">Elliptics</a></h3><br>Github Page <a href="https://github.com/reverbrain/elliptics">&raquo;</a><br></article><p><article><br><h3><a href="http://dbreeze.codeplex.com" target="_blank">DBreeze</a></h3><br>Professional, open-source, NoSql (embedded Key/Value storage), transactional, ACID-compliant, multi-threaded, object database management system for .NET 3.0> MONO. Written in C#.<br></article><p><article><br><h3><a href="http://https://github.com/Treode/store" target="_blank">TreodeDB</a></h3><br>API: <strong>Scala</strong>. Written in Scala.<br>Replication:<strong> Replicas vote on writes and reads</strong>.<br>Sharding: <strong>Hashes keys onto array of replica cohorts.</strong><br>Concurrency:<strong> Optimistic + Multiversion Concurrency Control.<br>Provides multirow atomic writes. Exposes optimistic concurrency through API<br>to support HTTP Etags.</strong><br>Embedded solution.<br></article><p><article><br><h3><a href="https://github.com/boltdb/bolt" target="_blank">BoltDB</a></h3><br>Key/Value DB written in Go.<br></article><p><article><br><h3><a href="http://serenitydb.org" target="_blank">Serenety</a></h3><br>Serenity database implements basic Redis commands and extends them with support of Consistent<br>Cursors, ACID transactions, Stored procedures, etc. The database is designed to store data bigger<br>then available RAM.<br></article><p><article><br><h3><a href="http://cachelot.io" target="_blank">Cachelot</a></h3><br>API: <strong>Memcached</strong>. Written in <strong>C++</strong>.<br>In-memory LRU cache with very small memory footprint. Works within fixed amount of memory.<br>Cachelot has a C++ cache library and stand-alone server on top of it.<br></article><p><h3><a href="https://www.npmjs.com/package/filejson" target="_blank">filejson</a></h3><br>Use a JSON encoded file to automatically save a JavaScript value to disk whenever that value changes. A value can be a Javascript: string, number, boolean, null, object, or an array. The value can be structured in an array or an object to allow for more complex data stores. These structures can also be nested. As a result, you can use this module as a simple document store for storing semistructured data.<br> </article><p><article class="grey"><br><p><br>&nbsp;&nbsp;&nbsp;&nbsp;[Scality <a href="http://www.scality.com/"<br>&nbsp;&nbsp;&nbsp;&nbsp;>&raquo;</a>, KaTree <a href="http://www.katree.net/">&raquo;</a> TomP2P <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://tomp2p.net/">&raquo;</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Kumofs <a href="http://github.com/etolabo/kumofs">&raquo;</a> , TreapDB<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://code.google.com/p/treapdb/">&raquo;</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Wallet <a href="https://github.com/YaroslavGaponov/wallet">&raquo;</a> ,<br>&nbsp;&nbsp;&nbsp;&nbsp;NoSQLz <a href="http://nosqlz.com">&raquo;</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NMDB, luxio, actord, keyspace, flare, schema-free,<br>&nbsp;&nbsp;&nbsp;&nbsp;RAMCloud]<br></p><p><p><br>&nbsp;&nbsp;&nbsp;&nbsp;[SubRecord,<br>&nbsp;&nbsp;&nbsp;&nbsp;Mo8onDb, Dovetaildb]<br></p><br></article><br></section><p><section><br><h2>Graph Databases</h2><p><article><h3><a href="http://www.neo4j.org/">Neo4J</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>lots of langs</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Protocol: <strong>Java embedded / REST</strong>, Query Method: <strong>SparQL, nativeJavaAPI, JRuby</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>typical MySQL style<br>&nbsp;&nbsp;&nbsp;&nbsp;master/slave</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Java</strong>, Concurrency: <strong>non-block reads, writes locks involved<br>&nbsp;&nbsp;&nbsp;&nbsp;nodes/relationships until commit</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: <strong>ACID</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;possible, Links: Video <a href="http://www.infoq.com/presentations/emil-eifrem-neo4j">&raquo;</a>, Blog <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://blog.neo4j.org/">&raquo;</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.arangoDB.com/">ArangoDB</a>, <a href="http://orientdb.com">OrientDB</a></h3>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://gunDB.io">gunDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(Doc Store & <strong>GraphDB</strong> & Key-Value. More details in Category <a href="#multimodel">Multimodel Databases</a>)<br></article><p><article><h3><a href="http://www.infinitegraph.com/">Infinite Graph</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(by Objectivity) API: <strong>Java</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Protocol: <strong>Direct Language Binding</strong>, Query Method: <strong>Graph Navigation API,</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Predicate Language Qualification</strong>, Written in: <strong>Java (Core C++)</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Data Model:<strong> Labeled Directed Multi Graph</strong>, Concurrency: <strong>Update locking on subgraphs,<br>&nbsp;&nbsp;&nbsp;&nbsp;concurrent non-blocking ingest</strong>, Misc: <strong>Free for Qualified Startups</strong>.<br></article><p>  <article><br><h3><a href="http://www.sparsity-technologies.com/dex.php">Sparksee</a></h3> (former DEX):<br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java, .NET, C++, Python, Objective-C, Blueprints Interface</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Protocol: <strong>Embedded</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Query Method: <strong>as above + Gremlin (via Blueprints)</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>C++</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Data Model: <strong>Labeled Directed Attributed Multigraph</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: <strong>yes</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: ACID possible, Free community edition up to 1 Mio objects,<br>Links:&nbsp;&nbsp;&nbsp;&nbsp;Intro<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.slideshare.net/SparsityTechnologies/sparksee-overview">&raquo;</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Technical Overview<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.slideshare.net/SparsityTechnologies/sparksee-technology-overview">&raquo;</a><br></article><p>  <article><br><h3><a href="https://github.com/thinkaurelius/titan/wiki">TITAN</a></h3>:<br>API: <strong>Java, Blueprints, Gremlin, Python, Clojure</strong> Protocol: <strong>Thrift, RexPro(Binary), Rexster (HTTP/REST)</strong> Query Method: <strong>Gremlin, SPARQL</strong> Written In: <strong>Java</strong> Data Model: <strong>labeled Property Graph, directed, multi-graph adjacency list</strong> Concurrency: <strong>ACID Tunable C</strong> Replication: <strong>Multi-Master</strong> License: <strong>Apache 2</strong> Pluggable backends: <strong>Cassandra, HBase, MapR M7 Tables, BDB, Persistit, Hazelcast</strong> Links: <a href="https://groups.google.com/forum/#!forum/aureliusgraphs">Titan User Group</a><br></article><p><article><h3><a href="http://infogrid.org/">InfoGrid</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java, http/REST</strong>, Protocol: <strong>as API + XPRISO, OpenID, RSS, Atom, JSON, Java<br>&nbsp;&nbsp;&nbsp;&nbsp;embedded</strong>, Query Method: <strong>Web user interface with html, RSS, Atom, JSON output, Java<br>&nbsp;&nbsp;&nbsp;&nbsp;native</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>peer-to-peer</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Java,</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: <strong>concurrent reads, write lock within one MeshBase</strong>, Misc: Presentation <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://www.slideshare.net/infogrid/info-grid-core-ideas">&raquo;</a></article><p>  <article><h3><a href="http://www.kobrix.com/hgdb.jsp">HyperGraphDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;(and Java Langs), Written in:<strong>Java</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Query Method: <strong>Java</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;or P2P, Replication: <strong>P2P</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: <strong>STM</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: Open-Source, Especially for AI and Semantic Web.<br></article><p><article><br><h3><a href="http://graphbase.net/">GraphBase</a></h3><br>Sub-graph-based API, query language, tools & transactions.<br>Embedded Java, remote-proxy Java or REST.<br>Distributed storage & processing. Read/write all Nodes.<br>Permissions & Constraints frameworks. Object storage, vertex-embedded agents.<br>Supports multiple graph models. Written in Java<br></article><p><article><h3><a href="http://research.microsoft.com/en-us/projects/trinity/">Trinity</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>C#</strong>, Protocol: <strong>C# Language Binding</strong>, Query Method:<br><strong>Graph Navigation API</strong>, Replication: <strong>P2P with Master Node</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>C#</strong>, Concurrency: <strong>Yes (Transactional update in online query mode,<br>&nbsp;&nbsp;&nbsp;&nbsp;Non-blocking read<br>&nbsp;&nbsp;&nbsp;&nbsp;in Batch Mode)</strong> Misc: <strong>distributed in-memory storage, parallel graph computation<br>&nbsp;&nbsp;&nbsp;&nbsp;platform (Microsoft Research Project)</strong><br></article><p><article><h3><a href="http://www.franz.com/agraph/">AllegroGraph</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java, Python, Ruby, C#, Perl, Clojure, Lisp</strong> Protocol:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>REST</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Query Method: <strong>SPARQL</strong> and <strong>Prolog</strong>, Libraries:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Social Networking Analytics</strong> &amp; <strong>GeoSpatial</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Common</strong> <strong>Lisp</strong>, Links: Learning Center<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.franz.com/agraph/support/learning/">&raquo;</a>, Videos<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.franz.com/agraph/services/conferences_seminars/">&raquo;</a><br></article><p><article><h3><a href="http://www.brightstardb.com/">BrightstarDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;A native,<strong> .NET</strong>, semantic web database with code first Entity Framework, <strong>LINQ</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;and <strong>OData</strong> support. API: <strong>C#</strong>, Protocol: <strong>SPARQL<br>&nbsp;&nbsp;&nbsp;&nbsp;HTTP, C#</strong>, Query Method: <strong>LINQ, SPARQL</strong>, Written in: <strong>C#</strong><br></article><p><article><h3><a href="http://www.systap.com/bigdata.htm">Bigdata</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java, Jini service discovery</strong>, Concurrency: <strong>very high<br>&nbsp;&nbsp;&nbsp;&nbsp;(MVCC)</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Java</strong>, Misc: GPL + commercial, Data: <strong>RDF data with inference, dynamic<br>&nbsp;&nbsp;&nbsp;&nbsp;key-range sharding of indices</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: Blog <a href="http://www.bigdata.com/blog">&raquo;</a> (parallel database, high-availability architecture,<br>&nbsp;&nbsp;&nbsp;&nbsp;immortal database with historical views)<br></article><p><br><article><h3><a href="http://www.meronymy.com/">Meronymy</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;RDF enterprise database management system. It is cross-platform and can be used with most programming languages.<br>&nbsp;&nbsp;&nbsp;&nbsp;Main features: high performance, guarantee database transactions with ACID, secure with ACL's, SPARQL &amp;<br>&nbsp;&nbsp;&nbsp;&nbsp;SPARUL, ODBC &amp; JDBC drivers, RDF &amp; RDFS.<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://en.wikipedia.org/wiki/Meronymy_SPARQL_Database_Server">&raquo;</a><br></article><p><article> <h3><a href="http://whitedb.org">WhiteDB</a></h3><br>WhiteDB is a fast lightweight graph/N-tuples shared memory database library written in C with focus on speed, portability and ease of use. Both for Linux and Windows, dual licenced with GPLv3 and a free nonrestrictive royalty-free commercial licence.<br></article><p><article><br><h3><a href="http://onyxdevtools.com/">Onyx Database</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Graph/ORM high throughput database built in Java supports embedded, in-memory, and remote.<br>&nbsp;&nbsp;&nbsp;&nbsp;Horizontal scalability through sharding, partitioning, replication, and disaster recovery<br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java, REST via (Objective C, Android, etc...)</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Protocol: <strong>Java embedded/Binary Socket/REST</strong>, Query Method: <strong>Persistence Manager/ORM</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>Multicast</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Java</strong>, Concurrency: <strong>Re-entrant read/write</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: <strong>Free and Open Source.  Commercial licensing available</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.onyxdevtools.com/learn/tutorials/">Tutorials</a><br></article><p><article><h3><a href="http://www.openlinksw.com/">OpenLink Virtuoso</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Hybrid</strong> DBMS covering the following models: <strong>Relational, Document, Graph</strong><br></article><p><article><h3><a href="http://www.dekorte.com/projects/opensource/vertexdb/">VertexDB</a></h3></article><p><article><h3><a href="http://github.com/twitter/flockdb">FlockDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;by twitter <a href="http://gigaom.com/2010/04/12/twitter-open-sources-the-home-of-its-social-graph/">&raquo;</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://github.com/twitter/flockdb">&raquo;</a><br></article><p><br><article><br><h3><a href="http://weaver.systems">weaver</a></h3><br>scalable , fast, Consistent<br></article><p><article><br><h3><a href="http://www.brightstardb.com/">BrightstarDB</a></h3><br></article><br><article><br><h3><a href="http://iog.codeplex.com">Execom IOG</a></h3><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.fallen-8.com/">Fallen 8</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Github <a href="https://github.com/cosh/fallen-8">&raquo;</a><br></article><p><article class="grey"><br>&nbsp;&nbsp;&nbsp;&nbsp;<p>[Java Universal Network / Graph Framework, OpenRDF / Sesame, Filament, OWLim, NetworkX, iGraph, Jena]</p><p>&nbsp;&nbsp;&nbsp;&nbsp;<p>List of SPARQL implementations can be found <a href="http://www.w3.org/wiki/SparqlImplementations">here</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</p><br></article><br></section><p><section><br><h2 id="multimodel">Multimodel Databases</h2><p><article><br><h3><a href="https://www.arangodb.com/">ArangoDB</a></h3><br>API:<br><strong>REST, Graph Blueprints, C#, D, Ruby, Python, Java, PHP, Go, Python, etc. </strong><br>&nbsp;&nbsp;&nbsp;&nbsp;data Model:<br><strong>Documents, Graphs and Key/Values.</strong><br>Protocol:<br><strong>HTTP using JSON.</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Query Method:<br><strong>declarative query language (AQL), query by example.</strong><br>Replication:<br><strong>master-slave (m-m to follow)</strong>, Sharding: <strong>automatic and configurable</strong> Written in: <strong>C/C++/Javascript (V8 integrated),</strong><br>Concurrency:<br><strong>MVCC, tuneable</strong><br>Misc:<br><strong>ACID transactions, microservices framework "Foxx" (Javascript)</strong>, many indices as <strong>secondary, fulltext, geo, hash, Skip-list, capped collections</strong><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://orientdb.com/">OrientDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>REST, Binary Protocol, Java, Node.js, Tinkerpop Blueprints, Python, PHP, Go, Elixir, etc.</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Schema: <strong>Has features of an Object-Database, DocumentDB, GraphDB and Key-Value DB</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Java</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Query Method: <strong>SQL, Gremlin, SparQL</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: <strong>MVCC, tuneable</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Indexing: <strong>Primary, Secondary, Composite indexes with support for Full-Text and Spatial</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>Master-Master + sharding</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: <strong>Really fast, Lightweight, ACID with recovery</strong>.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.datomic.com/">Datomic</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Many jvm languages</strong>, Protocol: <strong>Native + REST</strong>, Query Method: <strong>Datalog + custom extensions</strong>, Scaling: <strong>elastic via underlying DB (in-mem, DynamoDB, Riak, CouchBase, Infinispan, more to come)</strong>, Written in: <strong>Clojure</strong>, Concurrency: <strong>ACID</strong> MISC: smart caching, unlimited read scalability, full-text search, cardinality, bi-directional refs 4 graph traversal, loves Clojure + Storm.<br></article><p><article><br><h3><a href="http://gunDB.io/">gunDB</a></h3><br>API: <strong>JavaScript</strong><br>Schema: <strong>Has features of an Object-Database, DocumentDB, GraphDB and Key-Value DB</strong><br>Written in: <strong>JavaScript</strong><br>Query Method: <strong>JavaScript</strong><br>Concurrency: <strong>Eventual consistency with hybrid vector/timestamp/lexical conflict<br>&nbsp;&nbsp;&nbsp;&nbsp;resolution</strong><br>Indexing: <strong>O(1) key/value, supports multiple indices per record</strong><br>Replication: <strong>Multi-Master/Master; browser peer-to-peer (P2P) enabled</strong><br>Misc: <strong>Open source, realtime sync, offline-first, distributed/decentralized,<br>&nbsp;&nbsp;&nbsp;&nbsp;graph-oriented, and fault-tolerant</strong><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://cortex-ag.com/cortexdoku/cms.php?i=206df578da20202020212024">CortexDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;CortexDB is a dynamic schema-less multi-model data base providing nearly all advantages of up to now known NoSQL data base types (key-value store, document store, graph DB, multi-value DB, column DB) with dynamic re-organization during continuous operations, managing analytical and transaction data for agile software configuration,change requests on the fly, self service and low footprint.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://code.google.com/p/alchemydatabase/">AlchemyDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;GraphDB + RDBMS + KV Store + Document Store. Alchemy Database is a<br>&nbsp;&nbsp;&nbsp;&nbsp;low-latency high-TPS NewSQL RDBMS embedded in the NOSQL datastore<br>&nbsp;&nbsp;&nbsp;&nbsp;redis. Extensive datastore-side-scripting is provided via deeply<br>&nbsp;&nbsp;&nbsp;&nbsp;embedded Lua. Bought and integrated with Aerospike.<br></article><p><article><br>  <h3><a href="http://www.wonderdb.org">WonderDB</a></h3><br>API:JDBC,SQL; WonderDB is fully transactional, distributed NewSQL database implemented in java based on relational architectures. So you can get best of both worlds, sql, joins and ease of use from SQL and distribution, replication and sharding from NoSQL movement. Tested performance is over 60K per node with Amazon m3.xlarge VM.<br></article><p><article><br>  <h3><a href="http://www.rockallsoftware.com">RockallDB</a></h3><br>A new concept to NoSQL databases where a memory allocator and a transactional database are melted together into an almost seamless whole. The programming model uses variants of well-known memory allocation calls like new and delete to manage the database. The result is very fast, natural to use, reliable and scalable. It is especially good in Big Data, data collection, embedded, high performance, Internet of Things (IoT) or mobile type applications.<br></article><p><article><br><h3><a href="http://www.foundationdb.com/" target="_blank">FoundationDB</a></h3><br>Bought by Apple Inc. Not available any more.<br></article><p></section><br><hr><br><section><br><p>The following section containts <strong> Soft NoSQL Systems</strong></p><br><small>[Mostly NOT originated out of a Web 2.0 need but worth a look for great non relational solutions]</small><p><h2>Object Databases <a href="http://odbms.org/">&raquo;</a></h2><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.versant.com">Versant</a></h3><br>API:<br>&nbsp;&nbsp;&nbsp;&nbsp;Languages/Protocol:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Java, C#, C++, Python</strong>. Schema: language class model (easy changable). Modes: <strong>always<br>&nbsp;&nbsp;&nbsp;&nbsp;consistent and eventually consistent </strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>synchronous fault tolerant and peer to peer asynchronous</strong>. Concurrency: <strong>optimistic<br>&nbsp;&nbsp;&nbsp;&nbsp;and object based locks</strong>. Scaling: <strong>can add physical nodes on fly for scale out/in</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>and migrate objects between nodes without impact to application code</strong>. Misc: <strong>MapReduce<br>&nbsp;&nbsp;&nbsp;&nbsp;via parallel SQL like query across logical database groupings.</strong><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://db4o.com">db4o</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java, C#, .Net Langs</strong>, Protocol: <strong>language</strong>, Query Method: <strong>QBE (by<br>&nbsp;&nbsp;&nbsp;&nbsp;Example), Soda, Native Queries, LINQ (.NET)</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>db4o2db4o &amp; dRS to relationals</strong>, Written in: <strong>Java</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Cuncurrency: <strong>ACID serialized</strong>, Misc: <strong>embedded lib,</strong> <strong>Links</strong>:<br>&nbsp;&nbsp;&nbsp;&nbsp;DZone Refcard #53 <a href="http://refcardz.dzone.com/refcardz/getting-started-db4o">&raquo;</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Book <a href="http://www.amazon.com/Definitive-Guide-db4o-Stefan-Edlich/dp/1590596560/">&raquo;</a>,<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.objectivity.com/">Objectivity</a></h3><br>API:<br>&nbsp;&nbsp;&nbsp;&nbsp;Languages: <strong>Java, C#, C++, Python, Smalltalk, SQL access through ODBC</strong>. Schema: <strong>native<br>&nbsp;&nbsp;&nbsp;&nbsp;language class model, direct support for references, interoperable across all language bindings. 64 bit unique<br>&nbsp;&nbsp;&nbsp;&nbsp;object ID (OID) supports multi exa-byte</strong>. Platforms: <strong>32 and 64 bit Windows, Linux, Mac OSX,<br>&nbsp;&nbsp;&nbsp;&nbsp;*Unix</strong>. Modes: <strong>always consistent (ACID). </strong>Concurrency: <strong>locks at cluster of<br>&nbsp;&nbsp;&nbsp;&nbsp;objects (container) level.</strong> Scaling: <strong>unique distributed architecture, dynamic addition/removal<br>&nbsp;&nbsp;&nbsp;&nbsp;of clients &amp; servers, cloud environment ready. </strong>Replication: <strong>synchronous with quorum fault<br>&nbsp;&nbsp;&nbsp;&nbsp;tolerant across peer to peer partitions.</strong><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://gemtalksystems.com/">GemStone/S</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java, C, C++, Smalltalk</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Schema: <strong>language class model</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Platforms: <strong>Linux, AIX, Solaris, Mac OSX, Windows clients</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Modes: <strong>always consistent (ACID)</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>shared page cache per node, hot standby failover</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: <strong>optimistic and object based locks</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Scaling: <strong>arbitrarily large number of nodes</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: <strong>SQL via GemConnect</strong><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.starcounter.com/">Starcounter</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>C# (.NET languages)</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Schema: <strong>Native language class model</strong>, Query method: <strong>SQL</strong>, Concurrency: <strong>Fully<br>&nbsp;&nbsp;&nbsp;&nbsp;ACID compliant</strong>, Storage: <strong>In-memory with transactions secured on disk</strong>, Reliability:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Full checkpoint recovery</strong>, Misc: <strong>VMDBMS - Integrating the DBMS with the virtual machine<br>&nbsp;&nbsp;&nbsp;&nbsp;for maximal performance and ease of use</strong>.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.mcobject.com/perst">Perst</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Java,Java ME,C#,Mono</strong>. Query method: <strong>OO via Perst collections, QBE, Native Queries,<br>&nbsp;&nbsp;&nbsp;&nbsp;LINQ, native full-text search, JSQL</strong> Replication: <strong>Async+sync (master-slave)</strong> Written in:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Java, C#</strong>. Caching: <strong>Object cache (LRU, weak, strong), page pool, in-memory database</strong> Concurrency: <strong>Pessimistic+optimistic<br>&nbsp;&nbsp;&nbsp;&nbsp;(MVCC)</strong> <strong>+ async or sync (ACID) </strong>Index types: <strong>Many tree models + Time<br>&nbsp;&nbsp;&nbsp;&nbsp;Series</strong>. Misc: Embedded lib., encryption, automatic recovery, native full text search, on-line or&nbsp;&nbsp;&nbsp;&nbsp; off-line backup.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.velocitydb.com/">VelocityDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Written in<strong>100% pure C#</strong>, Concurrency:&nbsp;&nbsp;&nbsp;&nbsp; <strong>ACID/transactional, pessimistic/optimistic locking,</strong> Misc: compact data, B-tree indexes,<br>&nbsp;&nbsp;&nbsp;&nbsp;LINQ queries, 64bit object identifiers (Oid) supporting multi millions of<br>&nbsp;&nbsp;&nbsp;&nbsp;databases and high performance. Deploy with a single DLL of around 400KB.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://highspeed-solutions.net/db.aspx">HSS Database</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>100% C#</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;The HSS DB v3.0 (HighSpeed-Solutions Database), is a client based, zero-configuration, auto schema evolution, acid/transactional, LINQ Query, DBMS for Microsoft .NET 4/4.5, Windows 8 (Windows Runtime), Windows Phone 7.5/8, Silverlight 5, MonoTouch for iPhone and Mono for Android<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://zodb.org/">ZODB</a></h3><br>API:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Python</strong>,<br>Protocol:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Internal, ZEO</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Query<br>&nbsp;&nbsp;&nbsp;&nbsp;Method: <strong>Direct object access, zope.catalog, gocept.objectquery,</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>ZEO, ZEORAID, RelStorage</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Python, C</strong> Concurrency: <strong>MVCC</strong>, License:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Zope Public License (OSI approved)</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Misc: Used in production since 1998<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://wiki.squeak.org/squeak/2665" rel="tag">Magma</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Smalltalk DB, optimistic locking, Transactions, etc.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.neoppod.org/">NEO</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>Python - ZODB "Storage" interface</strong>, Protocol: <strong>native</strong>, Query Method:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>transactional key-value</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>native</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Python</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: <strong>MVCC</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;(internally), License: <strong>GPL "v2 or later"</strong>, Misc: Load balancing, fault tolerant, hot-extensible.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://siaqodb.com/">siaqodb</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;An object database engine that currently runs on <strong>.NET, Mono, Silverlight,Windows<br>&nbsp;&nbsp;&nbsp;&nbsp;Phone 7, MonoTouch, MonoAndroid, CompactFramework</strong>; It has<br>&nbsp;&nbsp;&nbsp;&nbsp;implemented a Sync Framework Provider and can be <strong>synchronized</strong> with<strong> MS<br>&nbsp;&nbsp;&nbsp;&nbsp;SQLServer</strong>; Query<br>&nbsp;&nbsp;&nbsp;&nbsp;method:<strong>LINQ</strong>;<br></article><br><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://www.jadeworld.com/">JADE</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Programming Language with an Object Database build in.<br>&nbsp;&nbsp;&nbsp;&nbsp;Around since 1996.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://sterling.codeplex.com/">Sterling</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;is a lightweight object-oriented database for .NET with support for<br>&nbsp;&nbsp;&nbsp;&nbsp;Silverlight and Windows Phone 7. It features in-memory keys and<br>&nbsp;&nbsp;&nbsp;&nbsp;indexes, triggers, and support for compressing and encrypting the<br>&nbsp;&nbsp;&nbsp;&nbsp;underlying data.<br></article><br><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://github.com/markmeeus/MarcelloDB">MarcelloDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;An embedded object database designed for <strong>mobile apps</strong> targetting .net and Mono runtimes.<br>&nbsp;&nbsp;&nbsp;&nbsp;Supports .net/mono, Xamarin (iOS and Android),<br>&nbsp;&nbsp;&nbsp;&nbsp;Windows 8.1/10, Windows Phone 8.1.<br>&nbsp;&nbsp;&nbsp;&nbsp;Simple API, built on top of json.net and has a simple but effective indexing mechanism.<br>&nbsp;&nbsp;&nbsp;&nbsp;Development is focussed on being lightweight and developer friendly.<br>&nbsp;&nbsp;&nbsp;&nbnbsp;Has transaction support.<br>&nbsp;&nbsp;&nbsp;&nbsp;Open-source and free to use.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.morantex.com/">Morantex</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Stores .NET classes in a datapool. Build for speed. SQL Server<br>&nbsp;&nbsp;&nbsp;&nbsp;integration. LINQ support.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.eyedb.org/">EyeDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;EyeDB is an<strong> LGPL OODBMS</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;provides an advanced object model (inheritance, collections, arrays,<br>&nbsp;&nbsp;&nbsp;&nbsp;methods, triggers, constraints, reflexivity), an object definition<br>&nbsp;&nbsp;&nbsp;&nbsp;language based on ODMG ODL, an object query and manipulation language<br>&nbsp;&nbsp;&nbsp;&nbsp;based on ODMG OQL. Programming interfaces for C++ and Java.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.framerd.org/">FramerD</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Object-Oriented Database designed to support the maintenance and<br>&nbsp;&nbsp;&nbsp;&nbsp;sharing of knowledge bases. Optimized for pointer-intensive data<br>&nbsp;&nbsp;&nbsp;&nbsp;structures used by semantic networks, frame systems, and many<br>&nbsp;&nbsp;&nbsp;&nbsp;intelligent agent applications. Written in: <strong>ANSI C</strong>.<br></article><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.kellermansoftware.com/p-43-ninja-net-database-pro.aspx">Ninja Database Pro</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Ninja Database Pro is a .NET ACID compliant relational object database that<br>&nbsp;&nbsp;&nbsp;&nbsp;supports transactions, indexes, encryption, and compression. It currently<br>&nbsp;&nbsp;&nbsp;&nbsp;runs on .NET Desktop Applications, Silverlight Applications, and Windows Phone 7 Applications.<br></article><p><article><br><h3><a href="http://ndatabase.wix.com/home">NDatabase</a></h3><br>API: <strong>C#, .Net, Mono, Windows Phone 7, Silverlight, </strong><br>Protocol: <strong>language,</strong> Query Method: <strong>Soda, LINQ (.NET), </strong><br>Written in: <strong>C#</strong>, Misc: embedded lib, indexes, triggers, handle circular ref,<br>LinqPad support, Northwind sample, refactoring, in-memory database,<br>Transactions Support (ACID) and more, Documentation: <a href="http://ndatabase.net/">&raquo;</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.picolisp.com">PicoLisp</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Language and Object Database, can be viewed as a Database Development<br>&nbsp;&nbsp;&nbsp;&nbsp;Framework. Schema:<strong> native language class model with relations + various indexes</strong>.<br>&nbsp;&nbsp;&nbsp;&nbsp;Queries: <strong>language build in + a small Prolog like DSL Pilog</strong>. Concurrency: <strong>synchronization<br>&nbsp;&nbsp;&nbsp;&nbsp;+ locks</strong>.<br>&nbsp;&nbsp;&nbsp;&nbsp;Replication, distribution and fault tolerance is not implemented per default but can be implemented with native<br>&nbsp;&nbsp;&nbsp;&nbsp;functionality. Written in C (32bit) or assembly (64bit).<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://acid-state.seize.it">acid-state</a></h3><br>  API: <strong>Haskell</strong>,<br>Query Method: <strong>Functional programming</strong>,<br>Written in: <strong>Haskell</strong>,<br>Concurrency: <strong>ACID, GHC concurrent runtime</strong>,<br>Misc: In-memory with disk-based log, supports remote access<br>Links: Wiki <a href="http://acid-state.seize.it/">&raquo;</a>,<br>Docs <a href="http://hackage.haskell.org/packages/archive/acid-state/0.8.3/doc/html/Data-Acid.html">&raquo;</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.objectdb.com/">ObjectDB</a></h3><br>API: <strong>Java (JPA / JDO)</strong><br>Query method: <strong>JPA JPQL, JDO JDOQL</strong><br>Replication: <strong>Master-slave</strong><br>Written in: <strong>100% Pure Java</strong><br>Caching: <strong>Object cache, Data cache, Page cache, Query Result cache, Query program cache</strong><br>Concurrency: <strong>Object level locking (pessimistic + optimistic)</strong><br>Index types: <strong>BTree, single, path, collection</strong><br>Misc: Used in production since 2004, Embedded mode, Client Server mode, automatic recovery, on-line backup.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.coreobject.org/">CoreObject</a></h3><br>CoreObject: Version-controlled OODB, that supports powerful undo, semantic merging, and real-time collaborative editing.<br>MIT-licensed, API: <strong>ObjC</strong>, Schema: <strong>EMOF-like</strong>, Concurrency: <strong>ACID</strong>, Replication: <strong>differential sync</strong>, Misc: DVCS based on object graph diffs, selective undo, refs accross versioned docs, tagging, temporal indexing, integrity checking.<br></article><p><article><br><span class="grey">[<br>&nbsp;&nbsp;&nbsp;&nbsp;StupidDB <a href="http://www.aztec-project.org/">&raquo;</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;KiokuDB <a href="http://www.iinteractive.com/kiokudb/">&raquo;</a> (Perl solution),<br>&nbsp;&nbsp;&nbsp;&nbsp;Durus <a href="http://www.mems-exchange.org/software/durus/">&raquo;</a>]<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><br></article><br></section><p><br><section><br><h2>Grid &amp; Cloud Database Solutions</h2><br><br><article><br> <h3><a href="https://crate.io/">Crate Data</a> </h3>A <a href="http://en.wikipedia.org/wiki/Shared_nothing_architecture">shared<br> nothing</a>, document-oriented cluster data store. Accessed via SQL<br> and has builtin <a<br> href = "https://crate.io/blog/using-crate-data-as-a-blobstore/" > BLOB<br> support</a>. Uses the cluster state implementation and node<br> discovery of Elasticsearch.<br> License: <strong>Apache 2.0</strong>,<br> Query Method: <strong>SQL</strong>,<br> Clients: <strong>HTTP (REST), Python, Java (JDBC or native),<br>&nbsp;&nbsp;&nbsp;&nbsp;Ruby, JS, Erlang</strong>,<br> Replication + Sharding: <strong>automatic and configurable</strong>,<br> written in: <strong>Java</strong>,<br> <a href="https://github.com/crate/crate">&raquo; Crate Data GitHub Project</a>,<br> <a href="https://crate.io/docs/">&raquo; Documentation</a>.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.oracle.com/technetwork/middleware/coherence/overview/index.html">Oracle Coherence</a></h3><br>Oracle Coherence offers distributed, replicated, multi-datacenter, tiered (off-heap/SSD) and near (client) caching. It provides distributed processing, querying, eventing, and map/reduce, session management, and prorogation of database updates to caches. Operational support provided by a Grid Archive deployment model. </article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.gigaspaces.com/">GigaSpaces</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Popular SpaceBased Grid Solution.<br></article><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.vmware.com/products/application-platform/vfabric-gemfire">GemFire</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;GemFire offers in-memory globally distributed data management with dynamic scalability, very high performance and granular control supporting the most demanding applications.  Well integrated with the Spring Framework, developers can quickly and easily provide sophisticated data management for applications.  With simple horizontal scale-out, data latency caused by network roundtrips and disk I/O can be avoided even as applications grow.<br></article><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.jboss.org/infinispan.html">Infinispan</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;scalable, highly available data grid platform,<strong> open source</strong>,<br>&nbsp;&nbsp;&nbsp;&nbsp;written in <strong>Java</strong>.<br></article><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.queplix.com">Queplix</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;NOSQL Data Integration Environment, can integrate relational, object, BigData &ndash; NOSQL easily and without<br>&nbsp;&nbsp;&nbsp;&nbsp;any SQL.<br></article><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.hazelcast.com/">Hazelcast</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Hazelcast is a in-memory data grid that offers distributed data in Java with dynamic scalability under the Apache 2 open source license. It provides distributed data structures in Java in a single Jar file including hashmaps, queues, locks, topics and an execution service that allows you to simply program these data structures as pure java objects, while benefitting from symmetric multiprocessing and cross-cluster shared elastic memory of very high ingest data streams and very high transactional loads.<br></article><p><article><br>[<a href="http://www.gridgain.com/">GridGain</a>,<br> <a href="http://www.scaleoutsoftware.com/">ScaleOut Software</a>,<br> <a href="http://puniverse.github.com/galaxy/">Galaxy</a>,<br> <a href="http://joafip.sourceforge.net/">Joafip</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Coherence, eXtremeScale]<br></article><p><br></section><p><section><br><h2>XML Databases</h2><p><article><br><h3><a href="http://www.emc.com/products/detail/software/documentum-xdb.htm">EMC Documentum xDB</a></h3><br>(commercial system) API: Java, XQuery,<br>Protocol: WebDAV , WEB<br>services, Query method: XQuery, XPath, XPointer,<br>Replication: lazy<br>primary copy replication (master/replicas), Written in: Java,<br>Concurrency: concurrent reads, writes with<br>lock; transaction isolation,<br>Misc: Fully transactional persistent DOM; versioning; multiple index<br>types; metadata and non-XML data support; unlimited horizontal scaling.<br>Developer Network <a href="http://developer.emc.com/xmltech">&raquo;</a><br></article><p><article><br><h3><a href="http://exist-db.org/">eXist</a></h3><br>API: XQuery, XML:DB API,<br>DOM, SAX, Protocols: HTTP/REST,<br>WebDAV, SOAP, XML-RPC, Atom, Query Method: XQuery, Written in: Java<br>(open source),<br>Concurrency: Concurrent<br>reads, lock on write;<br>Misc: Entire web applications can be written in XQuery, using XSLT,<br>XHTML, CSS, and Javascript (for AJAX functionality). (1.4)<br>adds a<br>new full text search index based on Apache Lucene, a lightweight URL<br>rewriting and MVC framework, and support for XProc.<br></article><br><article><br><h3><a href="http://modis.ispras.ru/sedna/">Sedna</a></h3><br>Misc: ACID transactions, security, indices, hot backup. Flexible XML<br>processing facilities include W3C XQuery implementation, tight<br>integration of XQuery with full-text search facilities and a node-level<br>update language.<br></article><p><article><br><h3><a href="http://basex.org/">BaseX</a></h3><br>BaseX is a fast, powerful, lightweight XML database system<br>and<br>XPath/XQuery processor with highly conformant support for the latest<br>W3C Update and Full Text Recommendations. Client/Server architecture,<br>ACID transaction support, user management, logging, Open Source,<br>BSD-license, written in Java, runs out of the box.<br></article><p><article><br><h3><a href="http://www.xmlmind.com/qizx/">Qizx</a></h3><br>commercial and open source version, API: Java, Protocols:<br>http , REST, Query<br>Method: XQuery , XQuery<br>Full-Text, XQuery Update, Written in: Java, full source can be<br>purchased,<br>Concurrency: Concurrent<br>reads &amp; writes, isolation, Misc: Terabyte scalable, emphasizes<br>query speed.<br></article><br><article><br><h3><a href="http://www.oracle.com/database/berkeley-db/xml/index.html">Berkeley DB XML</a></h3><br>API: Many languages,<br>Written in: C++,<br>Query Method: XQuery,<br>Replication: Master /<br>Slave, Concurrency: MVCC,<br>License: Sleepycat <br><br></article><p><article><br>[<br><a href="http://xml.apache.org/xindice/">Xindice</a>,<br><a href="http://www.softwareag.com/de/products/wm/tamino/">Tamino</a>,<br><a href="http://js2dx.com/">2DX</a><br>]<br></article><p></section><p><section><br><h2>Multidimensional Databases</h2><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://globalsdb.org/">Globals:</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;by Intersystems, Multidimensional<br>&nbsp;&nbsp;&nbsp;&nbsp;array.Node.js<br>&nbsp;&nbsp;&nbsp;&nbsp;API, array based APIs (Java / .NET), and a Java based document API.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.intersystems.com/">Intersystems Cache</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Postrelational<br>&nbsp;&nbsp;&nbsp;&nbsp;System. Multidimensional array APIs, Object APIs, Relational Support<br>&nbsp;&nbsp;&nbsp;&nbsp;(Fully SQL capable JDBC, ODBC, etc.) and Document APIs are new<br>&nbsp;&nbsp;&nbsp;&nbsp;in<br>&nbsp;&nbsp;&nbsp;&nbsp;the upcoming 2012.2.x versions. Availible for<br>&nbsp;&nbsp;&nbsp;&nbsp;Windows, Linux and OpenVMS.<br></article><p><article><br><h3><a href="http://fis-gtm.com/">GT.M</a></h3><br>API: <strong>M, C, Python, Perl</strong>,<br>Protocol: <strong>native, inprocess C</strong>, Misc: Wrappers: <strong>M/DB for SimpleDB<br>compatible HTTP</strong><br><a href="http://www.mgateway.com/mdb.html">&raquo;</a>, <strong>MDB:X</strong><br>for XML <a href="http://mgateway.com/">&raquo;</a>,<br><strong>PIP</strong><br>for mapping to tables for SQL <a href="http://fis-pip.com/">&raquo;</a>,<br>Features: Small footprint (17MB), Terabyte Scalability, Unicode<br>support, Database encryption, Secure, ACID transactions (single node),<br>eventual consistency (replication), License: AGPL v3 on x86 GNU/Linux, <strong>Links</strong>: Slides<br><a href="http://www.slideshare.net/robtweed/gtm-a-tried-and-tested-schemaless-database">&raquo;</a>,<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://scidb.org/">SciDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Array</strong> Data Model for Scientists,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://scidb.org/Documents/SciDB-VLDB09-paper.pdf">&raquo; paper</a>, <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://scidb.org/Documents/SciDB-VLDB09-poster.pdf">&raquo; poster</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://highscalability.com/blog/2010/4/29/product-scidb-a-science-oriented-dbms-at-100-petabytes.html">&raquo;<br>&nbsp;&nbsp;&nbsp;&nbsp;HiScaBlog</a><br></article><p><article><h3><a href="http://www.minimdb.com/">MiniM DB</a></h3>:<br>&nbsp;&nbsp;&nbsp;&nbsp;Multidimensional arrays, API: <strong>M, C, Pascal, Perl,<br>&nbsp;&nbsp;&nbsp;&nbsp;.NET, ActiveX, Java, WEB.</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Available for Windows and Linux.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.rasdaman.org">rasdaman</a></h3>:<br>&nbsp;&nbsp;&nbsp;&nbsp;Short description: Rasdaman is a scientific database that allows to store and retrieve<br>&nbsp;&nbsp;&nbsp;&nbsp;multi-dimensional raster data (arrays) of unlimited size through an SQL-style query language.<br>&nbsp;&nbsp;&nbsp;&nbsp;API: C++/Java, Written in C++, Query method: SQL-like query language rasql,<br>&nbsp;&nbsp;&nbsp;&nbsp;as well as via OGC standards WCPS, WCS, WPS <a href="http://www.rasdaman.com">link2</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.daggerdb.com/" target="_blank">DaggerDB</a></h3>:<br>&nbsp;&nbsp;&nbsp;&nbsp;is a new Realtime analytics database written in .NET C#.<br>&nbsp;&nbsp;&nbsp;&nbsp;ACID compliant. fluent .NET query API, Client / server or in-process.<br>&nbsp;&nbsp;&nbsp;&nbsp;In-memory and persistent mode.<br></article><p><article><br>[<br><a href="http://github.com/ztmr/egtm">EGTM: GT.M for Erlang, </a><br><a href="http://www.idea.cz/technology">"IODB: EGTM-powered ObjectDB for Erlang</a><br>]<br></article><p></section><p><section><br><h2>Multivalue Databases</h2><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.rocketsoftware.com/u2">U2</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(UniVerse, UniData): MultiValue<br>&nbsp;&nbsp;&nbsp;&nbsp;Databases, Data Structure: MultiValued, Supports nested<br>&nbsp;&nbsp;&nbsp;&nbsp;entities, Virtual Metadata, API: BASIC, InterCall,<br>&nbsp;&nbsp;&nbsp;&nbsp;Socket, .NET and Java API's, IDE: Native, Record Oriented,<br>Scalability:&nbsp;&nbsp;&nbsp;&nbsp;automatic<br>&nbsp;&nbsp;&nbsp;&nbsp;table space allocation, Protocol: Client Server, SOA,<br>&nbsp;&nbsp;&nbsp;&nbsp;Terminal Line, X-OFF/X-ON, Written in: C, Query Method: Native<br>&nbsp;&nbsp;&nbsp;&nbsp;mvQuery, (Retrieve/UniQuery) and SQL,<br>Replication:&nbsp;&nbsp;&nbsp;&nbsp;yes , Hot<br>&nbsp;&nbsp;&nbsp;&nbsp;Standby , Concurrency: record<br>&nbsp;&nbsp;&nbsp;&nbsp;and File Locking (Fine and Coarse Granularity)<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.revelation.com/index.php/features">OpenInsight</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;API: Basic+,<br>&nbsp;&nbsp;&nbsp;&nbsp;.Net, COM, Socket, ODBC, Protocol: TCP/IP, Named Pipes, Telnet,<br>&nbsp;&nbsp;&nbsp;&nbsp;VT100. HTTP/S Query Method: RList, SQL &amp; XPath Written in:<br>&nbsp;&nbsp;&nbsp;&nbsp;Native 4GL, C, C++, Basic+, .Net,<br>&nbsp;&nbsp;&nbsp;&nbsp;java Replication: Hot Standby<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: table &amp;/or row locking, optionally transaction based &amp; commit<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp; rollback Data structure: Relational &amp;/or<br>&nbsp;&nbsp;&nbsp;&nbsp;MultiValue, supports nested entities Scalability: rows and tables size dynamically<br></article><p>&nbsp;&nbsp;&nbsp;&nbsp;<article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.tigerlogic.com/tigerlogic/pick/database/pickdatabase.jsp">TigerLogic PICK</a></h3> (D3, mvBase, mvEnterprise) Data Structure: <strong>Dynamic multidimensional PICK data model, multi-valued, dictionary-driven</strong>, API: <strong>NET, Java, PHP, C++,</strong> Protocol: <strong>C/S</strong>, Written In: <strong>C</strong>, Query Method: <strong>AQL, SQL, ODBC, Pick/BASIC</strong>, Replication: <strong>Hot Backup, FFR, Transaction Logging + real-time replication</strong>, Concurrency: <strong>Row Level Locking</strong>, Connectivity: <strong>OSFI, ODBC, Web-Services, Web-enabled</strong>, Security: File level AES-128 encryption<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.nps-reality.com/">Reality</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(Reality NPS):<br>&nbsp;&nbsp;&nbsp;&nbsp;The original MultiValue dataset database, virtual machine, enquiry and<br>&nbsp;&nbsp;&nbsp;&nbsp;rapid development environment. Delivers ultra efficiency, scalability<br>&nbsp;&nbsp;&nbsp;&nbsp;and resilience while extended for the web and with built-in auto<br>&nbsp;&nbsp;&nbsp;&nbsp;sizing, failsafe and more. Interoperability includes Web Services - Java<br>&nbsp;&nbsp;&nbsp;&nbsp;Classes, RESTful, XML, ActiveX, Sockets, .NetLanguages, C and, for those<br>&nbsp;&nbsp;&nbsp;&nbsp;interoperate with the world of SQL, ODBC/JDBC with two-way transparent SQL data access.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.openqm.com/">OpenQM</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Supports nested data. Fully automated table space allocation. Concurrency<br>&nbsp;&nbsp;&nbsp;&nbsp;control via task locks, file locks &amp; shareable/exclusive record<br>&nbsp;&nbsp;&nbsp;&nbsp;locks. Case insensitivity option. Secondary key indices. Integrated<br>&nbsp;&nbsp;&nbsp;&nbsp;data replication. QMBasic programming language for rapid development.<br>&nbsp;&nbsp;&nbsp;&nbsp;OO programming integrated into QMBasic. QMClient connectivity from<br>&nbsp;&nbsp;&nbsp;&nbsp;Visual Basic, PowerBasic, Delphi, PureBasic, ASP, PHP, C and more.<br>&nbsp;&nbsp;&nbsp;&nbsp;Extended multivalue query language.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.rocketsoftware.com/m204">Model 204 Database</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;A high performance dbms that runs on IBM mainframes (IBM z/OS, z/VM, zVSE),<br>&nbsp;&nbsp;&nbsp;&nbsp;+SQL interface with nested entity support<br>&nbsp;&nbsp;&nbsp;&nbsp;API: native 4GL (SOUL + o-o support), SQL, Host Language (COBOL, Assembler, PL1) API, ODBC, JDBC, .net, Websphere MQ, Sockets<br>&nbsp;&nbsp;&nbsp;&nbsp;Scalability: automatic table space allocation, 64-bit support<br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: IBM assembler, C<br>&nbsp;&nbsp;&nbsp;&nbsp;Query method: SOUL, SQL, RCL ( invocation of native language from client )<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: record and file level locking<br>Connectivity:&nbsp;&nbsp;&nbsp;&nbsp;TN3270 , Telnet, http<br></article><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.tieto.com/services/information-management/enterprise-content-management-services/multimedia-content-management-trip">Tieto TRIP</a></h3><br>Hybrid database / search engine system with characteristics of multi-value, document, relational, XML and graph databases. Used in production since 1985 for high-performance search and retrieve solutions. Full-text search, text classification, similarity search, results ranking, real time facets, Unicode, Chinese word segmentation, and more. Platforms: Windows, Linux, AIX and Solaris. API: .NET, Java and C/C++. Query methods: native (CCL), SQL subset, XPath. Commercial.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/gg269259%28v=EXCHG.10%29.aspx">ESENT</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(by Microsoft) ISAM storage technology. Access using index or<br>&nbsp;&nbsp;&nbsp;&nbsp;cursor navigation. Denormalized schemas, wide tables with sparse<br>&nbsp;&nbsp;&nbsp;&nbsp;columns, multi-valued columns, and sparse and rich indexes. C# and<br>&nbsp;&nbsp;&nbsp;&nbsp;Delphi drivers available. Backend for a number of MS Products as<br>&nbsp;&nbsp;&nbsp;&nbsp;Exchange.<br></article><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.jbase.com/index.html">jBASE</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;more info <a href="http://en.wikipedia.org/wiki/InfinityDB">&raquo;</a><br></article><br></section><p><section><br>&nbsp;&nbsp;&nbsp;&nbsp;<h2>Event Sourcing</h2><br><article><h3><a href="http://geteventstore.com/">Event Store</a></h3></article><br><article><h3><a href="http://eventsourcing.com/">Eventsourcing for Java (es4j)</a></h3><br>Key features: Clean, succinct Command/Event model, Compact data storage layout, Disruptor for fast message processing, CQengine for fast indexing and querying,<br>In-memory and on-disk storage, Causality-preserving Hybrid Logical Clocks, Locking synchronization primitive, OSGi support<br></article><br></section><p><section><br><h2>Time Series / Streaming Databases</h2><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://axibase.com/products/axibase-time-series-database/">Axibase</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Distributed DB designed to store and analyze high-frequency time-series data at scale.<br>&nbsp;&nbsp;&nbsp;&nbsp;Includes a large set of built-in features:<br>&nbsp;&nbsp;&nbsp;&nbsp;Rule Engine, Visualization, Data Forecasting, Data Mining.<br>&nbsp;&nbsp;&nbsp;&nbsp;API: <strong>RESTful API, Network API, Data API, Meta API, SQL</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;API Clients: <strong>R, Java, Ruby, Python, PHP, Node.js</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Replication: <strong>Master Slave</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;Major protocol & format support: <strong>CSV, nmon, pickle, StatsD, collectd,<br>&nbsp;&nbsp;&nbsp;&nbsp;tcollector, scollector, JMX, JDBC, SNMP, JSON, ICMP, OVPM, SOAP</strong>.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://basho.com/products/riak-ts/">Riak TS</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Enterprise-grade NoSQL time series database optimized specifically for IoT and<br>Time Series data. It ingests, transforms, stores, and analyzes massive amounts<br>of time series data. Riak TS is engineered to be faster than Cassandra.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="https://influxdata.com">influxdata</a></h3>,<br><h3><a href="https://pipelinedb.com">pipelinedb</a></h3><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://kx.com/">kdb+</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;time-series database optimized for Big Data analytics.<br></article><p></section><p><section><br><h2>other NoSQL related databases</h2><br><article><h3><a href="http://www-01.ibm.com/software/lotus/">IBM Lotus/Domino</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Type: Document Store, API: Java, HTTP, IIOP, C API, REST Web Services, DXL, Languages: Java, JavaScript,<br>&nbsp;&nbsp;&nbsp;&nbsp;LotusScript, C, @Formulas, Protocol: HTTP, NRPC, Replication: Master/Master, Written in: C, Concurrency:<br>&nbsp;&nbsp;&nbsp;&nbsp;Eventually<br>&nbsp;&nbsp;&nbsp;&nbsp;Consistent , Scaling: Replication<br>&nbsp;&nbsp;&nbsp;&nbsp;Clusters<br></article><p><br><article><h3><a href="http://www.mcobject.com/extremedbfamily.shtml">eXtremeDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Type: Hybrid In-Memory and/or Persistent Database<br>&nbsp;&nbsp;&nbsp;&nbsp;Database; Written in: C;<br>&nbsp;&nbsp;&nbsp;&nbsp;API: C/C++, SQL, JNI,<br>&nbsp;&nbsp;&nbsp;&nbsp;C#(.NET), JDBC;<br>Replication:&nbsp;&nbsp;&nbsp;&nbsp;Async Sync<br>&nbsp;&nbsp;&nbsp;&nbsp;(master-slave), Cluster; Scalability: 64-bit and MVCC<br></article><p><br><article><h3><a href="http://www.raima.com/products/rdme/">RDM Embedded</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;APIs: C++, Navigational C.<br>&nbsp;&nbsp;&nbsp;&nbsp;Embedded Solution that is ACID Compliant with Multi-Core, On-Disk<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;<br>&nbsp;&nbsp;&nbsp;&nbsp;In-Memory Support. Distributed Capabilities, Hot Online Backup,<br>&nbsp;&nbsp;&nbsp;&nbsp;supports all Main Platforms. Supported<br>&nbsp;&nbsp;&nbsp;&nbsp;B Tree &amp; Hash Indexing. Replication: Master/Slave,<br>&nbsp;&nbsp;&nbsp;&nbsp;Concurrency: MVCC.<br>&nbsp;&nbsp;&nbsp;&nbsp;Client/Server: In-process/Built-in.<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.unesco.org/webworld/isis/isis.htm">ISIS Family</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(semistructured databases)<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://bvsmodelo.bvsalud.org/php/level.php?lang=en&amp;component=31">&raquo;</a><br></article><p><article><br><h3><a href="http://www.moonshadowmobile.com/data-visualization/big-data-visualizer/">Moonshadow</a></h3><br>NoSql, in-memory, flat-file, cloud-based. API interfaces. Small data footprint and very fast data retrieval. Stores 200 million records with 200 attributes in just 10GB.  Retrieves 150 million records per second per CPU core. Often used to visualize big data on maps. Written in C.<br></article><p><article><br><h3><a href="http://www.rediosoft.com/">VaultDB</a></h3><br>Next-gen NoSQL encrypted document store. Multi-recipient / group encryption. Featuers: concurrency, indices, ACID transactions, replication and PKI management. Supports PHP and many others. Written in <strong>C++</strong>. Commercial but has a free version. API: <strong>JSON</strong><br></article><br><article><h3><a href="http://www.vyhodb.com/">Vyhodb</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Service oriented, schema-less, network data model DBMS</strong>.<br>&nbsp;&nbsp;&nbsp;&nbsp;Client application invokes methods of vyhodb services, which are<br>&nbsp;&nbsp;&nbsp;&nbsp;written in Java and deployed inside vyhodb. Vyhodb services reads<br>&nbsp;&nbsp;&nbsp;&nbsp;and modifies storage data. API: <strong>Java</strong>, Protocol:<br>&nbsp;&nbsp;&nbsp;&nbsp;RSI - <strong>Remote service invocation</strong>, Written in: Java,<br>&nbsp;&nbsp;&nbsp;&nbsp;ACID:  <strong>fully supported</strong>, Replication:<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>async master slave</strong>, Misc: <strong>online backup</strong>,<br>License:&nbsp;&nbsp;&nbsp;&nbsp;proprietary<br>&nbsp;&nbsp;&nbsp;&nbsp;</article><p><article><h3><a href="http://www.prevayler.org/">Prevayler</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Java RAM Data structure<br>&nbsp;&nbsp;&nbsp;&nbsp;journalling.<br></article><br><article><h3><a href="http://yserial.sourceforge.net/">Yserial</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Python wrapper over sqlite3<br></article><br></section><p><section><br><h2>Scientific and Specialized DBs</h2><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://probcomp.csail.mit.edu/bayesdb/" target="_blank">BayesDB</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;BayesDB, a Bayesian database table, lets users query the probable implications of their tabular data as easily as an SQL database lets them query the data itself. Using the built-in Bayesian Query Language (BQL), users with no statistics training can solve basic data science problems, such as detecting predictive relationships between variables, inferring missing values, simulating probable observations, and identifying statistically similar database entries.<br></article><p><article><h3><a href="http://www.gpudb.com/" target="_blank">GPUdb</a></h3><br>  A distributed database for many core devices.<br>  GPUdb leverages many core devices such as NVIDIA GPUs to provide<br>an unparallelled parallel database experience. GPUdb is a scalable,<br>distributed database with SQL-style query capability, capable of<br>storing Big Data. Developers using the GPUdb API add data, and query<br>the data with operations like select, group by, and join.<br>GPUdb includes many operations not available in other "cloud database" offerings.<br></article><p></section><p><section><br><h2>unresolved and uncategorized</h2><br><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3>Btrieve</h3><br>&nbsp;&nbsp;&nbsp;&nbsp;(by Pervasive Software) key/index/tupel DB. Using Pages.<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.wordiq.com/definition/Btrieve">&raquo;</a> (faq<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.rothgeb.net/wordpress-2.7.1/?page_id=64">&raquo;</a>)<br></article><p><article><h3><a href="https://rubygems.org/gems/KirbyBase">KirbyBase</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Written in: <strong>Ruby</strong>. github: <a href="https://github.com/gurugeek/KirbyBase">&raquo;</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://tokutek.com/">Tokutek:</a></h3><br></article><p><article><h3><a href="http://www.gnu.org/software/recutils/">Recutils:</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;GNU Tool for text files containing records and fields. Manual<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.gnu.org/software/recutils/manual/index.html">&raquo;</a><br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3><a href="http://www.eztools-software.com/tools/filedb/">FileDB:</a></h3><br>&nbsp;&nbsp;&nbsp;&nbsp;Mainly targeted to Silverlight/Windows Phone developers but its also<br>&nbsp;&nbsp;&nbsp;&nbsp;great for any .NET application where a simple local database is<br>&nbsp;&nbsp;&nbsp;&nbsp;required, extremely Lightweight - less than 50K, stores one table per<br>&nbsp;&nbsp;&nbsp;&nbsp;file, including index, compiled versions for Windows Phone 7,<br>&nbsp;&nbsp;&nbsp;&nbsp;Silverlight and .NET, fast, free to use in your applications<br></article><p><article><br>  <h3><a href="http://labs.codernity.com/codernitydb/">CodernityDB</a></h3><br>  written in Python<br></article><p><article><br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>illuminate Correlation Database</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.datainnovationsgroup.com/">&raquo;</a>, <strong>FluidDB (Column Oriented DB)</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://doc.fluidinfo.com/fluidDB/">&raquo;</a>,Fleet DB <a href="http://fleetdb.org/">&raquo;</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Btrieve</strong>, <br> Twisted Storage <a href="http://twistedstorage.com/">&raquo;</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Java-Chronicle <a href="https://github.com/peter-lawrey/Java-Chronicle">&raquo;</a>, Ringo, Sherpa,<br>&nbsp;&nbsp;&nbsp;&nbsp;tin , Dryad, SkyNet, Disco<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Possibly the oldest NoSQL DB (together with MUMPS and IBMs IMS & IDMS [1968,1964]):<br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://documentation.softwareag.com/adabas/ada814mfr/adamf/concepts/cfadais.htm">&raquo;<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Adabas</strong></a> VSAM by IBM is also a good candidate.<br></article><p></section><p><aside id="sidebar"><p><h3>NoSQL RELATED EVENTS:</h3><br><ul><br><li><br>12/14 Sept <strong>Flink Forward</strong> <a href="http://flink-forward.org/" target="_blank">&raquo;</a><br></li><br>  <li><br>  26 Sept <strong>Big Data Guide Event Frankfurt</strong> <a href="http://bit.ly/29irCzi" target="_blank">&raquo;</a><br>  </li><br></ul><p><p><br><a href="http://flink-forward.org" target="_blank"><br>&nbsp;&nbsp;&nbsp;&nbsp; <img alt="Ads" src="Resources/Public/Img/Flink-Forward-Banner1.png"/></a><br></p><p><p><br>&nbsp;&nbsp;&nbsp;&nbsp;Register your event 4free: <a href="feedback.html">&raquo;</a><br></p><p><h3>NoSQL ARCHIVE</h3><br><a href="links.html"><br>&nbsp;&nbsp;&nbsp;&nbsp;<img alt="NoSQL ARCHIVE" title="NoSQL ARCHIVE" src="Resources/Public/Img/archive.jpg"/><br></a><br><br><p><p><br><a href="http://www.arangoDB.com" target="_blank"><br>&nbsp;&nbsp;&nbsp;&nbsp; <img alt="Ads" src="Resources/Public/Img/arangodb_logo_c400.png"/></a><br></p><p><h3>NoSQL FORUMS</h3><br><ul><br>&nbsp;&nbsp;&nbsp;&nbsp;<li>Global NOSQL Forum <a href="http://groups.google.de/group/nosql-discussion" target="_blank">&raquo;</a></li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li>Forum Berlin <a href="http://groups.google.de/group/nosql-berlin/topics" target="_blank">&raquo;</a></li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li>Forum France <a href="http://groups.google.fr/group/nosql-fr" target="_blank">&raquo;</a></li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li>Forum Japan <a href="http://groups.google.com/group/nosql-ja" target="_blank">&raquo;</a></li><br></ul><p><h3>NoSQL NEWS FEEDS</h3><br><ul><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;MyNoSQL by Alex P <a href="http://nosql.mypopescu.com/">&raquo;</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li>On Twitter: nosqlupdate <a<br>&nbsp;&nbsp;&nbsp;&nbsp;href="http://twitter.com/nosqlupdate">&raquo;</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li>NoSQL Weekly <a href="http://www.nosqlweekly.com/">&raquo;</a> <strong>* new *</strong></li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li>HighScalability Blog <a href="http://highscalability.com/">&raquo;</a></li><br></ul><p>Select the right Database <a href="select-the-right-database.html">&raquo;</a><br><br><h3>FUN</h3><br><ul><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;A NoSQL parody <a href="http://youtu.be/fXc-QDJBXpw">&raquo;</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br></ul><p><p>"A DBA walks into a NOSQL bar, but turns and leaves because he couldn't find a <strong>table</strong>"<br>&nbsp;&nbsp;&nbsp;&nbsp;(webtonull)<br></p><p><h3>NewSQL Databases</h3><p><p>scalable and ACID and (relational and/or sql -access)</p><br><ul><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.nuodb.com/" target="_blank">NuoDB</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;VoltDB<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;Clustrix<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;SenseiDB<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;GenieDB<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;ScalArc<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;ScaleDB<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;Drizzle<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;ScaleBase<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;Akiban<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;Translattice<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;NDB MySQL Cluster<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;HandlerSocket (Percona)<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;Tokutek<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://schemafreedb.com/">SchemafreeDB</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;JustOneDB<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;Wakanda DB<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;Memsql (new)<br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br>&nbsp;&nbsp;&nbsp;&nbsp;<li><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://cachelot.io/">Cachelot</a><br>&nbsp;&nbsp;&nbsp;&nbsp;</li><br></ul><br><h4>Hosted NewSQL</h4><br>Database.com, Amazon RDS, MS SQL Azure, Xeround, FathomDB<br></aside><p><p>[This "NoSQL Archive" has always <strong>&gt; 40000 unique visitors</strong> per month and  it is <strong>top<br>&nbsp;&nbsp;&nbsp;&nbsp;rated</strong> on Google for "nosql"]<br></p><br><p><a href="feedback.html">&raquo; Contact &amp; Feedback</a> | <a href="impressum.html">&raquo; Imprint</a></p><p><hr><br>Some Big-data links:<p>## Riak<br>* http://docs.basho.com/<br>* http://littleriakbook.com/<p>## General NoSQL<br>* http://highlyscalable.wordpress.com/2012/09/18/distributed-algorithms-in-nosql-databases/<br>* http://highlyscalable.wordpress.com/2012/03/01/nosql-data-modeling-techniques/<br>* http://architects.dzone.com/articles/relational-databases-vs-nosql<p>## Consistency challenges<br>* http://www.infoq.com/articles/cap-twelve-years-later-how-the-rules-have-changed<br>* http://aphyr.com/posts/281-call-me-maybe-carly-rae-jepsen-and-the-perils-of-network-partitions<p>## Comparisons<br>* http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis<p>## Polyglot<br>### Datomic<br>* http://www.datomic.com<br>* http://www.flyingmachinestudios.com/programming/datomic-for-five-year-olds/<p>### Lambda Architecture<br>* http://nathanmarz.com/blog/how-to-beat-the-cap-theorem.html<br>* http://www.databasetube.com/database/big-data-lambda-architecture/<br>* http://jameskinley.tumblr.com/post/37398560534/the-lambda-architecture-principles-for-architecting<p>### Graph + K/V<br>* http://www.bigdata.com/blog/?p=628<p><hr><p><p>Some more Big-data links:<p><div class="entry-content"><br><p><em><strong>Big-data</strong></em> is one of the most inflated buzzword of the last years. Technologies born to handle huge datasets and overcome limits of previous products are gaining popularity outside the research environment. The following list would be a reference of this world. Its still incomplete and always will be.</p><br><p><strong>Framework</strong></p><br><ul><br><li><a href="http://hadoop.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hadoop.apache.org']);"><strong>Apache Hadoop</strong></a>: framework for distributed processing. Integrates&nbsp;MapReduce (parallel processing), YARN (job scheduling) and HDFS (distributed file system)</li><br></ul><br><p><strong>Distributed Programming</strong></p><br><ul><br><li><a href="http://databricks.github.io/simr/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://databricks.github.io']);"><strong>AMPLab SIMR</strong></a>: run Spark on Hadoop MapReduce v1</li><br><li><a href="http://incubator.apache.org/projects/datafu.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://incubator.apache.org']);"><strong>Apache DataFu</strong></a>: collection of user-defined functions for&nbsp;Hadoop and Pig developed by LinkedIn</li><br><li><a href="http://gora.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://gora.apache.org']);"><strong>Apache Gora</strong></a>: framework for in-memory data model and persistence</li><br><li><a href="http://hama.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hama.apache.org']);"><strong>Apache Hama</strong></a>: BSP (Bulk Synchronous Parallel) computing framework</li><br><li><a href="http://wiki.apache.org/hadoop/MapReduce/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://wiki.apache.org']);"><strong>Apache MapReduce</strong></a>: programming model for processing large data sets with a parallel, distributed algorithm on a cluster</li><br><li><a href="https://pig.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://pig.apache.org']);"><strong>Apache Pig</strong></a>: high level language to express data analysis programs for Hadoop</li><br><li><a href="http://incubator.apache.org/s4/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://incubator.apache.org']);"><strong>Apache S4</strong></a>: framework for stream processing, implementation of S4</li><br><li><a href="http://spark.incubator.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://spark.incubator.apache.org']);"><strong>Apache Spark</strong></a>: framework for&nbsp;in-memory cluster computing</li><br><li><a href="http://spark.incubator.apache.org/docs/0.7.3/streaming-programming-guide.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://spark.incubator.apache.org']);"><strong>Apache Spark Streaming</strong></a>: framework for stream processing, part of Spark</li><br><li><a href="http://storm-project.net/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://storm-project.net']);"><strong>Apache Storm</strong></a>: framework for stream processing by Twitter also on YARN</li><br><li><a href="http://tez.incubator.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://tez.incubator.apache.org']);"><strong>Apache Tez</strong></a>: application framework&nbsp;for executing a complex DAG (directed acyclic graph) of tasks, built on&nbsp;YARN</li><br><li><a href="https://incubator.apache.org/projects/twill.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://incubator.apache.org']);"><strong>Apache Twill</strong></a>: abstraction over YARN that reduces the complexity of developing distributed applications</li><br><li><a href="http://cascalog.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://cascalog.org']);"><strong>Cascalog</strong></a>: data processing and querying library</li><br><li><a href="http://vldbarc.org/pvldb/vldb2010/pvldb_vol3/I08.pdf" onclick="javascript:console.log(['_trackEvent','download','http://vldbarc.org/pvldb/vldb2010/pvldb_vol3/I08.pdf']);"><strong>Cheetah</strong></a>: High Performance, Custom Data Warehouse on Top of MapReduce</li><br><li><a href="http://www.cascading.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.cascading.org']);"><strong>Concurrent Cascading</strong></a>: framework for data management/analytics on Hadoop</li><br><li><a href="https://github.com/damballa/parkour" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Damballa Parkour</strong></a>: MapReduce library for Clojure</li><br><li><strong>Datasalt Pangool</strong>: alternative MapReduce paradigm</li><br><li><strong>Facebook Corona</strong>: Hadoop enhancement which removes single point of failure</li><br><li><a href="http://peregrine_mapreduce.bitbucket.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://peregrine_mapreduce.bitbucket.org']);"><strong>Facebook Peregrine</strong></a>: Map Reduce framework</li><br><li><strong>Facebook Scuba</strong>: distributed in-memory datastore</li><br><li><strong>Google MapReduce</strong>: map reduce framework</li><br><li><strong>Google MillWheel</strong>: fault tolerant stream processing framework</li><br><li><a href="http://db.cs.yale.edu/hadoopdb/hadoopdb.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://db.cs.yale.edu']);"><strong>HadoopDB</strong></a>: hybrid of MapReduce and DBMS</li><br><li><a href="https://code.google.com/p/jaql/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://code.google.com']);"><strong>JAQL</strong></a>: declarative programming language for working with structured, semi-structured and unstructured data</li><br><li><a href="http://druid.io/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://druid.io']);"><strong>Metamarkers Druid</strong></a>: framework for real-time analysis of large datasets</li><br><li><a href="https://github.com/Netflix/PigPen" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Netflix PigPen</strong></a>: map-reduce for Clojure whiche compiles to Apache Pig</li><br><li><a href="http://discoproject.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://discoproject.org']);"><strong>Nokia Disco</strong></a>: MapReduce framework developed by Nokia</li><br><li><a href="http://pydoop.sourceforge.net/docs/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://pydoop.sourceforge.net']);"><strong>Pydoop</strong></a>: Python MapReduce and HDFS API for Hadoop</li><br><li><a href="http://stratosphere.eu/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://stratosphere.eu']);"><strong>Stratosphere</strong></a>: general purpose cluster computing framework</li><br><li><a href="https://github.com/twitter/scalding" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Twitter Scalding</strong></a>: Scala library for Map Reduce jobs, built on Cascading</li><br><li><a href="https://github.com/twitter/summingbird" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Twitter Summingbird</strong></a>: Streaming MapReduce with Scalding and Storm, by Twitter</li><br></ul><br><p><strong>Distributed Filesystem</strong></p><br><ul><br><li><a href="http://hadoop.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hadoop.apache.org']);"><strong>Apache HDFS</strong></a>: a way to store large files across multiple machines</li><br><li><a href="http://ceph.com/ceph-storage/file-system/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://ceph.com']);"><strong>Ceph Filesystem</strong></a>: software storage platform designed</li><br><li><a href="https://www.facebook.com/note.php?note_id=76191543919" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.facebook.com']);"><strong>Facebook Haystack</strong></a>: object storage system</li><br><li><strong>Google Colossus</strong>: distributed filesystem (GFS2)</li><br><li><strong>Google GFS</strong>: distributed filesystem</li><br><li><strong>Google Megastore</strong>: scalable, highly available storage</li><br><li><a href="http://www.gridgain.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.gridgain.org']);"><strong>GridGain</strong></a>: GGFS, Hadoop compliant in-memory file system</li><br><li><a href="http://wiki.lustre.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://wiki.lustre.org']);"><strong>Lustre file system</strong></a>: high-performance distributed filesystem</li><br><li><a href="https://www.quantcast.com/engineering/qfs/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.quantcast.com']);"><strong>Quantcast File System QFS</strong></a>: open-source distributed file system</li><br><li><a href="http://www.gluster.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.gluster.org']);"><strong>Red Hat GlusterFS</strong></a>: cale-out network-attached storage file system</li><br><li><a href="http://tachyon-project.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://tachyon-project.org']);"><strong>Tachyon</strong></a>: reliable file sharing at memory speed across cluster frameworks</li><br></ul><br><p><strong>Column Data Model</strong></p><br><ul><br><li><a href="http://accumulo.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://accumulo.apache.org']);"><strong>Apache Accumulo</strong></a>: distribuited key/value store, built on&nbsp;Hadoop</li><br><li><a href="http://cassandra.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://cassandra.apache.org']);"><strong>Apache Cassandra</strong></a>: column-oriented distribuited datastore, inspired by&nbsp;BigTable</li><br><li><a href="http://hbase.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hbase.apache.org']);"><strong>Apache HBase</strong></a>: column-oriented distribuited datastore, inspired by BigTable</li><br><li><a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/bigtable-osdi06.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/bigtable-osdi06.pdf']);"><strong>Google BigTable</strong></a>: column-oriented distributed datastore</li><br><li><a href="https://developers.google.com/datastore/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://developers.google.com']);"><strong>Google Cloud Datastore</strong></a>: is a fully managed, schemaless database for storing non-relational data over BigTable</li><br><li><a href="http://hypertable.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hypertable.org']);"><strong>Hypertable</strong></a>: column-oriented distribuited datastore, inspired by&nbsp;BigTable</li><br><li><a href="http://infinidb.co/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://infinidb.co']);"><strong>InfiniDB</strong></a>: is accessed through a MySQL interface and use massive parallel processing to parallelize queries</li><br><li><a href="http://parquet.io/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://parquet.io']);"><strong>Parquet</strong></a>: columnar storage format for Hadoop.</li><br></ul><br><p><strong>Document Data Model</strong></p><br><ul><br><li><a href="http://comsysto.github.io/jumbodb/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://comsysto.github.io']);"><strong>jumboDB</strong></a>: document oriented datastore over Hadoop</li><br><li><a href="http://data.linkedin.com/projects/espresso" onclick="javascript:console.log(['_trackEvent','outbound-article','http://data.linkedin.com']);"><strong>LinkedIn Espresso</strong></a>: horizontally scalable document-oriented NoSQL data store</li><br><li><a href="http://www.mongodb.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.mongodb.org']);"><strong>MongoDB</strong></a>: Document-oriented database system</li><br><li><a href="http://www.rethinkdb.com/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.rethinkdb.com']);"><strong>RethinkDB</strong></a>: document database that supports queries like table joins and group by</li><br></ul><br><p><strong>Key-value Data Model</strong></p><br><ul><br><li><a href="http://aws.amazon.com/dynamodb/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://aws.amazon.com']);"><strong>Amazon DynamoDB</strong></a>: distributed key/value store, implementation of&nbsp;Dynamo paper</li><br><li><a href="https://github.com/nathanmarz/elephantdb" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>ElephantDB</strong></a>: Distributed database specialized in exporting data from Hadoop</li><br><li><a href="http://geteventstore.com" onclick="javascript:console.log(['_trackEvent','outbound-article','http://geteventstore.com']);"><strong>EventStore</strong></a>: distributed time series database</li><br><li><a href="http://www.project-voldemort.com/voldemort/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.project-voldemort.com']);"><strong>Linkedin Voldemort</strong></a>: distributed key/value storage system</li><br><li><a href="http://opentsdb.net" onclick="javascript:console.log(['_trackEvent','outbound-article','http://opentsdb.net']);"><strong>OpenTSDB</strong></a>: distributed time series database on top of HBase</li><br><li><a href="http://redis.io" onclick="javascript:console.log(['_trackEvent','outbound-article','http://redis.io']);"><strong>Redis DataBase</strong></a>: in memory key value datastore</li><br><li><a href="http://rocksdb.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://rocksdb.org']);"><strong>RocksDB</strong></a>: embeddable persistent key-value store for fast storage based on LevelDB</li><br><li><a href="https://github.com/twitter/storehaus" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Storehaus</strong></a>: library to work with asynchronous key value stores, by Twitter</li><br></ul><br><p><strong>Graph Data Model</strong></p><br><ul><br><li><a href="http://giraph.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://giraph.apache.org']);"><strong>Apache Giraph</strong></a>: implementation of Pregel, based on Hadoop</li><br><li><a href="http://spark.incubator.apache.org/docs/0.7.3/bagel-programming-guide.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://spark.incubator.apache.org']);"><strong>Apache Spark Bagel</strong></a>: implementation of Pregel, part of Spark</li><br><li><a href="https://www.arangodb.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.arangodb.org']);"><strong>ArangoDB</strong></a>: multi model distribuited database</li><br><li><strong>Google Pregel</strong>: graph processing framework</li><br><li><a href="https://amplab.cs.berkeley.edu/publication/graphx-grades/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://amplab.cs.berkeley.edu']);"><strong>GraphX</strong></a>: resilient Distributed Graph System on Spark</li><br><li><strong>Intel GraphBuilder</strong>: tools to construct large-scale graphs on top of Hadoop</li><br><li><a href="http://www.neo4j.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.neo4j.org']);"><strong>Neo4j</strong></a>: graph database writting entirely in Java</li><br><li><a href="http://www.orientechnologies.com/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.orientechnologies.com']);"><strong>OrientDB</strong></a>: document and graph database</li><br><li><a href="https://github.com/xslogic/phoebus" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Phoebus</strong></a>: framework for large scale graph processing</li><br><li><a href="http://thinkaurelius.github.io/titan/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://thinkaurelius.github.io']);"><strong>Titan</strong></a>: distributed graph database, built over Cassandra</li><br><li><a href="https://github.com/twitter/flockdb" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Twitter FlockDB</strong></a>: distribuited graph database</li><br></ul><br><p><strong>NewSQL Databases</strong></p><br><ul><br><li><a href="http://aws.amazon.com/redshift/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://aws.amazon.com']);"><strong>Amazon RedShift</strong></a>: data warehouse service, based on PostgreSQL</li><br><li><a href="http://probcomp.csail.mit.edu/bayesdb/index.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://probcomp.csail.mit.edu']);"><strong>BayesDB</strong></a>: statistic oriented SQL database</li><br><li><a href="https://foundationdb.com/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://foundationdb.com']);"><strong>FoundationDB</strong></a>: distributed database, inspired by&nbsp;F1</li><br><li><strong>Google F1</strong>: distributed SQL database built on Spanner</li><br><li><strong>Google Spanner</strong>: globally distributed semi-relational database</li><br><li><strong>Haeinsa</strong>: linearly scalable multi-row, multi-table transaction library for HBase based on Percolator</li><br><li><strong>HandlerSocket</strong>: NoSQL plugin for MySQL/MariaDB</li><br><li><a href="http://www.infinisql.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.infinisql.org']);"><strong>InfiniSQL</strong></a>: infinity scalable RDBMS</li><br><li><strong>InfluxDB</strong>: distributed time series database</li><br><li><a href="http://www.memsql.com/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.memsql.com']);"><strong>MemSQL</strong></a>: in memory SQL database witho optimized columnar storage on flash</li><br><li><a href="http://www.nuodb.com/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.nuodb.com']);"><strong>NuoDB</strong></a>: SQL/ACID compliant distributed database</li><br><li><a href="http://senseidb.com/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://senseidb.com']);"><strong>SenseiDB</strong></a>: distributed, realtime, semi-structured database</li><br><li><a href="http://skydb.io/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://skydb.io']);"><strong>Sky</strong></a>: database used for flexible, high performance analysis of behavioral data</li><br><li><a href="http://www.symmetricds.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.symmetricds.org']);"><strong>SymmetricDS</strong></a>: open source software for both file and database synchronization</li><br></ul><br><p><strong>SQL-like processing</strong></p><br><ul><br><li><a href="https://github.com/amplab/shark/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>AMPLAB Shark</strong></a>: data warehouse system for Spark</li><br><li><a href="http://incubator.apache.org/drill/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://incubator.apache.org']);"><strong>Apache Drill</strong></a>: framework for interactive analysis, inspired by Dremel</li><br><li><a href="http://hive.apache.org/docs/hcat_r0.5.0/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hive.apache.org']);"><strong>Apache HCatalog</strong></a>: table and storage management layer for Hadoop</li><br><li><a href="http://hive.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hive.apache.org']);"><strong>Apache Hive</strong></a>: SQL-like data warehouse system for Hadoop</li><br><li><a href="http://phoenix.incubator.apache.org/index.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://phoenix.incubator.apache.org']);"><strong>Apache Phoenix</strong></a>: SQL skin over HBase</li><br><li><a href="http://blinkdb.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://blinkdb.org']);"><strong>BlinkDB</strong></a>: massively parallel, approximate query engine</li><br><li><a href="http://www.cloudera.com/content/cloudera/en/products/cdh/impala.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.cloudera.com']);"><strong>Cloudera Impala</strong></a>: framework for interactive analysis, Inspired by Dremel</li><br><li><a href="http://www.cascading.org/lingual/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.cascading.org']);"><strong>Concurrent Lingual</strong></a>: SQL-like query language for Cascading</li><br><li><strong>Datasalt Splout SQL</strong>: full SQL query engine for big datasets</li><br><li><a href="http://prestodb.io/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://prestodb.io']);"><strong>Facebook PrestoDB</strong></a>: distributed SQL query engine</li><br><li><a href="http://research.google.com/pubs/pub36632.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://research.google.com']);"><strong>Google BigQuery</strong></a>: framework for interactive analysis, implementation of Dremel</li><br><li><a href="http://www.gopivotal.com/pivotal-products/data/pivotal-hd" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.gopivotal.com']);"><strong>Pivotal HAWQ</strong></a>: SQL-like data warehouse system for&nbsp;Hadoop</li><br><li><a href="http://databricks.com/blog/2014/03/26/Spark-SQL-manipulating-structured-data-using-Spark.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://databricks.com']);"><strong>SparkSQL</strong></a>: Manipulating Structured Data Using Spark</li><br><li><a href="http://hortonworks.com/labs/stinger/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hortonworks.com']);"><strong>Stinger</strong></a>: interactive query for Hive</li><br><li><a href="http://tajo.incubator.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://tajo.incubator.apache.org']);"><strong>Tajo</strong></a>: distributed data warehouse system on Hadoop</li><br></ul><br><p><strong>Data Ingestion</strong></p><br><ul><br><li><a href="http://aws.amazon.com/kinesis/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://aws.amazon.com']);"><strong>Amazon Kinesis</strong></a>: real-time processing of streaming data at massive scale</li><br><li><a href="http://incubator.apache.org/chukwa/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://incubator.apache.org']);"><strong>Apache Chukwa</strong></a>: data collection system</li><br><li><a href="http://flume.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://flume.apache.org']);"><strong>Apache Flume</strong></a>: service to manage large amount of log data</li><br><li><a href="http://kafka.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://kafka.apache.org']);"><strong>Apache Kafka</strong></a>: distributed publish-subscribe messaging system</li><br><li><a href="http://samza.incubator.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://samza.incubator.apache.org']);"><strong>Apache Samza</strong></a>: stream processing framework, based on Kafla and YARN</li><br><li><a href="http://sqoop.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://sqoop.apache.org']);"><strong>Apache Sqoop</strong></a>: tool to transfer data between Hadoop and a structured datastore</li><br><li><strong>Cloudera Morphline</strong>: framework that help ETL to Solr, HBase and HDFS</li><br><li><a href="https://github.com/facebook/scribe" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Facebook Scribe</strong></a>: streamed log data aggregator</li><br><li><a href="http://fluentd.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://fluentd.org']);"><strong>Fluentd</strong></a>: tool to collect events and logs</li><br><li><strong>HIHO</strong>: framework for connecting disparate data sources with Hadoop</li><br><li><a href="http://robey.github.io/kestrel/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://robey.github.io']);"><strong>Kestrel</strong></a>: distributed message queue system</li><br><li><a href="http://data.linkedin.com/projects/databus" onclick="javascript:console.log(['_trackEvent','outbound-article','http://data.linkedin.com']);"><strong>LinkedIn Databus</strong></a>: stream of change capture events for a database</li><br><li><a href="https://github.com/linkedin/kamikaze" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>LinkedIn Kamikaze</strong></a>: utility package for compressing sorted integer arrays</li><br><li><a href="https://github.com/linkedin/white-elephant" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>LinkedIn White Elephant</strong></a>: log aggregator and dashboard</li><br><li><strong>Netflix Suro</strong>: log agregattor like Storm and Samza based on Chukwa</li><br></ul><br><p><strong>Service Programming</strong></p><br><ul><br><li><strong>Akka Toolkit</strong>:</li><br><li><a href="http://avro.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://avro.apache.org']);"><strong>Apache Avro</strong></a>: data serialization system</li><br><li><strong>Apache Curator</strong>: Java libaries for Apache ZooKeeper</li><br><li><strong>Apache Karaf</strong>: OSGi runtime that runs on top of any OSGi framework</li><br><li><a href="http://thrift.apache.org//" onclick="javascript:console.log(['_trackEvent','outbound-article','http://thrift.apache.org']);"><strong>Apache Thrift</strong></a>: framework to build binary protocols</li><br><li><a href="http://zookeeper.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://zookeeper.apache.org']);"><strong>Apache Zookeeper</strong></a>: centralized service for process management</li><br><li><a href="http://research.google.com/archive/chubby.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://research.google.com']);"><strong>Google Chubby</strong></a>: a lock service for loosely-coupled distributed systems</li><br><li><a href="http://data.linkedin.com/opensource/norbert" onclick="javascript:console.log(['_trackEvent','outbound-article','http://data.linkedin.com']);"><strong>Linkedin Norbert</strong></a>: cluster manager</li><br><li><a href="http://www.open-mpi.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.open-mpi.org']);"><strong>OpenMPI</strong></a>: message passing framework</li><br><li><a href="http://www.serfdom.io/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.serfdom.io']);"><strong>Serf</strong></a>: decentralized solution for service discovery and orchestration</li><br><li><a href="https://github.com/spring-projects/spring-xd" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Spring XD</strong></a>:</li><br><li><a href="https://github.com/kevinweil/elephant-bird" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Twitter Elephant Bird</strong></a>: libraries for working with LZOP-compressed data</li><br><li><strong>Twitter Finagle</strong>: asynchronous network stack for the JVM</li><br></ul><br><p><strong>Scheduling</strong></p><br><ul><br><li><a href="http://falcon.incubator.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://falcon.incubator.apache.org']);"><strong>Apache Falcon</strong></a>: data management framework</li><br><li><a href="http://oozie.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://oozie.apache.org']);"><strong>Apache Oozie</strong></a>: workflow job scheduler</li><br><li><a href="http://airbnb.github.io/chronos/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://airbnb.github.io']);"><strong>Chronos</strong></a>: distributed and fault-tolerant scheduler</li><br><li><a href="http://azkaban.github.io/azkaban2/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://azkaban.github.io']);"><strong>Linkedin Azkaban</strong></a>: batch workflow job scheduler</li><br></ul><br><p><strong>Machine Learning</strong></p><br><ul><br><li><a href="http://mahout.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://mahout.apache.org']);"><strong>Apache Mahout</strong></a>: machine learning library for Hadoop</li><br><li><a href="https://github.com/cloudera/oryx" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Cloudera Oryx</strong></a>: real-time large-scale machine learning</li><br><li><a href="http://www.cascading.org/pattern/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.cascading.org']);"><strong>Concurrent Pattern</strong></a>: machine learning library for Cascading</li><br><li><a href="http://www.etcml.com/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.etcml.com']);"><strong>etcML</strong></a>: text classification with machine learning</li><br><li><a href="http://0xdata.github.io/h2o/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://0xdata.github.io']);"><strong>H2O</strong></a>: statistical, machine learning and math runtime for Hadoop</li><br><li><a href="http://www.mlbase.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.mlbase.org']);"><strong>MLbase</strong></a>: distributed machine learning libraries for the BDAS stack</li><br><li><a href="http://prediction.io/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://prediction.io']);"><strong>PredictionIO</strong></a>: machine learning server buit on Hadoop, Mahout and Cascading</li><br><li><a href="http://spark.apache.org/docs/0.9.0/mllib-guide.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://spark.apache.org']);"><strong>Spark MLlib</strong></a>: a Spark implementation of some common machine learning (ML) functionality</li><br><li><a href="https://github.com/JohnLangford/vowpal_wabbit/wiki" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Vowpal Wabbit</strong></a>: learning system sponsored by Microsoft and Yahoo!</li><br><li><strong>WEKA</strong>: suite of machine learning software</li><br></ul><br><p><strong>Bechmarking</strong></p><br><ul><br><li><a href="https://issues.apache.org/jira/browse/MAPREDUCE-3561" onclick="javascript:console.log(['_trackEvent','outbound-article','http://issues.apache.org']);"><strong>Apache Hadoop Benchmarking</strong></a>: micro-benchmarks for testing Hadoop performances</li><br><li><a href="https://github.com/SWIMProjectUCB/SWIM/wiki" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Berkeley SWIM Benchmark</strong></a>: real-world big data workload benchmark</li><br><li><strong>Intel HiBench</strong>: a Hadoop benchmark suite</li><br><li><a href="https://issues.apache.org/jira/browse/MAPREDUCE-5116" onclick="javascript:console.log(['_trackEvent','outbound-article','http://issues.apache.org']);"><strong>PUMA Benchmarking</strong></a>: benchmark suite for MapReduce applications</li><br><li><strong>Yahoo Gridmix3</strong>: Hadoop cluster benchmarking from Yahoo engineer team</li><br></ul><br><p><strong>Security</strong></p><br><ul><br><li><strong>Apache Knox Gateway</strong>: single point of secure access for Hadoop clusters</li><br><li><strong>Apache Sentry</strong>: security module for data stored in Hadoop</li><br></ul><br><p><strong>System Deployment</strong></p><br><ul><br><li><a href="http://ambari.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://ambari.apache.org']);"><strong>Apache Ambari</strong></a>: operational framework for Hadoop mangement</li><br><li><a href="http://bigtop.apache.org//" onclick="javascript:console.log(['_trackEvent','outbound-article','http://bigtop.apache.org']);"><strong>Apache Bigtop</strong></a>: system deployment framework for the Hadoop ecosystem</li><br><li><a href="http://helix.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://helix.apache.org']);"><strong>Apache Helix</strong></a>: cluster management framework</li><br><li><a href="http://mesos.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://mesos.apache.org']);"><strong>Apache Mesos</strong></a>: cluster manager</li><br><li><a href="http://whirr.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://whirr.apache.org']);"><strong>Apache Whirr</strong></a>: set of libraries for running cloud services</li><br><li><strong>Brooklyn</strong>: library that simplifies application deployment and management</li><br><li><a href="http://buildoop.github.io/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://buildoop.github.io']);"><strong>Buildoop</strong></a>: Similar to Apache BigTop based on Groovy language</li><br><li><strong>Cloudera HUE</strong>: web application for interacting with Hadoop</li><br><li><strong>Facebook Prism</strong>: multi datacenters replication system</li><br><li><a href="http://www.wired.com/wiredenterprise/2013/03/google-borg-twitter-mesos/all/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.wired.com']);"><strong>Google Borg</strong></a>: job scheduling and monitoring system</li><br><li><a href="https://www.youtube.com/watch?v=0ZFMlO98Jkc" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.youtube.com']);"><strong>Google Omega</strong></a>: job scheduling and monitoring system</li><br><li><a href="http://hortonworks.com/blog/introducing-hoya-hbase-on-yarn/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hortonworks.com']);"><strong>Hortonworks HOYA</strong></a>: application that can deploy HBase cluster on YARN</li><br><li><strong>Marathon</strong>: Mesos framework for long-running services</li><br></ul><br><p><strong>Applications</strong></p><br><ul><br><li><strong>Apache Kiji</strong>: framework to collect and analyze data in real-time, based on&nbsp;HBase</li><br><li><strong>Apache Nutch</strong>: open source web crawler</li><br><li><strong>Apache OODT</strong>: capturing, processing and sharing of data for NASAs scientific archives</li><br><li><a href="https://tika.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://tika.apache.org']);"><strong>Apache Tika</strong></a>: content analysis toolkit</li><br><li><strong>Eclipse BIRT</strong>: Eclipse-based reporting system</li><br><li><strong>HIPI Library</strong>: API for performing image processing tasks on Hadoops MapReduce</li><br><li><a href="http://www.splunk.com/download/hunk" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.splunk.com']);"><strong>Hunk</strong></a>: Splunk analytics for Hadoop</li><br><li><strong>Jedox Palo</strong>: customisable Business Intelligence platform</li><br><li><a href="http://madlib.net/community/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://madlib.net']);"><strong>MADlib</strong></a>: data-processing library of an RDBMS to analyze data</li><br><li><a><strong>PivotalR</strong></a>: R on Pivotal HD / HAWQ and PostgreSQL</li><br><li><strong>Spango BI</strong>:</li><br><li><a href="http://amplab-extras.github.io/SparkR-pkg/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://amplab-extras.github.io']);"><strong>SparkR</strong></a>: R frontend for Spark</li><br><li><a href="http://www.splunk.com/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.splunk.com']);"><strong>Splunk</strong></a>: analyzer for machine-generated date</li><br><li><strong>Talend</strong>:</li><br></ul><br><p><strong>Search engine and framework</strong></p><br><ul><br><li><a href="http://lucene.apache.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://lucene.apache.org']);"><strong>Apache Lucene</strong></a>: Search engine library</li><br><li><a href="http://lucene.apache.org/solr/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://lucene.apache.org']);"><strong>Apache Solr</strong></a>: Search platform for Apache Lucene</li><br><li><a href="http://www.elasticsearch.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.elasticsearch.org']);"><strong>ElasticSearch</strong></a>: Search and analytics engine based on Apache&nbsp;Lucene</li><br><li><strong>Facebook Unicorn</strong>: social graph search platform</li><br><li><a href="http://googleblog.blogspot.it/2010/06/our-new-search-index-caffeine.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://googleblog.blogspot.it']);"><strong>Google Caffeine</strong></a>: continuous indexing system</li><br><li><a href="http://research.google.com/pubs/pub36726.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://research.google.com']);"><strong>Google Percolator</strong></a>: continuous indexing system</li><br><li><a><strong>TeraGoogle</strong></a>: large search index</li><br><li><a href="https://blogs.apache.org/hbase/entry/coprocessor_introduction" onclick="javascript:console.log(['_trackEvent','outbound-article','http://blogs.apache.org']);"><strong>HBase Comprocessor</strong></a>: implementation of&nbsp;Percolator, part of&nbsp;HBase</li><br><li><a href="http://sphinxsearch.com/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://sphinxsearch.com']);"><strong>Sphnix Search Server</strong></a>: fulltext search engine</li><br></ul><br><p><strong>MySQL forks and evolutions</strong></p><br><ul><br><li><a href="http://aws.amazon.com/rds/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://aws.amazon.com']);"><strong>Amazon RDS</strong></a>: MySQL databases in Amazons cloud</li><br><li><strong>Drizzle</strong>: evolution of MySQL 6.0</li><br><li><a href="https://developers.google.com/cloud-sql/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://developers.google.com']);"><strong>Google Cloud SQL</strong></a>: MySQL databases in Googles cloud</li><br><li><a href="https://mariadb.org/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://mariadb.org']);"><strong>MariaDB</strong></a>: enhanced, drop-in replacement for MySQL</li><br><li><a href="http://www.mysql.com/products/cluster/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.mysql.com']);"><strong>MySQL Cluster</strong></a>: MySQL implementation using NDB Cluster storage engine</li><br><li><a href="http://www.percona.com/software/percona-server" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.percona.com']);"><strong>Percona Server</strong></a>: enhanced, drop-in replacement for MySQL</li><br><li><a href="https://github.com/renecannao/proxysql" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>ProxySQL</strong></a>: High Performance Proxy for MySQL</li><br><li><strong>TokuDB</strong>: TokuDB is a storage engine for MySQL and MariaDB</li><br></ul><br><p><strong>Memcached forks and evolutions</strong></p><br><ul><br><li><a href="https://www.facebook.com/notes/facebook-engineering/mcdipper-a-key-value-cache-for-flash-storage/10151347090423920" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.facebook.com']);"><strong>Facebook McDipper</strong></a>: key/value cache for flash storage</li><br><li><a href="https://www.facebook.com/notes/facebook-engineering/scaling-memcache-at-facebook/10151411410803920" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.facebook.com']);"><strong>Facebook Memcached</strong></a>: fork of Memcache</li><br><li><a href="https://github.com/twitter/twemproxy" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Twemproxy</strong></a>: A fast, light-weight proxy for memcached and redis</li><br><li><a href="https://github.com/twitter/fatcache" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Twitter Fatcache</strong></a>: key/value cache for flash storage</li><br><li><a href="https://github.com/twitter/twemcache" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);"><strong>Twitter Twemcache</strong></a>: fork of Memcache</li><br></ul><br><p><strong>Embemmed Databases</strong></p><br><ul><br><li><a href="http://www.oracle.com/us/products/database/berkeley-db/overview/index.html" onclick="javascript:console.log(['_trackEvent','outbound-article','http://www.oracle.com']);"><strong>BerkeleyDB</strong></a>: a software library that provides a high-performance embedded database for key/value data</li><br><li><a href="https://code.google.com/p/leveldb/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://code.google.com']);"><strong>LevelDB</strong></a>: a fast key-value storage library written at Google that provides an ordered mapping from string keys to string values.</li><br><li><a href="http://symas.com/mdb/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://symas.com']);"><strong>LMDB</strong></a>: ultra-fast, ultra-compact key-value embedded data store developed by Symas</li><br></ul><br><p>This page is built merging the&nbsp;<a href="http://hadoopecosystemtable.github.io/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://hadoopecosystemtable.github.io']);">Hadoop Ecosystem Table</a>&nbsp;(by&nbsp;<a href="http://es.linkedin.com/in/javiroman/" onclick="javascript:console.log(['_trackEvent','outbound-article','http://es.linkedin.com']);">Javi Roman</a>&nbsp;and&nbsp;<a href="https://github.com/hadoopecosystemtable/hadoopecosystemtable.github.io/graphs/contributors" onclick="javascript:console.log(['_trackEvent','outbound-article','http://github.com']);">other contributors</a>) with previous version of this list.&nbsp;Look at the extended version here: <strong><a href="http://bigdata.andreamostosi.name">http://bigdata.andreamostosi.name</a></strong></p><br><p><strong>Interesting papers 2001  2010</strong></p><br><ul><br><li>2003 -&nbsp;<strong>Google</strong>&nbsp;-&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/gfs-sosp2003.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/gfs-sosp2003.pdf']);">The <strong>Google File System</strong></a></li><br><li>2004 -&nbsp;<strong>Google</strong>&nbsp;-&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/mapreduce-osdi04.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/mapreduce-osdi04.pdf']);"><strong>MapReduce</strong>: Simplied Data Processing on Large Clusters</a></li><br><li>2006 -&nbsp;<strong>Google</strong>&nbsp;-&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/bigtable-osdi06.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/bigtable-osdi06.pdf']);"><strong>Bigtable</strong>: A Distributed Storage System for Structured Data</a></li><br><li>2006  <strong>Google</strong>&nbsp;-&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/chubby-osdi06.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/chubby-osdi06.pdf']);">The <strong>Chubby</strong> lock service for loosely-coupled distributed systems</a></li><br><li>2007  <strong>Amazon</strong> -&nbsp;<a href="http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/decandia07dynamo.pdf" onclick="javascript:console.log(['_trackEvent','download','http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/decandia07dynamo.pdf']);"><strong>Dynamo</strong>: Amazons Highly Available Key-value Store</a></li><br><li>2007 -&nbsp;<a href="http://www.cs.utexas.edu/users/lorenzo/corsi/cs380d/papers/paper2-1.pdf" onclick="javascript:console.log(['_trackEvent','download','http://www.cs.utexas.edu/users/lorenzo/corsi/cs380d/papers/paper2-1.pdf']);">Paxos Made Live  An Engineering Perspective</a>,&nbsp;describe <strong>Chubby</strong></li><br><li>2008  <strong>AMPLab</strong> -&nbsp;<a href="http://www.cca08.org/papers/Paper-13-Ariel-Rabkin.pdf" onclick="javascript:console.log(['_trackEvent','download','http://www.cca08.org/papers/Paper-13-Ariel-Rabkin.pdf']);"><strong>Chukwa</strong>: A large-scale monitoring system</a></li><br><li>2009 -&nbsp;<a href="http://www.vldb.org/pvldb/2/vldb09-861.pdf" onclick="javascript:console.log(['_trackEvent','download','http://www.vldb.org/pvldb/2/vldb09-861.pdf']);"><strong>HadoopDB</strong>: An Architectural Hybrid of MapReduce and DBMS Technologies for Analytical Workloads</a></li><br><li>2010  <strong>Yahoo</strong> -&nbsp;<a href="http://www.4lunas.org/pub/2010-s4.pdf" onclick="javascript:console.log(['_trackEvent','download','http://www.4lunas.org/pub/2010-s4.pdf']);"><strong>S4</strong>: Distributed Stream Computing Platform</a></li><br><li>2010 -&nbsp;<strong>Google</strong>&nbsp;-&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/36632.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/36632.pdf']);"><strong>Dremel</strong>: Interactive Analysis of Web-Scale Datasets</a></li><br><li>2010 -&nbsp;<strong>Google</strong>&nbsp;-&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/36726.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/36726.pdf']);">Large-scale Incremental Processing Using Distributed Transactions and Noti?cations</a>&nbsp;base of <strong>Percolator</strong> and <strong>Caffeine</strong></li><br><li>2010 -&nbsp;<strong>Google</strong>&nbsp;-&nbsp;<a href="http://kowshik.github.io/JPregel/pregel_paper.pdf" onclick="javascript:console.log(['_trackEvent','download','http://kowshik.github.io/JPregel/pregel_paper.pdf']);"><strong>Pregel</strong>: A System for Large-Scale Graph Processing</a></li><br><li>2010  <strong>Google</strong> -&nbsp;<a href="http://static.googleusercontent.com/media/research.google.com/en/us/university/relations/facultysummit2010/storage_architecture_and_challenges.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/media/research.google.com/en/us/university/relations/facultysummit2010/storage_architecture_and_challenges.pdf']);">Storage Architecture and Challenges&nbsp;</a></li><br><li>2010  <strong>AMPLab</strong> -&nbsp;<a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2011/06/Spark-Cluster-Computing-with-Working-Sets.pdf" onclick="javascript:console.log(['_trackEvent','download','http://amplab.cs.berkeley.edu/wp-content/uploads/2011/06/Spark-Cluster-Computing-with-Working-Sets.pdf']);"><strong>Spark</strong>: Cluster Computing with Working Sets</a></li><br><li>2010  <strong>Facebook</strong> -&nbsp;<a href="https://www.usenix.org/legacy/event/osdi10/tech/full_papers/Beaver.pdf" onclick="javascript:console.log(['_trackEvent','download','http://www.usenix.org/legacy/event/osdi10/tech/full_papers/Beaver.pdf']);">Finding a needle in <strong>Haystack</strong>: Facebooks photo storage</a></li><br></ul><br><p><strong>Interesting papers 2011  2012</strong></p><br><ul><br><li>2011  <strong>Google</strong> -&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/36971.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/36971.pdf']);"><strong>Megastore</strong>: Providing Scalable, Highly Available Storage for Interactive Services</a></li><br><li>2011  <strong>AMPLab</strong> -&nbsp;<a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2011/06/Mesos-A-Platform-for-Fine-Grained-Resource-Sharing-in-the-Data-Center.pdf" onclick="javascript:console.log(['_trackEvent','download','http://amplab.cs.berkeley.edu/wp-content/uploads/2011/06/Mesos-A-Platform-for-Fine-Grained-Resource-Sharing-in-the-Data-Center.pdf']);"><strong>Mesos</strong>: A Platform for Fine-Grained Resource Sharing in the Data Center</a></li><br><li>2011  <strong>AMPLab</strong> -&nbsp;<a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2011/06/euro118-ananthanarayanan.pdf" onclick="javascript:console.log(['_trackEvent','download','http://amplab.cs.berkeley.edu/wp-content/uploads/2011/06/euro118-ananthanarayanan.pdf']);"><strong>Scarlett</strong>: Coping with Skewed Popularity Content in MapReduce Clusters</a></li><br><li>2012  <strong>Google</strong> -&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/spanner-osdi2012.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/spanner-osdi2012.pdf']);"><strong>Spanner</strong>: Googles Globally-Distributed Database</a>&nbsp;(describe also <strong>Colossus</strong>)</li><br><li>2012  <strong>Google</strong> -&nbsp;<a href="http://vldb.org/pvldb/vol5/p1436_alexanderhall_vldb2012.pdf" onclick="javascript:console.log(['_trackEvent','download','http://vldb.org/pvldb/vol5/p1436_alexanderhall_vldb2012.pdf']);">Processing a trillion cells per mouse click</a>&nbsp;(base of <strong>PowerDrill</strong>)</li><br><li>2013  <strong>AMPLab</strong> -&nbsp;<a href="http://arxiv.org/pdf/1203.5485.pdf" onclick="javascript:console.log(['_trackEvent','download','http://arxiv.org/pdf/1203.5485.pdf']);"><strong>BlinkDB</strong>: Queries with Bounded Errors and Bounded Response Times on Very Large Data</a></li><br><li>2012  <strong>Microsoft</strong> -&nbsp;<a href="http://research.microsoft.com/pubs/178045/ppaoxs-paper29.pdf" onclick="javascript:console.log(['_trackEvent','download','http://research.microsoft.com/pubs/178045/ppaoxs-paper29.pdf']);">Paxos Made Parallel</a>&nbsp;(base of <strong>Tribble)</strong></li><br><li>2012  <strong>Microsoft</strong> -&nbsp;<a href="https://www.usenix.org/legacy/event/nsdi11/tech/full_papers/Bolosky.pdf" onclick="javascript:console.log(['_trackEvent','download','http://www.usenix.org/legacy/event/nsdi11/tech/full_papers/Bolosky.pdf']);">Paxos Replicated State Machines as the Basis of a High-Performance Data Store</a></li><br><li>2012  <strong>AMPLab</strong> -&nbsp;<a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2012/03/mod482-xin1.pdf" onclick="javascript:console.log(['_trackEvent','download','http://amplab.cs.berkeley.edu/wp-content/uploads/2012/03/mod482-xin1.pdf']);"><strong>Shark</strong>: Fast Data Analysis Using Coarse-grained Distributed Memory</a></li><br><li>2012  <strong>AMPLab</strong> -&nbsp;<a href="https://www.usenix.org/system/files/login/articles/zaharia.pdf" onclick="javascript:console.log(['_trackEvent','download','http://www.usenix.org/system/files/login/articles/zaharia.pdf']);">Fast and Interactive Analytics over Hadoop Data with <strong>Spark</strong></a></li><br><li>2012  <strong>AMPLab</strong> -&nbsp;<a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/04/blinkdb_vldb12_demo.pdf" onclick="javascript:console.log(['_trackEvent','download','http://amplab.cs.berkeley.edu/wp-content/uploads/2013/04/blinkdb_vldb12_demo.pdf']);">Blink and Its Done: Interactive Queries on Very Large Data</a></li><br></ul><br><p><strong>Interesting papers 2013  present</strong></p><br><ul><br><li>2013  <strong>Facebook</strong>  <a href="https://www.usenix.org/system/files/conference/nsdi13/nsdi13-final170_update.pdf" onclick="javascript:console.log(['_trackEvent','download','http://www.usenix.org/system/files/conference/nsdi13/nsdi13-final170_update.pdf']);">Scaling Memcache at Facebook</a></li><br><li>2013 -&nbsp;<strong>Facebook</strong>&nbsp;-&nbsp;<a href="http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p871-curtiss.pdf" onclick="javascript:console.log(['_trackEvent','download','http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p871-curtiss.pdf']);"><strong>Unicorn</strong>: A System for Searching the Social Graph</a></li><br><li>2013 -&nbsp;<strong>Facebook</strong>&nbsp;-&nbsp;<a href="http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p767-wiener.pdf" onclick="javascript:console.log(['_trackEvent','download','http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p767-wiener.pdf']);"><strong>Scuba</strong>: Diving into Data at Facebook</a></li><br><li>2013  <strong>Google</strong> -&nbsp;<a href="http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p734-akidau.pdf" onclick="javascript:console.log(['_trackEvent','download','http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p734-akidau.pdf']);"><strong>MillWheel</strong>: Fault-Tolerant Stream Processing at Internet Scale</a></li><br><li>2013 -&nbsp;<strong>Google</strong>&nbsp;-&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/pubs/archive/41344.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/pubs/archive/41344.pdf']);"><strong>F1</strong>: A Distributed SQL Database That Scales</a></li><br><li>2013 -&nbsp;<strong>Google</strong>&nbsp;-&nbsp;<a href="http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p764-rae.pdf" onclick="javascript:console.log(['_trackEvent','download','http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p764-rae.pdf']);">Online, Asynchronous Schema Change in <strong>F1</strong></a></li><br><li>2013  <strong>Metamarkets</strong> -&nbsp;<a href="http://static.druid.io/docs/druid.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.druid.io/docs/druid.pdf']);"><strong>Druid</strong>: A Real-time Analytical Data Store</a></li><br><li>2013  <strong>Microsoft</strong> -&nbsp;<a href="http://research.microsoft.com/pubs/200169/now-vldb.pdf" onclick="javascript:console.log(['_trackEvent','download','http://research.microsoft.com/pubs/200169/now-vldb.pdf']);">Scalable Progressive Analytics on Big Data in the Cloud</a></li><br><li>2013  <strong>Google</strong> -&nbsp;<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/40671.pdf" onclick="javascript:console.log(['_trackEvent','download','http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/40671.pdf']);"><strong>HyperLogLog</strong> in Practice: Algorithmic Engineering of a State of The Art Cardinality Estimation Algorithm</a></li><br><li>2013  <strong>AMPLab</strong> -&nbsp;<a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/05/grades-graphx_with_fonts.pdf" onclick="javascript:console.log(['_trackEvent','download','http://amplab.cs.berkeley.edu/wp-content/uploads/2013/05/grades-graphx_with_fonts.pdf']);"><strong>GraphX</strong>: A Resilient Distributed Graph System on Spark</a></li><br><li>2013  <strong>AMPLab</strong> -&nbsp;<a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/02/shark_sigmod2013.pdf" onclick="javascript:console.log(['_trackEvent','download','http://amplab.cs.berkeley.edu/wp-content/uploads/2013/02/shark_sigmod2013.pdf']);"><strong>Shark</strong>: SQL and Rich Analytics at Scale</a></li><br><li>2013  <strong>AMPLab</strong> -&nbsp;<a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/01/dmx1.pdf" onclick="javascript:console.log(['_trackEvent','download','http://amplab.cs.berkeley.edu/wp-content/uploads/2013/01/dmx1.pdf']);"><strong>MLbase</strong>: A Distributed Machine-learning System</a></li><br><li>2013  <strong>AMPLab</strong> -&nbsp;<a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/03/eurosys13-paper83.pdf" onclick="javascript:console.log(['_trackEvent','download','http://amplab.cs.berkeley.edu/wp-content/uploads/2013/03/eurosys13-paper83.pdf']);"><strong>Presto</strong>: Distributed Machine Learning and Graph Processing with Sparse Matrices</a></li><br></ul><br></div><p><hr><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/NoSQL content--><p>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/Web content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devWebLinks" dojoType="com.trivedi.oPls.mPane" tags="Web dev career bookmark" title="devWebLinks"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.w3.org/community/webed/wiki/HTML">HTML v5</a> Mozilla's <a href="https://developer.mozilla.org/en-US/docs/Glossary/CSS">CSS Guide</a> & <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/open">Web API</a> Guide<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Ref: Speaking <a href="http://speakingjs.com/es5/index.html">JavaScript</a>:for Programmers<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.creativebloq.com/">CSS, design etc.</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://resourcecards.com/">Web front end resources</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Online <a href="https://www.dirtymarkup.com">JS Beautifier</a> & <a href="http://www.cleancss.com/html-beautify/">#2</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://learn.jquery.com/using-jquery-core/">jQuery ref</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://jsbin.com">jsBin, live console for js</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://query.yahooapis.com/">Yahoo Query API ref</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://anicollection.github.io/#/">Anicollection</a> a site with animated windows (probably useless, but whatever)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/VerbalExpressions/JSVerbalExpressions">VerbalExpressions</a> a JS plain language RegEx builder<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.chartjs.org/">Chartjs</a> a JS chart builder w/8 types<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.dreamstime.com/">Stock photos</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.0to255.com/">Color picker</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://letsencrypt.org/">A free Certificate Authority for https</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br>&nbsp;&nbsp;&nbsp;&nbsp;Adobe <a href="https://color.adobe.com/explore/most-popular/?time=all">color</a> schemes<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;List of JavaScript Crypto libraries. ?? <a href="https://gist.github.com/jo/8619441">GitHub</a><p>Cloud IDEs For Web Developers  <a href="http://www.hongkiat.com/blog/cloud-ide-developers/">Best Of</a><p>s like UX <a href="http://ux.stackexchange.com/">Stack Exchange</a> and free <a href="http://www.uxpin.com/knowledge.html">UX ebooks</a>.<p><a href="https://compressor.io/">image compression</a><p><h3><b>Some</b> links from srch results for <a href="http://htmlpreview.github.io/?https://gist.githubusercontent.com/anonymous/a012a9ca0af46fe15e44cea5e98711bc/raw/2a140751798602fa41d5bba31d1f042b5c1ac291/mike.html">javascript</a> snippets libraries<br></h3><br>http://www.javascriptsource.com/snippets/<br><br>https://codegeekz.com/15-fresh-javascript-libraries-for-june-2016/<br><br>http://www.snippetlibrary.com/<br><br>https://developer.mozilla.org/en-US/Add-ons/Code_snippets<br><br>https://msdn.microsoft.com/en-us/library/ms165392.aspx<br><br>https://code.rtcx.net/code-library/<br><br>https://softchief.com/javascript-snippets/<br><br>https://www.codelibrary.me/<br><br>https://www.javascript.com/<br><br>http://www.noupe.com/inspiration/20-code-snippets-contact-forms-98615.html<br><br>https://css-tricks.com/<br><br>http://javascript-html5-tutorial.net/2016/03/21/hashids-generate-short-unique-ids-in-javascript-and-other-languages.html<br><br>http://www.queness.com/code-snippets<br><br>https://www.webcodegeeks.com/category/html5/<br><br>https://medium.com/@thomasfuchs/what-if-we-had-a-great-standard-library-in-javascript-52692342ee3f<br><br>https://www.webcodegeeks.com/javascript/javascript-date-format-example/<br><br>http://stackoverflow.com/questions/1643321/javascript-why-the-anonymous-function-wrapper<br><br>https://www.sitepoint.com/design-and-build-your-own-javascript-library/<br><br>http://www.cssflow.com/<br><br>https://bytecode77.com/<br><br>https://adtmag.com/blogs/dev-watch/2016/05/javascript-changes.aspx<br><br>https://www.reddit.com/r/learnprogramming/comments/4uc9r7/eli5_the_popular_javascript_libraries_jquery/<br><br>http://webscripts.softpedia.com/cat/Snippets-list-89-1-0-0.html<br><br>https://www.sitepoint.com/community/t/this-week-in-javascript-11-april-2016/220687<br><br>http://codepad.co/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br><h2>TAG CLOUDS</h2><br><br>(Nice tho unwieldy: <a href="http://www.cssflow.com/snippets/sliding-tags">Sliding Tags</a> (Tags, Tag Cloud, Tag, CSS3 Transitions)<br><br><br><br>https://www.npmjs.com/<br><br><br><br><a href="https://www.npmjs.com/package/tag-explorer">tag-explorer</a> A js library that creates a tag cloud that can filter articles additively by multiple tags.<br> <br><br><br>http://i2ui.com/ (has tagCloud js lib)  ex-> http://jsfiddle.net/7GcKT/4/<br><br>https://www.jasondavies.com/wordcloud/about/  (ex -> http://bl.ocks.org/yaph/5913997)<br> <br><br><br>https://www.sitepoint.com/javascript/<br> <br><br><br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;document.getElementById('cloud-tag-container').oncontextmenu = function(evt) {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if (evt.target.classList.contains('tag')) {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;// then you right clicked on the span with class 'tag'<br><br>&nbsp;&nbsp;&nbsp;&nbsp;// perform your actions here<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br><br><br><br><br><br>(clouds):<br><br>You could easily do it with your CMS and css<br><br><br><code><p><br>div class=".cloud"<br><br>a href="#" class="weight-1"Cloud/a<br><br>a href="#" class="weight-2"Cloud/a<br><br>/div<br><br>css:<br><br><br><br>.cloud .weight-1 { font-size: 10px; }<br><br>.cloud .weight-2 { font-size: 15px; }<br><br>Your CMS would generate the weights and apply the appropriate styling.<br><br><br><br>var backgrounds = ['gray', 'red', 'blue'];<br><br>var elements = document.getElementsByClassName('blogpost');<br><br>for (i=0; i [ elements.length; i++) {<br><br>// the following could be slightly optimized by storing the value to<br><br>// backgrounds.length before the loop starts<br><br>elements[i].className += ' ' + backgrounds[i%backgrounds.length];<br><br><p>Ref: dojo.lang.hitch:<p><br>Pitfall: Functions Inside Methods Shadow thisYou often nest function definitions in JavaScript, because functions can be parameters (e.g., callbacks) and because they can be created in place, via function expressions. This poses a problem when a method contains a normal function and you want to access the formers this inside the latter, because the methods this is shadowed by the normal functions this (which doesnt even have any use for its own this).<p>In the following example, the function at (1) tries to access the methods this at (2):<p>var obj = {name: 'Jane',friends: [ 'Tarzan', 'Cheeta' ],<br>Loop:<br>function () {<br>&nbsp;&nbsp;&nbsp;&nbsp;'use strict';<br>&nbsp;&nbsp;&nbsp;&nbsp;this.friends.forEach(<br>&nbsp;&nbsp;&nbsp;&nbsp;function (friend) {  // (1)<br>&nbsp;&nbsp;&nbsp;&nbsp;console.log(this.name+' knows '+friend);  // (2)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;);<br>}};<p>This fails, because the function at (1) has its own this, which is undefined here<br>:> obj.loop();TypeError: Cannot read property 'name' of undefined<p>There are three ways to work around this problem.<p><br>Workaround 1: that = thisWe assign this to a variable that wont be shadowed inside the nested function:loop: function () {'use strict';var that = this;this.friends.forEach(function (friend) {&nbsp;&nbsp;&nbsp;&nbsp;console.log(that.name+' knows '+friend);});}Heres the interaction:> obj.loop();Jane knows TarzanJane knows Cheeta<p>Workaround 2: bind()We can use bind() to give the callback a fixed value for thisnamely, the methods this (line (1)):loop: function () {'use strict';this.friends.forEach(function (friend) {&nbsp;&nbsp;&nbsp;&nbsp;console.log(this.name+' knows '+friend);}.bind(this));  // (1)}<p>Workaround 3: a thisValue for forEach()<br>A workaround that is specific to forEach() (see Examination Methods) is to provide a secondparameter after the callback that becomes the this of the callback:<br>Loop:<br>function () {'use strict';<br>this.friends.forEach(function (friend) {<br>&nbsp;&nbsp;&nbsp;&nbsp;console.log(this.name+' knows '+friend);<br>}, this);}<p>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<p>an antipattern used by programmers who want to access a property whose name is stored in a variable propName: var value = eval('obj.'+propName);The idea makes sense: the dot operator only supports fixed, statically provided property keys. In this case, the property key is only known at runtime, which is why eval() is needed in order to use that operator. Luckily, JavaScript also has the bracket operator, which does accept dynamic property keys. Therefore, the following is a better version of the preceding code: var value = obj[propName];<p>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br>Warning<p>Avoid invoking hasOwnProperty() directly on an object, as it may be overridden (e.g., by an own property whose key is hasOwnProperty): > var obj = { hasOwnProperty: 1, foo: 2 }; > obj.hasOwnProperty('foo')  // unsafe TypeError: Property 'hasOwnProperty' is not a functionInstead, it is better to call it generically (see Generic Methods: Borrowing Methods from Prototypes): > Object.prototype.hasOwnProperty.call(obj, 'foo')  // safe true > {}.hasOwnProperty.call(obj, 'foo')  // shorter true<p>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br>Check for the existence of a property via in and hasOwnProperty // All properties: if (obj.foo)  // no if (obj.foo !== undefined)  // no if ('foo' in obj) ... // yes // Own properties: if (obj.hasOwnProperty('foo')) ... // risky for arbitrary objects if (Object.prototype.hasOwnProperty.call(obj, 'foo')) ... // safe<p>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br></code><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<p></p><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devWebDojoLinks" dojoType="com.trivedi.oPls.mPane" tags="Dojo Web dev career bookmark" title="devWebDojoLinks"><br>&nbsp;&nbsp;&nbsp;&nbsp;<p></p><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='mTitle'>Dojo</span><p>&nbsp;&nbsp;&nbsp;&nbsp;<br>Dojo&nbsp;<a href="http://dojotoolkit.org/api/">API</a>&nbsp;Dojo&nbsp;<a href="http://dojotoolkit.org/documentation/">tutorials</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><a href="http://demos.dojotoolkit.org/demos/">Dojo Demos</a><br>- DOM&nbsp;<a href="http://dojotoolkit.org/documentation/tutorials/1.10/dom_functions/index.html">Manipulation</a><br>- Dojo&nbsp;<a href="http://dojotoolkit.org/documentation/tutorials/1.10/effects/index.html">Effects</a><br>- Dijit&nbsp;<a href="http://dojotoolkit.org/documentation/tutorials/1.10/editor/index.html">Editor</a><br>-&nbsp;<a href="http://dojotoolkit.org/documentation/tutorials/1.10/jsonp/index.html">JSONP</a>&nbsp;with dojo/request<br>- Dijit&nbsp;<a href="http://download.dojotoolkit.org/release-1.9.3/dojo-release-1.9.3/dijit/themes/themeTester.html?theme=claro">theme</a>&nbsp;Tester<br><br><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">- Dijit icon images are in :<br>&nbsp;<br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">- editorIconsEnabled.png (&amp; ~Disabled) :&nbsp;<img src="https:<br>//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/icons/images/editorIconsEnabled.png"></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">- commonIconsObjActEnabled.png (&amp; ~Disabled) :&nbsp;<img src="https://ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/icons/images/commonIconsObjActEnabled.png"></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">They can be used in the following widgets: &nbsp;<b>AccordionContainer, Menu, TabContainer, TitlePane, Tree, and all button widgets</b>.</blockquote><br>&nbsp;<br>for claro; add: media="screen"<br>for JS ; add: data-dojo-config="isDebug: 1, async: 1, parseOnLoad: 1"<br>&nbsp;<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<hr><br><br>http://svn.dojotoolkit.org/src/dojox/trunk/storage/README<br><br>http://svn.dojotoolkit.org/src/dojox/trunk/storage/CookieStorageProvider.js<br><br>http://svn.dojotoolkit.org/src/dojox/trunk/storage/LocalStorageProvider.js<br><br><a href='https://www.reddit.com/r/javascript/comments/52jxnc/using_localstorage_extensively_any_risks_or/'>(reddit) Using localstorage extensively any risks</a><p><hr><br>Dojo Grid options:<br><br><a href="http://oria.github.io/gridx/">gridX</a> & link to its <a href="http://oria.github.io/gridx/gridx/tests/demo/playground.html">playground</a><br><br><a href="http://dgrid.io/">dGrid</a><br><hr><br><pre><br>dojo.registerModulePath = function(/*String*/moduleName, /*String*/prefix){<br>&nbsp;&nbsp;&nbsp;&nbsp;// summary:<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;Maps a module name to a path<br>&nbsp;&nbsp;&nbsp;&nbsp;// description:<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;An unregistered module is given the default path of ../[module],<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;relative to Dojo root. For example, module acme is mapped to<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;../acme.  If you want to use a different module name, use<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;dojo.registerModulePath.<br>&nbsp;&nbsp;&nbsp;&nbsp;// example:<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;If your dojo.js is located at this location in the web root:<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |/myapp/js/dojo/dojo/dojo.js<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;and your modules are located at:<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |/myapp/js/foo/bar.js<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |/myapp/js/foo/baz.js<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |/myapp/js/foo/thud/xyzzy.js<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;Your application can tell Dojo to locate the "foo" namespace by calling:<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |dojo.registerModulePath("foo", "../../foo");<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;At which point you can then use dojo.require() to load the<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;modules (assuming they provide() the same things which are<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;required). The full code might be:<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |{script type="text/javascript"<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |&nbsp;&nbsp;&nbsp;&nbsp; src="/myapp/js/dojo/dojo/dojo.js">{/script}<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |{script type="text/javascript"]<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |&nbsp;&nbsp;&nbsp;&nbsp; dojo.registerModulePath("foo", "../../foo");<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |&nbsp;&nbsp;&nbsp;&nbsp; dojo.require("foo.bar");<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |&nbsp;&nbsp;&nbsp;&nbsp; dojo.require("foo.baz");<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |&nbsp;&nbsp;&nbsp;&nbsp; dojo.require("foo.thud.xyzzy");<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |{/script]<p>&nbsp;&nbsp;&nbsp;&nbsp;var paths = {};<br>&nbsp;&nbsp;&nbsp;&nbsp;paths[moduleName.replace(/\./g, "/")] = prefix;<br>&nbsp;&nbsp;&nbsp;&nbsp;require({paths:paths});<br>};<p><br>replace: function(tmpl, map, pattern){<br>&nbsp;&nbsp;&nbsp;&nbsp;// summary:<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;Performs parameterized substitutions on a string. Throws an<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;exception if any parameter is unmatched.<p><br>geom.setContentSize = function setContentSize(/*DomNode*/ node, /*Object*/ box, /*Object*/ computedStyle){<br>&nbsp;&nbsp;&nbsp;&nbsp;// summary:<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;Sets the size of the node's contents, irrespective of margins,<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;padding, or borders.<br>&nbsp;&nbsp;&nbsp;&nbsp;// node: DOMNode<br>&nbsp;&nbsp;&nbsp;&nbsp;// box: Object<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;hash with optional "w", and "h" properties for "width", and "height"<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;respectively. All specified properties should have numeric values in whole pixels.<br>&nbsp;&nbsp;&nbsp;&nbsp;// computedStyle: Object?<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;This parameter accepts computed styles object.<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;If this parameter is omitted, the functions will call<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;dojo/dom-style.getComputedStyle to get one. It is a better way, calling<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;dojo/dom-style.getComputedStyle once, and then pass the reference to this<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;computedStyle parameter. Wherever possible, reuse the returned<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;object of dojo/dom-style.getComputedStyle().<p><br>//  |require(["dojo/dom-style"], function(domStyle){<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |&nbsp;&nbsp;&nbsp;&nbsp; domStyle.set("thinger", "opacity", 0.5); // == 0.5<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |});<p><br>dojo.style = function(node, name, value){<br>&nbsp;&nbsp;&nbsp;&nbsp;// summary:<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;Accesses styles on a node. If 2 arguments are<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;passed, acts as a getter. If 3 arguments are passed, acts<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;as a setter.<p>dojo.style("thinger", "opacity", 0.5); // == 0.5<br>|dojo.style("thinger", {<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |&nbsp;&nbsp;&nbsp;&nbsp; "opacity": 0.5,<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |&nbsp;&nbsp;&nbsp;&nbsp; "border": "3px solid black",<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |&nbsp;&nbsp;&nbsp;&nbsp; "height": "300px"<br>&nbsp;&nbsp;&nbsp;&nbsp;//  |});<br></pre><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devWebDojoJSONP" dojoType="com.trivedi.oPls.mPane" tags="dojo JSONP Web dev career bookmark" title="devWebDojoJSONP"><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--A SECTION with a Yahoo local srch request gotten thro jsonp--><br>&nbsp;&nbsp;&nbsp;&nbsp;<h1>Demo: jsonp Dojo pull requests</h1><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>This page has been updated with a live JSONP pull list<br>&nbsp;&nbsp;&nbsp;&nbsp;<ul id="pullrequests"><br>&nbsp;&nbsp;&nbsp;&nbsp;</ul><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="devWebOther1" dojoType="com.trivedi.oPls.mPane" tags="Other Web dev career bookmark" title="devWebOther1"><br><a href="https://saucelabs.com">saucelab Emulator (mm)</a> to test stuff on different browsers.<br><hr><br><span class='mTitle'>TypeScript</span><br><h3>Notes on TypeScript to JS:</h3><br><br><br>I have an app whose code is written in TypeScript and that uses jQuery to attach functions to page events and it works pretty well; although, like you, I found it to obe a struggle to identify the magic formula to make it all work.<br><br>My TS file starts with a reference to the jQuery type file:<br><br>/// [reference path="../typings/globals/jQuery/index" /]<br><br>then there's all of my app-specific code that I will omit here. Finally at the end, I have my jQuery code to hook everything up:><br><br>$(document).ready(function () { $("#answerRequest").click(function (e) { e.preventDefault(); let answer = chatty.ask($("#question").val()); $("#answer").val(answer); }); });<br><br>That should all be pretty familiar. The chatty object is instantiated elsewhere.<br><br>Now that I have my .ts file, I compile it with tsc, then I use browserify to turn the .js from the tsc output into JS that will run happily in the browser.<br><br>In the HTML, I include a script tag that points to the output of the browserify step, and it works just as if I had written the whole thing in JS to begin with.<br><br><br><hr><br></div><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--dev/Web content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--misc/food content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="miscFood" dojoType="com.trivedi.oPls.mPane" tags="misc food body bookmark" title="miscFood"><p><div class="mLink food " id="foodLink"><br>&nbsp;&nbsp;&nbsp;&nbsp;<h3>Food:</h3><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Seasonality table<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.freshdirect.com/seasonal_guide.jsp">Seasonal food calendar</a> (note: this site requires you to enter a New York zip code. 10003 is one that will work)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;fallingfruit.org source for trail berries<br></div><br>&nbsp;&nbsp;&nbsp;&nbsp; <h2>Online Pie Order Sources</h2><br><br><div class="mBox-container"><p><div class="mBox food pie" id="pie0"><br><a href="https://achatz.goldbely.com/46748592-crumb-topped-michigan-4-berry-pie"><br><img alt="food" src="https://pantograph0.goldbely.com/s410/uploads/product_image/image/2028/crumb-topped-michigan-4-berry-pie.f211a16cc35a3ea4188ba1452016e069.jpg" /></a><br><div class="caption"><br>Featured on Good Morning America and a National Pie Championship winner, the Michigan 4-Berry Pie is Achatzs signature dessert!<br></div><br></div><div class="mBox food pie" id="pie1"><br><a href="http://www.dangerouspiesdc.com/sweet-pies-c1ylq"><br><img alt="food" src="https://static.wixstatic.com/media/ebafd0_d44f52a7763bfe7dcb9867039ba75318.jpg/v1/fill/w_868,h_679,al_c,q_90,usm_0.66_1.00_0.01/ebafd0_d44f52a7763bfe7dcb9867039ba75318.jpg" /></a><br><div class="caption"><br>Chocolate Pecan.  VOTED DC'S BEST PIE SEVEN YEARS RUNNING!<br></div><br></div><div class="mBox food pie" id="pie2"><br><a href="https://royers.goldbely.com/15639-royers-sweet-n-salty-pie"><br><img alt="food" src="https://pantograph0.goldbely.com/s410/uploads/product_image/image/11918/royers-sweet-n-salty-pie.c396efe690db1c5a6157fe0891e85a47.png" /></a><br><div class="caption"><br>Sweet-n-salty Must check other choices; also has a &quot;pie club&quot; 6 month plan (cld be same as above site?)<br></div><br></div><div class="mBox food pie" id="pie3"><br><a href="http://www.littlepiecompany.com/"><br><img alt="food" src="http://cdn3.littlepiecompany.com/wp-content/uploads/2014/10/Mississippi-Mud-Pie-800x800.jpg" /></a><br><div class="caption"><br>MISSISSIPPI MUD PIE imported Belgian chocolate, brownie streusel and a chocolate glaze in a chocolate cookie crust. (Also has key lime etc.)<br></div><br></div><div class="mBox food pie" id="pie4"><br><a href="http://gtpie.com/menus/pies/"><br><img alt="food" src="http://gtpie.com/wp-content/uploads/2015/07/Autumn-Harvest-Pecan_7519.jpg" /></a><br><div class="caption"><br>They have a HUGE selection<br></div><br></div><div class="mBox food pie" id="pie5"><br><a href="https://store.3brothersbakery.com/Deep-Dish-Chocolate-Fudge-Pecan-Pie--P329.aspx"><br><img alt="food" src="https://store.3brothersbakery.com/GetImage.ashx?Path=%7e%2fAssets%2fProductImages%2fDeepDishFudgePecanPie3BB_1807.png&amp;maintainAspectRatio=true&amp;maxHeight=300&amp;maxWidth=300" /></a><br><div class="caption"><br>This is our famous pecan pie, but in a fudgy deep dish form. It's packed full of delicious, Southern pecan halves-a full 2 pounds of nuts.<br></div><br></div><div class="mBox food pie" id="pie6"><br><a href="http://twofatcatsbakery.com/product/bourbon-pecan-pie"><br><img alt="food" src="http://twofatcatsbakery.com/wp-content/uploads/2013/07/pecan-pie-558x370.jpg" /></a><br><div class="caption"><br>Not overly sweet, this pie is a Two Fat Cats favorite. 7?/9? available<br></div><br></div><p></div><br><div class="mNote food " id="foodTxt"><br><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et<br>&nbsp;&nbsp;&nbsp;&nbsp;dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex<br>&nbsp;&nbsp;&nbsp;&nbsp;ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu<br>&nbsp;&nbsp;&nbsp;&nbsp;fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt<br>&nbsp;&nbsp;&nbsp;&nbsp;mollit anim id est laborum.</p><p></div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--misc/food content--><p>&nbsp;&nbsp;&nbsp;&nbsp;<!--misc/reading content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="miscReading" dojoType="com.trivedi.oPls.mPane" tags="reading amuse mind bookmark" title="miscReading"><br><hr><br><br><br>The Association of Small Bombs By Karan Mahajan<br><br>A finalist for the National Book Award, Mahajans novel  smart, devastating and unpredictable  opens with a Kashmirian terrorist attack in a Delhi market, then follows the lives of those affected. This includes Deepa and Vikas Khurana, whose young sons were killed, and the boys injured friend Mansoor, who grows up to flirt with a form of political terrorism himself. As the narrative suggests, nothing recovers from a bomb: not our humanity, not our politics, not even our faith.<br><br>Review: http://www.nytimes.com/2016/03/20/books/review/the-association-of-small-bombs-by-karan-mahajan.html<br><hr><br><br><br>Dark Money: The Hidden History of the Billionaires Behind the Rise of the Radical RightBy Jane MayerIn 1980 Charles and David Koch decided they would spend vast amounts of their fortune to elect conservatives to all levels of government, and the world of American politics has never been the same. Mayer spent five years looking into the Koch brothers activities, and the result is this thoroughly investigated, well-documented book. It cannot have been easy to uncover the workings of so secretive an operation, but Mayer has come as close to doing it as anyone is likely to anytime soon.<br><br>Review: http://www.nytimes.com/2016/01/24/books/review/dark-money-by-jane-mayer.html<br><hr><br><br><br><br><a href="https://gist.githubusercontent.com/anonymous/1428f35788761a4466b35cbfc43a0705/raw/ff7d70e548eb3559818389a02645e6355b5baa4a/u.txt">UNREAD</a> Reading<br><br><br><br><br><br><a href="https://gist.github.com/anonymous/bef7e07bada2e8742b68b8b9d49fc62f">20161107mpt</a> reading SOME UNREAD<br><br><p><h2>READING</h2><b><p><span class='mTitle'>S Korean films</span><br><p></b><b>All's not quiet on the eastern front</b> - Film<br /><i><br>Times, The (London, England) - October 1, 2005</i><br /><br><br />Author/Byline: Ian JohnsSection: FeaturesPage: London Film Festival 26Readability: &gt;12 grade level (Lexile: 1440)<br /> <br /><br>South Korea is the newest pretender to the world-cinema throne, and it has the energy and diversity to back up its claim, finds Ian Johns<br><br /><br>Every ten years or so a new country seems to take the lead in ground-breaking cinema. After the Second World War it was the Italian neo-realists. In the 1960s it was the French New Wave. More recently, in the 1990s, China led the field before being edged out by Iran. Now South Korea has seized the baton with a group of eclectic, provocative film-makers producing a diverse range of work, a taste of which can be experienced in this year's festival.<br><br /><br>The films include Kim Dae-Seung's Blood Rain, in which an imperial investigator in the early 1800s is faced with a series of grisly murders on an island. It's a labyrinthine mystery, full of evocative period detail, involving a paper-mill-owning family, a reclusive young swordsman and sins of the past.<br><br /><br>Another mystery, Wang Cheol-Mean's Spying Cam, couldn't be more different as political and sexual barriers break down between two men as they tape themselves trapped in a motel room.<br><br /> <br /><br>A rising directors making an impact overseas is Park Chan-Wook. His festival film Sympathy for Lady Vengeance is a funny, violent story about a murderess pursuing a vendetta that should provide a slightly less daunting experience for mainstream audiences than his gruesome but gripping cult hit Oldboy. Just as the hero of that film was abducted and detained for 15 years without knowing the reason why, the heroine of Lady Vengeance serves 13 years in jail on false charges of kidnapping and infanticide.<br><br /> <br /><br>&quot;I'm often misunderstood as a director of violence,&quot; Park has said, &quot;but really I want to show how violence makes the perpetrator and the victim destroy themselves.&quot; And always wrapped up in his fascination with violence, vengeance and taboos is an interest in ethical questions.<br><br /> <br /><br>Park 's high energy, provocative film-making reflects an erupting energy among Korean film-makers. Since South Korea's military dictatorship ended in 1992 with the election of a civilian president, there has been a breaking down of censorship barriers and a rapid growth in production, helped by a quota system that ensures a high proportion of screen time for local films.<br><br /> <br /><br>Park describes himself as part of &quot;a generation thirsty for more cinematic expression and the richness and diversity of cinema&quot;. According to Anthony Leong, the author of Korean Cinema: The New Hong Kong, &quot;Korean cinema is a melting pot of different types of film-making&quot;. He cites many of the film-makers now making an impact as being young, Western-educated and fans of Western, Hong Kong and Japanese cinema, as well as the French New Wave. &quot;They take all these techniques, perspectives and genres and meld them into something unique.&quot;<br><br /> <br /><br>Kim Ki-Duk has a reputation as one of the bad boys of Korean cinema. His films include Samaritan Girl, a gritty tale of teen prostitution, Bad Guy, a sordid account of a pimp's brutal recruitment of a student, and the revenge yarn 3 Iron.<br><br /> <br /><br>Yet he also made Spring, Summer, Autumn, Winter...and Spring (2003), a quasi-Buddhist tale filled with serene natural imagery. It made less than $300,000 in Korea but became the most successful Korean film at the US box office, earning $2.3 million.<br><br /> <br /><br>Success abroad is becoming increasingly important for the Korean film industry, which has moved beyond domestic crowd-pleasers such as cop dramas and romantic comedies into darker thrillers, martial-arts adventures, reality-based war epics and distinctive auteur offerings. Even two of South Korea's biggest mainstream hits -Silmido (about a convict commando unit brutally trained in 1968 to kill the North Korean leader) and Taegukgi (two brothers pitted against each other during the Korean war) are tackling the country's troubled past.<br><br /> <br /><br>For Kim Dong-Ju, the head of the Seoul-based production and distribution company Show West, &quot;Korea used to be an importing nation, now it will be an exporter&quot;. He is working with other Asian backers on such projects as Chen Kaige's The Promise, touted as &quot;the Lord of the Rings of the East&quot;. &quot;We are just a beginner,&quot; Kim says, &quot;but we want to learn how to make movies like Hero and House of Flying Daggers.&quot;<br><br /> <br /><br>At the same time the French company MK2 has invested in two of Hong Sang-Soo's recent films, Woman is the Future of Man and Tale of Cinema. The latter, a London festival screening, is an intriguing blurring of fact and fiction as a struggling film-maker bumps into a film star outside a cinema after seeing a movie that was inspired by his life. For film-makers such as Hong, whose low-key, observant style has a relaxed charm reminiscent of Eric Rohmer, foreign backing is invaluable.<br><br /> <br /><br>It also means that first-time directors such as Lee Yoon-Ki can hope to carve out a career. His festival film This Charming Girl, shot entirely with a hand-held camera, is a gentle portrait of a shy post-office worker who summons up the courage to invite a regular customer to dinner but is stood up and later offered a lame excuse. We're left, like her, wondering whether to believe him or not.<br><br /> <br /><br>An indication of South Korea's passion for cinema was amply demonstrated in 1999 when a change to South Korea's film quota system was suggested. There were hunger strikes and boycotts of Hollywood films -100 film professionals even shaved their heads in protest. But while Kim acknowledges that the industry now boasts many committed, talented people, he doesn't see it as guaranteeing a rosy future: &quot;We just need to try harder to make better films.&quot;<br /><br><br /><br>* <b>Blood Rain</b>, Oct 28, NFT1 &amp; Oct 31, Odeon West End 2; Spying Cam, Oct 21 &amp; 24, ICA; <b>Sympathy for Lady Vengeance</b>, Oct 22, Odeon West End 2; <b>Tale of Cinema</b> Oct 30 &amp; Nov 2, NFT1; <b>This Charming Girl</b>, Oct 28, NFT2, &amp; 31, NFT1<br><br /><i><br><br />ASIA AT THE FESTIVAL:</i><br /><br><br /><b><br>IF YOU WERE ME</b> 2 Shorts by leading South Korean directors for the National Human Rights Commission.<br><br /><b><br>KEKEXILI: MOUNTAIN PATROL</b> Inspired by the true story of a near-suicidal pursuit of poachers by game wardens in Tibet.<br><br /><b><br>SHANGHAI DREAMS</b> Family saga of how factory workers relocated to remote areas in the 1960s tried to move back to the cities in the 1980s.<br><br /><b><br>STOLEN LIFE</b> Poignant Chinese story of a college graduate who gets pregnant.<br /><br><br /><hr /><b><br><span class='mTitle'>Tokyo? Yo! - Japan</span><br><br><br /><i><br>Sunday Times, The (London, England) - January 2, 1994<br /> </i><br /><br>Author/Byline: Tom HineySection: FeaturesPage: 6/14Readability: &gt;12 grade level (Lexile: 1410)<br /><br><br />Instead of imitating Western culture, the Japanese are now influencing it.<br /><br><br /><br>There was a time when the one thing Britain didn't import from Japan was its culture. The electronics with which to create and replay our own sights and sounds were worth every yen, but there it stopped. With the exception of art house stalwarts and credit card hippies (Pounds 80-a-head Now and Zen dinners, Buddhism courses in South Ken), most of us presumed that Japanese culture was either a feeble imitation of the West (of which the karaoke machine was the frightening embodiment) or consisted of tea gardens and samurai.<br><br /> <br /><br>But no more. Watch out for manga cartoons demented full-length adult animation films and for cyberpunk movies, a sort of Dr Who for grown-ups. From the burgeoning of import mixes by Tokyo club DJs, to the staying power of Japanese designers and young novelists, Britain is waking up to the joys of Japanese pop culture.<br><br /> <br /><br>The Land of the Rising Street Cred has graduated from its bug-eyed crash course in Hollywood and Carnaby Street and is creating its own versions of the 1990s in ways both distinctly Japanese and yet with all the familiar idiom of a generation brought up on the Stones and Stanley Kubrick. Forget bullet trains and company anthems, this is the subversive imagination of a new, streetwise Japan.<br><br /> <br /><br>You could not get further from the salarymen cliches or chocolate box Wish You Were Here images of Japan than manga cartoons. These are an adult-rated, unashamed diet of what one reviewer described as ''violent sex and sexy violence&quot; and now, as they say, available in your local video store.<br><br /><br>While manga has a long tradition in Japan originating in risque comic-books, the most successful of which were later filmed it has taken a generation of directors reared on Ridley Scott and David Cronenberg to take it out of crude samurai swashbuckling into the post-apocalyptic sophistication of Akira, Legend Of The Overfiend or Dominion-Tank Police. The action is gruesome, the plots generally baffling and some people here don't seem to be able to get enough.<br><br /> <br /><br>When the ICA in London, the flagship of art-houses, showed a selection of manga animes two years ago, under the billing A Celebration Of Japanese Animation, they were besieged by young manga freaks. Long tantalised by references in their computer magazines, they were desperate to see classics such as Akira, by Katsuhiro Otomo, about a boy turned by scientists into a monster, on the big screen. All box office records were broken as hordes of people who normally wouldn't go within spitting distance of a contemporary arts institute flocked to see Venus Wars, Fist Of The North Star, or Robot Carnival. Such was the interest that Island International, part of the record company, bought distribution rights and launched Manga Video. Each title so far has gone straight into the top 10 national video charts within weeks, displacing staple bestsellers, but soon afterwards disappearing a true manifestation of cult buying.<br><br /> <br /><br>Kenny Penman, who as the manager of the Forbidden Planet comic and video store in Edinburgh has witnessed the manga-raiders at work, says: ''It's a fanatical thing they know the release dates before we do, and always buy the video straight away. Manga is bringing out two a month now and they always sell about 12,000 in the first week.&quot;<br><br /> <br /><br>Shinya Tsukamoto 's Tetsuo a black-and-white movie about a man who turns into, yes, a monster will not be shown properly in Britain until this spring, but is already regarded as the ultimate cyberpunk movie; what more likely nation than Japan to create such a gory and compulsive vision of techno-madness. Subtitles, which are always liable to damage a film's wide popularity, are badly needed in Tetsuo: it is like a demented, hour-long pop video, and if you think the violence is disturbing, wait until you hear the soundtrack.<br><br /> <br /><br>Japanese jazz funk has also been grabbing selected spotlights lately; Mo Wax is a new London record label concentrating on Tokyo club releases, whose compilation Jazz Hip Jazz (released last month) is genuinely ''available everywhere&quot;. According to Ashley Heath, of The Face magazine, groups such as UFO (United Future Organisation) are being taken ''very seriously&quot; in British clubs; the birthplace of modern electronics has come into its own in the age of mixing and sampling. The chain-smoking, stubble-weary young Japanese DJs who are masterminding this surge are the epitome of scowling hip. The most sought-after soundtrack writer and musical polymath of our day is the seasoned Ryuichui Sakamoto (Last Emperor, Wild Palms), but it is Jap Jazz that has the music press excited. ''How much is a ticket to Tokyo?&quot; finished one breathless review.<br><br /> <br /><br>Similarly with fashion few Londoners would continue spending Tokyo prices on Issey Miyake, Yohji Yamamoto or Rei Kawakubo if these designers were just novelty weirdos or expensive copycats. They're different enough to be fresh and controversial, but not so different as to be tedious, which is really all the fashion and music worlds ask of anybody.<br><br /> <br /><br>Even the trend value of Japanese lager, that apparently most self-generated of marketing whims, was not entirely arbitrary. These days we don't feel guilty about appreciating supermarket aesthetics, and when it comes to imaginative packaging you can't beat the Japs: if you thought Lucozade was inventive with its isotonic-in-a-bag, try a magnificent two-litre can of Sapporo (so outsize that it's got a metal handle) or the stationery departments at Muji or Sogo stores.<br><br /> <br /><br>British publishers are meanwhile busily hunting down the cult novel the Catcher In The Rye of downtown Tokyo. Contestants include most of Shusaku Endo's books, which always get rave reviews here. Endo is set for household naming after Martin Scorsese's planned adaptation of his classic novel, Silence. His novels portray a gritty and paranoid Tokyo, as do those of the excellent Haruki Murakami. Murakami's characters, in books such as A Wild Sheep Chase or The End Of The World and the Hard Boiled Wonderland, listen to the Stones, read Sherlock Holmes and hate offices. Far from this making him unpopular in Japan, he is the country's biggest selling writer, and Penguin reports healthy sales here. Faber and Faber has its money on Banana Yoshimoto, whose first novel, Kitchen, is about ''mothers, transsexuality, bereavement, kitchens, love and tragedy&quot;, and comes out in paperback later this month.<br><br /> <br /><br>So forget Yoko Ono, David Sylvian, Seven Samurai, misspelt Bowie sleeve notes and Dylan making a quick buck at Budokan. And certainly forget, as emblems of Japan, Nikon cameras, Nissan car factories, over-priced Impressionists, endurance game shows, and the nightmare that is karaoke. Pick up instead a copy of Super Play, a 50,000-circulation independent British computer games glossy, enjoy its fixation with Japanese snacks and toys and read its column from Tokyo, called Live From City Hell.<br><br /> <br /><br>Elsewhere, be tolerant of the occasional lapse in Japanese bicultural hipness, such as in Banana Yoshimoto's dedication of her novel to a Mr Jiro Yoshikawa, ''who introduced me to Mike Oldfield's wonderful piece of music&quot;. You can forgive a nation for being 10 years late with punk and 20 years late with ska, but to name a whole chapter of your first novel after Moonlight Shadow is pushing it.<br><br /><br>Never mind it won't seem to matter when you pick up the latest action-packed issue of Manga Mania magazine. Whatever happened to the computer dweeb?<br><br /> <br /><br>Jonathan Ross presents a programme on manga on BBC2 at 7.30pm on Friday; <br /><b>Akira </b>is on BBC2 at 10.30pm on Saturday.<br><br />Record: 986546909Copyright: (c) Times Newspapers Limited 1994, 2003<br /><hr /><br /><br /><br /><br><br /><br><br /><br /><br><br /><br /><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--misc/reading content--><p>&nbsp;&nbsp;&nbsp;&nbsp;<!--misc/job content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div dojoType="com.trivedi.oPls.mPane" id="miscJob" tags="startup software equity humor" title="how much equity should an incoming technical cofounder get?"><div><br>(From Nathan Hursts Blog; outdated but perhaps still V.Valid)<p>For a pre-funding web startup whose team includes only a non-technical cofounder, how much equity should an incoming technical cofounder get?<p>Technical cofounders, remember that the number of shares or options doesn't matter, just your percentage ownership (what the chart shows).<p>Assumptions<p><br>For this case, I assume the non-technical cofounder has already contributed significantly to the business and will likely get more equity (in this chart their minimum ownership is 50%). This doesn't have to be the case. Technically inclined people can definitely build something on their own, and then seek a non-technical cofounder, retaining more equity for themselves. Even if the technical cofounder doesn't prototype something first, they can still contribute more to the business and receive more equity (ex: someone who did marketing for 2 years out of undergrad manages to recruit a top 10th percentile programmer with a successful app in the iPhone app store).<p>I assume both the non-technical and the technical cofounders are compensated equally. I also assume they are either working on their company full time now or will be soon. Compensation is probably between $0 and a ramen salary. This is an area that varies widely and can significantly impact how much equity a technical cofounder receives (if they take more salary). It's beyond the scope of this post, but I'll try to cover it in the future.<p>I assume the technical cofounder has a reasonably general set of technical skills and can pickup new technical skills quickly. Ex: they're primarily a back-end programmer, who can code basic front-end specs, and who can administer cloud hosting.<p>I assume both cofounders will be diluted equally as more employees and investors get involved.<p>Finally, I assume this chart may be a little surprising to non-technical cofounders. Why should a technical cofounder get so much of the company? Especially a company based on your vision. Basically, it's because ideas aren't worth much. Execution is what matters, and in most web startups that falls on the technical founder. Software developers are a hot commodity right now, and many of them know it, so they're on the lookout for really stellar business people to partner with, not some run-of-the-mill, me-too idea having, 10k foot synergizer without any concrete sales prospects, marketing ability, or product experience. Sorry for the rant, but in all seriousness, I've seen too many good non-technical founders delay building a product for months because they're too stingy with equity.<p>Other Reading<p>Here are a few other approaches by others in the venture and tech community. There are no hard rules for this kind of stuff, so I'd recommend reading them and synthesizing with this:<p><a href='http://www.avc.com/a_vc/2011/04/how-to-allocate-founder-and-employee-equity.html'>How To Allocate Founder and Employee Equity</a> by Fred Wilson<br><a href='http://answers.onstartups.com/questions/6949/forming-a-new-software-startup-how-do-i-allocate-ownership-fairly/23326#23326'>Fair Equity Allocation</a> by Joel Spolsky<br><a href='http://www.geekwire.com/2011/wrong-answer-5050-calculating-cofounder-equity-split'>The only wrong answer is 50/50</a>: Calculating the co-founder equity split by Dan Shapiro (in response to Joel Spolsky's post)<p><br>Notes<p>[1] Technical cofounder starts with 50%: start by assuming the technical and non-technical cofounders will contribute similarly to the business and are taking similar risks for the business. Give the non-technical cofounder extra equity for anything "above and beyond" (see final assumption above for more). Also, here's an example calculation: 50 (base equity) - 10 (for working prototype) - 5 (has over 10k users) - 10 (has raised VC) = 25. The technical cofounder gets 25% of the company.<p>[2] Working prototype (not just wireframes) -10%: If a non-technical cofounder has a working prototype, they've likely assumed some risk already to build the prototype (perhaps by contracting it out). Creating wireframes doesn't require much risk taking or even really help de-risk much of the busines.<p>[2a] Has paying customers -10%: If the company already has paying customers, the non-technical cofounder has already eliminated a huge risk for the business; someone wants the product.<p>[2b] Has over 10k users -5%: If the company doesn't have paying customers, but does have some reasonable user traction (with an nice trajectory), the non-technical cofounder has de-risked the business some, but not as much as having paying customers.<p>[3] Non-technical cofounder has significant connections or experience -10%: Connections include: relationships with key people in the company's target market, social network connections, blog readership, etc. Domain specific experience within the target market are helpful as are more broad experiences in sales, marketing, product development, or business development (probably on the order of 5+ years outside of undergrad, grad, or MBA school).<p>[4] Non-technical cofounder has raised venture capital before -10%: The non-technical cofounder has done a startup before, and someone has trusted them with a lot of money. It will probably be easier to get money again. If your business doesn't need external capital, tone this number down, but it's still important (maybe -5%) because it conveys a degree of startup savvy.<p>[5] Non-technical cofounder has had a successful exit before -10%: The biggest predictor of future success is past performance. This could also apply to non-exit situations where the non-technical cofounder started a company that is operating successfully and the non-technical cofounder has chosen to move on, etc.<p>[6a] Salary upon funding -0%: No extra equity for getting a salary upon funding. It may not be a market salary, but a technical founder will likely get something if they elect to. Why should a technical cofounder take less equity upfront because they may or may not receive a salary later? In this situation a technical cofounder and a non-technical cofounder are taking similar risks; therefore, neither get any extra equity.<p>[6b] Non-technical cofounder has idea and vision -0%: This is just part of the job description and included in the non-technical cofounder's initial 50%. Execution is what matters anyway (see final assumption above for more).<p>[6c] Non-technical cofounder has MBA -0%: (this is my opinion) In the early days of a startup, an MBA doesn't help much. It certainly doesn't hurt, but it shouldn't affect equity.<p>[7] Non-technical cofounder invests money -5% per $10k: This is an approximation based on a very early stage valuation of $200k. The situation will vary from company to company based on who is involved with the company and what they've accomplished so far. When I think about this, I only include money still unspent when the technical cofounder joins (usually the money was used to build the initial prototype. Sometimes I adjust the equity for the "working prototype" step above).<p>[8] Lower limit 10%: A non-technical cofounder wants to ensure the technical cofounder has compelling incentives. I consider this the minimum if the technical cofounder is not taking a salary.<p><br></div><br><span class='mTitle'>Job Search</span><br><br><br>20161103mpt <a href="https://gist.github.com/anonymous/7d29da58b8e99462132de3c37f0d8986"></a>java job trends xpages</a> srch results<br><br><br>20161103mpt <a href="https://gist.github.com/anonymous/f077418cfdb6a5f4584caca8e06ae85a">salary rate</a> java freelance consultant 2016 <b>Yahoo</b> srch results<br><br><br>20161103mpt <a href="https://gist.github.com/anonymous/abbb6906387ffd151bf214bf50d9c459">salary rate</a> java freelance consultant 2016 <b>BING</b> srch results<p>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/gsmyy69">Yahoo & Bing</a> job srch (1 pg ea) "ibm domino jobs contract -pizza -delivery -driver&n=100&sort=new"<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Params for Job srch:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;=ibm+domino+jobs+java+contract+us+-canada+-uk +-administrator+-pizza+-delivery+-driver+n=100+sort=new<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br><hr><br><span class='mTitle'>Salary</span><br><br><br>"Knowing a niche technology and/or industry, finding a company that needs to staff and going in as a self-employed contractor instead of an employee.<br>I had friends making $200 an hour in 1999 because of this.<br>i 'd like to say they were working in Lotus at the time, but I don't really remember."<br>https://news.ycombinator.com/item?id=5804798<br><hr><br><br><br><hr><p>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--misc/job content--><p>&nbsp;&nbsp;&nbsp;&nbsp;<!--artLit content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="artLit" dojoType="com.trivedi.oPls.mPane" tags="art_lit instruct mind bookmark" title="artLit"><p><hr><br><a href='http://www.blouinartinfo.com/'>blouin art info</a><br><hr><p>&nbsp;&nbsp;&nbsp;&nbsp;http://www.metmuseum.org/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.theguardian.com/books/translation- tuesdays-by-asymptote-journal<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.theguardian.com/books/biography? page=2<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.theguardian.com/books/series/100- best-nonfiction-books-of-all- time<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.lrb.co.uk/v28/n11/maya- jasanoff/before-and-after-said<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.theguardian.com/books/2016/apr/05/john-aubrey-my-own-life-by-ruth-scurr- review-diary- rival-pepys<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.theguardian.com/books/2016/apr/14/maggie-nelson-argonauts-intellectualism- having- baggage<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://en.wikipedia.org/wiki/Rodrigues_Ottolengui <a href="http://www.gutenberg.org/ebooks/authors/search/?query=Ottolengui,+Rodrigues">(Proj gutenberg)</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://aldaily.com/ ... the Internet's best index of articles on culture and ideas<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.spiegel.de/international/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.pepysdiary.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.artnet.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.uppereast.com/articles<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.theparisreview.org/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.scribd.com<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://getd.libs.uga.edu/pdfs/harris_paget_w_200512_ma.pdf<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.ft.com/cms/s/2/59590084-f59b-11e0- 94b1-00144feab49a.html<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.thedandy.org/thedandy<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://www.huckmagazine.com/art-and- culture/flaneurs/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://www.scribd.com/doc/316466247/Gleber- Art-of-Walking-Ch-4<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Early b.html w/working <a href="https://gist.github.com/anonymous/b1074a7a681a0694918347241c70593d">map</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<i>Some Blocked searchlist sites:</i><br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://circumspections.tumblr.com/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;http://psychogeographicreview.com/baudelaire- benjamin-and-the-birth-of-the-flaneur/<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/zuu7lkl">Yahoo multipg srch "Wall street forum technical Analysis economy"</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.networkerror.org/component/content/44.html?task=view">Google's Undocumented Finance API</a><br><p>&nbsp;&nbsp;&nbsp;&nbsp;Against Nature: A Rebours by Huysmans<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--artLit content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--edOther content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="edOther" dojoType="com.trivedi.oPls.mPane" tags="other instruct mind bookmark" title="edOther"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;https://en.wikipedia.org/wiki/Katapayadi_system<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://en.wikipedia.org/wiki/Method_of_loci<br>&nbsp;&nbsp;&nbsp;&nbsp;<p></p><br>&nbsp;&nbsp;&nbsp;&nbsp;<b>10 Athletic NYC items</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Loop the rez at <a href="http://centralpark.org/attractions-h-%20w/reservoir/">night</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Decline using yr car or <a href="https://www.uber.com/cities/new-york/">Uber</a>, walk instead!<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Appreciate the facilities in <a href="https://www.nyac.org/">midtown</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Enjoy a heavenly <a href="http://www.timeout.com/newyork/shopping/mortal-man">bliss out</a> after a run<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Pick up some post-run energy with an <a href="http://www.timeout.com/newyork/restaurants/best-%20coffee-shops-in-new-york">espresso</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Hit the roads on your bike and <a href="http://www.timeout.com/newyork/blog/good-news-for-%20cyclists-the-2016-nyc-bike-%20map-has-awesome-new-%20additions-032916">ride</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Kiss the blues goodbye @ <a href="the%20place%20went%20outta%20biz%207%20yrs%20ago!">CBGB</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Catch some tree-time by going <a href="the%20nat'l%20park%20just%20outside%20%20manhattan">outdoors</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Rise above the smoke/smog and look <a href="skyscraper%20climbing%20race">down</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Shoot some pool <a href="https://www.nycgovparks.org/parks/M130/facilities/indoor-%20pools/recreation-center-54-pool">everyday</a></p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--edOther content--><p>&nbsp;&nbsp;&nbsp;&nbsp;<!--test content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="testDivOneContent"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="testDivOneContent"><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- basic preloader --><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div id="loader"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="loaderInner" style="direction:ltr;">Loading Mike's notebook ...</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div--><p>&nbsp;&nbsp;&nbsp;&nbsp;test Div One Content<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dapibus efficitur gravida. Curabitur semper dignissim posuere. In augue nisl, malesuada a tellus quis, sagittis fermentum arcu. Duis at sodales erat, non finibus orci. Phasellus in auctor justo, sed congue nisl. Nulla iaculis, purus id sollicitudin hendrerit, mi orci maximus dolor, a feugiat elit justo id magna. Nulla vestibulum ligula sed accumsan finibus. Phasellus ornare eros nisl, sit amet mattis libero vulputate in. Ut a blandit leo, a rhoncus velit. Aliquam sit amet dolor nisi. Duis lobortis mauris arcu, ut auctor massa venenatis id. Cras imperdiet nibh non purus vulputate, vel lobortis neque pretium. Ut vel gravida libero. Aliquam erat volutpat.<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Interdum et malesuada fames ac ante ipsum primis in faucibus. In hac habitasse platea dictumst. Suspendisse potenti. Nulla ut lacus vitae velit suscipit pulvinar in eu purus. Mauris dapibus nunc risus, ac tempor felis congue id. Integer nec placerat enim. Suspendisse lobortis fermentum ornare. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla at ligula eu mi molestie venenatis at eu ex. Nam feugiat aliquet massa, tincidunt iaculis nunc tincidunt eget. Etiam in iaculis leo. Etiam vulputate in est a aliquet. Proin fermentum felis cursus leo egestas elementum.<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Suspendisse in aliquam tortor, quis elementum neque. Donec ultrices purus sed est aliquam vulputate. Donec lobortis, mi sed dapibus auctor, nunc lorem feugiat dolor, ac aliquet sem orci at nisl. Aliquam tincidunt ante leo. Sed pulvinar elit nec mi mollis, eget laoreet erat cursus. Sed euismod in est ac feugiat. Ut ac neque sit amet tortor bibendum accumsan. Pellentesque sed fringilla ipsum. Fusce velit tortor, sagittis vel velit non, lacinia auctor purus. Donec commodo sed arcu eget ultricies. Proin feugiat dignissim hendrerit. Vestibulum efficitur tincidunt rhoncus. Pellentesque lobortis justo vitae nunc bibendum, nec consectetur leo tristique.<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Maecenas a eleifend ligula, ac finibus nibh. Quisque ullamcorper tortor pulvinar, pellentesque sapien sit amet, semper nunc. Praesent luctus erat in lacus efficitur, tincidunt laoreet ante suscipit. Nullam laoreet vestibulum sagittis. Suspendisse tristique, massa eget ultricies tincidunt, ipsum felis lobortis est, vitae interdum augue enim ut turpis. Quisque a augue nisi. Proin cursus ligula at pulvinar eleifend. Nunc sollicitudin ultrices mi eget varius. Etiam lectus risus, vulputate nec leo sed, ultrices gravida dolor. Donec ultricies sodales justo eu vehicula. Sed sit amet ultrices dolor. Nunc a congue sem.<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="testDivTwoContent"><br>&nbsp;&nbsp;&nbsp;&nbsp;test Div Two Content<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<b>1914 translation by H. Rackham</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;"But I must explain to you how all this mistaken idea of denouncing pleasure and praising pain was born and I will give you a complete account of the system, and expound the actual teachings of the great explorer of the truth, the master-builder of human happiness. No one rejects, dislikes, or avoids pleasure itself, because it is pleasure, but because those who do not know how to pursue pleasure rationally encounter consequences that are extremely painful. Nor again is there anyone who loves or pursues or desires to obtain pain of itself, because it is pain, but because occasionally circumstances occur in which toil and pain can procure him some great pleasure. To take a trivial example, which of us ever undertakes laborious physical exercise, except to obtain some advantage from it? But who has any right to find fault with a man who chooses to enjoy a pleasure that has no annoying consequences, or one who avoids a pain that produces no resultant pleasure?"<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;"On the other hand, we denounce with righteous indignation and dislike men who are so beguiled and demoralized by the charms of pleasure of the moment, so blinded by desire, that they cannot foresee the pain and trouble that are bound to ensue; and equal blame belongs to those who fail in their duty through weakness of will, which is the same as saying through shrinking from toil and pain. These cases are perfectly simple and easy to distinguish. In a free hour, when our power of choice is untrammelled and when nothing prevents our being able to do what we like best, every pleasure is to be welcomed and every pain avoided. But in certain circumstances and owing to the claims of duty or the obligations of business it will frequently occur that pleasures have to be repudiated and annoyances accepted. The wise man therefore always holds in these matters to this principle of selection: he rejects pleasures to secure other greater pleasures, or else he endures pains to avoid worse pains."<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><p>&nbsp;&nbsp;&nbsp;&nbsp;<div style="height: 250px;"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="wipeDisplayNode" class='hasShadow' style = "height:200px; top: 30px; width: 350px; background: red; "><br>&nbsp;&nbsp;&nbsp;&nbsp;<div style="padding: 10px;">Hi friends</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="testDivThreeContent"><br>&nbsp;&nbsp;&nbsp;&nbsp;test Div Three Content<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<h1>Gist Output:</h1><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="gistOutput">Output here...<br><br></div><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><!--test content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!--Poetry content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-id="poemDlg" data-dojo-type="dijit/Dialog" title="Two moody poems ..."><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-props="style: {overflow: 'auto', padding: 0, height: '500px', width: '400px'}" data-dojo-type="dijit/layout/ContentPane"><br>&nbsp;&nbsp;&nbsp;&nbsp;<small><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<b>John Milton, 1608 - 1674</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;When I consider how my light is spent,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Ere half my days in this dark world and wide,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;And that one talent which is death to hide<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Lodged with me useless, though my soul more bent<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;To serve therewith my Maker, and present<br><br>&nbsp;&nbsp;&nbsp;&nbsp;My true account, lest He returning chide;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;"Doth God exact day-labor, light denied?"<br><br>&nbsp;&nbsp;&nbsp;&nbsp;I fondly ask. But Patience, to prevent<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;That murmur, soon replies, "God doth not need<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Either man 's work or His own gifts. Who best<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Bear His mild yoke, they serve Him best. His state<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Is kingly: thousands at His bidding speed,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;And post o'er land and ocean without rest;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;They also serve who only stand and wait."</small><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><small></small></p><br>&nbsp;&nbsp;&nbsp;&nbsp;<p><small><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<b>Acquainted with the Night, ROBERT FROST</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;I have been one acquainted with the night.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;I have walked out in rain-and back in rain.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;I have outwalked the furthest city light.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;I have looked down the saddest city lane.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;I have passed by the watchman on his beat<br><br>&nbsp;&nbsp;&nbsp;&nbsp;And dropped my eyes, unwilling to explain.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;I have stood still and stopped the sound of feet<br><br>&nbsp;&nbsp;&nbsp;&nbsp;When far away an interrupted cry<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Came over houses from another street,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;But not to call me back or say good-bye;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;And further still at an unearthly height,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;One luminary clock against the sky<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Proclaimed the time was neither wrong nor right.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;I have been one acquainted with the night.</small></p><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="dijitDialogPaneActionBar"><br>&nbsp;&nbsp;&nbsp;&nbsp;<button data-dojo-props="onClick:function(){poemDlg.hide();}" data-dojo-type="dijit/form/Button" id="PoemCancel" type="button">Close</button><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!--Poetry content--><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div URLRdr1_4Dlg --><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-id="URLRdr1_4Dlg" data-dojo-type="dijit/Dialog" title="URLRdrv1_4.java"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-props="style: {overflow: 'auto', padding: 0, height: '500px', width: '400px'}" data-dojo-type="dijit/layout/ContentPane"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//Before running, will have to compile with jsoup jar:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//export CLASSPATH= $CLASSPATH:/usr/share/java/jsoup/jsoup.jar<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//------------------------------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//Before running, will have to compile with jsoup & apache commons jars:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//export CLASSPATH=$CLASSPATH:/usr/share/java/jsoup/jsoup.jar:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//usr/share/java/apache-commons-lang3.jar<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//------------------------------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import java.net.*;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import java.io.*;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import org.jsoup.Jsoup;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import org.jsoup.nodes.Document;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import org.jsoup.nodes.Element;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import org.jsoup.select.Elements;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;import org.apache.commons.lang3.StringEscapeUtils;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public class URLRdr {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public static String getText(String url) throws IOException {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;URL website = new URL(url);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String strBody = "";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Document doc = Jsoup.connect(url).get();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Elements bodyTxt = doc.select("body");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;for (Element el : bodyTxt){<br><br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("bodyTxt: "+el);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;strBody = strBody + el.toString();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//escape the string for JSON<br><br>&nbsp;&nbsp;&nbsp;&nbsp;strBody = StringEscapeUtils.escapeJson(strBody);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return strBody;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public static void main( String[] args ) throws IOException{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String[] thisIsAStringArray = {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;"http://www.bing.com/search?q=aesthete+or+flaneur&go=Search&qs=ds&form=QBRE" ,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;"http://www.bing.com/search?q=aesthete+or +flaneur&go=Search&qs=ds&first=11&FORM=PERE" ,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;"http://www.bing.com/search?q=aesthete+or +flaneur&go=Search&qs=ds&first=21&FORM=PERE1" ,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;"http://www.bing.com/search?q=aesthete+or +flaneur&go=Search&qs=ds&first=31&FORM=PERE2" };<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String content = "";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;for( int i = 0; i &lt; thisIsAStringArray.length; i++) {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;content=content + URLRdr.getText(thisIsAStringArray[i]);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//System.out.println( content );<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//content = URLencoder.encode(content, "UTF-8");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//create a Gist from output<br><br>&nbsp;&nbsp;&nbsp;&nbsp;try {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;URL Giturl = new URL("https://api.github.com/gists");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;HttpURLConnection conn = (HttpURLConnection) Giturl.openConnection();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;conn.setDoOutput(true);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;conn.setRequestMethod("POST");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;conn.setRequestProperty("Content-Type", "application/json");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String input = "{ \"description\": \"2016mpt 7-12-16 Output of flaneur search on Bing\", \"public\" : true , \"files\": {\"mike.html\": {\"content\" : \"" + content + "\"}}}";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;// String input = "{ \"description\": \"2016mpt 7-12-16 Output of flaneur search on Bing\", \"public\" : true , \"files\": {\"mike.html\": {\"content\" : \"" + "test" + "\"}}}";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;OutputStream os = conn.getOutputStream();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;os.write((input.toString()).getBytes("UTF-8"));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;os.flush();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if (conn.getResponseCode() != HttpURLConnection.HTTP_CREATED) {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;throw new RuntimeException("Failed : HTTP error code : "<br><br>&nbsp;&nbsp;&nbsp;&nbsp;+ conn.getResponseCode());<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;BufferedReader br = new BufferedReader(new InputStreamReader(<br><br>&nbsp;&nbsp;&nbsp;&nbsp;(conn.getInputStream())));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String output;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("Output from Server .... \n");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;while ((output = br.readLine()) != null) {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(output);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;conn.disconnect();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;} catch (MalformedURLException e) {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;} catch (IOException e) {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("URLRdr done,..");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="dijitDialogPaneActionBar"><br>&nbsp;&nbsp;&nbsp;&nbsp;<button data-dojo-props="onClick:function() {URLRdr1_4Dlg.hide();}" data-dojo-type="dijit/form/Button" id="URLRdr1_4DlgOK" type="button">OK</button><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div></section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div URLRdr1_4Dlg --><p>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div mAlertDlg --><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-id="mAlertDlg" data-dojo-type="dijit/Dialog" title="Alert"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="mAlertTxt" data-dojo-props="style: {overflow: 'auto', padding: 0, height:'80%', width:'80%'}" data-dojo-type="dijit/layout/ContentPane"><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<div class="dijitDialogPaneActionBar"><br>&nbsp;&nbsp;&nbsp;&nbsp;<button data-dojo-props="onClick:function(){mAlertDlg.hide();}" data-dojo-type="dijit/form/Button" id="mAlertDlgOK" type="button">OK</button><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div></section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div mAlertDlg --><p>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div mADlg --><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-id="mADlg" data-dojo-type="dijit/Dialog" title="Check"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-type="dijit/form/DropDownButton"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span>Admin mode</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-type="dijit/form/Form" id="myAdminForm" data-dojo-id="myAdminForm"><br>&nbsp;&nbsp;&nbsp;&nbsp;<div data-dojo-type="dijit/TooltipDialog" id="tooltipDlg"><br>&nbsp;&nbsp;&nbsp;&nbsp;<table><br>&nbsp;&nbsp;&nbsp;&nbsp;<tr><br>&nbsp;&nbsp;&nbsp;&nbsp;<td><label for="Adminpwd">Password:</label></td><br>&nbsp;&nbsp;&nbsp;&nbsp;<td><input data-dojo-type="dijit/form/TextBox" required="true" type="password" id="Adminpwd" name="Adminpwd"></td><br>&nbsp;&nbsp;&nbsp;&nbsp;</tr><br>&nbsp;&nbsp;&nbsp;&nbsp;<tr><br>&nbsp;&nbsp;&nbsp;&nbsp;<td colspan="2"><br>&nbsp;&nbsp;&nbsp;&nbsp;<button data-dojo-type="dijit/form/Button" type="submit" name="submit">Login</button></td><br>&nbsp;&nbsp;&nbsp;&nbsp;</tr><br>&nbsp;&nbsp;&nbsp;&nbsp;</table><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;<script type="dojo/on" data-dojo-event="submit"><br>&nbsp;&nbsp;&nbsp;&nbsp;if(this.validate()){<br>&nbsp;&nbsp;&nbsp;&nbsp;mSetAdminMode();<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;return false;<br>&nbsp;&nbsp;&nbsp;&nbsp;</script><br>&nbsp;&nbsp;&nbsp;&nbsp;<script><br>&nbsp;&nbsp;&nbsp;&nbsp;require(["dojo/dom-form", "dojo/dom", "dojo/on", "dojo/parser",<br>&nbsp;&nbsp;&nbsp;&nbsp; "dijit/form/Form", "dijit/form/Button",<br>&nbsp;&nbsp;&nbsp;&nbsp;"dojo/domReady!"],<br>&nbsp;&nbsp;&nbsp;&nbsp;function(domForm, dom, on){<p>&nbsp;&nbsp;&nbsp;&nbsp;mSetAdminMode = function(value, constraints){<br>&nbsp;&nbsp;&nbsp;&nbsp;var pw = domForm.fieldToObject("Adminpwd");<br>&nbsp;&nbsp;&nbsp;&nbsp;var tmpVar = window.atob("dGVzdGluZw==");<br>&nbsp;&nbsp;&nbsp;&nbsp;var date = new Date();<br>&nbsp;&nbsp;&nbsp;&nbsp;var myRe = new RegExp(tmpVar, "g");<br>&nbsp;&nbsp;&nbsp;&nbsp;if(myRe.test(pw)){<br>&nbsp;&nbsp;&nbsp;&nbsp;mAdminMode = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;mADlg.hide();<br>&nbsp;&nbsp;&nbsp;&nbsp;alert('Form contains valid data.');<br>&nbsp;&nbsp;&nbsp;&nbsp;return true;<br>&nbsp;&nbsp;&nbsp;&nbsp;}else{<br>&nbsp;&nbsp;&nbsp;&nbsp;alert('Form contains invalid data.  Please correct first');<br>&nbsp;&nbsp;&nbsp;&nbsp;return false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;</script><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;<div id="mAlertTxt" data-dojo-props="style: {overflow: 'auto', padding: 0, height:'80%', width:'80%'}" data-dojo-type="dijit/layout/ContentPane"><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;</div></section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div mADlg --><p>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div editsDiv --><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="editsDiv"><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</div></section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div editsDiv --><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div ScriptDiv --><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="ScriptDiv"><br>&nbsp;&nbsp;&nbsp;&nbsp;<h4>TimeStamp: 20161005 noon </h4><p>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div ScriptDiv --><p>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div StyleDiv --><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="StyleDiv"><br>&nbsp;&nbsp;&nbsp;&nbsp;<h4>TimeStamp: 20161026 pm </h4><p>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><p>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div StyleDiv --><p>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div lrnFrench --><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="lrnFrench" dojoType="com.trivedi.oPls.mPane" tags="french languages instruct mind bookmark" title="lrnFrench"><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='mTitle'>Editorial(s) from le Monde</span><br><br><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href='https://gist.github.com/anonymous/2986fdabb514f23a4d76a7d8b2c0a5d0'>Ces intellectuels subjugus par le mythe Castro</a><p>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div lrnFrench --><p>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div lrnUrdu --><br>&nbsp;&nbsp;&nbsp;&nbsp;<section><br>&nbsp;&nbsp;&nbsp;&nbsp;<div id="lrnUrdu" dojoType="com.trivedi.oPls.mPane" tags="urdu languages instruct mind bookmark" title="lrnUrdu"><br><br><br>Srch Results for <a href="https://htmlpreview.github.io/?https://gist.githubusercontent.com/anonymous/b89394baed2de4b370a8e7e83f43aa0f/raw/c5b8af987f1be5bb32f175c53a56d119d5683f2d/mike.html">sufi</a> <br><br>Selected <a href="https://htmlpreview.github.io/?https://gist.githubusercontent.com/anonymous/bbffd006181a54ff19f617efdec4568a/raw/92c859387a1c7c4137cb08f75867b4616ba1c453/sufism.html">Srch Txt</a> for sufi<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;https://rekhta.org/<br><br>http://www.urdu-shayari.in/<br><br>http://www.storypick.com/mirza-ghalib-shayaris/<br><p>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.tinyurl.com/hgonpwa">Yahoo multipg srch "sufi rumi bulleh"</a><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><br>&nbsp;&nbsp;&nbsp;&nbsp;</section><br>&nbsp;&nbsp;&nbsp;&nbsp;<!-- div lrnUrdu --><p><p><br>&nbsp;&nbsp;&nbsp;&nbsp;</div><!-- div MainContent --><br><!-- Main Content ends--><p><!--contentDivsEnd--><!--insert new mPanes here-->

<div dojoType="com.trivedi.oPls.mPane" tags="java functional snippet"
title="Lazy sequences implementation for Java 8">\r\n\r\nby Tomasz Nurkiewicz (of Functors/Monad fame) -> <a href='https://www.nurkiewicz.com/2013/05/lazy-sequences-implementation-for-java-8.html'>article link</a> (a lib)\r\n<br>\r\n(also see: https://www.nurkiewicz.com/2013/05/lazy-sequences-in-scala-and-clojure.html)\r\n<br>\r\nCan be used for loading batches (pages) of data from database. Using ResultSet or Iterator is cumbersome but loading whole data set into memory often not feasible. An alternative involves loading first batch of data eagerly and then providing a function to load next batches. Data is loaded only when it's really needed and we don't suffer performance or scalability issues.\r\n<br>\r\n\r\n<code><pre>\r\n First let's define abstract API for loading batches of data from database:\r\npublic List<Record> loadPage(int offset, int max) {\r\n    //load records from offset to offset + max\r\n}\r\n\r\nI abstract from the technology entirely, but you get the point. Imagine that we now define LazySeq<Record> that starts from row 0 and loads next pages only when needed:\r\n\r\npublic static final int PAGE_SIZE = 5;\r\n\r\nprivate LazySeq<Record> records(int from) {\r\n    return LazySeq.concat(\r\n        loadPage(from, PAGE_SIZE), \r\n        () -> records(from + PAGE_SIZE)\r\n    );\r\n}\r\n</pre></code>\r\n<br>\r\n\r\n
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="javaScript functional bookmark"
title="Lazy sequences implementation for Java 8">\r\n<p>\r\n\r\n\r\nFunctional Programming <a href='https://marmelab.com/blog/2018/09/26/functional-programming-3-functor-redone.html'>in JavaScript</a>, Part 3: Introduction to Functors and Monads\r\n\r\n<p>\r\n\r\n\r\n
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java functional snippet"
title="Using Map/FlatMap: Unfolding multiple Optional variables in Java 8">
\r\n\r\n\t<code><pre>\r\nI have the following problem. Let's say you have 2 Optional variables\r\nOptional<Contact> c1 = ...\r\nOptional<Contact> c2 = ...\r\nand a method which needs 2 variables of type Contact\r\nvoid match(Contact c1, Contact c2) {...}\r\nand you need to unwrap both c1 and c2 Optional vars and pass them into the match() method. \r\n\r\n\"Is this the most elegant way to do that in Java 8?\"\r\nif (c1.isPresent() && c2.isPresent()) {\r\n    match(c1.get(), c2.get());\r\n}\r\n\r\nA:  Solution you provided in scala is just syntax sugar for using flatMaps internally. You can use flatmaps in Java 8 too (but there are no syntax sugar for it). \r\nc1.flatMap(contact1 -> c2.flatMap(contact2 -> match(c1,c2)))\r\n\r\nA: It has to be ifPresent since match has return type void, and if match will return f.e. boolean it could be Optional<Boolean> result = c1.flatMap(contact1 -> c2.map(contact2 -> match(contact1 ,contact2))) klappvisor Apr 6 '16 at 11:35 \r\nA:  Actually, a better way to do it in scala (and without syntax sugar) is something like c1.zip(c2).map { case (a,b) => match(a,b) }. Does java have zip? Dima Apr 6 '16 at 13:56 \r\n\r\nA:  If you consider the arguments not having values as an exception then you could handle them like:\r\ntry {\r\n    match(c1.orElseThrow(NoVal::new), c2.orElseThrow(NoVal::new));\r\n} catch (NoVal ex) {\r\n    ...\r\n}\r\nIf they aren't an exceptional case then I would go with your first option as being more explicit about your intent. In my view it's pretty clear and readable, and easy to change to use orElse if you wish to switch to using defaults if the optionals are empty.\r\nanswered Apr 6 '16 at 11:53 \r\nsprinter \r\n\t</pre></code>\r\n
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java functional snippet"
title="Using Map/FlatMap: The difference between map and flatMap methods in Java 8">
\r\n\r\n\t<code><pre>\r\nA: The type signature kinda tells the whole story. \r\nmap :: Stream T -> (T -> R) -> Stream R, \r\nflatMap :: Stream T -> (T -> Stream R) -> Stream R.  Chris Martin Oct 31 '14 at 22:56 \r\n\r\nA: @michael That type signature looks like Haskell, not Java. But it's not clear whether the actual Java signature is any more readable: \r\n<R> Stream<R> flatMap(Function<? super T,? extends Stream<? extends R>> mapper).  Stuart Marks Jul 20 '17 at 1:34 \r\n\r\nA:  Both map and flatMap can be applied to a Stream<T> and they both return a Stream<R>. The difference is that the map operation produces one output value for each input value, whereas the flatMap operation produces an arbitrary number (zero or more) values for each input value.\r\nThis is reflected in the arguments to each operation.\r\nThe map operation takes a Function, which is called for each value in the input stream and produces one result value, which is sent to the output stream.\r\nThe flatMap operation takes a function that conceptually wants to consume one value and produce an arbitrary number of values. However, in Java, it's cumbersome for a method to return an arbitrary number of values, since methods can return only zero or one value. One could imagine an API where the mapper function for flatMap takes a value and returns an array or a List of values, which are then sent to the output. Given that this is the streams library, a particularly apt way to represent an arbitrary number of return values is for the mapper function itself to return a stream! The values from the stream returned by the mapper are drained from the stream and are passed to the output stream. The \"clumps\" of values returned by each call to the mapper function are not distinguished at all in the output stream, thus the output is said to have been \"flattened.\"\r\nTypical use is for the mapper function of flatMap to return Stream.empty() if it wants to send zero values, or something like Stream.of(a, b, c) if it wants to return several values. But of course any stream can be returned.\r\n\r\nA:  Try viewing it from a different perspective: it's not a transparent case where you can see the inner workings through, but the whole function itself is transparent, i.e. invisible, to you - while still doing their work and letting you see what you're working with. In this case, \"flat\" refers to the opposite of \"nested\", flatmap removes one nesting level by flattening.  Zefiro\r\n\r\nA: Flattening comes from turning 2-level structure into single level structure, see Dici's answer for an example stackoverflow.com/a/26684582/6012102  andrzej.szmukala Jan 16 at 11:42 \r\n\r\nA: \tStream.flatMap, as it can be guessed by its name, is the combination of a map and a flat operation. That means that you first apply a function to your elements, and then flatten it. Stream.map only applies a function to the stream without flattening the stream.\r\nTo understand what flattening a stream consists in, consider a structure like [ [1,2,3],[4,5,6],[7,8,9] ] which has \"two levels\". Flattening this means transforming it in a \"one level\" structure : [ 1,2,3,4,5,6,7,8,9 ].\r\nedited May 17 '16 at 21:43  asgs \r\n\r\nA:  I would like to give 2 examples to get a more practical point of view: \r\n1st example making usage of map:\r\n@Test\r\npublic void convertStringToUpperCaseStreams() {\r\n    List<String> collected = Stream.of(\"a\", \"b\", \"hello\") // Stream of String \r\n            .map(String::toUpperCase) // Returns a stream consisting of the results of applying the given function to the elements of this stream.\r\n            .collect(Collectors.toList());\r\n    assertEquals(asList(\"A\", \"B\", \"HELLO\"), collected);\r\n}   \r\nNothing special in the first example, a Function is applied to return the String in uppercase.\r\nSecond example making usage of flatMap:\r\n@Test\r\npublic void testflatMap() throws Exception {\r\n    List<Integer> together = Stream.of(asList(1, 2), asList(3, 4)) // Stream of List<Integer>\r\n            .flatMap(List::stream)\r\n            .map(integer -> integer + 1)\r\n            .collect(Collectors.toList());\r\n    assertEquals(asList(2, 3, 4, 5), together);\r\n}\r\nIn the second example, a Stream of List is passed. It is NOT a Stream of Integer! \r\nIf a transformation Function has to be used (through map), then first the Stream has to be flattened to something else (a Stream of Integer). \r\nIf flatMap is removed then the following error is returned: The operator + is undefined for the argument type(s) List, int. \r\nIt is NOT possible to apply + 1 on a List of Integers!\r\nedited Jan 12 at 22:42   Jan Nielsen \r\n\r\nA:  The function you pass to stream.map has to return one object. That means each object in the input stream results in exactly one object in the output stream.\r\nThe function you pass to stream.flatMap returns a stream for each object. That means the function can return any number of objects for each input object (including none). The resulting streams are then concatenated to one output stream.\r\nanswered Oct 31 '14 at 22:58 Philipp \r\n\r\nA:  for a Map we have a list of elements and a (function,action) f so :\r\n[a,b,c] f(x) => [f(a),f(b),f(c)]\r\nand for the flat map we have a list of elements list and we have a (function,action) f and we want the result to be flattened :\r\n[[a,b],[c,d,e]] f(x) =>[f(a),f(b),f(c),f(d),f(e)]\r\nanswered Oct 8 '17 at 3:19 Bachiri Taoufiq Abderrahman \r\n\r\nA:  One line answer: flatMap helps to flatten a Collection<Collection<T>> into a Collection<T>. In the same way, it will also flatten an Optional<Optional<T>> into Optional<T>.  \r\n\r\nA:  I have a feeling that most answers here overcomplicate the simple problem. If you already understand how the map works that should be fairly easy to grasp.\r\nThere are cases where we can end up with unwanted nested structures when using map(), the flatMap() method is designed to overcome this by avoiding wrapping.\r\n\r\nExamples:\r\n1\r\nList<List<Integer>> result = Stream.of(Arrays.asList(1), Arrays.asList(2, 3))\r\n  .collect(Collectors.toList());\r\nWe can avoid having nested lists by using flatMap:\r\nList<Integer> result = Stream.of(Arrays.asList(1), Arrays.asList(2, 3))\r\n  .flatMap(i -> i.stream())\r\n  .collect(Collectors.toList());\r\n2\r\nOptional<Optional<String>> result = Optional.of(42)\r\n      .map(id -> findById(id));\r\n\r\nOptional<String> result = Optional.of(42)\r\n      .flatMap(id -> findById(id));\r\nwhere:\r\nprivate Optional<String> findById(Integer id)\r\nedited Apr 15 at 20:08 \r\nanswered Jul 25 '17 at 17:41 Grzegorz Piwowarek \r\n\r\nA:  Oracle's article on Optional highlights this difference between map and flatmap: \r\nString version = computer.map(Computer::getSoundcard)\r\n                  .map(Soundcard::getUSB)\r\n                  .map(USB::getVersion)\r\n                  .orElse(\"UNKNOWN\");\r\nUnfortunately, this code doesn't compile. Why? The variable computer is of type Optional<Computer>, so it is perfectly correct to call the map method. However, getSoundcard() returns an object of type Optional. This means the result of the map operation is an object of type Optional<Optional<Soundcard>>. As a result, the call to getUSB() is invalid because the outermost Optional contains as its value another Optional, which of course doesn't support the getUSB() method.\r\nWith streams, the flatMap method takes a function as an argument, which returns another stream. This function is applied to each element of a stream, which would result in a stream of streams. However, flatMap has the effect of replacing each generated stream by the contents of that stream. In other words, all the separate streams that are generated by the function get amalgamated or \"flattened\" into one single stream. What we want here is something similar, but we want to \"flatten\" a two-level Optional into one.\r\nOptional also supports a flatMap method. Its purpose is to apply the transformation function on the value of an Optional (just like the map operation does) and then flatten the resulting two-level Optional into a single one.\r\nSo, to make our code correct, we need to rewrite it as follows using flatMap:\r\nString version = computer.flatMap(Computer::getSoundcard)\r\n                   .flatMap(Soundcard::getUSB)\r\n                   .map(USB::getVersion)\r\n                   .orElse(\"UNKNOWN\");\r\nThe first flatMap ensures that an Optional<Soundcard> is returned instead of an Optional<Optional<Soundcard>>, and the second flatMap achieves the same purpose to return an Optional<USB>. Note that the third call just needs to be a map() because getVersion() returns a String rather than an Optional object.\r\nhttp://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\r\nanswered Feb 24 '17 at 19:54 \r\nRusty Core \r\n\r\n\t</pre></code>\r\n
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java functional snippet"
title="Using Map/FlatMap: Using Flatmap/Filter">
\r\n\t<code><pre>\r\nQ: I have a Stream of Integer and I would like to find the two numbers whose sum is equals to another number. So I came up with the following solution:\r\nBiPredicate<Integer, Integer> p = (price1, price2) -> price1.intValue() + price2.intValue() == moneyQty;\r\nflavoursPrices.filter(p);\r\nBut the filter method does not receive a BiPredicate. Why not? What is an alternative for that?\r\n\r\nA: You can still work with Bipredicate. The argument that the filter-method needs is a Predicate, so here is an example of how to use this BiPredicate:\r\n BiPredicate<Integer, Integer> p = (price1, price2) -> price1.intValue() + price2.intValue() == moneyQty;\r\n\r\nflavoursPrices.stream().filter(el->p.test(el.price1,el.price2));\r\nIn this example flavoursPrices must be a List. \r\nThe lambda that we are using:\r\nel->p.test(el.price1,el.price2)\r\nIs replacing the anonymous inner class declaration for creating a new Predicate out of the BiPredicate:\r\n Predicate<Integer> arg =new Predicate<Integer>() {\r\n        @Override\r\n        public boolean test(Element el) {\r\n            return p.test(el.price1,el.price2);\r\n        }\r\n    };\r\nSo to filter the stream, we are creating a new Predicate for every element coming from the stream and than we use this Predicate as argument to use it's test-method. The big advantage of this is, that we don't have to create enormous amounts of Predicates in advance, but we can pass every element in the lambda function and get it's attributes.\r\nanswered Dec 24 '16 at 9:46  Matt \r\n\r\n*********** A:  Because filter does not work that way, it only filters one collection at a time. For your task, you need something like Python's itertools.product; this can be implemented using flatMap. In Scala, this looks as short as:\r\nprices.flatMap(p1 => \r\n  prices.flatMap(p2 => \r\n    if (p1 + p2 == 5) List((p1, p2)) else List()))\r\nIf you want to do it in (native) Java, something like this comes out:\r\nimport java.util.*;\r\nimport java.util.stream.*;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        List<Integer> prices =  Arrays.asList(1,2,3,4,5,6,7,8,9);\r\n\r\n        List<List<Integer>> result = prices.stream().flatMap(p1 ->\r\n            prices.stream().flatMap(p2 ->\r\n                p1 + p2 == 5 ? Stream.of(Arrays.asList(p1, p2)) : Stream.empty()\r\n            )\r\n        ).collect(Collectors.toList());\r\n\r\n        System.out.println(result);\r\n\r\n    }\r\n}\r\n... which prints [[1, 4], [2, 3], [3, 2], [4, 1]]. But I wouldn't use that in reality ;) At least, a tuple class would be nice to have.\r\nIt is worth noting that flatMap one of the most powerful functions there is; almost all stream transformations (filter, map, cartesian product, flatten) can be implemented using it. And rest (like zip) is almost always a fold/reduce (or, rarely, an unfold).\r\nanswered Mar 15 '16 at 21:16  phg \r\n\r\n\t</pre></code>\r\n
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java functional snippet"
title="Using Map/FlatMap: Using Reduce">
\r\n\r\nQ: Given a value foo and a Stream of Consumer<Foo> void functions, what's the most concise way to apply each function to the value? <br>Right now I have\r\n<code><pre>\r\nconsumers.forEach(c -> c.accept(foo));\r\n\t</pre></code>\r\nwhich isn't terrible, but I suspect there might be some way to turn this inside out and do it with just method references (no explicit lambda). Possibly something with a singleton list and zip()?\r\n\r\nA: You could reduce your consumers by means of the Consumer.andThen method and then apply the resulting consumer to the foo argument:\r\n\t<code><pre>\r\nconsumers.reduce(Consumer::andThen).ifPresent(c -> c.accept(foo));\r\n\t</pre></code>\r\nBut there's no difference between this approach and yours, and yours' is shorter.\r\nanswered Nov 28 '17 at 22:07 Federico Peralta Schaffner \r\n
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java functional bookmark"
title="Currying in Java">
https://stackoverflow.com/questions/tagged/java+currying
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java functional DSL snippet"
title="Venkat Subramaniam's FLUENT DSL java8 Functional stuff">
<p>\r\nA neat example of Venkat Subramaniam's 'higher-order' or composed fns + DSL + functional style -><br>\r\nfrom Akka <a href='https://developer.lightbend.com/start/?group=akka&project=akka-http-quickstart-java'>Http Quickstart</a> Java<br>\r\n<br>\r\n<code><pre>\r\n@Override\r\n  public Receive createReceive(){\r\n    return receiveBuilder()\r\n            .match(UserRegistryMessages.GetUsers.class, getUsers -> getSender().tell(new Users(users),getSelf()))\r\n            .match(UserRegistryMessages.CreateUser.class, createUser -> {\r\n              users.add(createUser.getUser());\r\n              getSender().tell(new UserRegistryMessages.ActionPerformed(\r\n                      String.format(\"User %s created.\", createUser.getUser().getName())),getSelf());\r\n            })\r\n            .match(UserRegistryMessages.GetUser.class, getUser -> {\r\n              getSender().tell(users.stream()\r\n                      .filter(user -> user.getName().equals(getUser.getName()))\r\n                      .findFirst(), getSelf());\r\n            })\r\n            .match(UserRegistryMessages.DeleteUser.class, deleteUser -> {\r\n              users.removeIf(user -> user.getName().equals(deleteUser.getName()));\r\n              getSender().tell(new UserRegistryMessages.ActionPerformed(String.format(\"User %s deleted.\", deleteUser.getName())),\r\n                      getSelf());\r\n\r\n            }).matchAny(o -> log.info(\"received unknown message\"))\r\n            .build();\r\n  }\r\n}\r\n</pre></code>\r\n<p>\r\n\r\n\r\n<br>\t// <span class='mHG'>Functions</span><br><br>        Function&lt;String, Integer&gt; toInteger = Integer::valueOf;<br>        Function&lt;String, String&gt; backToString = toInteger.andThen(String::valueOf);<br><br>        backToString.apply(\"123\");     // \"123\"<br><br><br>        // <span class='mHG'>Suppliers</span><br><br>        Supplier&lt;Person&gt; personSupplier = Person::new;<br>        personSupplier.get();   // new Person<br><br><br>        // <span class='mHG'>Consumers</span><br><br>        Consumer&lt;Person&gt; greeter = (p) -&gt; System.out.println(\"Hello, \" + p.firstName);<br>        greeter.accept(new Person(\"Luke\", \"Skywalker\"));<br><br><hr><br><br>LocalTime comes with various factory methods to simplify the creation of new instances, including parsing of time strings.<br><br>LocalTime late = LocalTime.of(23, 59, 59);<br>System.out.println(late);       // 23:59:59<br><br>DateTimeFormatter germanFormatter =<br>    DateTimeFormatter<br>        .ofLocalizedTime(FormatStyle.SHORT)<br>        .withLocale(Locale.GERMAN);<br><br>LocalTime leetTime = <b>LocalTime.parse</b>(\"13:37\", germanFormatter);<br>System.out.println(leetTime);   // 13:37<br><hr><br>Good java resources (w/ src examples)<br>\thttps://github.com/google/guava/wiki<br>\thttps://github.com/winterbe/java8-tutorial<br>\thttps://github.com/cxxr/better-java<br><hr><br>/***<br> * Excerpted from \"Functional Programming in Java\",<br> * published by The Pragmatic Bookshelf.<br> * Copyrights apply to this code. It may not be used to create training material, <br> * courses, books, articles, and the like. Contact us if you are in doubt.<br> * We make no guarantees that this code is fit for any purpose. <br> * Visit http://www.pragmaticprogrammer.com/titles/vsjava8 for more book information.<br>***/<br><br>package fpij;<br><br>public class <b>DefaultMethods</b> {<br>  public interface Fly {<br>    default void takeOff() { System.out.println(\"Fly::takeOff\"); }<br>    default void land() { System.out.println(\"Fly::land\"); }<br>    default void turn() { System.out.println(\"Fly::turn\"); }<br>    default void cruise() { System.out.println(\"Fly::cruise\"); }<br>  }<br>  <br>  public <b>interface</b> FastFly <b>extends</b> Fly {<br>    default void takeOff() { System.out.println(\"FastFly::takeOff\"); }    <br>  }<br><br>  public interface Sail {<br>    default void cruise() { System.out.println(\"Sail::cruise\"); }<br>    default void turn() { System.out.println(\"Sail::turn\"); }<br>  }<br><br>  public class Vehicle {<br>    public void turn() { System.out.println(\"Vehicle::turn\"); }<br>  }<br>  <br>  public class SeaPlane extends Vehicle implements FastFly, Sail {<br>    private int altitude;<br>    //...<br>    public void cruise() { <br>      System.out.print(\"SeaPlane::cruise currently cruise like: \"); <br>      if(altitude &gt; 0)<br>        FastFly.super.cruise();<br>      else<br>        Sail.super.cruise();<br>    }<br>  }<br>  <br>  public void useClasses() {<br>    SeaPlane seaPlane = new SeaPlane();<br>    seaPlane.takeOff();<br>    seaPlane.turn();<br>    seaPlane.cruise();<br>    seaPlane.land();    <br>  }<br>  <br>  public static void main(final String[] args) {<br>    new DefaultMethods().useClasses();<br>  }<br>}<br>----------------OUTPUT-------------------<br>FastFly::takeOff<br>Vehicle::turn<br>SeaPlane::cruise currently cruise like: Sail::cruise<br>Fly::land<br><hr><br>import java.util.List;<br>import java.util.stream.Stream;<br>import java.io.File;<br>import java.io.IOException;<br><br>public class HandleException {<br>  public static void main(String[] args) throws IOException {<br>    <b>Stream.of</b>(\"/usr\", \"/tmp\")<br>          .map(path -&gt; {<br>            try {<br>             return new File(path).getCanonicalPath();             <br>            } catch(IOException ex) {<br>             return ex.getMessage();<br>            }<br>           }) <br>          .forEach(System.out::println);    <br>  }<br>}<br>----------------OUTPUT-------------------<br>/usr<br>/private/tmp<br><hr><br>package fpij;<br><br>public class Mailer {<br>  public void from(final String address) { /*... */ }<br>  public void to(final String address)   { /*... */ }<br>  public void subject(final String line) { /*... */ }<br>  public void body(final String message) { /*... */ }<br>  public void send() { System.out.println(\"sending...\"); }<br><br>  //...<br>  public static void main(final String[] args) {<br>    Mailer mailer = new Mailer();<br>    mailer.from(\"build@agiledeveloper.com\");<br>    mailer.to(\"venkats@agiledeveloper.com\");<br>    mailer.subject(\"build notification\");<br>    mailer.body(\"...your code sucks...\");<br>    mailer.send();<br>  }<br>}<br>----------------OUTPUT-------------------<br>sending...<br><hr><br>package fpij;<br><br>public class MailBuilder {<br>  public MailBuilder from(final String address) { /*... */; return this; }<br>  public MailBuilder to(final String address)   { /*... */; return this; }<br>  public MailBuilder subject(final String line) { /*... */; return this; }<br>  public MailBuilder body(final String message) { /*... */; return this; }<br>  public void send() { System.out.println(\"sending...\"); }<br><br>  //...<br>  public static void main(final String[] args) {<br>    new MailBuilder()<br>      .from(\"build@agiledeveloper.com\")<br>      .to(\"venkats@agiledeveloper.com\")<br>      .subject(\"build notification\")<br>      .body(\"...it sucks less...\")<br>      .send();<br>  }<br>}<br>----------------OUTPUT-------------------<br>sending...<br><hr><br>package fpij;<br><br>import java.util.function.<b>Consumer</b>;<br><br>public class FluentMailer {<br>  private FluentMailer() {}<br>  <br>  public FluentMailer from(final String address) { /*... */; return this; }<br>  public FluentMailer to(final String address)   { /*... */; return this; }<br>  public FluentMailer subject(final String line) { /*... */; return this; }<br>  public FluentMailer body(final String message) { /*... */; return this; }<br>  <br>  public static void send(final Consumer&lt;FluentMailer&gt; block) { <br>    final FluentMailer mailer = new FluentMailer();<br>    <b>block.accept</b>(mailer); <br>    System.out.println(\"sending...\"); <br>  }<br><br>  //...<br>  public static void main(final String[] args) {<br>    FluentMailer.send(mailer -&gt;<br>      mailer<b>.from</b>(\"build@agiledeveloper.com\")<br>            <b>.to</b>(\"venkats@agiledeveloper.com\")<br>            <b>.subject</b>(\"build notification\")<br>            <b>.body</b>(\"...much better...\"));<br>  }<br>}<br>----------------OUTPUT-------------------<br>sending...<br><hr><br>package fpij;<br><br>import java.util.stream.Stream;<br>import java.util.function.Function;<br>import java.awt.Color;<br>import java.util.function.Consumer;<br><br>@SuppressWarnings(\"unchecked\")<br>public class Camera {  <br>  private Function&lt;Color, Color&gt; filter;<br>  <br>  public Color capture(final Color inputColor) {<br>      final Color processedColor = filter.apply(inputColor);<br>      //... more processing of color...<br>      return processedColor;<br>  }<br><br>  //... other functions that use the filter ...<br><br>  public void setFilters(final Function&lt;Color, Color&gt;... filters) {<br>    filter = <br>      <b>Stream.of(filters)<br>            .reduce((filter, next) -&gt; filter.compose(next))<br>            .orElse(color -&gt; color)</b>;<br>  }<br>  public Camera() { setFilters(); }<br>  <br>  public static void main(final String[] args) {<br>    final Camera camera = new Camera();<br>    <b>final Consumer&lt;String&gt; printCaptured = (filterInfo) -&gt;</b><br>      System.out.println(String.format(\"with %s: %s\", filterInfo,   <br>        camera.capture(new Color(200, 100, 200))));<br>        <br>    System.out.println(\"//\" + \"START:NOFILTER_OUTPUT\");<br>    printCaptured.accept(\"no filter\");<br>    System.out.println(\"//\" + \"END:NOFILTER_OUTPUT\");<br><br>    System.out.println(\"//\" + \"START:BRIGHT_OUTPUT\");<br>    camera.setFilters(Color::brighter);<br>    printCaptured.accept(\"brighter filter\");<br>    System.out.println(\"//\" + \"END:BRIGHT_OUTPUT\");<br><br>    System.out.println(\"//\" + \"START:DARK_OUTPUT\");<br>    camera.setFilters(Color::darker);<br>    printCaptured.accept(\"darker filter\");<br>    System.out.println(\"//\" + \"END:DARK_OUTPUT\");<br>    <br>    System.out.println(\"//\" + \"START:BOTH_OUTPUT\");<br>    camera.setFilters(Color::brighter, Color::darker);<br>    printCaptured.accept(\"brighter & darker filter\");<br>    System.out.println(\"//\" + \"END:BOTH_OUTPUT\");<br>  }<br>  <br>}<br>----------------OUTPUT-------------------<br>with no filter: java.awt.Color[r=200,g=100,b=200]<br>with brighter filter: java.awt.Color[r=255,g=142,b=255]<br>with darker filter: java.awt.Color[r=140,g=70,b=140]<br>with brighter & darker filter: java.awt.Color[r=200,g=100,b=200]<br><hr><br>package fpij;<br><br>import java.util.stream.Stream;<br>import java.util.function.Function;<br>import java.awt.Color;<br>import java.util.function.Consumer;<br><br>@SuppressWarnings(\"unchecked\")<br>public class Camera2 {  <br>  private Function&lt;Color, Color&gt; filter;<br>  <br>  public Color capture(final Color inputColor) {<br>      final Color processedColor = filter.apply(inputColor);<br>      //... more processing of color...<br>      return processedColor;<br>  }<br><br>  //... other functions that use the filter ...<br><br>  public void setFilters(final Function&lt;Color, Color&gt;... filters) {<br>    filter = <br>      <b>Stream.of(filters)<br>            .reduce((filter, next) -&gt; filter.compose(next))<br>            .orElseGet(Function::identity)</b>;<br>  }<br><br>  public Camera2() { setFilters(); }<br>  <br>  public static void main(final String[] args) {<br>    final Camera2 camera = new Camera2();<br>    final Consumer&lt;String&gt; printCaptured = (filterInfo) -&gt;<br>      System.out.println(String.format(\"with %s: %s\", filterInfo,   <br>        camera.capture(new Color(200, 100, 200))));<br>        <br>    System.out.println(\"//\" + \"START:NOFILTER_OUTPUT\");<br>    printCaptured.accept(\"no filter\");<br>    System.out.println(\"//\" + \"END:NOFILTER_OUTPUT\");<br><br>    System.out.println(\"//\" + \"START:BRIGHT_OUTPUT\");<br>    camera.setFilters(Color::brighter);<br>    printCaptured.accept(\"brighter filter\");<br>    System.out.println(\"//\" + \"END:BRIGHT_OUTPUT\");<br><br>    System.out.println(\"//\" + \"START:DARK_OUTPUT\");<br>    camera.setFilters(Color::darker);<br>    printCaptured.accept(\"darker filter\");<br>    System.out.println(\"//\" + \"END:DARK_OUTPUT\");<br>    <br>    System.out.println(\"//\" + \"START:BOTH_OUTPUT\");<br>    camera.setFilters(Color::brighter, Color::darker);<br>    printCaptured.accept(\"brighter & darker filter\");<br>    System.out.println(\"//\" + \"END:BOTH_OUTPUT\");<br>  }<br>  <br>}<br>----------------OUTPUT-------------------<br>with no filter: java.awt.Color[r=200,g=100,b=200]<br>with brighter filter: java.awt.Color[r=255,g=142,b=255]<br>with darker filter: java.awt.Color[r=140,g=70,b=140]<br>with brighter & darker filter: java.awt.Color[r=200,g=100,b=200]<br><hr><br>package fpij;<br><br>import java.io.File;<br>import java.nio.file.Files;<br>import java.nio.file.Paths;<br>import java.io.IOException;<br><br>public class ListSelectFiles {<br>  public static void main(String[] args) throws IOException {<br><br>{<br>      final String[] files = <br>        new File(\"fpij\").list(new java.io.FilenameFilter() {<br>          public boolean <b>accept</b>(final File dir, final String name) {<br>            return name.endsWith(\".java\");<br>          }<br>        });<br>  /*<br>  System.out.println(files);<br>  */<br>}<br><br>    Files.newDirectoryStream(<br>             Paths.get(\"fpij\"), path -&gt; path.toString().endsWith(\".java\"))<br>         .forEach(System.out::println);<br>  }<br>}<br>----------------OUTPUT-------------------<br><hr><br>import java.io.File;<br>import java.util.List;<br>import java.util.ArrayList;<br>import java.util.Arrays;<br>import java.util.stream.Stream;<br>import java.util.function.Function;<br>import static java.util.stream.Collectors.toList;<br><br>public class ListSubDirs {<br>  public static void listTheHardWay() {<br>    List&lt;File&gt; files = new ArrayList&lt;&gt;();<br>    <br>    File[] filesInCurrentDir = new File(\".\").listFiles();<br>    for(File file : filesInCurrentDir) {<br>      File[] filesInSubDir = file.listFiles();<br>      if(filesInSubDir != null) {<br>        files.addAll(Arrays.asList(filesInSubDir));<br>      } else {<br>        files.add(file);<br>      }<br>    }<br>    <br>    System.out.println(\"Count: \" + files.size());<br>  }<br><br>  public static void <b>betterWay()</b> {<br>    List&lt;File&gt; files = <br>      Stream.of(new File(\".\").listFiles())<br>            .flatMap(file -&gt; file.listFiles() == null ? <br>                Stream.of(file) : Stream.of(file.listFiles()))<br>            .collect(toList());<br>    System.out.println(\"Count: \" + files.size());<br>  }<br>    <br>  public static void main(String[] args) {<br>    System.out.println(\"START:HARDWAY_OUTPUT\");<br>    listTheHardWay();<br>    System.out.println(\"END:HARDWAY_OUTPUT\");<br>    betterWay();<br>  }<br>}<br>----------------OUTPUT-------------------<br>START:HARDWAY_OUTPUT<br>Count: 32<br>END:HARDWAY_OUTPUT<br>Count: 32<br><hr><br>import java.util.Arrays;<br>import java.util.Comparator;<br>import java.util.List;<br>import java.util.ArrayList;<br>import java.util.stream.Collectors;<br>import java.util.Map;<br>import java.util.Optional;<br>import java.util.function.BinaryOperator;<br>import static java.util.stream.Collectors.*;<br><br>public class OlderThan20 {<br>  public static void main(String[] args) {<br>    final List&lt;Person&gt; people = Arrays.asList(<br>      new Person(\"John\", 20),<br>      new Person(\"Sara\", 21),<br>      new Person(\"Jane\", 21),<br>      new Person(\"Greg\", 35));<br><br>{  <br>    System.out.println(\"//\" + \"START:MUTABLE_OUTPUT\");<br>    List&lt;Person&gt; olderThan20 = new ArrayList&lt;&gt;();<br>      people.stream()<br>            .filter(person -&gt; person.getAge() &gt; 20)<br>            .forEach(person -&gt; olderThan20.add(person));<br>    System.out.println(\"People older than 20: \" + olderThan20);<br>    System.out.println(\"//\" + \"END:MUTABLE_OUTPUT\");<br>}<br><br>{  <br>    System.out.println(\"//\" + \"START:COLLECT_OUTPUT\");<br>    List&lt;Person&gt; olderThan20 = <br>      people.stream()<br>            .filter(person -&gt; person.getAge() &gt; 20)<br>            .collect(ArrayList::new, ArrayList::add, ArrayList::addAll);<br>    System.out.println(\"People older than 20: \" + olderThan20);<br>    System.out.println(\"//\" + \"END:COLLECT_OUTPUT\");<br>}<br><br>{  <br>    System.out.println(\"//\" + \"START:COLLECT_TO_LIST_OUTPUT\");<br>    List&lt;Person&gt; olderThan20 = <br>      people.stream()<br>            .filter(person -&gt; person.getAge() &gt; 20)<br>            .collect(Collectors.toList());<br>    System.out.println(\"People older than 20: \" + olderThan20);<br>    System.out.println(\"//\" + \"END:COLLECT_TO_LIST_OUTPUT\");<br>}<br><br>{  <br>    System.out.println(\"//\" + \"START:GROUP_BY_OUTPUT\");<br>    Map&lt;Integer, List&lt;Person&gt;&gt; peopleByAge = <br>      people.stream()<br>            .collect(Collectors.groupingBy(Person::getAge));<br>    System.out.println(\"Grouped by age: \" + peopleByAge);<br>    System.out.println(\"//\" + \"END:GROUP_BY_OUTPUT\");<br>}<br><br>{  <br>    System.out.println(\"//\" + \"START:GROUP_BY_AGE_NAME_OUTPUT\");<br>    Map&lt;Integer, List&lt;String&gt;&gt; nameOfPeopleByAge = <br>      people.stream()<br>            .collect(<br>              groupingBy(Person::getAge, mapping(Person::getName, toList())));<br>    System.out.println(\"People grouped by age: \" + nameOfPeopleByAge);<br>    System.out.println(\"//\" + \"END:GROUP_BY_AGE_NAME_OUTPUT\");<br>}<br><br>{  <br>    System.out.println(\"//\" + \"START:OLDEST_IN_EACH_LETTER_OUTPUT\");<br>    Comparator&lt;Person&gt; byAge = Comparator.comparing(Person::getAge);<br>    Map&lt;Character, Optional&lt;Person&gt;&gt; oldestPersonOfEachLetter = <br>      people.stream()<br>            .collect(groupingBy(person -&gt; person.getName().charAt(0),<br>               reducing(BinaryOperator.maxBy(byAge))));<br>    System.out.println(\"Oldest person of each letter:\");<br>    System.out.println(oldestPersonOfEachLetter);<br>    System.out.println(\"//\" + \"END:OLDEST_IN_EACH_LETTER_OUTPUT\");<br>}<br>  }<br>}<br>----------------OUTPUT-------------------<br>People older than 20: [Sara - 21, Jane - 21, Greg - 35]<br>People older than 20: [Sara - 21, Jane - 21, Greg - 35]<br>People older than 20: [Sara - 21, Jane - 21, Greg - 35]<br>Grouped by age: {35=[Greg - 35], 20=[John - 20], 21=[Sara - 21, Jane - 21]}<br>People grouped by age: {35=[Greg], 20=[John], 21=[Sara, Jane]}<br>Oldest person of each letter:<br>{S=Optional[Sara - 21], G=Optional[Greg - 35], J=Optional[Jane - 21]}<br><hr><br>import java.io.File;<br>import java.util.Arrays;<br><br>public class ListHiddenFiles {<br>  public static void main(String[] args) {<br><br>    final File[] files = new File(\".\").listFiles(file -&gt; file.isHidden());<br><br>    new File(\".\").listFiles(File::isHidden);<br><br>    Arrays.stream(files).forEach(System.out::println);<br>  }<br>}<br><hr><br>import java.util.List;<br>import java.util.Arrays;<br>import java.util.stream.Stream;<br><br>public class <b>LazyStreams</b> {<br>    private static int length(final String name) {<br>      System.out.println(\"getting length for \" + name);<br>      return name.length();<br>    }<br>    private static String toUpper(final String name ) {<br>      System.out.println(\"converting to uppercase: \" + name);<br>      return name.toUpperCase();<br>    }<br>    //...<br><br>    public static void main(final String[] args) {<br>      List&lt;String&gt; names = Arrays.asList(\"Brad\", \"Kate\", \"Kim\", \"Jack\", \"Joe\",<br>        \"Mike\", \"Susan\", \"George\", \"Robert\", \"Julia\", \"Parker\", \"Benson\");<br>      System.out.println(\"//\" + \"START:CHAIN_OUTPUT\");<br>      {<br><br>      final String firstNameWith3Letters = <br>        names.stream()<br>             .filter(name -&gt; length(name) == 3)<br>             .map(name -&gt; toUpper(name))<br>             .findFirst()<br>             .get();<br><br>      System.out.println(firstNameWith3Letters);<br>      }<br>      System.out.println(\"//\" + \"END:CHAIN_OUTPUT\");<br>      <br>      System.out.println(\"//\" + \"START:SPLIT_OUTPUT\");<br>      {<br>      <b>Stream&lt;String&gt; namesWith3Letters</b> = <br>        names.stream()<br>             .filter(name -&gt; length(name) == 3)<br>             .map(name -&gt; toUpper(name));<br>        <br>      System.out.println(\"Stream created, filtered, mapped...\");<br>      System.out.println(\"<b>ready to call findFirst</b>...\");<br>      <br>      final String firstNameWith3Letters =<br>        namesWith3Letters.findFirst()<br>                         .get();<br>      <br>      System.out.println(firstNameWith3Letters);<br>      }<br>      System.out.println(\"//\" + \"END:SPLIT_OUTPUT\");<br>      <br>      <br>    }<br><br>}<br>----------------OUTPUT-------------------<br>getting length for Brad<br>getting length for Kate<br>getting length for Kim<br>converting to uppercase: Kim<br>KIM<br>Stream created, filtered, mapped...<br>ready to call findFirst...<br>getting length for Brad<br>getting length for Kate<br>getting length for Kim<br>converting to uppercase: Kim<br>KIM<br><hr><br>package fpij;<br><br>public class Heavy {<br>  public Heavy() { System.out.println(\"Heavy created\"); }<br><br>  public String toString() { return \"quite heavy\"; }<br>}<br><br>public class HolderNaive {<br>  private Heavy heavy;<br>  <br>  public HolderNaive() {<br>    System.out.println(\"Holder created\");<br>  }<br>  <br>  public Heavy getHeavy() {<br>    if(heavy == null) {<br>      heavy = new Heavy();<br>    }<br>    <br>    return heavy;<br>  }<br><br>//...<br><br>  public static void main(final String[] args) {<br>    final HolderNaive holder = new HolderNaive();<br>    System.out.println(\"deferring heavy creation...\");<br>    System.out.println(holder.getHeavy());<br>    System.out.println(holder.getHeavy());<br>  }<br>}<br>----------------OUTPUT-------------------<br>Holder created<br>deferring heavy creation...<br>Heavy created<br>quite heavy<br>quite heavy<br><hr><br>package fpij;<br><br>import java.util.function.Supplier;<br><br>public class Holder {<br>  private <b>Supplier&lt;Heavy&gt; heavy</b> = () -&gt; createAndCacheHeavy();<br>  <br>  public Holder() {<br>    System.out.println(\"Holder created\");<br>  }<br><br>  public Heavy getHeavy() {<br>    return heavy.get();<br>  }<br>  //...<br><br>  private <b>synchronized</b> Heavy <b>createAndCacheHeavy()</b> {<br>    <b>class HeavyFactory implements Supplier&lt;Heavy&gt;</b> {<br>      private final Heavy heavyInstance = new Heavy();<br><br>      public Heavy get() { return heavyInstance; }<br>    }<br><br>    if(!HeavyFactory.class.isInstance(heavy)) {<br>      heavy = new HeavyFactory();<br>    }<br>    <br>    return heavy.get();<br>  }<br><br>  public static void main(final String[] args) {<br>    final Holder holder = new Holder();<br>    System.out.println(\"deferring heavy creation...\");<br>    System.out.println(holder.getHeavy());<br>    System.out.println(holder.getHeavy());<br>  }<br>}<br><br>----------------OUTPUT-------------------<br>Holder created<br>deferring heavy creation...<br>Heavy created<br>quite heavy<br>quite heavy<br><br><hr><br>package fpij;<br><br>import java.util.function.Supplier;<br><br>public class Evaluation {<br>  public static boolean evaluate(final int value) {<br>    System.out.println(\"evaluating ...\" + value);<br>    simulateTimeConsumingOp(2000);<br>    return value &gt; 100;<br>  }<br>  //...<br><br>  public static void simulateTimeConsumingOp(final int millseconds) {<br>    try { <br>      Thread.sleep(2000); <br>    } catch(Exception ex) { throw new RuntimeException(ex); }<br>  }<br><br>  public static void <b>eagerEvaluato</b>r(<br>    final boolean input1, final boolean input2) {<br>    System.out.println(\"eagerEvaluator called...\");<br>    System.out.println(\"accept?: \" + (input1 && input2));<br>  }<br><br>  public static void <b>lazyEvaluator</b>(<br>    final Supplier&lt;Boolean&gt; input1, final Supplier&lt;Boolean&gt; input2) {<br>    System.out.println(\"lazyEvaluator called...\");<br>    System.out.println(\"accept?: \" + (input1.get() && input2.get()));<br>  }<br>  <br>  public static void main(final String[] args) {<br><br>    System.out.println(\"//\" + \"START:EAGER_OUTPUT\");<br>    eagerEvaluator(evaluate(1), evaluate(2));<br>    System.out.println(\"//\" + \"END:EAGER_OUTPUT\");<br><br>    System.out.println(\"//\" + \"START:LAZY_OUTPUT\");<br>    lazyEvaluator(() -&gt; evaluate(1), () -&gt; evaluate(2));<br>    System.out.println(\"//\" + \"END:LAZY_OUTPUT\");<br>  }<br>}<br>----------------OUTPUT-------------------<br>evaluating ...1<br>evaluating ...2<br>eagerEvaluator called...<br>accept?: false<br>lazyEvaluator called...<br>evaluating ...1<br>accept?: false<br><hr><br>import java.util.List;<br>import java.util.Arrays;<br>import java.util.function.Function;<br>import static <b>fpij.Memoizer.callMemoized</b>;<br><br>public <b>class RodCutterBasic</b> {<br>  final List&lt;Integer&gt; prices;<br>  public RodCutterBasic(final List&lt;Integer&gt; pricesForLength) {<br>    prices = pricesForLength;<br>  }<br>  <br>  //...<br>  <br>  public int maxProfit(final int length) {<br>    int profit = (length &lt;= prices.size()) ? prices.get(length - 1) : 0;<br>    for(int i = 1; i &lt; length; i++) {<br>      int priceWhenCut = maxProfit(i) + maxProfit(length - i);<br>      if(profit &lt; priceWhenCut) profit = priceWhenCut;<br>    }<br>    <br>    return profit;<br>  }<br><br>    static<br>    final List&lt;Integer&gt; priceValues = <br>      Arrays.asList(2, 1, 1, 2, 2, 2, 1, 8, 9, 15);<br>      <br><br>  public static void run(final RodCutterBasic rodCutter) {<br><br>    System.out.println(rodCutter.maxProfit(5));<br>    System.out.println(rodCutter.maxProfit(22));<br>  }<br>  <br>  public static void main(final String[] args) {<br>    final RodCutterBasic rodCutter = new RodCutterBasic(priceValues);<br>    run(rodCutter);<br>  }<br>}<br>----------------OUTPUT-------------------<br>10<br>44<br><hr><br>package fpij;<br><br>import java.util.List;<br>import java.util.Arrays;<br>import java.util.<b>function.BiFunction</b>;<br>import java.util.function.Function;<br>import static fpij.Memoizer.callMemoized;<br><br>public class <b>RodCutterMemoized</b> extends RodCutterBasic {<br>  public RodCutterMemoized(final List&lt;Integer&gt; pricesForLength) {<br>    super(pricesForLength);<br>  }<br><br>  public int maxProfit(final int rodLength) {<br>    BiFunction&lt;Function&lt;Integer, Integer&gt;, Integer, Integer&gt; compute =<br>      (func, length) -&gt; {<br>        int profit = (length &lt;= prices.size()) ? prices.get(length - 1) : 0;<br>        for(int i = 1; i &lt; length; i++) {<br>          int priceWhenCut = func.apply(i) + func.apply(length - i);<br>          if(profit &lt; priceWhenCut) profit = priceWhenCut;<br>        }<br>        return profit;<br>      };<br>    return callMemoized(compute, rodLength);<br>  }<br>  <br>  public static void main(final String[] args) {<br>    final RodCutterMemoized rodCutterMomoized<br>      = new RodCutterMemoized(RodCutterBasic.priceValues);<br>    //run(foo);<br>    <br>    System.out.println(rodCutterMomoized.maxProfit(5));    <br>    System.out.println(rodCutterMomoized.maxProfit(22));    <br>  }<br>}<br>public <b>class Memoizer</b> {<br>  public static &lt;T, R&gt; R callMemoized(<br>    final BiFunction&lt;Function&gt;T,R &lt;, T, R&lt; function, final T input) {<br>    <b>Function&lt;T, R&gt; memoized = new Function&lt;T, R&gt;() {<br>      private final Map&lt;T, R&gt; store = new HashMap&lt;&gt;();<br>      public R apply(final T input) {<br>        return store.computeIfAbsent(input, key -&gt; function.apply(this, key));<br>      }<br>    };<br>    return memoized.apply(input);</b><br>  }<br>}<br>----------------OUTPUT-------------------<br>10<br>44<br><hr><br><br>import java.util.stream.Stream;<br><br>@FunctionalInterface<br>public <b>interface TailCall&lt;T&gt;</b> {<br>  <br>  TailCall&lt;T&gt; apply();<br>  <br>  default boolean isComplete() { return false; }<br>  //...<br><br>  default T result() { throw new Error(\"not implemented\"); }<br>  <br>  default T invoke() {<br>    return Stream.iterate(this, TailCall::apply)<br>                 .filter(TailCall::isComplete)<br>                 .findFirst()<br>                 .get()<br>                 .result();<br>  }<br>}<br>public class TailCalls {<br>  public static &lt;T&gt; TailCall&lt;T&gt; call(final TailCall&lt;T&gt; nextCall) {<br>    return nextCall;<br>  }<br>  public static &lt;T&gt; TailCall&lt;T&gt; done(final T value) {<br>    return new TailCall&lt;T&gt;() {      <br>      @Override public boolean isComplete() { return true; }<br>      @Override public T result() { return value; }<br>      @Override public TailCall&lt;T&gt; apply() { <br>        throw new Error(\"not implemented\"); <br>      }<br>    };<br>  }  <br>}<br><br><hr><br><b>import java.util.function.Function;<br>import static fpij.TailCalls.done;<br>import static fpij.TailCalls.call</b>;<br><br>public class Factorial {<br>  public static int factorialRec(final int number) {<br>    if(number == 1)<br>      return number;<br>    else<br>      return number * factorialRec(number - 1); <br>  }<br><br>  public static <b>TailCall&lt;Integer&gt; factorialTailRec</b>(<br>    final int factorial, final int number) {      <br>    if (number == 1)<br>      return done(factorial);<br>    else<br>      return call(() -&gt; factorialTailRec(factorial * number, number - 1));<br>  }<br><br>  public static int factorial(final int number) {<br>    return factorialTailRec(1, number).invoke();<br>  }<br><br>  public static void main(final String[] args) {<br>    System.out.println(\"//\" + \"START:FACTREC_DISPLAY_5_OUTPUT\");<br>    System.out.println(factorialRec(5));<br>    System.out.println(\"//\" + \"END:FACTREC_DISPLAY_5_OUTPUT\");<br><br>    System.out.println(\"//\" + \"START:FACTREC_DISPLAY_LARGE_OUTPUT\");<br>    try {<br>      System.out.println(factorialRec(20000));<br>    } catch(StackOverflowError ex) {<br>      System.out.println(ex);<br>    }<br>    System.out.println(\"//\" + \"END:FACTREC_DISPLAY_LARGE_OUTPUT\");<br><br>    System.out.println(\"//\" + \"START:FACTTAILREC_DISPLAY_5_OUTPUT\");<br>    System.out.println(factorialTailRec(1, 5).invoke());<br>    System.out.println(\"//\" + \"END:FACTTAILREC_DISPLAY_5_OUTPUT\");<br><br>    System.out.println(\"//\" + \"START:FACTTAILREC_DISPLAY_LARGE_OUTPUT\");<br>    System.out.println(factorialTailRec(1, 20000).invoke());<br>    System.out.println(\"//\" + \"END:FACTTAILREC_DISPLAY_LARGE_OUTPUT\");<br><br><br>    System.out.println(\"//\" + \"START:FACTORIAL_DISPLAY_OUTPUT\");<br>    System.out.println(factorial(5));<br>    System.out.println(factorial(20000));<br>    System.out.println(\"//\" + \"END:FACTORIAL_DISPLAY_OUTPUT\");<br><br>  }<br>}<br>----------------OUTPUT-------------------<br>120<br>java.lang.StackOverflowError<br>120<br>0<br>120<br>0<br><hr><br><br>import java.math.BigInteger;<br>import java.util.function.Function;<br>import static fpij.TailCalls.call;<br>import static fpij.TailCalls.done;<br><br>public class BigFactorial {<br>  public static BigInteger decrement(final BigInteger number) {<br>    return number.subtract(BigInteger.ONE);<br>  }<br>  <br>  public static BigInteger multiply(<br>    final BigInteger first, final BigInteger second) {      <br>    return first.multiply(second);<br>  }<br><br>  final static BigInteger ONE = BigInteger.ONE;<br>  final static BigInteger FIVE = new BigInteger(\"5\");<br>  final static BigInteger TWENTYK = new BigInteger(\"20000\");  <br><br>    //...<br><br>  private static TailCall&lt;BigInteger&gt; factorialTailRec(<br>    final BigInteger factorial, final BigInteger number) {<br>    if(number.equals(BigInteger.ONE))<br>      return done(factorial);<br>    else<br>      return call(() -&gt; <br>        factorialTailRec(multiply(factorial, number), decrement(number)));<br>  }<br><br>  public static BigInteger factorial(final BigInteger number) {<br>    return factorialTailRec(BigInteger.ONE, number).invoke();<br>  }<br>  <br>  public static void main(final String[] args) {<br>    System.out.println(factorial(FIVE));<br>    System.out.println(String.format(\"%.10s...\", factorial(TWENTYK)));      <br>  }<br>}<br>----------------OUTPUT-------------------<br>120<br>1819206320...<br><hr><br>import java.util.concurrent.locks.Lock;<br><br>public class Locker {<br>  public static <b>void runLocked(Lock lock, Runnable block)</b> {<br>    lock.lock();<br>\t<br>    try {<br>      block.run();<br>    } finally {<br>      lock.unlock();<br>    }    <br>  }<br>}<br>------------<br>import java.util.concurrent.locks.Lock;<br>import java.util.concurrent.locks.ReentrantLock;<br>import static fpij.Locker.runLocked;<br><br>public class Locking {<br>  Lock lock = new ReentrantLock(); //or mock<br>  <br>  protected void setLock(final Lock mock) {<br>    lock = mock;<br>  } <br><br>  public void doOp1() {<br>    lock.lock();<br>    try {<br>      //...critical code...<br>    } finally {<br>      lock.unlock();<br>    }<br>  }<br>  //...<br><br>  <b>public void doOp2() {<br>    runLocked(lock, () -&gt; {/*...critical code ... */});<br>  }</b><br>  <br>  public void doOp3() {<br>    runLocked(lock, () -&gt; {/*...critical code ... */});<br>  }<br>  <br>  public void doOp4() {<br>    runLocked(lock, () -&gt; {/*...critical code ... */});<br>  }<br><br>}<br><hr><br>\r\n\r\n<br>\r\n
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java functional DSL article"
title="ibm devWorks: Neal Ford's Fluent interfaces">

\r\n<h2>\r\nEvolutionary architecture and emergent design: Fluent interfaces<br>\r\nBuild internal DSLs to capture idiomatic domain patterns</h2>\r\n<br>\r\nNeal Ford\r\n<br>\r\nJuly 13, 2010\r\n<br>\r\nThis installment of Evolutionary architecture and emergent design continues the discussion ofharvesting techniques for idiomatic patterns in emergent design. When you identify a reusablepattern, you should capture it in a way to sets it apart from the rest of your code. Domain-specific languages (DSLs) offer many techniques for concisely capturing data and functionality.This month, Neal Ford shows you three ways to build internal DSLs that capture idiomaticdomain patterns.\r\n<br>\r\n\r\n<br>The preceding installment of this series introduced the subject of using domain-specificlanguages (DSLs) to capture domain idiomatic patterns. This installment continues with that topic,demonstrating various DSL construction techniques.\r\n<br>In his upcoming book Domain Specific Languages, Martin Fowler differentiates between two typesof DSLs (see Related topics). External DSLs build a new language grammar, requiring tools likelexx and yacc or Antlr. An internal DSL builds new languages atop a base language, whose syntaxit borrows and stylizes. The examples in this installment build internal DSLs using Java as the base language, constructing new mini-languages on top of its syntax.\r\n<br>\r\n<br>About this series\r\n<br>\r\n<br>This series aims to provide a fresh perspective on the often-discussed but elusive conceptsof software architecture and design. Through concrete examples, Neal Ford gives you asolid grounding in the agile practices of evolutionary architecture and emergent design. Bydeferring important architectural and design decisions until the last responsible moment, youcan prevent unnecessary complexity from undermining your software projects.\r\n<br>Underlying all the following techniques for constructing DSLs is the notion of implicit context.DSLs (especially internal ones) try to eliminate noisy syntax by creating contextual wrappersaround related elements. A good example of this concept appears in XML in the form of parentand child elements, which provide a wrapper around related items. You'll notice many of theseDSL techniques achieve that same effect using language syntactic tricks.\r\n<br>\r\n\r\n<br>Readability is one of the benefits of using a DSL. If you write code that nondevelopers can read,you shorten the feedback loop between your team and the people who are requesting features.A common DSL pattern identified in Fowler's book is called fluent interface, which he defines asbehavior capable of relaying or maintaining the instruction context for a series of method calls. I'llshow you several types of fluent interfaces, starting with method chaining.\r\n\r\n<h2>Method chaining</h2>\r\n\r\n<br>Method chaining uses return values from methods to relay instruction context, which in this case isthe object instance making the first method invocation. This sounds much more complex than it is,so I'll show an example to clarify this concept.\r\n\r\n<br>When working with DSLs, it is common to start with your goal syntax and reverse engineerbackwards to figure out how to implement it. Starting at the end makes sense because readabilityis highly valued in DSLs. The example I'll use is a small application that tracks calendar entries.The application illustrates the DSL's syntax, as shown in Listing 1:\r\n\r\n<br>Listing 1. Goal syntax for a calendar DSL\r\n<br>\r\n<code><pre>\r\n\r\npublic class CalendarDemoChained { \r\n\r\n  public static void main(String[] args) { \r\n\tnew CalendarDemoChained(); \r\n  } \r\n\r\n  public CalendarDemoChained() { \r\n\tCalendar fourPM = Calendar.getInstance(); \r\n\tfourPM.set(Calendar.HOUR_OF_DAY, 16); \r\n\tCalendar fivePM = Calendar.getInstance(); \r\n\tfivePM.set(Calendar.HOUR_OF_DAY, 17); \r\n\r\n\tAppointmentCalendarChained calendar = new AppointmentCalendarChained(); \r\n\tcalendar.add(\"dentist\"). \r\n\t\tfrom(fourPM). \r\n\t\tto(fivePM). \r\n\t\tat(\"123 main street\"); \r\n\r\n\tcalendar.add(\"birthday party\").\r\n\t\tat(fourPM); \r\n\tdisplayAppointments(calendar); \r\n  } \r\n\r\n  private void displayAppointments(AppointmentCalendarChained calendar) { \r\n\tfor (Appointment a : calendar.getAppointments()) \r\n\t\tSystem.out.println(a.toString()); \r\n\t}\r\n  }\r\n\r\n</pre></code>\r\n<br>\r\n<br>After the necessary cruft at the top dealing with Java calendars, you can see the method-chainingfluent interface in action as I add values to the two calendar entries. Notice that I'm using whitespace to separate the parts of what is (from a Java syntax standpoint) a single line of code. It iscommon in internal DSLs to stylize the use of the base language to make the DSL more readable.\r\n<br>\r\n<br>The Appointment class containing most of the fluent-interface methods appears in Listing 2:\r\n<br>\r\n\r\n<br>Listing 2. Appointment class\r\n<br>\r\n<code><pre>\r\npublic class Appointment { \r\n  private String _name; \r\n  private String _location; \r\n  private Calendar _startTime; \r\n  private Calendar _endTime; \r\n\r\n  public Appointment(String name) { \r\n    this._name = name; \r\n  } \r\n\r\n  public Appointment() { } \r\n\r\n  public Appointment name(String name) { \r\n\t_name = name; \r\n\treturn this; \r\n  } \r\n\r\n  public Appointment at(String location) { \r\n\t_location = location; \r\n\treturn this;\r\n  } \r\n\r\n  public Appointment at(Calendar startTime) { \r\n\t_startTime = startTime; \r\n\treturn this;\r\n  } \r\n\r\n  public Appointment from(Calendar startTime) { \r\n\t_startTime = startTime; \r\n\treturn this;\r\n  } \r\n\r\n  public Appointment to(Calendar endTime) { \r\n   \t_endTime = endTime; \r\n\treturn this;\r\n  }\r\n\r\n  public String toString() { \r\n\treturn \"Appointment:\"+ _name + \r\n\t((_location != null && _location.length() > 0) ? \", location:\" + \r\n\t_location : \"\") + \", Start time:\" + _startTime.get(Calendar.HOUR_OF_DAY) + \r\n\t(_endTime != null? \", End time: \" + _endTime.get(Calendar.HOUR_OF_DAY) : \"\");\r\n  }\r\n}\r\n</pre></code>\r\n<br>\r\n\r\n<br>As you can see, building fluent interfaces is straightforward. For each of the mutator methods, youdiverge from standard JavaBean syntax by writing your setter methods to return the host object(this) and by replacing the set naming convention with something more readable. The generaldefinition at the start of this section should now be clear. The context being relayed via the methodchaining is this, meaning that you can make a series of method calls concisely.\r\n<br>\r\n<br>In the article <a href='https://www.ibm.com/developerworks/java/library/j-eaed12/index.html'>\"Leveraging reusable code, Part 2,\"</a> I showed an API definition for a train car, asshown in Listing 3:\r\n<br>\r\n<br>Listing 3. An API for a train car\r\n<br>\r\n<code><pre>\r\n\tCar2 car = new CarImpl();\r\n\tMarketingDescription desc = new MarketingDescriptionImpl();\r\n\tdesc.setType(\"Box\");\r\n\tdesc.setSubType(\"Insulated\");\r\n\tdesc.setAttribute(\"length\", \"50.5\");\r\n\tdesc.setAttribute(\"ladder\", \"yes\");\r\n\tdesc.setAttribute(\"lining type\", \"cork\");\r\n\tcar.setDescription(desc);\r\n</pre></code>\r\n<br>\r\n<br>The problem domain for train cars is complex because of regulatory rules about contents andhistory. On the project that yielded this example, we had lots of complicated testing scenarios thatrequired dozens of lines of set calls like the ones in Listing 3. We tried to get our business analyststo verify that we had the right magical combination of attributes, but they pushed back becausethey viewed it as Java code, which they had no interest in reading. The ultimate impact of thisproblem was the requirement that a developer verbally translate the details, which is of courseerror-prone and time-consuming.\r\n<br>\r\n<br>To resolve this problem, we converted our Car class into a fluent interface, so that the code fromListing 3 became the fluent interface shown in Listing 4:\r\n<br>\r\n<br>Listing 4. Fluent interface for train cars\r\n<code><pre>\r\n\tCar car = Car.describedAs() \r\n\t\t.box() \r\n\t\t.length(50.5) \r\n\t\t.type(Type.INSULATED) \r\n\t\t.includes(Equipment.LADDER) \r\n\t\t.lining(Lining.CORK);\r\n</pre></code>\r\n<br>\r\n<br>This code was declarative enough and removed sufficient noise from the Java API version that ourbusiness analysts were happy to verify it for us.\r\n<br>\r\n<br>Returning to the calendar example, the last bit of the implementation is the AppointmentCalendarclass, which appears in Listing 5:\r\n<br>\r\n<br>Listing 5. AppointmentCalendar\r\n<br>\r\n<code><pre>\r\npublic class AppointmentCalendarChained { \r\n\r\n\tprivate List<Appointment> appointments; \r\n\r\n\tpublic AppointmentCalendarChained() { \r\n\t\tappointments = new ArrayList<Appointment>(); \r\n\t} \r\n\r\n\tpublic List<Appointment> getAppointments() { \r\n\t\treturn appointments;\r\n\t} \r\n\r\n\tpublic Appointment add(String name) {\r\n\t\tAppointment appt = new Appointment(name); \r\n\t\tappointments.add(appt); \r\n\t\treturn appt; \r\n\t}\r\n}\r\n</pre></code>\r\n\r\n<br>\r\n<br>The add() method:\r\n<br>\t1. Starts the method chain by creating a new Appointment instance\r\n<br>\t2. Adds the new instance to the list of appointments\r\n<br>\t3. Ultimately returns the new appointment instance, meaning that subsequent method calls areinvoked on the new appointment\r\n<br>\r\n<br>When you run the application, you see the details of your configured appointments, as shown inFigure 1:\r\n<br>\r\n<br>Figure 1. Results of running the calendar application\r\n<br>\r\n<br>\tAppointment:dentist, location:123 ~~~~, STart time: ~~\r\n<br>\tAppointment:birthday party, Start time: 123\r\n<br>\r\n<br>So far, method chaining looks like a simple way to clean up overly verbose syntax, especiallymethod calls that are mostly declarative. This works well for idiomatic patterns in emergent designbecause domain patterns are frequently declarative.\r\n<br>\r\n<br>Note that using method chaining necessitates violating the syntactic rules for JavaBeans, whichinsist that mutator methods must start with set and return void. Building fluent interfaces is anexample of knowing when it makes sense to break some of the rules. The JavaBeans specificationisn't doing you any favors if it forces you to write obfuscated code! But nothing in the creation oruse of fluent interfaces precludes supporting both the fluent interface and a JavaBeans interface.The fluent interface methods can turn around and call the standard set methods, allowing you touse fluent interfaces even when frameworks insist that it interact with your classes as JavaBeans.\r\n<br>\r\n<h2>Solving the finishing problem</h2>\r\n<br>\r\n<br>One pitfall that's inherent in fluent interfaces under certain circumstances is known as the finishingproblem. I'll illustrate this issue by making a change to the AppointmentCalendar class fromListing 5. Presumably, you'd like to do more than just display the appointments, such as put themin a database or some other persistence mechanism. Where do you add the code to save thecompleted appointment to storage? You can try to do it in AppointmentCalendar's add() methodjust before you return the appointment. Listing 6 shows an attempt to access the appointment herefor something as simple as printing it:\r\n<br>\r\n<br>Listing 6. Adding printing\r\n<br>\r\n<code><pre>\r\n\tpublic Appointment add(String name) { \r\n\t\tAppointment appt = new Appointment(name); \r\n\t\tappointments.add(appt); \r\n\t\tSystem.out.println(appt.toString()); \r\n\t\treturn appt;\r\n\t}\r\n</pre></code>\r\n<br>\r\n<br>When you run the code in Listing 6, the unhappy results illustrated in Figure 2 show up:\r\n<br>\r\n<br>\r\n<br>Figure 2. Error output after the addition to AppointmentCalendar\r\n <br>\t(nullpointerExc)\r\n<br>\r\n\r\n<br>The error displayed is a NullPointerException occurring in the toString() method on theAppointment class. Why it complains here, even though the method worked correctly, is theessence of the finishing problem.\r\n<br>\r\n<br>The error occurs because I'm trying to call the toString() method on the appointment instancebefore the rest of the fluent-interface setter methods are called. The code to try printing theappointment appears in the method that creates the appointment instance and starts the chain. Icould create a save() or finished() method that must be called as the last method in the chain,but I'd rather not impose an easy-to-forget rule on my DSL's users. In fact, I'd rather not imposeany order semantics on the methods in my fluent interface.\r\n<br>\r\n<br>The real problem is that I'm being too aggressive with the method-chaining technique. Methodchaining works best for the creation of simple data objects, yet here I'm using it both for the settermethods on Appointment and in AppointmentCalendar to start the method chain.\r\n<br>\r\n<br>I can fix the finishing problem by wrapping the creation of the appointment entirely with theparentheses of the appointment calendar's add() method, as shown Listing 7:\r\n<br>\r\n<br>Listing 7. Wrapping via parameter\r\n<br>\r\n<code><pre>\r\n\tAppointmentCalendar calendar = new AppointmentCalendar();\r\n\tcalendar.add( \r\n\t\tnew Appointment(\"Dentist\").\r\n\t\tat(fourPM));\r\n\tcalendar.add( \r\n\t\tnew Appointment(\"Conference Call\").\r\n\t\tfrom(fourPM). \r\n\t\tto(fivePM). \r\n\t\tat(\"555-123-4321\"));\r\n\tcalendar.add( \r\n\t\tnew Appointment(\"birthday party\"). \r\n\t\tfrom(fourPM). \r\n\t\tto(fivePM)). \r\n\tadd( new Appointment(\"Doctor\"). \r\n\t\tat(\"123 Main St\"));\r\n\tcalendar.add( new Appointment(\"No Fluff, Just Stuff\"). \r\n\t\tat(fourPM));\r\n\tdisplayAppointments(calendar);\r\n</pre></code>\r\n<br>\r\n<br>In Listing 7, the add() method's parentheses encapsulate the entire use of the Appointmentfluent interface, allowing the add() method to handle whatever additional behavior that it wants(printing, persistence, and so on). In fact, I couldn't resist adding a bit of a fluent interface toAppointmentCalendar itself: you can now chain together the add() methods, as shown in Listing 7and implemented in Listing 8:\r\n<br>\r\n<br>Listing 8. The parameter-wrapping AppointmentCalendar\r\n<br><code><pre>\r\npublic class AppointmentCalendar { \r\n\tprivate List<Appointment> appointments; \r\n\r\n\tpublic AppointmentCalendar() { \r\n\t\tappointments = new ArrayList<Appointment>();\r\n\t} \r\n\r\n\tpublic AppointmentCalendar add(Appointment appt) { \r\n\t\tappointments.add(appt); \r\n\t\treturn this; \r\n\t} \r\n\r\n\tpublic List<Appointment> getAppointments() { \r\n\t\treturn appointments; \r\n\t}\r\n}\r\n</pre></code>\r\n<br>\r\n<br>The finishing problem can arise any time you mix fluent-interface classes. It popped up inthis example because I used the appointment calendar to start the method chain, mixingthe construction and wrapping behaviors. By deferring construction and initialization tothe Appointment class, I make it easier to separate additional wrapping behavior (such aspersistence).\r\n<br>\r\n\r\n<h2>Wrapping via functional sequence</h2>\r\n<br>\r\n<br>Thus far, I've shown two of the three context-passing techniques for fluent-interface DSLs. The third functional sequence uses inheritance and anonymous inner classes to create a contextwrapper. The calendar application rewritten using functional sequence appears in Listing 9:\r\n\r\n<br>Listing 9. Wrapping via functional sequence\r\n<br><code><pre>\r\n\tcalendar.add(new Appointment() {{ \r\n\t\tname(\"dentist\"); \r\n\t\tfrom(fourPM); \r\n\t\tto(fivePM); \r\n\t\tat(\"123 main street\");\r\n\t}});\r\n\r\n\tcalendar.add(new Appointment() {{ \r\n\t\tname(\"birthday party\"); \r\n\t\tat(fourPM);\r\n\t}});\r\n</pre></code>\r\n<br>\r\n<br>Listing 9 shows a pattern that I introduced in \"Leveraging reusable code, Part 2\" under the guiseof removing structural duplication. The syntax looks odd because of the double {{ braces. The firstset of enclosing braces delineates the construction of an anonymous inner class, and the secondset delineates the instance initializer for the anonymous inner class. (If this sounds a bit confusing,you can refer back to \"Leveraging Reusable Code, Part 2\" for a lengthy explanation of this Javaidiom.)\r\n<br>\r\n<br>The main advantage of this style of fluent interface lies in its adaptability. The only thing a classneeds to be used this way is a default constructor (which allows you to create an anonymous innerclass instance inheriting from your class). That means that you can easily add fluent-interface\r\nmethods to existing Java APIs without changing any of the current calling semantics. This allowsyou to \"fluentize\" existing APIs gradually.\r\n<br>\r\n<br><h2>Conclusion</h2>\r\n<br>\r\n<br>DSLs capture idiomatic domain patterns concisely and effectively. Fluent interfaces provide asimple way to change the way you write code so that you can more readily see the idiomaticpatterns you've fought to identify. They also force you to change your perspective on code just abit: it should be not merely functional but readable as well, especially if nondevelopers need toconsume any aspect of it. Fluent interfaces remove unnecessary noise from your syntax, allowingfor more readable code. For declarative structures, you can express ideas more clearly with lesseffort.\r\n<br>In the next installment, I'll continue discussing DSL techniques as a mechanism for harvestingidiomatic patterns in emergent design.\r\n<br>\r\n
\r\n\r\n\r\n</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java hotswap bookmark notes"
title="Hotswap Options: Discussion / notes / options">

<p>
Q. Is there a Java development workflow - either using IDE, command line build tool or anything of sorts - that allows for hot code redeploying multiple pieces of code without paying the heavy price of bundling?
<p>
(ans 1: <span class='mTitle'>jRebel<span>; commercial
http://zeroturnaround.com/jrebel/faq/)
<p>
A. There is a tool called <a href='http://ssw.jku.at/dcevm/' class='mTitle'>DCEVM (Dynamic Code Evolution VM)</a> (which I've never used) that acts as 
a patch for the JVM to allow repeated class reloading DURING RUNTIME.
(used by https://github.com/HotswapProjects/HotswapAgent)
<p>
A.  DCEVM supports enhanced class redefinitions and is available for current JDK7 and JDK8.<p>here's a <a href='http://ssw.jku.at/dcevm/testsuite/?show=at/ssw/hotswap/test/methods/SingleClassTest.java'>test</p> running on a single class
<p>
This seems to be the 'mother' of all the hotswap options (used by jdk)<br>
Here are the <a href='https://github.com/TravaOpenJDK/trava-jdk-11-dcevm'>jdk11 binaries</a><p>


<a href='http://hotswapagent.org/' class='mTitle'>HotswapAgent</a> is an free JRebel alternative and supports DCEVM in various Frameworks.

<p>
A. I believe your options are to patch the JVM with DCEVM or similar (if similar exists), use the jdb (or an abstraction of it such as what IDEs do) to reload classes from the command line debugger tool, or write up a secondary class loader with a hook that you as the developer/user can access during execution to let it know when to dump it's definitions and grab new ones. The last option giving you the most flexibility, but is not an lighthearted engineering task to do well.
<p>
A.  <a href='https://github.com/spring-projects/spring-loaded' class='mTitle'>Spring Loaded</a> is a JVM AGENT for reloading class file changes whilst a JVM IS RUNNING. It transforms classes at loadtime to make them amenable to later reloading. Unlike 'hot code replace' which only allows simple changes once a JVM is running (e.g. changes to method bodies), Spring Loaded allows you to add/modify/delete methods/fields/constructors. The annotations on types/methods/fields/constructors can also be modified and it is possible to add/remove/change values in enum types.
<p>
Spring Loaded is usable on any bytecode that may run on a JVM, and <span  class='mHG'>>is actually the reloading system used in Grails 2</span>.
<p>
Once up and running what effectively happens is that any classes loaded from jar files (dependencies) are not treated as reloadable, whilst anything loaded from .class files on disk is made reloadable. Once loaded the .class file will be watched (once a second) and should a new version appear SpringLoaded will pick it up. Any live instances of that class will immediately see the new form of the object, the instances do not need to be discarded and recreated.
<p>

<p>
A. jdk11 possibly has this covered under <span class='mTitle'>JVMTI</span> (a Hotspot update)
<p>
see: 
	http://hg.openjdk.java.net/jdk/jdk11/file/1ddf9a99e4ad/src/java.instrument/share/classes/java/lang/instrument/Instrumentation.java

<p>
http://ssw.jku.at/dcevm/
<p>
many openJDK tests are @ <p>
http://hg.openjdk.java.net/jdk/jdk11/file/6d6611346837/test/hotspot/jtreg/serviceability/jvmti/
<p>
Post from last yr by someone from jRebel also mentions --
<span class='mHG'>Fakereplace
</span> (mpt: updated 2018; relproxy '15) is also an instrumenting agent, like JRebel but it has a lot less support for Java code changes (I assume) and the number of supported frameworks isn't as impressive.
<p>
FakeReplace also works w/WildFly (ie appl server repl); see <a href='https://github.com/fakereplace/fakereplace/blob/master/testsuite/wildfly/src/test/java/a/org/fakereplace/integration/wildfly/hibernate5/basic/addcolumn/Hibernate5AddColumnTestCase.java'>this test</a>
<p>
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java hotswap article"
title="JavaWorld article "Add dynamic Java code to your application">
<p><p>
"Write code that can respond to changes at runtime"
<p>[[Basically monitors a dir; compiles; uses a Proxy for loading the classLoader & switching
to the new classLoader with the newly compiled/updated class.  Transparent to the user, no
reboot. Only issue: STATE]]<p>

<p>https://www.javaworld.com/article/2071777/design-patterns/add-dynamic-java-code-to-your-application.html<p><p><h3>Add dynamic Java code to your application</h3><p><p><h5>Write code that can respond to changes at runtime</h5><p><p>By Li Yang <p> <p>JavaWorld | <p>Jun 12, 2006 1:00 AM PT <p><p><p>JavaServer Pages (JSP) is a more flexible technology than servlets because it can respond to dynamic changes at runtime. Can you imagine a common Java class that has this dynamic capability too? It would be interesting if you could modify the implementation of a service without redeploying it and update your application on the fly.<p><p>The article explains how to write dynamic Java code. It discusses runtime source code compilation, class reloading, and the use of the Proxy design pattern to make modifications to a dynamic class transparent to its caller.<p><p><h4>An example of dynamic Java code</h4><p><p>Let's start with an example of dynamic Java code that illustrates what true dynamic code means and also provides some context for further discussions. Please find this example's complete source code in Resources.<p><p>The example is a simple Java application that depends on a service called Postman. The Postman service is described as a Java interface and contains only one method, deliverMessage():<p><p><code><pre><p>public interface Postman {<p>    void deliverMessage(String msg);<p>}<p></pre></code><p><p><p>A simple implementation of this service prints messages to the console. The implementation class is the dynamic code. This class, PostmanImpl, is just a normal Java class, except it deploys with its source code instead of its compiled binary code:<p><p><code><pre><p>public class PostmanImpl implements Postman {<p><p>    private PrintStream output;<p>    <p>    public PostmanImpl() {<p>        output = System.out;<p>    }<p>    <p>    public void deliverMessage(String msg) {<p>        output.println("[Postman] " + msg);<p>        output.flush();<p>    }<p>}<p></pre></code><p><p>The application that uses the Postman service appears below. In the main() method, an infinite loop reads string messages from the command line and delivers them through the Postman service:<p><p><code><pre><p>public class PostmanApp {<p><p>    public static void main(String[] args) throws Exception {<p>        BufferedReader sysin = new BufferedReader(new InputStreamReader(System.in));<p><p>        // Obtain a Postman instance<p>        Postman postman = getPostman();<p><p>        while (true) {<p>            System.out.print("Enter a message: ");<p>            String msg = sysin.readLine();<p>            postman.deliverMessage(msg);<p>        }<p>    }<p><p>    private static Postman getPostman() {<p>        // Omit for now, will come back later<p>    }<p> }<p></pre></code><p><p>Execute the application, enter some messages, and you will see outputs in the console such as the following (you can download the example and run it yourself):<p><p><code><pre><p>[DynaCode] Init class sample.PostmanImpl<p>Enter a message: hello world<p>[Postman] hello world<p>Enter a message: what a nice day!<p>[Postman] what a nice day!<p>Enter a message: <p></pre></code><p><p>Everything is straightforward except for the first line, which indicates that the class PostmanImpl is compiled and loaded.<p><p>Now we are ready to see something dynamic. Without stopping the application, let's modify PostmanImpl's source code. The new implementation delivers all the messages to a text file, instead of the console:<p><p><code><pre><p>// MODIFIED VERSION<p>public class PostmanImpl implements Postman {<p><p>    private PrintStream output;<p>    <p>    // Start of modification<p>    public PostmanImpl() throws IOException {<p>        output = new PrintStream(new FileOutputStream("msg.txt"));<p>    }<p>    // End of modification<p><p>    public void deliverMessage(String msg) {<p>        output.println("[Postman] " + msg);<p><p>        output.flush();<p>    }<p>}<p></pre></code><p><p>Shift back to the application and enter more messages. What will happen? Yes, the messages go to the text file now. Look at the console:<p><p><code><pre><p>[DynaCode] Init class sample.PostmanImpl<p>Enter a message: hello world<p>[Postman] hello world<p>Enter a message: what a nice day!<p>[Postman] what a nice day!<p>Enter a message: I wanna go to the text file.<p>[DynaCode] Init class sample.PostmanImpl<p>Enter a message: me too!<p>Enter a message: <p></pre></code><p><p>Notice <b>[DynaCode] Init class sample.PostmanImpl</b> appears again, indicating that the class <b>PostmanImpl</b> is recompiled and reloaded. If you check the text file msg.txt (under the working directory), you will see the following:<p><p><code><pre><p>[Postman] I wanna go to the text file.<p>[Postman] me too!<p></pre></code><p><p>Amazing, right? We are able to update the Postman service at runtime, and the change is completely transparent to the application. (Notice the application is using the same Postman instance to access both versions of the implementations.)<p><p><h5>Four steps towards dynamic code</h5><p><p>Let me reveal what's going on behind the scenes. Basically, there are four steps to make Java code dynamic:<p><ul><p><li>Deploy selected source code and monitor file changes<p><li>Compile Java code at runtime<p><li>Load/reload Java class at runtime<p><li>Link the up-to-date class to its caller<p></ul><p>Deploy selected source code and monitor file changes<p><p>To start writing some dynamic code, the first question we have to answer is, "Which part of the code should be dynamic whole application or just some of the classes?" Technically, there are few restrictions. You can load/reload any Java class at runtime. But in most cases, only part of the code needs this level of flexibility.<p><p>The Postman example demonstrates a typical pattern on selecting dynamic classes. No matter how a system is composed, in the end, there will be building blocks such as services, subsystems, and components. These building blocks are relatively independent, and they expose functionalities to each other via predefined interfaces. Behind an interface, it is the implementation that is free to change as long as it conforms to the contract defined by the interface. This is exactly the quality we need for dynamic classes. So simply put: Choose the implementation class to be the dynamic class.<p><p>For the rest of the article, we'll make the following assumptions about the chosen dynamic classes:<p><ul><p><li>The chosen dynamic class implements some Java interface to expose functionality<p><li>The chosen dynamic class's implementation does not hold any stateful information about its client (similar to the stateless session bean), so the instances of the dynamic class can replace each other<p></ul><p>Please note that these assumptions are not prerequisites. They exist just to make the realization of dynamic code a bit easier so we can focus more on the ideas and mechanisms.<p><p>With the selected dynamic classes in mind, deploying the source code is an easy task. Figure 1 shows the file structure of the Postman example.<p><p>PostmanExample<p>&nbsp;&nbsp;	bin<p>&nbsp;&nbsp;	dynacode<p>&nbsp;&nbsp;	&nbsp;&nbsp;	sample<p>&nbsp;&nbsp;	&nbsp;&nbsp;	&nbsp;&nbsp;	PostmanImpl.java<p>&nbsp;&nbsp;	src<p><p>We know "src" is source and "bin" is binary. One thing worth noting is the dynacode directory, which holds the source files of dynamic classes. Here in the example, there's only one file:    PostmanImpl.java. The bin and dynacode directories are required to run the application, while src is not necessary for deployment.<p><p>Detecting file changes can be achieved by comparing modification timestamps and file sizes. For our example, a check to PostmanImpl.java is performed every time a method is invoked on the Postman interface. Alternatively, you may spawn a daemon thread in the background to regularly check the file changes. That may result in better performance for large-scale applications.<p><p><h5>Compile Java code at runtime</h5><p><p>After a source code change is detected, we come to the compilation issue. By delegating the real job to an existing Java compiler, runtime compilation can be a piece of cake. Many Java compilers are available for use, but in this article, we use the Javac compiler included in Sun's Java Platform, Standard Edition (Java SE is Sun's new name for J2SE).<p><p>At the minimum, you can compile a Java file with just one statement, providing that the tools.jar, which contains the Javac compiler, is on the classpath (you can find the tools.jar under <JDK_HOME>/lib/):<p><p><code><pre><p>   int errorCode = com.sun.tools.javac.Main.compile(new String[] {<p>            "-classpath", "bin",<p>            "-d", "/temp/dynacode_classes",<p>            "dynacode/sample/PostmanImpl.java" });<p></pre></code><p><p>The class <b>com.sun.tools.javac.Main</b> is the programming interface of the Javac compiler. It provides static methods to compile Java source files. Executing the above statement has the same effect as running <b>javac</b> from the command line with the same arguments. It compiles the source file dynacode/sample/PostmanImpl.java using the specified classpath bin and outputs its class file to the destination directory /temp/dynacode_classes. An integer returns as the error code. Zero means success; any other number indicates something has gone wrong.<p><p>The com.sun.tools.javac.Main class also provides another <b>compile()</b> method that accepts an additional PrintWriter parameter, as shown in the code below. Detailed error messages will be written to the PrintWriter if compilation fails.<p><p><code><pre><p>   // Defined in com.sun.tools.javac.Main<p>    public static int compile(String[] args);<p>    public static int compile(String[] args, PrintWriter out);<p></pre></code><p><p>I assume most developers are familiar with the Javac compiler, so I'll stop here. For more information about how to use the compiler, please refer to Resources.<p><p><h5>Load/reload Java class at runtime</h5><p><p>The compiled class must be loaded before it takes effect. Java is flexible about class loading. It defines a comprehensive class-loading mechanism and provides several implementations of classloaders. (For more information on class loading, see Resources.)<p><p>The sample code below shows how to load and reload a class. The basic idea is to load the dynamic class using our own <b>URLClassLoader</b>. Whenever the source file is changed and recompiled, we discard the old class (for garbage collection later) and create a new URLClassLoader to load the class again.<p><p><code><pre><p>    // The dir contains the compiled classes.<p>    File classesDir = new File("/temp/dynacode_classes/");<p><p>    // The parent classloader<p>    ClassLoader parentLoader = Postman.class.getClassLoader();<p><p>    // Load class "sample.PostmanImpl" with our own classloader.<p>    URLClassLoader loader1 = new URLClassLoader(<p>            new URL[] { classesDir.toURL() }, parentLoader);<p>    Class cls1 = loader1.loadClass("sample.PostmanImpl");<p>    Postman postman1 = (Postman) cls1.newInstance();<p><p>    /*<p>     * Invoke on postman1 ...<p>     * Then PostmanImpl.java is modified and recompiled.<p>     */<p><p>    // Reload class "sample.PostmanImpl" with a new classloader.<p>    URLClassLoader loader2 = new URLClassLoader(<p>            new URL[] { classesDir.toURL() }, parentLoader);<p>    Class cls2 = loader2.loadClass("sample.PostmanImpl");<p>    Postman postman2 = (Postman) cls2.newInstance();<p><p>    /*<p>     * Work with postman2 from now on ...<p>     * Don't worry about loader1, cls1, and postman1<p>     * they will be garbage collected automatically.<p>     */<p></pre></code><p><p>Pay attention to the <b>parentLoader</b> when creating your own classloader. Basically, the rule is that the parent classloader must provide all the dependencies the child classloader requires. So in the sample code, the dynamic class PostmanImpl depends on the interface Postman; that's why we use Postman's classloader as the parent classloader.<p><p>We are still one step away to completing the dynamic code. Recall the example introduced earlier. There, dynamic class reload is transparent to its caller. But in the above sample code, we still have to change the service instance from postman1 to postman2 when the code changes. The fourth and final step will remove the need for this manual change.<p><p><h5>Link the up-to-date class to its caller</h5><p><p>How do you access the up-to-date dynamic class with a static reference? Apparently, a direct (normal) reference to a dynamic class's object will not do the trick. We need something between the client and the dynamic class,    a proxy. (See the famous book Design Patterns for more on the Proxy pattern.)<p><p>Here, a proxy is a class functioning as a dynamic class's access interface. A client does not invoke the dynamic class directly; the proxy does instead. The proxy then forwards the invocations to the backend dynamic class. Figure 2 shows the collaboration.<p><p>When the dynamic class reloads, we just need to update the link between the proxy and the dynamic class, and the client continues to use the same proxy instance to access the reloaded class. Figure 3 shows the collaboration.<p><p>In this way, changes to the dynamic class become transparent to its caller.<p><p>The Java reflection API includes a handy utility for creating proxies. The class <b>java.lang.reflect.Proxy</b> provides static methods that let you create proxy instances for any Java interface.<p><p>The sample code below creates a proxy for the interface Postman. (If you aren't familiar with java.lang.reflect.Proxy, please take a look at the Javadoc before continuing.)<p><p><code><pre><p>   InvocationHandler handler = new DynaCodeInvocationHandler(...);<p>    Postman proxy = (Postman) Proxy.newProxyInstance(<p>                Postman.class.getClassLoader(),<p>                new Class[] { Postman.class },<p>                handler);<p></pre></code><p><p>The returned proxy is an object of an anonymous class that shares the same classloader with the Postman interface (the <b>newProxyInstance()</b> method's first parameter) and implements the Postman interface (the second parameter). A method invocation on the proxy instance is dispatched to the handler's invoke() method (the third parameter). And handler's implementation may look like the following:<p><p><code><pre><p>public class DynaCodeInvocationHandler implements InvocationHandler {<p><p>    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {<p>        <p>        // Get an instance of the up-to-date dynamic class<p>        Object dynacode = getUpToDateInstance();<p>        <p>        // Forward the invocation<p>        return method.invoke(dynacode, args);<p>    }<p>}<p></pre></code><p><p>The <b>invoke()</b> method obtains an instance of the up-to-date dynamic class and forwards the invocation to it. This may involve source code compilation and class reloading if the dynamic class's source file has been modified.<p><p>Now we have completed the Postman service's dynamic code. A client creates a proxy of the service and calls the method <b>deliverMessage()</b> through the proxy. Each invocation on the proxy is dispatched to the <b>DynaCodeInvocationHandler</b> class's <b>invoke()</b> method. In that method, the latest service implementation is first obtained, which may involve necessary source compilation and class reloading. Then, the invocation forwards to the implementation for real processing.<p><p><h5>Put it all together</h5><p><p>We have gone through all the tricks required for the dynamic Java code. It's time to put them together to build something reusable.<p><p>We can build a utility to ease the adoption of dynamic code by encapsulating the four steps mentioned above. The Postman example relies on such a utility called DynaCode. Remember the PostmanApp application and its omitted <b>getPostman()</b> method? It's time to show it:<p><p><code><pre><p>public class PostmanApp {<p><p>    public static void main(String[] args) throws Exception {<p>        // ......<p>    }<p><p>    private static Postman getPostman() {<p>        DynaCode dynacode = new DynaCode();<p>        dynacode.addSourceDir(new File("dynacode"));<p>        return (Postman) dynacode.newProxyInstance(Postman.class,<p>                "sample.PostmanImpl");<p>    }<p> }<p></pre></code><p><p>See how the getPostman() method creates a dynamic Postman service, creates an instance of DynaCode, specifies a source directory, and returns a proxy of some dynamic implementation. To use your own dynamic Java code, you simply need to write three lines of code. Everything else is taken care of inside DynaCode. Try it yourself (the DynaCode's source code is included in the example).<p><p>I won't go into further details of DynaCode, but as a review of the technologies we've talked about, take a look at the sequence diagram in Figure 4 to see how DynaCode works at a high level.<p><p><h5>Conclusion</h5><p><p>In this article, I introduced the idea of dynamic Java code and the steps required to realize it. I covered topics such as runtime source compilation, class reloading, and the Proxy design pattern. Though none of these topics are new, by putting them together, we create an interesting dynamic feature for common Java classes so they can be modified and refreshed at runtime just like JSP pages.<p><p>An example is provided for demonstration purposes in Resources. It includes a reusable utility called DynaCode that makes writing your own dynamic code much easier.<p><p>I'd like to conclude by discussing the values and applications of dynamic code: Dynamic code can respond quickly to on-demand change requests. It can be used to implement truly dynamic services and business rules that change from time to time, and to replace embedded scripts used by task nodes of workflows. Dynamic code also eases application maintenance and greatly reduces outages caused by application redeployments.<p><p><i>Li Yang joined IBM in April 2004 and is a Certified IBM Rational Consultant on Rational Unified Process, requirements management, and object-oriented analysis and design. He has experience with Java server-side technologies, Web architectures, Java EE projects, and Java SE system library development.</i><p><p><h5>Resources</h5><p><ul><li><p>Download the Postman example (tested with Sun J2SE 1.4.2)<p></li>http://images.techhive.com/downloads/idge/imported/article/jvw/2006/06/jw-0612-dynamic.zip<p>"The Basics of Java Classloaders," Chuck McManis (JavaWorld, October 1996)<p></li>http://www.javaworld.com/javaworld/jw-10-1996/jw-10-indepth.html<p><ul><p>
<div>

<div dojoType="com.trivedi.oPls.mPane" tags="java hotswap snippet"
title="JavaWorld article "An in-memory compiler from openJdk">
<p>
<code><pre>
/*
 * Copyright (c) 2013, 2017, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package jdk.test.lib.compiler;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.OutputStream;

import java.net.URI;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.tools.ForwardingJavaFileManager;
import javax.tools.FileObject;
import javax.tools.JavaCompiler;
import javax.tools.JavaCompiler.CompilationTask;
import javax.tools.JavaFileObject;
import javax.tools.JavaFileObject.Kind;
import javax.tools.SimpleJavaFileObject;
import javax.tools.StandardLocation;
import javax.tools.ToolProvider;

/**
 * {@code InMemoryJavaCompiler} can be used for compiling a {@link
 * CharSequence} to a {@code byte[]}.
 *
 * The compiler will not use the file system at all, instead using a {@link
 * ByteArrayOutputStream} for storing the byte code. For the source code, any
 * kind of {@link CharSequence} can be used, e.g. {@link String}, {@link
 * StringBuffer} or {@link StringBuilder}.
 *
 * The {@code InMemoryCompiler} can easily be used together with a {@code
 * ByteClassLoader} to easily compile and load source code in a {@link String}:
 *
 * 
 * {@code
 * import jdk.test.lib.compiler.InMemoryJavaCompiler;
 * import jdk.test.lib.ByteClassLoader;
 *
 * class Example {
 *     public static void main(String[] args) {
 *         String className = "Foo";
 *         String sourceCode = "public class " + className + " {" +
 *                             "    public void bar() {" +
 *                             "        System.out.println("Hello from bar!");" +
 *                             "    }" +
 *                             "}";
 *         byte[] byteCode = InMemoryJavaCompiler.compile(className, sourceCode);
 *         Class fooClass = ByteClassLoader.load(className, byteCode);
 *     }
 * }
 * }
 * 
 */
public class InMemoryJavaCompiler {
    private static class MemoryJavaFileObject extends SimpleJavaFileObject {
        private final String className;
        private final CharSequence sourceCode;
        private final ByteArrayOutputStream byteCode;

        public MemoryJavaFileObject(String className, CharSequence sourceCode) {
            super(URI.create("string:///" + className.replace('.','/') + Kind.SOURCE.extension), Kind.SOURCE);
            this.className = className;
            this.sourceCode = sourceCode;
            this.byteCode = new ByteArrayOutputStream();
        }

        @Override
        public CharSequence getCharContent(boolean ignoreEncodingErrors) {
            return sourceCode;
        }

        @Override
        public OutputStream openOutputStream() throws IOException {
            return byteCode;
        }

        public byte[] getByteCode() {
            return byteCode.toByteArray();
        }

        public String getClassName() {
            return className;
        }
    }

    private static class FileManagerWrapper extends ForwardingJavaFileManager {
        private static final Location PATCH_LOCATION = new Location() {
            @Override
            public String getName() {
                return "patch module location";
            }

            @Override
            public boolean isOutputLocation() {
                return false;
            }
        };
        private final MemoryJavaFileObject file;
        private final String moduleOverride;

        public FileManagerWrapper(MemoryJavaFileObject file, String moduleOverride) {
            super(getCompiler().getStandardFileManager(null, null, null));
            this.file = file;
            this.moduleOverride = moduleOverride;
        }

        @Override
        public JavaFileObject getJavaFileForOutput(Location location, String className,
                                                   Kind kind, FileObject sibling)
            throws IOException {
            if (!file.getClassName().equals(className)) {
                throw new IOException("Expected class with name " + file.getClassName() +
                                      ", but got " + className);
            }
            return file;
        }

        @Override
        public Location getLocationForModule(Location location, JavaFileObject fo) throws IOException {
            if (fo == file && moduleOverride != null) {
                return PATCH_LOCATION;
            }
            return super.getLocationForModule(location, fo);
        }

        @Override
        public String inferModuleName(Location location) throws IOException {
            if (location == PATCH_LOCATION) {
                return moduleOverride;
            }
            return super.inferModuleName(location);
        }

        @Override
        public boolean hasLocation(Location location) {
            return super.hasLocation(location) || location == StandardLocation.PATCH_MODULE_PATH;
        }

    }

    /**
     * Compiles the class with the given name and source code.
     *
     * @param className The name of the class
     * @param sourceCode The source code for the class with name {@code className}
     * @param options additional command line options
     * @throws RuntimeException if the compilation did not succeed
     * @return The resulting byte code from the compilation
     */
    public static byte[] compile(String className, CharSequence sourceCode, String... options) {
        MemoryJavaFileObject file = new MemoryJavaFileObject(className, sourceCode);
        CompilationTask task = getCompilationTask(file, options);

        if(!task.call()) {
            throw new RuntimeException("Could not compile " + className + " with source code " + sourceCode);
        }

        return file.getByteCode();
    }

    private static JavaCompiler getCompiler() {
        return ToolProvider.getSystemJavaCompiler();
    }

    private static CompilationTask getCompilationTask(MemoryJavaFileObject file, String... options) {
        List<String> opts = new ArrayList<>();
        String moduleOverride = null;
        for (String opt : options) {
            if (opt.startsWith("--patch-module=")) {
                moduleOverride = opt.substring("--patch-module=".length());
            } else {
                opts.add(opt);
            }
        }
        return getCompiler().getTask(null, new FileManagerWrapper(file, moduleOverride), null, opts, null, Arrays.asList(file));
    }
}
</pre></code>
</div>


<div dojoType="com.trivedi.oPls.mPane" tags="java NLP bookmark notes"
title="Machine Learning / AI / NLP Options: Discussion / notes / options">
<h2><a href='https://deeplearning4j.org/'>Eclipse Deep Learning</a> for Java</h2><br>
Deeplearning4j is the first commercial-grade, open-source, distributed deep-learning library written for 
Java and Scala. Integrated with Hadoop and Spark, DL4J is designed to be used in business environments on 
distributed GPUs and CPUs. Skymind is its commercial support arm.<br>
<br>
Deeplearning4j aims to be cutting-edge plug and play, more convention than configuration, which allows for 
fast prototyping for non-researchers. DL4J is customizable at scale. Released under the Apache 2.0 license, 
all derivatives of DL4J belong to their authors. DL4J can import neural net models from most major frameworks 
via Keras, including TensorFlow, Caffe and Theano, bridging the gap between the Python ecosystem and the 
JVM with a cross-team toolkit for data scientists, data engineers and DevOps. Keras is employed as 
Deeplearning4j's Python API. Machine learning models are served in production with Skymind's model server.
<br>
<hr>
<h2>Apache Open NLP vs NLTK</h2><p>
Qn: We have a spring boot application integrated with Node.js and socket.io chat application , to which 
we want to integrate Natural language processing. Not getting any direction on which of these two Apache-OpenNlp 
or NLTK would be a better choice for us as both of the frameworks offer the kind of processing we need.

Wrt to the features provided by the frameworks , they both are good. Both have features that we are looking for.
 More than how to choose between features , what would suit our architecture better is a perspective I would like..

Any suggestions ?
<p>
Ans: <br>
It is tough to answer a question about which product will meet your needs better without know what your needs are. 
OpenNLP can perform Tokenization, Sentence Detection, POS tagging, Named entity detection, language detection, 
Document classification, Chunking, and Sentence Parsing. It also has lower-level access to maximum entropy and 
Naive-bayes classifiers. I use OpenNLP often. NLTK appears to do the same stuff (I don't really use it, 
so I can't tell you all its benefits). A small difference is that OpenNLP is java whereas NLTK is python. 
So your preference can come into play. Another difference is that NLTK has build in methods for downloading corpora.

If you were a little more specific about what you wanted, people could give you better advice.

answered 2 days ago
HowYaDoing<p>

Ans: I think I have.. I know the features provided for both frameworks.. but which would suit an architecture 
with the above mentioned technologies is the guidance I would like 
<p>	 	
Personally, I really like OpenNLP, and because you just need to add the OpenNLP dependencies to maven + 
download models. I think it will integrate easily with a spring boot app. -- I do this very thing, and it is easy. 
I am sure that the NLTK community would argue that even though they are python-based, you can integrate it 
into a java app. Long story short, I suggest openNLP. But keep in mind, I work with AND ON openNLP, 
so I have a pro-OpenNLP bias. 
<p>
What do you think about using DKPro Core? This framework provide a generic API for many NLP frameworks and 
comes as Maven dependency. This means you can exchange any of the frameworks. If you also use domain specific 
NLP models by building your own corpus, you can use this project to determine your best-performing 
NLP pipeline for your domain. Let me know if you have any questions. 
@Schrieveslaach I am not familiar with DKPro Core, but it appears that wraps many different NLP projects for UIMA. 
This is very useful if you are creating a UIMA-based solution. But I am not sure that Sharanya is considering UIMA, 
which brings it's own issues. 
<p>  	 	
@HowYaDoing, it is true that UIMA adds another architectural layer but DKPro Core unifies all NLP tools through 
their wrappers. This means Sharanya can exchange any of these tools. I'm don't know the application domain but 
if the application domain is different to news papers (NLP models won't work well), the models and tools can 
easily be exchanged with a better working version. Therefore, Sharanya can use the second project to find the 
best NLP tools for the application domain. 
<p>

<hr>
<P>
<div class="post-text" itemprop="text">
<p>Java vs Python for NLP is very much a preference or necessity. Depending on the company/projects you'll 
need to use one or the other and often there isn't much of a choice unless you're heading a project.</p>

<p>Other than <strong><code>NLTK</code></strong> (www.nltk.org), there are actually other libraries for text 
processing in <strong><code>python</code></strong>:</p>

<ul>
<li><strong>TextBlob</strong>: <a href="http://textblob.readthedocs.org/en/dev/" rel="noreferrer">http://textblob.readthedocs.org/en/dev/</a></li>
<li><strong>Gensim</strong>: <a href="http://radimrehurek.com/gensim/" rel="noreferrer">http://radimrehurek.com/gensim/</a></li>
<li><strong>Pattern</strong>: <a href="http://www.clips.ua.ac.be/pattern" rel="noreferrer">http://www.clips.ua.ac.be/pattern</a></li>
<li><strong>Spacy</strong>:: <a href="http://spacy.io" rel="noreferrer">http://spacy.io</a></li>
<li><strong>Orange</strong>: <a href="http://orange.biolab.si/features/" rel="noreferrer">http://orange.biolab.si/features/</a></li>
<li><strong>Pineapple</strong>: <a href="https://github.com/proycon/pynlpl" rel="noreferrer">https://github.com/proycon/pynlpl</a></li>
</ul>

<p>(for more, see <a href="https://pypi.python.org/pypi?%3Aaction=search&amp;term=natural+language+processing&amp;submit=search" rel="noreferrer">https://pypi.python.org/pypi?%3Aaction=search&amp;term=natural+language+processing&amp;submit=search</a>)</p>

<p>For <strong><code>Java</code></strong>, there're tonnes of others but here's another list:</p>

<ul>
<li><strong>Freeling</strong>: <a href="http://nlp.lsi.upc.edu/freeling/" rel="noreferrer">http://nlp.lsi.upc.edu/freeling/</a></li>
<li><strong>OpenNLP</strong>: <a href="http://opennlp.apache.org/" rel="noreferrer">http://opennlp.apache.org/</a></li>
<li><strong>LingPipe</strong>: <a href="http://alias-i.com/lingpipe/" rel="noreferrer">http://alias-i.com/lingpipe/</a></li>
<li><strong>Stanford CoreNLP</strong>: <a href="http://stanfordnlp.github.io/CoreNLP/" rel="noreferrer">http://stanfordnlp.github.io/CoreNLP/</a> (comes with wrappers for other languages, python included)</li>
<li><strong>CogComp NLP</strong>: <a href="https://github.com/CogComp/cogcomp-nlp" rel="noreferrer">https://github.com/CogComp/cogcomp-nlp</a></li>
</ul>

<p>This is a nice comparison for basic string processing, see <a href="http://nltk.googlecode.com/svn/trunk/doc/howto/nlp-python.html" rel="noreferrer">http://nltk.googlecode.com/svn/trunk/doc/howto/nlp-python.html</a></p>

<p>A useful comparison of GATE vs UIMA vs OpenNLP, see <a href="https://www.assembla.com/spaces/extraction-of-cost-data/wiki/Gate-vs-UIMA-vs-OpenNLP?version=4" rel="noreferrer">https://www.assembla.com/spaces/extraction-of-cost-data/wiki/Gate-vs-UIMA-vs-OpenNLP?version=4</a></p>

<p>If you're uncertain, which is the language to go for NLP, personally i say, "any language that will give you the desired analysis/output", see <a href="https://stackoverflow.com/questions/18558665/which-language-or-tools-to-learn-for-natural-language-processing?rq=1">Which language or tools to learn for natural language processing?</a></p>

<p>Here's a pretty recent (2017) of NLP tools: <a href="https://github.com/alvations/awesome-community-curated-nlp" rel="noreferrer">https://github.com/alvations/awesome-community-curated-nlp</a></p>

<p>An older list of NLP tools (2013): <a href="http://web.archive.org/web/20130703190201/http://yauhenklimovich.wordpress.com/2013/05/20/tools-nlp" rel="noreferrer">http://web.archive.org/web/20130703190201/http://yauhenklimovich.wordpress.com/2013/05/20/tools-nlp</a></p>

<hr>

<p>Other than language processing tools, you would very much need <strong><code>machine learning</code></strong> tools to incorporate into <code>NLP</code> pipelines. </p>

<p>There's a whole range in <code>Python</code> and <code>Java</code>, and once again it's up to preference and whether the libraries are user-friendly enough:</p>

<p>Machine Learning libraries in python:</p>

<ul>
<li><strong>Sklearn</strong> (Scikit-learn): <a href="http://scikit-learn.org/stable/" rel="noreferrer">http://scikit-learn.org/stable/</a></li>
<li><strong>Milk</strong>: <a href="http://luispedro.org/software/milk" rel="noreferrer">http://luispedro.org/software/milk</a></li>
<li><strong>Scipy</strong>: <a href="http://www.scipy.org/" rel="noreferrer">http://www.scipy.org/</a></li>
<li><strong>Theano</strong>: <a href="http://deeplearning.net/software/theano/" rel="noreferrer">http://deeplearning.net/software/theano/</a></li>
<li><strong>PyML</strong>: <a href="http://pyml.sourceforge.net/" rel="noreferrer">http://pyml.sourceforge.net/</a></li>
<li><strong>pyBrain</strong>: <a href="http://pybrain.org/" rel="noreferrer">http://pybrain.org/</a></li>
<li><strong>Graphlab Create</strong> (Commerical tool but free academic license for 1 year): <a href="https://dato.com/products/create/" rel="noreferrer">https://dato.com/products/create/</a></li>
</ul>

<p>(for more, see <a href="https://pypi.python.org/pypi?%3Aaction=search&amp;term=machine+learning&amp;submit=search" rel="noreferrer">https://pypi.python.org/pypi?%3Aaction=search&amp;term=machine+learning&amp;submit=search</a>)</p>

<ul>
<li><strong>Weka</strong>: <a href="http://www.cs.waikato.ac.nz/ml/weka/index.html" rel="noreferrer">http://www.cs.waikato.ac.nz/ml/weka/index.html</a></li>
<li><strong>Mallet</strong>: <a href="http://mallet.cs.umass.edu/" rel="noreferrer">http://mallet.cs.umass.edu/</a></li>
<li><strong>Mahout</strong>: <a href="https://mahout.apache.org/" rel="noreferrer">https://mahout.apache.org/</a></li>
</ul>

<hr>

<p>With the recent (2015) <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/COLI_a_00239" rel="noreferrer">deep learning tsunami in NLP</a>, possibly you could consider: <a href="https://en.wikipedia.org/wiki/Comparison_of_deep_learning_software" rel="noreferrer">https://en.wikipedia.org/wiki/Comparison_of_deep_learning_software</a></p>

<p>I'll avoid listing deep learning tools out of non-favoritism / neutrality. </p>

<hr>

<p>Other Stackoverflow questions that also asked for NLP/ML tools:</p>

<ul>
<li><a href="https://stackoverflow.com/questions/2233435/machine-learning-and-natural-language-processing">Machine Learning and Natural Language Processing</a></li>
<li><a href="https://stackoverflow.com/questions/212219/what-are-good-starting-points-for-someone-interested-in-natural-language-process">What are good starting points for someone interested in natural language processing?</a></li>
<li><a href="https://stackoverflow.com/questions/4115526/natural-language-processing">Natural language processing</a></li>
<li><a href="https://stackoverflow.com/questions/11116390/natural-language-processing-in-java-nlp">Natural Language Processing in Java (NLP)</a></li>
<li><a href="https://stackoverflow.com/questions/870460/is-there-a-good-natural-language-processing-library">Is there a good natural language processing library</a></li>
<li><a href="https://stackoverflow.com/questions/5833030/simple-natural-language-processing-startup-for-java">Simple Natural Language Processing Startup for Java</a></li>
<li><a href="https://stackoverflow.com/questions/11849134/what-libraries-offer-basic-or-advanced-nlp-methods">What libraries offer basic or advanced NLP methods?</a></li>
<li><a href="https://stackoverflow.com/questions/3886913/latest-good-languages-and-books-for-natural-language-processing-the-basics?rq=1">Latest good languages and books for Natural Language Processing, the basics</a></li>
<li>(For NER) <a href="https://stackoverflow.com/questions/7455188/entity-extraction-recognition-with-free-tools-while-feeding-lucene-index">Entity Extraction/Recognition with free tools while feeding Lucene Index</a></li>
<li>(With PHP) <a href="https://stackoverflow.com/questions/4457830/nlp-programming-tools-using-php">NLP programming tools using PHP?</a></li>
<li>(With Ruby) <a href="https://stackoverflow.com/questions/3776361/ruby-nlp-libraries">https://stackoverflow.com/questions/3776361/ruby-nlp-libraries</a></li>
</ul>
    </div>
<p>

<p><strong>Java</strong></p>

<p>The first place to look would be Stanford's <a href="http://nlp.stanford.edu/software/index.shtml">Natural Language Processing Group</a>. All of software that is distributed there is written in Java. All recent distributions require Oracle Java 6+ or OpenJDK 7+. Distribution packages include components for command-line invocation, jar files, a Java API, and source code.</p>

<p>Another great option that you see in a lot of machine learning environments here (general option), is <a href="http://www.cs.waikato.ac.nz/ml/weka/">Weka</a>. Weka is a collection of machine learning algorithms for data mining tasks. The algorithms can either be applied directly to a dataset or called from your own Java code. Weka contains tools for data pre-processing, classification, regression, clustering, association rules, and visualization. It is also well-suited for developing new machine learning schemes.</p>
<hr>
In terms of Java based libraries and tools, another great one that you might look at is LingPipe. alias-i.com/lingpipe 

<p>
<hr>
Generally you'd do these two tasks in the other order:
<br>
Do part-of-speech tagging<br>
Run a parser using the POS tags as input<br>
OpenNLP's documentation isn't that thorough and some of it's gotten hard to find due to the switch to apache. Some (potentially slightly out-of-date) tutorials are available in the old SF wiki.
<br>
You might want to take a look at the Stanford NLP tools, in particular the Stanford POS Tagger and the Stanford Parser. Both have downloads that include pre-trained model files and they also have demo files in the top-level directory that show how to get started with the API and short shell scripts that show how to use the tools from the command-line.
<br>
LingPipe might be another good toolkit to check out. A quick search here will lead you to a number of similar questions with links to other alternatives, too!
<p>
Which one should i use? Stanford CoreNLP or The Stanford Parser or The Stanford POS Tagger 
<br>  	 	
It depends on what you want/need to do. CoreNLP includes the other two tools plus other annotators, so if you're just experimenting with different kinds of annotation, CoreNLP would be a good place to start. From this question and your related questions, it sounds like you might benefit from reading more about computational linguistics before you get started with your task. I'd suggest Speech and Language Processing by Jurafsky and Martin: cs.colorado.edu/~martin/slp.html 
<br>

<hr>

Stanford-nlp's Bootstrapped Entity Learning:
<br>
	https://nlp.stanford.edu/software/patternslearning.html

<br>Input: seed sets (that is, dictionaries) of entities for some classes and unlabeled text. 
<br>Ouput: More entities belonging to the classes extracted from the text. 
<br>Algorithm: bootstrapped pattern-based learning.
<br>
<hr>

<br>
<br>learning based java (lbjava) 
<br>[[mpt: GOOD FOR LEARNING BUT RESTRICTIVE LICENSE; CAN'T USE]]
<br> * Developed by: The Cognitive Computations Group University of Illinois at Urbana-Champaign
<br> * http://cogcomp.cs.illinois.edu/
<br> * http://cogcomp.org/page/software_view/LBJava
<br>
Learning Based Java is a modeling language for the rapid development of software systems with one or more learned functions, designed for use with the JavaTM programming language. LBJava offers a convenient, declarative syntax for classifier and constraint definition directly in terms of the objects in the programmer's application. With LBJava, the details of feature extraction, learning, model evaluation, and inference are all abstracted away from the programmer, leaving him to reason more directly about his application.
<br>
Allows training; defining custom classifiers.
<br>
Lots of sample java code @ http://cogcomp.org/page/software_view/LBJava
<br>
<hr>
</div>


<div dojoType="com.trivedi.oPls.mPane" tags="java NLP article"
title="Takipi: How to Get Started with Java Machine Learning">

<br>
By Henn Idan (http://blog.takipi.com/author/henn/) - July 7, 2016
<br>
? 5 min read<br>
? 3 comments (http://blog.takipi.com/how-to-get-started-with-javamachine-learning/#disqus_thread)
<br>

What are the best tools to get started with Java machine learning?
<br>
They've been around for a while, but these days it feels like everyone is talking
about artificial intelligence and machine learning. Its no longer a secret
reserved to scientists and researchers, with implementations in nearly any new
emerging technology.
<br>
TAKIPI BLOG (HTTP://BLOG.TAKIPI.COM/)
<br>


10/26/2017 How to Get Started with Java Machine Learning | Takipi Blog
<br>
http://blog.takipi.com/how-to-get-started-with-java-machine-learning/ 2/7
<br>
In the following post we'll do a quick overview of the main Java machine
learning frameworks, and show how easy it is to get started without
reinventing the wheel and creating your own algorithms from scratch.
New Post: How to Get Started with Java Machine Learning
<br>
https://t.co/ohD3zCCA6j (https://t.co/ohD3zCCA6j)
<br>
pic.twitter.com/MU9kwhIKJM (https://t.co/MU9kwhIKJM)
 Takipi (@takipid) July 7, 2016<br>

(https://twitter.com/takipid/status/751082272326086657)
<br>
<h3>AI for the people</h3>
<br>
AI is a wide and cool ??eld that has been around for a while, but always felt a
little bit out of reach and made especially for scientists. If you wanted to create
an AI system, you had to implement the core algorithms on your own and train
them to identify patterns, understand images and process natural language.
The recent buzz and evolvement around this ??eld made it more accessible for
non-researchers. Now you have easy access to the relevant algorithms and
tools. You do have to know what you're doing, but it's a lot easier to enhance
your applications with machine learning capabilities.
<br>
<h3>Getting the machine going</h3>
<br>
To make things simpler, we decided to highlight 3 projects to help get you started:
<br>
1. Deeplearning4J (DL4J) (http://deeplearning4j.org/)  Open
source, distributed and commercial-grade deep-learning library for JVM
<br>
2. BID Data Project (http://bid2.berkeley.edu/bid-data-project/) A
collection of patterns that enable fast, large-scale machine learning
and data mining
<br>
3. Neuroph (http://neuroph.sourceforge.net/index.html) Objectoriented neural network
<br>

By the way, we recently published another list of interesting open source
GitHub libraries that caught our attention. Check it out
<br>
(http://blog.takipi.com/the-hitchhikers-guide-to-github-13-java-projectsyou-should-try/).
<br>
<h3>1. DL4J Deep Learning</h3>
<br>
DL4J is a tool made to assist you in the process of con??guring deep neural
networks which are made of multiple layers. It brings deep learning to the JVM
along with fast prototyping and customization at scale, while focusing on more
convention than con??guration.
<br>
This is the tool for those who already have the theory needed to create and use
deep neural networks, but don't want to actualize the algorithms themselves.
You can use it to solve speci??c problems involving massive amounts of data
and customize the neural net properties.
<br>
DL4J is written in Java, which makes it compatible with any JVM language such
as Clojure, Scala or Kotlin, and it integrates with Hadoop and Spark.
Possible use cases include rating or recommendation systems (CRM, adtech,
churn prevention), predictive analytics or even fraud detection. If you're
looking for a real-world example, you can check out Rapidminer
(https://rapidminer.com/). It's an open-source data platform that uses DL4J to
streamline predictive analytics processes for their users.
<br>
Setting up a new neural network is as easy as creating a new object:
<br>

Deeplearning4j.java (https://gist.github.com/HennTakipi/b932b32633d81c967f34d0fd769ef302#file-deeplearning4j-java)
<br>
<code><pre>
MultiLayerConfiguration conf = new NeuralNetConfiguration.Builder()
.iterations(1)
.weightInit(WeightInit.XAVIER)
.activation("relu")
.optimizationAlgo(OptimizationAlgorithm.STOCHASTIC_GRADIENT_DESCENT)
.learningRate(0.05)
// ... other hyperparameters
.backprop(true)
.build();
</pre></code>
<br>


The BID Data Project is made for those of you who deal with a great amount of
data, and are performance sensitive. This UC Berkeley project is a collection of
hardware, software and design patterns that enable fast and large-scale data mining.
<br>
The ??rst library is BIDMach, that holds the records for many common machine
learning problems, on single nodes or clusters. You can use it to manage data
sources, optimize and distribute data over CPUs or GPUs.
It includes many popular machine learning algorithms, and the team is working
on developing distributed Deep Learning networks, graph algorithms and
other models.
<br>
The other 2 libraries are BIDMat, a fast matrix algebra library that focuses on
data mining and BIDParse, GPU-accelerated natural language parser. Other
libraries in this project include visualization tools, along with libraries that will
let you run on Spark or even on Android.<br>

BIDMach benchmarks repeatedly show better results than other solutions,
even with a single machine compared to alternatives running on larger
clusters. A full list of benchmarks can be found right here
(https://github.com/BIDData/BIDMach/wiki/Benchmarks).
<br>

<h3>3. Neuroph</h3>
<br>
Neuroph is a lightweight Java framework used to develop common neural
network architectures. The framework provides a Java library along with a GUI
tool (called easyNeurons), and you can use it in order to create and train your
very own neural networks in Java programs.
<br>
It contains an open source Java library, with a small number of basic classes
which correspond to essential neural network concepts. It's a great stepping
stone if you're just getting started with neural networks, or if you want to know
how they work.
<br>
You can try out Neuroph online demo (http://neuroph.sourceforge.net/online_demo.html) 
and see how it actually
works. Spoiler alert: the interface looks old and outdated, but you can create
nice things with it. Also, it received the Duke's Choice Award for 2013
<br>
(http://neuroph.sourceforge.net/dukes_choice_award_2013.html).
<br>
(http://384uqqh5pka2ma24ild282mv.wpengine.netdna-cdn.com/wpcontent/uploads/2016/07/network.png)
	<br>Network graph view
<br>

What About the Others?
<br>
In case these 3 projects are not your cup of tea and you're looking for
something a little different for your project, don't worry. If you search GitHub
for Machine learning (https://github.com/search?
l=Java&q=machine+learning&type=Repositories&utf8=%E2%9C%93)ll find 1,506 Java repositories that might give you the right tool.
<br>

For example, an interesting project from Airbnb is aerosolve
<br>
(https://github.com/airbnb/aerosolve); A machine learning library designed to be human friendly.
<br>

Getting started with a new technology is always a source for trouble. If you will
need some help with your exceptions, be sure to check out the OverOps error
analysis tool (https://www.overops.com/).
<br>
<h2>Final Thoughts</h2><p>

Every few years there's a new buzz around AI. This time around, it came with
reinforcement in the form of machine learning, data mining, neural networks
and so on and we're all for it. The fact that these libraries are open sourced
means that information and abilities are up for grabs, and all you have to do is
think what can be done with this
<br>
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java NLP snippets notes"
title="Qn on Supervised tag suggestion for documents ('multiclass labelling')">

<p>

I have thousands of documents with associated tag information. However i also have many documents without tags.
<br>
I want to train a model on the documents WITH tags and then apply the trained classifier to the UNTAGGED documents; the classifier will then suggest the most appropriate tags for each UNTAGGED document.
<br>
I have done quite a lot of research and there doesn't seem to be a SUPERVISED implementation to document tag classification.
<br>
I know NLTK, gensim, word2vec and other libraries will be useful for this problem.
<br>
I will be coding the project in Python.
<br>
Any help would be greatly appreciated.
<br>
python machine-learning nlp text-classification<br>
shareimprove this question<br>
asked Jun 26 at 15:55<br>

pwhc

<hr>
<br>
Supervised document tagging isn't particularly uncommon, though it's usually called "multiclass labelling". 
<br>
For many methods it's the same as single labelling but you pick the N-best results. 
<br>
See here for a scikit example on made-up data: <br>scikit-learn.org/stable/auto_examples/plot_multilabel.html <br>polm23 Jun 27 at 4:07
<br>

<hr>

Depending on your actual use-case you might opt for more complex method but for minimum working model do:
<br>
1) Prepocessing of documents: tokenize, build vocabulary (NLTK has tools for this)
<br>
2) Do <a href='https://en.wikipedia.org/wiki/Bag-of-words_model#Application'>bag-of-words</a> encoding per document
<br>
3) Train a machine learning model with onehot encoding for outputs. Start from sklearn random forest, logistic regression, SVM.
<br>

answered Jun 26 at 17:46
<br>
Joonatan Samuel
<br><hr>
 	 	
thanks, i have a minimum working model; bow representation of document text with an SVM learning model. 
<br>
Any advice on taking it further? more pre-processing (stemming ect...). I was thinking of using WMD 
to cluster tagged documents, then apply the model to untagged documents that would then find the most 
similar kind of tag documents, therefore giving you your tag. 
<br>
<hr>

From here it will begin to depend on your actual use case. But basically my answer is in three parts. 
<br>
1) preprocessing <br>2) encoding <br>3) training model. <br>

Depending on your actual use-case and data the prioritization will differ. 
<br>
E.g. if you have 100mln documents but at test time don't need to worry about computation work 
with neural networks to get model better. If you have little data you might want to look into 
better preprocessing / encoding much more. 
<br>
<hr>
<br>
'm currently working on something similar, besides what @Joonatan Samuel suggested I would 
encourage you to do careful preprocessing and considerations.
<br>
If you want two or more tags for documents you could train several model : one model per tag. 
<br>
You need to consider if there will be enough cases for each model (tag)
<br>
If you have a lot of tags, you could run into a problem with document-tag cases like above.
<br>
Stick to most common tag prediction don't try to predict all tags.
<br>
answered Jun 26 at 18:01
<br>
Diego Agher
<br>
<hr>

in .NET, I'll usually do what was alluded to by samxli. I load all keywords into a hashtable. 
<br>
I've done it with up to 120,000 keywords and it works pretty fast.
<br>
The .NET hashtable object has a contains([key]) method. So for each word in the article I'll just call:
<br>
theHashTable.contains(theWord)
<br>
If it does contain the word, I'll index it. Has worked pretty well for me without having to use other frameworks. 
<br>
I don't know how hashtables work in PHP. You'd have to google that. I think their normal arrays work like hashtables?
<br>
The key to using a hashtable is that the keys are indexed for fast searching -- I think they use bTrees, 
but someone may correct me on that. If you're not familiar with the btree concept, you might want to look that up.
<br>

<br>edited Jun 6 '11 at 14:10
<br>answered Jun 6 '11 at 12:37
<br>Trevor
<br>
<hr>

<span class='mHG'>Given *A FIXED SET OF TAGS* one poss approach seems to be to:</span>
<ul>
<li>expand the tagList into a Map by getting ALL poss associated words (from, for example, the datamuse API)
</li><li>get freq. keywords from target
</li><li>lookup ea keyword; find best 'fit'
</li><li>"MANUALLY TRAIN" the corpus by adding custom tags to the list which will aid disambiguation
</li><ul>
<br>[[note: this is the type of method used by https://www.uclassify.com/; who then picks the result if match > 90%]]
<br><hr>
<br>
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java NLP snippets notes"
title="General NLP Qns">
<pre>
Qn: I want a machine to learn to categorize short texts

I have a ton of short stories about 500 words long and I want to categorize them into one of, let's say, 20 categories:

Entertainment
Food
Music
etc
I can hand-classify a bunch of them, but I want to implement machine learning to guess the categories eventually. What's the best way to approach this? Is there a standard approach to machine learning I should be using? I don't think a decision tree would work well since it's text data...I'm completely new in this field.

Any help would be appreciated, thanks!

Ans:

A naive Bayes will most probably work for you. The method is like this:

Fix a number of categories and get a training data set of (document, category) pairs.
A data vector of your document will be sth like a bag of words. e.g. Take the 100 most common words except words like 
"the", "and" and such. Each word gets a fixed component of your data vector (e.g. "food" is position 5). 
A feature vector is then an array of booleans, each indicating whether that word came up in the corresponding document.
Training:

For your training set, calculate the probability of every feature and every class: 
	p(C) = number documents of class C / total number of documents.
Calculate the probability of a feature in a class: 
	p(F|C) = number of documents of class with given feature (= word "food" is in the text) / number of documents in given class.

Decision:

Given an unclassified document, the probability of it belonging to class C is proportional to 
	P(C|F1, ..., F500) = P(C) * P(F1|C) * P(F2|C) * ... * P(F500|C). 
Pick the C that maximizes this term.
Since multiplication is numerically difficult, you can use the sum of the logs instead, 
which is maximized at the same C: 
	log P(C|F1, ..., F500) = log P(C) + log P(F1|C) + log P(F2|C) + ... + log P(F500|C).
<hr>

Am I right in that the categories of a training set can not be altered? Probably I am a little 
bit to lazy to do extended research. 
  	 	
No, they can't. But as soon as you do, you can train a new classifier anyway.
<hr>
I've classified tens of thousands of short texts. What I did intially was to use a 
tf-idf vector space model and then did k-means clustering on those vectors. 
This is a very good initial step of exploratory data analysis to get a nice handle on your dataset. 
The package I used to cluster was cluto: http://glaros.dtc.umn.edu/gkhome/views/cluto/

To do tf-idf, I just wrote a quick script in perl to tokenize on non-alphanumerics. Then, every 
document consists of a bag of words. Every document is represented as a vector of the words it 
contains. The value of each index of the vector is the term frequency (tf) * inverse document 
frequency (idf). It's just the product of the count of that word/term in the document multiplied 
by the reciprocal of the fraction of the documents that contain that word. 
(because a word like "the" is very uninformative.)

This method will quickly get you about 80%-90% accuracy. You can then manually label the ones 
that are right (or more importantly: wrong) and then do supervised learning if you so choose.


answered Apr 25 '10 at 19:42

user325523
<hr>
I think the paper "Machine learning in automated text categorization" (you can Google and 
download the PDF file) is worth reading. The paper discussed two crucial part:one for feature selection
(translate text to feature space), the other for building a classifier on feature space. 
there is a lot of feature selection methods, and several classification methods
(decision tree, naive Bayes, kNN, SVM, etc). you can try some combination to see if 
it was working on your data set.
I did something similar before, I use Python for text manipulation, feature selection, 
and feature weighting. and Orange for classifier. Orange and Weka already included 
naive Bayes, kNN... , but nowadays I might write the classifier with Python script 
directly, it shouldn't be very hard too.
Hope this helps.


answered Apr 23 '10 at 7:16

sunqiang
<hr>
Most people will say that statistical text analysis (like a naive Bayes approach) is 
the standard approach: "Foundations of Statistical Natural Language Processing", 
Manning and Schuetze and "Speech and Language Processing", Jurafsky and Martin are 
the standard references. Statistical text analysis became the standard approach 
during the late 90's because they easily outperformed symbolic systems. However 
some symbolic systems incorporate statistical elements and you can also actually use 
a connectionist approach (there are a few papers demonstrating this). You can also use 
cosine similarity (a form of k-Nearest Neighbor) although naive Bayes is usually the 
top performer.

Here's a good overview: http://www.cs.utexas.edu/users/hyukcho/classificationAlgorithm.html 
I used rainbow mentioned on that page for text classification on a search engine prototype 
I wrote on a dot com project.


answered Jan 15 '11 at 16:14

Kirt Undercoffer
<hr>
Unless there is a chance that you want to do another 500 classifications in the future I 
am not sure I would go for a machine learning approach.

Unless the categories are very similar ("food" and "italian food" to take an example) I 
think a quite naive heuristic could work very well.

For each category build a table of common words 
(for food : "potato", "food", "cook", "tomato", "restaurant",...) and for each text count 
which category got the most word matches. Instead of building the dictionary by hand 
you could take a sample (say a 100) of the texts, categorize them by hand and then let an 
algorithm pick out the words and then make sure to remove words that are common between 
all sets (since they provide no information). This is, in essence, a very simple "learning" system.

If you really want a machine learning system there are a number of methods for classification. 
The downside is that although most methods are quite simple to implement, the hard part is to 
chose a good method, the right features, and good parameters.

answered Apr 23 '10 at 6:12

Hannes Ovr
11.2k34058
  	 	
This is a good point. Machine learning might not be the best approach for this. Regexps all the way!  ash Apr 23 '10 at 9:37
<hr>

Try Weka... it's a free data mining tool that implements a lot of machine learning algorithms. It has a GUI and an API, so you can use it directly to on your data set or you can program against it.

If you like the results from the various machine learning algorithms and you're still interested in implementing your own algorithms, then you can implement the one(s) that you like the most. This will also help you remove some of the "will it actually work" feeling that you normally get before you build an ML/AI algorithm.


answered Apr 23 '10 at 6:24

Kiril
<hr>
We can use NLP here. Following would be the steps as I implemented to classify emails in different categories here: 1. Lemmatization: This would remove unnecessary details and would convert all the words into their basic forms or root forms. Like, it will convert working into work, running into run, horses into horse etc. We can Stanford Lemmatizer for this purpose. http://stanfordnlp.github.io/CoreNLP/

Wordnet filtering: We can use only those words which are present in Wordnet. I used Java Wordnet Interface for this purpose. Just filter out the words that are not found in wordnet and take rest of the words. http://projects.csail.mit.edu/jwi/
Find synonyms and further synonyms: For each of the above 5 or 6 categories mentioned above, form separate sets containing synonyms of synonyms of these categories. For e.g., form a set that would contain synonyms of Entertainment and then further synonyms of the synonyms of entertainment found. We can increase this set using web crawling as well.
Feed the data: Take all the words after Lemmatization and Wordnet filtering of a particular story and check how many words matches in each category sets. For e.g., if a story contains 100 words, and it matches with 35 words in entertainment category, 40 words with food, 30 words with travel, then it is highly likely to fall under the category of food and hence it would be a food story. I got good results for my email classification using above approach.

answered Nov 30 '16 at 0:44

Ashish Kumar

<hr>
Qn: Beginner's resources/introductions to classification?

I'd recommend first starting with Support Vector Machines (SVM) for general applied classification tasks. They'll give you state-of-the-art performance, and you don't really need to understand all of the theory behind them to just use the implementation provided by a package like WEKA.

If you have a larger data-set, you might want to try using Random Forests. There's also an implementation of this algorithm in WEKA, and they train much faster on large data. While they're less broadly used than SVMs, their accuracy tends to match or nearly match the accuracy you could get from one.

<hr>
Q: Difference between classification and clustering in data mining?
A:
In general, in classification you have a set of predefined classes and want to know which class a new object belongs to.

Clustering tries to group a set of objects and find whether there is some relationship between the objects.

In the context of machine learning, classification is supervised learning and clustering is unsupervised learning.
<hr>
Classification ->
Use Case: 	Classify known sample into known classes\
Algorithms:	Decision Trees, Bayesian classifiers
Data needs:	Labelled samples from a set of classes
<hr>

<br>
  
</pre>

</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java NLP Naive-Bayes Classification notes"
title="Naive-Bayes Text Classification Theory Explained">


<pre>
Qn:

I am finding it hard to understand the process of Naive Bayes, and I was wondering if someone could explain it with a simple step by step process in English. I understand it takes comparisons by times occurred as a probability, but I have no idea how the training data is related to the actual dataset.

Please give me an explanation of what role the training set plays. I am giving a very simple example for fruits here, like banana for example

training set---
round-red
round-orange
oblong-yellow
round-red

dataset----
round-red
round-orange
round-red
round-orange
oblong-yellow
round-red
round-orange
oblong-yellow
oblong-yellow
round-red

<hr>
Ans:

I realize that this is an old question, with an established answer. The reason I'm posting is that is the accepted answer has many elements of k-NN (k-nearest neighbors), a different algorithm.

Both k-NN and NaiveBayes are classification algorithms. Conceptually, k-NN uses the idea of "nearness" to classify new entities. In k-NN 'nearness' is modeled with ideas such as Euclidean Distance or Cosine Distance. By contrast, in NaiveBayes, the concept of 'probability' is used to classify new entities.

Since the question is about Naive Bayes, here's how I'd describe the ideas and steps to someone. I'll try to do it with as few equations and in plain English as much as possible.

First, Conditional Probability & Bayes' Rule

Before someone can understand and appreciate the nuances of Naive Bayes', they need to know a couple of related concepts first, namely, the idea of Conditional Probability, and Bayes' Rule. (If you are familiar with these concepts, skip to the section titled Getting to Naive Bayes')

Conditional Probability in plain English: What is the probability that something will happen, given that something else has already happened.

Let's say that there is some Outcome O. And some Evidence E. From the way these probabilities are defined: The Probability of having both the Outcome O and Evidence E is: (Probability of O occurring) multiplied by the (Prob of E given that O happened)

One Example to understand Conditional Probability:

Let say we have a collection of US Senators. Senators could be Democrats or Republicans. They are also either male or female.

If we select one senator completely randomly, what is the probability that this person is a female Democrat? Conditional Probability can help us answer that.

Probability of (Democrat and Female Senator)= Prob(Senator is Democrat) multiplied by Conditional Probability of Being Female given that they are a Democrat.

  P(Democrat & Female) = P(Democrat) * P(Female | Democrat) 
We could compute the exact same thing, the reverse way:

  P(Democrat & Female) = P(Female) * P(Democrat | Female) 
Understanding Bayes Rule

Conceptually, this is a way to go from P(Evidence| Known Outcome) to P(Outcome|Known Evidence). Often, we know how frequently some particular evidence is observed, given a known outcome. We have to use this known fact to compute the reverse, to compute the chance of that outcome happening, given the evidence.

P(Outcome given that we know some Evidence) = P(Evidence given that we know the Outcome) times Prob(Outcome), scaled by the P(Evidence)

The classic example to understand Bayes' Rule:

Probability of Disease D given Test-positive = 

               Prob(Test is positive|Disease) * P(Disease)
     _______________________________________________________________
     (scaled by) Prob(Testing Positive, with or without the disease)
Now, all this was just preamble, to get to Naive Bayes.

Getting to Naive Bayes'

So far, we have talked only about one piece of evidence. In reality, we have to predict an outcome given multiple evidence. In that case, the math gets very complicated. To get around that complication, one approach is to 'uncouple' multiple pieces of evidence, and to treat each of piece of evidence as independent. This approach is why this is called naive Bayes.

P(Outcome|Multiple Evidence) = 
P(Evidence1|Outcome) * P(Evidence2|outcome) * ... * P(EvidenceN|outcome) * P(Outcome)
scaled by P(Multiple Evidence)
Many people choose to remember this as:

                      P(Likelihood of Evidence) * Prior prob of outcome
P(outcome|evidence) = _________________________________________________
                                         P(Evidence)
Notice a few things about this equation:

If the Prob(evidence|outcome) is 1, then we are just multiplying by 1.
If the Prob(some particular evidence|outcome) is 0, then the whole prob. becomes 0. If you see contradicting evidence, we can rule out that outcome.
Since we divide everything by P(Evidence), we can even get away without calculating it.
The intuition behind multiplying by the prior is so that we give high probability to more common outcomes, and low probabilities to unlikely outcomes. These are also called base rates and they are a way to scale our predicted probabilities.
How to Apply NaiveBayes to Predict an Outcome?

Just run the formula above for each possible outcome. Since we are trying to classify, each outcome is called a class and it has a class label. Our job is to look at the evidence, to consider how likely it is to be this class or that class, and assign a label to each entity. Again, we take a very simple approach: The class that has the highest probability is declared the "winner" and that class label gets assigned to that combination of evidences.

Fruit Example

Let's try it out on an example to increase our understanding: The OP asked for a 'fruit' identification example.

Let's say that we have data on 1000 pieces of fruit. They happen to be Banana, Orange or some Other Fruit. We know 3 characteristics about each fruit:

Whether it is Long
Whether it is Sweet and
If its color is Yellow.
This is our 'training set.' We will use this to predict the type of any new fruit we encounter.

Type           Long | Not Long || Sweet | Not Sweet || Yellow |Not Yellow|Total
             ___________________________________________________________________
Banana      |  400  |    100   || 350   |    150    ||  450   |  50      |  500
Orange      |    0  |    300   || 150   |    150    ||  300   |   0      |  300
Other Fruit |  100  |    100   || 150   |     50    ||   50   | 150      |  200
            ____________________________________________________________________
Total       |  500  |    500   || 650   |    350    ||  800   | 200      | 1000
             ___________________________________________________________________
We can pre-compute a lot of things about our fruit collection.

The so-called "Prior" probabilities. (If we didn't know any of the fruit attributes, this would be our guess.) These are our base rates.

 P(Banana)      = 0.5 (500/1000)
 P(Orange)      = 0.3
 P(Other Fruit) = 0.2
Probability of "Evidence"

p(Long)   = 0.5
P(Sweet)  = 0.65
P(Yellow) = 0.8
Probability of "Likelihood"

P(Long|Banana) = 0.8
P(Long|Orange) = 0  [Oranges are never long in all the fruit we have seen.]
 ....

P(Yellow|Other Fruit)     =  50/200 = 0.25
P(Not Yellow|Other Fruit) = 0.75
Given a Fruit, how to classify it?

Let's say that we are given the properties of an unknown fruit, and asked to classify it. We are told that the fruit is Long, Sweet and Yellow. Is it a Banana? Is it an Orange? Or Is it some Other Fruit?

We can simply run the numbers for each of the 3 outcomes, one by one. Then we choose the highest probability and 'classify' our unknown fruit as belonging to the class that had the highest probability based on our prior evidence (our 1000 fruit training set):

P(Banana|Long, Sweet and Yellow) 
      P(Long|Banana) * P(Sweet|Banana) * P(Yellow|Banana) * P(banana)
    = _______________________________________________________________
                      P(Long) * P(Sweet) * P(Yellow)

    = 0.8 * 0.7 * 0.9 * 0.5 / P(evidence)

    = 0.252 / P(evidence)


P(Orange|Long, Sweet and Yellow) = 0


P(Other Fruit|Long, Sweet and Yellow)
      P(Long|Other fruit) * P(Sweet|Other fruit) * P(Yellow|Other fruit) * P(Other Fruit)
    = ____________________________________________________________________________________
                                          P(evidence)

    = (100/200 * 150/200 * 50/200 * 200/1000) / P(evidence)

    = 0.01875 / P(evidence)
By an overwhelming margin (0.252 >> 0.01875), we classify this Sweet/Long/Yellow fruit as likely to be a Banana.

Why is Bayes Classifier so popular?

Look at what it eventually comes down to. Just some counting and multiplication. We can pre-compute all these terms, and so classifying becomes easy, quick and efficient.

Let z = 1 / P(evidence). Now we quickly compute the following three quantities.

P(Banana|evidence) = z * Prob(Banana) * Prob(Evidence1|Banana) * Prob(Evidence2|Banana) ...
P(Orange|Evidence) = z * Prob(Orange) * Prob(Evidence1|Orange) * Prob(Evidence2|Orange) ...
P(Other|Evidence)  = z * Prob(Other)  * Prob(Evidence1|Other)  * Prob(Evidence2|Other)  ...
Assign the class label of whichever is the highest number, and you are done.

Despite the name, Naive Bayes turns out to be excellent in certain applications. Text classification is one area where it really shines.

Hope that helps in understanding the concepts behind the Naive Bayes algorithm.


edited Dec 25 '16 at 10:53

JulienD
3,02921743
answered Dec 12 '13 at 23:54

Ram Narasimhan
<hr>
Thanks for the very clear explanation! Easily one of the better ones floating around the web. Question: since each P(outcome/evidence) is multiplied by 1 / z=p(evidence) (which in the fruit case, means each is essentially the probability based solely on previous evidence), would it be correct to say that z doesn't matter at all for Naive Bayes? Which would thus mean that if, say, one ran into a long/sweet/yellow fruit that wasn't a banana, it'd be classified incorrectly.  covariance Dec 21 '13 at 2:30
<hr>	 	
@E.Chow Yes, you are correct in that computing z doesn't matter for Naive Bayes. (It is a way to scale the probabilities to be between 0 and 1.) Note that z is product of the probabilities of all the evidence at hand. (It is different from the priors which is the base rate of the classes.) You are correct: If you did find a Long/Sweet/Yellow fruit that is not a banana, NB will classify it incorrectly as a banana, based on this training set. The algorithm is a 'best probabilistic guess based on evidence' and so it will mis-classify on occasion. Ram Narasimhan Dec 21 '13 at 6:35 
<hr>
Ram Narasimhan explained the concept very nicely here below is an alternative explanation through the code example of Naive Bayes in action
It uses an example problem from <a href='https://www.google.co.in/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=data%20mining%20concepts%20and%20techniques'>this book</a> on page 351
This is the data set that we will be using

In the above dataset if we give the hypothesis = {"Age":'<=30', "Income":"medium", "Student":'yes' , "Creadit_Rating":'fair'} then what is the probability that he will buy or will not buy a computer.
The code below exactly answers that question.
Just create a file called named new_dataset.csv and paste the following content.

Age,Income,Student,Creadit_Rating,Buys_Computer
<=30,high,no,fair,no
<=30,high,no,excellent,no
31-40,high,no,fair,yes
>40,medium,no,fair,yes
>40,low,yes,fair,yes
>40,low,yes,excellent,no
31-40,low,yes,excellent,yes
<=30,medium,no,fair,no
<=30,low,yes,fair,yes
>40,medium,yes,fair,yes
<=30,medium,yes,excellent,yes
31-40,medium,no,excellent,yes
31-40,high,yes,fair,yes
>40,medium,no,excellent,no
Here is the code the comments explains everything we are doing here! [python]

import pandas as pd 
import pprint 

class Classifier():
    data = None
    class_attr = None
    priori = {}
    cp = {}
    hypothesis = None


    def __init__(self,filename=None, class_attr=None ):
        self.data = pd.read_csv(filename, sep=',', header =(0))
        self.class_attr = class_attr

    '''
        probability(class) =    How many  times it appears in cloumn
                             __________________________________________
                                  count of all class attribute
    '''
    def calculate_priori(self):
        class_values = list(set(self.data[self.class_attr]))
        class_data =  list(self.data[self.class_attr])
        for i in class_values:
            self.priori[i]  = class_data.count(i)/float(len(class_data))
        print "Priori Values: ", self.priori

    '''
        Here we calculate the individual probabilites 
        P(outcome|evidence) =   P(Likelihood of Evidence) x Prior prob of outcome
                               ___________________________________________
                                                    P(Evidence)
    '''
    def get_cp(self, attr, attr_type, class_value):
        data_attr = list(self.data[attr])
        class_data = list(self.data[self.class_attr])
        total =1
        for i in range(0, len(data_attr)):
            if class_data[i] == class_value and data_attr[i] == attr_type:
                total+=1
        return total/float(class_data.count(class_value))

    '''
        Here we calculate Likelihood of Evidence and multiple all individual probabilities with priori
        (Outcome|Multiple Evidence) = P(Evidence1|Outcome) x P(Evidence2|outcome) x ... x P(EvidenceN|outcome) x P(Outcome)
        scaled by P(Multiple Evidence)
    '''
    def calculate_conditional_probabilities(self, hypothesis):
        for i in self.priori:
            self.cp[i] = {}
            for j in hypothesis:
                self.cp[i].update({ hypothesis[j]: self.get_cp(j, hypothesis[j], i)})
        print "\nCalculated Conditional Probabilities: \n"
        pprint.pprint(self.cp)

    def classify(self):
        print "Result: "
        for i in self.cp:
            print i, " ==> ", reduce(lambda x, y: x*y, self.cp[i].values())*self.priori[i]

if __name__ == "__main__":
    c = Classifier(filename="new_dataset.csv", class_attr="Buys_Computer" )
    c.calculate_priori()
    c.hypothesis = {"Age":'<=30', "Income":"medium", "Student":'yes' , "Creadit_Rating":'fair'}

    c.calculate_conditional_probabilities(c.hypothesis)
    c.classify()
output:

Priori Values:  {'yes': 0.6428571428571429, 'no': 0.35714285714285715}

Calculated Conditional Probabilities: 

{
 'no': {
        '<=30': 0.8,
        'fair': 0.6, 
        'medium': 0.6, 
        'yes': 0.4
        },
'yes': {
        '<=30': 0.3333333333333333,
        'fair': 0.7777777777777778,
        'medium': 0.5555555555555556,
        'yes': 0.7777777777777778
      }
}

Result: 
yes  ==>  0.0720164609053
no  ==>  0.0411428571429
Hope it helps in better understanding the problem

peace


edited Mar 29 '16 at 12:00
answered Mar 29 '16 at 11:15

Sayed Zainul Abideen
437411
add a comment
<hr>

8
down vote
I try to explain the Bayes rule with an example.

Suppose that you know that 10% of people are smokers. You also know that 90% of smokers are men and 80% of them are above 20 years old.

Now you see someone who is a man and 15 years old. You want to know the chance that he be a smoker:

 X = smoker | he is a man and under 20
As you know 10% of people are smokers your initial guess is 10% (prior probability, without knowing anything about the person) but the other evidences (that he is a man and he is 15) can contribute to this probability.

Each evidence may increase or decrease this chance. For example the fact that he is a man may increase the chance that he is a smoker, providing that this percentage (being a man) among non-smokers is lower, for example, 40%. In other words being a man must be a good indicator of being a smoker rather than a non-smoker.

We can show this contribution in another way. For each feature, you need to compare the commonness (probability) of that feature (f) independently against its probability under the given condition. (P(f) vs. P(f | x). For example, if we know that the probability of being a man is 90% in a society and 90% of smokers are also men, then knowing that someone is a man doesn't change anything (10% * (90% / 90%) = 10%). But if men contribute to 40% of the society, but 90% of the smokers, then being a man increases the chance of being an smoker (10% * (90% / 40%) = 22.5% ). In the same way, if the probability of being a man was 95% in a population, then regardless of the fact that the percentage of men among smokers is high (90%)!, the evidence of being a man decreases the chance of being an smoker! (10% * (90% / 95%) = 9.5%).

So we have:

P(X) = 
P(smoker)* 
(P(being a man | smoker)/P(being a man))*
(P(under 20 | smoker)/ P(under 20))
Notice in this formula we assumed that being a man and being under 20 are independent features so we multiplied them, it means that knowing that someone is under 20 has no effect on guessing that he is man or woman. But it may not be true, for example maybe most adolescence in a society are men...

To use this formula in a classifier

The classifier is given some features (man and under 20) and it must decide if he is an smoker or not. It uses the above formula to find that. To gain the needed probabilities (90%, 10%, 80%...) it uses training set. for example it counts the people in the training set that are smokers and find they contribute 10% of the sample. Then for smokers checks how many of them are men or women .... how many are above 20 or under 20....


edited Nov 11 '16 at 17:04
answered Mar 12 '16 at 16:13

Ahmad
<hr>

Qn: What is naive about Naive Bayes?

Ans: There's actually a very good example on Wikipedia:

In simple terms, a naive Bayes classifier assumes that the presence (or absence) of a particular feature of a class is unrelated to the presence (or absence) of any other feature, given the class variable. For example, a fruit may be considered to be an apple if it is red, round, and about 4" in diameter. Even if these features depend on each other or upon the existence of the other features, a naive Bayes classifier considers all of these properties to independently contribute to the probability that this fruit is an apple.
Basically, it's "naive" because it makes assumptions that may or may not turn out to be correct.

answered May 16 '12 at 8:35

this.lau_
<hr>
The wikipedia article explains it correctly, but I disagree that "it makes assumptions that may or may not turn out to be correct". With right amount of training data it does a good job of filtering out the irrelevant parameters. The "naive" part is that is does not consider dependence between the parameters.. and hence may have to look at redundant data. Chip May 16 '12 at 8:50 
<hr>
If your data is composed of a feature vector X = {x1, x2, ... x10} and your class labels Y = {y1, y2, .. y5}. Thus, a Bayes classifier identifies the correct class label as the one that maximizes the following formula :

P(y/X) = P(X/y) * P(y) = P(x1,x2, ... x10/ y) * P(y)

So for, it is still not Naive. However, it is hard to calculate P(x1,x2, ... x10/ Y), so we assume the features to be independent, this is what we call the Naive assumption, hence, we end up with the following formula instead

P(y/X) = P(x1/y) * P(x2/y) * ... P(x10/y) * P(y)

answered Aug 28 '13 at 19:44

gr33ndata
<hr>
It's called naive because it makes the assumption that all attributes are independent of each other. This assumption is why it's called naive as in lots of real world situations this does not fit. Despite this the classifier works extremely well in lots of real world situations and has comparable performance to neutral networks and SVM's in certain cases (though not all).

answered May 22 '14 at 11:09

user3664740
<hr>
</pre>
<br>
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java NLP Naive-Bayes Classification notes"
title="using Naive Bayes in real life">
(A seemingly brilliant) Writer mentions <a href='http://logicaltypes.blogspot.com/2014/04/b-is-for-bayesian-classifiers.html'>using Naive Bayes in real life</a> (football pool)...
<br>
...The beauty of a Bayesian classifier is that it's simplicity itself to implement. 
The probabilities run away from you on a computer, because multiplying small 
probabilities will get you into the IEEE math error zone so quickly your head 
will spin, and your system gets all weirded out, but instead of multiplying 
probabilities, just use a little bit of seventh grade math (in my day) and 
simply sum their logarithms:
<br>
&nbsp;&nbsp;&nbsp;&nbsp; p(x | X) = p(a | x) * p(b | x) * p(c | x) ...
<br>
 can be re-represented as:
<br>
&nbsp;&nbsp;&nbsp;&nbsp; log p(x | X) = log p(a | x) + log p(b | x) + log p(c | x) ...
<br>
 And this way we (greatly) reduce going off into la-la land for your ALU.
<br>
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java NLP Naive-Bayes Classification notes"
title="WEKA related">
<pre>
note: these seem to be all outdated; but anyway:

WEKA FAQ: http://weka.wikispaces.com/Frequently+Asked+Questions
IBM DevWorks Intro (Data mining with WEKA): https://www.ibm.com/developerworks/opensource/library/os-weka1/index.html
Another Intro to WEKA: http://ortho.clmed.ncku.edu.tw/~emba/2006EMBA_MIS/3_16_2006/WekaIntro.pdf

<hr>
Qn: Learning Weka on the Command Line

I am fairly new to Weka and even more new to Weka on the command line. I find documentation is poor and I am struggling to figure out a few things to do. For example, want to take two .arff files, one for training, one for testing and get an output of predictions for the missing labels in the test data.

How can I do this?

I have this code as a starting block

java -classpath weka.jar weka.classifiers.meta.FilteredClassifier
-t "training_file_with_missing_values.arff"
-T "test_file_with_missing_values.arff"
-F weka.filters.unsupervised.attribute.ReplaceMissingValues -- -c last
-W weka.classifiers.functions.MultilayerPerceptron -- -L 0.3 -M 0.2 -H a
Running that code gives me "Illegal option -c last" and I am not sure why. I am also not going to be using MLP as NN tend to be too slow when I have a few thousand features from the text data. I know how to change it to another classifier though (like NB or libSVM so that is good).

But I am not sure how to add multiple filters in one call as I also need to add the StringToWordVector filter (and possibly the Reorder filter to make the class the last, instead of first attribute).

And then how do I get it actually output me the prediction labels of each class? And then store so those in an arff with the initial data.

machine-learning classification weka

asked Mar 15 '13 at 20:21

Reily Bourne
<hr>
Weka is not really the shining example of documentation, but you can still find valuable information about it on their sites. You should start with the Primer. I understand that you want to classify text files, so you should also have a look at Text categorization with WEKA.

The command line you posted in your question contains an error. I know, you copied it from my answer to another question, but I also just noticed it. You have to omit the -- -c last, because the ReplaceMissingValue filter doesn't like it.

In the Primer it says:

weka.filters.supervised

Classes below weka.filters.supervised in the class hierarchy are for supervised filtering, i.e. taking advantage of the class information. A class must be assigned via -c, for WEKA default behaviour use -c last.
but ReplaceMissingValue is an unsupervised filter, as is StringToWordVector.

Multiple filters

Adding multiple filter is also no problem, that is what the MultiFilter is for. The command line can get a bit messy, though: (I chose RandomForest here, because it is a lot faster than NN).

java -classpath weka.jar weka.classifiers.meta.FilteredClassifier \
  -t ~/weka-3-7-9/data/ReutersCorn-train.arff \
  -T ~/weka-3-7-9/data/ReutersCorn-test.arff \
 -F "weka.filters.MultiFilter \
     -F weka.filters.unsupervised.attribute.StringToWordVector \
     -F weka.filters.unsupervised.attribute.Standardize" \
 -W weka.classifiers.trees.RandomForest -- -I 100 \
Making predictions

Here is what the Primer says about getting the prediction:

However, if more detailed information about the classifier's predictions are necessary, -p # outputs just the predictions for each test instance, along with a range of one-based attribute ids (0 for none).
It is a good convention to put those general options like -p 0 directly after the class you're calling, so the command line would be

java -classpath weka.jar weka.classifiers.meta.FilteredClassifier \
  -t ~/weka-3-7-9/data/ReutersCorn-train.arff \
  -T ~/weka-3-7-9/data/ReutersCorn-test.arff \
  -p 0 \
 -F "weka.filters.MultiFilter \
     -F weka.filters.unsupervised.attribute.StringToWordVector \
     -F weka.filters.unsupervised.attribute.Standardize" \
 -W weka.classifiers.trees.RandomForest -- -I 100 \
Structure of WEKA classifiers/filters

But as you can see, WEKA can get very complicated when calling it from the command line. This is due to the tree structure of WEKA classifiers and filters. Though you can run only one classifier/filter per command line, it can be structured as complex as you like. For the above command, the structure looks like this:

The FilteredClassifier will initialize a filter on the training data set, filter both training and test data, then train a model on the training data and classify the given test data.

FilteredClassifier
 |
 + Filter
 |
 + Classifier
If we want multiple filters, we use the MultiFilter, which is only one filter, but it calls multiple others in the order they were given.

FilteredClassifier
 |
 + MultiFilter
 |  |
 |  + StringToWordVector
 |  |
 |  + Standardize
 |
 + RandomForest
The hard part of running something like this from the command line is assigning the desired options to the right classes, because often the option names are the same. For example, the -F option is used for the FilteredClassifier and the MultiFilter as well, so I had to use quotes to make it clear which -F belongs to what filter.

In the last line, you see that the option -I 100, which belongs to the RandomForest, can't be appended directly, because then it would be assigned to FilteredClassifier and you will get Illegal options: -I 100. Hence, you have to add -- before it.

Adding predictions to the data files

Adding the predicted class label is also possible, but even more complicated. AFAIK this can't be done in one step, but you have to train and save a model first, then use this one for predicting and assigning new class labels.

Training and saving the model:

java -classpath weka.jar weka.classifiers.meta.FilteredClassifier \
  -t ~/weka-3-7-9/data/ReutersCorn-train.arff \
  -d rf.model \
  -F "weka.filters.MultiFilter \
      -F weka.filters.unsupervised.attribute.StringToWordVector \
      -F weka.filters.unsupervised.attribute.Standardize" \
  -W weka.classifiers.trees.RandomForest -- -I 100 \
This will serialize the model of the trained FilteredClassifier to the file rf.model. The important thing here is that the initialized filter will also be serialized, otherwise the test set wouldn't be compatible after filtering.

Loading the model, making predictions and saving it:

java -classpath weka.jar weka.filters.supervised.attribute.AddClassification \
  -serialized rf.model \
  -classification \
  -remove-old-class \
  -i ~/weka-3-7-9/data/ReutersCorn-test.arff \
  -o pred.arff \
  -c last
Note:

I want to add that before writing this answer here, I had no knowledge about making predictions from the command line whatsoever. I googled your problems and then came to this answer by trial and error ;)


edited Nov 12 '13 at 12:58
answered Mar 16 '13 at 10:43

Sentry
3,30721832
1	 	
This is one of the most helpful 'guides' to get started using WEKA for prediction purposes - Thanks!  SPi Nov 11 '13 at 23:37
2	 	
You are an absolute saint. Is there any way to give you more credit than marking up? You deserve 1k points for this. Gthoma2 Apr 26 '14 at 0:58
<hr>
A better way to do all that you want to use the GUI Explorer. Here is how to do all that you want:

1) Take two separate files for training and testing.

Use 'Open File' under the Preprocess tab to choose your training file. Use 'Supplied Test Set' radio under the Classify tab to choose your test file.

2) Output the predictions for the missing labels.

Use 'More Options' and choose 'Output Predictions' under the Classify tab to see predictions.

3) Use more than one filters

Use 'Filter' under the Preprocess tab to apply as many filters as you want before classifying.

4) Make class the last attribute

This is actually unnecessary. You can choose any attribute to be your class. A class is any attribute that you want the classifier to predict. Use the Nom(Class) dropdown on the Classify tab to choose which attribute is your class.


answered Mar 15 '13 at 20:33

srrvnn
373618
  	 	
The problem with your answer for (1) is that when I do that I get the error that they are not compatible. This is because they have different features and will not allow me to test them. That's why I believe I need to use the command line to get them to have the same features. Reily Bourne Mar 15 '13 at 22:26
  	 	
@JoshWeissbock That's the problem, they must have the same features. Or you must filter them in a way that they have the same features. Sentry Mar 16 '13 at 0:23
<hr>
<hr>
Qn: Precision/recall for multiclass-multilabel classification

I'm wondering how to calculate precision and recall measures for multiclass multilabel classification, i.e. classification where there are more than two labels, and where each instance can have multiple labels?

machine-learning classification precision-recall

edited Mar 12 '16 at 13:31

user2314737

<hr>
Well, false would be if you didn't classified correctly, and true where it was correctly classified. Why do you worry about multiple labels? Thomas Jungblut Jan 25 '12 at 17:10 

I found a similar question, this might be a duplicate: stackoverflow.com/questions/3856013/ mehaase May 13 '12 at 23:43

The answer is that you have to compute precision and recall for each class, then average them together. E.g. if you classes A, B, and C, then your precision is:

(precision(A) + precision(B) + precision(C)) / 3
Same for recall.

I'm no expert, but this is what I have determined based on the following sources:

https://list.scms.waikato.ac.nz/pipermail/wekalist/2011-March/051575.html http://stats.stackexchange.com/questions/21551/how-to-compute-precision-recall-for-multiclass-multilabel-classification


answered May 13 '12 at 23:46

mehaase
15.3k44257
3	 	
If your data has unbalanced number of labels, this averaging may not reflect the real performance.  tashuhka Aug 13 '14 at 14:25

<hr>

For multi-label classification you have two ways to go First consider the following.

$n$ is the number of examples.
$Y_i$ is the ground truth label assignment of the $i^{th}$ example..
$x_i$ is the $i^{th}$ example.
$h(x_i)$ is the predicted labels for the $i^{th}$ example.
Example based

The metrics are computed in a per datapoint manner. For each predicted label its only its score is computed, and then these scores are aggregated over all the datapoints.

Precision = $\frac{1}{n}\sum_{i=1}^{n}\frac{|Y_{i}\cap h(x_{i})|}{|h(x_{i})|}$ , The ratio of how much of the predicted is correct. The numerator finds how many labels in the predicted vector has common with the ground truth, and the ratio computes, how many of the predicted true labels are actually in the ground truth.
Recall = $\frac{1}{n}\sum_{i=1}^{n}\frac{|Y_{i}\cap h(x_{i})|}{|Y_{i}|}$ , The ratio of how many of the actual labels were predicted. The numerator finds how many labels in the predicted vector has common with the ground truth (as above), then finds the ratio to the number of actual labels, therefore getting what fraction of the actual labels were predicted.
There are other metrics as well.

Label based

Here the things are done labels-wise. For each label the metrics (eg. precision, recall) are computed and then these label-wise metrics are aggregated. Hence, in this case you end up computing the precision/recall for each label over the entire dataset, as you do for a binary classification (as each label has a binary assignment), then aggregate it.

The easy way is to present the general form.

This is just an extension of the standard multi-class equivalent.

Macro averaged $\frac{1}{q}\sum_{j=1}^{q}B(TP_{j},FP_{j},TN_{j},FN_{j})$
Micro averaged $B(\sum_{j=1}^{q}TP_{j},\sum_{j=1}^{q}FP_{j},\sum_{j=1}^{q}TN_{j},\sum_{j=1}^{q}FN_{j})$
Here the $TP_{j},FP_{j},TN_{j},FN_{j}$ are the true positive, false positive, true negative and false negative counts respectively for only the $j^{th}$ label.

Here $B$ stands for any of the confusion-matrix based metric. In your case you would plug in the standard precision and recall formulas. For macro average you pass in the per label count and then sum, for micro average you average the counts first, then apply your metric function.

You might be interested to have a look into the code for the mult-label metrics here , which a part of the package mldr in R. Also you might be interested to look into the Java multi-label library MULAN.

This is a nice paper to get into the different metrics: A Review on Multi-Label Learning Algorithms


edited Sep 9 '16 at 21:42
answered Sep 9 '16 at 21:33

phoxis
<hr>
Let us assume that we have a 3-class multi classification problem with labels A, B and C.
The first thing to do is to generate a confusion matrix. Note that the values in the diagonal are always the true positives (TP).
Now, to compute recall for label A you can read off the values from the confusion matrix and compute:
= TP_A/(TP_A+FN_A)
= TP_A/(Total gold labels for A)
Now, let us compute precision for label A, you can read off the values from the confusion matrix and compute:
= TP_A/(TP_A+FP_A)
= TP_A/(Total predicted as A)
You just need to do the same for the remaining labels B and C. This applies to any multi-class classification problem.
Here is the full article that talks about how to compute precision and recall for any multi-class classification problem, including examples.


edited Oct 23 '14 at 20:55

honk
<hr>
Simple averaging will do if the classes are balanced.

Otherwise, recall for each real class needs to be weighted by prevalence of the class, and precision for each predicted label needs to be weighted by the bias (probability) for each label. Either way you get Rand Accuracy.

A more direct way is to make a normalized contingency table (divide by N so table adds up to 1 for each combination of label and class) and add the diagonal to get Rand Accuracy.

But if classes aren't balanced, the bias remains and a chance corrected method such as kappa is more appropriate, or better still ROC analysis or a chance correct measure such as informedness (height above the chance line in ROC).


answered Mar 20 '15 at 7:18

David M W Powers
<hr>
<hr>
Qn: How to interpret weka classification?

How can we interpret the classification result in weka using naive bayes?

How is mean, std deviation, weight sum and precision calculated?

How is kappa statistic, mean absolute error, root mean squared error etc calculated?

What is the interpretation of the confusion matrix?

computer-vision classification weka
shareimprove this question
edited May 10 '12 at 20:54

Atilla Ozgur

Ans:

Below is some sample output for a naive Bayes classifier, using 10-fold cross-validation. There's a lot of information there, and what you should focus on depends on your application. I'll explain some of the results below, to get you started.

=== Stratified cross-validation ===
=== Summary ===

Correctly Classified Instances          71               71      %
Incorrectly Classified Instances        29               29      %
Kappa statistic                          0.3108
Mean absolute error                      0.3333
Root mean squared error                  0.4662
Relative absolute error                 69.9453 %
Root relative squared error             95.5466 %
Total Number of Instances              100     

=== Detailed Accuracy By Class ===

               TP Rate   FP Rate   Precision   Recall  F-Measure   ROC Area  Class
                 0.967     0.692      0.686     0.967     0.803      0.709    0
                 0.308     0.033      0.857     0.308     0.453      0.708    1
Weighted Avg.    0.71      0.435      0.753     0.71      0.666      0.709

=== Confusion Matrix ===

  a  b   &lt;-- classified as
 59  2 |  a = 0
 27 12 |  b = 1
The correctly and incorrectly classified instances show the percentage of test instances that were correctly and incorrectly classified. The raw numbers are shown in the confusion matrix, with a and b representing the class labels. Here there were 100 instances, so the percentages and raw numbers add up, aa + bb = 59 + 12 = 71, ab + ba = 27 + 2 = 29.

The percentage of correctly classified instances is often called accuracy or sample accuracy. It has some disadvantages as a performance estimate (not chance corrected, not sensitive to class distribution), so you'll probably want to look at some of the other numbers. ROC Area, or area under the ROC curve, is my preferred measure.

Kappa is a chance-corrected measure of agreement between the classifications and the true classes. It's calculated by taking the agreement expected by chance away from the observed agreement and dividing by the maximum possible agreement. A value greater than 0 means that your classifier is doing better than chance (it really should be!).

The error rates are used for numeric prediction rather than classification. In numeric prediction, predictions aren't just right or wrong, the error has a magnitude, and these measures reflect that.

Hopefully that will get you started.


edited Nov 18 '11 at 12:45
answered Aug 16 '10 at 0:33

michaeltwofish

--------------------------------------

To elaborate on michaeltwofish's answer, some notes on the remaining values:

TP Rate: rate of true positives (instances correctly classified as a given class)
FP Rate: rate of false positives (instances falsely classified as a given class)
Precision: proportion of instances that are truly of a class divided by the total instances classified as that class
Recall: proportion of instances classified as a given class divided by the actual total in that class (equivalent to TP rate)
F-Measure: A combined measure for precision and recall calculated as 2 * Precision * Recall / (Precision + Recall)
As for the ROC area measurement, I agree with michaeltwofish that this is one of the most important values output by Weka. An "optimal" classifier will have ROC area values approaching 1, with 0.5 being comparable to "random guessing" (similar to a Kappa statistic of 0).

It should be noted that the "balance" of the data set needs to be taken into account when interpreting results. Unbalanced data sets in which a disproportionately large amount of instances belong to a certain class may lead to high accuracy rates even though the classifier may not necessarily be particularly good.

Further reading:

https://www.cs.auckland.ac.nz/courses/compsci367s1c/tutorials/IntroductionToWeka.pdf
http://en.wikipedia.org/wiki/Receiver_operating_characteristic#Basic_concept
http://en.wikipedia.org/wiki/Information_retrieval#Performance_and_correctness_measures

edited Mar 19 '14 at 16:30

projekt-fisch
6411
answered Feb 4 '14 at 11:31

Hybrid System
<hr><hr>
Qn: How to read the classifier confusion matrix in WEKA

Sorry, I am new to WEKA and just learning.

In my decision tree (J48) classifier output, there is a confusion Matrix:

a    b   &lt;----- classified as
130  8     a = functional
15   150   b = non-functional
How do I read this matrix? What's the difference between a & b?
Also, can anyone explain to me what domain values are?
classification weka decision-tree
shareimprove this question
edited Dec 12 '13 at 17:01

Sam Rad

Ans:

Have you read the wikipedia page on confusion matrices? The text around the matrix is arranged slightly differently in their example (row labels on the left instead of on the right), but you read it just the same.

The row indicates the true class, the column indicates the classifier output. Each entry, then, gives the number of instances of <row> that were classified as <column>. In your example, 15 Bs were (incorrectly) classified as As, 150 Bs were correctly classified as Bs, etc.

As a result, all correct classifications are on the top-left to bottom-right diagonal. Everything off that diagonal is an incorrect classification of some sort.


edited Oct 23 '13 at 16:19
answered Mar 5 '13 at 1:28

Junuxx
<hr>
I'd put it this way:

The confusion matrix is Weka reporting on how good this J48 model is in terms of what it gets right, and what it gets wrong.

In your data, the target variable was either "functional" or "non-functional;" the right side of the matrix tells you that column "a" is functional, and "b" is non-functional.

The columns tell you how your model classified your samples - it's what the model predicted:

The first column contains all the samples which your model thinks are "a" - 145 of them, total
The second column contains all the samples which your model thinks are "b" - 158 of them
The rows, on the other hand, represent reality:

The first row contains all the samples which really are "a" - 138 of them, total
The second row contains all the samples which really are "b" - 165 of them
Knowing the columns and rows, you can dig into the details:

Top left, 130, are things your model thinks are "a" which really are "a" &lt;- these were correct
Bottom left, 15, are things your model thinks are "a" but which are really "b" &lt;- one kind of error
Top right, 8, are things your model thinks are "b" but which really are "a" &lt;- another kind of error
Bottom right, 150 are things your model thinks are "b" which really are "b"
So top-left and bottom-right of the matrix are showing things your model gets right.

Bottom-left and top-right of the matrix are are showing where your model is confused.


answered Oct 28 '14 at 19:14

Mental Nomad
<hr></pre>
<br>

</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java NLP bookmark"
title="NLP links">
NLP Links
</span></summary>
<hr>
<pre>
https://www.uclassify.com/
uClassify is a free machine learning web service where you can easily create and use text classifiers.
We offer generous licenses, you can make 500 free calls per day!
Join 41022 developers and bring machine learning into your project! We provide simple and powerful JSON and XML APIs that allows you to use, create, train private and public classifiers
We love machine learning and so does our community who have created 3824 classifiers! Sentiment, Topics, Language detection, IAB, Mood, Gender, Age and Myers Briggs are some of our most popular and many are available in multiple languages!
<hr>
http://text-processing.com/
Natural Language Processing APIs and Python NLTK Demos:
Natural Language Text Processing APIs

The Text Processing API supports the following functionality:
	Stemming & Lemmatization
	Sentiment Analysis
	Tagging and Chunk Extraction
	Phrase Extraction & Named Entity Recognition
	The APIs are currently open & free, but limited. If you'd like higher limits, then signup for the Mashape Text-Processing API. If you have any questions, please checkout the FAQ or the StreamHacker blog.

Python NLTK Demos

You can also see demos of all the API functionality:

	Stemming Demo
	Sentiment Analysis Demo
	Tagging and Chunk Extraction Demo
	Tokenization Demo
</pre>
<hr>
<br>

</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java NLP bookmark notes"
title="Mallet: Link / notes">
<pre>
Quick Start				http://mallet.cs.umass.edu/quick-start.php
Document Classification Quck Start	http://mallet.cs.umass.edu/classification.php

MALLET is a Java toolkit for machine learning applied to natural language. It provides facilities for document classification, information extraction, part-of-speech tagging, noun phrase segmentation, general finite state transducers and classification, and much more---all desgined to be extremely efficient for large data and feature sets. Although quite mature in functionality, documentation is still sparse.

The toolkit is Open Source Software, and is released under the Common Public License.

From the dev guide:

Document Classification Developer's Guide

MALLET provides a simple interface to a large collection of classification algorithms. The examples provided here include some of the common tasks required to add classification techniques to your software.

All classifiers (MaxEnt, NaiveBayes, DecisionTree, etc.) extend the Classifier object. Each type of classifier has its own trainer class, all of which extend the ClassifierTrainer class. In this example, we train a MaxEnt classifier using a list of training instances (for information on creating instance lists, see the data import developer's guide).

Allows saving trained Classifiers; allows using multiple algorythms (Naive B. default, also
has options incl Max Entropy/C45/DecisionTree/others) see http://mallet.cs.umass.edu/classification.php

In addition, MALLET provides tools for evaluating classifiers.

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 

Prof. Andrew McCallum
Computer Science Department
University of Massachusetts Amherst

(guy behind MALLET)

<a href='http://www.cs.cmu.edu/~mccallum/bow/'>Bow</a>: A Toolkit for Statistical Language Modeling, Text Retrieval, Classification and Clustering

Bow (or libbow) is a library of C code useful for writing statistical text analysis, language modeling and information retrieval programs. The current distribution includes the library, as well as front-ends for document classification (rainbow), document retrieval (arrow) and document clustering (crossbow).

Bow Library Front-Ends

Provided in the library source distribution, there are currently three executable programs based on the library.
Rainbow is an executable program that does document classification. While mostly designed for classification by naive Bayes, it also provides TFIDF/Rocchio, Probabilistic Indexing and K-nearest neighbor.
Arrow is an executable program that does document retrieval. It currently only performs simple TFIDF-based retrieval.
Crossbow is a an executable program that does document clustering (and also classification).

Src code: http://www.cs.cmu.edu/~mccallum/bow/src
The code conforms to the GNU coding standards. It is released under the Library GNU Public License (LGPL).

</pre>


<p>
</div>



<div dojoType="com.trivedi.oPls.mPane" tags="java NLP snippets"
title="Snippets of some Mallet classes to @Override">
<pre>
As the process moves thro the pipe; the instance data can change type from 1 data type to another.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
/**Alphabet.java
 *  A mapping between integers and objects where the mapping in each
 * direction is efficient.  Integers are assigned consecutively, starting
 * at zero, as objects are added to the Alphabet.  Objects can not be
 * deleted from the Alphabet and thus the integers are never reused.
 * 
 * The most common use of an alphabet is as a dictionary of feature names
 * associated with a {@link cc.mallet.types.FeatureVector} in an
 * {@link cc.mallet.types.Instance}. In a simple doc classification usage,
 * each unique word in a document would be a unique entry in the Alphabet
 * with a unique integer associated with it.   FeatureVectors rely on
 * the integer part of the mapping to efficiently represent the subset of
 * the Alphabet present in the FeatureVector.
 *
 * @see FeatureVector
 * @see Instance
 * @see cc.mallet.pipe.Pipe
 */
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
Text2Classify.java:
	while (iterator.hasNext()) {
			Instance instance = iterator.next();
			
			Labeling labeling = classifier.classify(instance).getLabeling();

			[StringBuilder] output.append(instance.getName());

			for (int location = 0; location < labeling.numLocations(); location++) {
				output.append("\t" + labeling.labelAtLocation(location));
				output.append("\t" + labeling.valueAtLocation(location));
			}
			out.println(output);


- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
Text2Vectors.java:
/**
 * Convert document files into vectors (a persistent instance list).

		ArrayList<Pipe> pipeList = new ArrayList<Pipe>();

			// Convert the "target" object into a numeric index
			//  into a LabelAlphabet.
			pipeList.add(new Target2Label());

			// Set "data" to the file's contents. "data" is now a String.
			pipeList.add( new Input2CharSequence(encoding.value) );

		// Tokenize the input: first compile the tokenization pattern
		tokenPattern = Pattern.compile(tokenRegex.value);

			// Add the tokenizer
			pipeList.add(new CharSequence2TokenSequence(tokenPattern));


		// So far we have a sequence of Token objects that contain 
		//  String values. Look these up in an alphabet and store integer IDs
		//  ("features") instead of Strings.
			pipeList.add( new TokenSequence2FeatureSequenceWithBigrams() );

	// write vector file	ObjectOutputStream oos;......
	oos.writeObject(instances);
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
public class Instance{
	protected Object data;		// The input data in digested form, e.g. a FeatureVector
	protected Object target;	// Output data; often a label associated with the instance
	protected Object name;		// A readable name of the source, e.g. filename
	protected Object source;	/* The input in a reproducable form, e.g. enabling re-print of
					 string w/ POS tags, usually without target information,
					 e.g. human-readable sourceinformation, such as the original text */
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 

package cc.mallet.util;

import cc.mallet.types.*;
import java.io.*;

public class InstanceListPrinter {

	public static void main(String[] args) throws Exception {
		InstanceList instances = InstanceList.load(new File(Paths.get(System.getProperty("user.dir"), "")));

		for (Instance instance: instances) {
			System.out.println("Name: " + instance.getName());
			System.out.println("Target: " + instance.getTarget());
			System.out.println("Data: " + instance.getData());
		}
	}

}
</pre>

</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java oPls bookmark backups"
title="Git links">
	<br>

        2017-11-03 All <a href='8efbb2dc3640cbc7a2822c63cbff70f1'>java PDFs</a> upto 11.03 (9mb zipped, ~12 mb .64)<br>
        2017-10-26 Earlier <a href='df0570a17637d99c1598a80679ae10f3'>archive</a> (Java articles: 3 files ~10Mb, 1 4 mb)<br>
      Gist w/ <a href="85389fb428532a19ef416a6ecc4265d3#file-dzone-articles">PDF file</a> of DZone java articles
<hr>

    <br><a href="6cc10a7b4d38286d822d77678da99611">ecj</a>
    <br><a href="c74b6cd119cfb9d44c65e97167dc6e7e">deco</a>

    <br>FT news srch critera: ANOTHER GOOD POSSIBILITY: search for FT "Stories" e.g. -> http://infoweb.newsbank.com/resources/doc/nb/news/137A82918C6C5FC8?p=AWNB
<hr>

&emsp;
<br>02.18	&emsp;<a href=""></a>More LRB articles (we're now upto, not inc, - https://www.lrb.co.uk/v37/n04/contents Feb 2015)
	7f9b4e7b7595d9d8b8b3a8f62a2fba4c

<br>02.16	&emsp;<a href=""></a>FT.exe & sys.exe			2692af74e654dc31552b9e7d81950fbc
<br>02.16	&emsp;<a href=""></a>FT+other arts|430k words|11/16 upto today Note: Desi arts don't have "Please do not..." etc., so best to split on "Copyright:"
	6f9295453cc79f8f410fe6ef73e79ccd

<br>02.15	&emsp;<a href="750f3aa64d8bad54394754c22e499124">ANSI_to_UTF8.txt notes</a>			
<br>02.15	&emsp;<a href="7567a060ad769e84a256890eb41736db">today.nyt</a>
<br>02.15	&emsp;<a href="caadf39a8d6ba65e20e614df320646ee">LRB art</a> imports (incl earlier link) 	
<br>02.14 &emsp;	<a href="a01c56cd3a0ce4b6d0b0afc9f77e6117">SYS.bin</a> eod				
<br>02.14	&emsp;<a href="67d7f03a82a372d1e64d5cd889fdd1dd">FT</a> eod redux w/sel arts	
<br>02.13	&emsp;<a href="e5c95d95614a79bbb6299f25297edb2f">updates</a> ~100K (src updated; added new shell; blt StopWords & wordlist)	
	
    <br>02.10 &emsp;crypto work <a href="9b992afedf238af78f219b8db8cd38c2">pbe</a> & <a href="fb1663cfab479ed340ed7b8f2cc295d5">also</a>
    <br>02.07 &emsp;FT <a href="d62c1a7d20173d8f42e5b2768359994d">runtime</a> & <a href="d988311d06740243f5f3f631373d5f20">update</a>
    <br>02.05 &emsp;Feb sys contains <a href="1e436ff4c9186d09209f0ac6613c091f">FT db</a>
    <br>02.04 &emsp;All <a href="1eb3ec4794203655654835472cff6fcb">unproc FT arts</a>
    <br>02.04 &emsp;All <a href="2bb54f1d121ee1d56ba40c8cc714866b">art leads</a> (excludes FT coz we won't be tagging these)
    <br>01.27pm &emsp;<a href="9a7b2e8638fb4940aa2ec1bdf362fec9">added pubDates/titles</a>
    <br>01.27pm &emsp;raw <a href="704829f3def1623187fd2769439e7f11">FT imports</a>
    <br>01.25 &emsp;<a href="fc0d231c1edee4269e4df6fd935284eb">old tagger</a> to update the tags / reset before rebuilding the incremental Classifier
    <br>01.19 - 01.24 &emsp;<a href="7e5518bb522eb55430d53ecb9b692e64">mallet work</a> begins 
    <br>01.17pm &emsp;<a href="9b4256e35578ec3009562ed687b0bc25">sys w miniTag db</a>, admin etc.
    <br>01.06 db &emsp;<a href="9fa31f7f5df3cc4269aef0357a4d32df">reconciled</a>; poss impDat on 07
    <br>01.04 &emsp;<a href="2ffc81db7736b10736c9fce07f48a874">earliest dat</a> for yr 
    <br>11.19 &emsp;<a href="0c5d963a4b96ab192cd2f1457ba130c3">links to imps</a>
    <br><a href="b9dccfc258a126cc520c4117da073c8a">shellv3</a>
    <br>art <a href="bc56b37390da5780f5ff4901e7811258">archives</a> 
    <br>src <a href="fc3ab5b8a3e33028b524707b26dfe512">11.17</a>
    <br><a href="170bc8043ff368cd73bc6e5f9ab41746">shell v5</a>
    <br>11.15 &emsp;<a href="0409edbfc6a3de69217042c657bc8635">refactored</a> sys
    <br>11.05 &emsp;has <a href="bfb2599b61d669a3f5980408f3d40b91">reduced</a> arts
    <br>To read: https://www.nytimes.com/2017/11/17/realestate/peek-inside-new-york-citys-glamorous-apartments.html
    <br>Selected Newspapers (FT/Times/Guard/Obs) 2016 > 2k
    <br>Covered first 1500 results; remaining: Showing 1,501-1,550 of 3,827 Results
    <br>Sort: Oldest matches first Page Options
    <br><a href='http://infoweb.newsbank.com/resources/search/nb?page=30&p=AWNB&b=results&t=pubname%3AFIN2%7CEGLL%7CEOLL%7CLSTB%7CLTIB%21Multiple%2BPublications&maxresults=50&fld0=alltext&val0=%28NOT%20goal%29%20AND%20%28Not%20score%29%20AND%20%28NOT%20wicket%29&bln1=AND&fld1=YMD_date&val1=2016&bln2=AND&fld2=lexs&val2=&bln3=AND&fld3=wct&val3=2000-999999&sort=YMD_date%3AA'>srch criteria</a>
<p>  
    <hr>
<br>20171009&emsp; <a href="6b20768e83e2a19d0325dc49df0611d7">only src & batch files</a>  
<br>20171009&emsp; <a href='5d1e7b8cff20cfbeb3ddcce7c170db53'>dat file</a> 
<br>20170922&emsp;  <a href='8f1e7e1256d756d3ae5f3c1a74fd0ec7'>processed</a> articles (w/headers) incl jan-may and some others; also all reading links within links.html
<br>20170925 &emsp;<a href='0a897656415eab565b0f405798dac28e'>links</a> to all imps
<br>20170131 &emsp;<a href='3c592cef946a878b743811dda8538876'>animation tests</a>
<br>20170503 &emsp;<a href='ae86e888f599405baba106743838d9be'>archive</a> - 9mb, but contains evertything, incl Platform src; jface stuff; java openJFX src
<br>20170225mpt&emsp; <a href=" ed8110e936097e6c3e42e771259269b4 ">testShell.java</a> incl. mDialog & mAlert classes
<br>20161227mpt &emsp;<a class='mHK'  href="/8fb48f6b3964e7625cce00e3336a8afe">mData.txt</a>	
<br>20161207 &emsp;last <a class='mHK' href=" 20161207mpt">bookmarks</a> (12/07)
<br>20170223mpt&emsp; <a href="164f83ae9df3d2143d9e78d4673ae642/raw/a59f4362f089f6c1c7c3aa5755735e82fbe81e8f/gistfile1.txt">testFx.java</a>  2:30pm test to instantiate a non-imported class (controlsFx) 
<br>20170222mpt&emsp;<a href="9c12c3e4c5ce2a2f949f4afe857ac592">mikeT.java</a> w/ new internal classes
<br>20170312mpt&emsp; <a href="96cfeaa8975c88e888fbb88e6a21ae37">mM, mD, mT 64</a><br>
<hr>
reading (<a href="561681487d5f6581d535bb78dff99d4e">Jan-May 2017</a>):
<br>
reading: (<a href="1f0121d2cbdab78f1965ae830e08d25d">nabokov/stoic</a>) needs to be tagged
<br>
9/21 oplus <a href="0239529b520968ba97cd41f39ba8ea0c">3p</a>
</div>



<div dojoType="com.trivedi.oPls.mPane" tags="java oPls bookmark backups"
title="backApes etc.">
on PostImage -> <p>
<a href="https://i.postimg.cc/FH426pZV/image.jpg">904?</a><a href="https://i.postimg.cc/pLJgMjcb/image.jpg">904?</a><br>
<p>

<a href="https://i.postimg.cc/RFC9Hk8Z/0917dat1.jpg">0917dat1</a>&nbsp;
<a href="https://i.postimg.cc/1X2Zbfz8/0917dat2.jpg">0917dat2</a>&nbsp; 
<a href="https://i.postimg.cc/1RjP8YKy/0917dat3.jpg">0917dat3</a> &nbsp;
<a href="https://i.postimg.cc/26HYFHRF/0917dat4.jpg">0917dat4</a>&nbsp;
<p>
<a href="https://i.postimg.cc/vDF83C9V/aug_fin.jpg">aug2018 sys backups</a>&nbsp;
<a href="https://i.postimg.cc/jdPytbMB/junjul_fin.jpg">junjul2018 sys backups</a>&nbsp;
<hr><p>
on imgur -> <p>

<a href="https://i.imgur.com/qaGiQTI.jpg">0904 dat backups</a>&nbsp;
<a href="https://i.imgur.com/XwMBdiSg.jpg">0904 dat backups</a>&nbsp;
<a href="https://i.imgur.com/63ScsV6g.jpg">??</a>&nbsp;
<a href="https://i.imgur.com/BxWaxC0g.jpg">??</a>&nbsp;
<p><br>

0904 dat backups: 
<a href="https://i.imgur.com/UNnzygY.jpg">1</a>&nbsp;
<a href="https://i.imgur.com/FFid2IJ.jpg">2</a>&nbsp;
<a href="https://i.imgur.com/jKK689V.jpg">3</a>&nbsp;
<a href="https://i.imgur.com/ljlsatN.jpg">4</a>&nbsp;
<hr>

	backups from 2018.11.05 ->
		https://ibb.co/fpNFq0
		https://www.turboimagehost.com/p/39619698/angry2018.11.05.jpg.html
		https://i.postimg.cc/fk43wMR1/angry2018-11-05.jpg
		https://www.mediafire.com/view/h8hh7b1sd998t51/angry2018.11.05.jpg/file

	1106 -> https://postimg.cc/K4CBpnh6
	1113 -> https://postimg.cc/qtVXSDk7 (sys)
	1127 -> https://postimg.cc/62Gq37gG (sys)
    jdk11 runT => https://postimg.cc/gallery/2ru9gqoqw/
	1205sys-> https://postimg.cc/GHBpmqc1
    1209sys-> https://postimg.cc/kRv6Q1vc
    
EOY sys:
https://www.turboimagehost.com/p/39948779/angryEOY.jpg.html
https://ibb.co/1vk2FFg
http://www.mediafire.com/view/hzrid4xffvy33vd/angryEOY.jpg
https://postimg.cc/D48JMt9f

newKeys.txt (03.23.2021)

TW90VnVsY25KICsgWnVsZmlrYXJBbGk=  
pubKey ->6DXSFA3zgQ4J5jtCnillOm+9XIocFeL5QHbPP7PX6gG3R2tk48nLmNZXpfPTJV/0

VG9ybmEgKyBZWU9ERA==
pubKey ->
ONtdZwKDPh3GNFZ1M/icHFyb+XEcymcvlM/qHxiVvZYBODb9kTO0K/AXguAK1xPq

Qm9uTW90ICsgQ0RJQ29s
pubKey ->
efn3bFR0vRpPQMvjw8tPDro0AxRbPeFBItrXm3Var1pCRF8wjVFukZcCEEfx1Rhi

WVlPQkQgKyBSaW5nUmFpbkxO
pubKey ->
xtG/CwyyLGrXb8r74Z9mNNjcfyO21FcTbKwrkBJbluH+jOmD7+8zLTyx4/kmFziF

IyMjRCArIFBybkhhbWVkRk4=
pubKey ->
kg++aBbhtlLkgpyxlPNFViZzYezhU9a3op7SqnsOYLMQ7jdj3guRfUaNWyfxIbn+

TW90VmVobSArIFNDU3dpbQ==
pubKey ->
D3YKQJ/pVuaSUBd/Ca0BWIZR3cOqSBeGJszkVAUb7eAvO1s8uZODTk4crynxhJf8

WVlPQkQgKyBHdXN1ZGFyc2tpRk4=
pubKey ->
w1zwoJR36BB6oSsulf17WV+qiSLKgQegPoVM9E4XMlvKLjo4cBH2QtqqOEvO7ico

WVlPQlMgKyBQcm5IYW1lZEZO
pubKey ->
boffc8kdofgI2RbcBlUDEtgBO3VazRCizX4tBnBpnmKFXnBwUF/vutcYrtJ0z6WL

TnVtcGllICsgUnVuS2FsYW5kYXJMTg==
pubKey ->
M03mZ1zG4wxHQEFmNpZS2nFbw7noNsolNU0NDAMQ5kVfjK2z8Apvd99NFRCVuq/s

SmF6SmFzd0xOICsgWVlPQkQ=
pubKey ->
+q41/XAMnJbdaItjaZQg9NrQ9ZKzpC/GSZg2iXe3mwWiGGZZ4uaRtvSbEZ9lfPOy

TW90UmlvdCArIFNDU3dpbQ==
pubKey ->
yeHkYo9h4CZXB1jOvilCpXpX5XM2M7qLVVFJfo0r/4Zna+K3rU7qLbEWeB7obPfe


Auth keys (doubles) rids ->
TW90Qm9zcyArIENESUNvbA==
IyNSZWlTb2wgKyAxMDBFRE9vaw==
UnVuS2FsYW5kYXJMTiArIEhlTU1ERA==
TW90VnVsY25KICsgWnVsZmlrYXJBbGk=
TW90VnVsY25KICsgUk1HU0hvdXNl
Qm9uTW90ICsgQ0RJQ29s
SmF6SmFzd0xOICsgWVlPQlM=
VG9ybmEgKyBZWU9ERA==
WVlPRCArIFN1Y2hldERvcHBsZTQ=
TW90S2FsYW0gKyBUcmlrZUJrQ29s
VHJpa2VGb3JlQ29sICsgTW90U3VyUGVp
Q2hlcnlsICsgTW90RGVwdWlz
WVlPQkQgKyBSaW5nUmFpbkxO
IyMjRCArIFBybkhhbWVkRk4=
TW90VmVobSArIFNDU3dpbQ==
VHJpa2VGb3JlQ29sICsgTW90S2FsYW0=
TW90Qm9zcyArIENoZXJ5bA==
IyNSZWlTb2wgKyBBdXRBcmthZHlMYXN0
R3VzdWRhcnNraUZOICsgWVlPRA==
MTAwRURPb2sgKyBOdW1waWU=
TW90VmVobSArIFN1cmx5Q29s
WnVsZmlrYXJBbGkgKyBNb3RWZWht
TW90QWNuZSArIFp1bGZpa2FyQWxp
VHJpa2VCa0NvbCArIE1vdFJpb3Q=
V2FyYmxyICsgTW90RGVwdWlz
SmF6SmFzd0xOICsgWVlPRA==
WVlPRCArIE1hZFZsYWQ=
SmF6SmFzd0xOICsgIyMjRA==
WVlPREQgKyBUb3JuYQ==
IyNSZWlTb2wgKyBSdW5LYWxhbmRhckxO
V2FyYmxyICsgQm9uTW90
TW90U3VyUGVpICsgWnVsZmlrYXJBbGk=
TW90U3VyUGVpICsgQ0RJQ29s
QXV0QXJrYWR5TGFzdCArIE1NRERPZGlwdGk
WVlPQkQgKyBHdXN1ZGFyc2tpRk4=
WVlPQlMgKyBQcm5IYW1lZEZO
TnVtcGllICsgUnVuS2FsYW5kYXJMTg==
SmF6SmFzd0xOICsgWVlPQkQ=
TW90UmlvdCArIFNDU3dpbQ==

sphinx(TM) Encrypted File Format||keyPatch.spx||u+FymDfcL28oG9MkvFEEZoyU6pFo
dJrhLwv/MK1he5NAzHD2dYovxTCHV73BKwLJqbZ0jmIYYuuawRMGp2g66Q==||RG9sbHkgUGFydG
9uJ3MgYW11c2VtZW50IHBhcmsNCglUd2lnZ3kNCk5hYm9rb3YNCldobyBhbSBJPyAoYm9uIE1PVC
ArIEZpbml0cyArIFlPQlMpDQo=||Qz2ly1MgXMFyBo2+IynKp5iJOE42vtlWO21K42+5aNDl4fgN
ogWYdT555Hpp6rA77KRJbAw823jBXyslwiWxINBbao9KS6moS2UtHresuNPRhadqa46VEvip0pdc
7HblnfceWrgpr9uXlXoP4PPWnYWNtIqtmD1Zb7/Nl/Xtk8jUoqar4qOL2SnPuxDnY81xCZ6RnstF
SpmhP50vitIiVbEkIWz8zpK03p3P2ixKyhYKgNpGVWVPyVA80nf4te6UEM/UUmiL2zg953qHHdVY
ut4XcnNVqDp4mhsoC+KtDrB5zM0GqhNm+cYG+X8074IgwlYuPirr9zzvxVtkEjeYfsSmrGa0p8Te
pt2gOT3srB5GFIUpVffQux1mIjSQ5Auf5Rwg+/6ifc50kknO/mGbGcajQ93H2s1ahsNesN4zLeDT
Sp4G97hPeTFpgjSuTzjxe4Wxe560lBHZtB1t1MliQQ+7JlVWg5ORx2nOpt4PVNGhv6cwbtfqvogM
jJ3yj4tDfqaMLwbKFxLDAaDaMggmb1uptygetojA955tyWsgQkeuVcYVz3NtYmHuCv1rfp513m26
Jhw1vkbSs7yNTgslj4T4OtQ7yK/e83/k7UtsxJhIfAHeDBItobLB1kxPvyrdY/1/02acty5WQUDt
jLKuxUhAFzRM+L+myo5bb1gTPjQ2X9uIZ/lYOZ8H3nFWXt5j5YUCbXm1Xm1WLd9nQcgQC4lt/MVU
kIUwkgXdYed4pHJ3elH6ExIWBJPStolmFtGoa+RdIagwBaBXXfbtVuFel5bvbgMum1McnJ3JBbVA
es+o+GyUnXv++Ouu9OQ1j7e4oTZJ9yuFS0p/xtLTyPxOWIyghF11h1sYMj8FwUq3SGrq4DTMjoVV
KTeKx0l7g0lRJ4VE5Lqq2NuGL1fbI4PssmyQRXJjWEfSZ/Xo98oapUGbmEsMhjbLfDINoM5YPFUe
TJkYGmpPBoXwWsj5wA5AQ07dMDEGQXJ51HovoUiqd8CJVKbWdbVqAsKHDOFXF71lah2vK3QvzNO3
zpUL6/O8OIGQ38oIqfL3wAIK8mPOmklMorRJvChJ+7AS3jPQSN4cDlxFW9EqyVZrkzM+dAQwKPtX
OrwFJq5eE0uzTWDbycPCwZh7Va+3QE+nDBimH4ZKsJkUk/nMSMWkJX86DlzJg2uXD1L+pXXH58zY
CCJGJ4CfyLA5E97qMbFgUpoSnhDXPAgVOWy/DoRu54i9DKqjCqNwBGGSs4N0fp2wbHNz4JFKBiS+
FHkHT5DXqiK6Fi9U5ZQIYftojjRBjFErT4ijH8STNhoJEQim64OdIUTfZJ8xrpBqE6MXJyWqoQEt
q3dOhe7ZAh5N46m48Wh9obycGnIAXxHwT/cldSaLkDHWuiGQ+9EVu2a80BF1TaTinGz337oRCTDu
swsWAOrB18xkaFT1shoInb6MdPCIfMvBQjElm9uckWBrSv2TeMNKsciSGF+hbKi6sea/9i17vuVr
ZJoncMlxBnMay3pAFqBqMPGQ44suNKML7Qy4KbysAF5ns38GBDhof6UvUkPBxUydpWZ09THoqfR1
Iem4c27nkgrlrYcMoAiR8wVnhwVGCi93ptmvGBwLi7aqV1IeY3T6eFGQ4LT3HgqvzRLjBKvgo6Qh
F4q5uPuc6Hmj1jgMPrsTYw51edj5W+9QIwrZMWGFm3JH9rvaCX8ltzczI0KqRrG5tpFpPs+mv4kF
Gz+BparjUD6lgD7mbj5v/RZsfeSzDIN5MAN8ug7va8lvZ++S93Gxoyz/NLDh9yKpL5rHWNMuhHJw
I7VtWi/eRSoYszps1I2fyGrkPJfIPrqLZh3aLfFibOgCEWERUbVnajHbJ87/U6FKFt8yBLziaT+S
qWUeX95NSNPzQYIAVLWh76h1jU8Lg8u0SDvktwYG2tSXMk6x9AYpy8yjF6LHmKe/y4mDCGv4VriV
eASftTWcEo1f5TeAsK/pYHvgco3yUMn0XKpUAhBJ9WklsPpJr1QzbqmUCExpxsNhtNYDNifOA0HH
Ls6qSRu1YRRXcjN1prmH5aLI49kQzDi9Lk0FSBkRDL7npJPX9aMjXOnT+J1H+2WOAr6nMQdmzSRF
x+f22xrQRPeh7mVTpUwa/G4gSkjIZbYiA7TrR2b4LE+1fLScJaJe1Cv/mH3OufKoylqUbbo53/8k
yNA93vS+HEazLoxIm0VlyTySam7z3SSNdYHl8SQNjQiRP39+j+R25YOeSIrI+NyvfYM7Vh6xmyor
jXFMMzCCOCtVqVO9gtjP0/PjIfzaiM6CzVsArmcr1PD1YBRgKU8CwKhxxpwChvBb+W/GLBfkiLau
3i94XhFyelL9cvWvY6EdELG/uPrwhECG7yiy6jLtDGu+73Wk63tpbdyZLQEXCxeQ1OfYaElHfn+d
uPSzK6KytIkEX7iuRkidZduOk9kx/j2B0zGNNwya3BbOlTOUKJZhxHj65iUbJRbYufG2QqZX5smQ
3ETFcrJiG2TPKlgiURnSkainIQyUzxljllNIBuR1Wn1VPrqdQeBpUOGwseqOa9rBNMU6/aDNNPCi
ETscxKkr0vvI5sEGjKRlLTuOc7PteObujJyyi8uR+8BfVaK/uWaeBzR2BsRjLeNPEGs1AcM+RIK3
gVRL40jKhBvSlZqex6RLgq+VJ1oTG8zjyOZX/ZCYDjmHPCxWuhU4QsvBZd1Aon1nsitYcZKVwdyG
B/Rk2QR8/tSlVDUlheD2UOyyRlFKiBV2sTv9pnwaUwBr0qqu1o+hu9RovRppksKQ2bd2XSuk0imq
ZQblHT+U/wOVAJLFzNWmqP6dzvKu4eEa1EDR6yzqeBHBk6vwXN1UBS+bD7w/JoGRE2ObePOCi0/n
pNGO7Z0PovNK5POM70tP0lFNcG5D+aZTuUkorAyWx4DiTRElgRhGmS+tw8KID1o1NPDWl8NPq/Ie
g6CmOc7Y859vVKOJci3JmGqyMEMgZ8EcNfdDJgTqHWOfVs9Hh8E1YKtrr2LF0LSXyhQOtgGseciU
ER1wfqxEYaU5DzecFXfJlpI3euCGrDW/kWzy64S+wEvP49bWn3V9sq+uQeKAtT8WMGZ8WIMm+ivy
vyiSvN9Mcmbe68jtvve/Rzh+AInIHWIraznphQeZ7a2yp8k7JwS69ULk8xwUDoiqSeirAkNxNJc1
ftIDeOpYHYw1Fjw4wt01fIRgsHUQmvnAqjcfSCsTpZLfg2zeZitIRFGmcN4e95mQtGHoy0VUj8+p
b8RsMaEkCTxpex1QvBfgjbhW7+Ub6RkL1Jwl0LxlpurAj5hsPR9+kwt5XoG6OWdYKc6AK+TlxOD+
kY2Fpk8khlzBJOg9IyPTDtbdWg8nWEAEJfjcC8WGHnthMaCMEA3wIrRdrSW4VwTdD11QmMd+22Pz
PEUjyUV6eW8siK09SCteHRplWHLLkFhBdAuUhDV5o7Ienm+LFv5Shzmtmta0APt9T0K+MDcjLXUC
VdzkcUnsV5I6Z5Bh5EI/sEjyaKvGmYUWnpuQHxgJkmdGnkmDWfeZh5BHiAHpCGhhzrQx+AopnNi0
sLfjjB+A/a6Db8vcmHsFNvnPcPiu2U9jJ5FJQg4lng4ogmxsDDmt1tLIo+8HhLF0QyD/b3Al1umL
6Qy4W0ESmekTJ8FIh8zXVetkvFOlQSAnSXfdYQd7porImBM3k6nFTHtXD5H4eRkRxZC4kMTrorkL
KIV8qZG1IMOBcJB4ujxrJEK7pmhsZy1JUbYG5BweapCJvpAuKfmB1/dpIKsFlsY/rYbMqANc8h4O
XmF6WhcCeud5htVtaYMdF8UDlwFKpejqrvlO48NA0E2CfOZav40Z4/F+dgiurtBlF9ouT4RVKnwJ
JNIDvNqJzN0o4OGveUjwCt1c0CnoGYKMh9x5Yyf6P8I3XzLo+JpyJxZUjitbK7wWrjcz7RsuKuLU
0STNefLO7HcuIsOmkYuW+OA=


Compilation succeeded - 5 warning(s)
0->BgIAAACkAABSU0ExAAQAAAEAAQCJSNPBLqM8Dwb4/rdWmcWk7zEzJI3trkM2hN70cSzzTs9a4Fc0
HhhQpjCzVJ77ui1RS0wmyEIzI8zxeZWTtC08tcZDQNEdQgjK/Cs8QC9vlOyPbpVOBjm73iFxg3ZR
wqFAvcJQVcQeJ/dZiff8HalH6ArHjPafVyO5CR6MuaNUsw==
BwIAAACkAABSU0EyAAQAAAEAAQCJSNPBLqM8Dwb4/rdWmcWk7zEzJI3trkM2hN70cSzzTs9a4Fc0
HhhQpjCzVJ77ui1RS0wmyEIzI8zxeZWTtC08tcZDQNEdQgjK/Cs8QC9vlOyPbpVOBjm73iFxg3ZR
wqFAvcJQVcQeJ/dZiff8HalH6ArHjPafVyO5CR6MuaNUs//7PnihwLONvBnFTsD9XeYEwkHZA/dI
bsD9VpY9l2rY1s5XrHn7rzRp0vVcFcnRRAP1Wo0vkvIBlYF+odOlgul32wfp0l4q7FaHWMNJwKxL
o9w91AYAeR7c7qNQ3E4T5/3umZQVy7pwulLC7klLEs/774J+oI62qmvBvZSnJ5rEmTrHVQ8PIT36
tt+Z4XYiThhzmqWj3mFyeq2dfFU0sMKCD8324dayEmICvICWEL9MWYheNG4+y7nnZcxw9wLsb4vA
/6RHOUKCoFtQVgfLzqiC2926ZYkhEjOYfX7MzTQM1O/nftCNY01JqC8A2pcEUBaWxgiKrVHJ7ani
KkU5rQeE6RoCBGqEowfLOIaQENT3aFxTVfaRZBTu1h1zWflow075WVa/YjttV1BCgJI4KkxRM3qw
NDunIboNxPKCXBdJ7WRPyQczF9avD4X6nHEGVcDxy2oahQphP0ghZwJt3kEeFzo0VQRnO8I3Iu9P
Fsug8ktiIvwLVfi0UiWZN2CX9YUUd043wXETnz61DSE//hJfTGE6EW4n9V5hf2plFt98YnEyJavp
28vvuAXtiYpMnz7DkZkuXaXmoPvKfWP7tFM=
1->BgIAAACkAABSU0ExAAQAAAEAAQDh8dNtXuSefWAzdn8PUe82DrflY4o7ixRfKmXMH98r+bQIHIc4
l3rnmBBnafHR9Fmv1nuHszF43THqr91dIggx8gP9MrOr5RBVLLIEEt/CYuOg1N39yl++ZcBOP0i/
XU+VIIGbTmCuXRb+gNQ0tJsfviODk0X1I4DPCzkVtbjyig==
BwIAAACkAABSU0EyAAQAAAEAAQDh8dNtXuSefWAzdn8PUe82DrflY4o7ixRfKmXMH98r+bQIHIc4
l3rnmBBnafHR9Fmv1nuHszF43THqr91dIggx8gP9MrOr5RBVLLIEEt/CYuOg1N39yl++ZcBOP0i/
XU+VIIGbTmCuXRb+gNQ0tJsfviODk0X1I4DPCzkVtbjyijU55RgEKOmwQDVvOqJ2btlmZAKsBLsQ
b5HvJkCIXp+dFP4XRCZgf1IcdBOgKcUMHfgFpe1EpZGxN92DsoX0YOl9V16msT3l9FGnyVE8pRuI
wXndtqRtO19x4mELPOO3/o+oL9ptZDyi8Bl13DmwZWr5Qayn9hFzpB2SHw5OkmqYgbbE9czfeJmM
Miuy+hXthxjpmBPtPycIlnTxeB4FAQ6X5AR+mEzb4nBhk5QkhYC0aXBtyXXfUOi2DrQKRa6EL70R
7nhv13nxkd9mly4N9VkQqR+nuazKDl45fvIkD7CH248nTuRP8QEtQ9FrTgulHLLuHBm6uEY3vKDp
+bSEDAICJTiBsjqzWKifcesNMbCfqlj/i9hdDKFvo4AYzdfpIFz4wMlCrYaxh4C7xXtj7M9/ZhQJ
Tky9bgMB1TFs1u7awc+yN48dJlUN5fuVcGDmdK3JkWkkX/kqut0xoDzSzBH0uFr2ZEnu0ssFaj/U
2qhNAWCy5BvwPKTafjAAlilzjdlF21w2gIkEEh1MkQSEUdoXgCH6iw8eHzPnEk3E33ze0B7yeXm3
xhD5oWvVRvT1anaWaaHaG1AqvLqIv0DMEVY=
2->BgIAAACkAABSU0ExAAQAAAEAAQDl3axB4ZTsCmBDfw+d6D7dd5Xr1vp5oBfaWNFDbjuBjs69XWM+
h8GRztu7uCUK7iOis6IamrkL0flYcXXRogrZkePxogmrf7Ek04kEP4Tf4ReaAMoc7R8DHnDV2CPb
YWnKZA0jFEmHA2ouerhpHdBbewkNJZUg3yPHdomPBMq4qw==
BwIAAACkAABSU0EyAAQAAAEAAQDl3axB4ZTsCmBDfw+d6D7dd5Xr1vp5oBfaWNFDbjuBjs69XWM+
h8GRztu7uCUK7iOis6IamrkL0flYcXXRogrZkePxogmrf7Ek04kEP4Tf4ReaAMoc7R8DHnDV2CPb
YWnKZA0jFEmHA2ouerhpHdBbewkNJZUg3yPHdomPBMq4q4no16Mv3EsUGsKNZ+atEp7wWeOPKG7y
tdaqMc19JaI1eiJkBKRHxC0JhdMh73G++4F9VcexC01x9/oW+xAEKbt9+7KZ4P7Q2s2Yk7rljn7U
Gytc0G6YNIv6yzBsuHk/+p1pLoX4dtnwiY7q3QieyaG/TlyedMM4bV2SwvO+GOLqEXp3yr3r9aDQ
+c/g44QaXTmOgg6JMH5spHWqyr4cmnKqHaisRsSKrqdjQXZbQcEFZarOLvnlUVAyx4mVbmYUMcEO
lL4FvCNnQLAqOGfyH0TL5rtzkeYclqtuq9tUrKv17gaZwcBtAbgWJSRbGjXkIHvu0tCmwAvrpzqW
yXVOex+0ZJspicPImaO8Oyd4R4yUXr04CloZl/nKys20xwmwF9JFS19gdye0kwJfftYK3OQ60uJs
2y7W0BeqTkmcZZW2AXRvaSzx43YkdWMt6uDUvvRQa/DZ8uTyCJRkGz+v0daTHGsYrmPkE3gOox47
WN8GxsVK8aJZ98iffxPNDEYCmI550gWhT3IS/+KBHJJzib0t6xwok0c3GrkewT+TQEAEduTkeI3J
knYVF8HzVRGQjDCBz2oXMyWI3lu1kWCl0Vw=
3->BgIAAACkAABSU0ExAAQAAAEAAQBb8Py1Uueone1w62RJ2vlJEyF5fIYqVupGVhUGpBRJEXGmWnnG
+lVOJVlnOl/YVY4rjW6XY7K9zK0tFiOWAlEX4KpD5TifuYlDXoxfu/NgwkWtJMeofYIkMMbWp7uO
Ie9687eqhQ2QKLEmDhegXlDxFYUNm+W0xctfK5rhjwjfiA==
BwIAAACkAABSU0EyAAQAAAEAAQBb8Py1Uueone1w62RJ2vlJEyF5fIYqVupGVhUGpBRJEXGmWnnG
+lVOJVlnOl/YVY4rjW6XY7K9zK0tFiOWAlEX4KpD5TifuYlDXoxfu/NgwkWtJMeofYIkMMbWp7uO
Ie9687eqhQ2QKLEmDhegXlDxFYUNm+W0xctfK5rhjwjfiONlorjulCx8bd6Zhm5i83xNuzB4gsF8
ScjKZxwoc9ValyKaYSQ6kCzU4kHuJgr9DT5pNy+ahTS7Te32JdOhS7QpFRWSrMCXoWu131D5ZGux
AT2pOtT/fcPe5l4v97OrNtv5BpAx2IJqdoTy/CgfIFwU5nj5f5ivt43W8kswolfCtal2G6NxmuPt
J/kaiUu/1N651X38yZ3WaNwvRiLXESoXWzpjDPSqQZgCRdiouEqsSiVWKm7BAQd6diq7xR3OTekO
ezrGAGukokU7ihOEk8/ITTGSSAlhBFcoS5Z2qR3f+XTZZ2/lgr4RmjKlBLYD+4joeq2XkYqMs63R
zAOtlKF1UZPD+xE99VReJ4SygTbYQgvoQmq+Yi02LYmrAvhdtJLpH3/A73oAlIjFzEttXtdbUzaW
7eCeWXOGrYnw5U0vUSgUZ8uVIznWS7CHAhxGeg3P6F05i55LZgc1qQJlreWC/i0Gvg/HTlMbjHoK
M/dQgJKCnSzAp8tD40OB6FFQsioL1yUazg0nXlypOP23d/pw64TpVUWsiWSqHWbLJgg2xNHrkB1B
qY8b7m/d5bbkbc86nWYfghnRr3DY7QClQ10=
4->BgIAAACkAABSU0ExAAQAAAEAAQCFN9Lm/3M/+fmi95yGYh7tkOWJCf+mJ4Pw9sJAxwsUr4LbVicI
9w0gkxW30XTEjRdxFqw3JapES2uy0PmR3esxPqFq+MwKioplTGyKE91hDFV/EuEOl3xOsErhmyWN
3awGPAk95Yn1E47GMupLE/sB5HiisDbZ2r8oGUybiZ6VqQ==
BwIAAACkAABSU0EyAAQAAAEAAQCFN9Lm/3M/+fmi95yGYh7tkOWJCf+mJ4Pw9sJAxwsUr4LbVicI
9w0gkxW30XTEjRdxFqw3JapES2uy0PmR3esxPqFq+MwKioplTGyKE91hDFV/EuEOl3xOsErhmyWN
3awGPAk95Yn1E47GMupLE/sB5HiisDbZ2r8oGUybiZ6VqZ+qXh53VTX6EpPw0GcRCiRZ57p1g+OC
JiiaFyeNkYGd1nT0t/yPctYBvu6kJLBzeeJ1yAEpczZcbZpyjuJG9OJbz6sJYk3jowiUQQzdte0w
Iq+Tk4AGhtbGt78vSJIVubFOWCYDXYU4r+btSxAdcjwIt+EPN3cQtp8XXdM8u0m/SXUIpQ9A3t3/
ASyj/bHBjy2CWiqQOw4UUfREeJIBWlyPWRFiOvvqtRdoEhjFy9yKJuZs8VpyRTOwJQyzOqn9pCc1
W+Dn8x4TJCj+HmFNFc8xYO7SjnaIyPPoz/9uZ00jcdnNN2exknTfH3exKb5XIUiVm4EXr5x1uCLZ
D6a8Mz5vLerO0FRqKUYrWWz0aJvJimww0xMYl1XgBCFNFw3BSWoOiz9LZvtXQ+gs7Y2tsSlSDEsw
5P9pUAHGBfpHcy9KDfnxAj1MhdO4HYKwAlN1FjVTNOe7K8Ya3DX+qkwytNoxN61Of/LtoVG4L1fq
3JtCnl+YNed52ZCqKBjLAfRWNdK4jWmoPf/0Gy8oXlady/UXWs3Fj4R9IUqD8podiGTwQC/ke/m5
dhv8RIcRdw1Mcc2iWTTV1wOcz7L9BMGZsjw=
5->BgIAAACkAABSU0ExAAQAAAEAAQAb9sO4pICFkBdSgMOfYjIItIG/uuLAP3w+nrHJpQrhyXCavjDk
zx4vBa4ZHyqzbxDVI0Co4/5x0fVN/LG/j+ytKGhWFFAeCXB6O6mCwSefU/rY1OKsJS1FiO44SzLQ
QS3ON9mgIT55AlJZo9AIVwN1WqrmRd9DpKM3Id1Rx8OHtw==
BwIAAACkAABSU0EyAAQAAAEAAQAb9sO4pICFkBdSgMOfYjIItIG/uuLAP3w+nrHJpQrhyXCavjDk
zx4vBa4ZHyqzbxDVI0Co4/5x0fVN/LG/j+ytKGhWFFAeCXB6O6mCwSefU/rY1OKsJS1FiO44SzLQ
QS3ON9mgIT55AlJZo9AIVwN1WqrmRd9DpKM3Id1Rx8OHt9noZz9bkcNAbC5Zus19aMmtnVXpSvez
0t/7lUP5kD/3WK8t96rmEV7Hg4RDwdvQsRn1syf/oCcyfefRPkIuVdwTXj44RSVpDIvFs8I6aTGk
2wFoHqASeV3fzJbXe2xyD6kvkg9scEufeznLa7QchmFWYGl1Za5s33NkJf0tdD3Vyc+GIDzSrUeU
vZriOHfWWFkgxZcWYeCabf2a8ygg9b49YvL9lMtH4l8g/LjOmCXN2A35wmTE3gdDdKe2hTSU14cR
2gJLIkQOti1HgKXlFPdj/7S30isU1hE9OdIt4pGxmycyRJhGTlC/4X3+PN/uPIGc1apOALd6NuVP
oWkr7rrx0Fk8ekJvIGjYb9soVQBW+RBRqnV1zOxb4+nF6rFSpspygSGJXUXQuTsYMZxQnWP7KJzd
oa4oKD5/SgAgkdyTEU1bo3WWWpZenb9oo+WYROWvVmXD3AIBYXoFcTsEyCEKD8lPUJNNEyMMkZYA
CszNmU2BVNahABk5zbS4QvnE48+e2F+R4k3ZpyTVBxv2DuEQgqZUqjE6w/PCMZDNhHuPi/QFKFVo
hl2V2ABB8h2IVr0J1gtZttRSuj9StEmgDWM=
6->BgIAAACkAABSU0ExAAQAAAEAAQBjVdeXYSsssqVrSyZH7C/0Y9IaRiTDAFNqlo2CNN+AsawAO/MW
M+89+N3gAG83ISQ/98iUnNVWoMWjFBodzVGDnhvrBcI+KErvit8SasVuvmVw8dgPaoFtyI2i7kDk
Bqn+JslGyHneG5vOvIZibVmVJS3LABwO6eefxnwXwcHZiw==
BwIAAACkAABSU0EyAAQAAAEAAQBjVdeXYSsssqVrSyZH7C/0Y9IaRiTDAFNqlo2CNN+AsawAO/MW
M+89+N3gAG83ISQ/98iUnNVWoMWjFBodzVGDnhvrBcI+KErvit8SasVuvmVw8dgPaoFtyI2i7kDk
Bqn+JslGyHneG5vOvIZibVmVJS3LABwO6eefxnwXwcHZi1sX5u641S1crg0K5HW4QuiuiRlsqVYQ
aiyc+0uXbkPu2KErTuBrN7vRDHgzEKi0GDpVsMofhxpRlnPp0JKwi6eZILgMn5YuCUnfpQ4OgX8L
3PyeVeddmK2JRsK25LIE2FmMn14NY/mbjSseDlmsfQFlIodrYDr7dLfcDDAB/67VO2GzF2vNEVRz
tBhXBc0TM+HAB5FsRPyNWlgTtw6Tt9BP9jm+HjJw3XZ02HWlLriWv9rMhUWVdme2AofbKYy8OLGZ
1HsGGryS2evv8eabMC6Sv6ydoHYyVGm54MrSS4TZZfCm6tJ9lzh0so6cNRmJ+U/D4/Ssji3O0Z+D
HDWwDlm8BehyPkFOZKPaQg4I2oKc1erGGTaAkNSSiunqUWJXxrCK3NaD336BPmH7OXWnvdU1xiT8
FpB4g1uLdxc3PiFIASd4aNYM2Aoo9k2Nh7X5TtUJ3a1f8H9V12NU3Zfv5FjL0A3M+ClxlZyQJEEP
PDuPeVDnJCxncZtfbnONigTdonJBGh5sNyGHaI9X+x9EKD6NNBT+e7yBa+aHrLlp0xWy4/gS9Rao
vtXzJHyxCrhb979v30dVrlWj05gGhYd3VlA=
7->BgIAAACkAABSU0ExAAQAAAEAAQBR3zAajMfbk9lH5FkBtT0vVq4S5IKFUwb7pvdB9rrXDqeaXZUy
q89iGiW4L6C+kQHmdTw2PDeqcNhcm+usybhNFTtniGDeyPQwTMoe6zYK/D5+MCsBoB2z9o/lBsK5
oIenxj7tDit5bc3wbfYkmgpgtegFZJ7P7yZWqj3UwjSFiw==
BwIAAACkAABSU0EyAAQAAAEAAQBR3zAajMfbk9lH5FkBtT0vVq4S5IKFUwb7pvdB9rrXDqeaXZUy
q89iGiW4L6C+kQHmdTw2PDeqcNhcm+usybhNFTtniGDeyPQwTMoe6zYK/D5+MCsBoB2z9o/lBsK5
oIenxj7tDit5bc3wbfYkmgpgtegFZJ7P7yZWqj3UwjSFi+1f2Ji2LLhiGARDavchPXP9Qzjd3uyL
ZYjpNo1nD/2BXCenVkGgbDxzC35J4FRmZiSSJmLB2trrjulFDu9fibx1KJAHRTUF3LD8aVlZ9QDT
9XCu0sdtiLiRQueYlZNz8BvWRXUElhN/QQH3ztKMlJzVGsdb0R+CBGRI+Rjuw3G9+U41dlqBzPqZ
IW9HMlTEBrNmFH0CH53n6BgWWuUUhsMtX0tZSmp1RTUdOJP4+mRazVueliQJJdMLhb9cpupEt1EL
c4mYMhLW/tS2vl9ERttYpGYcLwgNkO/kzykUQGnUQKVFQvpFhvUduCG/d1H946w7NbpA9DkAyS04
rAEf4Sc3vk4H/DqDgXAUMKG1U+afYA7jLDp8IO4xaWGpLiomEDWCEbS2P+KMRxjoN3tRvbzHP9cG
Jy7GmTID5bV1ml6MUQnkra/vwPo/i5RC1lYQMauOkrQAg06mIhG/f9kCZiPFevM2wFO3/ugZOp2X
B9Wl8OceSpLVxIZBxMDPCU02eP7RpMdHtE2XEmPiNsZOmz8tZzvE7p7lnlJ9kYgqKiVpzaqTeaj6
GkMiHI7Ixuka3LYfdYPOoUtCmLAjNJ4xKj0=
8->BgIAAACkAABSU0ExAAQAAAEAAQBZYQLVgyZFEv4KxEY8icoFC0mFi1+g5qcRgNVNpbYkJUZPvymZ
xRJHJ5cq4ax4uTJ6y3JsJAC0PYlQ70w6Nd7bq3l09UlQKn5oY1Ro+D4W1ouhUEyErgBZ7D7Zzt2L
lYtSZ5yyt8LHkZ6E+gRMTtYO5UBJivE6OrVHdEEHlDLqiA==
BwIAAACkAABSU0EyAAQAAAEAAQBZYQLVgyZFEv4KxEY8icoFC0mFi1+g5qcRgNVNpbYkJUZPvymZ
xRJHJ5cq4ax4uTJ6y3JsJAC0PYlQ70w6Nd7bq3l09UlQKn5oY1Ro+D4W1ouhUEyErgBZ7D7Zzt2L
lYtSZ5yyt8LHkZ6E+gRMTtYO5UBJivE6OrVHdEEHlDLqiGc2JjnhpLwLARIzFKDPa1yuAtZO7P5j
mwu1cd/Z3VhHnFG2mdnshdct/cWf6NgOn8nyDG7LWjyjIKSLx3yhJZU/UqLW4N8vcssU3cBDfWyS
YkryIz4vwLbAfIKeF8VlyIdtbk5giz5rIRhsJ1T3/Yo94a3H1dapfxgB5CY5HwHrbafAEOBAVUsh
K0eSmwvOAzFrQM+LU4Zyzh3qzD7CydkuCMELmBPk60lXrRvxhwafe1eoLcrevoRKd8bZwDDDP0vL
9vnFmJ57JAqseF9vHwavdfQDd00vT6lGkxo5/2CVL2mln/LhBoYWg1SIZQuQLm/G33k0aHymMdgO
oZrKN5d2kEAmbWJKLA15IeIFuzZJhgpnjcqrXbD8IaaMEgp3Bcxkk2f/QEPG7BEmXj8QwlWr7uY7
7C71GULnBk5Cvu9HbXO4xFlmLINr+LrBf7FRt5fqAPVtNBmW7Ouioni/7dCdQrieRHKhdI502Ubw
qV7quu7BBHplL8n5F1U049eml4eEVXTNu3oM5R151FeCvbUeah8msLY5DDS0kk2g2q3OVXAqNNj+
ZIQKw35ekCBUwfghdK5lAfnjwBy9bPc5uig=
9->BgIAAACkAABSU0ExAAQAAAEAAQBHInOwhKicHBGCZmI2e4w3pIS8m5cteQi20hCdZiFqN8LA8uQx
u8JjYOF+u4FnXjcbO9Hkx66cOavJmmAAJILlsN6r73cDbBlXct9dJ926Cy9HIuCVDbX1dd6Q3W0V
L94D30UlefanejsG4Bn0GwRhhMIyjHecyF4tth33mj8A2g==
BwIAAACkAABSU0EyAAQAAAEAAQBHInOwhKicHBGCZmI2e4w3pIS8m5cteQi20hCdZiFqN8LA8uQx
u8JjYOF+u4FnXjcbO9Hkx66cOavJmmAAJILlsN6r73cDbBlXct9dJ926Cy9HIuCVDbX1dd6Q3W0V
L94D30UlefanejsG4Bn0GwRhhMIyjHecyF4tth33mj8A2i/eu7eYDzabyXOYSn7lWbr++SyY5+Pj
uOdjZkwL1Ebuplz+9RHvoA9CIMmKbb5cZCTsyefj4YRhq6G9892SSPFpz9Ol/Ja2A6S1vAa+DGdG
LmyqQcyznSMeCwcg0rHZBrbUHWrZbTuHeBXDdmzesn7ck/iduRzXJM+DwbaUI0znk5sKRTXVoF2G
LlwCq2ugG4flpgR+bi0H4vKW5uQoaaIQzEelyBcivykY/yKLB9uvuJWKE/NZynyIPYhGwlMCM6Hq
Jx5KSchLaqJhiQaXN0Kx/4wHlJhNefyEYu0vX3ZF6jnB3VoGsCJdlC+5RRKNqlsrW8gI33PPwoCq
eXIBSMN1RlUq/LHVEu7XL+FqczWk7vPGVoKJlKcL52N3YEUILGAE2ocywTDAdYW0IpcQ38NaCCuq
FEotJr7rSeRr5B3wIWMkwEAPq1rOemBeoTbtrJh03qcrHXs0vIoK0P60hsCt8zat9eoYZ6RDSLxU
I0KAKieG0rK8SQOYHgllQ4huMa1pZZgyw4IULQ7JIPFPikUT8KJqpJ7ALqfuQeuGVxScWeWXSGQ0
IOQpmab69ofhvmHlcwU2k1uMwkLx8Hj8slk=

</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java article"
title="DZone: A Hashing Implementation Using java.util.Objects">

by Arun Pandey | Dec. 29, 16 Java Zone<br>
Just released, a free O'Reilly book on Reactive Microsystems: The Evolution of Microservices at Scale.<br>
Brought to you in partnership with Lightbend.<br>
<hr>
<p>
Most applications require an extensive hashing implementation, and writing a good hashing algorithm is
always a tedious job. To get rid of this ugly and tedious hashCode and equals implementation, Java
introduced an API called java.util.Objects in Java 7, which contains a set of utility methods and is useful
in combination with Object instances.
<p>
Now let's see an example to understand this cool feature.
Here, Person is a class that needs hashCode() and equals() method implementation.

<h2>Prior to Java 7</h2>

Using Java 6, we generate the equals() and hashCode() methods using the Eclipse IDE.

<h3>Person.java</h3>
<code><pre>
/**
4 * @author arun.pandey
5 */
6 public class Person {
7 String ssn;
8 String name;
9
10 public Person(){}
11
12 public Person(String ssn, String name){
13 this.ssn = ssn;
14 this.name = name;
15 }
16
17 public String getId() {
18 return ssn;
19 }
20
21 public void setId(String id) {
22 this.ssn = id;
23 }
24
25 public String getName() {
26 return name;
27 }
28
29 public void setName(String name) {
30 this.name = name;
31 }
32
33 /* (non-Javadoc)
34 * @see java.lang.Object#hashCode()
35 */
36 @Override
37 public int hashCode() {
38 final int prime = 31;
39 int result = 1;
40
41 result = prime * result + ((name == null) ? 0 : name.hashCode());
42 result = prime * result + ((ssn == null) ? 0 : ssn.hashCode());
43 return result;
44 }
45
46 /* (non-Javadoc)
47 * @see java.lang.Object#equals(java.lang.Object)
48 */
49 @Override
50 public boolean equals(Object obj) {
51 if (this == obj)
52 return true;
53
54 if (obj == null)
55 return false;
56
57 if (getClass() != obj.getClass())
58 return false;
59
60 Person other = (Person) obj;
61
62 if (name == null) {
63 if (other.name != null)
64 return false;
65 } else if (!name.equals(other.name))
66 return false;
67
68 if (ssn == null) {
69 if (other.ssn != null)
70 return false;
71 } else if (!ssn.equals(other.ssn))
72 return false;
73
74 return true;
75 }
76 }
</pre></code>

<h2>Java 7 Implementation</h2>
<p>
Now let's see the same implementation using Java 7 (java.util.Objects) as below.

<h3>Person.java</h3>
<code><pre>
1 package hashingDemo;
2
3 import java.util.Objects;
4
5 /**
6 * @author arun.pandey
7 */
8 public class Person {
9 String ssn;
10 String name;
11
12 public Person(){}
13
14 public Person(String ssn, String name){
15 this.ssn = ssn;
16 this.name = name;
17 }
18
19 public String getId() {
20 return ssn;
21 }
22 public void setId(String id) {
23 this.ssn = id;
24 }
25 public String getName() {
26 return name;
27 }
28 public void setName(String name) {
29 this.name = name;
30 }
31
32 @Override
33 public int hashCode() {
34 return java.util.Objects.hash(getId(), getName());
35 }
36
37 @Override
38 public boolean equals(Object obj){
39 if (obj == this) {
40 return true;
41 }
42
43 if (obj instanceof Person) {
44 Person other = (Person) obj;
45 return Objects.equals(ssn, other.ssn) && Objects.equals(name, other.name);
46 }
47 return false;
48 }
49 }
</pre></code>

Test the code to evaluate the above implementation.
<p>

<h2>HashingTest.java</h2>
<code><pre>
1 package hashingDemo;
2
3 import org.apache.commons.logging.Log;
4 import org.apache.commons.logging.LogFactory;
5 import org.junit.Test;
6 import junit.framework.Assert;
7
8 /**
9 * @author arun.pandey
10 */
11 public class HashingTest {
12 public static final Log LOG = LogFactory.getLog(HashingTest.class);
13
14 @Test
15 public void testHashing() {
16
17 Person person1 = new Person("xxxx123", "Person1");
18 Person person2 = new Person("xxxx234", "Person2");
19
20 LOG.info("person1 HashCode ==>> " +person1.hashCode());
21 LOG.info("person2 HashCode ==>> " +person2.hashCode());
22
23 Assert.assertFalse(person1.hashCode() == person2.hashCode());
24 Assert.assertFalse("Both are same employee...", person1.equals(person2));
25
26 Person person3 = new Person("xxxx567", "Person3");
27 Person person4 = new Person("xxxx567", "Person4");
28
29 LOG.info("person3 HashCode ==>> " +person3.hashCode());
30 LOG.info("person4 HashCode ==>> " +person4.hashCode());
31
32 Assert.assertEquals(person3.hashCode(), person4.hashCode());
33 Assert.assertTrue("Both are not same employee...",person3.equals(person4));
34 }
35 }
</pre></code>

And test passed as expected. Try it in your next hashing and equals implementation to have better and
cleaner code.<p>
I hope this will add a nice feature to your coding. Happy learning!<p>
<hr>
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java article"
title="How to Create an Immutable Class in Java">

Here, we'll define the typical steps for creating an immutable class in Java and shed light on some common mistakes made while creating immutable classes.
<p>
  by Hussein Terek       Dec. 12, 17  Java Zone Analysis
<p>

An object is immutable if its state cannot change after construction. Immutable objects don't expose any way for other objects to modify their state; the object's fields are initialized only once inside the constructor and never change again.
<p>
In this article, we'll define the typical steps for creating an immutable class in Java and also shed light on the common mistakes which are made by developers while creating immutable classes.
<p>

<h2>1. Usage of Immutable Classes</h2>

Nowadays, the must-have specification for every software application is to be distributed and multi-threaded applications always cause headaches for developers since developers are required to protect the state of their objects from concurrent modifications of several threads at the same time, for this purpose, developers normally use the Synchronized blocks whenever they modify the state of an object.
<p>
With immutable classes, states are never modified; every modification of a state results in a new instance, hence each thread would use a different instance and developers wouldn't worry about concurrent modifications.
<p>


<h2>2. Some Popular Immutable Classes</h2>
String is the most popular immutable class in Java. Once initialized its value cannot be modified. Operations like trim(), substring(), replace() always return a new instance and don't affect the current instance, that's why we usually call trim() as the following:
<p>
<code><pre>
String alex = "Alex";
alex = alex.trim();
</pre></code>
<p>
Another example from JDK is the wrapper classes like: Integer, Float, Boolean         these classes don't modify their state, however they create a new instance each time you try to modify them.
<p>
<code><pre>
Integer a =3;
a += 3;
</pre></code>
<p>
After calling a += 3, a new instance is created holding the value: 6 and the first instance is lost.


<h2>3. How Do We Create an Immutable Class</h2>
In order to create an immutable class, you should follow the below steps:
<p>
Make your class final, so that no other classes can extend it.
<p>
Make all your fields final, so that they're initialized only once inside the constructor and never modified afterward.
<p>
Don't expose setter methods.
<p>
When exposing methods which modify the state of the class, you must always return a new instance of the class.
<p>
If the class holds a mutable object:
<br>Inside the constructor, make sure to use a clone copy of the passed argument and never set your mutable field to the real instance passed through constructor, this is to prevent the clients who pass the object from modifying it afterwards.
<br>Make sure to always return a clone copy of the field and never return the real object instance.

<p>
<h2>3.1. Simple Immutable Class</h2>
<p>
Let's follow the above steps and create our own immutable class (ImmutableStudent.java).
<p>
<code><pre>

package com.programmer.gate.beans;
public final class ImmutableStudent {
    private final int id;
    private final String name;
    public ImmutableStudent(int id, String name) {
        this.name = name;
        this.id = id;
    }
    public int getId() {
        return id;
    }
    public String getName() {
        return name;
    }
}
</pre></code>
<p>
The above class is a very simple immutable class which doesn't hold any mutable object and never expose its fields in any way; these type of classes are normally used for caching purposes.
<p>


<h2>3.2. Passing Mutable Objects to Immutable Class</h2>

<p>
Now, let's complicate our example a bit, we create a mutable class called Age and add it as a field to ImmutableStudent:

<p>
<code><pre>
package com.programmer.gate.beans;
public class Age {
    private int day;
    private int month;
    private int year;
    public int getDay() {
        return day;
    }
    public void setDay(int day) {
    this.day = day;
    }
    public int getMonth() {
    return month;
    }
    public void setMonth(int month) {
    this.month = month;
    }
    public int getYear() {
    return year;
    }
    public void setYear(int year) {
    this.year = year;
    }
}

package com.programmer.gate.beans;
public final class ImmutableStudent {
    private final int id;
    private final String name;
    private final Age age;
    public ImmutableStudent(int id, String name, Age age) {
    this.name = name;
    this.id = id;
    this.age = age;
    }
    public int getId() {
    return id;
    }
    public String getName() {
    return name;
    }
    public Age getAge() {
    return age;
    }
}

</pre></code>
<p>

So, we added a new mutable field of type Age to our immutable class and assign it as normal inside the constructor.
<p>
Let's create a simple test class and verify that ImmutableStudent is no more immutable:
<p>

<code><pre>
public static void main(String[] args) {
    Age age = new Age();
    age.setDay(1);
    age.setMonth(1);
    age.setYear(1992);
    ImmutableStudent student = new ImmutableStudent(1, "Alex", age);
    System.out.println("Alex age year before modification = " + student.getAge().getYear());
    age.setYear(1993);
    System.out.println("Alex age year after modification = " + student.getAge().getYear());
}
</pre></code>
<p>

After running the above test, we get the following output:
<p>
<code><pre>
Alex age year before modification = 1992
Alex age year after modification = 1993
</pre></code>
<p>

We claim that ImmutableStudent is an immutable class whose state is never modified after construction, however in the above example we are able to modify the age of Alex even after constructing Alex object. If we go back to the implementation of ImmutableStudent constructor, we find that age field is being assigned to the instance of the Age argument, so whenever the referenced Age is modified outside the class, the change is reflected directly on the state of Alex. Check out my Pass by value OR pass by reference article to more deeply understand this concept.
<p>
In order to fix this and make our class again immutable, we follow step #5 from the steps that we mention above for creating an immutable class. So we modify the constructor in order to clone the passed argument of Age and use a clone instance of it.
<p>
<code><pre>
public ImmutableStudent(int id, String name, Age age) {
    this.name = name;
    this.id = id;
    Age cloneAge = new Age();
    cloneAge.setDay(age.getDay());
    cloneAge.setMonth(age.getMonth());
    cloneAge.setYear(age.getYear());
    this.age = cloneAge;
}
</pre></code>
<p>
Now, if we run our test, we get the following output:
<p>
<code><pre>
Alex age year before modification = 1992
Alex age year after modification = 1992
</pre></code>
<p>

As you see now, the age of Alex is never affected after construction and our class is back to immutable.

<p>
<h2>3.3. Returning Mutable Objects From Immutable Class</h2>
<p>
However, our class still has a leak and is not fully immutable, let's take the following test scenario:
<code><pre>
public static void main(String[] args) {
    Age age = new Age();
    age.setDay(1);
    age.setMonth(1);
    age.setYear(1992);
    ImmutableStudent student = new ImmutableStudent(1, "Alex", age);
    System.out.println("Alex age year before modification = " + student.getAge().getYear());
    student.getAge().setYear(1993);
    System.out.println("Alex age year after modification = " + student.getAge().getYear());
}
</pre></code>
<p>
Output:<p>
<code><pre>
Alex age year before modification = 1992
Alex age year after modification = 1993
</pre></code>
<p>
Again according to step #4, when returning mutable fields from immutable object, you should return a clone instance of them and not the real instance of the field.
<p>
So we modify getAge() in order to return a clone of the object's age:
<p>
<code><pre>
public Age getAge() {
    Age cloneAge = new Age();
    cloneAge.setDay(this.age.getDay());
    cloneAge.setMonth(this.age.getMonth());
    cloneAge.setYear(this.age.getYear());
    return cloneAge;
}
</pre></code>
<p>
Now the class becomes fully immutable and provides no way or method for other objects to modify its state.
<p>

<code><pre>
Alex age year before modification = 1992
Alex age year after modification = 1992
</pre></code>

<h2>4. Conclusion</h2>
<p>

Immutable classes provide a lot of advantages especially when used correctly in a multi-threaded environment. The only disadvantage is that they consume more memory than the traditional class since upon each modification of them a new object is created in the memory... but, a developer should not overestimate the memory consumption as its negligible compared to the advantages provided by these type of classes.
<p>
Finally, an object is immutable if it can present only one state to the other objects, no matter how and when they call its methods. If so it's thread safe by any definition of thread-safe.
<p>

</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java article"
title="vanillajava.blogspot.com: How and Why to Serialialize Lambdas">

<h2>Overview</h2>
Serializing lambdas can be useful in a number of use cases such as persisting
configuration, or as a visitor pattern [https://en.wikipedia.org/wiki/Visitor_pattern] to remote
resources.

For example, so I want to access a resource on a remote Map, I can use get/put, but
say I just want to return a field from the value of a Map, I can pass a lambda as a
visitor to extract the information I want.


<code><pre>

MapView userMap =
	Chassis.acquireMap("users", String.class, UserInfo.class);
	userMap.put("userid", new UserInfo("User's Name"));

// print out changes
userInfo.registerSubscriber(System.out::println);

// obtain just the fullName without downloading the whole object
String name= userMap.applyToKey("userid", u -> u.fullName);

// increment a counter atomically and trigger
// an updated event printed with the subscriber.
userMap.asyncUpdateKey("userid", ui -> {
	ui.usageCounter++;
	return ui;
	});

	// increment a counter and return the userid
	int count = userMap.syncUpdateKey("userid",
	ui -> { ui.usageCounter++; return ui;},
	ui -> ui.usageCounter);
</pre></code>


As you can see, it is easy to add various simple functions, or call a method to perform
the action you need. The only problem is that lambdas by default are not serializable.

<h2>Serializable Lambdas</h2>

A simple way to make a lambda serializable is to add a cast of & Serializable to
a variable referring to an implementation of the lambda.

<code><pre>
Function<UserInfo, String> fullNameFunc = (Function<UserInfo,String> & Serializable) ui -> ui.fullNa

String fullName = userInfo.applyToKey("userid", fullNameFunc);
</pre></code>


As you can see this introduces a lot of boiler plate. A key reason to use lambdas is to
avoid boiler plate code so what is the alternative?

<h2>Making lambdas serializable in your API.</h2>

Unfortunately the standard APIs cannot be changed or sub-classes to add this but if
you have your own API, you can use a Serializable interface.

<code><pre>
@FunctionalInterface
public interface SerializableFunction<I, O> extends Function<I, O>, Serializable {
}
</pre></code>

	This interface can be used as a parameter type.

<code><pre>
default <R> R applyToKey(K key, @NotNull SerializableFunction<E, R> function) {
	return function.apply(get(key));
}
</pre></code>

The user of your API doesn't have to explicitly say that the lambda is serializable.

<code><pre>
// obtain just the fullName without downloading the whole object

String name= userMap.applyToKey("userid", u -> u.fullName);
</pre></code>
The remote implementation serializes the lambda, executes it on the server and returns the result.


Similarly, there is methods for applying a lambda to the map as a whole.

To support queries, you can't use the built in stream() API if you want to implictly add
Serializable. However, you can create one which is as similar as possible.

<code><pre>
Map> collect = userMap.entrySet().query()
.filter(e -> e.getKey().matches("u*d"))
.map(e -> e.getValue())
.collect(Collectors.groupingBy(u -> u.usageCounter));
</pre></code>

or as a filtered subscription.

<code><pre>
// print userid which have a usageCounter > 10 each time it is incremented. userMap.entrySet().q
.filter(e -> e.getValue().usageCounter > 10)
.map(e -> e.getKey())
.subscribe(System.out::println);
</pre></code>

What makes this different from the regular stream API, is the data could be
distributed across many servers and you get a call back when that changes on any
server. Only the data you are interested in is sent across the network as the filter and
map is being applied on the server.

<h2>Java Serialization</h2>

Java Serialization is a good generalised, backwardly compatible serialization library.
Two of the most common problems that alternatives try to solve is performance and
cross platform serialization.

In the example above, fullNameFunc serializes to over 700 bytes and there is very
limited options to optimise this to either reduce the size of the message or the amount
of garbage it produces. By comparison, a straight forward binary YAML serialization
uses 348, with more options to optimise the serialization.


This raises the problem of how to serialize a lambda using an alternative, or cross
platform or faster serialization format.


<h2>Alternative Serialization</h2>


You can hook into the current serialization mechanism. This is not supported, and it
could change at any time but there is not other supported way to do this.

Never the less you can do this

<code><pre>

	Method writeReplace = lambda.getClass()
	.getDeclaredMethod("writeReplace");

	writeReplace.setAccessible(true);
	SerializedLambda sl = (SerializedLambda) 
	writeReplace.invoke(lambda);

</pre></code>


This gives you an object you can inspect to extract the contents of the lambda.
Either to see what method it calls, or to serialize it. On the deserialization side, you
can recreate this object and can <b>readResolve</b> on that object.

<h2>Standard API</h2>

Currently, there is no standard API for introspection of a lambda. This is done
deliberately so that in future the implementation can be changed, although there is no
public JEP to do so. However, like Unsafe which is internal API, I look forward to the
day when we can use a standard API rather than having to dig into the internals of
the JVM to implement solutions.

<h2>Conclusions</h2>

With some changes to your API you can make serializing lambdas largely transparent
to the developer. This makes implementing simple distributed systems easier to use
while giving you options to optimise how this is done.

Posted 22nd July 2015 by Peter Lawrey
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java note bookmark"
title="Square's Retrofit & Netflix's Feign (decode JSON to/from java)">
from http://blog.paralleluniverse.co/2014/05/15/modern-java-pt3/ ->
<br><br>
An interesting HTTP client API is Retrofit by Square. As you've seen, JAX-RS Client can 
automatically serialize and deserialize Java objects to JSON objects (or XML). 
<br><br>
Retrofit takes this automatic Java/REST translation (which, BTW, is not always a good thing; 
domain translations are often particularly leaky abstractions, but they're helpful if you keep 
yourself constrained to simple protocols) a step further, and translates the service target 
URL - not just the payload - to Java interfaces. 
<br><br>

Unfortunately, Retrofit uses the same annotation 
names as JAX-RS (server), only defined in a different package, which would make our example 
a bit ugly. Luckily, Retrofit has a clone/derivatice called Feign, by Netflix. 
<br><br>
The differences between Feign and Retrofit are not entirely clear to me. 
Although it seems that Retrofit is more widely adopted (it is older), while 
Feign is more easily customizable. In any case, the two are extremely similar, 
and can be used pretty much interchangeably
<br><br>
(jackson to decode JSON to/from java)
<br><br>

<code><pre>
Feign.Builder feignBuilder = Feign.builder()
        .contract(new JAXRSModule.JAXRSContract()) // we want JAX-RS annotations
        .encoder(new JacksonEncoder()) // we want Jackson because that's what Dropwizard uses already
        .decoder(new JacksonDecoder());
env.jersey().register(new ConsumerResource(feignBuilder));
	</pre></code><br>

Our consumer service will now look like this:
<br>
<code><pre>
@Path("/consumer")
@Produces(MediaType.TEXT_PLAIN)
public static class ConsumerResource {
    private final HelloWorldAPI hellowWorld;

    public ConsumerResource(Feign.Builder feignBuilder) {
        this.hellowWorld = feignBuilder.target(HelloWorldAPI.class, "http://localhost:8080");
    }

    @Timed
    @GET
    public String consume() {
        Saying saying = hellowWorld.hi("consumer");
        return String.format("The service is saying: %s (id: %d)",  saying.getContent(), saying.getId());
    }
}
	</pre></code>
<br>
<span class='mHG' style="color: red;">mpt: we shd look for current eq using Protocol Buffers/non-JSON/perhaps native binary fmt</span>
</div>


<div dojoType="com.trivedi.oPls.mPane" tags="java note snippet"
title="Creating / Using RuntimeExceptions">


	Exceptions
 If the client cannot do anything to recover from the exception, make it an unchecked exception. <br>
To create a custom unchecked exception, extend java.lang.RuntimeException

<code><pre>

public class ListTooLargeException extends RuntimeException{
    public ListTooLargeException(String message) {
        super(message);
    }
}
</pre></code>

	For unchecked exception, try and catch the exception is optional.
<code><pre>
public class CustomerService {
    public void analyze(List<String> data) {
        if (data.size() > 50) {
            throw new ListTooLargeException("List can't exceed 50 items!");            //runtime exception
        }    }
</pre></code>
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java note snippet"
title="USING Optional.empty()">

<code><pre>

	Optional<String> findName(String name){
*		return name !=null ? Optional.of(nameList.get(nameList.indexOf(name.toLowerCase()))) : Optional.empty();
	}
	searchedNameOptional.ifPresent(System.out::println);
</pre></code>

<br>-> * can be repl w/
<br>
<code><pre>
	return Optional.ofNullable(name).map(val->nameList.get(nameList.indexOf(val.toLowerCase()))).orElse("NA");
</pre></code>
   note-> THIS RETURNS A STRING (since we cover both eventualities of the optional)

<br>-> using an (anon here) Supplier in above->
<br>
<code><pre>
	.orElseGet(()->"NA");
</pre></code>

<br>-> using a filter w/Optional:
<br>
<code><pre>
	searchedNameOptional.filter(val->val.contains("am")).ifPresent(
</pre></code>
<br>
</div>

<div dojoType="com.trivedi.oPls.mPane" tags="java note bookmark snippet"
title="sun.misc.unsafe snippet/link">
<p>
sun.misc.unsafe <a href='http://hg.openjdk.java.net/jdk/jdk/raw-file/51a7629b68cf/jdk/src/jdk.unsupported/share/classes/sun/misc/Unsafe.java'>.java</a> file
<p>

<code><pre>
the Unsafe 
     * @throws  SecurityException  if a security manager exists and its
     *          {@code checkPropertiesAccess} method doesn't allow
     *          access to the system properties.
     */
...import jdk.internal.misc.VM;...

    @CallerSensitive
    public static Unsafe getUnsafe() {
        Class<?> caller = Reflection.getCallerClass();
        if (!VM.isSystemDomainLoader(caller.getClassLoader()))
            throw new SecurityException("Unsafe");
        return theUnsafe;
    }    }
</pre></code>
</div>
             <br>            </div>        </div><!--mPane div-->

	<div dojoType="dojox.widget.Toaster" id="toast" separator="&lt;hr&gt;" positionDirection="tr-down"></div>

</body>

</html>
